/*! For license information please see main.25d515e1.js.LICENSE.txt */
(()=>{var e={219:(e,t,i)=>{"use strict";var n=i(3763),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?o:a[e.$$typeof]||s}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var h=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(p){var s=g(i);s&&s!==p&&e(t,s,n)}var o=c(i);d&&(o=o.concat(d(i)));for(var a=l(t),f=l(i),m=0;m<o.length;++m){var _=o[m];if(!r[_]&&(!n||!n[_])&&(!f||!f[_])&&(!a||!a[_])){var v=u(i,_);try{h(t,_,v)}catch(b){}}}}return t}},4983:(e,t)=>{"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,g=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,f=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,_=i?Symbol.for("react.block"):60121,v=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,y=i?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case d:case r:case a:case o:case g:return e;default:switch(e=e&&e.$$typeof){case h:case u:case m:case f:case l:return e;default:return t}}case s:return t}}}function C(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=h,t.ContextProvider=l,t.Element=n,t.ForwardRef=u,t.Fragment=r,t.Lazy=m,t.Memo=f,t.Portal=s,t.Profiler=a,t.StrictMode=o,t.Suspense=g,t.isAsyncMode=function(e){return C(e)||w(e)===c},t.isConcurrentMode=C,t.isContextConsumer=function(e){return w(e)===h},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===u},t.isFragment=function(e){return w(e)===r},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===f},t.isPortal=function(e){return w(e)===s},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===g},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===r||e===d||e===a||e===o||e===g||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===l||e.$$typeof===h||e.$$typeof===u||e.$$typeof===v||e.$$typeof===b||e.$$typeof===y||e.$$typeof===_)},t.typeOf=w},3763:(e,t,i)=>{"use strict";e.exports=i(4983)},4961:(e,t,i)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[e.length-(1+t)]}function s(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!i(e[n],t[n]))return!1;return!0}function o(e,t){const i=e.length-1;t<i&&(e[t]=e[i]),e.pop()}function a(e,t,i){return function(e,t){let i=0,n=e-1;for(;i<=n;){const e=(i+n)/2|0,s=t(e);if(s<0)i=e+1;else{if(!(s>0))return e;n=e-1}}return-(i+1)}(e.length,(n=>i(e[n],t)))}function*l(e,t){let i,n;for(const s of e)void 0!==n&&t(n,s)?i.push(s):(i&&(yield i),i=[s]),n=s;i&&(yield i)}function h(e,t){for(let i=0;i<=e.length;i++)t(0===i?void 0:e[i-1],i===e.length?void 0:e[i])}function c(e,t){for(let i=0;i<e.length;i++)t(0===i?void 0:e[i-1],e[i],i+1===e.length?void 0:e[i+1])}function d(e){return e.filter((e=>!!e))}function u(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function g(e){return!Array.isArray(e)||0===e.length}function p(e){return Array.isArray(e)&&e.length>0}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;const i=new Set;return e.filter((e=>{const n=t(e);return!i.has(n)&&(i.add(n),!0)}))}function m(e,t){return e.length>0?e[0]:t}function _(e,t){let i="number"===typeof t?e:0;"number"===typeof t?i=e:(i=0,t=e);const n=[];if(i<=t)for(let s=i;s<t;s++)n.push(s);else for(let s=i;s>t;s--)n.push(s);return n}function v(e,t,i){const n=e.slice(0,t),s=e.slice(t);return n.concat(i,s)}function b(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))}function y(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))}function w(e,t){for(const i of t)e.push(i)}function C(e,t,i,n){const s=S(e,t);let r=e.splice(s,i);return void 0===r&&(r=[]),function(e,t,i){const n=S(e,t),s=e.length,r=i.length;e.length=s+r;for(let o=s-1;o>=n;o--)e[o+r]=e[o];for(let o=0;o<r;o++)e[o+n]=i[o]}(e,s,n),r}function S(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}var x;function k(e,t){return(i,n)=>t(e(i),e(n))}function L(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(e,i)=>{for(const n of t){const t=n(e,i);if(!x.isNeitherLessOrGreaterThan(t))return t}return x.neitherLessOrGreaterThan}}i.d(t,{Ct:()=>g,E4:()=>w,EI:()=>p,El:()=>a,Fy:()=>m,Hw:()=>T,RT:()=>n,SK:()=>u,TS:()=>M,U9:()=>E,UH:()=>o,V4:()=>C,VE:()=>k,Yc:()=>d,_A:()=>b,aI:()=>r,bS:()=>s,c1:()=>N,dM:()=>f,j3:()=>D,kj:()=>c,n:()=>l,nH:()=>L,nK:()=>v,pN:()=>h,r7:()=>y,y1:()=>_}),function(e){e.isLessThan=function(e){return e<0},e.isLessThanOrEqual=function(e){return e<=0},e.isGreaterThan=function(e){return e>0},e.isNeitherLessOrGreaterThan=function(e){return 0===e},e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0}(x||(x={}));const E=(e,t)=>e-t,M=(e,t)=>E(e?1:0,t?1:0);function T(e){return(t,i)=>-e(t,i)}class D{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(0!==this.length)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class N{static#e=(()=>this.empty=new N((e=>{})))();constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate((t=>(e.push(t),!0))),e}filter(e){return new N((t=>this.iterate((i=>!e(i)||t(i)))))}map(e){return new N((t=>this.iterate((i=>t(e(i))))))}findLast(e){let t;return this.iterate((i=>(e(i)&&(t=i),!0))),t}findLastMaxBy(e){let t,i=!0;return this.iterate((n=>((i||x.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0))),t}}},194:(e,t,i)=>{"use strict";function n(e,t){const i=function(e,t){for(let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1;i>=0;i--){if(t(e[i]))return i}return-1}(e,t);if(-1!==i)return e[i]}function s(e,t){const i=r(e,t);return-1===i?void 0:e[i]}function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(;i<n;){const s=Math.floor((i+n)/2);t(e[s])?i=s+1:n=s}return i-1}function o(e,t){const i=a(e,t);return i===e.length?void 0:e[i]}function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(;i<n;){const s=Math.floor((i+n)/2);t(e[s])?n=s:i=s+1}return i}i.d(t,{Cn:()=>h,TM:()=>u,Uk:()=>n,XP:()=>o,hw:()=>a,iM:()=>r,kh:()=>d,lx:()=>s,ot:()=>c,vJ:()=>l});class l{static#e=(()=>this.assertInvariants=!1)();constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(l.assertInvariants){if(this._prevFindLastPredicate)for(const t of this._array)if(this._prevFindLastPredicate(t)&&!e(t))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.");this._prevFindLastPredicate=e}const t=r(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,-1===t?void 0:this._array[t]}}function h(e,t){if(0===e.length)return;let i=e[0];for(let n=1;n<e.length;n++){const s=e[n];t(s,i)>0&&(i=s)}return i}function c(e,t){if(0===e.length)return;let i=e[0];for(let n=1;n<e.length;n++){const s=e[n];t(s,i)>=0&&(i=s)}return i}function d(e,t){return h(e,((e,i)=>-t(e,i)))}function u(e,t){if(0===e.length)return-1;let i=0;for(let n=1;n<e.length;n++){t(e[n],e[i])>0&&(i=n)}return i}},7289:(e,t,i)=>{"use strict";i.d(t,{Ft:()=>a,V7:()=>o,Xo:()=>l,ok:()=>s,xb:()=>r});var n=i(2240);function s(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function r(e){throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unreachable")}function o(e){e||(0,n.dz)(new n.D7("Soft Assertion Failed"))}function a(e){e()||(e(),(0,n.dz)(new n.D7("Assertion Failed")))}function l(e,t){let i=0;for(;i<e.length-1;){if(!t(e[i],e[i+1]))return!1;i++}return!0}},8591:(e,t,i)=>{"use strict";i.d(t,{$6:()=>b,A0:()=>w,EQ:()=>f,F6:()=>C,HC:()=>x,Qg:()=>h,SS:()=>c,Th:()=>g,Zv:()=>S,b7:()=>y,pc:()=>m,uC:()=>v,vb:()=>_,ve:()=>u,wR:()=>p});var n=i(1900),s=i(2240),r=i(9563),o=i(4663),a=i(1540),l=i(1546);function h(e){return!!e&&"function"===typeof e.then}function c(e){const t=new n.Qi,i=e(t.token),r=new Promise(((e,n)=>{const r=t.token.onCancellationRequested((()=>{r.dispose(),n(new s.AL)}));Promise.resolve(i).then((i=>{r.dispose(),t.dispose(),e(i)}),(e=>{r.dispose(),t.dispose(),n(e)}))}));return new class{cancel(){t.cancel(),t.dispose()}then(e,t){return r.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return r.finally(e)}}}class d{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{if(this.queuedPromise=null,this.isDisposed)return;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise((t=>{this.activePromise.then(e,e).then(t)}))}return new Promise(((e,t)=>{this.queuedPromise.then(e,t)}))}return this.activePromise=e(),new Promise(((e,t)=>{this.activePromise.then((t=>{this.activePromise=null,e(t)}),(e=>{this.activePromise=null,t(e)}))}))}dispose(){this.isDisposed=!0}}class u{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultDelay;this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})));const i=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===l.h?(e=>{let t=!0;return queueMicrotask((()=>{t&&(t=!1,e())})),{isTriggered:()=>t,dispose:()=>{t=!1}}})(i):((e,t)=>{let i=!0;const n=setTimeout((()=>{i=!1,t()}),e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(n),i=!1}}})(t,i),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new s.AL),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class g{constructor(e){this.delayer=new u(e),this.throttler=new d}trigger(e,t){return this.delayer.trigger((()=>this.throttler.queue(e)),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function p(e,t){return t?new Promise(((i,n)=>{const r=setTimeout((()=>{o.dispose(),i()}),e),o=t.onCancellationRequested((()=>{clearTimeout(r),o.dispose(),n(new s.AL)}))})):c((t=>p(e,t)))}function f(e){let t=arguments.length>2?arguments[2]:void 0;const i=setTimeout((()=>{e(),t&&n.dispose()}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=(0,o.s)((()=>{clearTimeout(i),t?.deleteAndLeak(n)}));return t?.add(n),n}class m{constructor(e,t){this._isDisposed=!1,this._token=-1,"function"===typeof e&&"number"===typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new s.D7("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){if(this._isDisposed)throw new s.D7("Calling 'setIfNotSet' on a disposed TimeoutTimer");-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}class _{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:globalThis;if(this.isDisposed)throw new s.D7("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const n=i.setInterval((()=>{e()}),t);this.disposable=(0,o.s)((()=>{i.clearInterval(n),this.disposable=void 0}))}dispose(){this.cancel(),this.isDisposed=!0}}class v{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}let b,y;y="function"!==typeof globalThis.requestIdleCallback||"function"!==typeof globalThis.cancelIdleCallback?(e,t)=>{(0,a._p)((()=>{if(i)return;const e=Date.now()+15,n={didTimeout:!0,timeRemaining:()=>Math.max(0,e-Date.now())};t(Object.freeze(n))}));let i=!1;return{dispose(){i||(i=!0)}}}:(e,t,i)=>{const n=e.requestIdleCallback(t,"number"===typeof i?{timeout:i}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(n))}}},b=e=>y(globalThis,e);class w{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=y(e,(()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class C extends w{constructor(e){super(globalThis,e)}}class S{get isRejected(){return 1===this.outcome?.outcome}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise(((e,t)=>{this.completeCallback=e,this.errorCallback=t}))}complete(e){return new Promise((t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()}))}error(e){return new Promise((t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()}))}cancel(){return this.error(new s.AL)}}var x;!function(e){e.settled=async function(e){let t;const i=await Promise.all(e.map((e=>e.then((e=>e),(e=>{t||(t=e)})))));if("undefined"!==typeof t)throw t;return i},e.withAsyncBody=function(e){return new Promise((async(t,i)=>{try{await e(t,i)}catch(n){i(n)}}))}}(x||(x={}));class k{static fromArray(e){return new k((t=>{t.emitMany(e)}))}static fromPromise(e){return new k((async t=>{t.emitMany(await e)}))}static fromPromises(e){return new k((async t=>{await Promise.all(e.map((async e=>t.emitOne(await e))))}))}static merge(e){return new k((async t=>{await Promise.all(e.map((async e=>{for await(const i of e)t.emitOne(i)})))}))}static#e=(()=>this.EMPTY=k.fromArray([]))();constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new r.vl,queueMicrotask((async()=>{const t={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{await Promise.resolve(e(t)),this.resolve()}catch(i){this.reject(i)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}[Symbol.asyncIterator](){let e=0;return{next:async()=>{for(;;){if(2===this._state)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(1===this._state)return{done:!0,value:void 0};await r.Jh.toPromise(this._onStateChanged.event)}},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new k((async i=>{for await(const n of e)i.emitOne(t(n))}))}map(e){return k.map(this,e)}static filter(e,t){return new k((async i=>{for await(const n of e)t(n)&&i.emitOne(n)}))}filter(e){return k.filter(this,e)}static coalesce(e){return k.filter(e,(e=>!!e))}coalesce(){return k.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return k.toPromise(this)}emitOne(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){0===this._state&&(this._state=1,this._onStateChanged.fire())}reject(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}}},1137:(e,t,i)=>{"use strict";i.d(t,{$l:()=>a,Gs:()=>u,MB:()=>o,Sw:()=>c,bb:()=>h,gN:()=>l,pJ:()=>d});var n=i(5177);const s="undefined"!==typeof Buffer;new n.d((()=>new Uint8Array(256)));let r;class o{static wrap(e){return s&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new o(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return s?this.buffer.toString():(r||(r=new TextDecoder),r.decode(this.buffer))}}function a(e,t){return(e[t+0]|0)>>>0|e[t+1]<<8>>>0}function l(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t}function h(e,t){return e[t]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3]}function c(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}function d(e,t){return e[t]}function u(e,t,i){e[i]=t}},8161:(e,t,i)=>{"use strict";function n(e){return e}i.d(t,{VV:()=>r,o5:()=>s});class s{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,"function"===typeof e?(this._fn=e,this._computeKey=n):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class r{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,"function"===typeof e?(this._fn=e,this._computeKey=n):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}},1900:(e,t,i)=>{"use strict";i.d(t,{Qi:()=>a,XO:()=>r});var n=i(9563);const s=Object.freeze((function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}));var r;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof o||!(!t||"object"!==typeof t)&&("boolean"===typeof t.isCancellationRequested&&"function"===typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Jh.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:s})}(r||(r={}));class o{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new n.vl),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class a{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token instanceof o&&this._token.cancel():this._token=r.Cancelled}dispose(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof o&&this._token.dispose():this._token=r.None}}},4808:(e,t,i)=>{"use strict";i.d(t,{W:()=>s});var n=i(2683);const s={...{add:(0,n.k)("add",6e4),plus:(0,n.k)("plus",6e4),gistNew:(0,n.k)("gist-new",6e4),repoCreate:(0,n.k)("repo-create",6e4),lightbulb:(0,n.k)("lightbulb",60001),lightBulb:(0,n.k)("light-bulb",60001),repo:(0,n.k)("repo",60002),repoDelete:(0,n.k)("repo-delete",60002),gistFork:(0,n.k)("gist-fork",60003),repoForked:(0,n.k)("repo-forked",60003),gitPullRequest:(0,n.k)("git-pull-request",60004),gitPullRequestAbandoned:(0,n.k)("git-pull-request-abandoned",60004),recordKeys:(0,n.k)("record-keys",60005),keyboard:(0,n.k)("keyboard",60005),tag:(0,n.k)("tag",60006),gitPullRequestLabel:(0,n.k)("git-pull-request-label",60006),tagAdd:(0,n.k)("tag-add",60006),tagRemove:(0,n.k)("tag-remove",60006),person:(0,n.k)("person",60007),personFollow:(0,n.k)("person-follow",60007),personOutline:(0,n.k)("person-outline",60007),personFilled:(0,n.k)("person-filled",60007),gitBranch:(0,n.k)("git-branch",60008),gitBranchCreate:(0,n.k)("git-branch-create",60008),gitBranchDelete:(0,n.k)("git-branch-delete",60008),sourceControl:(0,n.k)("source-control",60008),mirror:(0,n.k)("mirror",60009),mirrorPublic:(0,n.k)("mirror-public",60009),star:(0,n.k)("star",60010),starAdd:(0,n.k)("star-add",60010),starDelete:(0,n.k)("star-delete",60010),starEmpty:(0,n.k)("star-empty",60010),comment:(0,n.k)("comment",60011),commentAdd:(0,n.k)("comment-add",60011),alert:(0,n.k)("alert",60012),warning:(0,n.k)("warning",60012),search:(0,n.k)("search",60013),searchSave:(0,n.k)("search-save",60013),logOut:(0,n.k)("log-out",60014),signOut:(0,n.k)("sign-out",60014),logIn:(0,n.k)("log-in",60015),signIn:(0,n.k)("sign-in",60015),eye:(0,n.k)("eye",60016),eyeUnwatch:(0,n.k)("eye-unwatch",60016),eyeWatch:(0,n.k)("eye-watch",60016),circleFilled:(0,n.k)("circle-filled",60017),primitiveDot:(0,n.k)("primitive-dot",60017),closeDirty:(0,n.k)("close-dirty",60017),debugBreakpoint:(0,n.k)("debug-breakpoint",60017),debugBreakpointDisabled:(0,n.k)("debug-breakpoint-disabled",60017),debugHint:(0,n.k)("debug-hint",60017),terminalDecorationSuccess:(0,n.k)("terminal-decoration-success",60017),primitiveSquare:(0,n.k)("primitive-square",60018),edit:(0,n.k)("edit",60019),pencil:(0,n.k)("pencil",60019),info:(0,n.k)("info",60020),issueOpened:(0,n.k)("issue-opened",60020),gistPrivate:(0,n.k)("gist-private",60021),gitForkPrivate:(0,n.k)("git-fork-private",60021),lock:(0,n.k)("lock",60021),mirrorPrivate:(0,n.k)("mirror-private",60021),close:(0,n.k)("close",60022),removeClose:(0,n.k)("remove-close",60022),x:(0,n.k)("x",60022),repoSync:(0,n.k)("repo-sync",60023),sync:(0,n.k)("sync",60023),clone:(0,n.k)("clone",60024),desktopDownload:(0,n.k)("desktop-download",60024),beaker:(0,n.k)("beaker",60025),microscope:(0,n.k)("microscope",60025),vm:(0,n.k)("vm",60026),deviceDesktop:(0,n.k)("device-desktop",60026),file:(0,n.k)("file",60027),fileText:(0,n.k)("file-text",60027),more:(0,n.k)("more",60028),ellipsis:(0,n.k)("ellipsis",60028),kebabHorizontal:(0,n.k)("kebab-horizontal",60028),mailReply:(0,n.k)("mail-reply",60029),reply:(0,n.k)("reply",60029),organization:(0,n.k)("organization",60030),organizationFilled:(0,n.k)("organization-filled",60030),organizationOutline:(0,n.k)("organization-outline",60030),newFile:(0,n.k)("new-file",60031),fileAdd:(0,n.k)("file-add",60031),newFolder:(0,n.k)("new-folder",60032),fileDirectoryCreate:(0,n.k)("file-directory-create",60032),trash:(0,n.k)("trash",60033),trashcan:(0,n.k)("trashcan",60033),history:(0,n.k)("history",60034),clock:(0,n.k)("clock",60034),folder:(0,n.k)("folder",60035),fileDirectory:(0,n.k)("file-directory",60035),symbolFolder:(0,n.k)("symbol-folder",60035),logoGithub:(0,n.k)("logo-github",60036),markGithub:(0,n.k)("mark-github",60036),github:(0,n.k)("github",60036),terminal:(0,n.k)("terminal",60037),console:(0,n.k)("console",60037),repl:(0,n.k)("repl",60037),zap:(0,n.k)("zap",60038),symbolEvent:(0,n.k)("symbol-event",60038),error:(0,n.k)("error",60039),stop:(0,n.k)("stop",60039),variable:(0,n.k)("variable",60040),symbolVariable:(0,n.k)("symbol-variable",60040),array:(0,n.k)("array",60042),symbolArray:(0,n.k)("symbol-array",60042),symbolModule:(0,n.k)("symbol-module",60043),symbolPackage:(0,n.k)("symbol-package",60043),symbolNamespace:(0,n.k)("symbol-namespace",60043),symbolObject:(0,n.k)("symbol-object",60043),symbolMethod:(0,n.k)("symbol-method",60044),symbolFunction:(0,n.k)("symbol-function",60044),symbolConstructor:(0,n.k)("symbol-constructor",60044),symbolBoolean:(0,n.k)("symbol-boolean",60047),symbolNull:(0,n.k)("symbol-null",60047),symbolNumeric:(0,n.k)("symbol-numeric",60048),symbolNumber:(0,n.k)("symbol-number",60048),symbolStructure:(0,n.k)("symbol-structure",60049),symbolStruct:(0,n.k)("symbol-struct",60049),symbolParameter:(0,n.k)("symbol-parameter",60050),symbolTypeParameter:(0,n.k)("symbol-type-parameter",60050),symbolKey:(0,n.k)("symbol-key",60051),symbolText:(0,n.k)("symbol-text",60051),symbolReference:(0,n.k)("symbol-reference",60052),goToFile:(0,n.k)("go-to-file",60052),symbolEnum:(0,n.k)("symbol-enum",60053),symbolValue:(0,n.k)("symbol-value",60053),symbolRuler:(0,n.k)("symbol-ruler",60054),symbolUnit:(0,n.k)("symbol-unit",60054),activateBreakpoints:(0,n.k)("activate-breakpoints",60055),archive:(0,n.k)("archive",60056),arrowBoth:(0,n.k)("arrow-both",60057),arrowDown:(0,n.k)("arrow-down",60058),arrowLeft:(0,n.k)("arrow-left",60059),arrowRight:(0,n.k)("arrow-right",60060),arrowSmallDown:(0,n.k)("arrow-small-down",60061),arrowSmallLeft:(0,n.k)("arrow-small-left",60062),arrowSmallRight:(0,n.k)("arrow-small-right",60063),arrowSmallUp:(0,n.k)("arrow-small-up",60064),arrowUp:(0,n.k)("arrow-up",60065),bell:(0,n.k)("bell",60066),bold:(0,n.k)("bold",60067),book:(0,n.k)("book",60068),bookmark:(0,n.k)("bookmark",60069),debugBreakpointConditionalUnverified:(0,n.k)("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:(0,n.k)("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:(0,n.k)("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:(0,n.k)("debug-breakpoint-data-unverified",60072),debugBreakpointData:(0,n.k)("debug-breakpoint-data",60073),debugBreakpointDataDisabled:(0,n.k)("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:(0,n.k)("debug-breakpoint-log-unverified",60074),debugBreakpointLog:(0,n.k)("debug-breakpoint-log",60075),debugBreakpointLogDisabled:(0,n.k)("debug-breakpoint-log-disabled",60075),briefcase:(0,n.k)("briefcase",60076),broadcast:(0,n.k)("broadcast",60077),browser:(0,n.k)("browser",60078),bug:(0,n.k)("bug",60079),calendar:(0,n.k)("calendar",60080),caseSensitive:(0,n.k)("case-sensitive",60081),check:(0,n.k)("check",60082),checklist:(0,n.k)("checklist",60083),chevronDown:(0,n.k)("chevron-down",60084),chevronLeft:(0,n.k)("chevron-left",60085),chevronRight:(0,n.k)("chevron-right",60086),chevronUp:(0,n.k)("chevron-up",60087),chromeClose:(0,n.k)("chrome-close",60088),chromeMaximize:(0,n.k)("chrome-maximize",60089),chromeMinimize:(0,n.k)("chrome-minimize",60090),chromeRestore:(0,n.k)("chrome-restore",60091),circleOutline:(0,n.k)("circle-outline",60092),circle:(0,n.k)("circle",60092),debugBreakpointUnverified:(0,n.k)("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:(0,n.k)("terminal-decoration-incomplete",60092),circleSlash:(0,n.k)("circle-slash",60093),circuitBoard:(0,n.k)("circuit-board",60094),clearAll:(0,n.k)("clear-all",60095),clippy:(0,n.k)("clippy",60096),closeAll:(0,n.k)("close-all",60097),cloudDownload:(0,n.k)("cloud-download",60098),cloudUpload:(0,n.k)("cloud-upload",60099),code:(0,n.k)("code",60100),collapseAll:(0,n.k)("collapse-all",60101),colorMode:(0,n.k)("color-mode",60102),commentDiscussion:(0,n.k)("comment-discussion",60103),creditCard:(0,n.k)("credit-card",60105),dash:(0,n.k)("dash",60108),dashboard:(0,n.k)("dashboard",60109),database:(0,n.k)("database",60110),debugContinue:(0,n.k)("debug-continue",60111),debugDisconnect:(0,n.k)("debug-disconnect",60112),debugPause:(0,n.k)("debug-pause",60113),debugRestart:(0,n.k)("debug-restart",60114),debugStart:(0,n.k)("debug-start",60115),debugStepInto:(0,n.k)("debug-step-into",60116),debugStepOut:(0,n.k)("debug-step-out",60117),debugStepOver:(0,n.k)("debug-step-over",60118),debugStop:(0,n.k)("debug-stop",60119),debug:(0,n.k)("debug",60120),deviceCameraVideo:(0,n.k)("device-camera-video",60121),deviceCamera:(0,n.k)("device-camera",60122),deviceMobile:(0,n.k)("device-mobile",60123),diffAdded:(0,n.k)("diff-added",60124),diffIgnored:(0,n.k)("diff-ignored",60125),diffModified:(0,n.k)("diff-modified",60126),diffRemoved:(0,n.k)("diff-removed",60127),diffRenamed:(0,n.k)("diff-renamed",60128),diff:(0,n.k)("diff",60129),diffSidebyside:(0,n.k)("diff-sidebyside",60129),discard:(0,n.k)("discard",60130),editorLayout:(0,n.k)("editor-layout",60131),emptyWindow:(0,n.k)("empty-window",60132),exclude:(0,n.k)("exclude",60133),extensions:(0,n.k)("extensions",60134),eyeClosed:(0,n.k)("eye-closed",60135),fileBinary:(0,n.k)("file-binary",60136),fileCode:(0,n.k)("file-code",60137),fileMedia:(0,n.k)("file-media",60138),filePdf:(0,n.k)("file-pdf",60139),fileSubmodule:(0,n.k)("file-submodule",60140),fileSymlinkDirectory:(0,n.k)("file-symlink-directory",60141),fileSymlinkFile:(0,n.k)("file-symlink-file",60142),fileZip:(0,n.k)("file-zip",60143),files:(0,n.k)("files",60144),filter:(0,n.k)("filter",60145),flame:(0,n.k)("flame",60146),foldDown:(0,n.k)("fold-down",60147),foldUp:(0,n.k)("fold-up",60148),fold:(0,n.k)("fold",60149),folderActive:(0,n.k)("folder-active",60150),folderOpened:(0,n.k)("folder-opened",60151),gear:(0,n.k)("gear",60152),gift:(0,n.k)("gift",60153),gistSecret:(0,n.k)("gist-secret",60154),gist:(0,n.k)("gist",60155),gitCommit:(0,n.k)("git-commit",60156),gitCompare:(0,n.k)("git-compare",60157),compareChanges:(0,n.k)("compare-changes",60157),gitMerge:(0,n.k)("git-merge",60158),githubAction:(0,n.k)("github-action",60159),githubAlt:(0,n.k)("github-alt",60160),globe:(0,n.k)("globe",60161),grabber:(0,n.k)("grabber",60162),graph:(0,n.k)("graph",60163),gripper:(0,n.k)("gripper",60164),heart:(0,n.k)("heart",60165),home:(0,n.k)("home",60166),horizontalRule:(0,n.k)("horizontal-rule",60167),hubot:(0,n.k)("hubot",60168),inbox:(0,n.k)("inbox",60169),issueReopened:(0,n.k)("issue-reopened",60171),issues:(0,n.k)("issues",60172),italic:(0,n.k)("italic",60173),jersey:(0,n.k)("jersey",60174),json:(0,n.k)("json",60175),kebabVertical:(0,n.k)("kebab-vertical",60176),key:(0,n.k)("key",60177),law:(0,n.k)("law",60178),lightbulbAutofix:(0,n.k)("lightbulb-autofix",60179),linkExternal:(0,n.k)("link-external",60180),link:(0,n.k)("link",60181),listOrdered:(0,n.k)("list-ordered",60182),listUnordered:(0,n.k)("list-unordered",60183),liveShare:(0,n.k)("live-share",60184),loading:(0,n.k)("loading",60185),location:(0,n.k)("location",60186),mailRead:(0,n.k)("mail-read",60187),mail:(0,n.k)("mail",60188),markdown:(0,n.k)("markdown",60189),megaphone:(0,n.k)("megaphone",60190),mention:(0,n.k)("mention",60191),milestone:(0,n.k)("milestone",60192),gitPullRequestMilestone:(0,n.k)("git-pull-request-milestone",60192),mortarBoard:(0,n.k)("mortar-board",60193),move:(0,n.k)("move",60194),multipleWindows:(0,n.k)("multiple-windows",60195),mute:(0,n.k)("mute",60196),noNewline:(0,n.k)("no-newline",60197),note:(0,n.k)("note",60198),octoface:(0,n.k)("octoface",60199),openPreview:(0,n.k)("open-preview",60200),package:(0,n.k)("package",60201),paintcan:(0,n.k)("paintcan",60202),pin:(0,n.k)("pin",60203),play:(0,n.k)("play",60204),run:(0,n.k)("run",60204),plug:(0,n.k)("plug",60205),preserveCase:(0,n.k)("preserve-case",60206),preview:(0,n.k)("preview",60207),project:(0,n.k)("project",60208),pulse:(0,n.k)("pulse",60209),question:(0,n.k)("question",60210),quote:(0,n.k)("quote",60211),radioTower:(0,n.k)("radio-tower",60212),reactions:(0,n.k)("reactions",60213),references:(0,n.k)("references",60214),refresh:(0,n.k)("refresh",60215),regex:(0,n.k)("regex",60216),remoteExplorer:(0,n.k)("remote-explorer",60217),remote:(0,n.k)("remote",60218),remove:(0,n.k)("remove",60219),replaceAll:(0,n.k)("replace-all",60220),replace:(0,n.k)("replace",60221),repoClone:(0,n.k)("repo-clone",60222),repoForcePush:(0,n.k)("repo-force-push",60223),repoPull:(0,n.k)("repo-pull",60224),repoPush:(0,n.k)("repo-push",60225),report:(0,n.k)("report",60226),requestChanges:(0,n.k)("request-changes",60227),rocket:(0,n.k)("rocket",60228),rootFolderOpened:(0,n.k)("root-folder-opened",60229),rootFolder:(0,n.k)("root-folder",60230),rss:(0,n.k)("rss",60231),ruby:(0,n.k)("ruby",60232),saveAll:(0,n.k)("save-all",60233),saveAs:(0,n.k)("save-as",60234),save:(0,n.k)("save",60235),screenFull:(0,n.k)("screen-full",60236),screenNormal:(0,n.k)("screen-normal",60237),searchStop:(0,n.k)("search-stop",60238),server:(0,n.k)("server",60240),settingsGear:(0,n.k)("settings-gear",60241),settings:(0,n.k)("settings",60242),shield:(0,n.k)("shield",60243),smiley:(0,n.k)("smiley",60244),sortPrecedence:(0,n.k)("sort-precedence",60245),splitHorizontal:(0,n.k)("split-horizontal",60246),splitVertical:(0,n.k)("split-vertical",60247),squirrel:(0,n.k)("squirrel",60248),starFull:(0,n.k)("star-full",60249),starHalf:(0,n.k)("star-half",60250),symbolClass:(0,n.k)("symbol-class",60251),symbolColor:(0,n.k)("symbol-color",60252),symbolConstant:(0,n.k)("symbol-constant",60253),symbolEnumMember:(0,n.k)("symbol-enum-member",60254),symbolField:(0,n.k)("symbol-field",60255),symbolFile:(0,n.k)("symbol-file",60256),symbolInterface:(0,n.k)("symbol-interface",60257),symbolKeyword:(0,n.k)("symbol-keyword",60258),symbolMisc:(0,n.k)("symbol-misc",60259),symbolOperator:(0,n.k)("symbol-operator",60260),symbolProperty:(0,n.k)("symbol-property",60261),wrench:(0,n.k)("wrench",60261),wrenchSubaction:(0,n.k)("wrench-subaction",60261),symbolSnippet:(0,n.k)("symbol-snippet",60262),tasklist:(0,n.k)("tasklist",60263),telescope:(0,n.k)("telescope",60264),textSize:(0,n.k)("text-size",60265),threeBars:(0,n.k)("three-bars",60266),thumbsdown:(0,n.k)("thumbsdown",60267),thumbsup:(0,n.k)("thumbsup",60268),tools:(0,n.k)("tools",60269),triangleDown:(0,n.k)("triangle-down",60270),triangleLeft:(0,n.k)("triangle-left",60271),triangleRight:(0,n.k)("triangle-right",60272),triangleUp:(0,n.k)("triangle-up",60273),twitter:(0,n.k)("twitter",60274),unfold:(0,n.k)("unfold",60275),unlock:(0,n.k)("unlock",60276),unmute:(0,n.k)("unmute",60277),unverified:(0,n.k)("unverified",60278),verified:(0,n.k)("verified",60279),versions:(0,n.k)("versions",60280),vmActive:(0,n.k)("vm-active",60281),vmOutline:(0,n.k)("vm-outline",60282),vmRunning:(0,n.k)("vm-running",60283),watch:(0,n.k)("watch",60284),whitespace:(0,n.k)("whitespace",60285),wholeWord:(0,n.k)("whole-word",60286),window:(0,n.k)("window",60287),wordWrap:(0,n.k)("word-wrap",60288),zoomIn:(0,n.k)("zoom-in",60289),zoomOut:(0,n.k)("zoom-out",60290),listFilter:(0,n.k)("list-filter",60291),listFlat:(0,n.k)("list-flat",60292),listSelection:(0,n.k)("list-selection",60293),selection:(0,n.k)("selection",60293),listTree:(0,n.k)("list-tree",60294),debugBreakpointFunctionUnverified:(0,n.k)("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:(0,n.k)("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:(0,n.k)("debug-breakpoint-function-disabled",60296),debugStackframeActive:(0,n.k)("debug-stackframe-active",60297),circleSmallFilled:(0,n.k)("circle-small-filled",60298),debugStackframeDot:(0,n.k)("debug-stackframe-dot",60298),terminalDecorationMark:(0,n.k)("terminal-decoration-mark",60298),debugStackframe:(0,n.k)("debug-stackframe",60299),debugStackframeFocused:(0,n.k)("debug-stackframe-focused",60299),debugBreakpointUnsupported:(0,n.k)("debug-breakpoint-unsupported",60300),symbolString:(0,n.k)("symbol-string",60301),debugReverseContinue:(0,n.k)("debug-reverse-continue",60302),debugStepBack:(0,n.k)("debug-step-back",60303),debugRestartFrame:(0,n.k)("debug-restart-frame",60304),debugAlt:(0,n.k)("debug-alt",60305),callIncoming:(0,n.k)("call-incoming",60306),callOutgoing:(0,n.k)("call-outgoing",60307),menu:(0,n.k)("menu",60308),expandAll:(0,n.k)("expand-all",60309),feedback:(0,n.k)("feedback",60310),gitPullRequestReviewer:(0,n.k)("git-pull-request-reviewer",60310),groupByRefType:(0,n.k)("group-by-ref-type",60311),ungroupByRefType:(0,n.k)("ungroup-by-ref-type",60312),account:(0,n.k)("account",60313),gitPullRequestAssignee:(0,n.k)("git-pull-request-assignee",60313),bellDot:(0,n.k)("bell-dot",60314),debugConsole:(0,n.k)("debug-console",60315),library:(0,n.k)("library",60316),output:(0,n.k)("output",60317),runAll:(0,n.k)("run-all",60318),syncIgnored:(0,n.k)("sync-ignored",60319),pinned:(0,n.k)("pinned",60320),githubInverted:(0,n.k)("github-inverted",60321),serverProcess:(0,n.k)("server-process",60322),serverEnvironment:(0,n.k)("server-environment",60323),pass:(0,n.k)("pass",60324),issueClosed:(0,n.k)("issue-closed",60324),stopCircle:(0,n.k)("stop-circle",60325),playCircle:(0,n.k)("play-circle",60326),record:(0,n.k)("record",60327),debugAltSmall:(0,n.k)("debug-alt-small",60328),vmConnect:(0,n.k)("vm-connect",60329),cloud:(0,n.k)("cloud",60330),merge:(0,n.k)("merge",60331),export:(0,n.k)("export",60332),graphLeft:(0,n.k)("graph-left",60333),magnet:(0,n.k)("magnet",60334),notebook:(0,n.k)("notebook",60335),redo:(0,n.k)("redo",60336),checkAll:(0,n.k)("check-all",60337),pinnedDirty:(0,n.k)("pinned-dirty",60338),passFilled:(0,n.k)("pass-filled",60339),circleLargeFilled:(0,n.k)("circle-large-filled",60340),circleLarge:(0,n.k)("circle-large",60341),circleLargeOutline:(0,n.k)("circle-large-outline",60341),combine:(0,n.k)("combine",60342),gather:(0,n.k)("gather",60342),table:(0,n.k)("table",60343),variableGroup:(0,n.k)("variable-group",60344),typeHierarchy:(0,n.k)("type-hierarchy",60345),typeHierarchySub:(0,n.k)("type-hierarchy-sub",60346),typeHierarchySuper:(0,n.k)("type-hierarchy-super",60347),gitPullRequestCreate:(0,n.k)("git-pull-request-create",60348),runAbove:(0,n.k)("run-above",60349),runBelow:(0,n.k)("run-below",60350),notebookTemplate:(0,n.k)("notebook-template",60351),debugRerun:(0,n.k)("debug-rerun",60352),workspaceTrusted:(0,n.k)("workspace-trusted",60353),workspaceUntrusted:(0,n.k)("workspace-untrusted",60354),workspaceUnknown:(0,n.k)("workspace-unknown",60355),terminalCmd:(0,n.k)("terminal-cmd",60356),terminalDebian:(0,n.k)("terminal-debian",60357),terminalLinux:(0,n.k)("terminal-linux",60358),terminalPowershell:(0,n.k)("terminal-powershell",60359),terminalTmux:(0,n.k)("terminal-tmux",60360),terminalUbuntu:(0,n.k)("terminal-ubuntu",60361),terminalBash:(0,n.k)("terminal-bash",60362),arrowSwap:(0,n.k)("arrow-swap",60363),copy:(0,n.k)("copy",60364),personAdd:(0,n.k)("person-add",60365),filterFilled:(0,n.k)("filter-filled",60366),wand:(0,n.k)("wand",60367),debugLineByLine:(0,n.k)("debug-line-by-line",60368),inspect:(0,n.k)("inspect",60369),layers:(0,n.k)("layers",60370),layersDot:(0,n.k)("layers-dot",60371),layersActive:(0,n.k)("layers-active",60372),compass:(0,n.k)("compass",60373),compassDot:(0,n.k)("compass-dot",60374),compassActive:(0,n.k)("compass-active",60375),azure:(0,n.k)("azure",60376),issueDraft:(0,n.k)("issue-draft",60377),gitPullRequestClosed:(0,n.k)("git-pull-request-closed",60378),gitPullRequestDraft:(0,n.k)("git-pull-request-draft",60379),debugAll:(0,n.k)("debug-all",60380),debugCoverage:(0,n.k)("debug-coverage",60381),runErrors:(0,n.k)("run-errors",60382),folderLibrary:(0,n.k)("folder-library",60383),debugContinueSmall:(0,n.k)("debug-continue-small",60384),beakerStop:(0,n.k)("beaker-stop",60385),graphLine:(0,n.k)("graph-line",60386),graphScatter:(0,n.k)("graph-scatter",60387),pieChart:(0,n.k)("pie-chart",60388),bracket:(0,n.k)("bracket",60175),bracketDot:(0,n.k)("bracket-dot",60389),bracketError:(0,n.k)("bracket-error",60390),lockSmall:(0,n.k)("lock-small",60391),azureDevops:(0,n.k)("azure-devops",60392),verifiedFilled:(0,n.k)("verified-filled",60393),newline:(0,n.k)("newline",60394),layout:(0,n.k)("layout",60395),layoutActivitybarLeft:(0,n.k)("layout-activitybar-left",60396),layoutActivitybarRight:(0,n.k)("layout-activitybar-right",60397),layoutPanelLeft:(0,n.k)("layout-panel-left",60398),layoutPanelCenter:(0,n.k)("layout-panel-center",60399),layoutPanelJustify:(0,n.k)("layout-panel-justify",60400),layoutPanelRight:(0,n.k)("layout-panel-right",60401),layoutPanel:(0,n.k)("layout-panel",60402),layoutSidebarLeft:(0,n.k)("layout-sidebar-left",60403),layoutSidebarRight:(0,n.k)("layout-sidebar-right",60404),layoutStatusbar:(0,n.k)("layout-statusbar",60405),layoutMenubar:(0,n.k)("layout-menubar",60406),layoutCentered:(0,n.k)("layout-centered",60407),target:(0,n.k)("target",60408),indent:(0,n.k)("indent",60409),recordSmall:(0,n.k)("record-small",60410),errorSmall:(0,n.k)("error-small",60411),terminalDecorationError:(0,n.k)("terminal-decoration-error",60411),arrowCircleDown:(0,n.k)("arrow-circle-down",60412),arrowCircleLeft:(0,n.k)("arrow-circle-left",60413),arrowCircleRight:(0,n.k)("arrow-circle-right",60414),arrowCircleUp:(0,n.k)("arrow-circle-up",60415),layoutSidebarRightOff:(0,n.k)("layout-sidebar-right-off",60416),layoutPanelOff:(0,n.k)("layout-panel-off",60417),layoutSidebarLeftOff:(0,n.k)("layout-sidebar-left-off",60418),blank:(0,n.k)("blank",60419),heartFilled:(0,n.k)("heart-filled",60420),map:(0,n.k)("map",60421),mapHorizontal:(0,n.k)("map-horizontal",60421),foldHorizontal:(0,n.k)("fold-horizontal",60421),mapFilled:(0,n.k)("map-filled",60422),mapHorizontalFilled:(0,n.k)("map-horizontal-filled",60422),foldHorizontalFilled:(0,n.k)("fold-horizontal-filled",60422),circleSmall:(0,n.k)("circle-small",60423),bellSlash:(0,n.k)("bell-slash",60424),bellSlashDot:(0,n.k)("bell-slash-dot",60425),commentUnresolved:(0,n.k)("comment-unresolved",60426),gitPullRequestGoToChanges:(0,n.k)("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:(0,n.k)("git-pull-request-new-changes",60428),searchFuzzy:(0,n.k)("search-fuzzy",60429),commentDraft:(0,n.k)("comment-draft",60430),send:(0,n.k)("send",60431),sparkle:(0,n.k)("sparkle",60432),insert:(0,n.k)("insert",60433),mic:(0,n.k)("mic",60434),thumbsdownFilled:(0,n.k)("thumbsdown-filled",60435),thumbsupFilled:(0,n.k)("thumbsup-filled",60436),coffee:(0,n.k)("coffee",60437),snake:(0,n.k)("snake",60438),game:(0,n.k)("game",60439),vr:(0,n.k)("vr",60440),chip:(0,n.k)("chip",60441),piano:(0,n.k)("piano",60442),music:(0,n.k)("music",60443),micFilled:(0,n.k)("mic-filled",60444),repoFetch:(0,n.k)("repo-fetch",60445),copilot:(0,n.k)("copilot",60446),lightbulbSparkle:(0,n.k)("lightbulb-sparkle",60447),robot:(0,n.k)("robot",60448),sparkleFilled:(0,n.k)("sparkle-filled",60449),diffSingle:(0,n.k)("diff-single",60450),diffMultiple:(0,n.k)("diff-multiple",60451),surroundWith:(0,n.k)("surround-with",60452),share:(0,n.k)("share",60453),gitStash:(0,n.k)("git-stash",60454),gitStashApply:(0,n.k)("git-stash-apply",60455),gitStashPop:(0,n.k)("git-stash-pop",60456),vscode:(0,n.k)("vscode",60457),vscodeInsiders:(0,n.k)("vscode-insiders",60458),codeOss:(0,n.k)("code-oss",60459),runCoverage:(0,n.k)("run-coverage",60460),runAllCoverage:(0,n.k)("run-all-coverage",60461),coverage:(0,n.k)("coverage",60462),githubProject:(0,n.k)("github-project",60463),mapVertical:(0,n.k)("map-vertical",60464),foldVertical:(0,n.k)("fold-vertical",60464),mapVerticalFilled:(0,n.k)("map-vertical-filled",60465),foldVerticalFilled:(0,n.k)("fold-vertical-filled",60465),goToSearch:(0,n.k)("go-to-search",60466),percentage:(0,n.k)("percentage",60467),sortPercentage:(0,n.k)("sort-percentage",60467),attach:(0,n.k)("attach",60468)},...{dialogError:(0,n.k)("dialog-error","error"),dialogWarning:(0,n.k)("dialog-warning","warning"),dialogInfo:(0,n.k)("dialog-info","info"),dialogClose:(0,n.k)("dialog-close","close"),treeItemExpanded:(0,n.k)("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:(0,n.k)("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:(0,n.k)("tree-filter-on-type-off","list-selection"),treeFilterClear:(0,n.k)("tree-filter-clear","close"),treeItemLoading:(0,n.k)("tree-item-loading","loading"),menuSelection:(0,n.k)("menu-selection","check"),menuSubmenu:(0,n.k)("menu-submenu","chevron-right"),menuBarMore:(0,n.k)("menubar-more","more"),scrollbarButtonLeft:(0,n.k)("scrollbar-button-left","triangle-left"),scrollbarButtonRight:(0,n.k)("scrollbar-button-right","triangle-right"),scrollbarButtonUp:(0,n.k)("scrollbar-button-up","triangle-up"),scrollbarButtonDown:(0,n.k)("scrollbar-button-down","triangle-down"),toolBarMore:(0,n.k)("toolbar-more","more"),quickInputBack:(0,n.k)("quick-input-back","arrow-left"),dropDownButton:(0,n.k)("drop-down-button",60084),symbolCustomColor:(0,n.k)("symbol-customcolor",60252),exportIcon:(0,n.k)("export",60332),workspaceUnspecified:(0,n.k)("workspace-unspecified",60355),newLine:(0,n.k)("newline",60394),thumbsDownFilled:(0,n.k)("thumbsdown-filled",60435),thumbsUpFilled:(0,n.k)("thumbsup-filled",60436),gitFetch:(0,n.k)("git-fetch",60445),lightbulbSparkleAutofix:(0,n.k)("lightbulb-sparkle-autofix",60447),debugBreakpointPending:(0,n.k)("debug-breakpoint-pending",60377)}}},2683:(e,t,i)=>{"use strict";i.d(t,{J:()=>o,k:()=>r});var n=i(4622);const s=Object.create(null);function r(e,t){if((0,n.Kg)(t)){const i=s[t];if(void 0===i)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return s[e]=t,{id:e}}function o(){return s}},786:(e,t,i)=>{"use strict";function n(e,t){const i=[],n=[];for(const s of e)t.has(s)||i.push(s);for(const s of t)e.has(s)||n.push(s);return{removed:i,added:n}}function s(e,t){const i=new Set;for(const n of t)e.has(n)&&i.add(n);return i}i.d(t,{E:()=>s,Z:()=>n})},3800:(e,t,i)=>{"use strict";function n(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}i.d(t,{Q1:()=>a,bU:()=>s,hB:()=>r});class s{constructor(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,t)),this.b=0|Math.min(255,Math.max(0,i)),this.a=n(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class r{constructor(e,t,i,s){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=n(Math.max(Math.min(1,t),0),3),this.l=n(Math.max(Math.min(1,i),0),3),this.a=n(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=e.a,o=Math.max(t,i,n),a=Math.min(t,i,n);let l=0,h=0;const c=(a+o)/2,d=o-a;if(d>0){switch(h=Math.min(c<=.5?d/(2*c):d/(2-2*c),1),o){case t:l=(i-n)/d+(i<n?6:0);break;case i:l=(n-t)/d+2;break;case n:l=(t-i)/d+4}l*=60,l=Math.round(l)}return new r(l,h,c,s)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:o}=e;let a,l,h;if(0===i)a=l=h=n;else{const e=n<.5?n*(1+i):n+i-n*i,s=2*n-e;a=r._hue2rgb(s,e,t+1/3),l=r._hue2rgb(s,e,t),h=r._hue2rgb(s,e,t-1/3)}return new s(Math.round(255*a),Math.round(255*l),Math.round(255*h),o)}}class o{constructor(e,t,i,s){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=n(Math.max(Math.min(1,t),0),3),this.v=n(Math.max(Math.min(1,i),0),3),this.a=n(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=Math.max(t,i,n),r=s-Math.min(t,i,n),a=0===s?0:r/s;let l;return l=0===r?0:s===t?((i-n)/r%6+6)%6:s===i?(n-t)/r+2:(t-i)/r+4,new o(Math.round(60*l),a,s,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:r}=e,o=n*i,a=o*(1-Math.abs(t/60%2-1)),l=n-o;let[h,c,d]=[0,0,0];return t<60?(h=o,c=a):t<120?(h=a,c=o):t<180?(c=o,d=a):t<240?(c=a,d=o):t<300?(h=a,d=o):t<=360&&(h=o,d=a),h=Math.round(255*(h+l)),c=Math.round(255*(c+l)),d=Math.round(255*(d+l)),new s(h,c,d,r)}}class a{static fromHex(e){return a.Format.CSS.parseHex(e)||a.red}static equals(e,t){return!e&&!t||!(!e||!t)&&e.equals(t)}get hsla(){return this._hsla?this._hsla:r.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:o.fromRGBA(this.rgba)}constructor(e){if(!e)throw new Error("Color needs a value");if(e instanceof s)this.rgba=e;else if(e instanceof r)this._hsla=e,this.rgba=r.toRGBA(e);else{if(!(e instanceof o))throw new Error("Invalid color ctor argument");this._hsva=e,this.rgba=o.toRGBA(e)}}equals(e){return!!e&&s.equals(this.rgba,e.rgba)&&r.equals(this.hsla,e.hsla)&&o.equals(this.hsva,e.hsva)}getRelativeLuminance(){return n(.2126*a._relativeLuminanceForComponent(this.rgba.r)+.7152*a._relativeLuminanceForComponent(this.rgba.g)+.0722*a._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}lighten(e){return new a(new r(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new a(new r(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:r}=this.rgba;return new a(new s(t,i,n,r*e))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new a(new s(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||1!==e.rgba.a)return this;const{r:t,g:i,b:n,a:r}=this.rgba;return new a(new s(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-i),e.rgba.b-r*(e.rgba.b-n),1))}toString(){return this._toString||(this._toString=a.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(s-n)/s,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance();return i=i*(n-t.getRelativeLuminance())/n,e.darken(i)}static#e=(()=>this.white=new a(new s(255,255,255,1)))();static#t=(()=>this.black=new a(new s(0,0,0,1)))();static#i=(()=>this.red=new a(new s(255,0,0,1)))();static#n=(()=>this.blue=new a(new s(0,0,255,1)))();static#s=(()=>this.green=new a(new s(0,255,0,1)))();static#r=(()=>this.cyan=new a(new s(0,255,255,1)))();static#o=(()=>this.lightgrey=new a(new s(211,211,211,1)))();static#a=(()=>this.transparent=new a(new s(0,0,0,0)))()}!function(e){let t;!function(t){let i;!function(t){function i(e){const t=e.toString(16);return 2!==t.length?"0"+t:t}function n(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}t.formatRGB=function(t){return 1===t.rgba.a?`rgb(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b})`:e.Format.CSS.formatRGBA(t)},t.formatRGBA=function(e){return`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${+e.rgba.a.toFixed(2)})`},t.formatHSL=function(t){return 1===t.hsla.a?`hsl(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%)`:e.Format.CSS.formatHSLA(t)},t.formatHSLA=function(e){return`hsla(${e.hsla.h}, ${(100*e.hsla.s).toFixed(2)}%, ${(100*e.hsla.l).toFixed(2)}%, ${e.hsla.a.toFixed(2)})`},t.formatHex=function(e){return`#${i(e.rgba.r)}${i(e.rgba.g)}${i(e.rgba.b)}`},t.formatHexA=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&1===t.rgba.a?e.Format.CSS.formatHex(t):`#${i(t.rgba.r)}${i(t.rgba.g)}${i(t.rgba.b)}${i(Math.round(255*t.rgba.a))}`},t.format=function(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)},t.parseHex=function(t){const i=t.length;if(0===i)return null;if(35!==t.charCodeAt(0))return null;if(7===i){const i=16*n(t.charCodeAt(1))+n(t.charCodeAt(2)),r=16*n(t.charCodeAt(3))+n(t.charCodeAt(4)),o=16*n(t.charCodeAt(5))+n(t.charCodeAt(6));return new e(new s(i,r,o,1))}if(9===i){const i=16*n(t.charCodeAt(1))+n(t.charCodeAt(2)),r=16*n(t.charCodeAt(3))+n(t.charCodeAt(4)),o=16*n(t.charCodeAt(5))+n(t.charCodeAt(6)),a=16*n(t.charCodeAt(7))+n(t.charCodeAt(8));return new e(new s(i,r,o,a/255))}if(4===i){const i=n(t.charCodeAt(1)),r=n(t.charCodeAt(2)),o=n(t.charCodeAt(3));return new e(new s(16*i+i,16*r+r,16*o+o))}if(5===i){const i=n(t.charCodeAt(1)),r=n(t.charCodeAt(2)),o=n(t.charCodeAt(3)),a=n(t.charCodeAt(4));return new e(new s(16*i+i,16*r+r,16*o+o,(16*a+a)/255))}return null}}(i=t.CSS||(t.CSS={}))}(t=e.Format||(e.Format={}))}(a||(a={}))},2395:(e,t,i)=>{"use strict";i.d(t,{uP:()=>c,F1:()=>o});class n{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}var s=i(2707);class r{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function o(e,t,i){return new c(new r(e),new r(t)).ComputeDiff(i).changes}class a{static Assert(e,t){if(!e)throw new Error(t)}}class l{static Copy(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}static Copy2(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}}class h{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new n(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class c{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[n,s,r]=c._getElements(e),[o,a,l]=c._getElements(t);this._hasStrings=r&&l,this._originalStringElements=n,this._originalElementsOrHash=s,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&"string"===typeof e[0]}static _getElements(e){const t=e.getElements();if(c._isStringArray(t)){const e=new Int32Array(t.length);for(let i=0,n=t.length;i<n;i++)e[i]=(0,s.e2)(t[i],0);return[t,e,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[t])}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;return c._getStrictElement(this._originalSequence,e)===c._getStrictElement(this._modifiedSequence,t)}static _getStrictElement(e,t){return"function"===typeof e.getStrictElement?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[t])}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[t])}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,s){const r=[!1];let o=this.ComputeDiffRecursive(e,t,i,n,r);return s&&(o=this.PrettifyChanges(o)),{quitEarly:r[0],changes:o}}ComputeDiffRecursive(e,t,i,s,r){for(r[0]=!1;e<=t&&i<=s&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&s>=i&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||i>s){let r;return i<=s?(a.Assert(e===t+1,"originalStart should only be one more than originalEnd"),r=[new n(e,0,i,s-i+1)]):e<=t?(a.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),r=[new n(e,t-e+1,i,0)]):(a.Assert(e===t+1,"originalStart should only be one more than originalEnd"),a.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),r=[]),r}const o=[0],l=[0],h=this.ComputeRecursionPoint(e,t,i,s,o,l,r),c=o[0],d=l[0];if(null!==h)return h;if(!r[0]){const o=this.ComputeDiffRecursive(e,c,i,d,r);let a=[];return a=r[0]?[new n(c+1,t-(c+1)+1,d+1,s-(d+1)+1)]:this.ComputeDiffRecursive(c+1,t,d+1,s,r),this.ConcatenateChanges(o,a)}return[new n(e,t-e+1,i,s-i+1)]}WALKTRACE(e,t,i,s,r,o,a,l,c,d,u,g,p,f,m,_,v,b){let y=null,w=null,C=new h,S=t,x=i,k=p[0]-_[0]-s,L=-1073741824,E=this.m_forwardHistory.length-1;do{const t=k+e;t===S||t<x&&c[t-1]<c[t+1]?(f=(u=c[t+1])-k-s,u<L&&C.MarkNextChange(),L=u,C.AddModifiedElement(u+1,f),k=t+1-e):(f=(u=c[t-1]+1)-k-s,u<L&&C.MarkNextChange(),L=u-1,C.AddOriginalElement(u,f+1),k=t-1-e),E>=0&&(e=(c=this.m_forwardHistory[E])[0],S=1,x=c.length-1)}while(--E>=-1);if(y=C.getReverseChanges(),b[0]){let e=p[0]+1,t=_[0]+1;if(null!==y&&y.length>0){const i=y[y.length-1];e=Math.max(e,i.getOriginalEnd()),t=Math.max(t,i.getModifiedEnd())}w=[new n(e,g-e+1,t,m-t+1)]}else{C=new h,S=o,x=a,k=p[0]-_[0]-l,L=1073741824,E=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const e=k+r;e===S||e<x&&d[e-1]>=d[e+1]?(f=(u=d[e+1]-1)-k-l,u>L&&C.MarkNextChange(),L=u+1,C.AddOriginalElement(u+1,f+1),k=e+1-r):(f=(u=d[e-1])-k-l,u>L&&C.MarkNextChange(),L=u,C.AddModifiedElement(u+1,f+1),k=e-1-r),E>=0&&(r=(d=this.m_reverseHistory[E])[0],S=1,x=d.length-1)}while(--E>=-1);w=C.getChanges()}return this.ConcatenateChanges(y,w)}ComputeRecursionPoint(e,t,i,s,r,o,a){let h=0,c=0,d=0,u=0,g=0,p=0;e--,i--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const f=t-e+(s-i),m=f+1,_=new Int32Array(m),v=new Int32Array(m),b=s-i,y=t-e,w=e-i,C=t-s,S=(y-b)%2===0;_[b]=e,v[y]=t,a[0]=!1;for(let x=1;x<=f/2+1;x++){let f=0,k=0;d=this.ClipDiagonalBound(b-x,x,b,m),u=this.ClipDiagonalBound(b+x,x,b,m);for(let e=d;e<=u;e+=2){h=e===d||e<u&&_[e-1]<_[e+1]?_[e+1]:_[e-1]+1,c=h-(e-b)-w;const i=h;for(;h<t&&c<s&&this.ElementsAreEqual(h+1,c+1);)h++,c++;if(_[e]=h,h+c>f+k&&(f=h,k=c),!S&&Math.abs(e-y)<=x-1&&h>=v[e])return r[0]=h,o[0]=c,i<=v[e]&&x<=1448?this.WALKTRACE(b,d,u,w,y,g,p,C,_,v,h,t,r,c,s,o,S,a):null}const L=(f-e+(k-i)-x)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(f,L))return a[0]=!0,r[0]=f,o[0]=k,L>0&&x<=1448?this.WALKTRACE(b,d,u,w,y,g,p,C,_,v,h,t,r,c,s,o,S,a):(e++,i++,[new n(e,t-e+1,i,s-i+1)]);g=this.ClipDiagonalBound(y-x,x,y,m),p=this.ClipDiagonalBound(y+x,x,y,m);for(let n=g;n<=p;n+=2){h=n===g||n<p&&v[n-1]>=v[n+1]?v[n+1]-1:v[n-1],c=h-(n-y)-C;const l=h;for(;h>e&&c>i&&this.ElementsAreEqual(h,c);)h--,c--;if(v[n]=h,S&&Math.abs(n-b)<=x&&h<=_[n])return r[0]=h,o[0]=c,l>=_[n]&&x<=1448?this.WALKTRACE(b,d,u,w,y,g,p,C,_,v,h,t,r,c,s,o,S,a):null}if(x<=1447){let e=new Int32Array(u-d+2);e[0]=b-d+1,l.Copy2(_,d,e,1,u-d+1),this.m_forwardHistory.push(e),e=new Int32Array(p-g+2),e[0]=y-g+1,l.Copy2(v,g,e,1,p-g+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(b,d,u,w,y,g,p,C,_,v,h,t,r,c,s,o,S,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,o=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!o||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const e=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!e)break;i.originalStart++,i.modifiedStart++}const a=[null];t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],a)&&(e[t]=a[0],e.splice(t+1,1),t--)}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,s=0;if(t>0){const i=e[t-1];n=i.originalStart+i.originalLength,s=i.modifiedStart+i.modifiedLength}const r=i.originalLength>0,o=i.modifiedLength>0;let a=0,l=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let e=1;;e++){const t=i.originalStart-e,h=i.modifiedStart-e;if(t<n||h<s)break;if(r&&!this.OriginalElementsAreEqual(t,t+i.originalLength))break;if(o&&!this.ModifiedElementsAreEqual(h,h+i.modifiedLength))break;const c=(t===n&&h===s?5:0)+this._boundaryScore(t,i.originalLength,h,i.modifiedLength);c>l&&(l=c,a=e)}i.originalStart-=a,i.modifiedStart-=a;const h=[null];t>0&&this.ChangesOverlap(e[t-1],e[t],h)&&(e[t-1]=h[0],e.splice(t,1),t++)}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const i=e[t-1],n=e[t],s=n.originalStart-i.originalStart-i.originalLength,r=i.originalStart,o=n.originalStart+n.originalLength,a=o-r,l=i.modifiedStart,h=n.modifiedStart+n.modifiedLength,c=h-l;if(s<5&&a<20&&c<20){const e=this._findBetterContiguousSequence(r,a,l,c,s);if(e){const[t,r]=e;t===i.originalStart+i.originalLength&&r===i.modifiedStart+i.modifiedLength||(i.originalLength=t-i.originalStart,i.modifiedLength=r-i.modifiedStart,n.originalStart=t+s,n.modifiedStart=r+s,n.originalLength=o-n.originalStart,n.modifiedLength=h-n.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,s){if(t<s||n<s)return null;const r=e+t-s+1,o=i+n-s+1;let a=0,l=0,h=0;for(let c=e;c<r;c++)for(let e=i;e<o;e++){const t=this._contiguousSequenceScore(c,e,s);t>0&&t>a&&(a=t,l=c,h=e)}return a>0?[l,h]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let s=0;s<i;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;n+=this._originalStringElements[e+s].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(i,n)?1:0)}ConcatenateChanges(e,t){const i=[];if(0===e.length||0===t.length)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return l.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],l.Copy(t,1,n,e.length,t.length-1),n}{const i=new Array(e.length+t.length);return l.Copy(e,0,i,0,e.length),l.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,i){if(a.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),a.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new n(s,r,o,a),!0}return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const s=t%2===0;if(e<0){return s===(i%2===0)?0:1}return s===((n-i-1)%2===0)?n-1:n-2}}},414:(e,t,i)=>{"use strict";i.d(t,{KC:()=>o,S3:()=>r,nx:()=>s});var n=i(4961);const s=(e,t)=>e===t;function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return(t,i)=>n.aI(t,i,e)}function o(e,t,i){if(void 0!==i){return void 0===e||null===e||void 0===t||null===t?t===e:i(e,t)}{const t=e;return(e,i)=>void 0===e||null===e||void 0===i||null===i?i===e:t(e,i)}}new WeakMap},2240:(e,t,i)=>{"use strict";i.d(t,{AL:()=>h,D7:()=>f,EM:()=>g,MB:()=>l,M_:()=>r,Qg:()=>d,aD:()=>c,cU:()=>o,dz:()=>s,iH:()=>u});const n=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack){if(p.isErrorNoTelemetry(e))throw new p(e.message+"\n\n"+e.stack);throw new Error(e.message+"\n\n"+e.stack)}throw e}),0)}}emit(e){this.listeners.forEach((t=>{t(e)}))}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function s(e){l(e)||n.onUnexpectedError(e)}function r(e){l(e)||n.onUnexpectedExternalError(e)}function o(e){if(e instanceof Error){const{name:t,message:i}=e;return{$isError:!0,name:t,message:i,stack:e.stacktrace||e.stack,noTelemetry:p.isErrorNoTelemetry(e)}}return e}const a="Canceled";function l(e){return e instanceof h||e instanceof Error&&e.name===a&&e.message===a}class h extends Error{constructor(){super(a),this.name=this.message}}function c(){const e=new Error(a);return e.name=e.message,e}function d(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function u(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}class g extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class p extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof p)return e;const t=new p;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return"CodeExpectedError"===e.name}}class f extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,f.prototype)}}},9563:(e,t,i)=>{"use strict";i.d(t,{Jh:()=>l,QT:()=>w,Qy:()=>_,Wj:()=>x,_B:()=>C,at:()=>S,fV:()=>b,uI:()=>y,vl:()=>m});var n=i(2240),s=i(954),r=i(4663),o=i(2194),a=i(1340);var l;!function(e){function t(e){false}function i(e){return function(t){let i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=!1;return i=e((e=>{if(!s)return i?i.dispose():s=!0,t.call(n,e)}),null,arguments.length>2?arguments[2]:void 0),s&&i.dispose(),i}}function n(e,t,i){return o((function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((e=>i.call(n,t(e))),null,arguments.length>2?arguments[2]:void 0)}),i)}function s(e,t,i){return o((function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((e=>t(e)&&i.call(n,e)),null,arguments.length>2?arguments[2]:void 0)}),i)}function o(e,i){let n;const s={onWillAddFirstListener(){n=e(r.fire,r)},onDidRemoveLastListener(){n?.dispose()}};i||t();const r=new m(s);return i?.add(r),r.event}function a(e,i){let n,s,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>6?arguments[6]:void 0,d=0;const u={leakWarningThreshold:arguments.length>5?arguments[5]:void 0,onWillAddFirstListener(){n=e((e=>{d++,s=i(s,e),l&&!r&&(g.fire(s),s=void 0),o=()=>{const e=s;s=void 0,r=void 0,(!l||d>1)&&g.fire(e),d=0},"number"===typeof a?(clearTimeout(r),r=setTimeout(o,a)):void 0===r&&(r=0,queueMicrotask(o))}))},onWillRemoveListener(){h&&d>0&&o?.()},onDidRemoveLastListener(){o=void 0,n.dispose()}};c||t();const g=new m(u);return c?.add(g),g.event}e.None=()=>r.jG.None,e.defer=function(e,t){return a(e,(()=>{}),0,void 0,!0,void 0,t)},e.once=i,e.onceIf=function(t,i){return e.once(e.filter(t,i))},e.map=n,e.forEach=function(e,t,i){return o((function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((e=>{t(e),i.call(n,e)}),null,arguments.length>2?arguments[2]:void 0)}),i)},e.filter=s,e.signal=function(e){return e},e.any=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return function(e,t){t instanceof Array?t.push(e):t&&t.add(e);return e}((0,r.qE)(...t.map((t=>t((t=>e.call(i,t)))))),n)}},e.reduce=function(e,t,i,s){let r=i;return n(e,(e=>(r=t(r,e),r)),s)},e.debounce=a,e.accumulate=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return e.debounce(t,((e,t)=>e?(e.push(t),e):[t]),i,void 0,!0,void 0,n)},e.latch=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e===t,n=!0;return s(e,(e=>{const s=n||!i(e,t);return n=!1,t=e,s}),arguments.length>2?arguments[2]:void 0)},e.split=function(t,i,n){return[e.filter(t,i,n),e.filter(t,(e=>!i(e)),n)]},e.buffer=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>3?arguments[3]:void 0,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).slice(),s=e((e=>{n?n.push(e):o.fire(e)}));i&&i.add(s);const r=()=>{n?.forEach((e=>o.fire(e))),n=null},o=new m({onWillAddFirstListener(){s||(s=e((e=>o.fire(e))),i&&i.add(s))},onDidAddFirstListener(){n&&(t?setTimeout(r):r())},onDidRemoveLastListener(){s&&s.dispose(),s=null}});return i&&i.add(o),o.event},e.chain=function(e,t){return(i,n,s)=>{const r=t(new h);return e((function(e){const t=r.evaluate(e);t!==l&&i.call(n,t)}),void 0,s)}};const l=Symbol("HaltChainable");class h{constructor(){this.steps=[]}map(e){return this.steps.push(e),this}forEach(e){return this.steps.push((t=>(e(t),t))),this}filter(e){return this.steps.push((t=>e(t)?t:l)),this}reduce(e,t){let i=t;return this.steps.push((t=>(i=e(i,t),i))),this}latch(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e,t)=>e===t,i=!0;return this.steps.push((n=>{const s=i||!t(n,e);return i=!1,e=n,s?n:l})),this}evaluate(e){for(const t of this.steps)if((e=t(e))===l)break;return e}}e.fromNodeEventEmitter=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;const n=function(){return s.fire(i(...arguments))},s=new m({onWillAddFirstListener:()=>e.on(t,n),onDidRemoveLastListener:()=>e.removeListener(t,n)});return s.event},e.fromDOMEventEmitter=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;const n=function(){return s.fire(i(...arguments))},s=new m({onWillAddFirstListener:()=>e.addEventListener(t,n),onDidRemoveLastListener:()=>e.removeEventListener(t,n)});return s.event},e.toPromise=function(e){return new Promise((t=>i(e)(t)))},e.fromPromise=function(e){const t=new m;return e.then((e=>{t.fire(e)}),(()=>{t.fire(void 0)})).finally((()=>{t.dispose()})),t.event},e.forward=function(e,t){return e((e=>t.fire(e)))},e.runAndSubscribe=function(e,t,i){return t(i),e((e=>t(e)))};class c{constructor(e,i){this._observable=e,this._counter=0,this._hasChanged=!1;const n={onWillAddFirstListener:()=>{e.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{e.removeObserver(this)}};i||t(),this.emitter=new m(n),i&&i.add(this.emitter)}beginUpdate(e){this._counter++}handlePossibleChange(e){}handleChange(e,t){this._hasChanged=!0}endUpdate(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}e.fromObservable=function(e,t){return new c(e,t).emitter.event},e.fromObservableLight=function(e){return(t,i,n)=>{let s=0,o=!1;const a={beginUpdate(){s++},endUpdate(){s--,0===s&&(e.reportChanges(),o&&(o=!1,t.call(i)))},handlePossibleChange(){},handleChange(){o=!0}};e.addObserver(a),e.reportChanges();const l={dispose(){e.removeObserver(a)}};return n instanceof r.Cm?n.add(l):Array.isArray(n)&&n.push(l),l}}}(l||(l={}));class h{static#e=(()=>this.all=new Set)();static#t=(()=>this._idPool=0)();constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${h._idPool++}`,h.all.add(this)}start(e){this._stopWatch=new a.W,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}class c{static#e=(()=>this._idPool=1)();constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(c._idPool++).toString(16).padStart(3,"0");this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*i;const[e,n]=this.getMostFrequentStack(),s=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${n}):`;console.warn(s),console.warn(e);const r=new u(s,e);this._errorHandler(r)}return()=>{const t=this._stacks.get(e.value)||0;this._stacks.set(e.value,t-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,n]of this._stacks)(!e||t<n)&&(e=[i,n],t=n);return e}}class d{static create(){const e=new Error;return new d(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class u extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class g extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class p{constructor(e){this.value=e}}let f;class m{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new c(e?.onListenerError??n.dz,this._options?.leakWarningThreshold??-1):void 0,this._perfMon=this._options?._profName?new h(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,i)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const e=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(e);const t=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],i=new g(`${e}. HINT: Stack shows most frequent listener (${t[1]}-times)`,t[0]);return(this._options?.onListenerError||n.dz)(i),r.jG.None}if(this._disposed)return r.jG.None;t&&(e=e.bind(t));const s=new p(e);let o;this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(s.stack=d.create(),o=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof p?(this._deliveryQueue??=new v,this._listeners=[this._listeners,s]):this._listeners.push(s):(this._options?.onWillAddFirstListener?.(this),this._listeners=s,this._options?.onDidAddFirstListener?.(this)),this._size++;const a=(0,r.s)((()=>{f?.unregister(a),o?.(),this._removeListener(s)}));if(i instanceof r.Cm?i.add(a):Array.isArray(i)&&i.push(a),f){const e=(new Error).stack.split("\n").slice(2,3).join("\n").trim(),t=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(e);f.register(a,t?.[2]??e,a)}return a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(1===this._size)return this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),void(this._size=0);const t=this._listeners,i=t.indexOf(e);if(-1===i)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const n=this._deliveryQueue.current===this;if(2*this._size<=t.length){let e=0;for(let i=0;i<t.length;i++)t[i]?t[e++]=t[i]:n&&(this._deliveryQueue.end--,e<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=e}}_deliver(e,t){if(!e)return;const i=this._options?.onListenerError||n.dz;if(i)try{e.value(t)}catch(s){i(s)}else e.value(t)}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof p)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}else;this._perfMon?.stop()}hasListeners(){return this._size>0}}const _=()=>new v;class v{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class b extends m{constructor(e){super(e),this._isPaused=0,this._eventQueue=new o.w,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0===--this._isPaused)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}class y extends b{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout((()=>{this._handle=void 0,this.resume()}),this._delay)),super.fire(e)}}class w extends m{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),1===this._queuedEvents.length&&queueMicrotask((()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach((e=>super.fire(e))),this._queuedEvents=[]})))}}class C{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new m({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};this.events.push(t),this.hasListeners&&this.hook(t);return(0,r.s)((0,s.P)((()=>{this.hasListeners&&this.unhook(t);const e=this.events.indexOf(t);this.events.splice(e,1)})))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach((e=>this.hook(e)))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach((e=>this.unhook(e)))}hook(e){e.listener=e.event((e=>this.emitter.fire(e)))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(const e of this.events)e.listener?.dispose();this.events=[]}}class S{constructor(){this.data=[]}wrapEvent(e,t,i){return(n,s,r)=>e((e=>{const r=this.data[this.data.length-1];if(!t)return void(r?r.buffers.push((()=>n.call(s,e))):n.call(s,e));const o=r;o?(o.items??=[],o.items.push(e),0===o.buffers.length&&r.buffers.push((()=>{o.reducedResult??=i?o.items.reduce(t,i):o.items.reduce(t),n.call(s,o.reducedResult)}))):n.call(s,t(i,e))}),void 0,r)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach((e=>e())),i}}class x{constructor(){this.listening=!1,this.inputEvent=l.None,this.inputEventListener=r.jG.None,this.emitter=new m({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}},6959:(e,t,i)=>{"use strict";i.d(t,{TH:()=>o,Zn:()=>l,_1:()=>h,kb:()=>a});var n=i(6744),s=(i(1540),i(6637));function r(e){return 47===e||92===e}function o(e){return e.replace(/[\\/]/g,n.SA.sep)}function a(e){return-1===e.indexOf("/")&&(e=o(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.SA.sep;if(!e)return"";const i=e.length,s=e.charCodeAt(0);if(r(s)){if(r(e.charCodeAt(1))&&!r(e.charCodeAt(2))){let n=3;const s=n;for(;n<i&&!r(e.charCodeAt(n));n++);if(s!==n&&!r(e.charCodeAt(n+1)))for(n+=1;n<i;n++)if(r(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}return t}if(c(s)&&58===e.charCodeAt(1))return r(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let o=e.indexOf("://");if(-1!==o)for(o+=3;o<i;o++)if(r(e.charCodeAt(o)))return e.slice(0,o+1);return""}function h(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.Vn;if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(i){if(!(0,s.ns)(e,t))return!1;if(t.length===e.length)return!0;let i=t.length;return t.charAt(t.length-1)===r&&i--,e.charAt(i)===r}return t.charAt(t.length-1)!==r&&(t+=r),0===e.indexOf(t)}function c(e){return e>=65&&e<=90||e>=97&&e<=122}},954:(e,t,i)=>{"use strict";function n(e,t){const i=this;let n,s=!1;return function(){if(s)return n;if(s=!0,t)try{n=e.apply(i,arguments)}finally{t()}else n=e.apply(i,arguments);return n}}i.d(t,{P:()=>n})},3489:(e,t,i)=>{"use strict";i.d(t,{YW:()=>D,qg:()=>N});var n=i(8591),s=i(6959),r=i(197),o=i(6744),a=i(1540),l=i(6637);const h="**",c="/",d="[/\\\\]",u="[^/\\\\]",g=/\//g;function p(e,t){switch(e){case 0:return"";case 1:return`${u}*?`;default:return`(?:${d}|${u}+${d}${t?`|${d}${u}+`:""})*?`}}function f(e,t){if(!e)return[];const i=[];let n=!1,s=!1,r="";for(const o of e){switch(o){case t:if(!n&&!s){i.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1}r+=o}return r&&i.push(r),i}function m(e){if(!e)return"";let t="";const i=f(e,c);if(i.every((e=>e===h)))t=".*";else{let e=!1;i.forEach(((n,s)=>{if(n===h){if(e)return;t+=p(2,s===i.length-1)}else{let e=!1,r="",o=!1,a="";for(const i of n)if("}"!==i&&e)r+=i;else if(!o||"]"===i&&a)switch(i){case"{":e=!0;continue;case"[":o=!0;continue;case"}":{const i=`(?:${f(r,",").map((e=>m(e))).join("|")})`;t+=i,e=!1,r="";break}case"]":t+="["+a+"]",o=!1,a="";break;case"?":t+=u;continue;case"*":t+=p(1);continue;default:t+=(0,l.bm)(i)}else{let e;e="-"===i?i:"^"!==i&&"!"!==i||a?i===c?"":(0,l.bm)(i):"^",a+=e}s<i.length-1&&(i[s+1]!==h||s+2<i.length)&&(t+=d)}e=n===h}))}return t}const _=/^\*\*\/\*\.[\w\.-]+$/,v=/^\*\*\/([\w\.-]+)\/?$/,b=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,y=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,w=/^\*\*((\/[\w\.-]+)+)\/?$/,C=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,S=new r.qK(1e4),x=function(){return!1},k=function(){return null};function L(e,t){if(!e)return k;let i;i="string"!==typeof e?e.pattern:e,i=i.trim();const n=`${i}_${!!t.trimForExclusions}`;let s,r=S.get(n);return r||(r=_.test(i)?function(e,t){return function(i,n){return"string"===typeof i&&i.endsWith(e)?t:null}}(i.substr(4),i):(s=v.exec(M(i,t)))?function(e,t){const i=`/${e}`,n=`\\${e}`,s=function(s,r){return"string"!==typeof s?null:r?r===e?t:null:s===e||s.endsWith(i)||s.endsWith(n)?t:null},r=[e];return s.basenames=r,s.patterns=[t],s.allBasenames=r,s}(s[1],i):(t.trimForExclusions?y:b).test(i)?function(e,t){const i=I(e.slice(1,-1).split(",").map((e=>L(e,t))).filter((e=>e!==k)),e),n=i.length;if(!n)return k;if(1===n)return i[0];const s=function(t,n){for(let s=0,r=i.length;s<r;s++)if(i[s](t,n))return e;return null},r=i.find((e=>!!e.allBasenames));r&&(s.allBasenames=r.allBasenames);const o=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(s.allPaths=o);return s}(i,t):(s=w.exec(M(i,t)))?T(s[1].substr(1),i,!0):(s=C.exec(M(i,t)))?T(s[1],i,!1):function(e){try{const t=new RegExp(`^${m(e)}$`);return function(i){return t.lastIndex=0,"string"===typeof i&&t.test(i)?e:null}}catch(t){return k}}(i),S.set(n,r)),E(r,e)}function E(e,t){if("string"===typeof t)return e;const i=function(i,n){return(0,s._1)(i,t.base,!a.j9)?e((0,l.NB)(i.substr(t.base.length),o.Vn),n):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function M(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function T(e,t,i){const n=o.Vn===o.SA.sep,s=n?e:e.replace(g,o.Vn),r=o.Vn+s,a=o.SA.sep+e;let l;return l=i?function(i,o){return"string"!==typeof i||i!==s&&!i.endsWith(r)&&(n||i!==e&&!i.endsWith(a))?null:t}:function(i,r){return"string"!==typeof i||i!==s&&(n||i!==e)?null:t},l.allPaths=[(i?"*/":"./")+e],l}function D(e,t,i){return!(!e||"string"!==typeof t)&&N(e)(t,void 0,i)}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return x;if("string"===typeof e||function(e){const t=e;if(!t)return!1;return"string"===typeof t.base&&"string"===typeof t.pattern}(e)){const i=L(e,t);if(i===k)return x;const n=function(e,t){return!!i(e,t)};return i.allBasenames&&(n.allBasenames=i.allBasenames),i.allPaths&&(n.allPaths=i.allPaths),n}return function(e,t){const i=I(Object.getOwnPropertyNames(e).map((i=>function(e,t,i){if(!1===t)return k;const s=L(e,i);if(s===k)return k;if("boolean"===typeof t)return s;if(t){const i=t.when;if("string"===typeof i){const t=(t,r,o,a)=>{if(!a||!s(t,r))return null;const l=a(i.replace("$(basename)",(()=>o)));return(0,n.Qg)(l)?l.then((t=>t?e:null)):l?e:null};return t.requiresSiblings=!0,t}}return s}(i,e[i],t))).filter((e=>e!==k))),s=i.length;if(!s)return k;if(!i.some((e=>!!e.requiresSiblings))){if(1===s)return i[0];const e=function(e,t){let s;for(let r=0,o=i.length;r<o;r++){const o=i[r](e,t);if("string"===typeof o)return o;(0,n.Qg)(o)&&(s||(s=[]),s.push(o))}return s?(async()=>{for(const e of s){const t=await e;if("string"===typeof t)return t}return null})():null},t=i.find((e=>!!e.allBasenames));t&&(e.allBasenames=t.allBasenames);const r=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);return r.length&&(e.allPaths=r),e}const r=function(e,t,s){let r,a;for(let l=0,h=i.length;l<h;l++){const h=i[l];h.requiresSiblings&&s&&(t||(t=(0,o.P8)(e)),r||(r=t.substr(0,t.length-(0,o.LC)(e).length)));const c=h(e,t,r,s);if("string"===typeof c)return c;(0,n.Qg)(c)&&(a||(a=[]),a.push(c))}return a?(async()=>{for(const e of a){const t=await e;if("string"===typeof t)return t}return null})():null},a=i.find((e=>!!e.allBasenames));a&&(r.allBasenames=a.allBasenames);const l=i.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);l.length&&(r.allPaths=l);return r}(e,t)}function I(e,t){const i=e.filter((e=>!!e.basenames));if(i.length<2)return e;const n=i.reduce(((e,t)=>{const i=t.basenames;return i?e.concat(i):e}),[]);let s;if(t){s=[];for(let e=0,i=n.length;e<i;e++)s.push(t)}else s=i.reduce(((e,t)=>{const i=t.patterns;return i?e.concat(i):e}),[]);const r=function(e,t){if("string"!==typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){const t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}const i=n.indexOf(t);return-1!==i?s[i]:null};r.basenames=n,r.patterns=s,r.allBasenames=n;const o=e.filter((e=>!e.basenames));return o.push(r),o}},2707:(e,t,i)=>{"use strict";i.d(t,{e2:()=>a,sN:()=>r,tW:()=>s,v7:()=>d});var n=i(6637);function s(e){return r(e,0)}function r(e,t){switch(typeof e){case"object":return null===e?o(349,t):Array.isArray(e)?(i=e,n=o(104579,n=t),i.reduce(((e,t)=>r(t,e)),n)):function(e,t){return t=o(181387,t),Object.keys(e).sort().reduce(((t,i)=>(t=a(i,t),r(e[i],t))),t)}(e,t);case"string":return a(e,t);case"boolean":return function(e,t){return o(e?433:863,t)}(e,t);case"number":return o(e,t);case"undefined":return o(937,t);default:return o(617,t)}var i,n}function o(e,t){return(t<<5)-t+e|0}function a(e,t){t=o(149417,t);for(let i=0,n=e.length;i<n;i++)t=o(e.charCodeAt(i),t);return t}function l(e,t){const i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:32)-t;return(e<<t|(~((1<<i)-1)&e)>>>i)>>>0}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(let s=0;s<i;s++)e[t+s]=n}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""):function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";for(;e.length<t;)e=i+e;return e}((e>>>0).toString(16),t/4)}class d{static#e=(()=>this._bigBlock32=new DataView(new ArrayBuffer(320)))();constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(0===t)return;const i=this._buff;let s,r,o=this._buffLen,a=this._leftoverHighSurrogate;for(0!==a?(s=a,r=-1,a=0):(s=e.charCodeAt(0),r=0);;){let l=s;if(n.pc(s)){if(!(r+1<t)){a=s;break}{const t=e.charCodeAt(r+1);n.LJ(t)?(r++,l=n.z_(s,t)):l=65533}}else n.LJ(s)&&(l=65533);if(o=this._push(i,o,l),r++,!(r<t))break;s=e.charCodeAt(r)}this._buffLen=o,this._leftoverHighSurrogate=a}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(1984&i)>>>6,e[t++]=128|(63&i)>>>0):i<65536?(e[t++]=224|(61440&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0):(e[t++]=240|(1835008&i)>>>18,e[t++]=128|(258048&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),c(this._h0)+c(this._h1)+c(this._h2)+c(this._h3)+c(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,h(this._buff,this._buffLen),this._buffLen>56&&(this._step(),h(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=d._bigBlock32,t=this._buffDV;for(let l=0;l<64;l+=4)e.setUint32(l,t.getUint32(l,!1),!1);for(let d=64;d<320;d+=4)e.setUint32(d,l(e.getUint32(d-12,!1)^e.getUint32(d-32,!1)^e.getUint32(d-56,!1)^e.getUint32(d-64,!1),1),!1);let i,n,s,r=this._h0,o=this._h1,a=this._h2,h=this._h3,c=this._h4;for(let d=0;d<80;d++)d<20?(i=o&a|~o&h,n=1518500249):d<40?(i=o^a^h,n=1859775393):d<60?(i=o&a|o&h|a&h,n=2400959708):(i=o^a^h,n=3395469782),s=l(r,5)+i+c+n+e.getUint32(4*d,!1)&4294967295,c=h,h=a,a=l(o,30),o=r,r=s;this._h0=this._h0+r&4294967295,this._h1=this._h1+o&4294967295,this._h2=this._h2+a&4294967295,this._h3=this._h3+h&4294967295,this._h4=this._h4+c&4294967295}}},8353:(e,t,i)=>{"use strict";var n;i.d(t,{f:()=>n}),function(e){function t(e){return e&&"object"===typeof e&&"function"===typeof e[Symbol.iterator]}e.is=t;const i=Object.freeze([]);function*n(e){yield e}e.empty=function(){return i},e.single=n,e.wrap=function(e){return t(e)?e:n(e)},e.from=function(e){return e||i},e.reverse=function*(e){for(let t=e.length-1;t>=0;t--)yield e[t]},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){let i=0;for(const n of e)if(t(n,i++))return!0;return!1},e.find=function(e,t){for(const i of e)if(t(i))return i},e.filter=function*(e,t){for(const i of e)t(i)&&(yield i)},e.map=function*(e,t){let i=0;for(const n of e)yield t(n,i++)},e.flatMap=function*(e,t){let i=0;for(const n of e)yield*t(n,i++)},e.concat=function*(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)yield*n},e.reduce=function(e,t,i){let n=i;for(const s of e)n=t(n,s);return n},e.slice=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return function*(){for(t<0&&(t+=e.length),i<0?i+=e.length:i>e.length&&(i=e.length);t<i;t++)yield e[t]}()},e.consume=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;const n=[];if(0===i)return[n,t];const s=t[Symbol.iterator]();for(let r=0;r<i;r++){const t=s.next();if(t.done)return[n,e.empty()];n.push(t.value)}return[n,{[Symbol.iterator]:()=>s}]},e.asyncToArray=async function(e){const t=[];for await(const i of e)t.push(i);return Promise.resolve(t)}}(n||(n={}))},6648:(e,t,i)=>{"use strict";i.d(t,{Fo:()=>u,YM:()=>p,m5:()=>f,uw:()=>a});class n{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const s=new n,r=new n,o=new n,a=new Array(230),l={},h=[],c=Object.create(null),d=Object.create(null),u=[],g=[];for(let m=0;m<=193;m++)u[m]=-1;for(let m=0;m<=132;m++)g[m]=-1;var p;function f(e,t){return(e|(65535&t)<<16>>>0)>>>0}!function(){const e="",t=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",e,e],[1,1,"Hyper",0,e,0,e,e,e],[1,2,"Super",0,e,0,e,e,e],[1,3,"Fn",0,e,0,e,e,e],[1,4,"FnLock",0,e,0,e,e,e],[1,5,"Suspend",0,e,0,e,e,e],[1,6,"Resume",0,e,0,e,e,e],[1,7,"Turbo",0,e,0,e,e,e],[1,8,"Sleep",0,e,0,"VK_SLEEP",e,e],[1,9,"WakeUp",0,e,0,e,e,e],[0,10,"KeyA",31,"A",65,"VK_A",e,e],[0,11,"KeyB",32,"B",66,"VK_B",e,e],[0,12,"KeyC",33,"C",67,"VK_C",e,e],[0,13,"KeyD",34,"D",68,"VK_D",e,e],[0,14,"KeyE",35,"E",69,"VK_E",e,e],[0,15,"KeyF",36,"F",70,"VK_F",e,e],[0,16,"KeyG",37,"G",71,"VK_G",e,e],[0,17,"KeyH",38,"H",72,"VK_H",e,e],[0,18,"KeyI",39,"I",73,"VK_I",e,e],[0,19,"KeyJ",40,"J",74,"VK_J",e,e],[0,20,"KeyK",41,"K",75,"VK_K",e,e],[0,21,"KeyL",42,"L",76,"VK_L",e,e],[0,22,"KeyM",43,"M",77,"VK_M",e,e],[0,23,"KeyN",44,"N",78,"VK_N",e,e],[0,24,"KeyO",45,"O",79,"VK_O",e,e],[0,25,"KeyP",46,"P",80,"VK_P",e,e],[0,26,"KeyQ",47,"Q",81,"VK_Q",e,e],[0,27,"KeyR",48,"R",82,"VK_R",e,e],[0,28,"KeyS",49,"S",83,"VK_S",e,e],[0,29,"KeyT",50,"T",84,"VK_T",e,e],[0,30,"KeyU",51,"U",85,"VK_U",e,e],[0,31,"KeyV",52,"V",86,"VK_V",e,e],[0,32,"KeyW",53,"W",87,"VK_W",e,e],[0,33,"KeyX",54,"X",88,"VK_X",e,e],[0,34,"KeyY",55,"Y",89,"VK_Y",e,e],[0,35,"KeyZ",56,"Z",90,"VK_Z",e,e],[0,36,"Digit1",22,"1",49,"VK_1",e,e],[0,37,"Digit2",23,"2",50,"VK_2",e,e],[0,38,"Digit3",24,"3",51,"VK_3",e,e],[0,39,"Digit4",25,"4",52,"VK_4",e,e],[0,40,"Digit5",26,"5",53,"VK_5",e,e],[0,41,"Digit6",27,"6",54,"VK_6",e,e],[0,42,"Digit7",28,"7",55,"VK_7",e,e],[0,43,"Digit8",29,"8",56,"VK_8",e,e],[0,44,"Digit9",30,"9",57,"VK_9",e,e],[0,45,"Digit0",21,"0",48,"VK_0",e,e],[1,46,"Enter",3,"Enter",13,"VK_RETURN",e,e],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",e,e],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",e,e],[1,49,"Tab",2,"Tab",9,"VK_TAB",e,e],[1,50,"Space",10,"Space",32,"VK_SPACE",e,e],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,e,0,e,e,e],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",e,e],[1,64,"F1",59,"F1",112,"VK_F1",e,e],[1,65,"F2",60,"F2",113,"VK_F2",e,e],[1,66,"F3",61,"F3",114,"VK_F3",e,e],[1,67,"F4",62,"F4",115,"VK_F4",e,e],[1,68,"F5",63,"F5",116,"VK_F5",e,e],[1,69,"F6",64,"F6",117,"VK_F6",e,e],[1,70,"F7",65,"F7",118,"VK_F7",e,e],[1,71,"F8",66,"F8",119,"VK_F8",e,e],[1,72,"F9",67,"F9",120,"VK_F9",e,e],[1,73,"F10",68,"F10",121,"VK_F10",e,e],[1,74,"F11",69,"F11",122,"VK_F11",e,e],[1,75,"F12",70,"F12",123,"VK_F12",e,e],[1,76,"PrintScreen",0,e,0,e,e,e],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",e,e],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",e,e],[1,79,"Insert",19,"Insert",45,"VK_INSERT",e,e],[1,80,"Home",14,"Home",36,"VK_HOME",e,e],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",e,e],[1,82,"Delete",20,"Delete",46,"VK_DELETE",e,e],[1,83,"End",13,"End",35,"VK_END",e,e],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",e,e],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",e],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",e],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",e],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",e],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",e,e],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",e,e],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",e,e],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",e,e],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",e,e],[1,94,"NumpadEnter",3,e,0,e,e,e],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",e,e],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",e,e],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",e,e],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",e,e],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",e,e],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",e,e],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",e,e],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",e,e],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",e,e],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",e,e],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",e,e],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",e,e],[1,107,"ContextMenu",58,"ContextMenu",93,e,e,e],[1,108,"Power",0,e,0,e,e,e],[1,109,"NumpadEqual",0,e,0,e,e,e],[1,110,"F13",71,"F13",124,"VK_F13",e,e],[1,111,"F14",72,"F14",125,"VK_F14",e,e],[1,112,"F15",73,"F15",126,"VK_F15",e,e],[1,113,"F16",74,"F16",127,"VK_F16",e,e],[1,114,"F17",75,"F17",128,"VK_F17",e,e],[1,115,"F18",76,"F18",129,"VK_F18",e,e],[1,116,"F19",77,"F19",130,"VK_F19",e,e],[1,117,"F20",78,"F20",131,"VK_F20",e,e],[1,118,"F21",79,"F21",132,"VK_F21",e,e],[1,119,"F22",80,"F22",133,"VK_F22",e,e],[1,120,"F23",81,"F23",134,"VK_F23",e,e],[1,121,"F24",82,"F24",135,"VK_F24",e,e],[1,122,"Open",0,e,0,e,e,e],[1,123,"Help",0,e,0,e,e,e],[1,124,"Select",0,e,0,e,e,e],[1,125,"Again",0,e,0,e,e,e],[1,126,"Undo",0,e,0,e,e,e],[1,127,"Cut",0,e,0,e,e,e],[1,128,"Copy",0,e,0,e,e,e],[1,129,"Paste",0,e,0,e,e,e],[1,130,"Find",0,e,0,e,e,e],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",e,e],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",e,e],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",e,e],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",e,e],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",e,e],[1,136,"KanaMode",0,e,0,e,e,e],[0,137,"IntlYen",0,e,0,e,e,e],[1,138,"Convert",0,e,0,e,e,e],[1,139,"NonConvert",0,e,0,e,e,e],[1,140,"Lang1",0,e,0,e,e,e],[1,141,"Lang2",0,e,0,e,e,e],[1,142,"Lang3",0,e,0,e,e,e],[1,143,"Lang4",0,e,0,e,e,e],[1,144,"Lang5",0,e,0,e,e,e],[1,145,"Abort",0,e,0,e,e,e],[1,146,"Props",0,e,0,e,e,e],[1,147,"NumpadParenLeft",0,e,0,e,e,e],[1,148,"NumpadParenRight",0,e,0,e,e,e],[1,149,"NumpadBackspace",0,e,0,e,e,e],[1,150,"NumpadMemoryStore",0,e,0,e,e,e],[1,151,"NumpadMemoryRecall",0,e,0,e,e,e],[1,152,"NumpadMemoryClear",0,e,0,e,e,e],[1,153,"NumpadMemoryAdd",0,e,0,e,e,e],[1,154,"NumpadMemorySubtract",0,e,0,e,e,e],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",e,e],[1,156,"NumpadClearEntry",0,e,0,e,e,e],[1,0,e,5,"Ctrl",17,"VK_CONTROL",e,e],[1,0,e,4,"Shift",16,"VK_SHIFT",e,e],[1,0,e,6,"Alt",18,"VK_MENU",e,e],[1,0,e,57,"Meta",91,"VK_COMMAND",e,e],[1,157,"ControlLeft",5,e,0,"VK_LCONTROL",e,e],[1,158,"ShiftLeft",4,e,0,"VK_LSHIFT",e,e],[1,159,"AltLeft",6,e,0,"VK_LMENU",e,e],[1,160,"MetaLeft",57,e,0,"VK_LWIN",e,e],[1,161,"ControlRight",5,e,0,"VK_RCONTROL",e,e],[1,162,"ShiftRight",4,e,0,"VK_RSHIFT",e,e],[1,163,"AltRight",6,e,0,"VK_RMENU",e,e],[1,164,"MetaRight",57,e,0,"VK_RWIN",e,e],[1,165,"BrightnessUp",0,e,0,e,e,e],[1,166,"BrightnessDown",0,e,0,e,e,e],[1,167,"MediaPlay",0,e,0,e,e,e],[1,168,"MediaRecord",0,e,0,e,e,e],[1,169,"MediaFastForward",0,e,0,e,e,e],[1,170,"MediaRewind",0,e,0,e,e,e],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",e,e],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",e,e],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",e,e],[1,174,"Eject",0,e,0,e,e,e],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",e,e],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",e,e],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",e,e],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",e,e],[1,179,"LaunchApp1",0,e,0,"VK_MEDIA_LAUNCH_APP1",e,e],[1,180,"SelectTask",0,e,0,e,e,e],[1,181,"LaunchScreenSaver",0,e,0,e,e,e],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",e,e],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",e,e],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",e,e],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",e,e],[1,186,"BrowserStop",0,e,0,"VK_BROWSER_STOP",e,e],[1,187,"BrowserRefresh",0,e,0,"VK_BROWSER_REFRESH",e,e],[1,188,"BrowserFavorites",0,e,0,"VK_BROWSER_FAVORITES",e,e],[1,189,"ZoomToggle",0,e,0,e,e,e],[1,190,"MailReply",0,e,0,e,e,e],[1,191,"MailForward",0,e,0,e,e,e],[1,192,"MailSend",0,e,0,e,e,e],[1,0,e,114,"KeyInComposition",229,e,e,e],[1,0,e,116,"ABNT_C2",194,"VK_ABNT_C2",e,e],[1,0,e,96,"OEM_8",223,"VK_OEM_8",e,e],[1,0,e,0,e,0,"VK_KANA",e,e],[1,0,e,0,e,0,"VK_HANGUL",e,e],[1,0,e,0,e,0,"VK_JUNJA",e,e],[1,0,e,0,e,0,"VK_FINAL",e,e],[1,0,e,0,e,0,"VK_HANJA",e,e],[1,0,e,0,e,0,"VK_KANJI",e,e],[1,0,e,0,e,0,"VK_CONVERT",e,e],[1,0,e,0,e,0,"VK_NONCONVERT",e,e],[1,0,e,0,e,0,"VK_ACCEPT",e,e],[1,0,e,0,e,0,"VK_MODECHANGE",e,e],[1,0,e,0,e,0,"VK_SELECT",e,e],[1,0,e,0,e,0,"VK_PRINT",e,e],[1,0,e,0,e,0,"VK_EXECUTE",e,e],[1,0,e,0,e,0,"VK_SNAPSHOT",e,e],[1,0,e,0,e,0,"VK_HELP",e,e],[1,0,e,0,e,0,"VK_APPS",e,e],[1,0,e,0,e,0,"VK_PROCESSKEY",e,e],[1,0,e,0,e,0,"VK_PACKET",e,e],[1,0,e,0,e,0,"VK_DBE_SBCSCHAR",e,e],[1,0,e,0,e,0,"VK_DBE_DBCSCHAR",e,e],[1,0,e,0,e,0,"VK_ATTN",e,e],[1,0,e,0,e,0,"VK_CRSEL",e,e],[1,0,e,0,e,0,"VK_EXSEL",e,e],[1,0,e,0,e,0,"VK_EREOF",e,e],[1,0,e,0,e,0,"VK_PLAY",e,e],[1,0,e,0,e,0,"VK_ZOOM",e,e],[1,0,e,0,e,0,"VK_NONAME",e,e],[1,0,e,0,e,0,"VK_PA1",e,e],[1,0,e,0,e,0,"VK_OEM_CLEAR",e,e]],i=[],n=[];for(const p of t){const[e,t,f,m,_,v,b,y,w]=p;if(n[t]||(n[t]=!0,h[t]=f,c[f]=t,d[f.toLowerCase()]=t,e&&(u[t]=m,0!==m&&3!==m&&5!==m&&4!==m&&6!==m&&57!==m&&(g[m]=t))),!i[m]){if(i[m]=!0,!_)throw new Error(`String representation missing for key code ${m} around scan code ${f}`);s.define(m,_),r.define(m,y||_),o.define(m,w||y||_)}v&&(a[v]=m),b&&(l[b]=m)}g[3]=46}(),function(e){e.toString=function(e){return s.keyCodeToStr(e)},e.fromString=function(e){return s.strToKeyCode(e)},e.toUserSettingsUS=function(e){return r.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return o.keyCodeToStr(e)},e.fromUserSettings=function(e){return r.strToKeyCode(e)||o.strToKeyCode(e)},e.toElectronAccelerator=function(e){if(e>=98&&e<=113)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return s.keyCodeToStr(e)}}(p||(p={}))},5177:(e,t,i)=>{"use strict";i.d(t,{d:()=>n});class n{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}},4663:(e,t,i)=>{"use strict";i.d(t,{$w:()=>v,AS:()=>d,Ay:()=>o,BO:()=>_,Cm:()=>p,HE:()=>m,VD:()=>a,Xm:()=>c,jG:()=>f,lC:()=>h,qE:()=>u,s:()=>g});var n=i(954),s=i(8353);let r=null;function o(e){return r?.trackDisposable(e),e}function a(e){r?.markAsDisposed(e)}function l(e,t){r?.setParent(e,t)}function h(e){return r?.markAsSingleton(e),e}function c(e){return"object"===typeof e&&null!==e&&"function"===typeof e.dispose&&0===e.dispose.length}function d(e){if(s.f.is(e)){const i=[];for(const n of e)if(n)try{n.dispose()}catch(t){i.push(t)}if(1===i.length)throw i[0];if(i.length>1)throw new AggregateError(i,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function u(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=g((()=>d(t)));return function(e,t){if(r)for(const i of e)r.setParent(i,t)}(t,n),n}function g(e){const t=o({dispose:(0,n.P)((()=>{a(t),e()}))});return t}class p{static#e=(()=>this.DISABLE_DISPOSED_WARNING=!1)();constructor(){this._toDispose=new Set,this._isDisposed=!1,o(this)}dispose(){this._isDisposed||(a(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{d(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return l(e,this),this._isDisposed?p.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),l(e,null))}}class f{static#e=(()=>this.None=Object.freeze({dispose(){}}))();constructor(){this._store=new p,o(this),l(this._store,this)}dispose(){a(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}class m{constructor(){this._isDisposed=!1,o(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&l(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,a(this),this._value?.dispose(),this._value=void 0}}class _{constructor(e){this.object=e}dispose(){}}class v{constructor(){this._store=new Map,this._isDisposed=!1,o(this)}dispose(){a(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{d(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}},2194:(e,t,i)=>{"use strict";i.d(t,{w:()=>s});class n{static#e=(()=>this.Undefined=new n(void 0))();constructor(e){this.element=e,this.next=n.Undefined,this.prev=n.Undefined}}class s{constructor(){this._first=n.Undefined,this._last=n.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===n.Undefined}clear(){let e=this._first;for(;e!==n.Undefined;){const t=e.next;e.prev=n.Undefined,e.next=n.Undefined,e=t}this._first=n.Undefined,this._last=n.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new n(e);if(this._first===n.Undefined)this._first=i,this._last=i;else if(t){const e=this._last;this._last=i,i.prev=e,e.next=i}else{const e=this._first;this._first=i,i.next=e,e.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==n.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==n.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==n.Undefined&&e.next!==n.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===n.Undefined&&e.next===n.Undefined?(this._first=n.Undefined,this._last=n.Undefined):e.next===n.Undefined?(this._last=this._last.prev,this._last.next=n.Undefined):e.prev===n.Undefined&&(this._first=this._first.next,this._first.prev=n.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==n.Undefined;)yield e.element,e=e.next}}},197:(e,t,i)=>{"use strict";var n,s;i.d(t,{cO:()=>c,db:()=>d,fT:()=>o,qK:()=>h});class r{constructor(e,t){this.uri=e,this.value=t}}class o{static#e=(()=>this.defaultToKey=e=>e.toString())();constructor(e,t){if(this[n]="ResourceMap",e instanceof o)this.map=new Map(e.map),this.toKey=t??o.defaultToKey;else if(function(e){return Array.isArray(e)}(e)){this.map=new Map,this.toKey=t??o.defaultToKey;for(const[t,i]of e)this.set(t,i)}else this.map=new Map,this.toKey=e??o.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new r(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){"undefined"!==typeof t&&(e=e.bind(t));for(const[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(n=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}class a{constructor(){this[s]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this._map.get(e);if(i)return 0!==t&&this.touch(i,t),i.value}set(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this._map.get(e);if(n)n.value=t,0!==i&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:case 2:default:this.addItemLast(n);break;case 1:this.addItemFirst(n)}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.key,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:i.value,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const e={value:[i.key,i.value],done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}[(s=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,i)=>{e.push([i,t])})),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class l extends a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class h extends l{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class c{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return void 0!==t&&(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class d{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}},6531:(e,t,i)=>{"use strict";i.d(t,{K:()=>n});const n=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"})},4405:(e,t,i)=>{"use strict";i.d(t,{Ez:()=>d,SJ:()=>p,fV:()=>c,ny:()=>n,v$:()=>h,zl:()=>g});var n,s=i(2240),r=i(1540),o=i(6637),a=i(4673),l=i(6744);function h(e,t){return a.r.isUri(e)?(0,o.Q_)(e.scheme,t):(0,o.ns)(e,t+":")}function c(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.some((t=>h(e,t)))}!function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output"}(n||(n={}));const d=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return l.SA.join(this._serverRootPath,n.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(c){return s.dz(c),e}const t=e.authority;let i=this._hosts[t];i&&-1!==i.indexOf(":")&&-1===i.indexOf("[")&&(i=`[${i}]`);const o=this._ports[t],l=this._connectionTokens[t];let h=`path=${encodeURIComponent(e.path)}`;return"string"===typeof l&&(h+=`&tkn=${encodeURIComponent(l)}`),a.r.from({scheme:r.HZ?this._preferredWebSchema:n.vscodeRemoteResource,authority:`${i}:${o}`,path:this._remoteResourcesPath,query:h})}};class u{static#e=(()=>this.FALLBACK_AUTHORITY="vscode-app")();asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===n.vscodeRemote?d.rewrite(e):e.scheme!==n.file||!r.ib&&r.lg!==`${n.vscodeFileResource}://${u.FALLBACK_AUTHORITY}`?e:e.with({scheme:n.vscodeFileResource,authority:e.authority||u.FALLBACK_AUTHORITY,query:null,fragment:null})}toUri(e,t){if(a.r.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const t=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(t))return a.r.joinPath(a.r.parse(t,!0),e);const i=l.fj(t,e);return a.r.file(i)}return a.r.parse(t.toUrl(e))}}const g=new u;var p;!function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";e.getHeadersFromQuery=function(e){let n;"string"===typeof e?n=new URL(e).searchParams:e instanceof URL?n=e.searchParams:a.r.isUri(e)&&(n=new URL(e.toString(!0)).searchParams);const s=n?.get(i);if(s)return t.get(s)},e.addSearchParam=function(e,t,n){if(!globalThis.crossOriginIsolated)return;const s=t&&n?"3":n?"2":"1";e instanceof URLSearchParams?e.set(i,s):e[i]=s}}(p||(p={}))},6053:(e,t,i)=>{"use strict";function n(e,t,i){return Math.min(Math.max(e,t),i)}i.d(t,{Uq:()=>s,mu:()=>r,qE:()=>n});class s{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class r{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},2823:(e,t,i)=>{"use strict";i.d(t,{Go:()=>s,PI:()=>a,V0:()=>c,aI:()=>h,kT:()=>d,ol:()=>r});var n=i(4622);function s(e){if(!e||"object"!==typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach((e=>{let[i,n]=e;t[i]=n&&"object"===typeof n?s(n):n})),t}function r(e){if(!e||"object"!==typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const i in e)if(o.call(e,i)){const s=e[i];"object"!==typeof s||Object.isFrozen(s)||(0,n.iu)(s)||t.push(s)}}return e}const o=Object.prototype.hasOwnProperty;function a(e,t){return l(e,t,new Set)}function l(e,t,i){if((0,n.z)(e))return e;const s=t(e);if("undefined"!==typeof s)return s;if(Array.isArray(e)){const n=[];for(const s of e)n.push(l(s,t,i));return n}if((0,n.Gv)(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const n={};for(const s in e)o.call(e,s)&&(n[s]=l(e[s],t,i));return i.delete(e),n}return e}function h(e,t){if(e===t)return!0;if(null===e||void 0===e||null===t||void 0===t)return!1;if(typeof e!==typeof t)return!1;if("object"!==typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let i,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!h(e[i],t[i]))return!1}else{const s=[];for(n in e)s.push(n);s.sort();const r=[];for(n in t)r.push(n);if(r.sort(),!h(s,r))return!1;for(i=0;i<s.length;i++)if(!h(e[s[i]],t[s[i]]))return!1}return!0}function c(e){const t=[];for(const i of function(e){let t=[];for(;Object.prototype!==e;)t=t.concat(Object.getOwnPropertyNames(e)),e=Object.getPrototypeOf(e);return t}(e))"function"===typeof e[i]&&t.push(i);return t}function d(e,t){const i=e=>function(){const i=Array.prototype.slice.call(arguments,0);return t(e,i)},n={};for(const s of e)n[s]=i(s);return n}},8207:(e,t,i)=>{"use strict";i.d(t,{fm:()=>h,Y:()=>d,zL:()=>c,yC:()=>u,lk:()=>p.lk,un:()=>s.un,C:()=>s.C,rm:()=>s.rm,X2:()=>n.X2,y0:()=>p.y0,Yd:()=>p.Yd,yQ:()=>p.yQ,FY:()=>n.FY,Zh:()=>b,OI:()=>p.OI,PO:()=>n.PO,Rn:()=>n.Rn,oJ:()=>m});var n=i(3303),s=i(8617),r=i(7289),o=i(4663),a=i(3464),l=i(6441);function h(e){return new g(new a.nA(void 0,void 0,e),e,void 0,void 0)}function c(e,t){return new g(new a.nA(e.owner,e.debugName,e.debugReferenceFn??t),t,void 0,void 0)}function d(e,t){return new g(new a.nA(e.owner,e.debugName,e.debugReferenceFn??t),t,e.createEmptyChangeSummary,e.handleChange)}function u(e){const t=new o.Cm,i=c({owner:void 0,debugName:void 0,debugReferenceFn:e},(i=>{t.clear(),e(i,t)}));return(0,o.s)((()=>{i.dispose(),t.dispose()}))}class g{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n){this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=n,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=this.createChangeSummary?.(),(0,l.tZ)()?.handleAutorunCreated(this),this._runIfNeeded(),(0,o.Ay)(this)}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),(0,o.VD)(this)}_runIfNeeded(){if(3===this.state)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(0,l.tZ)()?.handleAutorunTriggered(this);const e=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,e)}}finally{t||(0,l.tZ)()?.handleAutorunFinished(this);for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){3===this.state&&(this.state=1),this.updateCount++}endUpdate(){if(1===this.updateCount)do{if(1===this.state){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break}this._runIfNeeded()}while(3!==this.state);this.updateCount--,(0,r.Ft)((()=>this.updateCount>=0))}handlePossibleChange(e){3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary))&&(this.state=2)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}!function(e){e.Observer=g}(h||(h={}));var p=i(1089),f=i(2240);function m(e,t,i,n){return t||(t=e=>null!==e&&void 0!==e),new Promise(((s,r)=>{let o=!0,a=!1;const l=e.map((e=>({isFinished:t(e),error:!!i&&i(e),state:e}))),c=h((e=>{const{isFinished:t,error:i,state:n}=l.read(e);(t||i)&&(o?a=!0:c.dispose(),i?r(!0===i?n:i):s(n))}));if(n){const e=n.onCancellationRequested((()=>{c.dispose(),e.dispose(),r(new f.AL)}));if(n.isCancellationRequested)return c.dispose(),e.dispose(),void r(new f.AL)}o=!1,a&&c.dispose()}))}var _=i(414);class v extends n.ZK{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,1===this._updateCounter)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,0===this._updateCounter){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(void 0===i&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new n.XL((()=>{}),(()=>`Setting ${this.debugName}`)));try{if(this._isUpToDate=!1,this._setValue(e),void 0!==i&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(e,t)=>{},handlePossibleChange:e=>{}},this),this._updateCounter>1)for(const e of this.observers)e.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function b(e,t){return e.lazy?new v(new a.nA(e.owner,e.debugName,void 0),t,e.equalsFn??_.nx):new n.Lj(new a.nA(e.owner,e.debugName,void 0),t,e.equalsFn??_.nx)}},3303:(e,t,i)=>{"use strict";i.d(t,{Bm:()=>c,FB:()=>d,FY:()=>b,Lj:()=>y,N2:()=>u,PO:()=>_,Rn:()=>f,X2:()=>w,XL:()=>v,YY:()=>m,ZK:()=>p,zV:()=>g});var n=i(414),s=i(3464),r=i(6441);let o,a,l,h;function c(e){o=e}function d(e){a=e}function u(e){l=e}class g{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=void 0===t?void 0:e,n=void 0===t?e:t;return l({owner:i,debugName:()=>{const e=(0,s.qQ)(n);if(void 0!==e)return e;const t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(n.toString());return t?`${this.debugName}.${t[2]}`:i?void 0:`${this.debugName} (mapped)`},debugReferenceFn:n},(e=>n(this.read(e),e)))}flatten(){return l({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},(e=>this.read(e).read(e)))}recomputeInitiallyAndOnChange(e,t){return e.add(o(this,t)),this}keepObserved(e){return e.add(a(this)),this}}class p extends g{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),0===t&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&0===this.observers.size&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function f(e,t){const i=new v(e,t);try{e(i)}finally{i.finish()}}function m(e){if(h)e(h);else{const t=new v(e,void 0);h=t;try{e(t)}finally{t.finish(),h=void 0}}}function _(e,t,i){e?t(e):f(t,i)}class v{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[],(0,r.tZ)()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():(0,s.qQ)(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:n}=e[t];i.endUpdate(n)}this.updatingObservers=null,(0,r.tZ)()?.handleEndTransaction()}}function b(e,t){let i;return i="string"===typeof e?new s.nA(void 0,e,void 0):new s.nA(e,void 0,void 0),new y(i,t,n.nx)}class y extends p{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){if(void 0===i&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new v((()=>{}),(()=>`Setting ${this.debugName}`)));try{const n=this._value;this._setValue(e),(0,r.tZ)()?.handleObservableChanged(this,{oldValue:n,newValue:e,change:i,didChange:!0,hadValue:!0});for(const e of this.observers)t.updateObserver(e,this),e.handleChange(this,i)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function w(e,t){let i;return i="string"===typeof e?new s.nA(void 0,e,void 0):new s.nA(e,void 0,void 0),new C(i,t,n.nx)}class C extends y{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}}},3464:(e,t,i)=>{"use strict";i.d(t,{nA:()=>n,qQ:()=>l});class n{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return function(e,t){const i=r.get(e);if(i)return i;const n=function(e,t){const i=r.get(e);if(i)return i;const n=t.owner?function(e){const t=a.get(e);if(t)return t;const i=function(e){const t=e.constructor;if(t)return t.name;return"Object"}(e);let n=o.get(i)??0;n++,o.set(i,n);const s=1===n?i:`${i}#${n}`;return a.set(e,s),s}(t.owner)+".":"";let s;const h=t.debugNameSource;if(void 0!==h){if("function"!==typeof h)return n+h;if(s=h(),void 0!==s)return n+s}const c=t.referenceFn;if(void 0!==c&&(s=l(c),void 0!==s))return n+s;if(void 0!==t.owner){const i=function(e,t){for(const i in e)if(e[i]===t)return i;return}(t.owner,e);if(void 0!==i)return n+i}return}(e,t);if(n){let t=s.get(n)??0;t++,s.set(n,t);const i=1===t?n:`${n}#${t}`;return r.set(e,i),i}return}(e,this)}}const s=new Map,r=new WeakMap;const o=new Map,a=new WeakMap;function l(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t),n=i?i[1]:void 0;return n?.trim()}},8617:(e,t,i)=>{"use strict";i.d(t,{C:()=>d,a0:()=>g,dQ:()=>c,rm:()=>u,un:()=>h});var n=i(7289),s=i(414),r=i(4663),o=i(3303),a=i(3464),l=i(6441);function h(e,t){return void 0!==t?new p(new a.nA(e,void 0,t),t,void 0,void 0,void 0,s.nx):new p(new a.nA(void 0,void 0,e),e,void 0,void 0,void 0,s.nx)}function c(e,t,i){return new f(new a.nA(e,void 0,t),t,void 0,void 0,void 0,s.nx,i)}function d(e,t){return new p(new a.nA(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??s.nx)}function u(e,t){let i,n;void 0===t?(i=e,n=void 0):(n=e,i=t);const o=new r.Cm;return new p(new a.nA(n,void 0,i),(e=>(o.clear(),i(e,o))),void 0,void 0,(()=>o.dispose()),s.nx)}function g(e,t){let i,n,o;return void 0===t?(i=e,n=void 0):(n=e,i=t),new p(new a.nA(n,void 0,i),(e=>{o?o.clear():o=new r.Cm;const t=i(e);return t&&o.add(t),t}),void 0,void 0,(()=>{o&&(o.dispose(),o=void 0)}),s.nx)}(0,o.N2)(d);class p extends o.ZK{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=n,this._handleLastObserverRemoved=s,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=this.createChangeSummary?.(),(0,l.tZ)()?.handleDerivedCreated(this)}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(0===this.observers.size){const e=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),e}do{if(1===this.state)for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break;1===this.state&&(this.state=3),this._recomputeIfNeeded()}while(3!==this.state);return this.value}_recomputeIfNeeded(){if(3===this.state)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=0!==this.state,i=this.value;this.state=3;const n=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,n)}finally{for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}const s=t&&!this._equalityComparator(i,this.value);if((0,l.tZ)()?.handleDerivedRecomputed(this,{oldValue:i,newValue:this.value,change:void 0,didChange:s,hadValue:t}),s)for(const r of this.observers)r.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=1===this.updateCount;if(3===this.state&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,0===this.updateCount){const e=[...this.observers];for(const t of e)t.endUpdate(this)}(0,n.Ft)((()=>this.updateCount>=0))}handlePossibleChange(e){if(3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const e of this.observers)e.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary),n=3===this.state;if(i&&(1===this.state||n)&&(this.state=2,n))for(const e of this.observers)e.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class f extends p{constructor(e,t,i,n){let s=arguments.length>6?arguments[6]:void 0;super(e,t,i,n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0),this.set=s}}},6441:(e,t,i)=>{"use strict";let n;function s(e){n=e}function r(){return n}i.d(t,{Br:()=>s,jm:()=>o,tZ:()=>r});class o{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}textToConsoleArgs(e){return function(e){const t=new Array,i=[];let n="";function s(e){if("length"in e)for(const t of e)t&&s(t);else"text"in e?(n+=`%c${e.text}`,t.push(e.style),e.data&&i.push(...e.data)):"data"in e&&i.push(...e.data)}s(e);const r=[n,...t];return r.push(...i),r}([a(d("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[a(" "),h(c(e.oldValue,70),{color:"red",strikeThrough:!0}),a(" "),h(c(e.newValue,60),{color:"green"})]:[a(" (unchanged)")]:[a(" "),h(c(e.newValue,60),{color:"green"}),a(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([l("observable value changed"),h(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}formatChanges(e){if(0!==e.size)return h(" (changed deps: "+[...e].map((e=>e.debugName)).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(i,n)=>(this.changedObservablesSets.get(e).add(i),t.apply(e,[i,n]))}handleDerivedRecomputed(e,t){const i=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([l("derived recomputed"),h(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([l("observable from event triggered"),h(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(i,n)=>(this.changedObservablesSets.get(e).add(i),t.apply(e,[i,n]))}handleAutorunTriggered(e){const t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([l("autorun"),h(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();void 0===t&&(t=""),console.log(...this.textToConsoleArgs([l("transaction"),h(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}}function a(e){return h(e,{color:"black"})}function l(e){return h(function(e,t){for(;e.length<t;)e+=" ";return e}(`${e}: `,10),{color:"black",bold:!0})}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"black"};const i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:(n=i,Object.entries(n).reduce(((e,t)=>{let[i,n]=t;return`${e}${i}:${n};`}),""))};var n}function c(e,t){switch(typeof e){case"number":default:return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return null===e?"null":Array.isArray(e)?function(e,t){let i="[ ",n=!0;for(const s of e){if(n||(i+=", "),i.length-5>t){i+="...";break}n=!1,i+=`${c(s,t-i.length)}`}return i+=" ]",i}(e,t):function(e,t){let i="{ ",n=!0;for(const[s,r]of Object.entries(e)){if(n||(i+=", "),i.length-5>t){i+="...";break}n=!1,i+=`${s}: ${c(r,t-i.length)}`}return i+=" }",i}(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`}}function d(e,t){let i="";for(let n=1;n<=t;n++)i+=e;return i}},1089:(e,t,i)=>{"use strict";i.d(t,{OI:()=>_,Yd:()=>f,lk:()=>h,t:()=>b,y0:()=>d,yQ:()=>g});i(9563);var n=i(4663),s=i(3303),r=i(3464),o=i(8617),a=i(6441),l=i(414);function h(e){return new c(e)}class c extends s.zV{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function d(){let e,t,i;for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return 3===s.length?[e,t,i]=s:[t,i]=s,new u(new r.nA(e,void 0,i),t,i,(()=>u.globalTransaction),l.nx)}class u extends s.ZK{constructor(e,t,i,n,r){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=n,this._equalityComparator=r,this.hasValue=!1,this.handleEvent=e=>{const t=this._getValue(e),i=this.value,n=!this.hasValue||!this._equalityComparator(i,t);let r=!1;n&&(this.value=t,this.hasValue&&(r=!0,(0,s.PO)(this._getTransaction(),(e=>{(0,a.tZ)()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:t,change:void 0,didChange:n,hadValue:this.hasValue});for(const t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)}),(()=>{const e=this.getDebugName();return"Event fired"+(e?`: ${e}`:"")}))),this.hasValue=!0),r||(0,a.tZ)()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:t,change:void 0,didChange:n,hadValue:this.hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){if(this.subscription)return this.hasValue||this.handleEvent(void 0),this.value;return this._getValue(void 0)}}function g(e,t){return new p(e,t)}!function(e){e.Observer=u,e.batchEventsGlobally=function(e,t){let i=!1;void 0===u.globalTransaction&&(u.globalTransaction=e,i=!0);try{t()}finally{i&&(u.globalTransaction=void 0)}}}(d||(d={}));class p extends s.ZK{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{(0,s.Rn)((e=>{for(const t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)}),(()=>this.debugName))}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function f(e){return"string"===typeof e?new m(e):new m(void 0,e)}class m extends s.ZK{get debugName(){return new r.nA(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(e)for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t);else(0,s.Rn)((e=>{this.trigger(e,t)}),(()=>`Trigger signal ${this.debugName}`))}get(){}}function _(e,t){const i=new v(!0,t);return e.addObserver(i),t?t(e.get()):e.reportChanges(),(0,n.s)((()=>{e.removeObserver(i)}))}(0,s.FB)((function(e){const t=new v(!1,void 0);return e.addObserver(t),(0,n.s)((()=>{e.removeObserver(t)}))})),(0,s.Bm)(_);class v{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,0===this._counter&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function b(e,t){return function(e,t){let i;return(0,o.C)({owner:e,debugReferenceFn:t},(e=>(i=t(e,i),i)))}(e,((e,i)=>i??t(e)))}},6744:(e,t,i)=>{"use strict";i.d(t,{IN:()=>m,LC:()=>k,P8:()=>x,S8:()=>b,SA:()=>v,V8:()=>C,Vn:()=>L,fj:()=>y,hd:()=>w,pD:()=>S});var n=i(1138);const s=46,r=47,o=92,a=58;class l extends Error{constructor(e,t,i){let n;"string"===typeof t&&0===t.indexOf("not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";const s=-1!==e.indexOf(".")?"property":"argument";let r=`The "${e}" ${s} ${n} of type ${t}`;r+=". Received type "+typeof i,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function h(e,t){if("string"!==typeof e)throw new l(t,"string",e)}const c="win32"===n.iD;function d(e){return e===r||e===o}function u(e){return e===r}function g(e){return e>=65&&e<=90||e>=97&&e<=122}function p(e,t,i,n){let o="",a=0,l=-1,h=0,c=0;for(let d=0;d<=e.length;++d){if(d<e.length)c=e.charCodeAt(d);else{if(n(c))break;c=r}if(n(c)){if(l===d-1||1===h);else if(2===h){if(o.length<2||2!==a||o.charCodeAt(o.length-1)!==s||o.charCodeAt(o.length-2)!==s){if(o.length>2){const e=o.lastIndexOf(i);-1===e?(o="",a=0):(o=o.slice(0,e),a=o.length-1-o.lastIndexOf(i)),l=d,h=0;continue}if(0!==o.length){o="",a=0,l=d,h=0;continue}}t&&(o+=o.length>0?`${i}..`:"..",a=2)}else o.length>0?o+=`${i}${e.slice(l+1,d)}`:o=e.slice(l+1,d),a=d-l-1;l=d,h=0}else c===s&&-1!==h?++h:h=-1}return o}function f(e,t){!function(e,t){if(null===e||"object"!==typeof e)throw new l(t,"Object",e)}(t,"pathObject");const i=t.dir||t.root,n=t.base||`${t.name||""}${s=t.ext,s?`${"."===s[0]?"":"."}${s}`:""}`;var s;return i?i===t.root?`${i}${n}`:`${i}${e}${n}`:n}const m={resolve(){let e="",t="",i=!1;for(let s=arguments.length-1;s>=-1;s--){let r;if(s>=0){if(r=s<0||arguments.length<=s?void 0:arguments[s],h(r,`paths[${s}]`),0===r.length)continue}else 0===e.length?r=n.bJ():(r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[`=${e}`]||n.bJ(),(void 0===r||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===o)&&(r=`${e}\\`));const l=r.length;let c=0,u="",p=!1;const f=r.charCodeAt(0);if(1===l)d(f)&&(c=1,p=!0);else if(d(f))if(p=!0,d(r.charCodeAt(1))){let e=2,t=e;for(;e<l&&!d(r.charCodeAt(e));)e++;if(e<l&&e!==t){const i=r.slice(t,e);for(t=e;e<l&&d(r.charCodeAt(e));)e++;if(e<l&&e!==t){for(t=e;e<l&&!d(r.charCodeAt(e));)e++;e!==l&&e===t||(u=`\\\\${i}\\${r.slice(t,e)}`,c=e)}}}else c=1;else g(f)&&r.charCodeAt(1)===a&&(u=r.slice(0,2),c=2,l>2&&d(r.charCodeAt(2))&&(p=!0,c=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(i){if(e.length>0)break}else if(t=`${r.slice(c)}\\${t}`,i=p,p&&e.length>0)break}return t=p(t,!i,"\\",d),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(e){h(e,"path");const t=e.length;if(0===t)return".";let i,n=0,s=!1;const r=e.charCodeAt(0);if(1===t)return u(r)?"\\":e;if(d(r))if(s=!0,d(e.charCodeAt(1))){let s=2,r=s;for(;s<t&&!d(e.charCodeAt(s));)s++;if(s<t&&s!==r){const o=e.slice(r,s);for(r=s;s<t&&d(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&!d(e.charCodeAt(s));)s++;if(s===t)return`\\\\${o}\\${e.slice(r)}\\`;s!==r&&(i=`\\\\${o}\\${e.slice(r,s)}`,n=s)}}}else n=1;else g(r)&&e.charCodeAt(1)===a&&(i=e.slice(0,2),n=2,t>2&&d(e.charCodeAt(2))&&(s=!0,n=3));let o=n<t?p(e.slice(n),!s,"\\",d):"";return 0!==o.length||s||(o="."),o.length>0&&d(e.charCodeAt(t-1))&&(o+="\\"),void 0===i?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){h(e,"path");const t=e.length;if(0===t)return!1;const i=e.charCodeAt(0);return d(i)||t>2&&g(i)&&e.charCodeAt(1)===a&&d(e.charCodeAt(2))},join(){if(0===arguments.length)return".";let e,t;for(let s=0;s<arguments.length;++s){const i=s<0||arguments.length<=s?void 0:arguments[s];h(i,"path"),i.length>0&&(void 0===e?e=t=i:e+=`\\${i}`)}if(void 0===e)return".";let i=!0,n=0;if("string"===typeof t&&d(t.charCodeAt(0))){++n;const e=t.length;e>1&&d(t.charCodeAt(1))&&(++n,e>2&&(d(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&d(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return m.normalize(e)},relative(e,t){if(h(e,"from"),h(t,"to"),e===t)return"";const i=m.resolve(e),n=m.resolve(t);if(i===n)return"";if((e=i.toLowerCase())===(t=n.toLowerCase()))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===o;)s++;let r=e.length;for(;r-1>s&&e.charCodeAt(r-1)===o;)r--;const a=r-s;let l=0;for(;l<t.length&&t.charCodeAt(l)===o;)l++;let c=t.length;for(;c-1>l&&t.charCodeAt(c-1)===o;)c--;const d=c-l,u=a<d?a:d;let g=-1,p=0;for(;p<u;p++){const i=e.charCodeAt(s+p);if(i!==t.charCodeAt(l+p))break;i===o&&(g=p)}if(p!==u){if(-1===g)return n}else{if(d>u){if(t.charCodeAt(l+p)===o)return n.slice(l+p+1);if(2===p)return n.slice(l+p)}a>u&&(e.charCodeAt(s+p)===o?g=p:2===p&&(g=3)),-1===g&&(g=0)}let f="";for(p=s+g+1;p<=r;++p)p!==r&&e.charCodeAt(p)!==o||(f+=0===f.length?"..":"\\..");return l+=g,f.length>0?`${f}${n.slice(l,c)}`:(n.charCodeAt(l)===o&&++l,n.slice(l,c))},toNamespacedPath(e){if("string"!==typeof e||0===e.length)return e;const t=m.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===o){if(t.charCodeAt(1)===o){const e=t.charCodeAt(2);if(63!==e&&e!==s)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(g(t.charCodeAt(0))&&t.charCodeAt(1)===a&&t.charCodeAt(2)===o)return`\\\\?\\${t}`;return e},dirname(e){h(e,"path");const t=e.length;if(0===t)return".";let i=-1,n=0;const s=e.charCodeAt(0);if(1===t)return d(s)?e:".";if(d(s)){if(i=n=1,d(e.charCodeAt(1))){let s=2,r=s;for(;s<t&&!d(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&d(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&!d(e.charCodeAt(s));)s++;if(s===t)return e;s!==r&&(i=n=s+1)}}}}else g(s)&&e.charCodeAt(1)===a&&(i=t>2&&d(e.charCodeAt(2))?3:2,n=i);let r=-1,o=!0;for(let a=t-1;a>=n;--a)if(d(e.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(-1===r){if(-1===i)return".";r=i}return e.slice(0,r)},basename(e,t){void 0!==t&&h(t,"suffix"),h(e,"path");let i,n=0,s=-1,r=!0;if(e.length>=2&&g(e.charCodeAt(0))&&e.charCodeAt(1)===a&&(n=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(i=e.length-1;i>=n;--i){const l=e.charCodeAt(i);if(d(l)){if(!r){n=i+1;break}}else-1===a&&(r=!1,a=i+1),o>=0&&(l===t.charCodeAt(o)?-1===--o&&(s=i):(o=-1,s=a))}return n===s?s=a:-1===s&&(s=e.length),e.slice(n,s)}for(i=e.length-1;i>=n;--i)if(d(e.charCodeAt(i))){if(!r){n=i+1;break}}else-1===s&&(r=!1,s=i+1);return-1===s?"":e.slice(n,s)},extname(e){h(e,"path");let t=0,i=-1,n=0,r=-1,o=!0,l=0;e.length>=2&&e.charCodeAt(1)===a&&g(e.charCodeAt(0))&&(t=n=2);for(let a=e.length-1;a>=t;--a){const t=e.charCodeAt(a);if(d(t)){if(!o){n=a+1;break}}else-1===r&&(o=!1,r=a+1),t===s?-1===i?i=a:1!==l&&(l=1):-1!==i&&(l=-1)}return-1===i||-1===r||0===l||1===l&&i===r-1&&i===n+1?"":e.slice(i,r)},format:f.bind(null,"\\"),parse(e){h(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.length;let n=0,r=e.charCodeAt(0);if(1===i)return d(r)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(d(r)){if(n=1,d(e.charCodeAt(1))){let t=2,s=t;for(;t<i&&!d(e.charCodeAt(t));)t++;if(t<i&&t!==s){for(s=t;t<i&&d(e.charCodeAt(t));)t++;if(t<i&&t!==s){for(s=t;t<i&&!d(e.charCodeAt(t));)t++;t===i?n=t:t!==s&&(n=t+1)}}}}else if(g(r)&&e.charCodeAt(1)===a){if(i<=2)return t.root=t.dir=e,t;if(n=2,d(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;n=3}}n>0&&(t.root=e.slice(0,n));let o=-1,l=n,c=-1,u=!0,p=e.length-1,f=0;for(;p>=n;--p)if(r=e.charCodeAt(p),d(r)){if(!u){l=p+1;break}}else-1===c&&(u=!1,c=p+1),r===s?-1===o?o=p:1!==f&&(f=1):-1!==o&&(f=-1);return-1!==c&&(-1===o||0===f||1===f&&o===c-1&&o===l+1?t.base=t.name=e.slice(l,c):(t.name=e.slice(l,o),t.base=e.slice(l,c),t.ext=e.slice(o,c))),t.dir=l>0&&l!==n?e.slice(0,l-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},_=(()=>{if(c){const e=/\\/g;return()=>{const t=n.bJ().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>n.bJ()})(),v={resolve(){let e="",t=!1;for(let i=arguments.length-1;i>=-1&&!t;i--){const n=i>=0?i<0||arguments.length<=i?void 0:arguments[i]:_();h(n,`paths[${i}]`),0!==n.length&&(e=`${n}/${e}`,t=n.charCodeAt(0)===r)}return e=p(e,!t,"/",u),t?`/${e}`:e.length>0?e:"."},normalize(e){if(h(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===r,i=e.charCodeAt(e.length-1)===r;return 0===(e=p(e,!t,"/",u)).length?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute:e=>(h(e,"path"),e.length>0&&e.charCodeAt(0)===r),join(){if(0===arguments.length)return".";let e;for(let t=0;t<arguments.length;++t){const i=t<0||arguments.length<=t?void 0:arguments[t];h(i,"path"),i.length>0&&(void 0===e?e=i:e+=`/${i}`)}return void 0===e?".":v.normalize(e)},relative(e,t){if(h(e,"from"),h(t,"to"),e===t)return"";if((e=v.resolve(e))===(t=v.resolve(t)))return"";const i=e.length,n=i-1,s=t.length-1,o=n<s?n:s;let a=-1,l=0;for(;l<o;l++){const i=e.charCodeAt(1+l);if(i!==t.charCodeAt(1+l))break;i===r&&(a=l)}if(l===o)if(s>o){if(t.charCodeAt(1+l)===r)return t.slice(1+l+1);if(0===l)return t.slice(1+l)}else n>o&&(e.charCodeAt(1+l)===r?a=l:0===l&&(a=0));let c="";for(l=1+a+1;l<=i;++l)l!==i&&e.charCodeAt(l)!==r||(c+=0===c.length?"..":"/..");return`${c}${t.slice(1+a)}`},toNamespacedPath:e=>e,dirname(e){if(h(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===r;let i=-1,n=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===r){if(!n){i=s;break}}else n=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){void 0!==t&&h(t,"ext"),h(e,"path");let i,n=0,s=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let a=t.length-1,l=-1;for(i=e.length-1;i>=0;--i){const h=e.charCodeAt(i);if(h===r){if(!o){n=i+1;break}}else-1===l&&(o=!1,l=i+1),a>=0&&(h===t.charCodeAt(a)?-1===--a&&(s=i):(a=-1,s=l))}return n===s?s=l:-1===s&&(s=e.length),e.slice(n,s)}for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===r){if(!o){n=i+1;break}}else-1===s&&(o=!1,s=i+1);return-1===s?"":e.slice(n,s)},extname(e){h(e,"path");let t=-1,i=0,n=-1,o=!0,a=0;for(let l=e.length-1;l>=0;--l){const h=e.charCodeAt(l);if(h!==r)-1===n&&(o=!1,n=l+1),h===s?-1===t?t=l:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){i=l+1;break}}return-1===t||-1===n||0===a||1===a&&t===n-1&&t===i+1?"":e.slice(t,n)},format:f.bind(null,"/"),parse(e){h(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.charCodeAt(0)===r;let n;i?(t.root="/",n=1):n=0;let o=-1,a=0,l=-1,c=!0,d=e.length-1,u=0;for(;d>=n;--d){const t=e.charCodeAt(d);if(t!==r)-1===l&&(c=!1,l=d+1),t===s?-1===o?o=d:1!==u&&(u=1):-1!==o&&(u=-1);else if(!c){a=d+1;break}}if(-1!==l){const n=0===a&&i?1:a;-1===o||0===u||1===u&&o===l-1&&o===a+1?t.base=t.name=e.slice(n,l):(t.name=e.slice(n,o),t.base=e.slice(n,l),t.ext=e.slice(o,l))}return a>0?t.dir=e.slice(0,a-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};v.win32=m.win32=m,v.posix=m.posix=v;const b=c?m.normalize:v.normalize,y=c?m.join:v.join,w=c?m.resolve:v.resolve,C=c?m.relative:v.relative,S=c?m.dirname:v.dirname,x=c?m.basename:v.basename,k=c?m.extname:v.extname,L=c?m.sep:v.sep},1540:(e,t,i)=>{"use strict";i.d(t,{Fr:()=>I,H8:()=>V,HZ:()=>T,OS:()=>O,UP:()=>U,_p:()=>P,cm:()=>z,gm:()=>W,ib:()=>M,j9:()=>E,lg:()=>D,m0:()=>j,nr:()=>H,uF:()=>k,un:()=>N,zx:()=>L});var n=i(1266);const s="en";let r,o,a=!1,l=!1,h=!1,c=!1,d=!1,u=!1,g=!1,p=!1,f=!1,m=!1,_=null,v=null,b=null;const y=globalThis;let w;"undefined"!==typeof y.vscode&&"undefined"!==typeof y.vscode.process?w=y.vscode.process:"undefined"!==typeof process&&"string"===typeof process?.versions?.node&&(w=process);const C="string"===typeof w?.versions?.electron,S=C&&"renderer"===w?.type;if("object"===typeof w){a="win32"===w.platform,l="darwin"===w.platform,h="linux"===w.platform,c=h&&!!w.env.SNAP&&!!w.env.SNAP_REVISION,g=C,f=!!w.env.CI||!!w.env.BUILD_ARTIFACTSTAGINGDIRECTORY,r=s,_=s;const e=w.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);r=t.userLocale,v=t.osLocale,_=t.resolvedLanguage||s,b=t.languagePack?.translationsConfigFile}catch(G){}d=!0}else"object"!==typeof navigator||S?console.error("Unable to resolve platform."):(o=navigator.userAgent,a=o.indexOf("Windows")>=0,l=o.indexOf("Macintosh")>=0,p=(o.indexOf("Macintosh")>=0||o.indexOf("iPad")>=0||o.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,h=o.indexOf("Linux")>=0,m=o?.indexOf("Mobi")>=0,u=!0,_=n.i8()||s,r=navigator.language.toLowerCase(),v=r);let x=0;l?x=1:a?x=3:h&&(x=2);const k=a,L=l,E=h,M=d,T=u,D=u&&"function"===typeof y.importScripts?y.origin:void 0,N=p,I=m,A=o,R="function"===typeof y.postMessage&&!y.importScripts,P=(()=>{if(R){const e=[];y.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=e.length;i<n;i++){const n=e[i];if(n.id===t.data.vscodeScheduleAsyncWork)return e.splice(i,1),void n.callback()}}));let t=0;return i=>{const n=++t;e.push({id:n,callback:i}),y.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})(),O=l||p?2:a?1:3;let F=!0,B=!1;function z(){if(!B){B=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);F=513===t[0]}return F}const V=!!(A&&A.indexOf("Chrome")>=0),W=!!(A&&A.indexOf("Firefox")>=0),H=!!(!V&&A&&A.indexOf("Safari")>=0),U=!!(A&&A.indexOf("Edg/")>=0),j=!!(A&&A.indexOf("Android")>=0)},1138:(e,t,i)=>{"use strict";i.d(t,{_K:()=>a,bJ:()=>o,iD:()=>l});var n=i(1540);let s;const r=globalThis.vscode;if("undefined"!==typeof r&&"undefined"!==typeof r.process){const e=r.process;s={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else s="undefined"!==typeof process&&"string"===typeof process?.versions?.node?{get platform(){return process.platform},get arch(){return process.arch},get env(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}},cwd:()=>({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VSCODE_CWD||process.cwd())}:{get platform(){return n.uF?"win32":n.zx?"darwin":"linux"},get arch(){},get env(){return{}},cwd:()=>"/"};const o=s.cwd,a=s.env,l=s.platform},6474:(e,t,i)=>{"use strict";i.d(t,{B6:()=>b,Fd:()=>f,P8:()=>g,n4:()=>u,o1:()=>m,pD:()=>p});var n=i(6959),s=i(4405),r=i(6744),o=i(1540),a=i(6637),l=i(4673);function h(e){return(0,l.I)(e,!0)}class c{constructor(e){this._ignorePathCasing=e}compare(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t?0:(0,a.UD)(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||!(!e||!t)&&this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.scheme===t.scheme){if(e.scheme===s.ny.file)return n._1(h(e),h(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(_(e.authority,t.authority))return n._1(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return l.r.joinPath(e,...i)}basenameOrAuthority(e){return g(e)||e.authority}basename(e){return r.SA.basename(e.path)}extname(e){return r.SA.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===s.ny.file?t=l.r.file(r.pD(h(e))).path:(t=r.SA.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===s.ny.file?l.r.file(r.S8(h(e))).path:r.SA.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!_(e.authority,t.authority))return;if(e.scheme===s.ny.file){const i=r.V8(h(e),h(t));return o.uF?n.TH(i):i}let i=e.path||"/";const a=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(i.length,a.length);e<t&&(i.charCodeAt(e)===a.charCodeAt(e)||i.charAt(e).toLowerCase()===a.charAt(e).toLowerCase());e++);i=a.substr(0,e)+i.substr(e)}return r.SA.relative(i,a)}resolvePath(e,t){if(e.scheme===s.ny.file){const i=l.r.file(r.hd(h(e),t));return e.with({authority:i.authority,path:i.path})}return t=n.kb(t),e.with({path:r.SA.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&(0,a.Q_)(e,t)}hasTrailingPathSeparator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Vn;if(e.scheme===s.ny.file){const i=h(e);return i.length>n.Zn(i).length&&i[i.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Vn;return v(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Vn,i=!1;if(e.scheme===s.ny.file){const s=h(e);i=void 0!==s&&s.length===n.Zn(s).length&&s[s.length-1]===t}else{t="/";const n=e.path;i=1===n.length&&47===n.charCodeAt(n.length-1)}return i||v(e,t)?e:e.with({path:e.path+"/"})}}const d=new c((()=>!1)),u=(new c((e=>e.scheme!==s.ny.file||!o.j9)),new c((e=>!0)),d.isEqual.bind(d)),g=(d.isEqualOrParent.bind(d),d.getComparisonKey.bind(d),d.basenameOrAuthority.bind(d),d.basename.bind(d)),p=(d.extname.bind(d),d.dirname.bind(d)),f=(d.joinPath.bind(d),d.normalizePath.bind(d)),m=(d.relativePath.bind(d),d.resolvePath.bind(d)),_=(d.isAbsolutePath.bind(d),d.isEqualAuthority.bind(d)),v=d.hasTrailingPathSeparator.bind(d);d.removeTrailingPathSeparator.bind(d),d.addTrailingPathSeparator.bind(d);var b;!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,n]=e.split(":");t&&n&&i.set(t,n)}));const n=t.path.substring(0,t.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}}(b||(b={}))},7848:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n,s=i(6637);!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(n||(n={})),function(e){const t="error",i="warning",n="info";e.fromValue=function(r){return r?s.Q_(t,r)?e.Error:s.Q_(i,r)||s.Q_("warn",r)?e.Warning:s.Q_(n,r)?e.Info:e.Ignore:e.Ignore},e.toString=function(s){switch(s){case e.Error:return t;case e.Warning:return i;case e.Info:return n;default:return"ignore"}}}(n||(n={}));const r=n},1340:(e,t,i)=>{"use strict";i.d(t,{W:()=>s});const n=globalThis.performance&&"function"===typeof globalThis.performance.now;class s{static create(e){return new s(e)}constructor(e){this._now=n&&!1===e?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}},6637:(e,t,i)=>{"use strict";i.d(t,{$X:()=>G,AV:()=>r,BO:()=>u,Bm:()=>g,DB:()=>x,E_:()=>W,GP:()=>a,HG:()=>_,LJ:()=>I,LU:()=>Q,Lv:()=>k,MV:()=>B,NB:()=>d,OS:()=>p,Q_:()=>E,Qp:()=>T,Ss:()=>$,UD:()=>y,UU:()=>v,Vi:()=>D,W1:()=>C,Wd:()=>J,Wv:()=>L,Z5:()=>R,_J:()=>j,aC:()=>U,bm:()=>c,eY:()=>f,ih:()=>h,iy:()=>F,jy:()=>l,km:()=>O,lF:()=>w,lT:()=>b,m:()=>z,ne:()=>K,ns:()=>M,pc:()=>N,r_:()=>q,tk:()=>X,tl:()=>te,uz:()=>m,y_:()=>ie,z_:()=>A,zd:()=>S});var n=i(8161),s=i(5177);function r(e){return!e||"string"!==typeof e||0===e.trim().length}const o=/{(\d+)}/g;function a(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return 0===i.length?e:e.replace(o,(function(e,t){const n=parseInt(t,10);return isNaN(n)||n<0||n>=i.length?e:i[n]}))}function l(e){return e.replace(/[<>"'&]/g,(e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e}))}function h(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}function c(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function d(e,t){if(!e||!t)return e;const i=t.length;if(0===i||0===e.length)return e;let n=0;for(;e.indexOf(t,n)===n;)n+=i;return e.substring(n)}function u(e,t){if(!e||!t)return e;const i=t.length,n=e.length;if(0===i||0===n)return e;let s=n,r=-1;for(;r=e.lastIndexOf(t,s-1),-1!==r&&r+i===s;){if(0===r)return"";s=r}return e.substring(0,s)}function g(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function p(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("Cannot create regex from empty string");t||(e=c(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let n="";return i.global&&(n+="g"),i.matchCase||(n+="i"),i.multiline&&(n+="m"),i.unicode&&(n+="u"),new RegExp(e,n)}function f(e){if("^"===e.source||"^$"===e.source||"$"===e.source||"^\\s*$"===e.source)return!1;return!(!e.exec("")||0!==e.lastIndex)}function m(e){return e.split(/\r\n|\r|\n/)}function _(e){for(let t=0,i=e.length;t<i;t++){const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return-1}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;for(let n=t;n<i;n++){const i=e.charCodeAt(n);if(32!==i&&9!==i)return e.substring(t,n)}return e.substring(t,i)}function b(e){for(let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;t>=0;t--){const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return-1}function y(e,t){return e<t?-1:e>t?1:0}function w(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;for(;i<n&&s<r;i++,s++){const n=e.charCodeAt(i),r=t.charCodeAt(s);if(n<r)return-1;if(n>r)return 1}const o=n-i,a=r-s;return o<a?-1:o>a?1:0}function C(e,t){return S(e,t,0,e.length,0,t.length)}function S(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;for(;i<n&&s<r;i++,s++){let o=e.charCodeAt(i),a=t.charCodeAt(s);if(o===a)continue;if(o>=128||a>=128)return w(e.toLowerCase(),t.toLowerCase(),i,n,s,r);k(o)&&(o-=32),k(a)&&(a-=32);const l=o-a;if(0!==l)return l}const o=n-i,a=r-s;return o<a?-1:o>a?1:0}function x(e){return e>=48&&e<=57}function k(e){return e>=97&&e<=122}function L(e){return e>=65&&e<=90}function E(e,t){return e.length===t.length&&0===S(e,t)}function M(e,t){const i=t.length;return!(t.length>e.length)&&0===S(e,t,0,i)}function T(e,t){const i=Math.min(e.length,t.length);let n;for(n=0;n<i;n++)if(e.charCodeAt(n)!==t.charCodeAt(n))return n;return i}function D(e,t){const i=Math.min(e.length,t.length);let n;const s=e.length-1,r=t.length-1;for(n=0;n<i;n++)if(e.charCodeAt(s-n)!==t.charCodeAt(r-n))return n;return i}function N(e){return 55296<=e&&e<=56319}function I(e){return 56320<=e&&e<=57343}function A(e,t){return t-56320+(e-55296<<10)+65536}function R(e,t,i){const n=e.charCodeAt(i);if(N(n)&&i+1<t){const t=e.charCodeAt(i+1);if(I(t))return A(n,t)}return n}class P{get offset(){return this._offset}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=function(e,t){const i=e.charCodeAt(t-1);if(I(i)&&t>1){const n=e.charCodeAt(t-2);if(N(n))return A(n,i)}return i}(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=R(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class O{get offset(){return this._iterator.offset}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._iterator=new P(e,t)}nextGraphemeLength(){const e=Z.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const i=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(Y(n,s)){t.setOffset(i);break}n=s}return t.offset-i}prevGraphemeLength(){const e=Z.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const i=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(Y(s,n)){t.setOffset(i);break}n=s}return i-t.offset}eol(){return this._iterator.eol()}}function F(e,t){return new O(e,t).nextGraphemeLength()}function B(e,t){return new O(e,t).prevGraphemeLength()}function z(e,t){t>0&&I(e.charCodeAt(t))&&t--;const i=t+F(e,t);return[i-B(e,i),i]}let V;function W(e){return V||(V=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),V.test(e)}const H=/^[\t\n\r\x20-\x7E]*$/;function U(e){return H.test(e)}const j=/[\u2028\u2029]/;function G(e){return j.test(e)}function K(e){return e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function $(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}const q=String.fromCharCode(65279);function Q(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function X(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}function Y(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||(4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&((11!==e&&9!==e||9!==t&&10!==t)&&((12!==e&&10!==e||10!==t)&&(5!==t&&13!==t&&(7!==t&&(1!==e&&((13!==e||14!==t)&&(6!==e||6!==t)))))))))}class Z{static#e=(()=>this._INSTANCE=null)();static getInstance(){return Z._INSTANCE||(Z._INSTANCE=new Z),Z._INSTANCE}constructor(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n*=2;else{if(!(e>t[3*n+1]))return t[3*n+2];n=2*n+1}return 0}}function J(e,t){if(0===e)return 0;const i=function(e,t){const i=new P(t,e);let n=i.prevCodePoint();for(;ee(n)||65039===n||8419===n;){if(0===i.offset)return;n=i.prevCodePoint()}if(!$(n))return;let s=i.offset;if(s>0){8205===i.prevCodePoint()&&(s=i.offset)}return s}(e,t);if(void 0!==i)return i;const n=new P(t,e);return n.prevCodePoint(),n.offset}function ee(e){return 127995<=e&&e<=127999}class te{static#e=(()=>this.ambiguousCharacterData=new s.d((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))))();static#t=(()=>this.cache=new n.o5({getCacheKey:JSON.stringify},(e=>{function t(e){const t=new Map;for(let i=0;i<e.length;i+=2)t.set(e[i],e[i+1]);return t}function i(e,t){if(!e)return t;const i=new Map;for(const[n,s]of e)t.has(n)&&i.set(n,s);return i}const n=this.ambiguousCharacterData.value;let s,r=e.filter((e=>!e.startsWith("_")&&e in n));0===r.length&&(r=["_default"]);for(const a of r){s=i(s,t(n[a]))}const o=function(e,t){const i=new Map(e);for(const[n,s]of t)i.set(n,s);return i}(t(n._common),s);return new te(o)})))();static getInstance(e){return te.cache.get(Array.from(e))}static#i=(()=>this._locales=new s.d((()=>Object.keys(te.ambiguousCharacterData.value).filter((e=>!e.startsWith("_"))))))();static getLocales(){return te._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}class ie{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static#e=(()=>this._data=void 0)();static getData(){return this._data||(this._data=new Set(ie.getRawData())),this._data}static isInvisibleCharacter(e){return ie.getData().has(e)}static get codePoints(){return ie.getData()}}},1546:(e,t,i)=>{"use strict";i.d(t,{h:()=>n});const n=Symbol("MicrotaskDelay")},7824:(e,t,i)=>{"use strict";i.d(t,{L:()=>s});var n,s,r=i(4808);!function(e){e.isThemeColor=function(e){return e&&"object"===typeof e&&"string"===typeof e.id}}(n||(n={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(e){const n=t.exec(e.id);if(!n)return i(r.W.error);const[,s,o]=n,a=["codicon","codicon-"+s];return o&&a.push("codicon-modifier-"+o.substring(1)),a}e.asClassNameArray=i,e.asClassName=function(e){return i(e).join(" ")},e.asCSSSelector=function(e){return"."+i(e).join(".")},e.isThemeIcon=function(e){return e&&"object"===typeof e&&"string"===typeof e.id&&("undefined"===typeof e.color||n.isThemeColor(e.color))};const s=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);e.fromString=function(e){const t=s.exec(e);if(!t)return;const[,i]=t;return{id:i}},e.fromId=function(e){return{id:e}},e.modify=function(e,t){let i=e.id;const n=i.lastIndexOf("~");return-1!==n&&(i=i.substring(0,n)),t&&(i=`${i}~${t}`),{id:i}},e.getModifier=function(e){const t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)},e.isEqual=function(e,t){return e.id===t.id&&e.color?.id===t.color?.id}}(s||(s={}))},4622:(e,t,i)=>{"use strict";function n(e){return"string"===typeof e}function s(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function r(e){const t=Object.getPrototypeOf(Uint8Array);return"object"===typeof e&&e instanceof t}function o(e){return"number"===typeof e&&!isNaN(e)}function a(e){return!!e&&"function"===typeof e[Symbol.iterator]}function l(e){return!0===e||!1===e}function h(e){return"undefined"===typeof e}function c(e){return!d(e)}function d(e){return h(e)||null===e}function u(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function g(e){if(d(e))throw new Error("Assertion Failed: argument is undefined or null");return e}function p(e){return"function"===typeof e}function f(e,t){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++)m(e[n],t[n])}function m(e,t){if(n(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(p(t)){try{if(e instanceof t)return}catch{}if(!d(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}i.d(t,{Et:()=>o,Gv:()=>s,Kg:()=>n,Lm:()=>l,O9:()=>c,Tn:()=>p,b0:()=>h,eU:()=>g,iu:()=>r,j:()=>u,jx:()=>f,xZ:()=>a,z:()=>d})},7459:(e,t,i)=>{"use strict";function n(e){return e<0?0:e>255?255:0|e}function s(e){return e<0?0:e>4294967295?4294967295:0|e}i.d(t,{W:()=>n,j:()=>s})},4673:(e,t,i)=>{"use strict";i.d(t,{I:()=>_,r:()=>d});var n=i(6744),s=i(1540);const r=/^\w[\w\d+.-]*$/,o=/^\//,a=/^\/\//;const l="",h="/",c=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class d{static isUri(e){return e instanceof d||!!e&&("string"===typeof e.authority&&"string"===typeof e.fragment&&"string"===typeof e.path&&"string"===typeof e.query&&"string"===typeof e.scheme&&"string"===typeof e.fsPath&&"function"===typeof e.with&&"function"===typeof e.toString)}constructor(e,t,i,n,s){let c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];"object"===typeof e?(this.scheme=e.scheme||l,this.authority=e.authority||l,this.path=e.path||l,this.query=e.query||l,this.fragment=e.fragment||l):(this.scheme=function(e,t){return e||t?e:"file"}(e,c),this.authority=t||l,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==h&&(t=h+t):t=h}return t}(this.scheme,i||l),this.query=n||l,this.fragment=s||l,function(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!r.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!o.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,c))}get fsPath(){return _(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:s,fragment:r}=e;return void 0===t?t=this.scheme:null===t&&(t=l),void 0===i?i=this.authority:null===i&&(i=l),void 0===n?n=this.path:null===n&&(n=l),void 0===s?s=this.query:null===s&&(s=l),void 0===r?r=this.fragment:null===r&&(r=l),t===this.scheme&&i===this.authority&&n===this.path&&s===this.query&&r===this.fragment?this:new g(t,i,n,s,r)}static parse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=c.exec(e);return i?new g(i[2]||l,w(i[4]||l),w(i[5]||l),w(i[7]||l),w(i[9]||l),t):new g(l,l,l,l,l)}static file(e){let t=l;if(s.uF&&(e=e.replace(/\\/g,h)),e[0]===h&&e[1]===h){const i=e.indexOf(h,2);-1===i?(t=e.substring(2),e=h):(t=e.substring(2,i),e=e.substring(i)||h)}return new g("file",t,e,l,l)}static from(e,t){return new g(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let t;for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t=s.uF&&"file"===e.scheme?d.file(n.IN.join(_(e,!0),...r)).path:n.SA.join(e.path,...r),e.with({path:t})}toString(){return v(this,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}toJSON(){return this}static revive(e){if(e){if(e instanceof d)return e;{const t=new g(e);return t._formatted=e.external??null,t._fsPath=e._sep===u?e.fsPath??null:null,t}}return e}}const u=s.uF?1:void 0;class g extends d{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=_(this,!1)),this._fsPath}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?v(this,!0):(this._formatted||(this._formatted=v(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=u),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const p={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function f(e,t,i){let n,s=-1;for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o||i&&91===o||i&&93===o||i&&58===o)-1!==s&&(n+=encodeURIComponent(e.substring(s,r)),s=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));const t=p[o];void 0!==t?(-1!==s&&(n+=encodeURIComponent(e.substring(s,r)),s=-1),n+=t):-1===s&&(s=r)}}return-1!==s&&(n+=encodeURIComponent(e.substring(s))),void 0!==n?n:e}function m(e){let t;for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);35===n||63===n?(void 0===t&&(t=e.substr(0,i)),t+=p[n]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}function _(e,t){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,s.uF&&(i=i.replace(/\//g,"\\")),i}function v(e,t){const i=t?m:f;let n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=e;if(s&&(n+=s,n+=":"),(r||"file"===s)&&(n+=h,n+=h),r){let e=r.indexOf("@");if(-1!==e){const t=r.substr(0,e);r=r.substr(e+1),e=t.lastIndexOf(":"),-1===e?n+=i(t,!1,!1):(n+=i(t.substr(0,e),!1,!1),n+=":",n+=i(t.substr(e+1),!1,!0)),n+="@"}r=r.toLowerCase(),e=r.lastIndexOf(":"),-1===e?n+=i(r,!1,!0):(n+=i(r.substr(0,e),!1,!0),n+=r.substr(e))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2)){const e=o.charCodeAt(1);e>=65&&e<=90&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&58===o.charCodeAt(1)){const e=o.charCodeAt(0);e>=65&&e<=90&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}n+=i(o,!0,!1)}return a&&(n+="?",n+=i(a,!1,!1)),l&&(n+="#",n+=t?l:f(l,!1,!1)),n}function b(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+b(e.substr(3)):e}}const y=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function w(e){return e.match(y)?e.replace(y,(e=>b(e))):e}},8964:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SimpleWorkerClient:()=>b,SimpleWorkerServer:()=>C,create:()=>S,logOnceWebWorkerWarning:()=>u});var n=i(2240),s=i(9563),r=i(4663),o=i(4405),a=i(1540),l=i(6637);const h="default",c="$initialize";let d=!1;function u(e){a.HZ&&(d||(d=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))}class g{constructor(e,t,i,n,s){this.vsWorker=e,this.req=t,this.channel=i,this.method=n,this.args=s,this.type=0}}class p{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}}class f{constructor(e,t,i,n,s){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=n,this.arg=s,this.type=2}}class m{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class _{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class v{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const n=String(++this._lastSentReq);return new Promise(((s,r)=>{this._pendingReplies[n]={resolve:s,reject:r},this._send(new g(this._workerId,n,e,t,i))}))}listen(e,t,i){let n=null;const r=new s.vl({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new f(this._workerId,n,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new _(this._workerId,n)),n=null}});return r.event}handleMessage(e){e&&e.vsWorker&&(-1!==this._workerId&&e.vsWorker!==this._workerId||this._handleMessage(e))}createProxyToRemoteChannel(e,t){var i=this;const n={get:(n,s)=>("string"!==typeof s||n[s]||(w(s)?n[s]=t=>this.listen(e,s,t):y(s)?n[s]=this.listen(e,s,void 0):36===s.charCodeAt(0)&&(n[s]=async function(){await(t?.());for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return i.sendMessage(e,s,r)})),n[s])};return new Proxy(Object.create(null),n)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq])return void console.warn("Got reply to unknown seq");const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;return e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),void t.reject(i)}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then((e=>{this._send(new p(this._workerId,t,e,void 0))}),(e=>{e.detail instanceof Error&&(e.detail=(0,n.cU)(e.detail)),this._send(new p(this._workerId,t,void 0,(0,n.cU)(e)))}))}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)((e=>{this._send(new m(this._workerId,t,e))}));this._pendingEvents.set(t,i)}_handleEventMessage(e){this._pendingEmitters.has(e.req)?this._pendingEmitters.get(e.req).fire(e.event):console.warn("Got event for unknown req")}_handleUnsubscribeEventMessage(e){this._pendingEvents.has(e.req)?(this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)):console.warn("Got unsubscribe for unknown req")}_send(e){const t=[];if(0===e.type)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else 1===e.type&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class b extends r.jG{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},(e=>{this._protocol.handleMessage(e)}),(e=>{(0,n.dz)(e)}))),this._protocol=new v({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t,i)=>this._handleMessage(e,t,i),handleEvent:(e,t,i)=>this._handleEvent(e,t,i)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const s=globalThis.require;"undefined"!==typeof s&&"function"===typeof s.getConfig?i=s.getConfig():"undefined"!==typeof globalThis.requirejs&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(h,c,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(h,(async()=>{await this._onModuleLoaded})),this._onModuleLoaded.catch((e=>{this._onError("Worker failed to load "+t.amdModuleId,e)}))}_handleMessage(e,t,i){const n=this._localChannels.get(e);if(!n)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if("function"!==typeof n[t])return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(n[t].apply(n,i))}catch(s){return Promise.reject(s)}}_handleEvent(e,t,i){const n=this._localChannels.get(e);if(!n)throw new Error(`Missing channel ${e} on main thread`);if(w(t)){const s=n[t].call(n,i);if("function"!==typeof s)throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return s}if(y(t)){const i=n[t];if("function"!==typeof i)throw new Error(`Missing event ${t} on main thread channel ${e}.`);return i}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function y(e){return"o"===e[0]&&"n"===e[1]&&l.Wv(e.charCodeAt(2))}function w(e){return/^onDynamic/.test(e)&&l.Wv(e.charCodeAt(9))}class C{constructor(e,t){this._localChannels=new Map,this._remoteChannels=new Map,this._requestHandlerFactory=t,this._requestHandler=null,this._protocol=new v({sendMessage:(t,i)=>{e(t,i)},handleMessage:(e,t,i)=>this._handleMessage(e,t,i),handleEvent:(e,t,i)=>this._handleEvent(e,t,i)})}onmessage(e){this._protocol.handleMessage(e)}_handleMessage(e,t,i){if(e===h&&t===c)return this.initialize(i[0],i[1],i[2]);const n=e===h?this._requestHandler:this._localChannels.get(e);if(!n)return Promise.reject(new Error(`Missing channel ${e} on worker thread`));if("function"!==typeof n[t])return Promise.reject(new Error(`Missing method ${t} on worker thread channel ${e}`));try{return Promise.resolve(n[t].apply(n,i))}catch(s){return Promise.reject(s)}}_handleEvent(e,t,i){const n=e===h?this._requestHandler:this._localChannels.get(e);if(!n)throw new Error(`Missing channel ${e} on worker thread`);if(w(t)){const e=n[t].call(n,i);if("function"!==typeof e)throw new Error(`Missing dynamic event ${t} on request handler.`);return e}if(y(t)){const e=n[t];if("function"!==typeof e)throw new Error(`Missing event ${t} on request handler.`);return e}throw new Error(`Malformed event name ${t}`)}getChannel(e){if(!this._remoteChannels.has(e)){const t=this._protocol.createProxyToRemoteChannel(e);this._remoteChannels.set(e,t)}return this._remoteChannels.get(e)}async initialize(e,t,n){if(this._protocol.setWorkerId(e),!this._requestHandlerFactory){t&&("undefined"!==typeof t.baseUrl&&delete t.baseUrl,"undefined"!==typeof t.paths&&"undefined"!==typeof t.paths.vs&&delete t.paths.vs,"undefined"!==typeof t.trustedTypesPolicy&&delete t.trustedTypesPolicy,t.catchError=!0,globalThis.require.config(t));{const e=o.zl.asBrowserUri(`${n}.js`).toString(!0);return i(5890)(`${e}`).then((e=>{if(this._requestHandler=e.create(this),!this._requestHandler)throw new Error("No RequestHandler!")}))}}this._requestHandler=this._requestHandlerFactory(this)}}function S(e){return new C(e,null)}},6269:(e,t,i)=>{"use strict";i.d(t,{V:()=>s});var n=i(7459);class s{constructor(e){const t=(0,n.W)(e);this._defaultValue=t,this._asciiMap=s._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=(0,n.W)(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}},5242:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(6637);class s{static _nextVisibleColumn(e,t,i){return 9===e?s.nextRenderTabStop(t,i):n.ne(e)||n.Ss(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const s=Math.min(t-1,e.length),r=e.substring(0,s),o=new n.km(r);let a=0;for(;!o.eol();){const e=n.Z5(r,s,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(e,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const s=e.length,r=new n.km(e);let o=0,a=1;for(;!r.eol();){const l=n.Z5(e,s,r.offset);r.nextGraphemeLength();const h=this._nextVisibleColumn(l,o,i),c=r.offset+1;if(h>=t){return h-t<t-o?c:a}o=h,a=c}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}},4960:(e,t,i)=>{"use strict";i.d(t,{A3:()=>M,AQ:()=>z,Am:()=>L,As:()=>D,BD:()=>Y,Bo:()=>Q,CM:()=>x,D0:()=>h,H0:()=>k,I2:()=>q,IW:()=>Z,If:()=>X,JB:()=>I,L0:()=>p,Mf:()=>l,P1:()=>ne,Pe:()=>te,Qt:()=>m,WD:()=>ie,WS:()=>ee,WY:()=>se,Xr:()=>R,aZ:()=>B,bB:()=>J,hz:()=>w,je:()=>u,kG:()=>a,kM:()=>c,l5:()=>U,lQ:()=>W,n4:()=>$,ob:()=>y,ow:()=>C,s7:()=>K,sC:()=>d,sH:()=>j,sN:()=>V,ss:()=>H,tK:()=>E,tp:()=>T,vP:()=>S,vV:()=>b,w4:()=>f,we:()=>g,x9:()=>A,yI:()=>F,yw:()=>P,zp:()=>G});var n=i(1266),s=i(3800),r=i(2583),o=i(2427);const a=(0,r.x1A)("editor.lineHighlightBackground",null,n.kg("lineHighlight","Background color for the highlight of line at the cursor position.")),l=(0,r.x1A)("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:r.b1q},n.kg("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),h=((0,r.x1A)("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},n.kg("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1A)("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:r.buw,hcLight:r.buw},n.kg("rangeHighlightBorder","Background color of the border around highlighted ranges.")),(0,r.x1A)("editor.symbolHighlightBackground",{dark:r.Ubg,light:r.Ubg,hcDark:null,hcLight:null},n.kg("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1A)("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:r.buw,hcLight:r.buw},n.kg("symbolHighlightBorder","Background color of the border around highlighted symbols.")),(0,r.x1A)("editorCursor.foreground",{dark:"#AEAFAD",light:s.Q1.black,hcDark:s.Q1.white,hcLight:"#0F4A85"},n.kg("caret","Color of the editor cursor."))),c=(0,r.x1A)("editorCursor.background",null,n.kg("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),d=(0,r.x1A)("editorMultiCursor.primary.foreground",h,n.kg("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),u=(0,r.x1A)("editorMultiCursor.primary.background",c,n.kg("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),g=(0,r.x1A)("editorMultiCursor.secondary.foreground",h,n.kg("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),p=(0,r.x1A)("editorMultiCursor.secondary.background",c,n.kg("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),f=(0,r.x1A)("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},n.kg("editorWhitespaces","Color of whitespace characters in the editor.")),m=(0,r.x1A)("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:s.Q1.white,hcLight:"#292929"},n.kg("editorLineNumbers","Color of editor line numbers.")),_=(0,r.x1A)("editorIndentGuide.background",f,n.kg("editorIndentGuides","Color of the editor indentation guides."),!1,n.kg("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),v=(0,r.x1A)("editorIndentGuide.activeBackground",f,n.kg("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,n.kg("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),b=(0,r.x1A)("editorIndentGuide.background1",_,n.kg("editorIndentGuides1","Color of the editor indentation guides (1).")),y=(0,r.x1A)("editorIndentGuide.background2","#00000000",n.kg("editorIndentGuides2","Color of the editor indentation guides (2).")),w=(0,r.x1A)("editorIndentGuide.background3","#00000000",n.kg("editorIndentGuides3","Color of the editor indentation guides (3).")),C=(0,r.x1A)("editorIndentGuide.background4","#00000000",n.kg("editorIndentGuides4","Color of the editor indentation guides (4).")),S=(0,r.x1A)("editorIndentGuide.background5","#00000000",n.kg("editorIndentGuides5","Color of the editor indentation guides (5).")),x=(0,r.x1A)("editorIndentGuide.background6","#00000000",n.kg("editorIndentGuides6","Color of the editor indentation guides (6).")),k=(0,r.x1A)("editorIndentGuide.activeBackground1",v,n.kg("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),L=(0,r.x1A)("editorIndentGuide.activeBackground2","#00000000",n.kg("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),E=(0,r.x1A)("editorIndentGuide.activeBackground3","#00000000",n.kg("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),M=(0,r.x1A)("editorIndentGuide.activeBackground4","#00000000",n.kg("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),T=(0,r.x1A)("editorIndentGuide.activeBackground5","#00000000",n.kg("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),D=(0,r.x1A)("editorIndentGuide.activeBackground6","#00000000",n.kg("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),N=(0,r.x1A)("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:r.buw,hcLight:r.buw},n.kg("editorActiveLineNumber","Color of editor active line number"),!1,n.kg("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),I=((0,r.x1A)("editorLineNumber.activeForeground",N,n.kg("editorActiveLineNumber","Color of editor active line number")),(0,r.x1A)("editorLineNumber.dimmedForeground",null,n.kg("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."))),A=((0,r.x1A)("editorRuler.foreground",{dark:"#5A5A5A",light:s.Q1.lightgrey,hcDark:s.Q1.white,hcLight:"#292929"},n.kg("editorRuler","Color of the editor rulers.")),(0,r.x1A)("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},n.kg("editorCodeLensForeground","Foreground color of editor CodeLens")),(0,r.x1A)("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},n.kg("editorBracketMatchBackground","Background color behind matching brackets")),(0,r.x1A)("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:r.b1q,hcLight:r.b1q},n.kg("editorBracketMatchBorder","Color for matching brackets boxes")),(0,r.x1A)("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},n.kg("editorOverviewRulerBorder","Color of the overview ruler border."))),R=(0,r.x1A)("editorOverviewRuler.background",null,n.kg("editorOverviewRulerBackground","Background color of the editor overview ruler.")),P=((0,r.x1A)("editorGutter.background",r.YtV,n.kg("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),(0,r.x1A)("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:s.Q1.fromHex("#fff").transparent(.8),hcLight:r.b1q},n.kg("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),(0,r.x1A)("editorUnnecessaryCode.opacity",{dark:s.Q1.fromHex("#000a"),light:s.Q1.fromHex("#0007"),hcDark:null,hcLight:null},n.kg("unnecessaryCodeOpacity","Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out."))),O=((0,r.x1A)("editorGhostText.border",{dark:null,light:null,hcDark:s.Q1.fromHex("#fff").transparent(.8),hcLight:s.Q1.fromHex("#292929").transparent(.8)},n.kg("editorGhostTextBorder","Border color of ghost text in the editor.")),(0,r.x1A)("editorGhostText.foreground",{dark:s.Q1.fromHex("#ffffff56"),light:s.Q1.fromHex("#0007"),hcDark:null,hcLight:null},n.kg("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),(0,r.x1A)("editorGhostText.background",null,n.kg("editorGhostTextBackground","Background color of the ghost text in the editor.")),new s.Q1(new s.bU(0,122,204,.6))),F=((0,r.x1A)("editorOverviewRuler.rangeHighlightForeground",O,n.kg("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1A)("editorOverviewRuler.errorForeground",{dark:new s.Q1(new s.bU(255,18,18,.7)),light:new s.Q1(new s.bU(255,18,18,.7)),hcDark:new s.Q1(new s.bU(255,50,50,1)),hcLight:"#B5200D"},n.kg("overviewRuleError","Overview ruler marker color for errors."))),B=(0,r.x1A)("editorOverviewRuler.warningForeground",{dark:r.Hng,light:r.Hng,hcDark:r.Stt,hcLight:r.Stt},n.kg("overviewRuleWarning","Overview ruler marker color for warnings.")),z=(0,r.x1A)("editorOverviewRuler.infoForeground",{dark:r.pOz,light:r.pOz,hcDark:r.IIb,hcLight:r.IIb},n.kg("overviewRuleInfo","Overview ruler marker color for infos.")),V=(0,r.x1A)("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},n.kg("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),W=(0,r.x1A)("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},n.kg("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),H=(0,r.x1A)("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},n.kg("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),U=(0,r.x1A)("editorBracketHighlight.foreground4","#00000000",n.kg("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),j=(0,r.x1A)("editorBracketHighlight.foreground5","#00000000",n.kg("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),G=(0,r.x1A)("editorBracketHighlight.foreground6","#00000000",n.kg("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),K=(0,r.x1A)("editorBracketHighlight.unexpectedBracket.foreground",{dark:new s.Q1(new s.bU(255,18,18,.8)),light:new s.Q1(new s.bU(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},n.kg("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),$=(0,r.x1A)("editorBracketPairGuide.background1","#00000000",n.kg("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),q=(0,r.x1A)("editorBracketPairGuide.background2","#00000000",n.kg("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Q=(0,r.x1A)("editorBracketPairGuide.background3","#00000000",n.kg("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),X=(0,r.x1A)("editorBracketPairGuide.background4","#00000000",n.kg("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Y=(0,r.x1A)("editorBracketPairGuide.background5","#00000000",n.kg("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Z=(0,r.x1A)("editorBracketPairGuide.background6","#00000000",n.kg("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),J=(0,r.x1A)("editorBracketPairGuide.activeBackground1","#00000000",n.kg("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),ee=(0,r.x1A)("editorBracketPairGuide.activeBackground2","#00000000",n.kg("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),te=(0,r.x1A)("editorBracketPairGuide.activeBackground3","#00000000",n.kg("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),ie=(0,r.x1A)("editorBracketPairGuide.activeBackground4","#00000000",n.kg("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),ne=(0,r.x1A)("editorBracketPairGuide.activeBackground5","#00000000",n.kg("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),se=(0,r.x1A)("editorBracketPairGuide.activeBackground6","#00000000",n.kg("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));(0,r.x1A)("editorUnicodeHighlight.border",r.Hng,n.kg("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),(0,r.x1A)("editorUnicodeHighlight.background",r.whs,n.kg("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));(0,o.zy)(((e,t)=>{const i=e.getColor(r.YtV),n=e.getColor(a),s=n&&!n.isTransparent()?n:i;s&&t.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)}))},8703:(e,t,i)=>{"use strict";function n(e){let t=0,i=0,n=0,s=0;for(let r=0,o=e.length;r<o;r++){const a=e.charCodeAt(r);13===a?(0===t&&(i=r),t++,r+1<o&&10===e.charCodeAt(r+1)?(s|=2,r++):s|=3,n=r+1):10===a&&(s|=1,0===t&&(i=r),t++,n=r+1)}return 0===t&&(i=e.length),[t,i,e.length-n,s]}i.d(t,{W:()=>n})},4788:(e,t,i)=>{"use strict";i.d(t,{P:()=>r});var n=i(6637),s=i(5242);function r(e,t,i){let r=n.HG(e);return-1===r&&(r=e.length),function(e,t,i){let n=0;for(let o=0;o<e.length;o++)"\t"===e.charAt(o)?n=s.A.nextIndentTabStop(n,t):n++;let r="";if(!i){const e=Math.floor(n/t);n%=t;for(let t=0;t<e;t++)r+="\t"}for(let s=0;s<n;s++)r+=" ";return r}(e.substring(0,r),t,i)+e.substring(r)}},6612:(e,t,i)=>{"use strict";i.d(t,{M:()=>a,S:()=>l});var n=i(2240),s=i(6807),r=i(5902),o=i(194);class a{static fromRangeInclusive(e){return new a(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(0===e.length)return[];let t=new l(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new l(e[i].slice()));return t.ranges}static join(e){if(0===e.length)throw new n.D7("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let n=1;n<e.length;n++)t=Math.min(t,e[n].startLineNumber),i=Math.max(i,e[n].endLineNumberExclusive);return new a(t,i)}static ofLength(e,t){return new a(e,e+t)}static deserialize(e){return new a(e[0],e[1])}constructor(e,t){if(e>t)throw new n.D7(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new a(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new a(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new a(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new a(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new r.Q(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new r.Q(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new s.L(this.startLineNumber-1,this.endLineNumberExclusive-1)}}class l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(0===e.length)return;const t=(0,o.hw)(this._normalizedRanges,(t=>t.endLineNumberExclusive>=e.startLineNumber)),i=(0,o.iM)(this._normalizedRanges,(t=>t.startLineNumber<=e.endLineNumberExclusive))+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{const n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){const t=(0,o.lx)(this._normalizedRanges,(t=>t.startLineNumber<=e));return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=(0,o.lx)(this._normalizedRanges,(t=>t.startLineNumber<e.endLineNumberExclusive));return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(0===this._normalizedRanges.length)return e;if(0===e._normalizedRanges.length)return this;const t=[];let i=0,n=0,s=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let r=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){const t=this._normalizedRanges[i],s=e._normalizedRanges[n];t.startLineNumber<s.startLineNumber?(r=t,i++):(r=s,n++)}else i<this._normalizedRanges.length?(r=this._normalizedRanges[i],i++):(r=e._normalizedRanges[n],n++);null===s?s=r:s.endLineNumberExclusive>=r.startLineNumber?s=new a(s.startLineNumber,Math.max(s.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(s),s=r)}return null!==s&&t.push(s),new l(t)}subtractFrom(e){const t=(0,o.hw)(this._normalizedRanges,(t=>t.endLineNumberExclusive>=e.startLineNumber)),i=(0,o.iM)(this._normalizedRanges,(t=>t.startLineNumber<=e.endLineNumberExclusive))+1;if(t===i)return new l([e]);const n=[];let s=e.startLineNumber;for(let r=t;r<i;r++){const e=this._normalizedRanges[r];e.startLineNumber>s&&n.push(new a(s,e.startLineNumber)),s=e.endLineNumberExclusive}return s<e.endLineNumberExclusive&&n.push(new a(s,e.endLineNumberExclusive)),new l(n)}toString(){return this._normalizedRanges.map((e=>e.toString())).join(", ")}getIntersection(e){const t=[];let i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){const s=this._normalizedRanges[i],r=e._normalizedRanges[n],o=s.intersect(r);o&&!o.isEmpty&&t.push(o),s.endLineNumberExclusive<r.endLineNumberExclusive?i++:n++}return new l(t)}getWithDelta(e){return new l(this._normalizedRanges.map((t=>t.delta(e))))}}},6807:(e,t,i)=>{"use strict";i.d(t,{L:()=>s,h:()=>r});var n=i(2240);class s{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{const r=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new s(r,o))}}static tryCreate(e,t){if(!(e>t))return new s(e,t)}static ofLength(e){return new s(0,e)}static ofStartAndLength(e,t){return new s(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new n.D7(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new s(this.start+e,this.endExclusive+e)}deltaStart(e){return new s(this.start+e,this.endExclusive)}deltaEnd(e){return new s(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new s(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new s(t,i)}intersects(e){return Math.max(this.start,e.start)<Math.min(this.endExclusive,e.endExclusive)}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new n.D7(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new n.D7(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class r{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const n=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new s(n,r))}}toString(){return this._sortedRanges.map((e=>e.toString())).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new r;for(const i of this._sortedRanges){const n=i.intersect(e);n&&t.addRange(n)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce(((e,t)=>e+t.length),0)}}},2464:(e,t,i)=>{"use strict";i.d(t,{y:()=>n});class n{constructor(e,t){this.lineNumber=e,this.column=t}with(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineNumber,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.column;return e===this.lineNumber&&t===this.column?this:new n(e,t)}delta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.with(this.lineNumber+e,this.column+t)}equals(e){return n.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return n.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return n.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){const i=0|e.lineNumber,n=0|t.lineNumber;if(i===n){return(0|e.column)-(0|t.column)}return i-n}clone(){return new n(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new n(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"===typeof e.lineNumber&&"number"===typeof e.column}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}},5902:(e,t,i)=>{"use strict";i.d(t,{Q:()=>s});var n=i(2464);class s{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return s.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return s.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<=e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>=e.endColumn))}containsRange(e){return s.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}strictContainsRange(e){return s.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)))}plusRange(e){return s.plusRange(this,e)}static plusRange(e,t){let i,n,r,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new s(i,n,r,o)}intersectRanges(e){return s.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,h=t.endLineNumber,c=t.endColumn;return i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),r>h?(r=h,o=c):r===h&&(o=Math.min(o,c)),i>r||i===r&&n>o?null:new s(i,n,r,o)}equalsRange(e){return s.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return s.getEndPosition(this)}static getEndPosition(e){return new n.y(e.endLineNumber,e.endColumn)}getStartPosition(){return s.getStartPosition(this)}static getStartPosition(e){return new n.y(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new s(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new s(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return s.collapseToStart(this)}static collapseToStart(e){return new s(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return s.collapseToEnd(this)}static collapseToEnd(e){return new s(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new s(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new s(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new s(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"===typeof e.startLineNumber&&"number"===typeof e.startColumn&&"number"===typeof e.endLineNumber&&"number"===typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const i=0|e.startLineNumber,n=0|t.startLineNumber;if(i===n){const i=0|e.startColumn,n=0|t.startColumn;if(i===n){const i=0|e.endLineNumber,n=0|t.endLineNumber;if(i===n){return(0|e.endColumn)-(0|t.endColumn)}return i-n}return i-n}return i-n}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}},7817:(e,t,i)=>{"use strict";i.d(t,{L:()=>r});var n=i(2464),s=i(5902);class r extends s.Q{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return r.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return 0===this.getDirection()?new r(this.startLineNumber,this.startColumn,e,t):new r(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new n.y(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new n.y(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return 0===this.getDirection()?new r(e,t,this.endLineNumber,this.endColumn):new r(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return 0===t?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new r(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new r(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&"number"===typeof e.selectionStartLineNumber&&"number"===typeof e.selectionStartColumn&&"number"===typeof e.positionLineNumber&&"number"===typeof e.positionColumn}static createWithDirection(e,t,i,n,s){return 0===s?new r(e,t,i,n):new r(i,n,e,t)}}},587:(e,t,i)=>{"use strict";i.d(t,{Su:()=>d,b7:()=>c,fe:()=>u});var n=i(6637),s=i(1540),r=i(1137);let o,a,l;function h(){return o||(o=new TextDecoder("UTF-16LE")),o}function c(){return l||(l=s.cm()?h():(a||(a=new TextDecoder("UTF-16BE")),a)),l}function d(e,t,i){const n=new Uint16Array(e.buffer,t,i);return i>0&&(65279===n[0]||65534===n[0])?function(e,t,i){const n=[];let s=0;for(let o=0;o<i;o++){const i=r.$l(e,t);t+=2,n[s++]=String.fromCharCode(i)}return n.join("")}(e,t,i):h().decode(n)}class u{constructor(e){this._capacity=0|e,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(0===this._bufferLength)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return c().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(0===t||n.pc(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=e);for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}},9552:(e,t,i)=>{"use strict";i.d(t,{k:()=>o,x:()=>a});var n=i(1137),s=i(587);function r(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class o{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${r(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${r(this.oldText)}")`:`(replace@${this.oldPosition} "${r(this.oldText)}" with "${r(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const s=t.length;n.Sw(e,s,i),i+=4;for(let r=0;r<s;r++)n.gN(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){const i=n.bb(e,t);return t+=4,(0,s.Su)(e,t,i)}writeSize(){return 8+o._writeStringSize(this.oldText)+o._writeStringSize(this.newText)}write(e,t){return n.Sw(e,this.oldPosition,t),t+=4,n.Sw(e,this.newPosition,t),t+=4,t=o._writeString(e,this.oldText,t),t=o._writeString(e,this.newText,t)}static read(e,t,i){const s=n.bb(e,t);t+=4;const r=n.bb(e,t);t+=4;const a=o._readString(e,t);t+=o._writeStringSize(a);const l=o._readString(e,t);return t+=o._writeStringSize(l),i.push(new o(s,a,r,l)),t}}function a(e,t){if(null===e||0===e.length)return t;return new l(e,t).compress()}class l{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(null===i){this._acceptCurr(n),n=this._getCurr(++t);continue}if(null===n){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[e,t]=l._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(e),n=t;continue}if(i.newPosition<n.oldPosition){const[e,t]=l._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(e),i=t;continue}let s,r;if(n.oldEnd===i.newEnd)s=i,r=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[e,o]=l._splitPrev(i,n.oldLength);s=e,r=n,i=o,n=this._getCurr(++t)}else{const[t,o]=l._splitCurr(n,i.newLength);s=i,r=t,i=this._getPrev(++e),n=o}this._result[this._resultLen++]=new o(s.oldPosition,s.oldText,r.newPosition,r.newText),this._prevDeltaOffset+=s.newLength-s.oldLength,this._currDeltaOffset+=r.newLength-r.oldLength}const s=l._merge(this._result);return l._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=l._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=l._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new o(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new o(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new o(e.oldPosition,e.oldText,e.newPosition,i),new o(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new o(e.oldPosition,i,e.newPosition,e.newText),new o(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;const t=[];let i=0,n=e[0];for(let s=1;s<e.length;s++){const r=e[s];n.oldEnd===r.oldPosition?n=new o(n.oldPosition,n.oldText+r.oldText,n.newPosition,n.newText+r.newText):(t[i++]=n,n=r)}return t[i++]=n,t}static _removeNoOps(e){if(0===e.length)return e;const t=[];let i=0;for(let n=0;n<e.length;n++){const s=e[n];s.oldText!==s.newText&&(t[i++]=s)}return t}}},4235:(e,t,i)=>{"use strict";i.d(t,{CO:()=>g,WR:()=>d,mF:()=>c});var n=i(7289),s=i(2240),r=i(2464),o=i(6807),a=i(3724);class l{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new o.L(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new a.W(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}var h=i(5902);class c{constructor(e){this.edits=e,(0,n.Ft)((()=>(0,n.Xo)(e,((e,t)=>e.range.getEndPosition().isBeforeOrEqual(t.range.getStartPosition())))))}apply(e){let t="",i=new r.y(1,1);for(const s of this.edits){const n=s.range,r=n.getStartPosition(),o=n.getEndPosition(),a=u(i,r);a.isEmpty()||(t+=e.getValueOfRange(a)),t+=s.text,i=o}const n=u(i,e.endPositionExclusive);return n.isEmpty()||(t+=e.getValueOfRange(n)),t}applyToString(e){const t=new p(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,n=0;for(const s of this.edits){const o=a.W.ofText(s.text),l=r.y.lift({lineNumber:s.range.startLineNumber+i,column:s.range.startColumn+(s.range.startLineNumber===t?n:0)}),h=o.createRange(l);e.push(h),i=h.endLineNumber-s.range.endLineNumber,n=h.endColumn-s.range.endColumn,t=s.range.endLineNumber}return e}}class d{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function u(e,t){if(e.lineNumber===t.lineNumber&&e.column===Number.MAX_SAFE_INTEGER)return h.Q.fromPositions(t,t);if(!e.isBeforeOrEqual(t))throw new s.D7("start must be before end");return new h.Q(e.lineNumber,e.column,t.lineNumber,t.column)}class g{get endPositionExclusive(){return this.length.addToPosition(new r.y(1,1))}}class p extends g{constructor(e){super(),this.value=e,this._t=new l(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}},3724:(e,t,i)=>{"use strict";i.d(t,{W:()=>r});var n=i(2464),s=i(5902);class r{static#e=(()=>this.zero=new r(0,0))();static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new r(0,t.column-e.column):new r(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return r.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const n of e)"\n"===n?(t++,i=0):i++;return new r(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return 0===this.lineCount?new s.Q(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new s.Q(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return 0===this.lineCount?new n.y(e.lineNumber,e.column+this.columnCount):new n.y(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}},2569:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});const n={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}},9285:(e,t,i)=>{"use strict";i.d(t,{i:()=>a});var n=i(197),s=i(6269);class r extends s.V{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,n=e.length;i<n;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?(this._cachedLine===e||(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e))),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const o=new n.qK(10);function a(e,t){const i=`${e}/${t.join(",")}`;let n=o.get(i);return n||(n=new r(e,t),o.set(i,n)),n}},4423:(e,t,i)=>{"use strict";i.d(t,{Io:()=>a,J3:()=>r,Ld:()=>o,Th:()=>h});var n=i(8353),s=i(2194);const r="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="(-?\\d*\\.\\d\\w*)|([^";for(const i of r)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}();function a(e){let t=o;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}const l=new s.w;function h(e,t,i,s,r){if(t=a(t),r||(r=n.f.first(l)),i.length>r.maxLen){let n=e-r.maxLen/2;return n<0?n=0:s+=n,h(e,t,i=i.substring(n,e+r.maxLen/2),s,r)}const o=Date.now(),d=e-1-s;let u=-1,g=null;for(let n=1;!(Date.now()-o>=r.timeBudget);n++){const e=d-r.windowSize*n;t.lastIndex=Math.max(0,e);const s=c(t,i,d,u);if(!s&&g)break;if(g=s,e<=0)break;u=e}if(g){const e={word:g[0],startColumn:s+1+g.index,endColumn:s+1+g.index+g[0].length};return t.lastIndex=0,e}return null}function c(e,t,i,n){let s;for(;s=e.exec(t);){const t=s.index||0;if(t<=i&&e.lastIndex>=i)return s;if(n>0&&t>n)return null}return null}l.unshift({maxLen:1e3,windowSize:15,timeBudget:150})},7581:(e,t,i)=>{"use strict";i.d(t,{$8:()=>a,SL:()=>o,_3:()=>l,aY:()=>c,uY:()=>h});var n=i(4961),s=i(2240),r=i(6807);class o{static trivial(e,t){return new o([new a(r.L.ofLength(e.length),r.L.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new o([new a(r.L.ofLength(e.length),r.L.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class a{static invert(e,t){const i=[];return(0,n.pN)(e,((e,n)=>{i.push(a.fromOffsetPairs(e?e.getEndExclusives():l.zero,n?n.getStarts():new l(t,(e?e.seq2Range.endExclusive-e.seq1Range.endExclusive:0)+t)))})),i}static fromOffsetPairs(e,t){return new a(new r.L(e.offset1,t.offset1),new r.L(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new s.D7("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new a(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new a(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return 0===e?this:new a(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return 0===e?this:new a(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return 0===e?this:new a(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(t&&i)return new a(t,i)}getStarts(){return new l(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new l(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class l{static#e=(()=>this.zero=new l(0,0))();static#t=(()=>this.max=new l(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER))();constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return 0===e?this:new l(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}class h{static#e=(()=>this.instance=new h)();isValid(){return!0}}class c{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new s.D7("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}}},3144:(e,t,i)=>{"use strict";i.d(t,{D8:()=>I});var n=i(4961),s=i(7289),r=i(6612),o=i(6807),a=i(5902),l=i(7581);class h{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function c(e){return 32===e||9===e}class d{static#e=(()=>this.chrKeys=new Map)();static getKey(e){let t=this.chrKeys.get(e);return void 0===t&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let n=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const e=t[s];for(let t=0;t<e.length;t++){n++;const i=e[t],s=d.getKey(i);this.histogram[s]=(this.histogram[s]||0)+1}n++;const i=d.getKey("\n");this.histogram[i]=(this.histogram[i]||0)+1}this.totalCount=n}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let n=0;n<i;n++)t+=Math.abs((this.histogram[n]??0)-(e.histogram[n]??0));return 1-t/(this.totalCount+e.totalCount)}}class u{compute(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.uY.instance,n=arguments.length>3?arguments[3]:void 0;if(0===e.length||0===t.length)return l.SL.trivial(e,t);const s=new h(e.length,t.length),r=new h(e.length,t.length),a=new h(e.length,t.length);for(let o=0;o<e.length;o++)for(let h=0;h<t.length;h++){if(!i.isValid())return l.SL.trivialTimedOut(e,t);const c=0===o?0:s.get(o-1,h),d=0===h?0:s.get(o,h-1);let u;e.getElement(o)===t.getElement(h)?(u=0===o||0===h?0:s.get(o-1,h-1),o>0&&h>0&&3===r.get(o-1,h-1)&&(u+=a.get(o-1,h-1)),u+=n?n(o,h):1):u=-1;const g=Math.max(c,d,u);if(g===u){const e=o>0&&h>0?a.get(o-1,h-1):0;a.set(o,h,e+1),r.set(o,h,3)}else g===c?(a.set(o,h,0),r.set(o,h,1)):g===d&&(a.set(o,h,0),r.set(o,h,2));s.set(o,h,g)}const c=[];let d=e.length,u=t.length;function g(e,t){e+1===d&&t+1===u||c.push(new l.$8(new o.L(e+1,d),new o.L(t+1,u))),d=e,u=t}let p=e.length-1,f=t.length-1;for(;p>=0&&f>=0;)3===r.get(p,f)?(g(p,f),p--,f--):1===r.get(p,f)?p--:f--;return g(-1,-1),c.reverse(),new l.SL(c,!1)}}class g{compute(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.uY.instance;if(0===e.length||0===t.length)return l.SL.trivial(e,t);const n=e,s=t;function r(e,t){for(;e<n.length&&t<s.length&&n.getElement(e)===s.getElement(t);)e++,t++;return e}let a=0;const h=new f;h.set(0,r(0,0));const c=new m;c.set(0,0===h.get(0)?null:new p(null,0,0,h.get(0)));let d=0;e:for(;;){if(a++,!i.isValid())return l.SL.trivialTimedOut(n,s);const e=-Math.min(a,s.length+a%2),t=Math.min(a,n.length+a%2);for(d=e;d<=t;d+=2){let i=0;const o=d===t?-1:h.get(d+1),a=d===e?-1:h.get(d-1)+1;i++;const l=Math.min(Math.max(o,a),n.length),u=l-d;if(i++,l>n.length||u>s.length)continue;const g=r(l,u);h.set(d,g);const f=l===o?c.get(d+1):c.get(d-1);if(c.set(d,g!==l?new p(f,l,u,g-l):f),h.get(d)===n.length&&h.get(d)-d===s.length)break e}}let u=c.get(d);const g=[];let _=n.length,v=s.length;for(;;){const e=u?u.x+u.length:0,t=u?u.y+u.length:0;if(e===_&&t===v||g.push(new l.$8(new o.L(e,_),new o.L(t,v))),!u)break;_=u.x,v=u.y,u=u.prev}return g.reverse(),new l.SL(g,!1)}}class p{constructor(e,t,i,n){this.prev=e,this.x=t,this.y=i,this.length=n}}class f{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if((e=-e-1)>=this.negativeArr.length){const e=this.negativeArr;this.negativeArr=new Int32Array(2*e.length),this.negativeArr.set(e)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const e=this.positiveArr;this.positiveArr=new Int32Array(2*e.length),this.positiveArr.set(e)}this.positiveArr[e]=t}}}class m{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}var _=i(3534),v=i(194),b=i(197),y=i(2464);class w{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let n=this.range.startLineNumber;n<=this.range.endLineNumber;n++){let t=e[n-1],s=0;n===this.range.startLineNumber&&this.range.startColumn>1&&(s=this.range.startColumn-1,t=t.substring(s)),this.lineStartOffsets.push(s);let r=0;if(!i){const e=t.trimStart();r=t.length-e.length,t=e.trimEnd()}this.trimmedWsLengthsByLineIdx.push(r);const o=n===this.range.endLineNumber?Math.min(this.range.endColumn-1-s-r,t.length):t.length;for(let e=0;e<o;e++)this.elements.push(t.charCodeAt(e));n<this.range.endLineNumber&&(this.elements.push("\n".charCodeAt(0)),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new o.L(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map((e=>String.fromCharCode(e))).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=k(e>0?this.elements[e-1]:-1),i=k(e<this.elements.length?this.elements[e]:-1);if(7===t&&8===i)return 0;if(8===t)return 150;let n=0;return t!==i&&(n+=10,0===t&&1===i&&(n+=1)),n+=x(t),n+=x(i),n}translateOffset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right";const i=(0,v.iM)(this.firstElementOffsetByLineIdx,(t=>t<=e)),n=e-this.firstElementOffsetByLineIdx[i];return new y.y(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+n+(0===n&&"left"===t?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?a.Q.fromPositions(i,i):a.Q.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length)return;if(!C(this.elements[e]))return;let t=e;for(;t>0&&C(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&C(this.elements[i]);)i++;return new o.L(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=(0,v.lx)(this.firstElementOffsetByLineIdx,(t=>t<=e.start))??0,i=(0,v.XP)(this.firstElementOffsetByLineIdx,(t=>e.endExclusive<=t))??this.elements.length;return new o.L(t,i)}}function C(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}const S={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function x(e){return S[e]}function k(e){return 10===e?8:13===e?7:c(e)?6:e>=97&&e<=122?0:e>=65&&e<=90?1:e>=48&&e<=57?2:-1===e?3:44===e||59===e?5:4}function L(e,t,i,s,o,a){let{moves:l,excludedChanges:h}=function(e,t,i,n){const s=[],r=e.filter((e=>e.modified.isEmpty&&e.original.length>=3)).map((e=>new d(e.original,t,e))),o=new Set(e.filter((e=>e.original.isEmpty&&e.modified.length>=3)).map((e=>new d(e.modified,i,e)))),a=new Set;for(const l of r){let e,t=-1;for(const i of o){const n=l.computeSimilarity(i);n>t&&(t=n,e=i)}if(t>.9&&e&&(o.delete(e),s.push(new _.WL(l.range,e.range)),a.add(l.source),a.add(e.source)),!n.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}(e,t,i,a);if(!a.isValid())return[];const c=function(e,t,i,s,o,a){const l=[],h=new b.db;for(const n of e)for(let e=n.original.startLineNumber;e<n.original.endLineNumberExclusive-2;e++){const i=`${t[e-1]}:${t[e+1-1]}:${t[e+2-1]}`;h.add(i,{range:new r.M(e,e+3)})}const c=[];e.sort((0,n.VE)((e=>e.modified.startLineNumber),n.U9));for(const n of e){let e=[];for(let t=n.modified.startLineNumber;t<n.modified.endLineNumberExclusive-2;t++){const n=`${i[t-1]}:${i[t+1-1]}:${i[t+2-1]}`,s=new r.M(t,t+3),o=[];h.forEach(n,(t=>{let{range:i}=t;for(const a of e)if(a.originalLineRange.endLineNumberExclusive+1===i.endLineNumberExclusive&&a.modifiedLineRange.endLineNumberExclusive+1===s.endLineNumberExclusive)return a.originalLineRange=new r.M(a.originalLineRange.startLineNumber,i.endLineNumberExclusive),a.modifiedLineRange=new r.M(a.modifiedLineRange.startLineNumber,s.endLineNumberExclusive),void o.push(a);const n={modifiedLineRange:s,originalLineRange:i};c.push(n),o.push(n)})),e=o}if(!a.isValid())return[]}c.sort((0,n.Hw)((0,n.VE)((e=>e.modifiedLineRange.length),n.U9)));const d=new r.S,u=new r.S;for(const n of c){const e=n.modifiedLineRange.startLineNumber-n.originalLineRange.startLineNumber,t=d.subtractFrom(n.modifiedLineRange),i=u.subtractFrom(n.originalLineRange).getWithDelta(e),s=t.getIntersection(i);for(const n of s.ranges){if(n.length<3)continue;const t=n,i=n.delta(-e);l.push(new _.WL(i,t)),d.addRange(t),u.addRange(i)}}l.sort((0,n.VE)((e=>e.original.startLineNumber),n.U9));const g=new v.vJ(e);for(let n=0;n<l.length;n++){const t=l[n],i=g.findLastMonotonous((e=>e.original.startLineNumber<=t.original.startLineNumber)),h=(0,v.lx)(e,(e=>e.modified.startLineNumber<=t.modified.startLineNumber)),c=Math.max(t.original.startLineNumber-i.original.startLineNumber,t.modified.startLineNumber-h.modified.startLineNumber),p=g.findLastMonotonous((e=>e.original.startLineNumber<t.original.endLineNumberExclusive)),f=(0,v.lx)(e,(e=>e.modified.startLineNumber<t.modified.endLineNumberExclusive)),m=Math.max(p.original.endLineNumberExclusive-t.original.endLineNumberExclusive,f.modified.endLineNumberExclusive-t.modified.endLineNumberExclusive);let b,y;for(b=0;b<c;b++){const e=t.original.startLineNumber-b-1,i=t.modified.startLineNumber-b-1;if(e>s.length||i>o.length)break;if(d.contains(i)||u.contains(e))break;if(!E(s[e-1],o[i-1],a))break}for(b>0&&(u.addRange(new r.M(t.original.startLineNumber-b,t.original.startLineNumber)),d.addRange(new r.M(t.modified.startLineNumber-b,t.modified.startLineNumber))),y=0;y<m;y++){const e=t.original.endLineNumberExclusive+y,i=t.modified.endLineNumberExclusive+y;if(e>s.length||i>o.length)break;if(d.contains(i)||u.contains(e))break;if(!E(s[e-1],o[i-1],a))break}y>0&&(u.addRange(new r.M(t.original.endLineNumberExclusive,t.original.endLineNumberExclusive+y)),d.addRange(new r.M(t.modified.endLineNumberExclusive,t.modified.endLineNumberExclusive+y))),(b>0||y>0)&&(l[n]=new _.WL(new r.M(t.original.startLineNumber-b,t.original.endLineNumberExclusive+y),new r.M(t.modified.startLineNumber-b,t.modified.endLineNumberExclusive+y)))}return l}(e.filter((e=>!h.has(e))),s,o,t,i,a);return(0,n.E4)(l,c),l=function(e){if(0===e.length)return e;e.sort((0,n.VE)((e=>e.original.startLineNumber),n.U9));const t=[e[0]];for(let i=1;i<e.length;i++){const n=t[t.length-1],s=e[i],r=s.original.startLineNumber-n.original.endLineNumberExclusive,o=s.modified.startLineNumber-n.modified.endLineNumberExclusive;r>=0&&o>=0&&r+o<=2?t[t.length-1]=n.join(s):t.push(s)}return t}(l),l=l.filter((e=>{const i=e.original.toOffsetRange().slice(t).map((e=>e.trim()));return i.join("\n").length>=15&&function(e,t){let i=0;for(const n of e)t(n)&&i++;return i}(i,(e=>e.length>=2))>=2})),l=function(e,t){const i=new v.vJ(e);return t=t.filter((t=>(i.findLastMonotonous((e=>e.original.startLineNumber<t.original.endLineNumberExclusive))||new _.WL(new r.M(1,1),new r.M(1,1)))!==(0,v.lx)(e,(e=>e.modified.startLineNumber<t.modified.endLineNumberExclusive)))),t}(e,l),l}function E(e,t,i){if(e.trim()===t.trim())return!0;if(e.length>300&&t.length>300)return!1;const n=(new g).compute(new w([e],new a.Q(1,1,1,e.length),!1),new w([t],new a.Q(1,1,1,t.length),!1),i);let s=0;const r=l.$8.invert(n.diffs,e.length);for(const a of r)a.seq1Range.forEach((t=>{c(e.charCodeAt(t))||s++}));const o=function(t){let i=0;for(let n=0;n<e.length;n++)c(t.charCodeAt(n))||i++;return i}(e.length>t.length?e:t);return s/o>.6&&o>10}var M=i(6061);class T{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){return 1e3-((0===e?0:D(this.lines[e-1]))+(e===this.lines.length?0:D(this.lines[e])))}getText(e){return this.lines.slice(e.start,e.endExclusive).join("\n")}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function D(e){let t=0;for(;t<e.length&&(32===e.charCodeAt(t)||9===e.charCodeAt(t));)t++;return t}var N=i(810);class I{constructor(){this.dynamicProgrammingDiffing=new u,this.myersDiffingAlgorithm=new g}computeDiff(e,t,i){if(e.length<=1&&(0,n.aI)(e,t,((e,t)=>e===t)))return new N.p([],[],!1);if(1===e.length&&0===e[0].length||1===t.length&&0===t[0].length)return new N.p([new _.wm(new r.M(1,e.length+1),new r.M(1,t.length+1),[new _.q6(new a.Q(1,1,e.length,e[e.length-1].length+1),new a.Q(1,1,t.length,t[t.length-1].length+1))])],[],!1);const h=0===i.maxComputationTimeMs?l.uY.instance:new l.aY(i.maxComputationTimeMs),c=!i.ignoreTrimWhitespace,d=new Map;function u(e){let t=d.get(e);return void 0===t&&(t=d.size,d.set(e,t)),t}const g=e.map((e=>u(e.trim()))),p=t.map((e=>u(e.trim()))),f=new T(g,e),m=new T(p,t),v=(()=>f.length+m.length<1700?this.dynamicProgrammingDiffing.compute(f,m,h,((i,n)=>e[i]===t[n]?0===t[n].length?.1:1+Math.log(1+t[n].length):.99)):this.myersDiffingAlgorithm.compute(f,m,h))();let b=v.diffs,y=v.hitTimeout;b=(0,M.NC)(f,m,b),b=(0,M.X5)(f,m,b);const w=[],C=i=>{if(c)for(let n=0;n<i;n++){const i=S+n,s=x+n;if(e[i]!==t[s]){const n=this.refineDiff(e,t,new l.$8(new o.L(i,i+1),new o.L(s,s+1)),h,c);for(const e of n.mappings)w.push(e);n.hitTimeout&&(y=!0)}}};let S=0,x=0;for(const n of b){(0,s.Ft)((()=>n.seq1Range.start-S===n.seq2Range.start-x));C(n.seq1Range.start-S),S=n.seq1Range.endExclusive,x=n.seq2Range.endExclusive;const i=this.refineDiff(e,t,n,h,c);i.hitTimeout&&(y=!0);for(const e of i.mappings)w.push(e)}C(e.length-S);const k=A(w,e,t);let L=[];return i.computeMoves&&(L=this.computeMoves(k,e,t,g,p,h,c)),(0,s.Ft)((()=>{function i(e,t){if(e.lineNumber<1||e.lineNumber>t.length)return!1;const i=t[e.lineNumber-1];return!(e.column<1||e.column>i.length+1)}function n(e,t){return!(e.startLineNumber<1||e.startLineNumber>t.length+1)&&!(e.endLineNumberExclusive<1||e.endLineNumberExclusive>t.length+1)}for(const s of k){if(!s.innerChanges)return!1;for(const n of s.innerChanges){if(!(i(n.modifiedRange.getStartPosition(),t)&&i(n.modifiedRange.getEndPosition(),t)&&i(n.originalRange.getStartPosition(),e)&&i(n.originalRange.getEndPosition(),e)))return!1}if(!n(s.modified,t)||!n(s.original,e))return!1}return!0})),new N.p(k,L,y)}computeMoves(e,t,i,n,s,r,o){return L(e,t,i,n,s,r).map((e=>{const n=A(this.refineDiff(t,i,new l.$8(e.original.toOffsetRange(),e.modified.toOffsetRange()),r,o).mappings,t,i,!0);return new N.t(e,n)}))}refineDiff(e,t,i,n,s){var o;const a=(o=i,new _.WL(new r.M(o.seq1Range.start+1,o.seq1Range.endExclusive+1),new r.M(o.seq2Range.start+1,o.seq2Range.endExclusive+1))).toRangeMapping2(e,t),l=new w(e,a.originalRange,s),h=new w(t,a.modifiedRange,s),c=l.length+h.length<500?this.dynamicProgrammingDiffing.compute(l,h,n):this.myersDiffingAlgorithm.compute(l,h,n),d=!1;let u=c.diffs;u=(0,M.NC)(l,h,u),u=(0,M.Lk)(l,h,u),u=(0,M.sq)(l,h,u),u=(0,M.Rl)(l,h,u);const g=u.map((e=>new _.q6(l.translateRange(e.seq1Range),h.translateRange(e.seq2Range))));return{mappings:g,hitTimeout:c.hitTimeout}}}function A(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=[];for(const s of(0,n.n)(e.map((e=>function(e,t,i){let n=0,s=0;1===e.modifiedRange.endColumn&&1===e.originalRange.endColumn&&e.originalRange.startLineNumber+n<=e.originalRange.endLineNumber&&e.modifiedRange.startLineNumber+n<=e.modifiedRange.endLineNumber&&(s=-1);e.modifiedRange.startColumn-1>=i[e.modifiedRange.startLineNumber-1].length&&e.originalRange.startColumn-1>=t[e.originalRange.startLineNumber-1].length&&e.originalRange.startLineNumber<=e.originalRange.endLineNumber+s&&e.modifiedRange.startLineNumber<=e.modifiedRange.endLineNumber+s&&(n=1);const o=new r.M(e.originalRange.startLineNumber+n,e.originalRange.endLineNumber+1+s),a=new r.M(e.modifiedRange.startLineNumber+n,e.modifiedRange.endLineNumber+1+s);return new _.wm(o,a,[e])}(e,t,i))),((e,t)=>e.original.overlapOrTouch(t.original)||e.modified.overlapOrTouch(t.modified)))){const e=s[0],t=s[s.length-1];a.push(new _.wm(e.original.join(t.original),e.modified.join(t.modified),s.map((e=>e.innerChanges[0]))))}return(0,s.Ft)((()=>{if(!o&&a.length>0){if(a[0].modified.startLineNumber!==a[0].original.startLineNumber)return!1;if(i.length-a[a.length-1].modified.endLineNumberExclusive!==t.length-a[a.length-1].original.endLineNumberExclusive)return!1}return(0,s.Xo)(a,((e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive===t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber))})),a}},6061:(e,t,i)=>{"use strict";i.d(t,{Lk:()=>c,NC:()=>o,Rl:()=>u,X5:()=>d,sq:()=>h});var n=i(4961),s=i(6807),r=i(7581);function o(e,t,i){let n=i;return n=a(e,t,n),n=a(e,t,n),n=function(e,t,i){if(!e.getBoundaryScore||!t.getBoundaryScore)return i;for(let n=0;n<i.length;n++){const r=n>0?i[n-1]:void 0,o=i[n],a=n+1<i.length?i[n+1]:void 0,h=new s.L(r?r.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:e.length),c=new s.L(r?r.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:t.length);o.seq1Range.isEmpty?i[n]=l(o,e,t,h,c):o.seq2Range.isEmpty&&(i[n]=l(o.swap(),t,e,c,h).swap())}return i}(e,t,n),n}function a(e,t,i){if(0===i.length)return i;const n=[];n.push(i[0]);for(let a=1;a<i.length;a++){const o=n[n.length-1];let l=i[a];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){const i=l.seq1Range.start-o.seq1Range.endExclusive;let a;for(a=1;a<=i&&(e.getElement(l.seq1Range.start-a)===e.getElement(l.seq1Range.endExclusive-a)&&t.getElement(l.seq2Range.start-a)===t.getElement(l.seq2Range.endExclusive-a));a++);if(a--,a===i){n[n.length-1]=new r.$8(new s.L(o.seq1Range.start,l.seq1Range.endExclusive-i),new s.L(o.seq2Range.start,l.seq2Range.endExclusive-i));continue}l=l.delta(-a)}n.push(l)}const o=[];for(let a=0;a<n.length-1;a++){const i=n[a+1];let l=n[a];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){const o=i.seq1Range.start-l.seq1Range.endExclusive;let h;for(h=0;h<o&&(e.isStronglyEqual(l.seq1Range.start+h,l.seq1Range.endExclusive+h)&&t.isStronglyEqual(l.seq2Range.start+h,l.seq2Range.endExclusive+h));h++);if(h===o){n[a+1]=new r.$8(new s.L(l.seq1Range.start+o,i.seq1Range.endExclusive),new s.L(l.seq2Range.start+o,i.seq2Range.endExclusive));continue}h>0&&(l=l.delta(h))}o.push(l)}return n.length>0&&o.push(n[n.length-1]),o}function l(e,t,i,n,s){let r=1;for(;e.seq1Range.start-r>=n.start&&e.seq2Range.start-r>=s.start&&i.isStronglyEqual(e.seq2Range.start-r,e.seq2Range.endExclusive-r)&&r<100;)r++;r--;let o=0;for(;e.seq1Range.start+o<n.endExclusive&&e.seq2Range.endExclusive+o<s.endExclusive&&i.isStronglyEqual(e.seq2Range.start+o,e.seq2Range.endExclusive+o)&&o<100;)o++;if(0===r&&0===o)return e;let a=0,l=-1;for(let h=-r;h<=o;h++){const n=e.seq2Range.start+h,s=e.seq2Range.endExclusive+h,r=e.seq1Range.start+h,o=t.getBoundaryScore(r)+i.getBoundaryScore(n)+i.getBoundaryScore(s);o>l&&(l=o,a=h)}return e.delta(a)}function h(e,t,i){const n=[];for(const s of i){const e=n[n.length-1];e?s.seq1Range.start-e.seq1Range.endExclusive<=2||s.seq2Range.start-e.seq2Range.endExclusive<=2?n[n.length-1]=new r.$8(e.seq1Range.join(s.seq1Range),e.seq2Range.join(s.seq2Range)):n.push(s):n.push(s)}return n}function c(e,t,i){const n=r.$8.invert(i,e.length),s=[];let o=new r._3(0,0);function a(i,a){if(i.offset1<o.offset1||i.offset2<o.offset2)return;const l=e.findWordContaining(i.offset1),h=t.findWordContaining(i.offset2);if(!l||!h)return;let c=new r.$8(l,h);const d=c.intersect(a);let u=d.seq1Range.length,g=d.seq2Range.length;for(;n.length>0;){const i=n[0];if(!(i.seq1Range.intersects(c.seq1Range)||i.seq2Range.intersects(c.seq2Range)))break;const s=e.findWordContaining(i.seq1Range.start),o=t.findWordContaining(i.seq2Range.start),a=new r.$8(s,o),l=a.intersect(i);if(u+=l.seq1Range.length,g+=l.seq2Range.length,c=c.join(a),!(c.seq1Range.endExclusive>=i.seq1Range.endExclusive))break;n.shift()}u+g<2*(c.seq1Range.length+c.seq2Range.length)/3&&s.push(c),o=c.getEndExclusives()}for(;n.length>0;){const e=n.shift();e.seq1Range.isEmpty||(a(e.getStarts(),e),a(e.getEndExclusives().delta(-1),e))}return function(e,t){const i=[];for(;e.length>0||t.length>0;){const n=e[0],s=t[0];let r;r=n&&(!s||n.seq1Range.start<s.seq1Range.start)?e.shift():t.shift(),i.length>0&&i[i.length-1].seq1Range.endExclusive>=r.seq1Range.start?i[i.length-1]=i[i.length-1].join(r):i.push(r)}return i}(i,s)}function d(e,t,i){let n=i;if(0===n.length)return n;let r,o=0;do{r=!1;const a=[n[0]];for(let l=1;l<n.length;l++){const h=n[l],c=a[a.length-1];function d(t,i){const n=new s.L(c.seq1Range.endExclusive,h.seq1Range.start);return e.getText(n).replace(/\s/g,"").length<=4&&(t.seq1Range.length+t.seq2Range.length>5||i.seq1Range.length+i.seq2Range.length>5)}d(c,h)?(r=!0,a[a.length-1]=a[a.length-1].join(h)):a.push(h)}n=a}while(o++<10&&r);return n}function u(e,t,i){let o=i;if(0===o.length)return o;let a,l=0;do{a=!1;const c=[o[0]];for(let d=1;d<o.length;d++){const u=o[d],g=c[c.length-1];function p(i,n){const r=new s.L(g.seq1Range.endExclusive,u.seq1Range.start);if(e.countLinesIn(r)>5||r.length>500)return!1;const o=e.getText(r).trim();if(o.length>20||o.split(/\r\n|\r|\n/).length>1)return!1;const a=e.countLinesIn(i.seq1Range),l=i.seq1Range.length,h=t.countLinesIn(i.seq2Range),c=i.seq2Range.length,d=e.countLinesIn(n.seq1Range),p=n.seq1Range.length,f=t.countLinesIn(n.seq2Range),m=n.seq2Range.length;function _(e){return Math.min(e,130)}return Math.pow(Math.pow(_(40*a+l),1.5)+Math.pow(_(40*h+c),1.5),1.5)+Math.pow(Math.pow(_(40*d+p),1.5)+Math.pow(_(40*f+m),1.5),1.5)>74184.96480721243}p(g,u)?(a=!0,c[c.length-1]=c[c.length-1].join(u)):c.push(u)}o=c}while(l++<10&&a);const h=[];return(0,n.kj)(o,((t,i,n)=>{let o=i;function a(e){return e.length>0&&e.trim().length<=3&&i.seq1Range.length+i.seq2Range.length>100}const l=e.extendToFullLines(i.seq1Range),c=e.getText(new s.L(l.start,i.seq1Range.start));a(c)&&(o=o.deltaStart(-c.length));const d=e.getText(new s.L(i.seq1Range.endExclusive,l.endExclusive));a(d)&&(o=o.deltaEnd(d.length));const u=r.$8.fromOffsetPairs(t?t.getEndExclusives():r._3.zero,n?n.getStarts():r._3.max),g=o.intersect(u);h.length>0&&g.getStarts().equals(h[h.length-1].getEndExclusives())?h[h.length-1]=h[h.length-1].join(g):h.push(g)})),h}},810:(e,t,i)=>{"use strict";i.d(t,{p:()=>n,t:()=>s});class n{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class s{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}},3534:(e,t,i)=>{"use strict";i.d(t,{WL:()=>l,q6:()=>u,wm:()=>d});var n=i(2240),s=i(6612),r=i(2464),o=i(5902),a=i(4235);class l{static inverse(e,t,i){const n=[];let r=1,o=1;for(const h of e){const e=new l(new s.M(r,h.original.startLineNumber),new s.M(o,h.modified.startLineNumber));e.modified.isEmpty||n.push(e),r=h.original.endLineNumberExclusive,o=h.modified.endLineNumberExclusive}const a=new l(new s.M(r,t+1),new s.M(o,i+1));return a.modified.isEmpty||n.push(a),n}static clip(e,t,i){const n=[];for(const s of e){const e=s.original.intersect(t),r=s.modified.intersect(i);e&&!e.isEmpty&&r&&!r.isEmpty&&n.push(new l(e,r))}return n}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new l(this.modified,this.original)}join(e){return new l(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new u(e,t);if(1===this.original.startLineNumber||1===this.modified.startLineNumber){if(1!==this.modified.startLineNumber||1!==this.original.startLineNumber)throw new n.D7("not a valid diff");return new u(new o.Q(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new o.Q(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}return new u(new o.Q(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new o.Q(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(c(this.original.endLineNumberExclusive,e)&&c(this.modified.endLineNumberExclusive,t))return new u(new o.Q(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new o.Q(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new u(o.Q.fromPositions(new r.y(this.original.startLineNumber,1),h(new r.y(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),o.Q.fromPositions(new r.y(this.modified.startLineNumber,1),h(new r.y(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new u(o.Q.fromPositions(h(new r.y(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),h(new r.y(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),o.Q.fromPositions(h(new r.y(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),h(new r.y(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new n.D7}}function h(e,t){if(e.lineNumber<1)return new r.y(1,1);if(e.lineNumber>t.length)return new r.y(t.length,t[t.length-1].length+1);const i=t[e.lineNumber-1];return e.column>i.length+1?new r.y(e.lineNumber,i.length+1):e}function c(e,t){return e>=1&&e<=t.length}class d extends l{static fromRangeMappings(e){const t=s.M.join(e.map((e=>s.M.fromRangeInclusive(e.originalRange)))),i=s.M.join(e.map((e=>s.M.fromRangeInclusive(e.modifiedRange))));return new d(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){return new d(this.modified,this.original,this.innerChanges?.map((e=>e.flip())))}withInnerChangesFromLineRanges(){return new d(this.original,this.modified,[this.toRangeMapping()])}}class u{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],s=e[t];if(!i.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())||!i.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition()))throw new n.D7("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new u(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new a.WR(this.originalRange,t)}}},5477:(e,t,i)=>{"use strict";i.d(t,{x:()=>n});class n{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return 0!==(1024&e)}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e);const i=this.getFontStyle(e);return 1&i&&(t+=" mtki"),2&i&&(t+=" mtkb"),4&i&&(t+=" mtku"),8&i&&(t+=" mtks"),t}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let s=`color: ${t[i]};`;1&n&&(s+="font-style: italic;"),2&n&&(s+="font-weight: bold;");let r="";return 4&n&&(r+=" underline"),8&n&&(r+=" line-through"),r&&(s+=`text-decoration:${r};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:Boolean(1&i),bold:Boolean(2&i),underline:Boolean(4&i),strikethrough:Boolean(8&i)}}}},4470:(e,t,i)=>{"use strict";i.d(t,{rY:()=>v,lO:()=>k,v_:()=>L,GE:()=>b,gP:()=>y,ou:()=>m,dG:()=>E,$M:()=>_,OB:()=>M});var n=i(4808),s=(i(4673),i(5902)),r=i(9563),o=i(4663);class a{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new r.vl,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),(0,o.s)((()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))}))}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const i=new l(this,e,t);return this._factories.set(e,i),(0,o.s)((()=>{const t=this._factories.get(e);t&&t===i&&(this._factories.delete(e),t.dispose())}))}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const t=this._factories.get(e);return!(t&&!t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class l extends o.jG{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}var h,c,d,u,g,p,f=i(1266);class m{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}}class _{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class v{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}!function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(h||(h={})),function(e){const t=new Map;t.set(0,n.W.symbolMethod),t.set(1,n.W.symbolFunction),t.set(2,n.W.symbolConstructor),t.set(3,n.W.symbolField),t.set(4,n.W.symbolVariable),t.set(5,n.W.symbolClass),t.set(6,n.W.symbolStruct),t.set(7,n.W.symbolInterface),t.set(8,n.W.symbolModule),t.set(9,n.W.symbolProperty),t.set(10,n.W.symbolEvent),t.set(11,n.W.symbolOperator),t.set(12,n.W.symbolUnit),t.set(13,n.W.symbolValue),t.set(15,n.W.symbolEnum),t.set(14,n.W.symbolConstant),t.set(15,n.W.symbolEnum),t.set(16,n.W.symbolEnumMember),t.set(17,n.W.symbolKeyword),t.set(27,n.W.symbolSnippet),t.set(18,n.W.symbolText),t.set(19,n.W.symbolColor),t.set(20,n.W.symbolFile),t.set(21,n.W.symbolReference),t.set(22,n.W.symbolCustomColor),t.set(23,n.W.symbolFolder),t.set(24,n.W.symbolTypeParameter),t.set(25,n.W.account),t.set(26,n.W.issues),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for CompletionItemKind "+e),i=n.W.symbolProperty),i};const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26),e.fromString=function(e,t){let n=i.get(e);return"undefined"!==typeof n||t||(n=9),n}}(c||(c={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(d||(d={}));class b{constructor(e,t,i,n){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=n}equals(e){return s.Q.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}!function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"}(u||(u={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(g||(g={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(p||(p={}));(0,f.kg)("Array","array"),(0,f.kg)("Boolean","boolean"),(0,f.kg)("Class","class"),(0,f.kg)("Constant","constant"),(0,f.kg)("Constructor","constructor"),(0,f.kg)("Enum","enumeration"),(0,f.kg)("EnumMember","enumeration member"),(0,f.kg)("Event","event"),(0,f.kg)("Field","field"),(0,f.kg)("File","file"),(0,f.kg)("Function","function"),(0,f.kg)("Interface","interface"),(0,f.kg)("Key","key"),(0,f.kg)("Method","method"),(0,f.kg)("Module","module"),(0,f.kg)("Namespace","namespace"),(0,f.kg)("Null","null"),(0,f.kg)("Number","number"),(0,f.kg)("Object","object"),(0,f.kg)("Operator","operator"),(0,f.kg)("Package","package"),(0,f.kg)("Property","property"),(0,f.kg)("String","string"),(0,f.kg)("Struct","struct"),(0,f.kg)("TypeParameter","type parameter"),(0,f.kg)("Variable","variable");var y,w,C,S,x;!function(e){const t=new Map;t.set(0,n.W.symbolFile),t.set(1,n.W.symbolModule),t.set(2,n.W.symbolNamespace),t.set(3,n.W.symbolPackage),t.set(4,n.W.symbolClass),t.set(5,n.W.symbolMethod),t.set(6,n.W.symbolProperty),t.set(7,n.W.symbolField),t.set(8,n.W.symbolConstructor),t.set(9,n.W.symbolEnum),t.set(10,n.W.symbolInterface),t.set(11,n.W.symbolFunction),t.set(12,n.W.symbolVariable),t.set(13,n.W.symbolConstant),t.set(14,n.W.symbolString),t.set(15,n.W.symbolNumber),t.set(16,n.W.symbolBoolean),t.set(17,n.W.symbolArray),t.set(18,n.W.symbolObject),t.set(19,n.W.symbolKey),t.set(20,n.W.symbolNull),t.set(21,n.W.symbolEnumMember),t.set(22,n.W.symbolStruct),t.set(23,n.W.symbolEvent),t.set(24,n.W.symbolOperator),t.set(25,n.W.symbolTypeParameter),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for SymbolKind "+e),i=n.W.symbolProperty),i}}(y||(y={}));class k{static#e=(()=>this.Comment=new k("comment"))();static#t=(()=>this.Imports=new k("imports"))();static#i=(()=>this.Region=new k("region"))();static fromValue(e){switch(e){case"comment":return k.Comment;case"imports":return k.Imports;case"region":return k.Region}return new k(e)}constructor(e){this.value=e}}!function(e){e[e.AIGenerated=1]="AIGenerated"}(w||(w={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(C||(C={})),function(e){e.is=function(e){return!(!e||"object"!==typeof e)&&("string"===typeof e.id&&"string"===typeof e.title)}}(S||(S={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(x||(x={}));class L{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then((e=>{e&&e.dispose()}))}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const E=new a,M=new a;var T;!function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(T||(T={}))},5937:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});const n=(0,i(9398).u1)("languageService")},7739:(e,t,i)=>{"use strict";var n;i.d(t,{GB:()=>r,i3:()=>s,l:()=>n}),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(n||(n={}));class s{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++){switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(0===e.getTokenCount())return!0;const i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const e=String.fromCharCode(i);if(!this.open.includes(e)&&!this.close.includes(e))return e}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class r{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)o(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),o(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),o(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),o(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),1===t.close.length&&1===t.open.length&&o(this.autoClosingPairsCloseSingleChar,t.close,t)}}function o(e,t,i){e.has(t)?e.get(t).push(i):e.set(t,[i])}},787:(e,t,i)=>{"use strict";i.d(t,{JZ:()=>N,Cw:()=>P});var n=i(9563),s=i(4663),r=i(6637),o=i(4423),a=i(7739);class l{static#e=(()=>this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=";:.,=}])> \n\t")();static#t=(()=>this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS="'\"`;:.,=}])> \n\t")();constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map((e=>new a.i3(e))):e.brackets?this._autoClosingPairs=e.brackets.map((e=>new a.i3({open:e[0],close:e[1]}))):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new a.i3({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes="string"===typeof e.autoCloseBefore?e.autoCloseBefore:l.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets="string"===typeof e.autoCloseBefore?e.autoCloseBefore:l.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}var h=i(4961),c=i(8151),d=i(3869);class u{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const t=i.charAt(i.length-1);e.push(t)}return(0,h.dM)(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;const n=t.findTokenIndexAtOffset(i-1);if((0,c.Yo)(t.getStandardTokenType(n)))return null;const s=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,o=d.Fu.findPrevBracketInRange(s,1,r,0,r.length);if(!o)return null;const a=r.substring(o.startColumn-1,o.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[a])return null;const l=t.getActualLineContentBefore(o.startColumn-1);return/^\s*$/.test(l)?{matchOpenBracket:a}:null}}function g(e){return e.global&&(e.lastIndex=0),!0}class p{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&g(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&g(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&g(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&g(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}var f=i(2240);class m{constructor(e){(e=e||{}).brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach((e=>{const t=m._createOpenBracketRegExp(e[0]),i=m._createCloseBracketRegExp(e[1]);t&&i&&this._brackets.push({open:e[0],openRegExp:t,close:e[1],closeRegExp:i})})),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let s=0,r=this._regExpRules.length;s<r;s++){const e=this._regExpRules[s];if([{reg:e.beforeText,text:i},{reg:e.afterText,text:n},{reg:e.previousLineText,text:t}].every((e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text)))))return e.action}if(e>=2&&i.length>0&&n.length>0)for(let s=0,r=this._brackets.length;s<r;s++){const e=this._brackets[s];if(e.openRegExp.test(i)&&e.closeRegExp.test(n))return{indentAction:a.l.IndentOutdent}}if(e>=2&&i.length>0)for(let s=0,r=this._brackets.length;s<r;s++){if(this._brackets[s].openRegExp.test(i))return{indentAction:a.l.Indent}}return null}static _createOpenBracketRegExp(e){let t=r.bm(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",m._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=r.bm(e);return/\B/.test(t.charAt(t.length-1))||(t+="\\b"),t="^\\s*"+t,m._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return(0,f.dz)(t),null}}}var _=i(9398),v=i(5968),b=i(5937),y=i(8357),w=i(6696),C=i(8161);class S{constructor(e,t){this.languageId=e;const i=t.brackets?x(t.brackets):[],n=new C.VV((e=>{const t=new Set;return{info:new L(this,e,t),closing:t}})),s=new C.VV((e=>{const t=new Set,i=new Set;return{info:new E(this,e,t,i),opening:t,openingColorized:i}}));for(const[o,a]of i){const e=n.get(o),t=s.get(a);e.closing.add(t.info),t.opening.add(e.info)}const r=t.colorizedBracketPairs?x(t.colorizedBracketPairs):i.filter((e=>!("<"===e[0]&&">"===e[1])));for(const[o,a]of r){const e=n.get(o),t=s.get(a);e.closing.add(t.info),t.openingColorized.add(e.info),t.opening.add(e.info)}this._openingBrackets=new Map([...n.cachedValues].map((e=>{let[t,i]=e;return[t,i.info]}))),this._closingBrackets=new Map([...s.cachedValues].map((e=>{let[t,i]=e;return[t,i.info]})))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return(0,d.xb)(t,e)}}function x(e){return e.filter((e=>{let[t,i]=e;return""!==t&&""!==i}))}class k{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class L extends k{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class E extends k{constructor(e,t,i,n){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=n,this.isOpeningBracket=!1}closes(e){return e.config===this.config&&this.openingBrackets.has(e)}closesColorized(e){return e.config===this.config&&this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var M=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},T=function(e,t){return function(i,n){t(i,n,e)}};class D{constructor(e){this.languageId=e}affects(e){return!this.languageId||this.languageId===e}}const N=(0,_.u1)("languageConfigurationService");let I=class extends s.jG{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new V),this.onDidChangeEmitter=this._register(new n.vl),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(A));this._register(this.configurationService.onDidChangeConfiguration((e=>{const t=e.change.keys.some((e=>i.has(e))),n=e.change.overrides.filter((e=>{let[t,n]=e;return n.some((e=>i.has(e)))})).map((e=>{let[t]=e;return t}));if(t)this.configurations.clear(),this.onDidChangeEmitter.fire(new D(void 0));else for(const i of n)this.languageService.isRegisteredLanguageId(i)&&(this.configurations.delete(i),this.onDidChangeEmitter.fire(new D(i)))}))),this._register(this._registry.onDidChange((e=>{this.configurations.delete(e.languageId),this.onDidChangeEmitter.fire(new D(e.languageId))})))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=function(e,t,i,n){let s=t.getLanguageConfiguration(e);if(!s){if(!n.isRegisteredLanguageId(e))return new W(e,{});s=new W(e,{})}const r=function(e,t){const i=t.getValue(A.brackets,{overrideIdentifier:e}),n=t.getValue(A.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:R(i),colorizedBracketPairs:R(n)}}(s.languageId,i),o=F([s.underlyingConfig,r]);return new W(s.languageId,o)}(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};I=M([T(0,v.pG),T(1,b.L)],I);const A={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function R(e){if(Array.isArray(e))return e.map((e=>{if(Array.isArray(e)&&2===e.length)return[e[0],e[1]]})).filter((e=>!!e))}function P(e,t,i){const n=e.getLineContent(t);let s=r.UU(n);return s.length>i-1&&(s=s.substring(0,i-1)),s}class O{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new B(e,t,++this._order);return this._entries.push(i),this._resolved=null,(0,s.s)((()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===i){this._entries.splice(e,1),this._resolved=null;break}}))}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new W(this.languageId,e))}return this._resolved}_resolve(){return 0===this._entries.length?null:(this._entries.sort(B.cmp),F(this._entries.map((e=>e.configuration))))}}function F(e){let t={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const i of e)t={comments:i.comments||t.comments,brackets:i.brackets||t.brackets,wordPattern:i.wordPattern||t.wordPattern,indentationRules:i.indentationRules||t.indentationRules,onEnterRules:i.onEnterRules||t.onEnterRules,autoClosingPairs:i.autoClosingPairs||t.autoClosingPairs,surroundingPairs:i.surroundingPairs||t.surroundingPairs,autoCloseBefore:i.autoCloseBefore||t.autoCloseBefore,folding:i.folding||t.folding,colorizedBracketPairs:i.colorizedBracketPairs||t.colorizedBracketPairs,__electricCharacterSupport:i.__electricCharacterSupport||t.__electricCharacterSupport};return t}class B{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class z{constructor(e){this.languageId=e}}class V extends s.jG{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new n.vl),this.onDidChange=this._onDidChange.event,this._register(this.register(w.vH,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this._entries.get(e);n||(n=new O(e),this._entries.set(e,n));const r=n.register(t,i);return this._onDidChange.fire(new z(e)),(0,s.s)((()=>{r.dispose(),this._onDidChange.fire(new z(e))}))}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}}class W{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new m(this.underlyingConfig):null,this.comments=W._handleComments(this.underlyingConfig),this.characterPair=new l(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||o.Ld,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new p(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new S(e,this.underlyingConfig)}getWordDefinition(){return(0,o.Io)(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new d.az(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new u(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new a.GB(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[e,n]=t.blockComment;i.blockCommentStartToken=e,i.blockCommentEndToken=n}return i}}(0,y.v)(N,I,1)},6696:(e,t,i)=>{"use strict";i.d(t,{W6:()=>l,vH:()=>h});var n=i(1266),s=i(9563),r=i(5050),o=i(6531),a=i(3515);const l=new class{constructor(){this._onDidChangeLanguages=new s.vl,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e)return void this._languages.splice(t,1)}}}getLanguages(){return this._languages}};r.O.add("editor.modesRegistry",l);const h="plaintext";l.registerLanguage({id:h,extensions:[".txt"],aliases:[n.kg("plainText.alias","Plain Text"),"text"],mimetypes:[o.K.text]}),r.O.as(a.Fd.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])},4959:(e,t,i)=>{"use strict";i.d(t,{$H:()=>r,Lh:()=>o,r3:()=>s});var n=i(4470);const s=new class{clone(){return this}equals(e){return this===e}};function r(e,t){return new n.$M([new n.ou(0,"",e)],t)}function o(e,t){const i=new Uint32Array(2);return i[0]=0,i[1]=(32768|e|2<<24)>>>0,new n.rY(i,null===t?s:t)}},8151:(e,t,i)=>{"use strict";function n(e,t){const i=e.getCount(),n=e.findTokenIndexAtOffset(t),r=e.getLanguageId(n);let o=n;for(;o+1<i&&e.getLanguageId(o+1)===r;)o++;let a=n;for(;a>0&&e.getLanguageId(a-1)===r;)a--;return new s(e,r,a,o+1,e.getStartOffset(a),e.getEndOffset(o))}i.d(t,{BQ:()=>n,Yo:()=>r});class s{constructor(e,t,i,n,s,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=s,this._lastCharOffset=r,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function r(e){return 0!==(3&e)}},3869:(e,t,i)=>{"use strict";i.d(t,{Fu:()=>p,az:()=>a,xb:()=>u});var n=i(6637),s=i(587),r=i(5902);class o{constructor(e,t,i,n,s,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=s,this.reversedRegex=r,this._openSet=o._toSet(this.open),this._closeSet=o._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}class a{constructor(e,t){this._richEditBracketsBrand=void 0;const i=function(e){const t=e.length;e=e.map((e=>[e[0].toLowerCase(),e[1].toLowerCase()]));const i=[];for(let o=0;o<t;o++)i[o]=o;const n=(e,t)=>{const[i,n]=e,[s,r]=t;return i===s||i===r||n===s||n===r},s=(e,n)=>{const s=Math.min(e,n),r=Math.max(e,n);for(let o=0;o<t;o++)i[o]===r&&(i[o]=s)};for(let o=0;o<t;o++){const r=e[o];for(let a=o+1;a<t;a++)n(r,e[a])&&s(i[o],i[a])}const r=[];for(let o=0;o<t;o++){const n=[],s=[];for(let r=0;r<t;r++)if(i[r]===o){const[t,i]=e[r];n.push(t),s.push(i)}n.length>0&&r.push({open:n,close:s})}return r}(t);this.brackets=i.map(((t,n)=>new o(e,n,t.open,t.close,function(e,t,i,n){let s=[];s=s.concat(e),s=s.concat(t);for(let r=0,o=s.length;r<o;r++)l(s[r],i,n,s);return s=c(s),s.sort(h),s.reverse(),u(s)}(t.open,t.close,i,n),function(e,t,i,n){let s=[];s=s.concat(e),s=s.concat(t);for(let r=0,o=s.length;r<o;r++)l(s[r],i,n,s);return s=c(s),s.sort(h),s.reverse(),u(s.map(g))}(t.open,t.close,i,n)))),this.forwardRegex=function(e){let t=[];for(const i of e){for(const e of i.open)t.push(e);for(const e of i.close)t.push(e)}return t=c(t),u(t)}(this.brackets),this.reversedRegex=function(e){let t=[];for(const i of e){for(const e of i.open)t.push(e);for(const e of i.close)t.push(e)}return t=c(t),u(t.map(g))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const n of this.brackets){for(const e of n.open)this.textIsBracket[e]=n,this.textIsOpenBracket[e]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,e.length);for(const e of n.close)this.textIsBracket[e]=n,this.textIsOpenBracket[e]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,e.length)}}}function l(e,t,i,n){for(let s=0,r=t.length;s<r;s++){if(s===i)continue;const r=t[s];for(const t of r.open)t.indexOf(e)>=0&&n.push(t);for(const t of r.close)t.indexOf(e)>=0&&n.push(t)}}function h(e,t){return e.length-t.length}function c(e){if(e.length<=1)return e;const t=[],i=new Set;for(const n of e)i.has(n)||(t.push(n),i.add(n));return t}function d(e){const t=/^[\w ]+$/.test(e);return e=n.bm(e),t?`\\b${e}\\b`:e}function u(e,t){const i=`(${e.map(d).join(")|(")})`;return n.OS(i,!0,t)}const g=function(){let e=null,t=null;return function(i){return e!==i&&(e=i,t=function(e){const t=new Uint16Array(e.length);let i=0;for(let n=e.length-1;n>=0;n--)t[i++]=e.charCodeAt(n);return s.b7().decode(t)}(e)),t}}();class p{static _findPrevBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const o=i.length-(s.index||0),a=s[0].length,l=n+o;return new r.Q(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,n,s){const r=g(i).substring(i.length-s,i.length-n);return this._findPrevBracketInText(e,t,r,n)}static findNextBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const o=s.index||0,a=s[0].length;if(0===a)return null;const l=n+o;return new r.Q(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,n,s){const r=i.substring(n,s);return this.findNextBracketInText(e,t,r,n)}}},2726:(e,t,i)=>{"use strict";i.d(t,{A5:()=>n,Dg:()=>l,F4:()=>u,L5:()=>d,VW:()=>r,Wo:()=>c,X2:()=>a,ZS:()=>s,nk:()=>h,vd:()=>g});var n,s,r,o=i(2823);!function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(n||(n={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(s||(s={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(r||(r={}));class a{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|e.tabSize),"tabSize"===e.indentSize?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|e.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&(0,o.aI)(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class l{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function h(e){return e&&"function"===typeof e.read}class c{constructor(e,t,i,n,s,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=s,this._isTracked=r}}class d{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class u{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function g(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}},2739:(e,t,i)=>{"use strict";i.d(t,{W:()=>o,c:()=>r});var n=i(5902),s=i(6642);class r{static fromModelContentChanges(e){return e.map((e=>{const t=n.Q.lift(e.range);return new r((0,s.VL)(t.getStartPosition()),(0,s.VL)(t.getEndPosition()),(0,s.rR)(e.text))})).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${(0,s.l4)(this.startOffset)}...${(0,s.l4)(this.endOffset)}) -> ${(0,s.l4)(this.newLength)}`}}class o{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map((e=>a.from(e)))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return null===i?null:(0,s.MS)(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?(0,s.qe)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):(0,s.qe)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=(0,s.l4)(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,s.qe)(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):(0,s.qe)(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(!(0,s.vr)(i,e))break;{this.nextEditIdx++;const e=(0,s.l4)(i),n=(0,s.l4)(this.translateOldToCur(t.endOffsetBeforeObj)),r=e.lineCount-n.lineCount;this.deltaOldToNewLineCount+=r;const o=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,a=e.columnCount-n.columnCount;this.deltaOldToNewColumnCount=o+a,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}}}}class a{static from(e){return new a(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=(0,s.l4)(t),this.endOffsetAfterObj=(0,s.l4)((0,s.QB)(e,i)),this.offsetObj=(0,s.l4)(e)}}},1617:(e,t,i)=>{"use strict";i.d(t,{M:()=>o});var n=i(4961),s=i(2739),r=i(6642);function o(e,t){if(0===e.length)return t;if(0===t.length)return e;const i=new n.j3(l(e)),o=l(t);o.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let h=i.dequeue();function c(e){if(void 0===e){const e=i.takeWhile((e=>!0))||[];return h&&e.unshift(h),e}const t=[];for(;h&&!(0,r.Vh)(e);){const[n,s]=h.splitAt(e);t.push(n),e=(0,r.MS)(n.lengthAfter,e),h=s??i.dequeue()}return(0,r.Vh)(e)||t.push(new a(!1,e,e)),t}const d=[];function u(e,t,i){if(d.length>0&&(0,r.wP)(d[d.length-1].endOffset,e)){const e=d[d.length-1];d[d.length-1]=new s.c(e.startOffset,t,(0,r.QB)(e.newLength,i))}else d.push({startOffset:e,endOffset:t,newLength:i})}let g=r.Vp;for(const n of o){const e=c(n.lengthBefore);if(n.modified){const t=(0,r.pW)(e,(e=>e.lengthBefore)),i=(0,r.QB)(g,t);u(g,i,n.lengthAfter),g=i}else for(const t of e){const e=g;g=(0,r.QB)(g,t.lengthBefore),t.modified&&u(e,g,t.lengthAfter)}}return d}class a{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=(0,r.MS)(e,this.lengthAfter);return(0,r.wP)(t,r.Vp)?[this,void 0]:this.modified?[new a(this.modified,this.lengthBefore,e),new a(this.modified,r.Vp,t)]:[new a(this.modified,e,e),new a(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${(0,r.l4)(this.lengthBefore)} -> ${(0,r.l4)(this.lengthAfter)}`}}function l(e){const t=[];let i=r.Vp;for(const n of e){const e=(0,r.MS)(i,n.startOffset);(0,r.Vh)(e)||t.push(new a(!1,e,e));const s=(0,r.MS)(n.startOffset,n.endOffset);t.push(new a(!0,s,n.newLength)),i=n.endOffset}return t}},6642:(e,t,i)=>{"use strict";i.d(t,{C7:()=>o,MS:()=>_,QB:()=>p,Qx:()=>C,VL:()=>w,Vh:()=>l,Vp:()=>a,eu:()=>u,l4:()=>d,o0:()=>y,pW:()=>f,qe:()=>c,rR:()=>S,sS:()=>g,vr:()=>b,wP:()=>m,zG:()=>v});var n=i(6637),s=i(5902),r=i(3724);function o(e,t,i,n){return e!==i?c(i-e,n):c(0,n-t)}const a=0;function l(e){return 0===e}const h=2**26;function c(e,t){return e*h+t}function d(e){const t=e,i=Math.floor(t/h),n=t-i*h;return new r.W(i,n)}function u(e){return Math.floor(e/h)}function g(e){return e}function p(e,t){let i=e+t;return t>=h&&(i-=e%h),i}function f(e,t){return e.reduce(((e,i)=>p(e,t(i))),a)}function m(e,t){return e===t}function _(e,t){const i=e,n=t;if(n-i<=0)return a;const s=Math.floor(i/h),r=Math.floor(n/h),o=n-r*h;if(s===r){return c(0,o-(i-s*h))}return c(r-s,o)}function v(e,t){return e<t}function b(e,t){return e<=t}function y(e,t){return e>=t}function w(e){return c(e.lineNumber-1,e.column-1)}function C(e,t){const i=e,n=Math.floor(i/h),r=i-n*h,o=t,a=Math.floor(o/h),l=o-a*h;return new s.Q(n+1,r+1,a+1,l+1)}function S(e){const t=(0,n.uz)(e);return c(t.length-1,t[t.length-1].length)}},621:(e,t,i)=>{"use strict";i.d(t,{Th:()=>f,z8:()=>m});var n=i(1266),s=i(2240),r=i(7817),o=i(4673),a=i(9552),l=i(1137),h=i(6474);function c(e){return e.toString()}class d{static create(e,t){const i=e.getAlternativeVersionId(),n=p(e);return new d(i,i,n,n,t,t,[])}constructor(e,t,i,n,s,r,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=s,this.afterCursorState=r,this.changes=o}append(e,t,i,n,s){t.length>0&&(this.changes=(0,a.x)(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,i){if(l.Sw(e,t?t.length:0,i),i+=4,t)for(const n of t)l.Sw(e,n.selectionStartLineNumber,i),i+=4,l.Sw(e,n.selectionStartColumn,i),i+=4,l.Sw(e,n.positionLineNumber,i),i+=4,l.Sw(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=l.bb(e,t);t+=4;for(let s=0;s<n;s++){const n=l.bb(e,t);t+=4;const s=l.bb(e,t);t+=4;const o=l.bb(e,t);t+=4;const a=l.bb(e,t);t+=4,i.push(new r.L(n,s,o,a))}return t}serialize(){let e=10+d._writeSelectionsSize(this.beforeCursorState)+d._writeSelectionsSize(this.afterCursorState)+4;for(const n of this.changes)e+=n.writeSize();const t=new Uint8Array(e);let i=0;l.Sw(t,this.beforeVersionId,i),i+=4,l.Sw(t,this.afterVersionId,i),i+=4,l.Gs(t,this.beforeEOL,i),i+=1,l.Gs(t,this.afterEOL,i),i+=1,i=d._writeSelections(t,this.beforeCursorState,i),i=d._writeSelections(t,this.afterCursorState,i),l.Sw(t,this.changes.length,i),i+=4;for(const n of this.changes)i=n.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=l.bb(t,i);i+=4;const s=l.bb(t,i);i+=4;const r=l.pJ(t,i);i+=1;const o=l.pJ(t,i);i+=1;const h=[];i=d._readSelections(t,i,h);const c=[];i=d._readSelections(t,i,c);const u=l.bb(t,i);i+=4;const g=[];for(let l=0;l<u;l++)i=a.k.read(t,i,g);return new d(n,s,r,o,h,c,g)}}class u{get type(){return 0}get resource(){return o.r.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=d.create(i,n)}toString(){return(this._data instanceof d?this._data:d.deserialize(this._data)).changes.map((e=>e.toString())).join(", ")}matchesResource(e){return(o.r.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof d}append(e,t,i,n,s){this._data instanceof d&&this._data.append(e,t,i,n,s)}close(){this._data instanceof d&&(this._data=this._data.serialize())}open(){this._data instanceof d||(this._data=d.deserialize(this._data))}undo(){if(o.r.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof d&&(this._data=this._data.serialize());const e=d.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(o.r.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof d&&(this._data=this._data.serialize());const e=d.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof d&&(this._data=this._data.serialize()),this._data.byteLength+168}}class g{get resources(){return this._editStackElementsArr.map((e=>e.resource))}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const e=c(n.resource);this._editStackElementsMap.set(e,n)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=c(e);return this._editStackElementsMap.has(t)}setModel(e){const t=c(o.r.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=c(e.uri);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).canAppend(e)}return!1}append(e,t,i,n,s){const r=c(e.uri);this._editStackElementsMap.get(r).append(e,t,i,n,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=c(e);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).heapSize()}return 0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${(0,h.P8)(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function p(e){return"\n"===e.getEOL()?0:1}function f(e){return!!e&&(e instanceof u||e instanceof g)}class m{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);f(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);f(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(f(i)&&i.canAppend(this._model))return i;const s=new u(n.kg("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],p(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,n){const s=this._getOrCreateEditStackElement(e,n),r=this._model.applyEdits(t,!0),o=m._computeCursorState(i,r),a=r.map(((e,t)=>({index:t,textChange:e.textChange})));return a.sort(((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition)),s.append(this._model,a.map((e=>e.textChange)),p(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return(0,s.dz)(i),null}}}},1707:(e,t,i)=>{"use strict";i.d(t,{k:()=>d,P:()=>c});var n=i(194),s=i(6637),r=i(5242),o=i(5902),a=i(7464);var l=i(1926),h=i(2240);class c extends a._{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return function(e,t){let i=0,n=0;const s=e.length;for(;n<s;){const s=e.charCodeAt(n);if(32===s)i++;else{if(9!==s)break;i=i-i%t+t}n++}return n===s?-1:i}(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new h.D7("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide);let o=-2,a=-1,l=-2,c=-1;const d=e=>{if(-1!==o&&(-2===o||o>e-1)){o=-1,a=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){o=t,a=e;break}}}if(-2===l){l=-1,c=-1;for(let t=e;t<n;t++){const e=this._computeIndentLevel(t);if(e>=0){l=t,c=e;break}}}};let u=-2,g=-1,p=-2,f=-1;const m=e=>{if(-2===u){u=-1,g=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){u=t,g=e;break}}}if(-1!==p&&(-2===p||p<e-1)){p=-1,f=-1;for(let t=e;t<n;t++){const e=this._computeIndentLevel(t);if(e>=0){p=t,f=e;break}}}};let _=0,v=!0,b=0,y=!0,w=0,C=0;for(let h=0;v||y;h++){const s=e-h,o=e+h;h>1&&(s<1||s<t)&&(v=!1),h>1&&(o>n||o>i)&&(y=!1),h>5e4&&(v=!1,y=!1);let p=-1;if(v&&s>=1){const e=this._computeIndentLevel(s-1);e>=0?(l=s-1,c=e,p=Math.ceil(e/this.textModel.getOptions().indentSize)):(d(s),p=this._getIndentLevelForWhitespaceLine(r,a,c))}let S=-1;if(y&&o<=n){const e=this._computeIndentLevel(o-1);e>=0?(u=o-1,g=e,S=Math.ceil(e/this.textModel.getOptions().indentSize)):(m(o),S=this._getIndentLevelForWhitespaceLine(r,g,f))}if(0!==h){if(1===h){if(o<=n&&S>=0&&C+1===S){v=!1,_=o,b=o,w=S;continue}if(s>=1&&p>=0&&p-1===C){y=!1,_=s,b=s,w=p;continue}if(_=e,b=e,w=C,0===w)return{startLineNumber:_,endLineNumber:b,indent:w}}v&&(p>=w?_=s:v=!1),y&&(S>=w?b=o:y=!1)}else C=p}return{startLineNumber:_,endLineNumber:b,indent:w}}getLinesBracketGuides(e,t,i,r){const a=[];for(let n=e;n<=t;n++)a.push([]);const h=!0,c=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new o.Q(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let u;if(i&&c.length>0){const s=(e<=i.lineNumber&&i.lineNumber<=t?c:this.textModel.bracketPairs.getBracketPairsInRange(o.Q.fromPositions(i)).toArray()).filter((e=>o.Q.strictContainsPosition(e.range,i)));u=(0,n.Uk)(s,(e=>h))?.range}const g=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,p=new d;for(const n of c){if(!n.closingBracketRange)continue;const i=u&&n.range.equalsRange(u);if(!i&&!r.includeInactive)continue;const o=p.getInlineClassName(n.nestingLevel,n.nestingLevelOfEqualBracketType,g)+(r.highlightActive&&i?" "+p.activeClassName:""),h=n.openingBracketRange.getStartPosition(),c=n.closingBracketRange.getStartPosition(),d=r.horizontalGuides===l.N6.Enabled||r.horizontalGuides===l.N6.EnabledForActive&&i;if(n.range.startLineNumber===n.range.endLineNumber){d&&a[n.range.startLineNumber-e].push(new l.TH(-1,n.openingBracketRange.getEndPosition().column,o,new l.pv(!1,c.column),-1,-1));continue}const f=this.getVisibleColumnFromPosition(c),m=this.getVisibleColumnFromPosition(n.openingBracketRange.getStartPosition()),_=Math.min(m,f,n.minVisibleColumnIndentation+1);let v=!1;s.HG(this.textModel.getLineContent(n.closingBracketRange.startLineNumber))<n.closingBracketRange.startColumn-1&&(v=!0);const b=Math.max(h.lineNumber,e),y=Math.min(c.lineNumber,t),w=v?1:0;for(let t=b;t<y+w;t++)a[t-e].push(new l.TH(_,-1,o,null,t===h.lineNumber?h.column:-1,t===c.lineNumber?c.column:-1));d&&(h.lineNumber>=e&&m>_&&a[h.lineNumber-e].push(new l.TH(_,-1,o,new l.pv(!1,h.column),-1,-1)),c.lineNumber<=t&&f>_&&a[c.lineNumber-e].push(new l.TH(_,-1,o,new l.pv(!v,c.column),-1,-1)))}for(const n of a)n.sort(((e,t)=>e.visibleColumn-t.visibleColumn));return a}getVisibleColumnFromPosition(e){return r.A.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide),o=new Array(t-e+1);let a=-2,l=-1,h=-2,c=-1;for(let d=e;d<=t;d++){const t=d-e,s=this._computeIndentLevel(d-1);if(s>=0)a=d-1,l=s,o[t]=Math.ceil(s/n.indentSize);else{if(-2===a){a=-1,l=-1;for(let e=d-2;e>=0;e--){const t=this._computeIndentLevel(e);if(t>=0){a=e,l=t;break}}}if(-1!==h&&(-2===h||h<d-1)){h=-1,c=-1;for(let e=d;e<i;e++){const t=this._computeIndentLevel(e);if(t>=0){h=e,c=t;break}}}o[t]=this._getIndentLevelForWhitespaceLine(r,l,c)}}return o}_getIndentLevelForWhitespaceLine(e,t,i){const n=this.textModel.getOptions();return-1===t||-1===i?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}}class d{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return"bracket-indent-guide lvl-"+e%30}}},303:(e,t,i)=>{"use strict";i.d(t,{N:()=>r,c2:()=>o});var n=i(4961),s=i(7459);class r{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=(0,s.j)(e);const i=this.values,n=this.prefixSum,r=t.length;return 0!==r&&(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=(0,s.j)(e),t=(0,s.j)(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=(0,s.j)(e),t=(0,s.j)(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const r=i.length-e;return t>=r&&(t=r),0!==t&&(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=(0,s.j)(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,s=0,r=0;for(;t<=i;)if(n=t+(i-t)/2|0,s=this.prefixSum[n],r=s-this.values[n],e<r)i=n-1;else{if(!(e>=s))break;t=n+1}return new a(n,e-r)}}class o{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),0===e?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new a(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=(0,n.nK)(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const t=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+t;for(let n=0;n<t;n++)this._indexBySum[i+n]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class a{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}},6953:(e,t,i)=>{"use strict";i.d(t,{kI:()=>xi,Bz:()=>pi});var n=i(4961),s=i(3800),r=i(2240),o=i(9563),a=i(4663),l=i(6637),h=i(4673),c=i(8703),d=i(4788),u=i(2464),g=i(5902),p=i(7817),f=i(2569),m=i(5937),_=i(787),v=i(2726),b=i(8151),y=i(3869);class w{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}}class C{constructor(e,t,i,n,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class S extends C{constructor(e,t,i,n,s,r,o){super(e,t,i,n,s,r),this.minVisibleColumnIndentation=o}}var x=i(2739),k=i(5242),L=i(6642);const E=[];class M{static#e=(()=>this.cache=new Array(129))();static create(e,t){if(e<=128&&0===t.length){let i=M.cache[e];return i||(i=new M(e,t),M.cache[e]=i),i}return new M(e,t)}static#t=(()=>this.empty=M.create(0,E))();static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let n=i>>5;if(0===n){const e=1<<i|this.items;return e===this.items?this:M.create(e,this.additionalItems)}n--;const s=this.additionalItems.slice(0);for(;s.length<n;)s.push(0);return s[n]|=1<<(31&i),M.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===E&&e.additionalItems===E)return t===this.items?this:t===e.items?e:M.create(t,E);const i=[];for(let n=0;n<Math.max(this.additionalItems.length,e.additionalItems.length);n++){const t=this.additionalItems[n]||0,s=e.additionalItems[n]||0;i.push(t|s)}return M.create(t,i)}intersects(e){if(0!==(this.items&e.items))return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(0!==(this.additionalItems[t]&e.additionalItems[t]))return!0;return!1}}const T={getKey:e=>e};class D{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return void 0===t&&(t=this.items.size,this.items.set(e,t)),t}}class N{get length(){return this._length}constructor(e){this._length=e}}class I extends N{static create(e,t,i){let n=e.length;return t&&(n=(0,L.QB)(n,t.length)),i&&(n=(0,L.QB)(n,i.length)),new I(n,e,t,i,t?t.missingOpeningBracketIds:M.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,s){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=s}canBeReused(e){return null!==this.closingBracket&&!e.intersects(this.missingOpeningBracketIds)}deepClone(){return new I(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation((0,L.QB)(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class A extends N{static create23(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=(0,L.QB)(s,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=(0,L.QB)(s,i.length),r=r.merge(i.missingOpeningBracketIds)}return n?new P(s,e.listHeight+1,e,t,i,r):new R(s,e.listHeight+1,e,t,i,r)}static getEmpty(){return new F(L.Vp,0,[],M.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(0===e)return;const t=this.getChild(e-1),i=4===t.kind?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){this.throwIfImmutable();if(0===this.childrenLength)return;const e=this.getChild(0),t=4===e.kind?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;if(0===this.childrenLength)return!1;let t=this;for(;4===t.kind;){const e=t.childrenLength;if(0===e)throw new r.D7;t=t.getChild(e-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){const e=this.getChild(n);t=(0,L.QB)(t,e.length),i=i.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let s=0;s<this.childrenLength;s++){const e=this.getChild(s);e&&(i=Math.min(i,e.computeMinIndentation(n,t)),n=(0,L.QB)(n,e.length))}return this.cachedMinIndentation=i,i}}class R extends A{get childrenLength(){return null!==this._item3?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:return void(this._item1=t);case 1:return void(this._item2=t);case 2:return void(this._item3=t)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,s,r){super(e,t,r),this._item1=i,this._item2=n,this._item3=s}deepClone(){return new R(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class P extends R{toMutable(){return new R(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class O extends A{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new O(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class F extends O{toMutable(){return new O(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const B=[];class z extends N{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return B}deepClone(){return this}}class V extends z{get kind(){return 0}get missingOpeningBracketIds(){return M.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=(0,L.l4)(e),n=(0===i.columnCount?i.lineCount:i.lineCount+1)+1,s=(0,L.eu)((0,L.QB)(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let o=n;o<=s;o++){const e=t.getLineFirstNonWhitespaceColumn(o),i=t.getLineContent(o);if(0===e)continue;const n=k.A.visibleColumnFromColumn(i,e,t.getOptions().tabSize);r=Math.min(r,n)}return r}}class W extends z{static create(e,t,i){return new W(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return M.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class H extends z{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}var U=i(5477);class j{constructor(e,t,i,n,s){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=s}}class G{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new K(this.textModel,this.bracketTokens),this._offset=L.Vp,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,L.qe)(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=(0,L.QB)(this._offset,e);const t=(0,L.l4)(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=(0,L.QB)(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class K{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,null!==this.line&&(this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,L.sS)(e.length),e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const n=this.lineTokens,s=n.getCount();let r=null;if(this.lineTokenOffset<s){const o=n.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&o===n.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const a=0===U.x.getTokenType(o),l=U.x.containsBalancedBrackets(o),h=n.getEndOffset(this.lineTokenOffset);if(l&&a&&this.lineCharOffset<h){const e=n.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,h),i=this.bracketTokens.getSingleLanguageBracketTokens(e),s=i.regExpGlobal;if(s){s.lastIndex=0;const e=s.exec(t);e&&(r=i.getToken(e[0]),r&&(this.lineCharOffset+=e.index))}}if(i+=h-this.lineCharOffset,r){if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=r;break}return this.lineCharOffset+=(0,L.sS)(r.length),r}this.lineTokenOffset++,this.lineCharOffset=h}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3)break}if(i>1500)break}const n=(0,L.C7)(e,t,this.lineIdx,this.lineCharOffset);return new j(n,0,-1,M.getEmpty(),new V(n))}}class ${constructor(e,t){this.text=e,this._offset=L.Vp,this.idx=0;const i=t.getRegExpStr(),n=i?new RegExp(i+"|\n","gi"):null,s=[];let r,o=0,a=0,l=0,h=0;const c=[];for(let g=0;g<60;g++)c.push(new j((0,L.qe)(0,g),0,-1,M.getEmpty(),new V((0,L.qe)(0,g))));const d=[];for(let g=0;g<60;g++)d.push(new j((0,L.qe)(1,g),0,-1,M.getEmpty(),new V((0,L.qe)(1,g))));if(n)for(n.lastIndex=0;null!==(r=n.exec(e));){const e=r.index,i=r[0];if("\n"===i)o++,a=e+1;else{if(l!==e){let t;if(h===o){const i=e-l;if(i<c.length)t=c[i];else{const e=(0,L.qe)(0,i);t=new j(e,0,-1,M.getEmpty(),new V(e))}}else{const i=o-h,n=e-a;if(1===i&&n<d.length)t=d[n];else{const e=(0,L.qe)(i,n);t=new j(e,0,-1,M.getEmpty(),new V(e))}}s.push(t)}s.push(t.getToken(i)),l=e+i.length,h=o}}const u=e.length;if(l!==u){const e=h===o?(0,L.qe)(0,u-l):(0,L.qe)(o-h,u-a);s.push(new j(e,0,-1,M.getEmpty(),new V(e)))}this.length=(0,L.qe)(o,u-a),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new r.EM}}class q{static createFromLanguage(e,t){function i(e){return t.getKey(`${e.languageId}:::${e.bracketText}`)}const n=new Map;for(const s of e.bracketsNew.openingBrackets){const e=(0,L.qe)(0,s.bracketText.length),t=i(s),r=M.getEmpty().add(t,T);n.set(s.bracketText,new j(e,1,t,r,W.create(e,s,r)))}for(const s of e.bracketsNew.closingBrackets){const e=(0,L.qe)(0,s.bracketText.length);let t=M.getEmpty();const r=s.getOpeningBrackets();for(const n of r)t=t.add(i(n),T);n.set(s.bracketText,new j(e,2,i(r[0]),t,W.create(e,s,t)))}return new q(n)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map((e=>function(e){let t=(0,l.bm)(e);/^[\w ]+/.test(e)&&(t=`\\b${t}`);/[\w ]+$/.test(e)&&(t=`${t}\\b`);return t}(e))).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(2===i.kind&&i.bracketIds.intersects(e))return t}get isEmpty(){return 0===this.map.size}}class Q{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=q.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function X(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return null;if(1===e.length)return e[0];let i=e.length;for(;i>3;){const n=i>>1;for(let s=0;s<n;s++){const n=s<<1;e[s]=A.create23(e[n],e[n+1],n+3===i?e[n+2]:null,t)}i=n}return A.create23(e[0],e[1],i>=3?e[2]:null,t)}function Y(e,t){return Math.abs(e.listHeight-t.listHeight)}function Z(e,t){return e.listHeight===t.listHeight?A.create23(e,t,null,!1):e.listHeight>t.listHeight?function(e,t){let i=e=e.toMutable();const n=[];let s;for(;;){if(t.listHeight===i.listHeight){s=t;break}if(4!==i.kind)throw new Error("unexpected");n.push(i),i=i.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){const e=n[r];s?e.childrenLength>=3?s=A.create23(e.unappendChild(),s,null,!1):(e.appendChildOfSameHeight(s),s=void 0):e.handleChildrenChanged()}return s?A.create23(e,s,null,!1):e}(e,t):function(e,t){let i=e=e.toMutable();const n=[];for(;t.listHeight!==i.listHeight;){if(4!==i.kind)throw new Error("unexpected");n.push(i),i=i.makeFirstElementMutable()}let s=t;for(let r=n.length-1;r>=0;r--){const e=n[r];s?e.childrenLength>=3?s=A.create23(s,e.unprependChild(),null,!1):(e.prependChildOfSameHeight(s),s=void 0):e.handleChildrenChanged()}return s?A.create23(s,e,null,!1):e}(t,e)}class J{constructor(e){this.lastOffset=L.Vp,this.nextNodes=[e],this.offsets=[L.Vp],this.idxs=[]}readLongestNodeAt(e,t){if((0,L.zG)(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=te(this.nextNodes);if(!i)return;const n=te(this.offsets);if((0,L.zG)(e,n))return;if((0,L.zG)(n,e))if((0,L.QB)(n,i.length)<=e)this.nextNodeAfterCurrent();else{const e=ee(i);-1!==e?(this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const e=ee(i);if(-1===e)return void this.nextNodeAfterCurrent();this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e)}}}}nextNodeAfterCurrent(){for(;;){const e=te(this.offsets),t=te(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;const i=te(this.nextNodes),n=ee(i,this.idxs[this.idxs.length-1]);if(-1!==n){this.nextNodes.push(i.getChild(n)),this.offsets.push((0,L.QB)(e,t.length)),this.idxs[this.idxs.length-1]=n;break}this.idxs.pop()}}}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(;;){if(t++,t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function te(e){return e.length>0?e[e.length-1]:void 0}function ie(e,t,i,n){return new ne(e,t,i,n).parseDocument()}class ne{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new J(i):void 0,this.positionMapper=new x.W(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(M.getEmpty(),0);return e||(e=A.getEmpty()),e}parseList(e,t){const i=[];for(;;){let n=this.tryReadChildFromCache(e);if(!n){const i=this.tokenizer.peek();if(!i||2===i.kind&&i.bracketIds.intersects(e))break;n=this.parseChild(e,t+1)}4===n.kind&&0===n.childrenLength||i.push(n)}const n=this.oldNodeReader?function(e){if(0===e.length)return null;if(1===e.length)return e[0];let t=0;function i(){if(t>=e.length)return null;const i=t,n=e[i].listHeight;for(t++;t<e.length&&e[t].listHeight===n;)t++;return t-i>=2?X(0===i&&t===e.length?e:e.slice(i,t),!1):e[i]}let n=i(),s=i();if(!s)return n;for(let r=i();r;r=i())Y(n,s)<=Y(s,r)?(n=Z(n,s),s=r):s=Z(s,r);return Z(n,s)}(i):X(i,this.createImmutableLists);return n}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(null===t||!(0,L.Vh)(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(i=>{if(null!==t&&!(0,L.zG)(i.length,t))return!1;return i.canBeReused(e)}));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new H(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new V(i.length);const n=e.merge(i.bracketIds),s=this.parseList(n,t+1),r=this.tokenizer.peek();return r&&2===r.kind&&(r.bracketId===i.bracketId||r.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),I.create(i.astNode,s,r.astNode)):I.create(i.astNode,s,null)}default:throw new Error("unexpected")}}}var se=i(1617);class re extends a.jG{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new o.vl,this.denseKeyProvider=new D,this.brackets=new Q(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)2===e.tokenization.backgroundTokenizationState?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),t=new $(this.textModel.getValue(),e);this.initialAstWithoutTokens=ie(t,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(2===this.textModel.tokenization.backgroundTokenizationState){const e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens(e){let{ranges:t}=e;const i=t.map((e=>new x.c((0,L.qe)(e.fromLineNumber-1,0),(0,L.qe)(e.toLineNumber,0),(0,L.qe)(e.toLineNumber-e.fromLineNumber+1,0))));this.handleEdits(i,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=x.c.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=(0,se.M)(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=(0,se.M)(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const n=t;return ie(new G(this.textModel,this.brackets),e,n,i)}getBracketsInRange(e,t){this.flushQueue();const i=(0,L.qe)(e.startLineNumber-1,e.startColumn-1),s=(0,L.qe)(e.endLineNumber-1,e.endColumn-1);return new n.c1((e=>{const n=this.initialAstWithoutTokens||this.astWithTokens;le(n,L.Vp,n.length,i,s,e,0,0,new Map,t)}))}getBracketPairsInRange(e,t){this.flushQueue();const i=(0,L.VL)(e.getStartPosition()),s=(0,L.VL)(e.getEndPosition());return new n.c1((e=>{const n=this.initialAstWithoutTokens||this.astWithTokens,r=new he(e,t,this.textModel);ce(n,L.Vp,n.length,i,s,r,0,new Map)}))}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return ae(t,L.Vp,t.length,(0,L.VL)(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return oe(t,L.Vp,t.length,(0,L.VL)(e))}}function oe(e,t,i,n){if(4===e.kind||2===e.kind){const s=[];for(const n of e.children)i=(0,L.QB)(t,n.length),s.push({nodeOffsetStart:t,nodeOffsetEnd:i}),t=i;for(let t=s.length-1;t>=0;t--){const{nodeOffsetStart:i,nodeOffsetEnd:r}=s[t];if((0,L.zG)(i,n)){const s=oe(e.children[t],i,r,n);if(s)return s}}return null}if(3===e.kind)return null;if(1===e.kind){const n=(0,L.Qx)(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function ae(e,t,i,n){if(4===e.kind||2===e.kind){for(const s of e.children){if(i=(0,L.QB)(t,s.length),(0,L.zG)(n,i)){const e=ae(s,t,i,n);if(e)return e}t=i}return null}if(3===e.kind)return null;if(1===e.kind){const n=(0,L.Qx)(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function le(e,t,i,n,s,r,o,a,l,h){let c=arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(o>200)return!0;e:for(;;)switch(e.kind){case 4:{const a=e.childrenLength;for(let c=0;c<a;c++){const a=e.getChild(c);if(a){if(i=(0,L.QB)(t,a.length),(0,L.vr)(t,s)&&(0,L.o0)(i,n)){if((0,L.o0)(i,s)){e=a;continue e}if(!le(a,t,i,n,s,r,o,0,l,h))return!1}t=i}}return!0}case 2:{const c=!h||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo);let d=0;if(l){let t=l.get(e.openingBracket.text);void 0===t&&(t=0),d=t,c&&(t++,l.set(e.openingBracket.text,t))}const u=e.childrenLength;for(let g=0;g<u;g++){const u=e.getChild(g);if(u){if(i=(0,L.QB)(t,u.length),(0,L.vr)(t,s)&&(0,L.o0)(i,n)){if((0,L.o0)(i,s)&&1!==u.kind){e=u,c?(o++,a=d+1):a=d;continue e}if(c||1!==u.kind||!e.closingBracket){if(!le(u,t,i,n,s,r,c?o+1:o,c?d+1:d,l,h,!e.closingBracket))return!1}}t=i}}return l?.set(e.openingBracket.text,d),!0}case 3:{const e=(0,L.Qx)(t,i);return r(new w(e,o-1,0,!0))}case 1:{const e=(0,L.Qx)(t,i);return r(new w(e,o-1,a-1,c))}case 0:return!0}}class he{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function ce(e,t,i,n,s,r,o,a){if(o>200)return!0;let l=!0;if(2===e.kind){let h=0;if(a){let t=a.get(e.openingBracket.text);void 0===t&&(t=0),h=t,t++,a.set(e.openingBracket.text,t)}const c=(0,L.QB)(t,e.openingBracket.length);let d=-1;if(r.includeMinIndentation&&(d=e.computeMinIndentation(t,r.textModel)),l=r.push(new S((0,L.Qx)(t,i),(0,L.Qx)(t,c),e.closingBracket?(0,L.Qx)((0,L.QB)(c,e.child?.length||L.Vp),i):void 0,o,h,e,d)),t=c,l&&e.child){const h=e.child;if(i=(0,L.QB)(t,h.length),(0,L.vr)(t,s)&&(0,L.o0)(i,n)&&(l=ce(h,t,i,n,s,r,o+1,a),!l))return!1}a?.set(e.openingBracket.text,h)}else{let i=t;for(const t of e.children){const e=i;if(i=(0,L.QB)(i,t.length),(0,L.vr)(e,s)&&(0,L.vr)(n,i)&&(l=ce(t,e,i,n,s,r,o,a),!l))return!1}}return l}class de extends a.jG{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new a.HE),this.onDidChangeEmitter=new o.vl,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){e.languageId&&!this.bracketPairsTree.value?.object.didLanguageChange(e.languageId)||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const i=new a.Cm;this.bracketPairsTree.value=(e=i.add(new re(this.textModel,(e=>this.languageConfigurationService.getLanguageConfiguration(e)))),t=i,{object:e,dispose:()=>t?.dispose()}),i.add(this.bracketPairsTree.value.object.onDidChange((e=>this.onDidChangeEmitter.fire(e)))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire());var e,t}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||n.c1.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||n.c1.empty}getBracketsInRange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||n.c1.empty}findMatchingBracketUp(e,t,i){const n=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){const i=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!i)return null;const n=this.getBracketPairsInRange(g.Q.fromPositions(t,t)).findLast((e=>i.closes(e.openingBracketInfo)));return n?n.openingBracketRange:null}{const t=e.toLowerCase(),r=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!r)return null;const o=r.textIsBracket[t];return o?pe(this._findMatchingBracketUp(o,n,ue(i))):null}}matchBracket(e,t){if(this.canBuildAST){const t=this.getBracketPairsInRange(g.Q.fromPositions(e,e)).filter((t=>void 0!==t.closingBracketRange&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e)))).findLastMaxBy((0,n.VE)((t=>t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange),g.Q.compareRangesUsingStarts));return t?[t.openingBracketRange,t.closingBracketRange]:null}{const i=ue(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){const s=t.getCount(),r=t.getLanguageId(n);let o=Math.max(0,e.column-1-i.maxBracketLength);for(let l=n-1;l>=0;l--){const e=t.getEndOffset(l);if(e<=o)break;if((0,b.Yo)(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){o=e;break}}let a=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let l=n+1;l<s;l++){const e=t.getStartOffset(l);if(e>=a)break;if((0,b.Yo)(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){a=e;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(e,t){const i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const o=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(o&&!(0,b.Yo)(n.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,o,r),h=null;for(;;){const n=y.Fu.findNextBracketInRange(o.forwardRegex,i,s,a,l);if(!n)break;if(n.startColumn<=e.column&&e.column<=n.endColumn){const e=s.substring(n.startColumn-1,n.endColumn-1).toLowerCase(),i=this._matchFoundBracket(n,o.textIsBracket[e],o.textIsOpenBracket[e],t);if(i){if(i instanceof ge)return null;h=i}}a=n.endColumn-1}if(h)return h}if(r>0&&n.getStartOffset(r)===e.column-1){const o=r-1,a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(a&&!(0,b.Yo)(n.getStandardTokenType(o))){const{searchStartOffset:r,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,a,o),h=y.Fu.findPrevBracketInRange(a.reversedRegex,i,s,r,l);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const e=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),i=this._matchFoundBracket(h,a.textIsBracket[e],a.textIsOpenBracket[e],t);if(i)return i instanceof ge?null:i}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const s=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return s?s instanceof ge?s:[e,s]:null}_findMatchingBracketUp(e,t,i){const n=e.languageId,s=e.reversedRegex;let r=-1,o=0;const a=(t,n,a,l)=>{for(;;){if(i&&++o%100===0&&!i())return ge.INSTANCE;const h=y.Fu.findPrevBracketInRange(s,t,n,a,l);if(!h)break;const c=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(c)?r++:e.isClose(c)&&r--,0===r)return h;l=h.startColumn-1}return null};for(let l=t.lineNumber;l>=1;l--){const e=this.textModel.tokenization.getLineTokens(l),i=e.getCount(),s=this.textModel.getLineContent(l);let r=i-1,o=s.length,h=s.length;l===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,h=t.column-1);let c=!0;for(;r>=0;r--){const t=e.getLanguageId(r)===n&&!(0,b.Yo)(e.getStandardTokenType(r));if(t)c?o=e.getStartOffset(r):(o=e.getStartOffset(r),h=e.getEndOffset(r));else if(c&&o!==h){const e=a(l,s,o,h);if(e)return e}c=t}if(c&&o!==h){const e=a(l,s,o,h);if(e)return e}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageId,s=e.forwardRegex;let r=1,o=0;const a=(t,n,a,l)=>{for(;;){if(i&&++o%100===0&&!i())return ge.INSTANCE;const h=y.Fu.findNextBracketInRange(s,t,n,a,l);if(!h)break;const c=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(c)?r++:e.isClose(c)&&r--,0===r)return h;a=h.endColumn-1}return null},l=this.textModel.getLineCount();for(let h=t.lineNumber;h<=l;h++){const e=this.textModel.tokenization.getLineTokens(h),i=e.getCount(),s=this.textModel.getLineContent(h);let r=0,o=0,l=0;h===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,l=t.column-1);let c=!0;for(;r<i;r++){const t=e.getLanguageId(r)===n&&!(0,b.Yo)(e.getStandardTokenType(r));if(t)c||(o=e.getStartOffset(r)),l=e.getEndOffset(r);else if(c&&o!==l){const e=a(h,s,o,l);if(e)return e}c=t}if(c&&o!==l){const e=a(h,s,o,l);if(e)return e}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let i=null,n=null,s=null;for(let r=t.lineNumber;r>=1;r--){const e=this.textModel.tokenization.getLineTokens(r),o=e.getCount(),a=this.textModel.getLineContent(r);let l=o-1,h=a.length,c=a.length;if(r===t.lineNumber){l=e.findTokenIndexAtOffset(t.column-1),h=t.column-1,c=t.column-1;const r=e.getLanguageId(l);i!==r&&(i=r,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let d=!0;for(;l>=0;l--){const t=e.getLanguageId(l);if(i!==t){if(n&&s&&d&&h!==c){const e=y.Fu.findPrevBracketInRange(n.reversedRegex,r,a,h,c);if(e)return this._toFoundBracket(s,e);d=!1}i=t,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const o=!!n&&!(0,b.Yo)(e.getStandardTokenType(l));if(o)d?h=e.getStartOffset(l):(h=e.getStartOffset(l),c=e.getEndOffset(l));else if(s&&n&&d&&h!==c){const e=y.Fu.findPrevBracketInRange(n.reversedRegex,r,a,h,c);if(e)return this._toFoundBracket(s,e)}d=o}if(s&&n&&d&&h!==c){const e=y.Fu.findPrevBracketInRange(n.reversedRegex,r,a,h,c);if(e)return this._toFoundBracket(s,e)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const i=this.textModel.getLineCount();let n=null,s=null,r=null;for(let o=t.lineNumber;o<=i;o++){const e=this.textModel.tokenization.getLineTokens(o),i=e.getCount(),a=this.textModel.getLineContent(o);let l=0,h=0,c=0;if(o===t.lineNumber){l=e.findTokenIndexAtOffset(t.column-1),h=t.column-1,c=t.column-1;const i=e.getLanguageId(l);n!==i&&(n=i,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let d=!0;for(;l<i;l++){const t=e.getLanguageId(l);if(n!==t){if(r&&s&&d&&h!==c){const e=y.Fu.findNextBracketInRange(s.forwardRegex,o,a,h,c);if(e)return this._toFoundBracket(r,e);d=!1}n=t,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const i=!!s&&!(0,b.Yo)(e.getStandardTokenType(l));if(i)d||(h=e.getStartOffset(l)),c=e.getEndOffset(l);else if(r&&s&&d&&h!==c){const e=y.Fu.findNextBracketInRange(s.forwardRegex,o,a,h,c);if(e)return this._toFoundBracket(r,e)}d=i}if(r&&s&&d&&h!==c){const e=y.Fu.findNextBracketInRange(s.forwardRegex,o,a,h,c);if(e)return this._toFoundBracket(r,e)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const e=g.Q.fromPositions(i),t=this.getBracketPairsInRange(g.Q.fromPositions(i,i)).findLast((t=>void 0!==t.closingBracketRange&&t.range.strictContainsRange(e)));return t?[t.openingBracketRange,t.closingBracketRange]:null}const n=ue(t),s=this.textModel.getLineCount(),r=new Map;let o=[];const a=(e,t)=>{if(!r.has(e)){const i=[];for(let e=0,n=t?t.brackets.length:0;e<n;e++)i[e]=0;r.set(e,i)}o=r.get(e)};let l=0;const h=(e,t,i,s,r)=>{for(;;){if(n&&++l%100===0&&!n())return ge.INSTANCE;const a=y.Fu.findNextBracketInRange(e.forwardRegex,t,i,s,r);if(!a)break;const h=i.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),c=e.textIsBracket[h];if(c&&(c.isOpen(h)?o[c.index]++:c.isClose(h)&&o[c.index]--,-1===o[c.index]))return this._matchFoundBracket(a,c,!1,n);s=a.endColumn-1}return null};let c=null,d=null;for(let u=i.lineNumber;u<=s;u++){const e=this.textModel.tokenization.getLineTokens(u),t=e.getCount(),n=this.textModel.getLineContent(u);let s=0,r=0,o=0;if(u===i.lineNumber){s=e.findTokenIndexAtOffset(i.column-1),r=i.column-1,o=i.column-1;const t=e.getLanguageId(s);c!==t&&(c=t,d=this.languageConfigurationService.getLanguageConfiguration(c).brackets,a(c,d))}let l=!0;for(;s<t;s++){const t=e.getLanguageId(s);if(c!==t){if(d&&l&&r!==o){const e=h(d,u,n,r,o);if(e)return pe(e);l=!1}c=t,d=this.languageConfigurationService.getLanguageConfiguration(c).brackets,a(c,d)}const i=!!d&&!(0,b.Yo)(e.getStandardTokenType(s));if(i)l||(r=e.getStartOffset(s)),o=e.getEndOffset(s);else if(d&&l&&r!==o){const e=h(d,u,n,r,o);if(e)return pe(e)}l=i}if(d&&l&&r!==o){const e=h(d,u,n,r,o);if(e)return pe(e)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}}function ue(e){if("undefined"===typeof e)return()=>!0;{const t=Date.now();return()=>Date.now()-t<=e}}class ge{static#e=(()=>this.INSTANCE=new ge)();constructor(){this._searchCanceledBrand=void 0}}function pe(e){return e instanceof ge?null:e}var fe=i(4960),me=i(2427);class _e extends a.jG{constructor(e){super(),this.textModel=e,this.colorProvider=new ve,this.onDidChangeEmitter=new o.vl,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange((e=>{this.onDidChangeEmitter.fire()})))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){if(n)return[];if(void 0===t)return[];if(!this.colorizationOptions.enabled)return[];return this.textModel.bracketPairs.getBracketsInRange(e,!0).map((e=>({id:`bracket${e.range.toString()}-${e.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(e,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range}))).toArray()}getAllDecorations(e,t){return void 0===e?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new g.Q(1,1,this.textModel.getLineCount(),1),e,t):[]}}class ve{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return"bracket-highlighting-"+e%30}}(0,me.zy)(((e,t)=>{const i=[fe.sN,fe.lQ,fe.ss,fe.l5,fe.sH,fe.zp],n=new ve;t.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${e.getColor(fe.s7)}; }`);const s=i.map((t=>e.getColor(t))).filter((e=>!!e)).filter((e=>!e.isTransparent()));for(let r=0;r<30;r++){const e=s[r%s.length];t.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${e}; }`)}}));var be=i(621),ye=i(1707);class we{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function Ce(e,t,i,n,s){let r;for(s.spacesDiff=0,s.looksLikeAlignment=!1,r=0;r<t&&r<n;r++){if(e.charCodeAt(r)!==i.charCodeAt(r))break}let o=0,a=0;for(let u=r;u<t;u++){32===e.charCodeAt(u)?o++:a++}let l=0,h=0;for(let u=r;u<n;u++){32===i.charCodeAt(u)?l++:h++}if(o>0&&a>0)return;if(l>0&&h>0)return;const c=Math.abs(a-h),d=Math.abs(o-l);if(0===c)return s.spacesDiff=d,void(d>0&&0<=l-1&&l-1<e.length&&l<i.length&&32!==i.charCodeAt(l)&&32===e.charCodeAt(l-1)&&44===e.charCodeAt(e.length-1)&&(s.looksLikeAlignment=!0));d%c!==0||(s.spacesDiff=d/c)}function Se(e,t,i){const n=Math.min(e.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],h=[0,0,0,0,0,0,0,0,0],c=new we;for(let g=1;g<=n;g++){const n=e.getLineLength(g),l=e.getLineContent(g),d=n<=65536;let u=!1,p=0,f=0,m=0;for(let t=0,i=n;t<i;t++){const i=d?l.charCodeAt(t):e.getLineCharCode(g,t);if(9===i)m++;else{if(32!==i){u=!0,p=t;break}f++}}if(!u)continue;if(m>0?s++:f>1&&r++,Ce(o,a,l,p,c),c.looksLikeAlignment&&(!i||t!==c.spacesDiff))continue;const _=c.spacesDiff;_<=8&&h[_]++,o=l,a=p}let d=i;s!==r&&(d=s<r);let u=t;if(d){let e=d?0:.1*n;l.forEach((t=>{const i=h[t];i>e&&(e=i,u=t)})),4===u&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(u=2)}return{insertSpaces:d,tabSize:u}}function xe(e){return(1&e.metadata)>>>0}function ke(e,t){e.metadata=254&e.metadata|t}function Le(e){return(2&e.metadata)>>>1===1}function Ee(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function Me(e){return(4&e.metadata)>>>2===1}function Te(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function De(e){return(64&e.metadata)>>>6===1}function Ne(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}function Ie(e,t){e.metadata=231&e.metadata|t<<3}function Ae(e,t){e.metadata=223&e.metadata|(t?1:0)<<5}class Re{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,ke(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,Te(this,!1),Ne(this,!1),Ie(this,1),Ae(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Ee(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;const t=this.options.className;Te(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),Ne(this,null!==this.options.glyphMarginClassName),Ie(this,this.options.stickiness),Ae(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Pe=new Re(null,0,0);Pe.parent=Pe,Pe.left=Pe,Pe.right=Pe,ke(Pe,0);class Oe{constructor(){this.root=Pe,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,s,r){return this.root===Pe?[]:function(e,t,i,n,s,r,o){let a=e.root,l=0,h=0,c=0,d=0;const u=[];let g=0;for(;a!==Pe;)if(Le(a))Ee(a.left,!1),Ee(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;else{if(!Le(a.left)){if(h=l+a.maxEnd,h<t){Ee(a,!0);continue}if(a.left!==Pe){a=a.left;continue}}if(c=l+a.start,c>i)Ee(a,!0);else{if(d=l+a.end,d>=t){a.setCachedOffsets(c,d,r);let e=!0;n&&a.ownerId&&a.ownerId!==n&&(e=!1),s&&Me(a)&&(e=!1),o&&!De(a)&&(e=!1),e&&(u[g++]=a)}Ee(a,!0),a.right===Pe||Le(a.right)||(l+=a.delta,a=a.right)}}return Ee(e.root,!1),u}(this,e,t,i,n,s,r)}search(e,t,i,n){return this.root===Pe?[]:function(e,t,i,n,s){let r=e.root,o=0,a=0,l=0;const h=[];let c=0;for(;r!==Pe;){if(Le(r)){Ee(r.left,!1),Ee(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==Pe&&!Le(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,n);let e=!0;t&&r.ownerId&&r.ownerId!==t&&(e=!1),i&&Me(r)&&(e=!1),s&&!De(r)&&(e=!1),e&&(h[c++]=r),Ee(r,!0),r.right===Pe||Le(r.right)||(o+=r.delta,r=r.right)}return Ee(e.root,!1),h}(this,e,t,i,n)}collectNodesFromOwner(e){return function(e,t){let i=e.root;const n=[];let s=0;for(;i!==Pe;)Le(i)?(Ee(i.left,!1),Ee(i.right,!1),i=i.parent):i.left===Pe||Le(i.left)?(i.ownerId===t&&(n[s++]=i),Ee(i,!0),i.right===Pe||Le(i.right)||(i=i.right)):i=i.left;return Ee(e.root,!1),n}(this,e)}collectNodesPostOrder(){return function(e){let t=e.root;const i=[];let n=0;for(;t!==Pe;)Le(t)?(Ee(t.left,!1),Ee(t.right,!1),t=t.parent):t.left===Pe||Le(t.left)?t.right===Pe||Le(t.right)?(i[n++]=t,Ee(t,!0)):t=t.right:t=t.left;return Ee(e.root,!1),i}(this)}insert(e){ze(this,e),this._normalizeDeltaIfNecessary()}delete(e){Ve(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const s=i.start+n,r=i.end+n;i.setCachedOffsets(s,r,t)}acceptReplace(e,t,i,n){const s=function(e,t,i){let n=e.root,s=0,r=0,o=0,a=0;const l=[];let h=0;for(;n!==Pe;)if(Le(n))Ee(n.left,!1),Ee(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;else{if(!Le(n.left)){if(r=s+n.maxEnd,r<t){Ee(n,!0);continue}if(n.left!==Pe){n=n.left;continue}}o=s+n.start,o>i?Ee(n,!0):(a=s+n.end,a>=t&&(n.setCachedOffsets(o,a,0),l[h++]=n),Ee(n,!0),n.right===Pe||Le(n.right)||(s+=n.delta,n=n.right))}return Ee(e.root,!1),l}(this,e,e+t);for(let r=0,o=s.length;r<o;r++){Ve(this,s[r])}this._normalizeDeltaIfNecessary(),function(e,t,i,n){let s=e.root,r=0,o=0,a=0;const l=n-(i-t);for(;s!==Pe;)if(Le(s))Ee(s.left,!1),Ee(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),Ge(s),s=s.parent;else{if(!Le(s.left)){if(o=r+s.maxEnd,o<t){Ee(s,!0);continue}if(s.left!==Pe){s=s.left;continue}}a=r+s.start,a>i?(s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(e.requestNormalizeDelta=!0),Ee(s,!0)):(Ee(s,!0),s.right===Pe||Le(s.right)||(r+=s.delta,s=s.right))}Ee(e.root,!1)}(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,o=s.length;r<o;r++){const o=s[r];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,Be(o,e,e+t,i,n),o.maxEnd=o.end,ze(this,o)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(e){let t=e.root,i=0;for(;t!==Pe;)t.left===Pe||Le(t.left)?t.right===Pe||Le(t.right)?(t.start=i+t.start,t.end=i+t.end,t.delta=0,Ge(t),Ee(t,!0),Ee(t.left,!1),Ee(t.right,!1),t===t.parent.right&&(i-=t.parent.delta),t=t.parent):(i+=t.delta,t=t.right):t=t.left;Ee(e.root,!1)}(this))}}function Fe(e,t,i,n){return e<i||!(e>i)&&(1!==n&&(2===n||t))}function Be(e,t,i,n,s){const r=function(e){return(24&e.metadata)>>>3}(e),o=0===r||2===r,a=1===r||2===r,l=i-t,h=n,c=Math.min(l,h),d=e.start;let u=!1;const g=e.end;let p=!1;t<=d&&g<=i&&function(e){return(32&e.metadata)>>>5===1}(e)&&(e.start=t,u=!0,e.end=t,p=!0);{const e=s?1:l>0?2:0;!u&&Fe(d,o,t,e)&&(u=!0),!p&&Fe(g,a,t,e)&&(p=!0)}if(c>0&&!s){const e=l>h?2:0;!u&&Fe(d,o,t+c,e)&&(u=!0),!p&&Fe(g,a,t+c,e)&&(p=!0)}{const n=s?1:0;!u&&Fe(d,o,i,n)&&(e.start=t+h,u=!0),!p&&Fe(g,a,i,n)&&(e.end=t+h,p=!0)}const f=h-l;u||(e.start=Math.max(0,d+f)),p||(e.end=Math.max(0,g+f)),e.start>e.end&&(e.end=e.start)}function ze(e,t){if(e.root===Pe)return t.parent=Pe,t.left=Pe,t.right=Pe,ke(t,0),e.root=t,e.root;!function(e,t){let i=0,n=e.root;const s=t.start,r=t.end;for(;;){if($e(s,r,n.start+i,n.end+i)<0){if(n.left===Pe){t.start-=i,t.end-=i,t.maxEnd-=i,n.left=t;break}n=n.left}else{if(n.right===Pe){t.start-=i+n.delta,t.end-=i+n.delta,t.maxEnd-=i+n.delta,n.right=t;break}i+=n.delta,n=n.right}}t.parent=n,t.left=Pe,t.right=Pe,ke(t,1)}(e,t),Ke(t.parent);let i=t;for(;i!==e.root&&1===xe(i.parent);)if(i.parent===i.parent.parent.left){const t=i.parent.parent.right;1===xe(t)?(ke(i.parent,0),ke(t,0),ke(i.parent.parent,1),i=i.parent.parent):(i===i.parent.right&&(i=i.parent,He(e,i)),ke(i.parent,0),ke(i.parent.parent,1),Ue(e,i.parent.parent))}else{const t=i.parent.parent.left;1===xe(t)?(ke(i.parent,0),ke(t,0),ke(i.parent.parent,1),i=i.parent.parent):(i===i.parent.left&&(i=i.parent,Ue(e,i)),ke(i.parent,0),ke(i.parent.parent,1),He(e,i.parent.parent))}return ke(e.root,0),t}function Ve(e,t){let i,n;if(t.left===Pe?(i=t.right,n=t,i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta):t.right===Pe?(i=t.left,n=t):(n=function(e){for(;e.left!==Pe;)e=e.left;return e}(t.right),i=n.right,i.start+=n.delta,i.end+=n.delta,i.delta+=n.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,n.delta=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0)),n===e.root)return e.root=i,ke(i,0),t.detach(),We(),Ge(i),void(e.root.parent=Pe);const s=1===xe(n);if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?i.parent=n.parent:(n.parent===t?i.parent=n:i.parent=n.parent,n.left=t.left,n.right=t.right,n.parent=t.parent,ke(n,xe(t)),t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==Pe&&(n.left.parent=n),n.right!==Pe&&(n.right.parent=n)),t.detach(),s)return Ke(i.parent),n!==t&&(Ke(n),Ke(n.parent)),void We();let r;for(Ke(i),Ke(i.parent),n!==t&&(Ke(n),Ke(n.parent));i!==e.root&&0===xe(i);)i===i.parent.left?(r=i.parent.right,1===xe(r)&&(ke(r,0),ke(i.parent,1),He(e,i.parent),r=i.parent.right),0===xe(r.left)&&0===xe(r.right)?(ke(r,1),i=i.parent):(0===xe(r.right)&&(ke(r.left,0),ke(r,1),Ue(e,r),r=i.parent.right),ke(r,xe(i.parent)),ke(i.parent,0),ke(r.right,0),He(e,i.parent),i=e.root)):(r=i.parent.left,1===xe(r)&&(ke(r,0),ke(i.parent,1),Ue(e,i.parent),r=i.parent.left),0===xe(r.left)&&0===xe(r.right)?(ke(r,1),i=i.parent):(0===xe(r.left)&&(ke(r.right,0),ke(r,1),He(e,r),r=i.parent.left),ke(r,xe(i.parent)),ke(i.parent,0),ke(r.left,0),Ue(e,i.parent),i=e.root));ke(i,0),We()}function We(){Pe.parent=Pe,Pe.delta=0,Pe.start=0,Pe.end=0}function He(e,t){const i=t.right;i.delta+=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,t.right=i.left,i.left!==Pe&&(i.left.parent=t),i.parent=t.parent,t.parent===Pe?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i,Ge(t),Ge(i)}function Ue(e,t){const i=t.left;t.delta-=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=i.delta,t.end-=i.delta,t.left=i.right,i.right!==Pe&&(i.right.parent=t),i.parent=t.parent,t.parent===Pe?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i,Ge(t),Ge(i)}function je(e){let t=e.end;if(e.left!==Pe){const i=e.left.maxEnd;i>t&&(t=i)}if(e.right!==Pe){const i=e.right.maxEnd+e.delta;i>t&&(t=i)}return t}function Ge(e){e.maxEnd=je(e)}function Ke(e){for(;e!==Pe;){const t=je(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function $e(e,t,i,n){return e===i?t-n:e-i}class qe{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Qe)return Xe(this.right);let e=this;for(;e.parent!==Qe&&e.parent.left!==e;)e=e.parent;return e.parent===Qe?Qe:e.parent}prev(){if(this.left!==Qe)return Ye(this.left);let e=this;for(;e.parent!==Qe&&e.parent.right!==e;)e=e.parent;return e.parent===Qe?Qe:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Qe=new qe(null,0);function Xe(e){for(;e.left!==Qe;)e=e.left;return e}function Ye(e){for(;e.right!==Qe;)e=e.right;return e}function Ze(e){return e===Qe?0:e.size_left+e.piece.length+Ze(e.right)}function Je(e){return e===Qe?0:e.lf_left+e.piece.lineFeedCnt+Je(e.right)}function et(){Qe.parent=Qe}function tt(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==Qe&&(i.left.parent=t),i.parent=t.parent,t.parent===Qe?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function it(e,t){const i=t.left;t.left=i.right,i.right!==Qe&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===Qe?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function nt(e,t){let i,n;if(t.left===Qe?(n=t,i=n.right):t.right===Qe?(n=t,i=n.left):(n=Xe(t.right),i=n.right),n===e.root)return e.root=i,i.color=0,t.detach(),et(),void(e.root.parent=Qe);const s=1===n.color;if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?(i.parent=n.parent,ot(e,i)):(n.parent===t?i.parent=n:i.parent=n.parent,ot(e,i),n.left=t.left,n.right=t.right,n.parent=t.parent,n.color=t.color,t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==Qe&&(n.left.parent=n),n.right!==Qe&&(n.right.parent=n),n.size_left=t.size_left,n.lf_left=t.lf_left,ot(e,n)),t.detach(),i.parent.left===i){const t=Ze(i),n=Je(i);if(t!==i.parent.size_left||n!==i.parent.lf_left){const s=t-i.parent.size_left,r=n-i.parent.lf_left;i.parent.size_left=t,i.parent.lf_left=n,rt(e,i.parent,s,r)}}if(ot(e,i.parent),s)return void et();let r;for(;i!==e.root&&0===i.color;)i===i.parent.left?(r=i.parent.right,1===r.color&&(r.color=0,i.parent.color=1,tt(e,i.parent),r=i.parent.right),0===r.left.color&&0===r.right.color?(r.color=1,i=i.parent):(0===r.right.color&&(r.left.color=0,r.color=1,it(e,r),r=i.parent.right),r.color=i.parent.color,i.parent.color=0,r.right.color=0,tt(e,i.parent),i=e.root)):(r=i.parent.left,1===r.color&&(r.color=0,i.parent.color=1,it(e,i.parent),r=i.parent.left),0===r.left.color&&0===r.right.color?(r.color=1,i=i.parent):(0===r.left.color&&(r.right.color=0,r.color=1,tt(e,r),r=i.parent.left),r.color=i.parent.color,i.parent.color=0,r.left.color=0,it(e,i.parent),i=e.root));i.color=0,et()}function st(e,t){for(ot(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&tt(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,it(e,t.parent.parent))}else{const i=t.parent.parent.left;1===i.color?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&it(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,tt(e,t.parent.parent))}e.root.color=0}function rt(e,t,i,n){for(;t!==e.root&&t!==Qe;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}function ot(e,t){let i=0,n=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(i=Ze((t=t.parent).left)-t.size_left,n=Je(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=n;t!==e.root&&(0!==i||0!==n);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}}Qe.parent=Qe,Qe.left=Qe,Qe.right=Qe,Qe.color=0;var at=i(6701);const lt=65535;function ht(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class ct{constructor(e,t,i,n,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=s}}function dt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=[0];let n=1;for(let s=0,r=e.length;s<r;s++){const t=e.charCodeAt(s);13===t?s+1<r&&10===e.charCodeAt(s+1)?(i[n++]=s+2,s++):i[n++]=s+1:10===t&&(i[n++]=s+1)}return t?ht(i):i}class ut{constructor(e,t,i,n,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=s}}class gt{constructor(e,t){this.buffer=e,this.lineStarts=t}}class pt{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Qe&&e.iterate(e.root,(e=>(e!==Qe&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class ft{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const s=i[n];(null===s.node.parent||s.nodeStartOffset>=e)&&(i[n]=null,t=!0)}if(t){const e=[];for(const t of i)null!==t&&e.push(t);this._cache=e}}}class mt{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new gt("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Qe,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=dt(e[s].buffer));const t=new ut(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),n=this.rbInsertRight(n,t)}this._searchCache=new ft(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=lt,i=t-Math.floor(21845),n=2*i;let s="",r=0;const o=[];if(this.iterate(this.root,(t=>{const a=this.getNodeContent(t),l=a.length;if(r<=i||r+l<n)return s+=a,r+=l,!0;const h=s.replace(/\r\n|\r|\n/g,e);return o.push(new gt(h,dt(h))),s=a,r=l,!0})),r>0){const t=s.replace(/\r\n|\r|\n/g,e);o.push(new gt(t,dt(t)))}this.create(o,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new pt(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==Qe;)if(n.left!==Qe&&n.lf_left+1>=e)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;return i+(this.getAccumulatedValue(n,e-n.lf_left-2)+t-1)}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==Qe;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,0===s.index){const e=n-this.getOffsetAt(i+1,1);return new u.y(i+1,e+1)}return new u.y(i+1,s.remainder+1)}if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===Qe){const t=n-e-this.getOffsetAt(i+1,1);return new u.y(i+1,t+1)}t=t.right}return new u.y(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,n);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n.substring(s+e.remainder,s+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let r=n.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==Qe;){const e=this._buffers[i.piece.bufferIndex].buffer,n=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=e.substring(n,n+t.remainder);break}r+=e.substr(n,i.piece.length),i=i.next()}return r}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,(s=>{if(s===Qe)return!0;const r=s.piece;let o=r.length;if(0===o)return!0;const a=this._buffers[r.bufferIndex].buffer,l=this._buffers[r.bufferIndex].lineStarts,h=r.start.line,c=r.end.line;let d=l[h]+r.start.column;if(n&&(10===a.charCodeAt(d)&&(d++,o--),e[t++]=i,i="",n=!1,0===o))return!0;if(h===c)return this._EOLNormalized||13!==a.charCodeAt(d+o-1)?i+=a.substr(d,o):(n=!0,i+=a.substr(d,o-1)),!0;i+=this._EOLNormalized?a.substring(d,Math.max(d,l[h+1]-this._EOLLength)):a.substring(d,l[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let n=h+1;n<c;n++)i=this._EOLNormalized?a.substring(l[n],l[n+1]-this._EOLLength):a.substring(l[n],l[n+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return this._EOLNormalized||13!==a.charCodeAt(l[c]+r.end.column-1)?i=a.substr(l[c],r.end.column):(n=!0,0===r.end.column?t--:i=a.substr(l[c],r.end.column-1)),!0})),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,s,r,o,a,l,h,c){const d=this._buffers[e.piece.bufferIndex],u=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,s),f=this.offsetInBuffer(e.piece.bufferIndex,r);let m;const _={line:0,column:0};let v,b;t._wordSeparators?(v=d.buffer.substring(p,f),b=e=>e+p,t.reset(0)):(v=d.buffer,b=e=>e,t.reset(p));do{if(m=t.next(v),m){if(b(m.index)>=f)return h;this.positionInBuffer(e,b(m.index)-u,_);const t=this.getLineFeedCnt(e.piece.bufferIndex,s,_),r=_.line===s.line?_.column-s.column+n:_.column+1,o=r+m[0].length;if(c[h++]=(0,at.dr)(new g.Q(i+t,r,i+t,o),m,a),b(m.index)+m[0].length>=f)return h;if(h>=l)return h}}while(m);return h}findMatchesLineByLine(e,t,i,n){const s=[];let r=0;const o=new at.W5(t.wordSeparators,t.regex);let a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];const l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];let h=this.positionInBuffer(a.node,a.remainder);const c=this.positionInBuffer(l.node,l.remainder);if(a.node===l.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,h,c,t,i,n,r,s),s;let d=e.startLineNumber,u=a.node;for(;u!==l.node;){const l=this.getLineFeedCnt(u.piece.bufferIndex,h,u.piece.end);if(l>=1){const a=this._buffers[u.piece.bufferIndex].lineStarts,c=this.offsetInBuffer(u.piece.bufferIndex,u.piece.start),g=a[h.line+l],p=d===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(u,o,d,p,h,this.positionInBuffer(u,g-c),t,i,n,r,s),r>=n)return s;d+=l}const c=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const a=this.getLineContent(d).substring(c,e.endColumn-1);return r=this._findMatchesInLine(t,o,a,e.endLineNumber,c,r,s,i,n),s}if(r=this._findMatchesInLine(t,o,this.getLineContent(d).substr(c),d,c,r,s,i,n),r>=n)return s;d++,a=this.nodeAt2(d,1),u=a.node,h=this.positionInBuffer(a.node,a.remainder)}if(d===e.endLineNumber){const a=d===e.startLineNumber?e.startColumn-1:0,l=this.getLineContent(d).substring(a,e.endColumn-1);return r=this._findMatchesInLine(t,o,l,e.endLineNumber,a,r,s,i,n),s}const g=d===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(l.node,o,d,g,h,c,t,i,n,r,s),s}_findMatchesInLine(e,t,i,n,s,r,o,a,l){const h=e.wordSeparators;if(!a&&e.simpleSearch){const t=e.simpleSearch,a=t.length,c=i.length;let d=-a;for(;-1!==(d=i.indexOf(t,d+a));)if((!h||(0,at.wC)(h,i,c,d,a))&&(o[r++]=new v.Dg(new g.Q(n,d+1+s,n,d+1+a+s),null),r>=l))return r;return r}let c;t.reset(0);do{if(c=t.next(i),c&&(o[r++]=(0,at.dr)(new g.Q(n,c.index+1+s,n,c.index+1+c[0].length+s),c,a),r>=l))return r}while(c);return r}insert(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Qe){const{node:i,remainder:n,nodeStartOffset:s}=this.nodeAt(e),r=i.piece,o=r.bufferIndex,a=this.positionInBuffer(i,n);if(0===i.piece.bufferIndex&&r.end.line===this._lastChangeBufferPos.line&&r.end.column===this._lastChangeBufferPos.column&&s+r.length===e&&t.length<lt)return this.appendToNode(i,t),void this.computeBufferMetadata();if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){const e=[];let s=new ut(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),this.offsetInBuffer(o,r.end)-this.offsetInBuffer(o,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)){if(10===this.nodeCharCodeAt(i,n)){const e={line:s.start.line+1,column:0};s=new ut(s.bufferIndex,e,s.end,this.getLineFeedCnt(s.bufferIndex,e,s.end),s.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){if(13===this.nodeCharCodeAt(i,n-1)){const s=this.positionInBuffer(i,n-1);this.deleteNodeTail(i,s),t="\r"+t,0===i.piece.length&&e.push(i)}else this.deleteNodeTail(i,a)}else this.deleteNodeTail(i,a);const l=this.createNewPieces(t);s.length>0&&this.rbInsertRight(i,s);let h=i;for(let t=0;t<l.length;t++)h=this.rbInsertRight(h,l[t]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,i)}else{const e=this.createNewPieces(t);let i=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)i=this.rbInsertRight(i,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Qe)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),s=i.node,r=n.node;if(s===r){const r=this.positionInBuffer(s,i.remainder),o=this.positionInBuffer(s,n.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const e=s.next();return nt(this,s),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(s,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),void this.computeBufferMetadata()}return i.nodeStartOffset+s.piece.length===e+t?(this.deleteNodeTail(s,r),this.validateCRLFWithNextNode(s),void this.computeBufferMetadata()):(this.shrinkNode(s,r,o),void this.computeBufferMetadata())}const o=[],a=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,a),this._searchCache.validate(e),0===s.piece.length&&o.push(s);const l=this.positionInBuffer(r,n.remainder);this.deleteNodeHead(r,l),0===r.piece.length&&o.push(r);for(let c=s.next();c!==Qe&&c!==r;c=c.next())o.push(c);const h=0===s.piece.length?s.prev():s;this.deleteNodes(o),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const n=t.piece,s={line:n.start.line+1,column:0},r=new ut(n.bufferIndex,s,n.end,this.getLineFeedCnt(n.bufferIndex,s,n.end),n.length-1);t.piece=r,e+="\n",rt(this,t,-1,-1),0===t.piece.length&&i.push(t)}const n=this.createNewPieces(e);let s=this.rbInsertLeft(t,n[n.length-1]);for(let r=n.length-2;r>=0;r--)s=this.rbInsertLeft(s,n[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let s=n;for(let r=1;r<i.length;r++)s=this.rbInsertRight(s,i[r]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,o=r[n.start.line]+n.start.column+t;let a=n.start.line,l=n.end.line,h=0,c=0,d=0;for(;a<=l&&(h=a+(l-a)/2|0,d=r[h],h!==l);)if(c=r[h+1],o<d)l=h-1;else{if(!(o>=c))break;a=h+1}return i?(i.line=h,i.column=o-d,null):{line:h,column:o-d}}getLineFeedCnt(e,t,i){if(0===i.column)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const s=n[i.line+1],r=n[i.line]+i.column;if(s>r+1)return i.line-t.line;const o=r-1;return 13===this._buffers[e].buffer.charCodeAt(o)?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)nt(this,e[t])}createNewPieces(e){if(e.length>lt){const t=[];for(;e.length>lt;){const i=e.charCodeAt(65534);let n;13===i||i>=55296&&i<=56319?(n=e.substring(0,65534),e=e.substring(65534)):(n=e.substring(0,lt),e=e.substring(lt));const s=dt(n);t.push(new ut(this._buffers.length,{line:0,column:0},{line:s.length-1,column:n.length-s[s.length-1]},s.length-1,n.length)),this._buffers.push(new gt(n,s))}const i=dt(e);return t.push(new ut(this._buffers.length,{line:0,column:0},{line:i.length-1,column:e.length-i[i.length-1]},i.length-1,e.length)),this._buffers.push(new gt(e,i)),t}let t=this._buffers[0].buffer.length;const i=dt(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let e=0;e<i.length;e++)i[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<i.length;e++)i[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,o={line:r,column:s-this._buffers[0].lineStarts[r]},a=new ut(0,n,o,this.getLineFeedCnt(0,n,o),s-t);return this._lastChangeBufferPos=o,[a]}getLineRawContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.root,n="";const s=this._searchCache.get2(e);if(s){i=s.node;const r=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),o=this._buffers[i.piece.bufferIndex].buffer,a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt!==e){const n=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return o.substring(a+r,a+n-t)}n=o.substring(a+r,a+i.piece.length)}else{let s=0;const r=e;for(;i!==Qe;)if(i.left!==Qe&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){const n=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:s,nodeStartLineNumber:r-(e-1-i.lf_left)}),a.substring(l+n,l+o-t)}if(i.lf_left+i.piece.lineFeedCnt===e-1){const t=this.getAccumulatedValue(i,e-i.lf_left-2),s=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=s.substring(r+t,r+i.piece.length);break}e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right}}for(i=i.next();i!==Qe;){const e=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(i,0),r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=e.substring(r,r+s-t),n}{const t=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=e.substr(t,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==Qe;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),s=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const t=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(t!==s)return{index:t,remainder:0}}return{index:s,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[s]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),r=t,o=this.offsetInBuffer(i.bufferIndex,r),a=this.getLineFeedCnt(i.bufferIndex,i.start,r),l=a-n,h=o-s,c=i.length+h;e.piece=new ut(i.bufferIndex,i.start,r,a,c),rt(this,e,h,l)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),r=t,o=this.getLineFeedCnt(i.bufferIndex,r,i.end),a=o-n,l=s-this.offsetInBuffer(i.bufferIndex,r),h=i.length+l;e.piece=new ut(i.bufferIndex,r,i.end,o,h),rt(this,e,l,a)}shrinkNode(e,t,i){const n=e.piece,s=n.start,r=n.end,o=n.length,a=n.lineFeedCnt,l=t,h=this.getLineFeedCnt(n.bufferIndex,n.start,l),c=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,s);e.piece=new ut(n.bufferIndex,n.start,l,h,c),rt(this,e,c-o,h-a);const d=new ut(n.bufferIndex,i,r,this.getLineFeedCnt(n.bufferIndex,i,r),this.offsetInBuffer(n.bufferIndex,r)-this.offsetInBuffer(n.bufferIndex,i)),u=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(u)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=dt(t,!1);for(let d=0;d<s.length;d++)s[d]+=n;if(i){const e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,o={line:r,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[r]},a=e.piece.length+t.length,l=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,o),c=h-l;e.piece=new ut(e.piece.bufferIndex,e.piece.start,o,h,a),this._lastChangeBufferPos=o,rt(this,e,t.length,c)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==Qe;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){n+=t.size_left;const i={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(i),i}e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==Qe;)if(i.left!==Qe&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(s+t-1,r),nodeStartOffset:n}}if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:n};t-=i.piece.length-s;break}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==Qe;){if(i.piece.lineFeedCnt>0){const e=this.getAccumulatedValue(i,0),n=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,e),nodeStartOffset:n}}if(i.piece.length>=t-1){return{node:i,remainder:t-1,nodeStartOffset:this.offsetOfNode(i)}}t-=i.piece.length,i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"===typeof e)return 10===e.charCodeAt(0);if(e===Qe||0===e.piece.lineFeedCnt)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,s=i[n]+t.start.column;if(n===i.length-1)return!1;return!(i[n+1]>s+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(s)}endWithCR(e){return"string"===typeof e?13===e.charCodeAt(e.length-1):e!==Qe&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let s;s=0===e.piece.end.column?{line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new ut(e.piece.bufferIndex,e.piece.start,s,o,r),rt(this,e,-1,-1),0===e.piece.length&&i.push(e);const a={line:t.piece.start.line+1,column:0},l=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new ut(t.piece.bufferIndex,a,t.piece.end,h,l),rt(this,t,-1,-1),0===t.piece.length&&i.push(t);const c=this.createNewPieces("\r\n");this.rbInsertRight(e,c[0]);for(let d=0;d<i.length;d++)nt(this,i[d])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+="\n",1===i.piece.length)nt(this,i);else{const e=i.piece,t={line:e.start.line+1,column:0},n=e.length-1,s=this.getLineFeedCnt(e.bufferIndex,t,e.end);i.piece=new ut(e.bufferIndex,t,e.end,s,n),rt(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Qe)return t(Qe);const i=this.iterate(e.left,t);return i?t(e)&&this.iterate(e.right,t):i}getNodeContent(e){if(e===Qe)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new qe(t,1);i.left=Qe,i.right=Qe,i.parent=Qe,i.size_left=0,i.lf_left=0;if(this.root===Qe)this.root=i,i.color=0;else if(e.right===Qe)e.right=i,i.parent=e;else{const t=Xe(e.right);t.left=i,i.parent=t}return st(this,i),i}rbInsertLeft(e,t){const i=new qe(t,1);if(i.left=Qe,i.right=Qe,i.parent=Qe,i.size_left=0,i.lf_left=0,this.root===Qe)this.root=i,i.color=0;else if(e.left===Qe)e.left=i,i.parent=e;else{const t=Ye(e.left);t.right=i,i.parent=t}return st(this,i),i}}var _t=i(9552);class vt extends a.jG{constructor(e,t,i,n,s,r,a){super(),this._onDidChangeContent=this._register(new o.vl),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._pieceTree=new mt(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),s=this.getPositionAt(i);return new g.Q(n.lineNumber,n.column,s.lineNumber,s.column)}getValueInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const r=this._getEndOfLine(t),o=this.getEOL();if(r.length!==o.length){s=(r.length-o.length)*(e.endLineNumber-e.startLineNumber)}return n-i+s}getCharacterCountInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,s=e.endLineNumber;for(let t=n;t<=s;t++){const r=this.getLineContent(t),o=t===n?e.startColumn-1:0,a=t===s?e.endColumn-1:r.length;for(let e=o;e<a;e++)l.pc(r.charCodeAt(e))?(i+=1,e+=1):i+=1}return i+=this._getEndOfLine(t).length*(s-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=l.HG(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=l.lT(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,o=!0,a=[];for(let m=0;m<e.length;m++){const t=e[m];o&&t._isTracked&&(o=!1);const i=t.range;if(t.text){let e=!0;r||(e=!l.aC(t.text),r=e),!n&&e&&(n=l.E_(t.text)),!s&&e&&(s=l.$X(t.text))}let h="",d=0,u=0,g=0;if(t.text){let e;[d,u,g,e]=(0,c.W)(t.text);const i=this.getEOL();h=0===e||e===("\r\n"===i?2:1)?t.text:t.text.replace(/\r\n|\r|\n/g,i)}a[m]={sortIndex:m,identifier:t.identifier||null,range:i,rangeOffset:this.getOffsetAt(i.startLineNumber,i.startColumn),rangeLength:this.getValueLengthInRange(i),text:h,eolCount:d,firstLineLength:u,lastLineLength:g,forceMoveMarkers:Boolean(t.forceMoveMarkers),isAutoWhitespaceEdit:t.isAutoWhitespaceEdit||!1}}a.sort(vt._sortOpsAscending);let h=!1;for(let l=0,c=a.length-1;l<c;l++){const e=a[l].range.getEndPosition(),t=a[l+1].range.getStartPosition();if(t.isBeforeOrEqual(e)){if(t.isBefore(e))throw new Error("Overlapping ranges are not allowed!");h=!0}}o&&(a=this._reduceOperations(a));const d=i||t?vt._getInverseEditRanges(a):[],u=[];if(t)for(let c=0;c<a.length;c++){const e=a[c],t=d[c];if(e.isAutoWhitespaceEdit&&e.range.isEmpty())for(let i=t.startLineNumber;i<=t.endLineNumber;i++){let n="";i===t.startLineNumber&&(n=this.getLineContent(e.range.startLineNumber),-1!==l.HG(n))||u.push({lineNumber:i,oldContent:n})}}let g=null;if(i){let e=0;g=[];for(let t=0;t<a.length;t++){const i=a[t],n=d[t],s=this.getValueInRange(i.range),r=i.rangeOffset+e;e+=i.text.length-s.length,g[t]={sortIndex:i.sortIndex,identifier:i.identifier,range:n,text:s,textChange:new _t.k(i.rangeOffset,s,r,i.text)}}h||g.sort(((e,t)=>e.sortIndex-t.sortIndex))}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const p=this._doApplyEdits(a);let f=null;if(t&&u.length>0){u.sort(((e,t)=>t.lineNumber-e.lineNumber)),f=[];for(let e=0,t=u.length;e<t;e++){const t=u[e].lineNumber;if(e>0&&u[e-1].lineNumber===t)continue;const i=u[e].oldContent,n=this.getLineContent(t);0!==n.length&&n!==i&&-1===l.HG(n)&&f.push(t)}}return this._onDidChangeContent.fire(),new v.F4(g,p,f)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,s=new g.Q(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let r=i.startLineNumber,o=i.startColumn;const a=[];for(let c=0,p=e.length;c<p;c++){const i=e[c],n=i.range;t=t||i.forceMoveMarkers,a.push(this.getValueInRange(new g.Q(r,o,n.startLineNumber,n.startColumn))),i.text.length>0&&a.push(i.text),r=n.endLineNumber,o=n.endColumn}const l=a.join(""),[h,d,u]=(0,c.W)(l);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:l,eolCount:h,firstLineLength:d,lastLineLength:u,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(vt._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],s=n.range.startLineNumber,r=n.range.startColumn,o=n.range.endLineNumber,a=n.range.endColumn;if(s===o&&r===a&&0===n.text.length)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const l=new g.Q(s,r,o,a);t.push({range:l,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){const t=[];let i=0,n=0,s=null;for(let r=0,o=e.length;r<o;r++){const o=e[r];let a,l,h;if(s?s.range.endLineNumber===o.range.startLineNumber?(a=i,l=n+(o.range.startColumn-s.range.endColumn)):(a=i+(o.range.startLineNumber-s.range.endLineNumber),l=o.range.startColumn):(a=o.range.startLineNumber,l=o.range.startColumn),o.text.length>0){const e=o.eolCount+1;h=1===e?new g.Q(a,l,a,l+o.firstLineLength):new g.Q(a,l,a+e-1,o.lastLineLength+1)}else h=new g.Q(a,l,a,l);i=h.endLineNumber,n=h.endColumn,t.push(h),s=o}return t}static _sortOpsAscending(e,t){const i=g.Q.compareRangesUsingEnds(e.range,t.range);return 0===i?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=g.Q.compareRangesUsingEnds(e.range,t.range);return 0===i?t.sortIndex-e.sortIndex:-i}}class bt{constructor(e,t,i,n,s,r,o,a,l){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=o,this._isBasicASCII=a,this._normalizeEOL=l}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":i>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let s=0,r=i.length;s<r;s++){const e=i[s].buffer.replace(/\r\n|\r|\n/g,t),n=dt(e);i[s]=new gt(e,n)}const n=new vt(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class yt{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&l.LU(e)&&(this.BOM=l.r_,e=e.substr(1));const t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=function(e,t){e.length=0,e[0]=0;let i=1,n=0,s=0,r=0,o=!0;for(let l=0,h=t.length;l<h;l++){const a=t.charCodeAt(l);13===a?l+1<h&&10===t.charCodeAt(l+1)?(r++,e[i++]=l+2,l++):(n++,e[i++]=l+1):10===a?(s++,e[i++]=l+1):o&&9!==a&&(a<32||a>126)&&(o=!1)}const a=new ct(ht(e),n,s,r,o);return e.length=0,a}(this._tmpLineStarts,e);this.chunks.push(new gt(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=l.E_(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=l.$X(e)))}finish(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._finish(),new bt(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=dt(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}var wt=i(6612),Ct=i(4423),St=i(4470),xt=i(7464),kt=i(8591),Lt=i(1540),Et=i(1340),Mt=i(6807),Tt=i(4959);class Dt{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(0===t)return void this.insert(e,i);if(0===i)return void this.delete(e,t);const n=this._store.slice(0,e),s=this._store.slice(e+t),r=function(e,t){const i=[];for(let n=0;n<e;n++)i[n]=t;return i}(i,this._default);this._store=n.concat(r,s)}delete(e,t){0===t||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(0===t||e>=this._store.length)return;const i=[];for(let n=0;n<t;n++)i[n]=this._default;this._store=(0,n.nK)(this._store,e,i)}}class Nt{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class It{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e)return void i.appendLineTokens(t)}this._tokens.push(new Nt(e,[t]))}finalize(){return this._tokens}}var At=i(5512);class Rt{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new Ot(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class Pt extends Rt{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;const s=this._textModel.getLineContent(n.lineNumber),r=zt(this._languageIdCodec,i,this.tokenizationSupport,s,!0,n.startState);e.add(n.lineNumber,r.tokens),this.store.setEndState(n.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const n=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),o=zt(this._languageIdCodec,n,this.tokenizationSupport,r,!0,i),a=new At.f(o.tokens,r,this._languageIdCodec);if(0===a.getCount())return 0;const l=a.findTokenIndexAtOffset(e.column-1);return a.getStandardTokenType(l)}tokenizeLineWithEdit(e,t,i){const n=e.lineNumber,s=e.column,r=this.getStartState(n);if(!r)return null;const o=this._textModel.getLineContent(n),a=o.substring(0,s-1)+i+o.substring(s-1+t),l=this._textModel.getLanguageIdAtPosition(n,0),h=zt(this._languageIdCodec,l,this.tokenizationSupport,a,!0,r);return new At.f(h.tokens,a,this._languageIdCodec)}hasAccurateTokensForLine(e){return e<this.store.getFirstInvalidEndStateLineNumberOrMax()}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let r=t;r<=i;r++){const t=this._textModel.getLineContent(r),i=zt(this._languageIdCodec,s,this.tokenizationSupport,t,!0,n);e.add(r,i.tokens),n=i.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let n=null;for(let o=e-1;t>1&&o>=1;o--){const e=this._textModel.getLineFirstNonWhitespaceColumn(o);if(0!==e&&(e<t&&(i.push(this._textModel.getLineContent(o)),t=e,n=this.getStartState(o),n)))break}n||(n=this.tokenizationSupport.getInitialState()),i.reverse();const s=this._textModel.getLanguageId();let r=n;for(const o of i){r=zt(this._languageIdCodec,s,this.tokenizationSupport,o,!1,r).endState}return r}}class Ot{constructor(e){this.lineCount=e,this._tokenizationStateStore=new Ft,this._invalidEndStatesLineNumbers=new Bt,this._invalidEndStatesLineNumbers.addRange(new Mt.L(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new r.D7("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Mt.L(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Mt.L(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[e]=(0,c.W)(t.text);this.acceptChange(new wt.M(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Mt.L(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return null===this._invalidEndStatesLineNumbers.min}getStartState(e,t){return 1===e?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(null===t)return null;const i=this.getStartState(t,e);if(!i)throw new r.D7("Start state must be defined");return{lineNumber:t,startState:i}}}class Ft{constructor(){this._lineEndStates=new Dt(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return(!i||!i.equals(t))&&(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class Bt{constructor(){this._ranges=[]}get min(){return 0===this._ranges.length?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex((t=>t.contains(e)));if(-1!==t){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Mt.L(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new Mt.L(i.start,e):this._ranges.splice(t,1,new Mt.L(i.start,e),new Mt.L(e+1,i.endExclusive))}}addRange(e){Mt.L.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;const s=t-e.length;for(let r=n;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(s);if(i===n){const n=new Mt.L(e.start,e.start+t);n.isEmpty||this._ranges.splice(i,0,n)}else{const t=Math.min(e.start,this._ranges[i].start),r=Math.max(e.endExclusive,this._ranges[n-1].endExclusive),o=new Mt.L(t,r+s);o.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,o)}}toString(){return this._ranges.map((e=>e.toString())).join(" + ")}}function zt(e,t,i,n,s,o){let a=null;if(i)try{a=i.tokenizeEncoded(n,s,o.clone())}catch(l){(0,r.dz)(l)}return a||(a=(0,Tt.Lh)(e.encodeLanguageId(t),o)),At.f.convertToEndOffset(a.tokens,n.length),a}class Vt{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,(0,kt.$6)((e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)})))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{!this._isDisposed&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?(0,Lt._p)(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new It,i=Et.W.create(!1);do{if(i.elapsed()>1)break;if(this._tokenizeOneInvalidLine(t)>=e)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new wt.M(e,t))}}class Wt{constructor(){this._onDidChangeVisibleRanges=new o.vl,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new Ht((t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})}));return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class Ht{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map((e=>new wt.M(e.startLineNumber,e.endLineNumber+1)));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class Ut extends a.jG{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new kt.uC((()=>this.update()),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){(0,n.aI)(this._computedLineRanges,this._lineRanges,((e,t)=>e.equals(t)))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class jt extends a.jG{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new o.vl),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new o.vl),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class Gt extends jt{constructor(e,t,i,n){super(t,i,n),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();this._tokenizationSupport&&this._lastLanguageId===e||(this._lastLanguageId=e,this._tokenizationSupport=St.OB.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new At.f(i,t,this._languageIdCodec)}return At.f.createEmpty(t,this._languageIdCodec)}resetTokenization(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return void 0!==this._treeSitterService.getParseResult(this._textModel)}}var Kt=i(4051);const $t=new Uint32Array(0).buffer;class qt{static deleteBeginning(e,t){return null===e||e===$t?e:qt.delete(e,0,t)}static deleteEnding(e,t){if(null===e||e===$t)return e;const i=Qt(e),n=i[i.length-2];return qt.delete(e,t,n)}static delete(e,t,i){if(null===e||e===$t||t===i)return e;const n=Qt(e),s=n.length>>>1;if(0===t&&n[n.length-2]===i)return $t;const r=At.f.findIndexInTokensArray(n,t),o=r>0?n[r-1<<1]:0;if(i<n[r<<1]){const o=i-t;for(let e=r;e<s;e++)n[e<<1]-=o;return e}let a,l;o!==t?(n[r<<1]=t,a=r+1<<1,l=t):(a=r<<1,l=o);const h=i-t;for(let d=r+1;d<s;d++){const e=n[d<<1]-h;e>l&&(n[a++]=e,n[a++]=n[1+(d<<1)],l=e)}if(a===n.length)return e;const c=new Uint32Array(a);return c.set(n.subarray(0,a),0),c.buffer}static append(e,t){if(t===$t)return e;if(e===$t)return t;if(null===e)return e;if(null===t)return null;const i=Qt(e),n=Qt(t),s=n.length>>>1,r=new Uint32Array(i.length+n.length);r.set(i,0);let o=i.length;const a=i[i.length-2];for(let l=0;l<s;l++)r[o++]=n[l<<1]+a,r[o++]=n[1+(l<<1)];return r.buffer}static insert(e,t,i){if(null===e||e===$t)return e;const n=Qt(e),s=n.length>>>1;let r=At.f.findIndexInTokensArray(n,t);if(r>0){n[r-1<<1]===t&&r--}for(let o=r;o<s;o++)n[o<<1]+=i;return e}}function Qt(e){return e instanceof Uint32Array?e:new Uint32Array(e)}class Xt{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),null!==n&&n!==$t)return new At.f(Qt(n),i,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=i.length,s[1]=Yt(this._languageIdCodec.encodeLanguageId(e)),new At.f(s,i,this._languageIdCodec)}static _massageTokens(e,t,i){const n=i?Qt(i):null;if(0===t){let t=!1;if(n&&n.length>1&&(t=U.x.getLanguageId(n[1])!==e),!t)return $t}if(!n||0===n.length){const i=new Uint32Array(2);return i[0]=t,i[1]=Yt(e),i.buffer}return n[n.length-2]=t,0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;const i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=n.nK(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,s){const r=Xt._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);const o=this._lineTokens[t];return this._lineTokens[t]=r,!!s&&!Xt._equals(o,r)}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Qt(e),n=Qt(t);if(i.length!==n.length)return!1;for(let s=0,r=i.length;s<r;s++)if(i[s]!==n[s])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new u.y(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=qt.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=qt.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=qt.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=qt.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(0===t&&0===i)return;const n=e.lineNumber-1;n>=this._len||(0!==t?(this._lineTokens[n]=qt.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=qt.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)):this._lineTokens[n]=qt.insert(this._lineTokens[n],e.column-1,i))}setMultilineTokens(e,t){if(0===e.length)return{changes:[]};const i=[];for(let n=0,s=e.length;n<s;n++){const s=e[n];let r=0,o=0,a=!1;for(let e=s.startLineNumber;e<=s.endLineNumber;e++)if(a)this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!1),o=e;else{this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!0)&&(a=!0,r=e,o=e)}a&&i.push({fromLineNumber:r,toLineNumber:o})}return{changes:i}}}function Yt(e){return(32768|e|2<<24|1024)>>>0}class Zt{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const n=t[0].getRange(),s=t[t.length-1].getRange();if(!n||!s)return e;i=e.plusRange(n).plusRange(s)}let s=null;for(let n=0,r=this._pieces.length;n<r;n++){const e=this._pieces[n];if(e.endLineNumber<i.startLineNumber)continue;if(e.startLineNumber>i.endLineNumber){s=s||{index:n};break}if(e.removeTokens(i),e.isEmpty()){this._pieces.splice(n,1),n--,r--;continue}if(e.endLineNumber<i.startLineNumber)continue;if(e.startLineNumber>i.endLineNumber){s=s||{index:n};continue}const[t,o]=e.split(i);t.isEmpty()?s=s||{index:n}:o.isEmpty()||(this._pieces.splice(n,1,t,o),n++,r++,s=s||{index:n})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=n.nK(this._pieces,s.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(0===t.getLineContent().length)return t;const i=this._pieces;if(0===i.length)return t;const n=i[Zt._findFirstPieceWithLine(i,e)].getLineTokens(e);if(!n)return t;const s=t.getCount(),r=n.getCount();let o=0;const a=[];let l=0,h=0;const c=(e,t)=>{e!==h&&(h=e,a[l++]=e,a[l++]=t)};for(let d=0;d<r;d++){const e=n.getStartCharacter(d),i=n.getEndCharacter(d),r=n.getMetadata(d),a=((1&r?2048:0)|(2&r?4096:0)|(4&r?8192:0)|(8&r?16384:0)|(16&r?16744448:0)|(32&r?4278190080:0))>>>0,l=~a>>>0;for(;o<s&&t.getEndOffset(o)<=e;)c(t.getEndOffset(o),t.getMetadata(o)),o++;for(o<s&&t.getStartOffset(o)<e&&c(e,t.getMetadata(o));o<s&&t.getEndOffset(o)<i;)c(t.getEndOffset(o),t.getMetadata(o)&l|r&a),o++;if(o<s)c(i,t.getMetadata(o)&l|r&a),t.getEndOffset(o)===i&&o++;else{const e=Math.min(Math.max(0,o-1),s-1);c(i,t.getMetadata(e)&l|r&a)}}for(;o<s;)c(t.getEndOffset(o),t.getMetadata(o)),o++;return new At.f(new Uint32Array(a),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let s=i+Math.floor((n-i)/2);if(e[s].endLineNumber<t)i=s+1;else{if(!(e[s].startLineNumber>t)){for(;s>i&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}n=s-1}}return i}acceptEdit(e,t,i,n,s){for(const r of this._pieces)r.acceptEdit(e,t,i,n,s)}}var Jt,ei=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},ti=function(e,t){return function(i,n){t(i,n,e)}};let ii=Jt=class extends xt._{constructor(e,t,i,n,s,r,l){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=n,this._languageService=s,this._languageConfigurationService=r,this._treeSitterService=l,this._semanticTokens=new Zt(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new o.vl),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new o.vl),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new o.vl),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new a.Cm),this._register(this._languageConfigurationService.onDidChange((e=>{e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}))),this._register(o.Jh.filter(St.OB.onDidChange,(e=>e.changedLanguages.includes(this._languageId)))((()=>{this.createPreferredTokenProvider()}))),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new ni(this._languageService.languageIdCodec,this._textModel,(()=>this._languageId),this._attachedViews))}createTreeSitterTokens(){return this._register(new Gt(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,(()=>this._languageId)))}createTokens(e){const t=void 0!==this._tokens;this._tokens?.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens((e=>{this._emitModelTokensChangedEvent(e)}))),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState((e=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){St.OB.get(this._languageId)?this._tokens instanceof Gt||this.createTokens(!0):this._tokens instanceof ni||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[e,i,n]=(0,c.W)(t.text);this._semanticTokens.acceptEdit(t.range,e,i,n,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new r.D7("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),s=n.findTokenIndexAtOffset(t.column-1),[r,o]=Jt._findLanguageBoundaries(n,s),a=(0,Ct.Th)(t.column,this.getLanguageConfiguration(n.getLanguageId(s)).getWordDefinition(),i.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(s>0&&r===t.column-1){const[r,o]=Jt._findLanguageBoundaries(n,s-1),a=(0,Ct.Th)(t.column,this.getLanguageConfiguration(n.getLanguageId(s-1)).getWordDefinition(),i.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)n=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,o=e.getCount();r<o&&e.getLanguageId(r)===i;r++)s=e.getEndOffset(r);return[n,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new u.y(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};ii=Jt=ei([ti(4,m.L),ti(5,_.JZ),ti(6,Kt.ITreeSitterParserService)],ii);class ni extends jt{constructor(e,t,i,n){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new a.HE),this._tokens=new Xt(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new a.HE),this._attachedViewStates=this._register(new a.$w),this._register(St.dG.onDidChange((e=>{const t=this.getLanguageId();-1!==e.changedLanguages.indexOf(t)&&this.resetTokenization()}))),this.resetTokenization(),this._register(n.onDidChangeVisibleRanges((e=>{let{view:t,state:i}=e;if(i){let e=this._attachedViewStates.get(t);e||(e=new Ut((()=>this.refreshRanges(e.lineRanges))),this._attachedViewStates.set(t,e)),e.handleStateChange(i)}else this._attachedViewStates.deleteAndDispose(t)})))}resetTokenization(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Ot(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const[t,i]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const e=St.dG.get(this.getLanguageId());if(!e)return[null,null];let t;try{t=e.getInitialState()}catch(i){return(0,r.dz)(i),[null,null]}return[e,t]})();if(this._tokenizer=t&&i?new Pt(this._textModel.getLineCount(),t,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const e={setTokens:e=>{this.setTokens(e)},backgroundTokenizationFinished:()=>{if(2===this._backgroundTokenizationState)return;this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(e,t)=>{if(!this._tokenizer)return;const i=this._tokenizer.store.getFirstInvalidEndStateLineNumber();null!==i&&e>=i&&this._tokenizer?.store.setEndState(e,t)}};t&&t.createBackgroundTokenizer&&!t.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,e)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Vt(this._tokenizer,e),this._defaultBackgroundTokenizer.handleChanges()),t?.backgroundTokenizerShouldOnlyVerifyTokens&&t.createBackgroundTokenizer?(this._debugBackgroundTokens=new Xt(this._languageIdCodec),this._debugBackgroundStates=new Ot(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,{setTokens:e=>{this._debugBackgroundTokens?.setMultilineTokens(e,this._textModel)},backgroundTokenizationFinished(){},setEndState:(e,t)=>{this._debugBackgroundStates?.setEndState(e,t)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[e,i]=(0,c.W)(t.text);this._tokens.acceptEdit(t.range,e,i),this._debugBackgroundTokens?.acceptEdit(t.range,e,i)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=wt.M.joinMany([...this._attachedViewStates].map((e=>{let[t,i]=e;return i.lineRanges})));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new It,{heuristicTokens:n}=this._tokenizer.tokenizeHeuristically(i,e,t),s=this.setTokens(i.finalize());if(n)for(const r of s.changes)this._backgroundTokenizer.value?.requestTokens(r.fromLineNumber,r.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new It;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return!this._tokenizer||this._tokenizer.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return!this._tokenizer||this._tokenizer.isCheapToTokenize(e)}getLineTokens(e){const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const n=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(n)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const n=this._textModel.validatePosition(new u.y(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const n=this._textModel.validatePosition(e);return this.forceTokenization(n.lineNumber),this._tokenizer.tokenizeLineWithEdit(n,t,i)}get hasTokens(){return this._tokens.hasTokens}}var si,ri=i(7638),oi=i(9398),ai=i(5582),li=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},hi=function(e,t){return function(i,n){t(i,n,e)}};function ci(e,t){let i;return i="string"===typeof e?function(e){const t=new yt;return t.acceptChunk(e),t.finish()}(e):v.nk(e)?function(e){const t=new yt;let i;for(;"string"===typeof(i=e.read());)t.acceptChunk(i);return t.finish()}(e):e,i.create(t)}let di=0;class ui{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;for(;;){const n=this._source.read();if(null===n)return this._eos=!0,0===t?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=65536)return e.join("")}}}const gi=()=>{throw new Error("Invalid change accessor")};let pi=class extends a.jG{static#e=(()=>si=this)();static#t=(()=>this._MODEL_SYNC_LIMIT=52428800)();static#i=(()=>this.LARGE_FILE_SIZE_THRESHOLD=20971520)();static#n=(()=>this.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5)();static#s=(()=>this.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456)();static#r=(()=>this.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:f.R.tabSize,indentSize:f.R.indentSize,insertSpaces:f.R.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:f.R.trimAutoWhitespace,largeFileOptimizations:f.R.largeFileOptimizations,bracketPairColorizationOptions:f.R.bracketPairColorizationOptions})();static resolveOptions(e,t){if(t.detectIndentation){const i=Se(e,t.tabSize,t.insertSpaces);return new v.X2({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new v.X2(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent((t=>e(t.contentChangedEvent)))}onDidChangeContentOrInjectedText(e){return(0,a.qE)(this._eventEmitter.fastEvent((t=>e(t))),this._onDidChangeInjectedText.event((t=>e(t))))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0;super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=c,this.instantiationService=d,this._onWillDispose=this._register(new o.vl),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new Ei((e=>this.handleBeforeFireDecorationsChangedEvent(e)))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new o.vl),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new o.vl),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new o.vl),this._eventEmitter=this._register(new Mi),this._languageSelectionListener=this._register(new a.HE),this._deltaDecorationCallCnt=0,this._attachedViews=new Wt,di++,this.id="$model"+di,this.isForSimpleWidget=i.isForSimpleWidget,this._associatedResource="undefined"===typeof n||null===n?h.r.parse("inmemory://model/"+di):n,this._attachedEditorCount=0;const{textBuffer:u,disposable:p}=ci(e,i.defaultEOL);this._buffer=u,this._bufferDisposable=p,this._options=si.resolveOptions(this._buffer,i);const f="string"===typeof t?t:t.languageId;"string"!==typeof t&&(this._languageSelectionListener.value=t.onDidChange((()=>this._setLanguage(t.languageId)))),this._bracketPairs=this._register(new de(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new ye.P(this,this._languageConfigurationService)),this._decorationProvider=this._register(new _e(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(ii,this,this._bracketPairs,f,this._attachedViews);const m=this._buffer.getLineCount(),_=this._buffer.getValueLengthInRange(new g.Q(1,1,m,this._buffer.getLineLength(m)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=_>si.LARGE_FILE_SIZE_THRESHOLD||m>si.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=_>si.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=_>si._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=l.tk(di),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new _i,this._commandManager=new be.z8(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange((()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))),this._languageService.requestRichLanguageFeatures(f),this._register(this._languageConfigurationService.onDidChange((e=>{this._bracketPairs.handleLanguageConfigurationServiceChange(e),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(e)})))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new vt([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=a.jG.None}_assertNotDisposed(){if(this._isDisposed)throw new r.D7("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new ri.Ic(e,t)))}setValue(e){if(this._assertNotDisposed(),null===e||void 0===e)throw(0,r.Qg)();const{textBuffer:t,disposable:i}=ci(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,s,r,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),isEolChange:a,versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:o}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new _i,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new ri.HP([new ri.Wn],this._versionId,!1,!1),this._createContentChanged2(new g.Q(1,1,s,r),0,n,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new ri.HP([new ri.mS],this._versionId,!1,!1),this._createContentChanged2(new g.Q(1,1,s,r),0,n,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const n=t[i],s=n.range,r=n.cachedAbsoluteStart-n.start,o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);n.cachedAbsoluteStart=o,n.cachedAbsoluteEnd=a,n.cachedVersionId=e,n.start=o-r,n.end=a-r,Ge(n)}}onBeforeAttached(){return this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const i=this._buffer.getLineLength(n);i>=1e4?t+=i:e+=i}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t="undefined"!==typeof e.tabSize?e.tabSize:this._options.tabSize,i="undefined"!==typeof e.indentSize?e.indentSize:this._options.originalIndentSize,n="undefined"!==typeof e.insertSpaces?e.insertSpaces:this._options.insertSpaces,s="undefined"!==typeof e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r="undefined"!==typeof e.bracketColorizationOptions?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,o=new v.X2({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(o))return;const a=this._options.createChangeEvent(o);this._options=o,this._bracketPairs.handleDidChangeOptions(a),this._decorationProvider.handleDidChangeOptions(a),this._onDidChangeOptions.fire(a)}detectIndentation(e,t){this._assertNotDisposed();const i=Se(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),(0,d.P)(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.findMatches(l._J.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map((e=>({range:e.range,text:null}))),(()=>null))}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new r.D7("Operation would exceed heap memory limits");const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ui(this._buffer.createSnapshot(e))}getValueLength(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new r.D7("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new r.D7("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new r.D7("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new r.D7("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new r.D7("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new r.D7("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let s=Math.floor("number"!==typeof i||isNaN(i)?1:i),r=Math.floor("number"!==typeof n||isNaN(n)?1:n);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const e=this.getLineMaxColumn(s);r>=e&&(r=e)}const o=e.endLineNumber,a=e.endColumn;let l=Math.floor("number"!==typeof o||isNaN(o)?1:o),h=Math.floor("number"!==typeof a||isNaN(a)?1:a);if(l<1)l=1,h=1;else if(l>t)l=t,h=this.getLineMaxColumn(l);else if(h<=1)h=1;else{const e=this.getLineMaxColumn(l);h>=e&&(h=e)}return i===s&&n===r&&o===l&&a===h&&e instanceof g.Q&&!(e instanceof p.L)?e:new g.Q(s,r,l,h)}_isValidPosition(e,t,i){if("number"!==typeof e||"number"!==typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(1===t)return!0;if(t>this.getLineMaxColumn(e))return!1;if(1===i){const i=this._buffer.getLineCharCode(e,t-2);if(l.pc(i))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor("number"!==typeof e||isNaN(e)?1:e),s=Math.floor("number"!==typeof t||isNaN(t)?1:t),r=this._buffer.getLineCount();if(n<1)return new u.y(1,1);if(n>r)return new u.y(r,this.getLineMaxColumn(r));if(s<=1)return new u.y(n,1);const o=this.getLineMaxColumn(n);if(s>=o)return new u.y(n,o);if(1===i){const e=this._buffer.getLineCharCode(n,s-2);if(l.pc(e))return new u.y(n,s-1)}return new u.y(n,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof u.y&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,n,0))return!1;if(!this._isValidPosition(s,r,0))return!1;if(1===t){const e=n>1?this._buffer.getLineCharCode(i,n-2):0,t=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,o=l.pc(e),a=l.pc(t);return!o&&!a}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof g.Q&&!(e instanceof p.L)&&this._isValidRange(e,1))return e;const t=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),n=t.lineNumber,s=t.column,r=i.lineNumber,o=i.column;{const e=s>1?this._buffer.getLineCharCode(n,s-2):0,t=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,i=l.pc(e),a=l.pc(t);return i||a?n===r&&s===o?new g.Q(n,s-1,r,o-1):i&&a?new g.Q(n,s-1,r,o+1):i?new g.Q(n,s-1,r,o):new g.Q(n,s,r,o+1):new g.Q(n,s,r,o)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new g.Q(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:999;this._assertNotDisposed();let a=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every((e=>g.Q.isIRange(e)))&&(a=t.map((e=>this.validateRange(e))))),null===a&&(a=[this.getFullModelRange()]),a=a.sort(((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn));const l=[];let h;if(l.push(a.reduce(((e,t)=>g.Q.areIntersecting(e,t)?e.plusRange(t):(l.push(e),t)))),!i&&e.indexOf("\n")<0){const t=new at.lt(e,i,n,s).parseSearchRequest();if(!t)return[];h=e=>this.findMatchesLineByLine(e,t,r,o)}else h=t=>at.hB.findMatches(this,new at.lt(e,i,n,s),t,r,o);return l.map(h).reduce(((e,t)=>e.concat(t)),[])}findNextMatch(e,t,i,n,s,r){this._assertNotDisposed();const o=this.validatePosition(t);if(!i&&e.indexOf("\n")<0){const t=new at.lt(e,i,n,s).parseSearchRequest();if(!t)return null;const a=this.getLineCount();let l=new g.Q(o.lineNumber,o.column,a,this.getLineMaxColumn(a)),h=this.findMatchesLineByLine(l,t,r,1);return at.hB.findNextMatch(this,new at.lt(e,i,n,s),o,r),h.length>0?h[0]:(l=new g.Q(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),h=this.findMatchesLineByLine(l,t,r,1),h.length>0?h[0]:null)}return at.hB.findNextMatch(this,new at.lt(e,i,n,s),o,r)}findPreviousMatch(e,t,i,n,s,r){this._assertNotDisposed();const o=this.validatePosition(t);return at.hB.findPreviousMatch(this,new at.lt(e,i,n,s),o,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof v.Wo?e:new v.Wo(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const i=t.map((e=>({range:this.validateRange(e.range),text:e.text})));let n=!0;if(e)for(let t=0,s=e.length;t<s;t++){const s=e[t];let r=!1;for(let e=0,t=i.length;e<t;e++){const t=i[e].range,n=t.startLineNumber>s.endLineNumber,o=s.startLineNumber>t.endLineNumber;if(!n&&!o){r=!0;break}}if(!r){n=!1;break}}if(n)for(let e=0,s=this._trimAutoWhitespaceLines.length;e<s;e++){const n=this._trimAutoWhitespaceLines[e],s=this.getLineMaxColumn(n);let r=!0;for(let e=0,t=i.length;e<t;e++){const t=i[e].range,o=i[e].text;if(!(n<t.startLineNumber||n>t.endLineNumber)&&(!(n===t.startLineNumber&&t.startColumn===s&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(0))&&!(n===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(o.length-1)))){r=!1;break}}if(r){const e=new g.Q(n,1,n,s);t.push(new v.Wo(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n)}_applyUndo(e,t,i,n){const s=e.map((e=>{const t=this.getPositionAt(e.newPosition),i=this.getPositionAt(e.newEnd);return{range:new g.Q(t.lineNumber,t.column,i.lineNumber,i.column),text:e.oldText}}));this._applyUndoRedoEdits(s,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const s=e.map((e=>{const t=this.getPositionAt(e.oldPosition),i=this.getPositionAt(e.oldEnd);return{range:new g.Q(t.lineNumber,t.column,i.lineNumber,i.column),text:e.newText}}));this._applyUndoRedoEdits(s,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,0!==o.length){for(let i=0,n=o.length;i<n;i++){const e=o[i];this._decorationsTree.acceptReplace(e.rangeOffset,e.rangeLength,e.text.length,e.forceMoveMarkers)}const e=[];this._increaseVersionId();let t=i;for(let i=0,s=o.length;i<s;i++){const s=o[i],[a]=(0,c.W)(s.text);this._onDidChangeDecorations.fire();const l=s.range.startLineNumber,h=s.range.endLineNumber,d=h-l,g=a,p=Math.min(d,g),f=g-d,m=r-t-f+l,_=m,v=m+g,b=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new u.y(_,1)),this.getOffsetAt(new u.y(v,this.getLineMaxColumn(v))),0),y=ri.uK.fromDecorations(b),w=new n.j3(y);for(let t=p;t>=0;t--){const i=l+t,n=m+t;w.takeFromEndWhile((e=>e.lineNumber>n));const s=w.takeFromEndWhile((e=>e.lineNumber===n));e.push(new ri.U0(i,this.getLineContent(n),s))}if(p<d){const t=l+p;e.push(new ri.E$(t+1,h))}if(p<g){const i=new n.j3(y),s=l+p,o=g-p,a=r-t-o+s+1,h=[],c=[];for(let e=0;e<o;e++){const t=a+e;c[e]=this.getLineContent(t),i.takeWhile((e=>e.lineNumber<t)),h[e]=i.takeWhile((e=>e.lineNumber===t))}e.push(new ri.bg(s+1,l+g,c,h))}t+=f}this._emitContentChangedEvent(new ri.HP(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===s.reverseEdits?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(null===e||0===e.size)return;const t=Array.from(e).map((e=>new ri.U0(e,this.getLineContent(e),this._getInjectedTextInLine(e))));this._onDidChangeInjectedText.fire(new ri.vn(t))}changeDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(t,i)=>this._deltaDecorationsImpl(e,[],[{range:t,options:i}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,Li(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,i)=>0===t.length&&0===i.length?[]:this._deltaDecorationsImpl(e,t,i)};let n=null;try{n=t(i)}catch(s){(0,r.dz)(s)}return i.addDecoration=gi,i.changeDecoration=gi,i.changeDecorationOptions=gi,i.removeDecoration=gi,i.deltaDecorations=gi,n}deltaDecorations(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),(0,r.dz)(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:ki[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),n.setOptions(ki[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){const e=t[i];this._decorationsTree.delete(e),delete this._decorations[e.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),h=this.getLineMaxColumn(l),c=new g.Q(a,1,l,h),d=this._getDecorationsInRange(c,i,s,r);return(0,n.E4)(d,this._decorationProvider.getDecorationsInRange(c,i,s)),d}getDecorationsInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,i,r);return(0,n.E4)(a,this._decorationProvider.getDecorationsInRange(o,t,i,s)),a}getOverviewRulerDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return ri.uK.fromDecorations(n).filter((t=>t.lineNumber===e))}getAllDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,n){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,i,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(i.options.before){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}const n=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),r=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,r,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const n=!(!i.options.overviewRuler||!i.options.overviewRuler.color),s=!(!t.overviewRuler||!t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const e=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(i.options.before||t.before){const e=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}const r=n!==s,o=function(e){return!!e.after||!!e.before}(t)!==mi(i);r||o?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=this.getVersionId(),r=t.length;let o=0;const a=i.length;let l=0;this._onDidChangeDecorations.beginDeferredEmit();try{const h=new Array(a);for(;o<r||l<a;){let c=null;if(o<r){do{c=this._decorations[t[o++]]}while(!c&&o<r);if(c){if(c.options.after){const e=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(c.options.before){const e=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}this._decorationsTree.delete(c),n||this._onDidChangeDecorations.checkAffectedAndFire(c.options)}}if(l<a){if(!c){const e=++this._lastDecorationId,t=`${this._instanceId};${e}`;c=new Re(t,0,0),this._decorations[t]=c}const t=i[l],r=this._validateRangeRelaxedNoAllocations(t.range),o=Li(t.options),a=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),d=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);c.ownerId=e,c.reset(s,a,d,r),c.setOptions(o),c.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),c.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(o),this._decorationsTree.insert(c),h[l]=c.id,l++}else c&&delete this._decorations[c.id]}return h}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){"string"===typeof e?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange((()=>this._setLanguage(e.languageId,t))),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return function(e){let t=0;for(const i of e){if(" "!==i&&"\t"!==i)break;t++}return t}(this.getLineContent(e))+1}};function fi(e){return!(!e.options.overviewRuler||!e.options.overviewRuler.color)}function mi(e){return!!e.options.after||!!e.options.before}pi=si=li([hi(4,ai.$D),hi(5,m.L),hi(6,_.JZ),hi(7,oi._Y)],pi);class _i{constructor(){this._decorationsTree0=new Oe,this._decorationsTree1=new Oe,this._injectedTextDecorationsTree=new Oe}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)null===i.range&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,s,r){const o=e.getVersionId(),a=this._intervalSearch(t,i,n,s,o,r);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,i,n,s,r){const o=this._decorationsTree0.intervalSearch(e,t,i,n,s,r),a=this._decorationsTree1.intervalSearch(e,t,i,n,s,r),l=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,s,r);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,i,n){const s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,s,!1);return this._ensureNodesHaveRanges(e,r).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAllInjectedText(e,t){const i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAll(e,t,i,n,s){const r=e.getVersionId(),o=this._search(t,i,n,r,s);return this._ensureNodesHaveRanges(e,o)}_search(e,t,i,n,s){if(i)return this._decorationsTree1.search(e,t,n,s);{const i=this._decorationsTree0.search(e,t,n,s),r=this._decorationsTree1.search(e,t,n,s),o=this._injectedTextDecorationsTree.search(e,t,n,s);return i.concat(r).concat(o)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){mi(e)?this._injectedTextDecorationsTree.insert(e):fi(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){mi(e)?this._injectedTextDecorationsTree.delete(e):fi(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),null===t.range&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){mi(e)?this._injectedTextDecorationsTree.resolveNode(e,t):fi(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}}function vi(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class bi{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class yi extends bi{constructor(e){super(e),this._resolvedColor=null,this.position="number"===typeof e.position?e.position:v.A5.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"===typeof e)return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class wi{constructor(e){this.position=e?.position??v.ZS.Center,this.persistLane=e?.persistLane}}class Ci extends bi{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"===typeof e?s.Q1.fromHex(e):t.getColor(e.id)}}class Si{static from(e){return e instanceof Si?e:new Si(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class xi{static register(e){return new xi(e)}static createDynamic(e){return new xi(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?vi(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?vi(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new yi(e.overviewRuler):null,this.minimap=e.minimap?new Ci(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new wi(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?vi(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?vi(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?vi(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?l.jy(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?vi(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?vi(e.marginClassName):null,this.inlineClassName=e.inlineClassName?vi(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?vi(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?vi(e.afterContentClassName):null,this.after=e.after?Si.from(e.after):null,this.before=e.before?Si.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}xi.EMPTY=xi.register({description:"empty"});const ki=[xi.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),xi.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),xi.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),xi.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function Li(e){return e instanceof xi?e:xi.createDynamic(e)}class Ei extends a.jG{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new o.vl),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,0===this._deferredCnt&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){0===this._deferredCnt?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class Mi extends a.jG{constructor(){super(),this._fastEmitter=this._register(new o.vl),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new o.vl),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}},7464:(e,t,i)=>{"use strict";i.d(t,{_:()=>s});var n=i(4663);class s extends n.jG{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}},6701:(e,t,i)=>{"use strict";i.d(t,{W5:()=>g,dr:()=>h,hB:()=>d,lt:()=>l,wC:()=>u});var n=i(6637),s=i(9285),r=i(2464),o=i(5902),a=i(2726);class l{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(let t=0,i=e.length;t<i;t++){const n=e.charCodeAt(t);if(10===n)return!0;if(92===n){if(t++,t>=i)break;const n=e.charCodeAt(t);if(110===n||114===n||87===n)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=n.OS(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(r){return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new a.L5(t,this.wordSeparators?(0,s.i)(this.wordSeparators,[]):null,i?this.searchString:null)}}function h(e,t,i){if(!i)return new a.Dg(e,null);const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=t[s];return new a.Dg(e,n)}class c{constructor(e){const t=[];let i=0;for(let n=0,s=e.length;n<s;n++)10===e.charCodeAt(n)&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(-1===n)return 0;if(e<=t[0])return 0;for(;i<n;){const s=i+((n-i)/2|0);t[s]>=e?n=s-1:t[s+1]>=e?(i=s,n=s):i=s+1}return i+1}}class d{static findMatches(e,t,i,n,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new g(r.wordSeparators,r.regex),n,s):this._doFindMatchesLineByLine(e,i,r,n,s):[]}static _getMultilineMatchRange(e,t,i,n,s,r){let a,l,h=0;if(n?(h=n.findLineFeedCountBeforeOffset(s),a=t+s+h):a=t+s,n){const e=n.findLineFeedCountBeforeOffset(s+r.length)-h;l=a+r.length+e}else l=a+r.length;const c=e.getPositionAt(a),d=e.getPositionAt(l);return new o.Q(c.lineNumber,c.column,d.lineNumber,d.column)}static _doFindMatchesMultiline(e,t,i,n,s){const r=e.getOffsetAt(t.getStartPosition()),o=e.getValueInRange(t,1),a="\r\n"===e.getEOL()?new c(o):null,l=[];let d,u=0;for(i.reset(0);d=i.next(o);)if(l[u++]=h(this._getMultilineMatchRange(e,r,o,a,d.index,d[0]),d,n),u>=s)return l;return l}static _doFindMatchesLineByLine(e,t,i,n,s){const r=[];let o=0;if(t.startLineNumber===t.endLineNumber){const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,o,r,n,s),r}const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,o,r,n,s);for(let l=t.startLineNumber+1;l<t.endLineNumber&&o<s;l++)o=this._findMatchesInLine(i,e.getLineContent(l),l,0,o,r,n,s);if(o<s){const a=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(i,a,t.endLineNumber,0,o,r,n,s)}return r}static _findMatchesInLine(e,t,i,n,s,r,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const l=e.simpleSearch,h=l.length,g=t.length;let p=-h;for(;-1!==(p=t.indexOf(l,p+h));)if((!d||u(d,t,g,p,h))&&(r[s++]=new a.Dg(new o.Q(i,p+1+n,i,p+1+h+n),null),s>=c))return s;return s}const p=new g(e.wordSeparators,e.regex);let f;p.reset(0);do{if(f=p.next(t),f&&(r[s++]=h(new o.Q(i,f.index+1+n,i,f.index+1+f[0].length+n),f,l),s>=c))return s}while(f);return s}static findNextMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const r=new g(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,i,r,n):this._doFindNextMatchLineByLine(e,i,r,n)}static _doFindNextMatchMultiline(e,t,i,n){const s=new r.y(t.lineNumber,1),a=e.getOffsetAt(s),l=e.getLineCount(),d=e.getValueInRange(new o.Q(s.lineNumber,s.column,l,e.getLineMaxColumn(l)),1),u="\r\n"===e.getEOL()?new c(d):null;i.reset(t.column-1);const g=i.next(d);return g?h(this._getMultilineMatchRange(e,a,d,u,g.index,g[0]),g,n):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new r.y(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r),a=this._findFirstMatchInLine(i,o,r,t.column,n);if(a)return a;for(let l=1;l<=s;l++){const t=(r+l-1)%s,o=e.getLineContent(t+1),a=this._findFirstMatchInLine(i,o,t+1,1,n);if(a)return a}return null}static _findFirstMatchInLine(e,t,i,n,s){e.reset(n-1);const r=e.next(t);return r?h(new o.Q(i,r.index+1,i,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const r=new g(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,n):this._doFindPreviousMatchLineByLine(e,i,r,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const s=this._doFindMatchesMultiline(e,new o.Q(1,1,t.lineNumber,t.column),i,n,9990);if(s.length>0)return s[s.length-1];const a=e.getLineCount();return t.lineNumber!==a||t.column!==e.getLineMaxColumn(a)?this._doFindPreviousMatchMultiline(e,new r.y(a,e.getLineMaxColumn(a)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r).substring(0,t.column-1),a=this._findLastMatchInLine(i,o,r,n);if(a)return a;for(let l=1;l<=s;l++){const t=(s+r-l-1)%s,o=e.getLineContent(t+1),a=this._findLastMatchInLine(i,o,t+1,n);if(a)return a}return null}static _findLastMatchInLine(e,t,i,n){let s,r=null;for(e.reset(0);s=e.next(t);)r=h(new o.Q(i,s.index+1,i,s.index+1+s[0].length),s,n);return r}}function u(e,t,i,n,s){return function(e,t,i,n,s){if(0===n)return!0;const r=t.charCodeAt(n-1);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const i=t.charCodeAt(n);if(0!==e.get(i))return!0}return!1}(e,t,0,n,s)&&function(e,t,i,n,s){if(n+s===i)return!0;const r=t.charCodeAt(n+s);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const i=t.charCodeAt(n+s-1);if(0!==e.get(i))return!0}return!1}(e,t,i,n,s)}class g{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t)return null;if(i=this._searchRegex.exec(e),!i)return null;const s=i.index,r=i[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(0===r){n.Z5(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||u(this._wordSeparators,e,t,s,r))return i}while(i);return null}}},2212:(e,t,i)=>{"use strict";i.r(t),i.d(t,{KeyMod:()=>u,createMonacoBaseAPI:()=>g});var n=i(1900),s=i(9563),r=i(6648),o=i(4673),a=i(2464),l=i(5902),h=i(7817),c=i(4470),d=i(5372);class u{static#e=(()=>this.CtrlCmd=2048)();static#t=(()=>this.Shift=1024)();static#i=(()=>this.Alt=512)();static#n=(()=>this.WinCtrl=256)();static chord(e,t){return(0,r.m5)(e,t)}}function g(){return{editor:void 0,languages:void 0,CancellationTokenSource:n.Qi,Emitter:s.vl,KeyCode:d.DD,KeyMod:u,Position:a.y,Range:l.Q,Selection:h.L,SelectionDirection:d.SB,MarkerSeverity:d.cj,MarkerTag:d.d_,Uri:o.r,Token:c.ou}}},104:(e,t,i)=>{"use strict";i.r(t),i.d(t,{BaseEditorSimpleWorker:()=>$,EditorSimpleWorker:()=>q,create:()=>Q});var n=i(2395),s=i(5902),r=i(6269);class o{constructor(e,t,i){const n=new Uint8Array(e*t);for(let s=0,r=e*t;s<r;s++)n[s]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class a{constructor(e){let t=0,i=0;for(let s=0,r=e.length;s<r;s++){const[n,r,o]=e[s];r>t&&(t=r),n>i&&(i=n),o>i&&(i=o)}t++,i++;const n=new o(i,t,0);for(let s=0,r=e.length;s<r;s++){const[t,i,r]=e[s];n.set(t,i,r)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let l=null;let h=null;class c{static _createLink(e,t,i,n,s){let r=s-1;do{const i=t.charCodeAt(r);if(2!==e.get(i))break;r--}while(r>n);if(n>0){const e=t.charCodeAt(n-1),i=t.charCodeAt(r);(40===e&&41===i||91===e&&93===i||123===e&&125===i)&&r--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:r+2},url:t.substring(n,r+1)}}static computeLinks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===l&&(l=new a([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),l);const i=function(){if(null===h){h=new r.V(0);const e=" \t<>'\"\u3001\u3002\uff61\uff64\uff0c\uff0e\uff1a\uff1b\u2018\u3008\u300c\u300e\u3014\uff08\uff3b\uff5b\uff62\uff63\uff5d\uff3d\uff09\u3015\u300f\u300d\u3009\u2019\uff40\uff5e\u2026";for(let i=0;i<e.length;i++)h.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)h.set(t.charCodeAt(i),2)}return h}(),n=[];for(let s=1,r=e.getLineCount();s<=r;s++){const r=e.getLineContent(s),o=r.length;let a=0,l=0,h=0,d=1,u=!1,g=!1,p=!1,f=!1;for(;a<o;){let e=!1;const o=r.charCodeAt(a);if(13===d){let t;switch(o){case 40:u=!0,t=0;break;case 41:t=u?0:1;break;case 91:p=!0,g=!0,t=0;break;case 93:p=!1,t=g?0:1;break;case 123:f=!0,t=0;break;case 125:t=f?0:1;break;case 39:case 34:case 96:t=h===o?1:39===h||34===h||96===h?0:1;break;case 42:t=42===h?1:0;break;case 124:t=124===h?1:0;break;case 32:t=p?0:1;break;default:t=i.get(o)}1===t&&(n.push(c._createLink(i,r,s,l,a)),e=!0)}else if(12===d){let t;91===o?(g=!0,t=0):t=i.get(o),1===t?e=!0:d=13}else d=t.nextState(d,o),0===d&&(e=!0);e&&(d=1,u=!1,g=!1,f=!1,l=a+1,h=o),a++}13===d&&n.push(c._createLink(i,r,s,l,o))}return n}}class d{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}static#e=(()=>this.INSTANCE=new d)();navigateValueSet(e,t,i,n,s){if(e&&t){const i=this.doNavigateValueSet(t,s);if(i)return{range:e,value:i}}if(i&&n){const e=this.doNavigateValueSet(n,s);if(e)return{range:i,value:e}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return null!==i?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let n=Number(e);const s=parseFloat(e);return isNaN(n)||isNaN(s)||n!==s?null:0!==n||t?(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let s=0,r=e.length;null===n&&s<r;s++)n=this.valueSetReplace(e[s],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}}var u=i(2212),g=i(9487),p=i(1340),f=i(3072),m=i(810),_=i(3534),v=i(6637),b=i(7289),y=i(6612);class w{computeDiff(e,t,i){const n=new E(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[];let o=null;for(const a of n.changes){let e,t;e=0===a.originalEndLineNumber?new y.M(a.originalStartLineNumber+1,a.originalStartLineNumber+1):new y.M(a.originalStartLineNumber,a.originalEndLineNumber+1),t=0===a.modifiedEndLineNumber?new y.M(a.modifiedStartLineNumber+1,a.modifiedStartLineNumber+1):new y.M(a.modifiedStartLineNumber,a.modifiedEndLineNumber+1);let i=new _.wm(e,t,a.charChanges?.map((e=>new _.q6(new s.Q(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),new s.Q(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)))));o&&(o.modified.endLineNumberExclusive!==i.modified.startLineNumber&&o.original.endLineNumberExclusive!==i.original.startLineNumber||(i=new _.wm(o.original.join(i.original),o.modified.join(i.modified),o.innerChanges&&i.innerChanges?o.innerChanges.concat(i.innerChanges):void 0),r.pop())),r.push(i),o=i}return(0,b.Ft)((()=>(0,b.Xo)(r,((e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive===t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber)))),new m.p(r,[],n.quitEarly)}}function C(e,t,i,s){return new n.uP(e,t,i).ComputeDiff(s)}class S{constructor(e){const t=[],i=[];for(let n=0,s=e.length;n<s;n++)t[n]=M(e[n],1),i[n]=T(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],s=[],r=[];let o=0;for(let a=t;a<=i;a++){const t=this.lines[a],l=e?this._startColumns[a]:1,h=e?this._endColumns[a]:t.length+1;for(let e=l;e<h;e++)n[o]=t.charCodeAt(e-1),s[o]=a+1,r[o]=e,o++;!e&&a<i&&(n[o]=10,s[o]=a+1,r[o]=t.length+1,o++)}return new x(n,s,r)}}class x{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map(((e,t)=>(10===e?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`)).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return-1===e?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),10===this._charCodes[e]?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return-1===e?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),10===this._charCodes[e]?1:this._columns[e]+1)}}class k{constructor(e,t,i,n,s,r,o,a){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=s,this.modifiedStartColumn=r,this.modifiedEndLineNumber=o,this.modifiedEndColumn=a}static createFromDiffChange(e,t,i){const n=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),o=t.getEndColumn(e.originalStart+e.originalLength-1),a=i.getStartLineNumber(e.modifiedStart),l=i.getStartColumn(e.modifiedStart),h=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),c=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new k(n,s,r,o,a,l,h,c)}}class L{constructor(e,t,i,n,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=s}static createFromDiffResult(e,t,i,n,s,r,o){let a,l,h,c,d;if(0===t.originalLength?(a=i.getStartLineNumber(t.originalStart)-1,l=0):(a=i.getStartLineNumber(t.originalStart),l=i.getEndLineNumber(t.originalStart+t.originalLength-1)),0===t.modifiedLength?(h=n.getStartLineNumber(t.modifiedStart)-1,c=0):(h=n.getStartLineNumber(t.modifiedStart),c=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const r=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),a=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(r.getElements().length>0&&a.getElements().length>0){let e=C(r,a,s,!0).changes;o&&(e=function(e){if(e.length<=1)return e;const t=[e[0]];let i=t[0];for(let n=1,s=e.length;n<s;n++){const s=e[n],r=s.originalStart-(i.originalStart+i.originalLength),o=s.modifiedStart-(i.modifiedStart+i.modifiedLength);Math.min(r,o)<3?(i.originalLength=s.originalStart+s.originalLength-i.originalStart,i.modifiedLength=s.modifiedStart+s.modifiedLength-i.modifiedStart):(t.push(s),i=s)}return t}(e)),d=[];for(let t=0,i=e.length;t<i;t++)d.push(k.createFromDiffChange(e[t],r,a))}}return new L(a,l,h,c,d)}}class E{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new S(e),this.modified=new S(t),this.continueLineDiff=D(i.maxComputationTime),this.continueCharDiff=D(0===i.maxComputationTime?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=C(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const e=[];for(let i=0,n=t.length;i<n;i++)e.push(L.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[i],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:e}}const n=[];let s=0,r=0;for(let o=-1,a=t.length;o<a;o++){const e=o+1<a?t[o+1]:null,i=e?e.originalStart:this.originalLines.length,l=e?e.modifiedStart:this.modifiedLines.length;for(;s<i&&r<l;){const e=this.originalLines[s],t=this.modifiedLines[r];if(e!==t){{let i=M(e,1),o=M(t,1);for(;i>1&&o>1;){if(e.charCodeAt(i-2)!==t.charCodeAt(o-2))break;i--,o--}(i>1||o>1)&&this._pushTrimWhitespaceCharChange(n,s+1,1,i,r+1,1,o)}{let i=T(e,1),o=T(t,1);const a=e.length+1,l=t.length+1;for(;i<a&&o<l;){if(e.charCodeAt(i-1)!==e.charCodeAt(o-1))break;i++,o++}(i<a||o<l)&&this._pushTrimWhitespaceCharChange(n,s+1,i,a,r+1,o,l)}}s++,r++}e&&(n.push(L.createFromDiffResult(this.shouldIgnoreTrimWhitespace,e,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=e.originalLength,r+=e.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,s,r,o){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,s,r,o))return;let a;this.shouldComputeCharChanges&&(a=[new k(t,i,t,n,s,r,s,o)]),e.push(new L(t,t,s,s,a))}_mergeTrimWhitespaceCharChange(e,t,i,n,s,r,o){const a=e.length;if(0===a)return!1;const l=e[a-1];return 0!==l.originalEndLineNumber&&0!==l.modifiedEndLineNumber&&(l.originalEndLineNumber===t&&l.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new k(t,i,t,n,s,r,s,o)),!0):l.originalEndLineNumber+1===t&&l.modifiedEndLineNumber+1===s&&(l.originalEndLineNumber=t,l.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new k(t,i,t,n,s,r,s,o)),!0))}}function M(e,t){const i=v.HG(e);return-1===i?t:i+1}function T(e,t){const i=v.lT(e);return-1===i?t:i+2}function D(e){if(0===e)return()=>!0;const t=Date.now();return()=>Date.now()-t<e}var N=i(3144);const I=()=>new w,A=()=>new N.D8;var R=i(2823),P=i(4405),O=i(3800);function F(e){const t=[];for(const i of e){const e=Number(i);(e||0===e&&""!==i.replace(/\s/g,""))&&t.push(e)}return t}function B(e,t,i,n){return{red:e/255,blue:i/255,green:t/255,alpha:n}}function z(e,t){const i=t.index,n=t[0].length;if(!i)return;const s=e.positionAt(i);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+n}}function V(e,t){if(!e)return;const i=O.Q1.Format.CSS.parseHex(t);return i?{range:e,color:B(i.rgba.r,i.rgba.g,i.rgba.b,i.rgba.a)}:void 0}function W(e,t,i){if(!e||1!==t.length)return;const n=F(t[0].values());return{range:e,color:B(n[0],n[1],n[2],i?n[3]:1)}}function H(e,t,i){if(!e||1!==t.length)return;const n=F(t[0].values()),s=new O.Q1(new O.hB(n[0],n[1]/100,n[2]/100,i?n[3]:1));return{range:e,color:B(s.rgba.r,s.rgba.g,s.rgba.b,s.rgba.a)}}function U(e,t){return"string"===typeof e?[...e.matchAll(t)]:e.findMatches(t)}function j(e){return e&&"function"===typeof e.getValue&&"function"===typeof e.positionAt?function(e){const t=[],i=U(e,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const n of i){const i=n.filter((e=>void 0!==e)),s=i[1],r=i[2];if(!r)continue;let o;if("rgb"===s){const t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;o=W(z(e,n),U(r,t),!1)}else if("rgba"===s){const t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;o=W(z(e,n),U(r,t),!0)}else if("hsl"===s){const t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;o=H(z(e,n),U(r,t),!1)}else if("hsla"===s){const t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;o=H(z(e,n),U(r,t),!0)}else"#"===s&&(o=V(z(e,n),s+r));o&&t.push(o)}return t}(e):[]}var G=i(730),K=i(5212);class ${constructor(){this._workerTextModelSyncServer=new K.WorkerTextModelSyncServer}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const n=this._getModel(e);return n?f.UnicodeTextModelHighlighter.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?(0,G.findSectionHeaders)(i,t):[]}async $computeDiff(e,t,i,n){const s=this._getModel(e),r=this._getModel(t);if(!s||!r)return null;return q.computeDiff(s,r,i,n)}static computeDiff(e,t,i,n){const s="advanced"===n?A():I(),r=e.getLinesContent(),o=t.getLinesContent(),a=s.computeDiff(r,o,i);function l(e){return e.map((e=>[e.original.startLineNumber,e.original.endLineNumberExclusive,e.modified.startLineNumber,e.modified.endLineNumberExclusive,e.innerChanges?.map((e=>[e.originalRange.startLineNumber,e.originalRange.startColumn,e.originalRange.endLineNumber,e.originalRange.endColumn,e.modifiedRange.startLineNumber,e.modifiedRange.startColumn,e.modifiedRange.endLineNumber,e.modifiedRange.endColumn]))]))}return{identical:!(a.changes.length>0)&&this._modelsAreIdentical(e,t),quitEarly:a.hitTimeout,changes:l(a.changes),moves:a.moves.map((e=>[e.lineRangeMapping.original.startLineNumber,e.lineRangeMapping.original.endLineNumberExclusive,e.lineRangeMapping.modified.startLineNumber,e.lineRangeMapping.modified.endLineNumberExclusive,l(e.changes)]))}}static _modelsAreIdentical(e,t){const i=e.getLineCount();if(i!==t.getLineCount())return!1;for(let n=1;n<=i;n++){if(e.getLineContent(n)!==t.getLineContent(n))return!1}return!0}static#e=(()=>this._diffLimit=1e5)();async $computeMoreMinimalEdits(e,t,i){const r=this._getModel(e);if(!r)return t;const o=[];let a;t=t.slice(0).sort(((e,t)=>{if(e.range&&t.range)return s.Q.compareRangesUsingStarts(e.range,t.range);return(e.range?0:1)-(t.range?0:1)}));let l=0;for(let n=1;n<t.length;n++)s.Q.getEndPosition(t[l].range).equals(s.Q.getStartPosition(t[n].range))?(t[l].range=s.Q.fromPositions(s.Q.getStartPosition(t[l].range),s.Q.getEndPosition(t[n].range)),t[l].text+=t[n].text):(l++,t[l]=t[n]);t.length=l+1;for(let{range:h,text:c,eol:d}of t){if("number"===typeof d&&(a=d),s.Q.isEmpty(h)&&!c)continue;const e=r.getValueInRange(h);if(c=c.replace(/\r\n|\n|\r/g,r.eol),e===c)continue;if(Math.max(c.length,e.length)>q._diffLimit){o.push({range:h,text:c});continue}const t=(0,n.F1)(e,c,i),l=r.offsetAt(s.Q.lift(h).getStartPosition());for(const i of t){const e=r.positionAt(l+i.originalStart),t=r.positionAt(l+i.originalStart+i.originalLength),n={text:c.substr(i.modifiedStart,i.modifiedLength),range:{startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:t.lineNumber,endColumn:t.column}};r.getValueInRange(n.range)!==n.text&&o.push(n)}}return"number"===typeof a&&o.push({eol:a,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),o}async $computeLinks(e){const t=this._getModel(e);return t?function(e){return e&&"function"===typeof e.getLineCount&&"function"===typeof e.getLineContent?c.computeLinks(e):[]}(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?j(t):null}static#t=(()=>this._suggestionsLimit=1e4)();async $textualSuggest(e,t,i,n){const s=new p.W,r=new RegExp(i,n),o=new Set;e:for(const a of e){const e=this._getModel(a);if(e)for(const i of e.words(r))if(i!==t&&isNaN(Number(i))&&(o.add(i),o.size>q._suggestionsLimit))break e}return{words:Array.from(o),duration:s.elapsed()}}async $computeWordRanges(e,t,i,n){const s=this._getModel(e);if(!s)return Object.create(null);const r=new RegExp(i,n),o=Object.create(null);for(let a=t.startLineNumber;a<t.endLineNumber;a++){const e=s.getLineWords(a,r);for(const t of e){if(!isNaN(Number(t.word)))continue;let e=o[t.word];e||(e=[],o[t.word]=e),e.push({startLineNumber:a,startColumn:t.startColumn,endLineNumber:a,endColumn:t.endColumn})}}return o}async $navigateValueSet(e,t,i,n,s){const r=this._getModel(e);if(!r)return null;const o=new RegExp(n,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const a=r.getValueInRange(t),l=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},o);if(!l)return null;const h=r.getValueInRange(l);return d.INSTANCE.navigateValueSet(t,a,l,h,i)}}class q extends ${constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,n){const s={host:(0,R.kT)(n,((e,t)=>this._host.$fhr(e,t))),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve((0,R.V0)(this._foreignModule))):new Promise(((n,r)=>{const o=e=>{this._foreignModule=e.create(s,t),n((0,R.V0)(this._foreignModule))};{const t=P.zl.asBrowserUri(`${e}.js`).toString(!0);i(9204)(`${t}`).then(o).catch(r)}}))}$fmr(e,t){if(!this._foreignModule||"function"!==typeof this._foreignModule[e])return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}function Q(e){return new q(g.EditorWorkerHost.getChannel(e),null)}"function"===typeof importScripts&&(globalThis.monaco=(0,u.createMonacoBaseAPI)())},4225:(e,t,i)=>{"use strict";i.r(t),i.d(t,{IEditorWorkerService:()=>n});const n=(0,i(9398).u1)("editorWorkerService")},9487:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EditorWorkerHost:()=>n});class n{static#e=(()=>this.CHANNEL_NAME="editorWorkerHost")();static getChannel(e){return e.getChannel(n.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(n.CHANNEL_NAME,t)}}},730:(e,t,i)=>{"use strict";i.r(t),i.d(t,{findSectionHeaders:()=>r});const n=new RegExp("\\bMARK:\\s*(.*)$","d"),s=/^-+|-+$/g;function r(e,t){let i=[];if(t.findRegionSectionHeaders&&t.foldingRules?.markers){const n=function(e,t){const i=[],n=e.getLineCount();for(let s=1;s<=n;s++){const n=e.getLineContent(s),r=n.match(t.foldingRules.markers.start);if(r){const e={startLineNumber:s,startColumn:r[0].length+1,endLineNumber:s,endColumn:n.length+1};if(e.endColumn>e.startColumn){const t={range:e,...a(n.substring(r[0].length)),shouldBeInComments:!1};(t.text||t.hasSeparatorLine)&&i.push(t)}}}return i}(e,t);i=i.concat(n)}if(t.findMarkSectionHeaders){const t=function(e){const t=[],i=e.getLineCount();for(let n=1;n<=i;n++){o(e.getLineContent(n),n,t)}return t}(e);i=i.concat(t)}return i}function o(e,t,i){n.lastIndex=0;const s=n.exec(e);if(s){const e={startLineNumber:t,startColumn:s.indices[1][0]+1,endLineNumber:t,endColumn:s.indices[1][1]+1};if(e.endColumn>e.startColumn){const t={range:e,...a(s[1]),shouldBeInComments:!0};(t.text||t.hasSeparatorLine)&&i.push(t)}}}function a(e){const t=(e=e.trim()).startsWith("-");return{text:e=e.replace(s,""),hasSeparatorLine:t}}},8787:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ILanguageFeatureDebounceService:()=>g,LanguageFeatureDebounceService:()=>_});var n=i(2707),s=i(197),r=i(6053),o=i(7974),a=i(8357),l=i(9398),h=i(4888),c=i(4405),d=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},u=function(e,t){return function(i,n){t(i,n,e)}};const g=(0,l.u1)("ILanguageFeatureDebounceService");var p;!function(e){const t=new WeakMap;let i=0;e.of=function(e){let n=t.get(e);return void 0===n&&(n=++i,t.set(e,n)),n}}(p||(p={}));class f{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class m{constructor(e,t,i,n,r,o){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=r,this._max=o,this._cache=new s.qK(50,.7)}_key(e){return e.id+this._registry.all(e).reduce(((e,t)=>(0,n.sN)(p.of(t),e)),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?(0,r.qE)(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let n=this._cache.get(i);n||(n=new r.mu(6),this._cache.set(i,n));const s=(0,r.qE)(n.update(t),this._min,this._max);return(0,c.v$)(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new r.Uq;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=0|this._overall()||this._default;return(0,r.qE)(e,this._min,this._max)}}let _=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const n=i?.min??50,s=i?.max??n**2,r=i?.key??void 0,o=`${p.of(e)},${n}${r?","+r:""}`;let a=this._data.get(o);return a||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),a=new f(1.5*n)):a=new m(this._logService,t,e,0|this._overallAverage()||1.5*n,n,s),this._data.set(o,a)),a}_overallAverage(){const e=new r.Uq;for(const t of this._data.values())e.update(t.default());return e.value}};_=d([u(0,h.rr),u(1,o.k)],_),(0,a.v)(g,_,1)},8715:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ILanguageFeaturesService:()=>n});const n=(0,i(9398).u1)("ILanguageFeaturesService")},4836:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LanguageFeaturesService:()=>f});var n=i(9563),s=i(4663),r=i(2726),o=i(3489),a=i(6744);function l(e,t,i,n,s,r){if(Array.isArray(e)){let o=0;for(const a of e){const e=l(a,t,i,n,s,r);if(10===e)return e;e>o&&(o=e)}return o}if("string"===typeof e)return n?"*"===e?5:e===i?10:0:0;if(e){const{language:l,pattern:h,scheme:c,hasAccessToAllModels:d,notebookType:u}=e;if(!n&&!d)return 0;u&&s&&(t=s);let g=0;if(c)if(c===t.scheme)g=10;else{if("*"!==c)return 0;g=5}if(l)if(l===i)g=10;else{if("*"!==l)return 0;g=Math.max(g,5)}if(u)if(u===r)g=10;else{if("*"!==u||void 0===r)return 0;g=Math.max(g,5)}if(h){let e;if(e="string"===typeof h?h:{...h,base:(0,a.S8)(h.base)},e!==t.fsPath&&!(0,o.YW)(e,t.fsPath))return 0;g=10}return g}return 0}function h(e){return"string"!==typeof e&&(Array.isArray(e)?e.every(h):!!e.exclusive)}class c{constructor(e,t,i,n,s){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n,this.recursive=s}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}}class d{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new n.vl,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,s.s)((()=>{if(i){const e=this._entries.indexOf(i);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}}))}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=[];return this._orderedForEach(e,t,(e=>i.push(e.provider))),i}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,!1,(e=>{i&&n===e._score?i.push(e.provider):(n=e._score,i=[e.provider],t.push(i))})),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const n of this._entries)n._score>0&&i(n)}_updateScores(e,t){const i=this._notebookInfoResolver?.(e.uri),n=i?new c(e.uri,e.getLanguageId(),i.uri,i.type,t):new c(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(n)){this._lastCandidate=n;for(const i of this._entries)if(i._score=l(i.selector,n.uri,n.languageId,(0,r.vd)(e),n.notebookUri,n.notebookType),h(i.selector)&&i._score>0){if(!t){for(const e of this._entries)e._score=0;i._score=1e3;break}i._score=0}this._entries.sort(d._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:u(e.selector)&&!u(t.selector)?1:!u(e.selector)&&u(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function u(e){return"string"!==typeof e&&(Array.isArray(e)?e.some(u):Boolean(e.isBuiltin))}var g=i(8715),p=i(8357);class f{constructor(){this.referenceProvider=new d(this._score.bind(this)),this.renameProvider=new d(this._score.bind(this)),this.newSymbolNamesProvider=new d(this._score.bind(this)),this.codeActionProvider=new d(this._score.bind(this)),this.definitionProvider=new d(this._score.bind(this)),this.typeDefinitionProvider=new d(this._score.bind(this)),this.declarationProvider=new d(this._score.bind(this)),this.implementationProvider=new d(this._score.bind(this)),this.documentSymbolProvider=new d(this._score.bind(this)),this.inlayHintsProvider=new d(this._score.bind(this)),this.colorProvider=new d(this._score.bind(this)),this.codeLensProvider=new d(this._score.bind(this)),this.documentFormattingEditProvider=new d(this._score.bind(this)),this.documentRangeFormattingEditProvider=new d(this._score.bind(this)),this.onTypeFormattingEditProvider=new d(this._score.bind(this)),this.signatureHelpProvider=new d(this._score.bind(this)),this.hoverProvider=new d(this._score.bind(this)),this.documentHighlightProvider=new d(this._score.bind(this)),this.multiDocumentHighlightProvider=new d(this._score.bind(this)),this.selectionRangeProvider=new d(this._score.bind(this)),this.foldingRangeProvider=new d(this._score.bind(this)),this.linkProvider=new d(this._score.bind(this)),this.inlineCompletionsProvider=new d(this._score.bind(this)),this.inlineEditProvider=new d(this._score.bind(this)),this.completionProvider=new d(this._score.bind(this)),this.linkedEditingRangeProvider=new d(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new d(this._score.bind(this)),this.documentSemanticTokensProvider=new d(this._score.bind(this)),this.documentDropEditProvider=new d(this._score.bind(this)),this.documentPasteEditProvider=new d(this._score.bind(this))}_score(e){return this._notebookTypeResolver?.(e)}}(0,p.v)(g.ILanguageFeaturesService,f,1)},5297:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LanguageService:()=>c});var n=i(9563),s=i(4663),r=i(7780),o=i(4961),a=i(4470),l=i(6696),h=i(8207);class c extends s.jG{static#e=(()=>this.instanceCount=0)();constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(),this._onDidRequestBasicLanguageFeatures=this._register(new n.vl),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new n.vl),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new n.vl({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,c.instanceCount++,this._registry=this._register(new r.LanguagesRegistry(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange((()=>this._onDidChange.fire())))}dispose(){c.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return(0,o.Fy)(i,null)}createById(e){return new d(this.onDidChange,(()=>this._createAndGetLanguageIdentifier(e)))}createByFilepathOrFirstLine(e,t){return new d(this.onDidChange,(()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)}))}_createAndGetLanguageIdentifier(e){return e&&this.isRegisteredLanguageId(e)||(e=l.vH),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),a.dG.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}class d{constructor(e,t){this._value=(0,h.y0)(this,e,(()=>t())),this.onDidChange=n.Jh.fromObservable(this._value)}get languageId(){return this._value.get()}}},1011:(e,t,i)=>{"use strict";i.r(t),i.d(t,{clearPlatformLanguageAssociations:()=>p,getLanguageIds:()=>f,registerPlatformLanguageAssociation:()=>g});var n=i(3489),s=i(6531),r=i(4405),o=i(6744),a=i(6474),l=i(6637),h=i(6696);let c=[],d=[],u=[];function g(e){!function(e,t,i){const s=function(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?(0,n.qg)(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(o.SA.sep)>=0}}(e,t);c.push(s),s.userConfigured?u.push(s):d.push(s);i&&!s.userConfigured&&c.forEach((e=>{e.mime===s.mime||e.userConfigured||(s.extension&&e.extension===s.extension&&console.warn(`Overwriting extension <<${s.extension}>> to now point to mime <<${s.mime}>>`),s.filename&&e.filename===s.filename&&console.warn(`Overwriting filename <<${s.filename}>> to now point to mime <<${s.mime}>>`),s.filepattern&&e.filepattern===s.filepattern&&console.warn(`Overwriting filepattern <<${s.filepattern}>> to now point to mime <<${s.mime}>>`),s.firstline&&e.firstline===s.firstline&&console.warn(`Overwriting firstline <<${s.firstline}>> to now point to mime <<${s.mime}>>`))}))}(e,!1,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function p(){c=c.filter((e=>e.userConfigured)),d=[]}function f(e,t){return function(e,t){let i;if(e)switch(e.scheme){case r.ny.file:i=e.fsPath;break;case r.ny.data:i=a.B6.parseMetaData(e).get(a.B6.META_DATA_LABEL);break;case r.ny.vscodeNotebookCell:i=void 0;break;default:i=e.path}if(!i)return[{id:"unknown",mime:s.K.unknown}];i=i.toLowerCase();const n=(0,o.P8)(i),g=m(i,n,u);if(g)return[g,{id:h.vH,mime:s.K.text}];const p=m(i,n,d);if(p)return[p,{id:h.vH,mime:s.K.text}];if(t){const e=function(e){(0,l.LU)(e)&&(e=e.substr(1));if(e.length>0)for(let t=c.length-1;t>=0;t--){const i=c[t];if(!i.firstline)continue;const n=e.match(i.firstline);if(n&&n.length>0)return i}return}(t);if(e)return[e,{id:h.vH,mime:s.K.text}]}return[{id:"unknown",mime:s.K.unknown}]}(e,t).map((e=>e.id))}function m(e,t,i){let n,s,r;for(let o=i.length-1;o>=0;o--){const a=i[o];if(t===a.filenameLowercase){n=a;break}if(a.filepattern&&(!s||a.filepattern.length>s.filepattern.length)){const i=a.filepatternOnPath?e:t;a.filepatternLowercase?.(i)&&(s=a)}a.extension&&(!r||a.extension.length>r.extension.length)&&t.endsWith(a.extensionLowercase)&&(r=a)}return n||(s||(r||void 0))}},7780:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LanguageIdCodec:()=>u,LanguagesRegistry:()=>g});var n=i(9563),s=i(4663),r=i(6637),o=i(1011),a=i(6696),l=i(3515),h=i(5050);const c=Object.prototype.hasOwnProperty,d="vs.editor.nullLanguage";class u{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(d,0),this._register(a.vH,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||d}}class g extends s.jG{static#e=(()=>this.instanceCount=0)();constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this._onDidChange=this._register(new n.vl),this.onDidChange=this._onDidChange.event,g.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new u,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(a.W6.onDidChangeLanguages((e=>{this._initializeFromRegistry()}))))}dispose(){g.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},(0,o.clearPlatformLanguageAssociations)();const e=[].concat(a.W6.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((e=>{const t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach((e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier})),t.mimetypes.forEach((e=>{this._mimeTypesMap[e]=t.identifier}))})),h.O.as(l.Fd.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;c.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const e of t.extensions)(0,o.registerPlatformLanguageAssociation)({id:i,mime:n,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const r of t.filenames)(0,o.registerPlatformLanguageAssociation)({id:i,mime:n,filename:r},this._warnOnOverwrite),e.filenames.push(r);if(Array.isArray(t.filenamePatterns))for(const r of t.filenamePatterns)(0,o.registerPlatformLanguageAssociation)({id:i,mime:n,filepattern:r},this._warnOnOverwrite);if("string"===typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{const t=new RegExp(e);(0,r.eY)(t)||(0,o.registerPlatformLanguageAssociation)({id:i,mime:n,firstline:t},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${e}\`: `,l)}}e.aliases.push(i);let s=null;if("undefined"!==typeof t.aliases&&Array.isArray(t.aliases)&&(s=0===t.aliases.length?[null]:t.aliases),null!==s)for(const r of s)r&&0!==r.length&&e.aliases.push(r);const a=null!==s&&s.length>0;if(a&&null===s[0]);else{const t=(a?s[0]:null)||i;!a&&e.name||(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return!!e&&c.call(this._languages,e)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return c.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&c.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return e||t?(0,o.getLanguageIds)(e,t):[]}}},3473:(e,t,i)=>{"use strict";i.r(t),i.d(t,{IMarkerDecorationsService:()=>n});const n=(0,i(9398).u1)("markerDecorationsService")},4286:(e,t,i)=>{"use strict";i.r(t),i.d(t,{MarkerDecorationsService:()=>_});var n=i(7854),s=i(4663),r=i(2726),o=i(2427),a=i(4960),l=i(2597),h=i(5902),c=i(4405),d=i(9563),u=i(2583),g=i(197),p=i(786),f=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},m=function(e,t){return function(i,n){t(i,n,e)}};let _=class extends s.jG{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new d.vl),this._markerDecorations=new g.fT,e.getModels().forEach((e=>this._onModelAdded(e))),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((e=>e.dispose())),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach((e=>{const t=this._markerDecorations.get(e);t&&this._updateDecorations(t)}))}_onModelAdded(e){const t=new v(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme!==c.ny.inMemory&&e.uri.scheme!==c.ny.internal&&e.uri.scheme!==c.ny.vscode||this._markerService?.read({resource:e.uri}).map((e=>e.owner)).forEach((t=>this._markerService.remove(t,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};_=f([m(0,l.IModelService),m(1,n.DR)],_);class v extends s.jG{constructor(e){super(),this.model=e,this._map=new g.cO,this._register((0,s.s)((()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()})))}update(e){const{added:t,removed:i}=(0,p.Z)(new Set(this._map.keys()),new Set(e));if(0===t.length&&0===i.length)return!1;const n=i.map((e=>this._map.get(e))),s=t.map((e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)}))),r=this.model.deltaDecorations(n,s);for(const o of i)this._map.delete(o);for(let o=0;o<r.length;o++)this._map.set(t[o],r[o]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=h.Q.lift(t);if(t.severity!==n.cj.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const t=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(1===t||i.endColumn>=t)return i;const n=e.getWordAtPosition(i.getStartPosition());n&&(i=new h.Q(i.startLineNumber,n.startColumn,i.endLineNumber,n.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&i.startLineNumber===i.endLineNumber){const n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new h.Q(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,s,l,h;switch(e.severity){case n.cj.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",s=0;break;case n.cj.Info:t="squiggly-info",i=(0,o.Yf)(a.AQ),s=10,h={color:(0,o.Yf)(u.KoI),position:1};break;case n.cj.Warning:t="squiggly-warning",i=(0,o.Yf)(a.aZ),s=20,h={color:(0,o.Yf)(u.uMG),position:1};break;case n.cj.Error:default:t="squiggly-error",i=(0,o.Yf)(a.yI),s=30,h={color:(0,o.Yf)(u.yLC),position:1}}return e.tags&&(-1!==e.tags.indexOf(1)&&(l="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(l="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:r.A5.Right},minimap:h,zIndex:s,inlineClassName:l}}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}}},2597:(e,t,i)=>{"use strict";i.r(t),i.d(t,{IModelService:()=>n});const n=(0,i(9398).u1)("modelService")},3538:(e,t,i)=>{"use strict";i.r(t),i.d(t,{DefaultModelSHA1Computer:()=>k,ModelService:()=>x});var n,s=i(9563),r=i(4663),o=i(1540),a=i(6953),l=i(2569),h=i(6696),c=i(683),d=i(5968),u=i(5582),g=i(2707),p=i(621),f=i(4405),m=i(2823),_=i(9398),v=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},b=function(e,t){return function(i,n){t(i,n,e)}};function y(e){return e.toString()}class w{constructor(e,t,i){this.model=e,this._modelEventListeners=new r.Cm,this.model=e,this._modelEventListeners.add(e.onWillDispose((()=>t(e)))),this._modelEventListeners.add(e.onDidChangeLanguage((t=>i(e,t))))}dispose(){this._modelEventListeners.dispose()}}const C=o.j9||o.zx?1:2;class S{constructor(e,t,i,n,s,r,o,a){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=s,this.sha1=r,this.versionId=o,this.alternativeVersionId=a}}let x=class extends r.jG{static#e=(()=>n=this)();static#t=(()=>this.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520)();constructor(e,t,i,n){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=n,this._onModelAdded=this._register(new s.vl),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new s.vl),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new s.vl),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration((e=>this._updateModelOptions(e)))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let i=l.R.tabSize;if(e.editor&&"undefined"!==typeof e.editor.tabSize){const t=parseInt(e.editor.tabSize,10);isNaN(t)||(i=t),i<1&&(i=1)}let n="tabSize";if(e.editor&&"undefined"!==typeof e.editor.indentSize&&"tabSize"!==e.editor.indentSize){const t=parseInt(e.editor.indentSize,10);isNaN(t)||(n=Math.max(t,1))}let s=l.R.insertSpaces;e.editor&&"undefined"!==typeof e.editor.insertSpaces&&(s="false"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));let r=C;const o=e.eol;"\r\n"===o?r=2:"\n"===o&&(r=1);let a=l.R.trimAutoWhitespace;e.editor&&"undefined"!==typeof e.editor.trimAutoWhitespace&&(a="false"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));let h=l.R.detectIndentation;e.editor&&"undefined"!==typeof e.editor.detectIndentation&&(h="false"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));let c=l.R.largeFileOptimizations;e.editor&&"undefined"!==typeof e.editor.largeFileOptimizations&&(c="false"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations));let d=l.R.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&"object"===typeof e.editor.bracketPairColorization&&(d={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:n,insertSpaces:s,detectIndentation:h,defaultEOL:r,trimAutoWhitespace:a,largeFileOptimizations:c,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&"string"===typeof i&&"auto"!==i?i:3===o.OS||2===o.OS?"\n":"\r\n"}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!==typeof e||e}getCreationOptions(e,t,i){const s="string"===typeof e?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[s+t];if(!r){const e=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),o=this._getEOL(t,s);r=n._readModelOptions({editor:e,eol:o},i),this._modelCreationOptionsByLanguageAndResource[s+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let s=0,r=i.length;s<r;s++){const r=i[s],o=this._models[r],a=o.model.getLanguageId(),l=o.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:a,resource:l})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:a,resource:l}))continue;const h=t[a+l],c=this.getCreationOptions(a,l,o.model.isForSimpleWidget);n._setModelOptionsForModel(o.model,c,h)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&(0,m.aI)(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions)||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(y(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(y(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(y(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach((e=>{e.sharesUndoRedoStack||t.push(e)})),t.sort(((e,t)=>e.time-t.time));t.length>0&&this._disposedModelsHeapSize>e;){const e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const s=this.getCreationOptions(t,i,n),r=this._instantiationService.createInstance(a.Bz,e,t,s,i);if(i&&this._disposedModels.has(y(i))){const e=this._removeDisposedModel(i),t=this._undoRedoService.getElements(i),n=this._getSHA1Computer(),s=!!n.canComputeSHA1(r)&&n.computeSHA1(r)===e.sha1;if(s||e.sharesUndoRedoStack){for(const e of t.past)(0,p.Th)(e)&&e.matchesResource(i)&&e.setModel(r);for(const e of t.future)(0,p.Th)(e)&&e.matchesResource(i)&&e.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,(e=>(0,p.Th)(e)&&e.matchesResource(i))),s&&(r._overwriteVersionId(e.versionId),r._overwriteAlternativeVersionId(e.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}const o=y(r.uri);if(this._models[o])throw new Error("ModelService: Cannot add model because it already exists!");const l=new w(r,(e=>this._onWillDispose(e)),((e,t)=>this._onDidChangeLanguage(e,t)));return this._models[o]=l,l}createModel(e,t,i){let n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n=t?this._createModelData(e,t,i,s):this._createModelData(e,h.vH,i,s),this._onModelAdded.fire(n.model),n.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(this._models[n].model)}return e}getModel(e){const t=y(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===f.ny.file||e.scheme===f.ny.vscodeRemote||e.scheme===f.ny.vscodeUserData||e.scheme===f.ny.vscodeNotebookCell||"fake-fs"===e.scheme}_onWillDispose(e){const t=y(e.uri),i=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(const i of t.past)(0,p.Th)(i)&&i.matchesResource(e.uri)&&(r=!0,o+=i.heapSize(e.uri),i.setModel(e.uri));for(const i of t.future)(0,p.Th)(i)&&i.matchesResource(e.uri)&&(r=!0,o+=i.heapSize(e.uri),i.setModel(e.uri))}}const a=n.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(s||!(o>a)&&l.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,(t=>(0,p.Th)(t)&&t.matchesResource(e.uri))),this._insertDisposedModel(new S(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{const e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}else if(!s){const e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);n._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new k}};x=n=v([b(0,d.pG),b(1,c.ITextResourcePropertiesService),b(2,u.$D),b(3,_._Y)],x);class k{static#e=(()=>this.MAX_MODEL_SIZE=10485760)();canComputeSHA1(e){return e.getValueLength()<=k.MAX_MODEL_SIZE}computeSHA1(e){const t=new g.v7,i=e.createSnapshot();let n;for(;n=i.read();)t.update(n);return t.digest()}}},3537:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ITextModelService:()=>n});const n=(0,i(9398).u1)("textModelService")},452:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SemanticTokensProviderStyling:()=>f,toMultilineTokens2:()=>m});i(5477);var n=i(2427),s=i(4888),r=i(2464),o=i(5902),a=i(8703);class l{static create(e,t){return new l(e,new h(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e?new o.Q(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[n,s,r]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new l(this._startLineNumber,n),new l(this._startLineNumber+r,s)]}applyEdit(e,t){const[i,n,s]=(0,a.W)(t);this.acceptEdit(e,i,n,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,n,s){this._acceptDeleteRange(e),this._acceptInsertText(new r.y(e.startLineNumber,e.startColumn),t,i,n,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const e=i-t;return void(this._startLineNumber-=e)}const n=this._tokens.getMaxDeltaLine();if(!(t>=n+1)){if(t<0&&i>=n+1)return this._startLineNumber=0,void this._tokens.clear();if(t<0){const n=-t;this._startLineNumber-=n,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,n,s){if(0===t&&0===i)return;const r=e.lineNumber-this._startLineNumber;if(r<0)return void(this._startLineNumber+=t);r>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(r,e.column-1,t,i,n,s)}}class h{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(0===e)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new o.Q(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const n=t+Math.floor((i-t)/2),s=this._getDeltaLine(n);if(s<e)t=n+1;else{if(!(s>e)){let s=n;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let r=n;for(;r<i&&this._getDeltaLine(r+1)===e;)r++;return new c(this._tokens.subarray(4*s,4*r+4))}i=n-1}}return this._getDeltaLine(t)===e?new c(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){const s=this._tokens,r=this._tokenCount;let o=0,a=!1,l=0;for(let h=0;h<r;h++){const r=4*h,c=s[r],d=s[r+1],u=s[r+2],g=s[r+3];if((c>e||c===e&&u>=t)&&(c<i||c===i&&d<=n))a=!0;else{if(0===o&&(l=c),a){const e=4*o;s[e]=c-l,s[e+1]=d,s[e+2]=u,s[e+3]=g}o++}}return this._tokenCount=o,l}split(e,t,i,n){const s=this._tokens,r=this._tokenCount,o=[],a=[];let l=o,c=0,d=0;for(let h=0;h<r;h++){const r=4*h,o=s[r],u=s[r+1],g=s[r+2],p=s[r+3];if(o>e||o===e&&g>=t){if(o<i||o===i&&u<=n)continue;l!==a&&(l=a,c=0,d=o)}l[c++]=o-d,l[c++]=u,l[c++]=g,l[c++]=p}return[new h(new Uint32Array(o)),new h(new Uint32Array(a)),d]}acceptDeleteRange(e,t,i,n,s){const r=this._tokens,o=this._tokenCount,a=n-t;let l=0,h=!1;for(let c=0;c<o;c++){const d=4*c;let u=r[d],g=r[d+1],p=r[d+2];const f=r[d+3];if(u<t||u===t&&p<=i){l++;continue}if(u===t&&g<i)u===n&&p>s?p-=s-i:p=i;else if(u===t&&g===i){if(!(u===n&&p>s)){h=!0;continue}p-=s-i}else if(u<n||u===n&&g<s){if(!(u===n&&p>s)){h=!0;continue}u=t,g=i,p=g+(p-s)}else if(u>n){if(0===a&&!h){l=o;break}u-=a}else{if(!(u===n&&g>=s))throw new Error("Not possible!");e&&0===u&&(g+=e,p+=e),u-=a,g-=s-i,p-=s-i}const m=4*l;r[m]=u,r[m+1]=g,r[m+2]=p,r[m+3]=f,l++}this._tokenCount=l}acceptInsertText(e,t,i,n,s,r){const o=0===i&&1===n&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),a=this._tokens,l=this._tokenCount;for(let h=0;h<l;h++){const r=4*h;let l=a[r],c=a[r+1],d=a[r+2];if(!(l<e||l===e&&d<t)){if(l===e&&d===t){if(!o)continue;d+=1}else if(l===e&&c<t&&t<d)0===i?d+=n:d=t;else{if(l===e&&c===t&&o)continue;if(l===e)if(l+=i,0===i)c+=n,d+=n;else{const e=d-c;c=s+(c-t),d=c+e}else l+=i}a[r]=l,a[r+1]=c,a[r+2]=d}}}}class c{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var d=i(5937),u=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},g=function(e,t){return function(i,n){t(i,n,e)}};const p=!1;let f=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new v}getMetadata(e,t,i){const n=this._languageService.languageIdCodec.encodeLanguageId(i),s=this._hashTable.get(e,t,n);let r;if(s)r=s.metadata;else{let s=this._legend.tokenTypes[e];const o=[];if(s){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&o.push(this._legend.tokenModifiers[t]),e>>=1;p;const n=this._themeService.getColorTheme().getTokenStyleMetadata(s,o,i);if("undefined"===typeof n)r=2147483647;else{if(r=0,"undefined"!==typeof n.italic){r|=1|(n.italic?1:0)<<11}if("undefined"!==typeof n.bold){r|=2|(n.bold?2:0)<<11}if("undefined"!==typeof n.underline){r|=4|(n.underline?4:0)<<11}if("undefined"!==typeof n.strikethrough){r|=8|(n.strikethrough?8:0)<<11}if(n.foreground){r|=16|n.foreground<<15}0===r&&(r=2147483647)}}else r=2147483647,s="not-in-legend";this._hashTable.add(e,t,n,r)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${s}).`))}};function m(e,t,i){const n=e.data,s=e.data.length/5|0,r=Math.max(Math.ceil(s/1024),400),o=[];let a=0,h=1,c=0;for(;a<s;){const e=a;let d=Math.min(e+r,s);if(d<s){let t=d;for(;t-1>e&&0===n[5*t];)t--;if(t-1===e){let e=d;for(;e+1<s&&0===n[5*e];)e++;d=e}else d=t}let u=new Uint32Array(4*(d-e)),g=0,p=0,f=0,m=0;for(;a<d;){const e=5*a,s=n[e],r=n[e+1],o=h+s|0,l=0===s?c+r|0:r,d=l+n[e+2]|0,_=n[e+3],v=n[e+4];if(d<=l)t.warnInvalidLengthSemanticTokens(o,l+1);else if(f===o&&m>l)t.warnOverlappingSemanticTokens(o,l+1);else{const e=t.getMetadata(_,v,i);2147483647!==e&&(0===p&&(p=o),u[g]=o-p,u[g+1]=l,u[g+2]=d,u[g+3]=e,g+=4,f=o,m=d)}h=o,c=l,a++}g!==u.length&&(u=u.subarray(0,g));const _=l.create(p,u);o.push(_)}return o}f=u([g(1,n.Gy),g(2,d.L),g(3,s.rr)],f);class _{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}class v{static#e=(()=>this._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143])();constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=v._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<v._SIZES.length?2/3*this._currentLength:0),this._elements=[],v._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let s=this._elements[n];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===i)return s;s=s.next}return null}add(e,t,i,n){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){const e=this._elements;this._currentLengthIndex++,this._currentLength=v._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<v._SIZES.length?2/3*this._currentLength:0),this._elements=[],v._nullOutEntries(this._elements,this._currentLength);for(const t of e){let e=t;for(;e;){const t=e.next;e.next=null,this._add(e),e=t}}}this._add(new _(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}},3120:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ISemanticTokensStylingService:()=>n});const n=(0,i(9398).u1)("semanticTokensStylingService")},7129:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SemanticTokensStylingService:()=>u});var n=i(4663),s=i(5937),r=i(2427),o=i(4888),a=i(452),l=i(3120),h=i(8357),c=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},d=function(e,t){return function(i,n){t(i,n,e)}};let u=class extends n.jG{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange((()=>{this._caches=new WeakMap})))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new a.SemanticTokensProviderStyling(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};u=c([d(0,r.Gy),d(1,o.rr),d(2,s.L)],u),(0,h.v)(l.ISemanticTokensStylingService,u,1)},5212:(e,t,i)=>{"use strict";i.r(t),i.d(t,{MirrorModel:()=>f,STOP_SYNC_MODEL_DELTA_TIME_MS:()=>u,WorkerTextModelSyncClient:()=>g,WorkerTextModelSyncServer:()=>p});var n=i(8591),s=i(4663),r=i(4673),o=i(2464),a=i(5902),l=i(4423),h=i(6637),c=i(303);class d{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new o.y(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new c.N(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;const i=(0,h.uz)(t);if(1===i.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this._lines.splice(e.lineNumber+s-1,0,i[s]),n[s-1]=i[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}const u=6e4;class g extends s.jG{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const e=new n.vb;e.cancelAndSet((()=>this._checkStopModelSync()),Math.round(u/2)),this._register(e)}}dispose(){for(const e in this._syncedModels)(0,s.AS)(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const i of e){const e=i.toString();this._syncedModels[e]||this._beginModelSync(i,t),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=(new Date).getTime())}}_checkStopModelSync(){const e=(new Date).getTime(),t=[];for(const i in this._syncedModelsLastUsedTime){e-this._syncedModelsLastUsedTime[i]>u&&t.push(i)}for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i)return;if(!t&&i.isTooLargeForSyncing())return;const n=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const r=new s.Cm;r.add(i.onDidChangeContent((e=>{this._proxy.$acceptModelChanged(n.toString(),e)}))),r.add(i.onWillDispose((()=>{this._stopModelSync(n)}))),r.add((0,s.s)((()=>{this._proxy.$acceptRemovedModel(n)}))),this._syncedModels[n]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],(0,s.AS)(t)}}class p{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach((t=>e.push(this._models[t]))),e}$acceptNewModel(e){this._models[e.url]=new f(r.r.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class f extends d{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const n=this._lines[i],s=this.offsetAt(new o.y(i+1,1)),r=n.matchAll(e);for(const e of r)(e.index||0===e.index)&&(e.index=e.index+s),t.push(e)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=(0,l.Th)(e.column,(0,l.Io)(t),this._lines[e.lineNumber-1],0);return i?new a.Q(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,s="",r=0,o=[];return{*[Symbol.iterator](){for(;;)if(r<o.length){const e=s.substring(o[r].start,o[r].end);r+=1,yield e}else{if(!(n<t.length))break;s=t[n],o=i(s,e),r=0,n+=1}}}}getLineWords(e,t){const i=this._lines[e-1],n=this._wordenize(i,t),s=[];for(const r of n)s.push({word:i.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return s}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&0!==n[0].length;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if((e=this._validateRange(e)).startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,s=[];s.push(this._lines[i].substring(e.startColumn-1));for(let r=i+1;r<n;r++)s.push(this._lines[r]);return s.push(this._lines[n].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!o.y.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{const e=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>e&&(i=e,n=!0)}return n?{lineNumber:t,column:i}:e}}},683:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ITextResourceConfigurationService:()=>s,ITextResourcePropertiesService:()=>r});var n=i(9398);const s=(0,n.u1)("textResourceConfigurationService"),r=(0,n.u1)("textResourcePropertiesService")},4051:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ITreeSitterParserService:()=>n});const n=(0,i(9398).u1)("treeSitterParserService")},3072:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UnicodeTextModelHighlighter:()=>l});var n=i(5902),s=i(6701),r=i(6637),o=i(7289),a=i(4423);class l{static computeUnicodeHighlights(e,t,i){const l=i?i.startLineNumber:1,c=i?i.endLineNumber:e.getLineCount(),d=new h(t),u=d.getCandidateCodePoints();let g;var p;g="allNonBasicAscii"===u?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp(""+(p=Array.from(u),`[${r.bm(p.map((e=>String.fromCodePoint(e))).join(""))}]`),"g");const f=new s.W5(null,g),m=[];let _,v=!1,b=0,y=0,w=0;e:for(let s=l,h=c;s<=h;s++){const t=e.getLineContent(s),i=t.length;f.reset(0);do{if(_=f.next(t),_){let e=_.index,l=_.index+_[0].length;if(e>0){const i=t.charCodeAt(e-1);r.pc(i)&&e--}if(l+1<i){const e=t.charCodeAt(l-1);r.pc(e)&&l++}const h=t.substring(e,l);let c=(0,a.Th)(e+1,a.Ld,t,0);c&&c.endColumn<=e+1&&(c=null);const u=d.shouldHighlightNonBasicASCII(h,c?c.word:null);if(0!==u){3===u?b++:2===u?y++:1===u?w++:(0,o.xb)(u);const t=1e3;if(m.length>=t){v=!0;break e}m.push(new n.Q(s,e+1,s,l+1))}}}while(_)}return{ranges:m,hasMore:v,ambiguousCharacterCount:b,invisibleCharacterCount:y,nonBasicAsciiCharacterCount:w}}static computeUnicodeHighlightReason(e,t){const i=new h(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const n=e.codePointAt(0),s=i.ambiguousCharacters.getPrimaryConfusable(n),o=r.tl.getLocales().filter((e=>!r.tl.getInstance(new Set([...t.allowedLocales,e])).isAmbiguous(n)));return{kind:0,confusableWith:String.fromCodePoint(s),notAmbiguousInLocales:o}}case 1:return{kind:2}}}}class h{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=r.tl.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of r.y_.codePoints)c(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,s=!1;if(t)for(const o of t){const e=o.codePointAt(0),t=r.aC(o);n=n||t,t||this.ambiguousCharacters.isAmbiguous(e)||r.y_.isInvisibleCharacter(e)||(s=!0)}return!n&&s?0:this.options.invisibleCharacters&&!c(e)&&r.y_.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function c(e){return" "===e||"\n"===e||"\t"===e}},5372:(e,t,i)=>{"use strict";var n,s,r,o,a,l,h,c,d,u,g,p,f,m,_,v,b,y,w,C,S,x,k,L,E,M,T,D,N,I,A,R,P,O,F,B,z,V,W,H,U,j,G,K,$,q;i.d(t,{A5:()=>A,Ah:()=>R,DD:()=>x,DO:()=>O,Gn:()=>n,H_:()=>j,Ic:()=>P,Io:()=>o,Kb:()=>u,M$:()=>v,OV:()=>D,QP:()=>a,Qj:()=>h,R3:()=>E,SB:()=>V,U7:()=>G,VW:()=>y,VX:()=>M,WA:()=>H,WU:()=>m,XR:()=>z,YT:()=>N,ZS:()=>_,_E:()=>r,cj:()=>k,dE:()=>I,d_:()=>L,e0:()=>g,h5:()=>c,hS:()=>T,hW:()=>F,jT:()=>W,kK:()=>$,kf:()=>f,l:()=>b,m9:()=>K,of:()=>d,ok:()=>s,ov:()=>B,p2:()=>p,qw:()=>C,r4:()=>w,sm:()=>S,t7:()=>l,tJ:()=>q,v0:()=>U}),function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"}(n||(n={})),function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"}(s||(s={})),function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"}(r||(r={})),function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"}(o||(o={})),function(e){e[e.Deprecated=1]="Deprecated"}(a||(a={})),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(l||(l={})),function(e){e[e.EXACT=0]="EXACT",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"}(h||(h={})),function(e){e[e.NotSet=0]="NotSet",e[e.ContentFlush=1]="ContentFlush",e[e.RecoverFromMarkers=2]="RecoverFromMarkers",e[e.Explicit=3]="Explicit",e[e.Paste=4]="Paste",e[e.Undo=5]="Undo",e[e.Redo=6]="Redo"}(c||(c={})),function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(d||(d={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(u||(u={})),function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"}(g||(g={})),function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.emptySelectionClipboard=37]="emptySelectionClipboard",e[e.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",e[e.extraEditorClassName=39]="extraEditorClassName",e[e.fastScrollSensitivity=40]="fastScrollSensitivity",e[e.find=41]="find",e[e.fixedOverflowWidgets=42]="fixedOverflowWidgets",e[e.folding=43]="folding",e[e.foldingStrategy=44]="foldingStrategy",e[e.foldingHighlight=45]="foldingHighlight",e[e.foldingImportsByDefault=46]="foldingImportsByDefault",e[e.foldingMaximumRegions=47]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=49]="fontFamily",e[e.fontInfo=50]="fontInfo",e[e.fontLigatures=51]="fontLigatures",e[e.fontSize=52]="fontSize",e[e.fontWeight=53]="fontWeight",e[e.fontVariations=54]="fontVariations",e[e.formatOnPaste=55]="formatOnPaste",e[e.formatOnType=56]="formatOnType",e[e.glyphMargin=57]="glyphMargin",e[e.gotoLocation=58]="gotoLocation",e[e.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",e[e.hover=60]="hover",e[e.inDiffEditor=61]="inDiffEditor",e[e.inlineSuggest=62]="inlineSuggest",e[e.inlineEdit=63]="inlineEdit",e[e.letterSpacing=64]="letterSpacing",e[e.lightbulb=65]="lightbulb",e[e.lineDecorationsWidth=66]="lineDecorationsWidth",e[e.lineHeight=67]="lineHeight",e[e.lineNumbers=68]="lineNumbers",e[e.lineNumbersMinChars=69]="lineNumbersMinChars",e[e.linkedEditing=70]="linkedEditing",e[e.links=71]="links",e[e.matchBrackets=72]="matchBrackets",e[e.minimap=73]="minimap",e[e.mouseStyle=74]="mouseStyle",e[e.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=76]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",e[e.multiCursorModifier=78]="multiCursorModifier",e[e.multiCursorPaste=79]="multiCursorPaste",e[e.multiCursorLimit=80]="multiCursorLimit",e[e.occurrencesHighlight=81]="occurrencesHighlight",e[e.overviewRulerBorder=82]="overviewRulerBorder",e[e.overviewRulerLanes=83]="overviewRulerLanes",e[e.padding=84]="padding",e[e.pasteAs=85]="pasteAs",e[e.parameterHints=86]="parameterHints",e[e.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",e[e.placeholder=88]="placeholder",e[e.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",e[e.quickSuggestions=90]="quickSuggestions",e[e.quickSuggestionsDelay=91]="quickSuggestionsDelay",e[e.readOnly=92]="readOnly",e[e.readOnlyMessage=93]="readOnlyMessage",e[e.renameOnType=94]="renameOnType",e[e.renderControlCharacters=95]="renderControlCharacters",e[e.renderFinalNewline=96]="renderFinalNewline",e[e.renderLineHighlight=97]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=99]="renderValidationDecorations",e[e.renderWhitespace=100]="renderWhitespace",e[e.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",e[e.roundedSelection=102]="roundedSelection",e[e.rulers=103]="rulers",e[e.scrollbar=104]="scrollbar",e[e.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=106]="scrollBeyondLastLine",e[e.scrollPredominantAxis=107]="scrollPredominantAxis",e[e.selectionClipboard=108]="selectionClipboard",e[e.selectionHighlight=109]="selectionHighlight",e[e.selectOnLineNumbers=110]="selectOnLineNumbers",e[e.showFoldingControls=111]="showFoldingControls",e[e.showUnused=112]="showUnused",e[e.snippetSuggestions=113]="snippetSuggestions",e[e.smartSelect=114]="smartSelect",e[e.smoothScrolling=115]="smoothScrolling",e[e.stickyScroll=116]="stickyScroll",e[e.stickyTabStops=117]="stickyTabStops",e[e.stopRenderingLineAfter=118]="stopRenderingLineAfter",e[e.suggest=119]="suggest",e[e.suggestFontSize=120]="suggestFontSize",e[e.suggestLineHeight=121]="suggestLineHeight",e[e.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",e[e.suggestSelection=123]="suggestSelection",e[e.tabCompletion=124]="tabCompletion",e[e.tabIndex=125]="tabIndex",e[e.unicodeHighlighting=126]="unicodeHighlighting",e[e.unusualLineTerminators=127]="unusualLineTerminators",e[e.useShadowDOM=128]="useShadowDOM",e[e.useTabStops=129]="useTabStops",e[e.wordBreak=130]="wordBreak",e[e.wordSegmenterLocales=131]="wordSegmenterLocales",e[e.wordSeparators=132]="wordSeparators",e[e.wordWrap=133]="wordWrap",e[e.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=136]="wordWrapColumn",e[e.wordWrapOverride1=137]="wordWrapOverride1",e[e.wordWrapOverride2=138]="wordWrapOverride2",e[e.wrappingIndent=139]="wrappingIndent",e[e.wrappingStrategy=140]="wrappingStrategy",e[e.showDeprecated=141]="showDeprecated",e[e.inlayHints=142]="inlayHints",e[e.editorClassName=143]="editorClassName",e[e.pixelRatio=144]="pixelRatio",e[e.tabFocusMode=145]="tabFocusMode",e[e.layoutInfo=146]="layoutInfo",e[e.wrappingInfo=147]="wrappingInfo",e[e.defaultColorDecorators=148]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"}(p||(p={})),function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(f||(f={})),function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(m||(m={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(_||(_={})),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(v||(v={})),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(b||(b={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(y||(y={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(w||(w={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(C||(C={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(S||(S={})),function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.Digit0=21]="Digit0",e[e.Digit1=22]="Digit1",e[e.Digit2=23]="Digit2",e[e.Digit3=24]="Digit3",e[e.Digit4=25]="Digit4",e[e.Digit5=26]="Digit5",e[e.Digit6=27]="Digit6",e[e.Digit7=28]="Digit7",e[e.Digit8=29]="Digit8",e[e.Digit9=30]="Digit9",e[e.KeyA=31]="KeyA",e[e.KeyB=32]="KeyB",e[e.KeyC=33]="KeyC",e[e.KeyD=34]="KeyD",e[e.KeyE=35]="KeyE",e[e.KeyF=36]="KeyF",e[e.KeyG=37]="KeyG",e[e.KeyH=38]="KeyH",e[e.KeyI=39]="KeyI",e[e.KeyJ=40]="KeyJ",e[e.KeyK=41]="KeyK",e[e.KeyL=42]="KeyL",e[e.KeyM=43]="KeyM",e[e.KeyN=44]="KeyN",e[e.KeyO=45]="KeyO",e[e.KeyP=46]="KeyP",e[e.KeyQ=47]="KeyQ",e[e.KeyR=48]="KeyR",e[e.KeyS=49]="KeyS",e[e.KeyT=50]="KeyT",e[e.KeyU=51]="KeyU",e[e.KeyV=52]="KeyV",e[e.KeyW=53]="KeyW",e[e.KeyX=54]="KeyX",e[e.KeyY=55]="KeyY",e[e.KeyZ=56]="KeyZ",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.F20=78]="F20",e[e.F21=79]="F21",e[e.F22=80]="F22",e[e.F23=81]="F23",e[e.F24=82]="F24",e[e.NumLock=83]="NumLock",e[e.ScrollLock=84]="ScrollLock",e[e.Semicolon=85]="Semicolon",e[e.Equal=86]="Equal",e[e.Comma=87]="Comma",e[e.Minus=88]="Minus",e[e.Period=89]="Period",e[e.Slash=90]="Slash",e[e.Backquote=91]="Backquote",e[e.BracketLeft=92]="BracketLeft",e[e.Backslash=93]="Backslash",e[e.BracketRight=94]="BracketRight",e[e.Quote=95]="Quote",e[e.OEM_8=96]="OEM_8",e[e.IntlBackslash=97]="IntlBackslash",e[e.Numpad0=98]="Numpad0",e[e.Numpad1=99]="Numpad1",e[e.Numpad2=100]="Numpad2",e[e.Numpad3=101]="Numpad3",e[e.Numpad4=102]="Numpad4",e[e.Numpad5=103]="Numpad5",e[e.Numpad6=104]="Numpad6",e[e.Numpad7=105]="Numpad7",e[e.Numpad8=106]="Numpad8",e[e.Numpad9=107]="Numpad9",e[e.NumpadMultiply=108]="NumpadMultiply",e[e.NumpadAdd=109]="NumpadAdd",e[e.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",e[e.NumpadSubtract=111]="NumpadSubtract",e[e.NumpadDecimal=112]="NumpadDecimal",e[e.NumpadDivide=113]="NumpadDivide",e[e.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",e[e.ABNT_C1=115]="ABNT_C1",e[e.ABNT_C2=116]="ABNT_C2",e[e.AudioVolumeMute=117]="AudioVolumeMute",e[e.AudioVolumeUp=118]="AudioVolumeUp",e[e.AudioVolumeDown=119]="AudioVolumeDown",e[e.BrowserSearch=120]="BrowserSearch",e[e.BrowserHome=121]="BrowserHome",e[e.BrowserBack=122]="BrowserBack",e[e.BrowserForward=123]="BrowserForward",e[e.MediaTrackNext=124]="MediaTrackNext",e[e.MediaTrackPrevious=125]="MediaTrackPrevious",e[e.MediaStop=126]="MediaStop",e[e.MediaPlayPause=127]="MediaPlayPause",e[e.LaunchMediaPlayer=128]="LaunchMediaPlayer",e[e.LaunchMail=129]="LaunchMail",e[e.LaunchApp2=130]="LaunchApp2",e[e.Clear=131]="Clear",e[e.MAX_VALUE=132]="MAX_VALUE"}(x||(x={})),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(k||(k={})),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(L||(L={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(E||(E={})),function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"}(M||(M={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXTAREA=1]="TEXTAREA",e[e.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",e[e.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",e[e.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",e[e.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",e[e.CONTENT_TEXT=6]="CONTENT_TEXT",e[e.CONTENT_EMPTY=7]="CONTENT_EMPTY",e[e.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",e[e.CONTENT_WIDGET=9]="CONTENT_WIDGET",e[e.OVERVIEW_RULER=10]="OVERVIEW_RULER",e[e.SCROLLBAR=11]="SCROLLBAR",e[e.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",e[e.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(T||(T={})),function(e){e[e.AIGenerated=1]="AIGenerated"}(D||(D={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(N||(N={})),function(e){e[e.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",e[e.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",e[e.TOP_CENTER=2]="TOP_CENTER"}(I||(I={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(A||(A={})),function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"}(R||(R={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"}(P||(P={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"}(O||(O={})),function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"}(F||(F={})),function(e){e[e.Smooth=0]="Smooth",e[e.Immediate=1]="Immediate"}(B||(B={})),function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"}(z||(z={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(V||(V={})),function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(W||(W={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(H||(H={})),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(U||(U={})),function(e){e[e.Deprecated=1]="Deprecated"}(j||(j={})),function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"}(G||(G={})),function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(K||(K={})),function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}($||($={})),function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"}(q||(q={}))},7638:(e,t,i)=>{"use strict";i.d(t,{E$:()=>o,HP:()=>h,Ic:()=>d,U0:()=>r,Wn:()=>n,bg:()=>a,mS:()=>l,uK:()=>s,vn:()=>c});class n{constructor(){this.changeType=1}}class s{static applyInjectedText(e,t){if(!t||0===t.length)return e;let i="",n=0;for(const s of t)i+=e.substring(n,s.column-1),n=s.column-1,i+=s.options.content;return i+=e.substring(n),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new s(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new s(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber)),t}constructor(e,t,i,n,s){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=s}}class r{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class o{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class a{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class l{constructor(){this.changeType=5}}class h{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++){if(this.changes[t].changeType===e)return!0}return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new h(i,n,s,r)}}class c{constructor(e){this.changes=e}}class d{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=h.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=d._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new d(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:i,eol:n,isEolChange:e.isEolChange&&t.isEolChange,versionId:s,isUndoing:r,isRedoing:o,isFlush:a}}}},1926:(e,t,i)=>{"use strict";var n;i.d(t,{N6:()=>n,TH:()=>s,pv:()=>r}),function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(n||(n={}));class s{constructor(e,t,i,n,s,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,-1!==e===(-1!==t))throw new Error}}class r{constructor(e,t){this.top=e,this.endColumn=t}}},5512:(e,t,i)=>{"use strict";i.d(t,{f:()=>s});var n=i(5477);class s{static#e=(()=>this.defaultTokenMetadata=33587200)();static createEmpty(e,t){const i=s.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new s(n,e,t)}static createFromTextAndMetadata(e,t){let i=0,n="";const r=new Array;for(const{text:s,metadata:o}of e)r.push(i+s.length,o),i+=s.length,n+=s;return new s(new Uint32Array(r),n,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof s&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,t,i){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;const n=t<<1,s=n+(i<<1);for(let r=n;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[1+(e<<1)]}getLanguageId(e){const t=this._tokens[1+(e<<1)],i=n.x.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[1+(e<<1)];return n.x.getTokenType(t)}getForeground(e){const t=this._tokens[1+(e<<1)];return n.x.getForeground(t)}getClassName(e){const t=this._tokens[1+(e<<1)];return n.x.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[1+(e<<1)];return n.x.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[1+(e<<1)];return n.x.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return s.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new r(this,e,t,i)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let n=0;n<i;n++)e[n<<1]=e[n+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const s=i+Math.floor((n-i)/2),r=e[s<<1];if(r===t)return s+1;r<t?i=s+1:r>t&&(n=s)}return i}withInserted(e){if(0===e.length)return this;let t=0,i=0,n="";const r=new Array;let o=0;for(;;){const s=t<this._tokensCount?this._tokens[t<<1]:-1,a=i<e.length?e[i]:null;if(-1!==s&&(null===a||s<=a.offset)){n+=this._text.substring(o,s);const e=this._tokens[1+(t<<1)];r.push(n.length,e),t++,o=s}else{if(!a)break;if(a.offset>o){n+=this._text.substring(o,a.offset);const e=this._tokens[1+(t<<1)];r.push(n.length,e),o=a.offset}n+=a.text,r.push(n.length,a.tokenMetadata),i++}}return new s(new Uint32Array(r),n,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}}class r{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r;s++){if(e.getStartOffset(s)>=i)break;this._tokensCount++}}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof r&&(this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),n=this._source.getEndOffset(t);let s=this._source.getTokenText(t);return i<this._startOffset&&(s=s.substring(this._startOffset-i)),n>this._endOffset&&(s=s.substring(0,s.length-(n-this._endOffset))),s}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}},1266:(e,t,i)=>{"use strict";function n(){return globalThis._VSCODE_NLS_MESSAGES}function s(){return globalThis._VSCODE_NLS_LANGUAGE}i.d(t,{i8:()=>s,Ec:()=>n,kg:()=>a});const r="pseudo"===s()||"undefined"!==typeof document&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function o(e,t){let i;return i=0===t.length?e:e.replace(/\{(\d+)\}/g,((e,i)=>{const n=i[0],s=t[n];let r=e;return"string"===typeof s?r=s:"number"!==typeof s&&"boolean"!==typeof s&&void 0!==s&&null!==s||(r=String(s)),r})),r&&(i="\uff3b"+i.replace(/[aouei]/g,"$&$&")+"\uff3d"),i}function a(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return o("number"===typeof e?l(e,t):t,n)}function l(e,t){const i=n()?.[e];if("string"!==typeof i){if("string"===typeof t)return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}},5968:(e,t,i)=>{"use strict";i.d(t,{Mo:()=>h,ad:()=>s,gD:()=>l,iB:()=>o,kW:()=>r,pG:()=>n});const n=(0,i(9398).u1)("configurationService");function s(e,t){const i=Object.create(null);for(const n in e)r(i,n,e[n],t);return i}function r(e,t,i,n){const s=t.split("."),r=s.pop();let o=e;for(let l=0;l<s.length;l++){const e=s[l];let i=o[e];switch(typeof i){case"undefined":i=o[e]=Object.create(null);break;case"object":if(null===i)return void n(`Ignoring ${t} as ${s.slice(0,l+1).join(".")} is null`);break;default:return void n(`Ignoring ${t} as ${s.slice(0,l+1).join(".")} is ${JSON.stringify(i)}`)}o=i}if("object"===typeof o&&null!==o)try{o[r]=i}catch(a){n(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function o(e,t){a(e,t.split("."))}function a(e,t){const i=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(i)){const n=e[i];"object"!==typeof n||Array.isArray(n)||(a(n,t),0===Object.keys(n).length&&delete e[i])}}else delete e[i]}function l(e,t,i){const n=function(e,t){let i=e;for(const n of t){if("object"!==typeof i||null===i)return;i=i[n]}return i}(e,t.split("."));return"undefined"===typeof n?i:n}function h(e){return e.replace(/[\[\]]/g,"")}},3515:(e,t,i)=>{"use strict";i.d(t,{Fd:()=>c,Gv:()=>S,rC:()=>C});var n=i(4961),s=i(9563),r=i(4622),o=i(1266),a=i(5968),l=i(5403),h=i(5050);const c={Configuration:"base.contributions.configuration"},d={properties:{},patternProperties:{}},u={properties:{},patternProperties:{}},g={properties:{},patternProperties:{}},p={properties:{},patternProperties:{}},f={properties:{},patternProperties:{}},m={properties:{},patternProperties:{}},_="vscode://schemas/settings/resourceLanguage",v=h.O.as(l.F.JSONContribution);const b="\\[([^\\]]+)\\]",y=new RegExp(b,"g"),w=`^(${b})+$`,C=new RegExp(w);function S(e){const t=[];if(C.test(e)){let i=y.exec(e);for(;i?.length;){const n=i[1].trim();n&&t.push(n),i=y.exec(e)}}return(0,n.dM)(t)}const x=new class{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new s.vl,this._onDidUpdateConfiguration=new s.vl,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:o.kg("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},v.registerSchema(_,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.registerConfigurations([e],t)}registerConfigurations(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new Set;this.doRegisterConfigurations(e,t,i),v.registerSchema(_,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:n,source:s}of e)for(const e in n){t.add(e);const r=this.configurationDefaultsOverrides.get(e)??this.configurationDefaultsOverrides.set(e,{configurationDefaultOverrides:[]}).get(e),o=n[e];if(r.configurationDefaultOverrides.push({value:o,source:s}),C.test(e)){const t=this.mergeDefaultConfigurationsForOverrideIdentifier(e,o,s,r.configurationDefaultOverrideValue);if(!t)continue;r.configurationDefaultOverrideValue=t,this.updateDefaultOverrideProperty(e,t,s),i.push(...S(e))}else{const t=this.mergeDefaultConfigurationsForConfigurationProperty(e,o,s,r.configurationDefaultOverrideValue);if(!t)continue;r.configurationDefaultOverrideValue=t;const i=this.configurationProperties[e];i&&(this.updatePropertyDefaultValue(e,i),this.updateSchema(e,i))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const n={type:"object",default:t.value,description:o.kg("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",(0,a.Mo)(e)),$ref:_,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=n,this.defaultLanguageConfigurationOverridesNode.properties[e]=n}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,n){const s=n?.value||{},o=n?.source??new Map;if(o instanceof Map){for(const e of Object.keys(t)){const n=t[e];if(r.Gv(n)&&(r.b0(s[e])||r.Gv(s[e]))){if(s[e]={...s[e]??{},...n},i)for(const t in n)o.set(`${e}.${t}`,i)}else s[e]=n,i?o.set(e,i):o.delete(e)}return{value:s,source:o}}console.error("objectConfigurationSources is not a Map")}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,n){const s=this.configurationProperties[e],o=n?.value??s?.defaultDefaultValue;let a=i;if(r.Gv(t)&&(void 0!==s&&"object"===s.type||void 0===s&&(r.b0(o)||r.Gv(o)))){if(a=n?.source??new Map,!(a instanceof Map))return void console.error("defaultValueSource is not a Map");for(const n in t)i&&a.set(`${e}.${n}`,i);t={...r.Gv(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach((e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,i),this.configurationContributors.push(e),this.registerJSONConfiguration(e)}))}validateAndRegisterProperties(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=arguments.length>5?arguments[5]:void 0;s=r.z(e.scope)?s:e.scope;const a=e.properties;if(a)for(const h in a){const e=a[h];t&&k(h,e)?delete a[h]:(e.source=i,e.defaultDefaultValue=a[h].default,this.updatePropertyDefaultValue(h,e),C.test(h)?e.scope=void 0:(e.scope=r.z(e.scope)?s:e.scope,e.restricted=r.z(e.restricted)?!!n?.includes(h):e.restricted),!a[h].hasOwnProperty("included")||a[h].included?(this.configurationProperties[h]=a[h],a[h].policy?.name&&this.policyConfigurations.set(a[h].policy.name,h),!a[h].deprecationMessage&&a[h].markdownDeprecationMessage&&(a[h].deprecationMessage=a[h].markdownDeprecationMessage),o.add(h)):(this.excludedConfigurationProperties[h]=a[h],delete a[h]))}const l=e.allOf;if(l)for(const r of l)this.validateAndRegisterProperties(r,t,i,n,s,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=e=>{const i=e.properties;if(i)for(const t in i)this.updateSchema(t,i[t]);const n=e.allOf;n?.forEach(t)};t(e)}updateSchema(e,t){switch(d.properties[e]=t,t.scope){case 1:u.properties[e]=t;break;case 2:g.properties[e]=t;break;case 6:p.properties[e]=t;break;case 3:f.properties[e]=t;break;case 4:m.properties[e]=t;break;case 5:m.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:o.kg("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:o.kg("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:_};this.updatePropertyDefaultValue(t,i),d.properties[t]=i,u.properties[t]=i,g.properties[t]=i,p.properties[t]=i,f.properties[t]=i,m.properties[t]=i}}registerOverridePropertyPatternKey(){const e={type:"object",description:o.kg("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:o.kg("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:_};d.patternProperties[w]=e,u.patternProperties[w]=e,g.patternProperties[w]=e,p.patternProperties[w]=e,f.patternProperties[w]=e,m.patternProperties[w]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue;let n,s;!i||t.disallowConfigurationDefault&&i.source||(n=i.value,s=i.source),r.b0(n)&&(n=t.defaultDefaultValue,s=void 0),r.b0(n)&&(n=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=n,t.defaultValueSource=s}};function k(e,t){return e.trim()?C.test(e)?o.kg("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==x.getConfigurationProperties()[e]?o.kg("config.property.duplicate","Cannot register '{0}'. This property is already registered.",e):t.policy?.name&&void 0!==x.getPolicyConfigurations().get(t.policy?.name)?o.kg("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,t.policy?.name,x.getPolicyConfigurations().get(t.policy?.name)):null:o.kg("config.property.empty","Cannot register an empty property")}h.O.add(c.Configuration,x)},7039:(e,t,i)=>{"use strict";i.d(t,{M$:()=>x,fN:()=>K,N1:()=>G,jQ:()=>k,M0:()=>Q});var n=i(1540),s=i(6637),r=i(2240),o=i(1266);function a(){switch(arguments.length){case 1:return(0,o.kg)("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",arguments.length<=0?void 0:arguments[0]);case 2:return(0,o.kg)("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);case 3:return(0,o.kg)("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);default:return}}const l=(0,o.kg)("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),h=(0,o.kg)("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class c{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw(0,r.iH)(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static#e=(()=>this._regexFlags=new Set(["i","g","s","m","y","u"].map((e=>e.charCodeAt(0)))))();static#t=(()=>this._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]))();reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();){this._start=this._current;switch(this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const e=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:e})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const e=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:e})}else this._match(126)?this._addToken(9):this._error(a("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(a("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(a("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&(this._input.charCodeAt(this._current)===e&&(this._current++,!0))}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=c._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;39!==this._peek()&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(l):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length)return this._current=e,void this._error(h);const n=this._input.charCodeAt(e);if(t)t=!1;else{if(47===n&&!i){e++;break}91===n?i=!0:92===n?t=!0:93===n&&(i=!1)}e++}for(;e<this._input.length&&c._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}var d=i(9398);const u=new Map;u.set("false",!1),u.set("true",!0),u.set("isMac",n.zx),u.set("isLinux",n.j9),u.set("isWindows",n.uF),u.set("isWeb",n.HZ),u.set("isMacNative",n.zx&&!n.HZ),u.set("isEdge",n.UP),u.set("isFirefox",n.gm),u.set("isChrome",n.H8),u.set("isSafari",n.nr);const g=Object.prototype.hasOwnProperty,p={regexParsingWithErrorRecovery:!0},f=(0,o.kg)("contextkey.parser.error.emptyString","Empty context key expression"),m=(0,o.kg)("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),_=(0,o.kg)("contextkey.parser.error.noInAfterNot","'in' after 'not'."),v=(0,o.kg)("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),b=(0,o.kg)("contextkey.parser.error.unexpectedToken","Unexpected token"),y=(0,o.kg)("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),w=(0,o.kg)("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),C=(0,o.kg)("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");class S{static#e=(()=>this._parseError=new Error)();constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;this._config=e,this._scanner=new c,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(""!==e){this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const e=this._expr();if(!this._isAtEnd()){const e=this._peek(),t=17===e.type?y:void 0;throw this._parsingErrors.push({message:b,offset:e.offset,lexeme:c.getLexeme(e),additionalInfo:t}),S._parseError}return e}catch(t){if(t!==S._parseError)throw t;return}}else this._parsingErrors.push({message:f,offset:0,lexeme:"",additionalInfo:m})}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return 1===e.length?e[0]:x.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return 1===e.length?e[0]:x.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),E.INSTANCE;case 12:return this._advance(),M.INSTANCE;case 0:{this._advance();const e=this._expr();return this._consume(1,v),e?.negate()}case 17:return this._advance(),R.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),x.true();case 12:return this._advance(),x.false();case 0:{this._advance();const e=this._expr();return this._consume(1,v),e}case 17:{const n=e.lexeme;if(this._advance(),this._matchOne(9)){const e=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),10!==e.type)throw this._errExpectedButGot("REGEX",e);const i=e.lexeme,s=i.lastIndexOf("/"),r=s===i.length-1?void 0:this._removeFlagsGY(i.substring(s+1));let o;try{o=new RegExp(i.substring(1,s),r)}catch(t){throw this._errExpectedButGot("REGEX",e)}return V.create(n,o)}switch(e.type){case 10:case 19:{const i=[e.lexeme];this._advance();let s=this._peek(),r=0;for(let t=0;t<e.lexeme.length;t++)40===e.lexeme.charCodeAt(t)?r++:41===e.lexeme.charCodeAt(t)&&r--;for(;!this._isAtEnd()&&15!==s.type&&16!==s.type;){switch(s.type){case 0:r++;break;case 1:r--;break;case 10:case 18:for(let t=0;t<s.lexeme.length;t++)40===s.lexeme.charCodeAt(t)?r++:41===e.lexeme.charCodeAt(t)&&r--}if(r<0)break;i.push(c.getLexeme(s)),this._advance(),s=this._peek()}const o=i.join(""),a=o.lastIndexOf("/"),l=a===o.length-1?void 0:this._removeFlagsGY(o.substring(a+1));let h;try{h=new RegExp(o.substring(1,a),l)}catch(t){throw this._errExpectedButGot("REGEX",e)}return x.regex(n,h)}case 18:{const t=e.lexeme;this._advance();let r=null;if(!(0,s.AV)(t)){const n=t.indexOf("/"),s=t.lastIndexOf("/");if(n!==s&&n>=0){const o=t.slice(n+1,s),a="i"===t[s+1]?"i":"";try{r=new RegExp(o,a)}catch(i){throw this._errExpectedButGot("REGEX",e)}}}if(null===r)throw this._errExpectedButGot("REGEX",e);return V.create(n,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,_);const e=this._value();return x.notIn(n,e)}switch(this._peek().type){case 3:{this._advance();const e=this._value();if(18===this._previous().type)return x.equals(n,e);switch(e){case"true":return x.has(n);case"false":return x.not(n);default:return x.equals(n,e)}}case 4:{this._advance();const e=this._value();if(18===this._previous().type)return x.notEquals(n,e);switch(e){case"true":return x.not(n);case"false":return x.has(n);default:return x.notEquals(n,e)}}case 5:return this._advance(),B.create(n,this._value());case 6:return this._advance(),z.create(n,this._value());case 7:return this._advance(),O.create(n,this._value());case 8:return this._advance(),F.create(n,this._value());case 13:return this._advance(),x.in(n,this._value());default:return x.has(n)}}case 20:throw this._parsingErrors.push({message:w,offset:e.offset,lexeme:"",additionalInfo:C}),S._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return!!this._check(e)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const n=(0,o.kg)("contextkey.parser.error.expectedButGot","Expected: {0}\nReceived: '{1}'.",e,c.getLexeme(t)),s=t.offset,r=c.getLexeme(t);return this._parsingErrors.push({message:n,offset:s,lexeme:r,additionalInfo:i}),S._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return 20===this._peek().type}}class x{static false(){return E.INSTANCE}static true(){return M.INSTANCE}static has(e){return T.create(e)}static equals(e,t){return D.create(e,t)}static notEquals(e,t){return A.create(e,t)}static regex(e,t){return V.create(e,t)}static in(e,t){return N.create(e,t)}static notIn(e,t){return I.create(e,t)}static not(e){return R.create(e)}static and(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return U.create(t,null,!0)}static or(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return j.create(t,null,!0)}static#e=(()=>this._parser=new S({regexParsingWithErrorRecovery:!1}))();static deserialize(e){if(void 0===e||null===e)return;return this._parser.parse(e)}}function k(e,t){const i=e?e.substituteConstants():void 0,n=t?t.substituteConstants():void 0;return!i&&!n||!(!i||!n)&&i.equals(n)}function L(e,t){return e.cmp(t)}class E{static#e=(()=>this.INSTANCE=new E)();constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return M.INSTANCE}}class M{static#e=(()=>this.INSTANCE=new M)();constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return E.INSTANCE}}class T{static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=u.get(e);return"boolean"===typeof i?i?M.INSTANCE:E.INSTANCE:new T(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:$(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=u.get(this.key);return"boolean"===typeof e?e?M.INSTANCE:E.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=R.create(this.key,this)),this.negated}}class D{static create(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"===typeof t)return t?T.create(e,i):R.create(e,i);const n=u.get(e);if("boolean"===typeof n){return t===(n?"true":"false")?M.INSTANCE:E.INSTANCE}return new D(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=u.get(this.key);if("boolean"===typeof e){const t=e?"true":"false";return this.value===t?M.INSTANCE:E.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=A.create(this.key,this.value,this)),this.negated}}class N{static create(e,t){return new N(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:q(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):"string"===typeof i&&"object"===typeof t&&null!==t&&g.call(t,i)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=I.create(this.key,this.valueKey)),this.negated}}class I{static create(e,t){return new I(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=N.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type&&this._negated.equals(e._negated)}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class A{static create(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"===typeof t)return t?R.create(e,i):T.create(e,i);const n=u.get(e);if("boolean"===typeof n){return t===(n?"true":"false")?E.INSTANCE:M.INSTANCE}return new A(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=u.get(this.key);if("boolean"===typeof e){const t=e?"true":"false";return this.value===t?E.INSTANCE:M.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D.create(this.key,this.value,this)),this.negated}}class R{static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=u.get(e);return"boolean"===typeof i?i?E.INSTANCE:M.INSTANCE:new R(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:$(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=u.get(this.key);return"boolean"===typeof e?e?E.INSTANCE:M.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=T.create(this.key,this)),this.negated}}function P(e,t){if("string"===typeof e){const t=parseFloat(e);isNaN(t)||(e=t)}return"string"===typeof e||"number"===typeof e?t(e):E.INSTANCE}class O{static create(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return P(t,(t=>new O(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=z.create(this.key,this.value,this)),this.negated}}class F{static create(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return P(t,(t=>new F(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=B.create(this.key,this.value,this)),this.negated}}class B{static create(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return P(t,(t=>new B(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=F.create(this.key,this.value,this)),this.negated}}class z{static create(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return P(t,(t=>new z(e,t,i)))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:q(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=O.create(this.key,this.value,this)),this.negated}}class V{static create(e,t){return new V(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=W.create(this)),this.negated}}class W{static create(e){return new W(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function H(e){let t=null;for(let i=0,n=e.length;i<n;i++){const n=e[i].substituteConstants();if(e[i]!==n&&null===t){t=[];for(let n=0;n<i;n++)t[n]=e[n]}null!==t&&(t[i]=n)}return null===t?e:t}class U{static create(e,t,i){return U._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=L(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=H(this.expr);return e===this.expr?this:U.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const n=[];let s=!1;for(const r of e)if(r)if(1!==r.type){if(0===r.type)return E.INSTANCE;6!==r.type?n.push(r):n.push(...r.expr)}else s=!0;if(0===n.length&&s)return M.INSTANCE;if(0!==n.length){if(1===n.length)return n[0];n.sort(L);for(let e=1;e<n.length;e++)n[e-1].equals(n[e])&&(n.splice(e,1),e--);if(1===n.length)return n[0];for(;n.length>1;){const e=n[n.length-1];if(9!==e.type)break;n.pop();const t=n.pop(),s=0===n.length,r=j.create(e.expr.map((e=>U.create([e,t],null,i))),null,s);r&&(n.push(r),n.sort(L))}if(1===n.length)return n[0];if(i){for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++)if(n[e].negate().equals(n[t]))return E.INSTANCE;if(1===n.length)return n[0]}return new U(n,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=j.create(e,this,!0)}return this.negated}}class j{static create(e,t,i){return j._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const i=L(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=H(this.expr);return e===this.expr?this:j.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],s=!1;if(e){for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i)if(0!==i.type){if(1===i.type)return M.INSTANCE;9!==i.type?n.push(i):n=n.concat(i.expr)}else s=!0}if(0===n.length&&s)return E.INSTANCE;n.sort(L)}if(0!==n.length){if(1===n.length)return n[0];for(let e=1;e<n.length;e++)n[e-1].equals(n[e])&&(n.splice(e,1),e--);if(1===n.length)return n[0];if(i){for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++)if(n[e].negate().equals(n[t]))return M.INSTANCE;if(1===n.length)return n[0]}return new j(n,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const e of Y(t))for(const t of Y(i))n.push(U.create([e,t],null,!1));e.unshift(j.create(n,null,!1))}this.negated=j.create(e,this,!0)}return this.negated}}class G extends T{static#e=(()=>this._info=[])();static all(){return G._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,"object"===typeof i?G._info.push({...i,key:e}):!0!==i&&G._info.push({key:e,description:i,type:null!==t&&void 0!==t?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return D.create(this.key,e)}}const K=(0,d.u1)("contextKeyService");function $(e,t){return e<t?-1:e>t?1:0}function q(e,t,i,n){return e<i?-1:e>i?1:t<n?-1:t>n?1:0}function Q(e,t){if(0===e.type||1===t.type)return!0;if(9===e.type)return 9===t.type&&X(e.expr,t.expr);if(9===t.type){for(const i of t.expr)if(Q(e,i))return!0;return!1}if(6===e.type){if(6===t.type)return X(t.expr,e.expr);for(const i of e.expr)if(Q(i,t))return!0;return!1}return e.equals(t)}function X(e,t){let i=0,n=0;for(;i<e.length&&n<t.length;){const s=e[i].cmp(t[n]);if(s<0)return!1;0===s?(i++,n++):n++}return i===e.length}function Y(e){return 9===e.type?e.expr:[e]}},7974:(e,t,i)=>{"use strict";i.d(t,{k:()=>n});const n=(0,i(9398).u1)("environmentService")},3601:(e,t,i)=>{"use strict";i.d(t,{d:()=>n});class n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}},8357:(e,t,i)=>{"use strict";i.d(t,{N:()=>o,v:()=>r});var n=i(3601);const s=[];function r(e,t,i){t instanceof n.d||(t=new n.d(t,[],Boolean(i))),s.push([e,t])}function o(){return s}},9398:(e,t,i)=>{"use strict";var n;i.d(t,{_$:()=>n,_Y:()=>s,u1:()=>r}),function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(n||(n={}));const s=r("instantiationService");function r(e){if(n.serviceIds.has(e))return n.serviceIds.get(e);const t=function(e,i,s){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,i){t[n.DI_TARGET]===t?t[n.DI_DEPENDENCIES].push({id:e,index:i}):(t[n.DI_DEPENDENCIES]=[{id:e,index:i}],t[n.DI_TARGET]=t)}(t,e,s)};return t.toString=()=>e,n.serviceIds.set(e,t),t}},5403:(e,t,i)=>{"use strict";i.d(t,{F:()=>r});var n=i(9563),s=i(5050);const r={JSONContribution:"base.contributions.json"};const o=new class{constructor(){this._onDidChangeSchema=new n.vl,this.schemasById={}}registerSchema(e,t){var i;this.schemasById[(i=e,i.length>0&&"#"===i.charAt(i.length-1)?i.substring(0,i.length-1):i)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};s.O.add(r.JSONContribution,o)},4888:(e,t,i)=>{"use strict";i.d(t,{$b:()=>a,Cr:()=>c,Dk:()=>d,rr:()=>o});var n=i(9563),s=i(4663),r=i(7039);const o=(0,i(9398).u1)("logService");var a;!function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(a||(a={}));const l=a.Info;class h extends s.jG{constructor(){super(...arguments),this.level=l,this._onDidChangeLogLevel=this._register(new n.vl),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==a.Off&&this.level<=e}}class c extends h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(),this.useColors=t,this.setLevel(e)}trace(e){if(this.checkLogLevel(a.Trace)){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.useColors?console.log("%cTRACE","color: #888",e,...i):console.log(e,...i)}}debug(e){if(this.checkLogLevel(a.Debug)){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...i):console.log(e,...i)}}info(e){if(this.checkLogLevel(a.Info)){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.useColors?console.log("%c INFO","color: #33f",e,...i):console.log(e,...i)}}warn(e){if(this.checkLogLevel(a.Warning)){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.useColors?console.log("%c WARN","color: #993",e,...i):console.log(e,...i)}}error(e){if(this.checkLogLevel(a.Error)){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.useColors?console.log("%c  ERR","color: #f33",e,...i):console.error(e,...i)}}}class d extends h{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of this.loggers)s.trace(e,...i)}debug(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of this.loggers)s.debug(e,...i)}info(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of this.loggers)s.info(e,...i)}warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of this.loggers)s.warn(e,...i)}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(const s of this.loggers)s.error(e,...i)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}new r.N1("logLevel",function(e){switch(e){case a.Trace:return"trace";case a.Debug:return"debug";case a.Info:return"info";case a.Warning:return"warn";case a.Error:return"error";case a.Off:return"off"}}(a.Info))},7854:(e,t,i)=>{"use strict";i.d(t,{DR:()=>l,cj:()=>n});var n,s,r=i(7848),o=i(1266),a=i(9398);!function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(n||(n={})),function(e){e.compare=function(e,t){return t-e};const t=Object.create(null);t[e.Error]=(0,o.kg)("sev.error","Error"),t[e.Warning]=(0,o.kg)("sev.warning","Warning"),t[e.Info]=(0,o.kg)("sev.info","Info"),e.toString=function(e){return t[e]||""},e.fromSeverity=function(t){switch(t){case r.A.Error:return e.Error;case r.A.Warning:return e.Warning;case r.A.Info:return e.Info;case r.A.Ignore:return e.Hint}},e.toSeverity=function(t){switch(t){case e.Error:return r.A.Error;case e.Warning:return r.A.Warning;case e.Info:return r.A.Info;case e.Hint:return r.A.Ignore}}}(n||(n={})),function(e){const t="";function i(e,i){const s=[t];return e.source?s.push(e.source.replace("\xa6","\\\xa6")):s.push(t),e.code?"string"===typeof e.code?s.push(e.code.replace("\xa6","\\\xa6")):s.push(e.code.value.replace("\xa6","\\\xa6")):s.push(t),void 0!==e.severity&&null!==e.severity?s.push(n.toString(e.severity)):s.push(t),e.message&&i?s.push(e.message.replace("\xa6","\\\xa6")):s.push(t),void 0!==e.startLineNumber&&null!==e.startLineNumber?s.push(e.startLineNumber.toString()):s.push(t),void 0!==e.startColumn&&null!==e.startColumn?s.push(e.startColumn.toString()):s.push(t),void 0!==e.endLineNumber&&null!==e.endLineNumber?s.push(e.endLineNumber.toString()):s.push(t),void 0!==e.endColumn&&null!==e.endColumn?s.push(e.endColumn.toString()):s.push(t),s.push(t),s.join("\xa6")}e.makeKey=function(e){return i(e,!0)},e.makeKeyOptionalMessage=i}(s||(s={}));const l=(0,a.u1)("markerService")},5050:(e,t,i)=>{"use strict";i.d(t,{O:()=>r});var n=i(7289),s=i(4622);const r=new class{constructor(){this.data=new Map}add(e,t){n.ok(s.Kg(e)),n.ok(s.Gv(t)),n.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}},2583:(e,t,i)=>{"use strict";i.d(t,{FdG:()=>g,buw:()=>T,GuP:()=>d,Bbc:()=>c,HP_:()=>u,WMx:()=>N,zRE:()=>I,sAS:()=>be,vV$:()=>_e,etE:()=>ve,mc0:()=>me,XJc:()=>rt,raQ:()=>at,G_h:()=>nt,T9h:()=>ot,xOA:()=>ht,Inn:()=>lt,nZG:()=>ct,Q1$:()=>st,OcU:()=>vt,C5U:()=>yt,t0B:()=>bt,b1q:()=>M,EY1:()=>ae,ZEf:()=>le,Gj6:()=>he,ld8:()=>de,$BZ:()=>ue,GNm:()=>ce,YtV:()=>B,Rbi:()=>U,Ubg:()=>ee,By2:()=>z,i61:()=>Q,oZ8:()=>ne,tan:()=>Z,IIb:()=>q,pOz:()=>$,rm4:()=>Y,QwA:()=>J,whs:()=>j,Stt:()=>K,Hng:()=>G,CgL:()=>V,sIe:()=>H,FiB:()=>W,tAP:()=>E,c1f:()=>He,uNK:()=>Ve,$$0:()=>Ue,L4c:()=>Fe,Zgs:()=>ze,cws:()=>Be,_$n:()=>Xe,eYZ:()=>Ze,h9z:()=>Ye,I$A:()=>je,YSW:()=>Ke,L9Z:()=>Ge,ULt:()=>$e,C1n:()=>Qe,T5N:()=>qe,HDX:()=>wt,zUX:()=>St,Qfh:()=>xt,eUu:()=>Ct,Rjz:()=>Tt,GVV:()=>Dt,fED:()=>Nt,yIp:()=>Vt,Yoe:()=>zt,pnl:()=>Gt,P9Z:()=>$t,fiM:()=>Kt,H8q:()=>qt,gtq:()=>Mt,VFX:()=>kt,efJ:()=>Lt,p7Y:()=>Et,lO1:()=>Ft,QRv:()=>Bt,CQ3:()=>Pt,ijf:()=>Ot,uNx:()=>It,f4y:()=>At,C9U:()=>Rt,c6Y:()=>ti,g$2:()=>Jt,dd_:()=>ei,Ux$:()=>ni,SNb:()=>si,pmr:()=>ii,D7X:()=>ri,ILr:()=>Pe,yLC:()=>Re,K1Z:()=>Oe,KoI:()=>Ie,yr0:()=>Ne,uMG:()=>Ae,iwL:()=>ci,NBf:()=>hi,tYX:()=>Ee,bNw:()=>Te,JPj:()=>Me,BTi:()=>F,ELA:()=>oi,HJZ:()=>ai,AlL:()=>pi,nH:()=>ui,c7i:()=>gi,er1:()=>li,Ukx:()=>ut,Ips:()=>gt,jOE:()=>dt,xWN:()=>ft,ZBU:()=>mt,kPT:()=>pt,jr9:()=>_t,x1A:()=>f,bXl:()=>A,mhZ:()=>O,gnV:()=>R,cI_:()=>P,rvE:()=>Je,HcB:()=>it,yqq:()=>tt,lWP:()=>et,k5u:()=>Yt,sbQ:()=>Zt,vwp:()=>D,pft:()=>Xt,U4U:()=>Qt,DSL:()=>pe,f9l:()=>ge});var n=i(7289),s=i(8591),r=i(3800),o=i(9563),a=i(5403),l=i(5050),h=i(1266);function c(e){return`--vscode-${e.replace(/\./g,"-")}`}function d(e){return`var(${c(e)})`}function u(e,t){return`var(${c(e)}, ${t})`}const g={ColorContribution:"base.contributions.colors"};const p=new class{constructor(){this._onDidChangeSchema=new o.vl,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;const r={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:s};this.colorsById[e]=r;const o={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(o.deprecationMessage=s),n&&(o.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",o.patternErrorMessage=h.kg("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[o,{type:"string",const:"default",description:h.kg("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map((e=>this.colorsById[e]))}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i?.defaults){return w(null!==(n=i.defaults)&&"object"===typeof n&&"light"in n&&"dark"in n?i.defaults[t.type]:i.defaults,t)}var n}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort(((e,t)=>{const i=-1===e.indexOf(".")?0:1,n=-1===t.indexOf(".")?0:1;return i!==n?i-n:e.localeCompare(t)})).map((e=>`- \`${e}\`: ${this.colorsById[e].description}`)).join("\n")}};function f(e,t,i,n,s){return p.registerColor(e,t,i,n,s)}function m(e,t){return{op:0,value:e,factor:t}}function _(e,t){return{op:1,value:e,factor:t}}function v(e,t){return{op:2,value:e,factor:t}}function b(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return{op:4,values:t}}function y(e,t,i,n){return{op:5,value:e,background:t,factor:i,transparency:n}}function w(e,t){if(null!==e)return"string"===typeof e?"#"===e[0]?r.Q1.fromHex(e):t.getColor(e):e instanceof r.Q1?e:"object"===typeof e?function(e,t){switch(e.op){case 0:return w(e.value,t)?.darken(e.factor);case 1:return w(e.value,t)?.lighten(e.factor);case 2:return w(e.value,t)?.transparent(e.factor);case 3:{const i=w(e.background,t);return i?w(e.value,t)?.makeOpaque(i):w(e.value,t)}case 4:for(const i of e.values){const e=w(i,t);if(e)return e}return;case 6:return w(t.defines(e.if)?e.then:e.else,t);case 5:{const i=w(e.value,t);if(!i)return;const n=w(e.background,t);return n?i.isDarkerThan(n)?r.Q1.getLighterColor(i,n,e.factor).transparent(e.transparency):r.Q1.getDarkerColor(i,n,e.factor).transparent(e.transparency):i.transparent(e.factor*e.transparency)}default:throw(0,n.xb)(e)}}(e,t):void 0}l.O.add(g.ColorContribution,p);const C="vscode://schemas/workbench-colors",S=l.O.as(a.F.JSONContribution);S.registerSchema(C,p.getColorSchema());const x=new s.uC((()=>S.notifySchemaChanged(C)),200);p.onDidChangeSchema((()=>{x.isScheduled()||x.schedule()}));const k=f("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},h.kg("foreground","Overall foreground color. This color is only used if not overridden by a component.")),L=(f("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},h.kg("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),f("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},h.kg("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),f("descriptionForeground",{light:"#717171",dark:v(k,.7),hcDark:v(k,.7),hcLight:v(k,.7)},h.kg("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),f("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},h.kg("iconForeground","The default color for icons in the workbench."))),E=f("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},h.kg("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),M=f("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},h.kg("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),T=f("contrastActiveBorder",{light:null,dark:null,hcDark:E,hcLight:E},h.kg("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),D=(f("selection.background",null,h.kg("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),f("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},h.kg("textLinkForeground","Foreground color for links in text."))),N=(f("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},h.kg("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),f("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:r.Q1.black,hcLight:"#292929"},h.kg("textSeparatorForeground","Color for text separators.")),f("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},h.kg("textPreformatForeground","Foreground color for preformatted text segments.")),f("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},h.kg("textPreformatBackground","Background color for preformatted text segments.")),f("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},h.kg("textBlockQuoteBackground","Background color for block quotes in text.")),f("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:r.Q1.white,hcLight:"#292929"},h.kg("textBlockQuoteBorder","Border color for block quotes in text.")),f("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:r.Q1.black,hcLight:"#F2F2F2"},h.kg("textCodeBlockBackground","Background color for code blocks in text.")),f("sash.hoverBorder",E,h.kg("sashActiveBorder","Border color of active sashes.")),f("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:r.Q1.black,hcLight:"#0F4A85"},h.kg("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count."))),I=f("badge.foreground",{dark:r.Q1.white,light:"#333",hcDark:r.Q1.white,hcLight:r.Q1.white},h.kg("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),A=f("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},h.kg("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),R=f("scrollbarSlider.background",{dark:r.Q1.fromHex("#797979").transparent(.4),light:r.Q1.fromHex("#646464").transparent(.4),hcDark:v(M,.6),hcLight:v(M,.4)},h.kg("scrollbarSliderBackground","Scrollbar slider background color.")),P=f("scrollbarSlider.hoverBackground",{dark:r.Q1.fromHex("#646464").transparent(.7),light:r.Q1.fromHex("#646464").transparent(.7),hcDark:v(M,.8),hcLight:v(M,.8)},h.kg("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),O=f("scrollbarSlider.activeBackground",{dark:r.Q1.fromHex("#BFBFBF").transparent(.4),light:r.Q1.fromHex("#000000").transparent(.6),hcDark:M,hcLight:M},h.kg("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),F=f("progressBar.background",{dark:r.Q1.fromHex("#0E70C0"),light:r.Q1.fromHex("#0E70C0"),hcDark:M,hcLight:M},h.kg("progressBarBackground","Background color of the progress bar that can show for long running operations.")),B=f("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:r.Q1.black,hcLight:r.Q1.white},h.kg("editorBackground","Editor background color.")),z=f("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:r.Q1.white,hcLight:k},h.kg("editorForeground","Editor default foreground color.")),V=(f("editorStickyScroll.background",B,h.kg("editorStickyScrollBackground","Background color of sticky scroll in the editor")),f("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:r.Q1.fromHex("#0F4A85").transparent(.1)},h.kg("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),f("editorStickyScroll.border",{dark:null,light:null,hcDark:M,hcLight:M},h.kg("editorStickyScrollBorder","Border color of sticky scroll in the editor")),f("editorStickyScroll.shadow",A,h.kg("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),f("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:r.Q1.white},h.kg("editorWidgetBackground","Background color of editor widgets, such as find/replace."))),W=f("editorWidget.foreground",k,h.kg("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),H=f("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:M,hcLight:M},h.kg("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),U=(f("editorWidget.resizeBorder",null,h.kg("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),f("editorError.background",null,h.kg("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),f("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},h.kg("editorError.foreground","Foreground color of error squigglies in the editor."))),j=(f("editorError.border",{dark:null,light:null,hcDark:r.Q1.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},h.kg("errorBorder","If set, color of double underlines for errors in the editor.")),f("editorWarning.background",null,h.kg("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0)),G=f("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},h.kg("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),K=f("editorWarning.border",{dark:null,light:null,hcDark:r.Q1.fromHex("#FFCC00").transparent(.8),hcLight:r.Q1.fromHex("#FFCC00").transparent(.8)},h.kg("warningBorder","If set, color of double underlines for warnings in the editor.")),$=(f("editorInfo.background",null,h.kg("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),f("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},h.kg("editorInfo.foreground","Foreground color of info squigglies in the editor."))),q=f("editorInfo.border",{dark:null,light:null,hcDark:r.Q1.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},h.kg("infoBorder","If set, color of double underlines for infos in the editor.")),Q=f("editorHint.foreground",{dark:r.Q1.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},h.kg("editorHint.foreground","Foreground color of hint squigglies in the editor.")),X=(f("editorHint.border",{dark:null,light:null,hcDark:r.Q1.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},h.kg("hintBorder","If set, color of double underlines for hints in the editor.")),f("editorLink.activeForeground",{dark:"#4E94CE",light:r.Q1.blue,hcDark:r.Q1.cyan,hcLight:"#292929"},h.kg("activeLinkForeground","Color of active links.")),f("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},h.kg("editorSelectionBackground","Color of the editor selection."))),Y=f("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:r.Q1.white},h.kg("editorSelectionForeground","Color of the selected text for high contrast.")),Z=f("editor.inactiveSelectionBackground",{light:v(X,.5),dark:v(X,.5),hcDark:v(X,.7),hcLight:v(X,.5)},h.kg("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),J=f("editor.selectionHighlightBackground",{light:y(X,B,.3,.6),dark:y(X,B,.3,.6),hcDark:null,hcLight:null},h.kg("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),ee=(f("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:T,hcLight:T},h.kg("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),f("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},h.kg("editorFindMatch","Color of the current search match.")),f("editor.findMatchForeground",null,h.kg("editorFindMatchForeground","Text color of the current search match.")),f("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},h.kg("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0)),te=(f("editor.findMatchHighlightForeground",null,h.kg("findMatchHighlightForeground","Foreground color of the other search matches."),!0),f("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},h.kg("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),f("editor.findMatchBorder",{light:null,dark:null,hcDark:T,hcLight:T},h.kg("editorFindMatchBorder","Border color of the current search match.")),f("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:T,hcLight:T},h.kg("findMatchHighlightBorder","Border color of the other search matches."))),ie=(f("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:v(T,.4),hcLight:v(T,.4)},h.kg("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),f("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},h.kg("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),f("editorHoverWidget.background",V,h.kg("hoverBackground","Background color of the editor hover."))),ne=(f("editorHoverWidget.foreground",W,h.kg("hoverForeground","Foreground color of the editor hover.")),f("editorHoverWidget.border",H,h.kg("hoverBorder","Border color of the editor hover."))),se=(f("editorHoverWidget.statusBarBackground",{dark:_(ie,.2),light:m(ie,.05),hcDark:V,hcLight:V},h.kg("statusBarBackground","Background color of the editor hover status bar.")),f("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:r.Q1.white,hcLight:r.Q1.black},h.kg("editorInlayHintForeground","Foreground color of inline hints"))),re=f("editorInlayHint.background",{dark:v(N,.1),light:v(N,.1),hcDark:v(r.Q1.white,.1),hcLight:v(N,.1)},h.kg("editorInlayHintBackground","Background color of inline hints")),oe=(f("editorInlayHint.typeForeground",se,h.kg("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),f("editorInlayHint.typeBackground",re,h.kg("editorInlayHintBackgroundTypes","Background color of inline hints for types")),f("editorInlayHint.parameterForeground",se,h.kg("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),f("editorInlayHint.parameterBackground",re,h.kg("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),f("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},h.kg("editorLightBulbForeground","The color used for the lightbulb actions icon."))),ae=(f("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},h.kg("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),f("editorLightBulbAi.foreground",oe,h.kg("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),f("editor.snippetTabstopHighlightBackground",{dark:new r.Q1(new r.bU(124,124,124,.3)),light:new r.Q1(new r.bU(10,50,100,.2)),hcDark:new r.Q1(new r.bU(124,124,124,.3)),hcLight:new r.Q1(new r.bU(10,50,100,.2))},h.kg("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),f("editor.snippetTabstopHighlightBorder",null,h.kg("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),f("editor.snippetFinalTabstopHighlightBackground",null,h.kg("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),f("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new r.Q1(new r.bU(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},h.kg("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),new r.Q1(new r.bU(155,185,85,.2))),le=new r.Q1(new r.bU(255,0,0,.2)),he=f("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},h.kg("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),ce=f("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},h.kg("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),de=(f("diffEditor.insertedLineBackground",{dark:ae,light:ae,hcDark:null,hcLight:null},h.kg("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),f("diffEditor.removedLineBackground",{dark:le,light:le,hcDark:null,hcLight:null},h.kg("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),f("diffEditorGutter.insertedLineBackground",null,h.kg("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),f("diffEditorGutter.removedLineBackground",null,h.kg("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),f("diffEditorOverview.insertedForeground",null,h.kg("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content."))),ue=f("diffEditorOverview.removedForeground",null,h.kg("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),ge=(f("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},h.kg("diffEditorInsertedOutline","Outline color for the text that got inserted.")),f("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},h.kg("diffEditorRemovedOutline","Outline color for text that got removed.")),f("diffEditor.border",{dark:null,light:null,hcDark:M,hcLight:M},h.kg("diffEditorBorder","Border color between the two text editors.")),f("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},h.kg("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),f("diffEditor.unchangedRegionBackground","sideBar.background",h.kg("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),f("diffEditor.unchangedRegionForeground","foreground",h.kg("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),f("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},h.kg("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),f("widget.shadow",{dark:v(r.Q1.black,.36),light:v(r.Q1.black,.16),hcDark:null,hcLight:null},h.kg("widgetShadow","Shadow color of widgets such as find/replace inside the editor."))),pe=f("widget.border",{dark:null,light:null,hcDark:M,hcLight:M},h.kg("widgetBorder","Border color of widgets such as find/replace inside the editor.")),fe=f("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},h.kg("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),me=(f("toolbar.hoverOutline",{dark:null,light:null,hcDark:T,hcLight:T},h.kg("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),f("toolbar.activeBackground",{dark:_(fe,.1),light:m(fe,.1),hcDark:null,hcLight:null},h.kg("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),f("breadcrumb.foreground",v(k,.8),h.kg("breadcrumbsFocusForeground","Color of focused breadcrumb items."))),_e=f("breadcrumb.background",B,h.kg("breadcrumbsBackground","Background color of breadcrumb items.")),ve=f("breadcrumb.focusForeground",{light:m(k,.2),dark:_(k,.1),hcDark:_(k,.1),hcLight:_(k,.1)},h.kg("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),be=f("breadcrumb.activeSelectionForeground",{light:m(k,.2),dark:_(k,.1),hcDark:_(k,.1),hcLight:_(k,.1)},h.kg("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),ye=(f("breadcrumbPicker.background",V,h.kg("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),r.Q1.fromHex("#40C8AE").transparent(.5)),we=r.Q1.fromHex("#40A6FF").transparent(.5),Ce=r.Q1.fromHex("#606060").transparent(.4),Se=f("merge.currentHeaderBackground",{dark:ye,light:ye,hcDark:null,hcLight:null},h.kg("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),xe=(f("merge.currentContentBackground",v(Se,.4),h.kg("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),f("merge.incomingHeaderBackground",{dark:we,light:we,hcDark:null,hcLight:null},h.kg("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),ke=(f("merge.incomingContentBackground",v(xe,.4),h.kg("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),f("merge.commonHeaderBackground",{dark:Ce,light:Ce,hcDark:null,hcLight:null},h.kg("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),Le=(f("merge.commonContentBackground",v(ke,.4),h.kg("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),f("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},h.kg("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."))),Ee=(f("editorOverviewRuler.currentContentForeground",{dark:v(Se,1),light:v(Se,1),hcDark:Le,hcLight:Le},h.kg("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),f("editorOverviewRuler.incomingContentForeground",{dark:v(xe,1),light:v(xe,1),hcDark:Le,hcLight:Le},h.kg("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),f("editorOverviewRuler.commonContentForeground",{dark:v(ke,1),light:v(ke,1),hcDark:Le,hcLight:Le},h.kg("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),f("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},h.kg("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),f("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",h.kg("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),f("problemsErrorIcon.foreground",U,h.kg("problemsErrorIconForeground","The color used for the problems error icon."))),Me=f("problemsWarningIcon.foreground",G,h.kg("problemsWarningIconForeground","The color used for the problems warning icon.")),Te=f("problemsInfoIcon.foreground",$,h.kg("problemsInfoIconForeground","The color used for the problems info icon.")),De=f("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},h.kg("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),Ne=(f("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},h.kg("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),f("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},h.kg("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0)),Ie=f("minimap.infoHighlight",{dark:$,light:$,hcDark:q,hcLight:q},h.kg("minimapInfo","Minimap marker color for infos.")),Ae=f("minimap.warningHighlight",{dark:G,light:G,hcDark:K,hcLight:K},h.kg("overviewRuleWarning","Minimap marker color for warnings.")),Re=f("minimap.errorHighlight",{dark:new r.Q1(new r.bU(255,18,18,.7)),light:new r.Q1(new r.bU(255,18,18,.7)),hcDark:new r.Q1(new r.bU(255,50,50,1)),hcLight:"#B5200D"},h.kg("minimapError","Minimap marker color for errors.")),Pe=f("minimap.background",null,h.kg("minimapBackground","Minimap background color.")),Oe=f("minimap.foregroundOpacity",r.Q1.fromHex("#000f"),h.kg("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),Fe=(f("minimapSlider.background",v(R,.5),h.kg("minimapSliderBackground","Minimap slider background color.")),f("minimapSlider.hoverBackground",v(P,.5),h.kg("minimapSliderHoverBackground","Minimap slider background color when hovering.")),f("minimapSlider.activeBackground",v(O,.5),h.kg("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),f("charts.foreground",k,h.kg("chartsForeground","The foreground color used in charts.")),f("charts.lines",v(k,.5),h.kg("chartsLines","The color used for horizontal lines in charts.")),f("charts.red",U,h.kg("chartsRed","The red color used in chart visualizations.")),f("charts.blue",$,h.kg("chartsBlue","The blue color used in chart visualizations.")),f("charts.yellow",G,h.kg("chartsYellow","The yellow color used in chart visualizations.")),f("charts.orange",De,h.kg("chartsOrange","The orange color used in chart visualizations.")),f("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},h.kg("chartsGreen","The green color used in chart visualizations.")),f("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},h.kg("chartsPurple","The purple color used in chart visualizations.")),f("input.background",{dark:"#3C3C3C",light:r.Q1.white,hcDark:r.Q1.black,hcLight:r.Q1.white},h.kg("inputBoxBackground","Input box background."))),Be=f("input.foreground",k,h.kg("inputBoxForeground","Input box foreground.")),ze=f("input.border",{dark:null,light:null,hcDark:M,hcLight:M},h.kg("inputBoxBorder","Input box border.")),Ve=f("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:M,hcLight:M},h.kg("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),We=f("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},h.kg("inputOption.hoverBackground","Background color of activated options in input fields.")),He=f("inputOption.activeBackground",{dark:v(E,.4),light:v(E,.2),hcDark:r.Q1.transparent,hcLight:r.Q1.transparent},h.kg("inputOption.activeBackground","Background hover color of options in input fields.")),Ue=f("inputOption.activeForeground",{dark:r.Q1.white,light:r.Q1.black,hcDark:k,hcLight:k},h.kg("inputOption.activeForeground","Foreground color of activated options in input fields.")),je=(f("input.placeholderForeground",{light:v(k,.5),dark:v(k,.5),hcDark:v(k,.7),hcLight:v(k,.7)},h.kg("inputPlaceholderForeground","Input box foreground color for placeholder text.")),f("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:r.Q1.black,hcLight:r.Q1.white},h.kg("inputValidationInfoBackground","Input validation background color for information severity."))),Ge=f("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:k},h.kg("inputValidationInfoForeground","Input validation foreground color for information severity.")),Ke=f("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:M,hcLight:M},h.kg("inputValidationInfoBorder","Input validation border color for information severity.")),$e=f("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:r.Q1.black,hcLight:r.Q1.white},h.kg("inputValidationWarningBackground","Input validation background color for warning severity.")),qe=f("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:k},h.kg("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Qe=f("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:M,hcLight:M},h.kg("inputValidationWarningBorder","Input validation border color for warning severity.")),Xe=f("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:r.Q1.black,hcLight:r.Q1.white},h.kg("inputValidationErrorBackground","Input validation background color for error severity.")),Ye=f("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:k},h.kg("inputValidationErrorForeground","Input validation foreground color for error severity.")),Ze=f("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:M,hcLight:M},h.kg("inputValidationErrorBorder","Input validation border color for error severity.")),Je=f("dropdown.background",{dark:"#3C3C3C",light:r.Q1.white,hcDark:r.Q1.black,hcLight:r.Q1.white},h.kg("dropdownBackground","Dropdown background.")),et=f("dropdown.listBackground",{dark:null,light:null,hcDark:r.Q1.black,hcLight:r.Q1.white},h.kg("dropdownListBackground","Dropdown list background.")),tt=f("dropdown.foreground",{dark:"#F0F0F0",light:k,hcDark:r.Q1.white,hcLight:k},h.kg("dropdownForeground","Dropdown foreground.")),it=f("dropdown.border",{dark:Je,light:"#CECECE",hcDark:M,hcLight:M},h.kg("dropdownBorder","Dropdown border.")),nt=f("button.foreground",r.Q1.white,h.kg("buttonForeground","Button foreground color.")),st=f("button.separator",v(nt,.4),h.kg("buttonSeparator","Button separator color.")),rt=f("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},h.kg("buttonBackground","Button background color.")),ot=f("button.hoverBackground",{dark:_(rt,.2),light:m(rt,.2),hcDark:rt,hcLight:rt},h.kg("buttonHoverBackground","Button background color when hovering.")),at=f("button.border",M,h.kg("buttonBorder","Button border color.")),lt=f("button.secondaryForeground",{dark:r.Q1.white,light:r.Q1.white,hcDark:r.Q1.white,hcLight:k},h.kg("buttonSecondaryForeground","Secondary button foreground color.")),ht=f("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:r.Q1.white},h.kg("buttonSecondaryBackground","Secondary button background color.")),ct=f("button.secondaryHoverBackground",{dark:_(ht,.2),light:m(ht,.2),hcDark:null,hcLight:null},h.kg("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),dt=f("radio.activeForeground",Ue,h.kg("radioActiveForeground","Foreground color of active radio option.")),ut=f("radio.activeBackground",He,h.kg("radioBackground","Background color of active radio option.")),gt=f("radio.activeBorder",Ve,h.kg("radioActiveBorder","Border color of the active radio option.")),pt=f("radio.inactiveForeground",null,h.kg("radioInactiveForeground","Foreground color of inactive radio option.")),ft=f("radio.inactiveBackground",null,h.kg("radioInactiveBackground","Background color of inactive radio option.")),mt=f("radio.inactiveBorder",{light:v(dt,.2),dark:v(dt,.2),hcDark:v(dt,.4),hcLight:v(dt,.2)},h.kg("radioInactiveBorder","Border color of the inactive radio option.")),_t=f("radio.inactiveHoverBackground",We,h.kg("radioHoverBackground","Background color of inactive active radio option when hovering.")),vt=f("checkbox.background",Je,h.kg("checkbox.background","Background color of checkbox widget.")),bt=(f("checkbox.selectBackground",V,h.kg("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),f("checkbox.foreground",tt,h.kg("checkbox.foreground","Foreground color of checkbox widget."))),yt=f("checkbox.border",it,h.kg("checkbox.border","Border color of checkbox widget.")),wt=(f("checkbox.selectBorder",L,h.kg("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),f("keybindingLabel.background",{dark:new r.Q1(new r.bU(128,128,128,.17)),light:new r.Q1(new r.bU(221,221,221,.4)),hcDark:r.Q1.transparent,hcLight:r.Q1.transparent},h.kg("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut."))),Ct=f("keybindingLabel.foreground",{dark:r.Q1.fromHex("#CCCCCC"),light:r.Q1.fromHex("#555555"),hcDark:r.Q1.white,hcLight:k},h.kg("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),St=f("keybindingLabel.border",{dark:new r.Q1(new r.bU(51,51,51,.6)),light:new r.Q1(new r.bU(204,204,204,.4)),hcDark:new r.Q1(new r.bU(111,195,223)),hcLight:M},h.kg("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),xt=f("keybindingLabel.bottomBorder",{dark:new r.Q1(new r.bU(68,68,68,.6)),light:new r.Q1(new r.bU(187,187,187,.4)),hcDark:new r.Q1(new r.bU(111,195,223)),hcLight:k},h.kg("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),kt=f("list.focusBackground",null,h.kg("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Lt=f("list.focusForeground",null,h.kg("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Et=f("list.focusOutline",{dark:E,light:E,hcDark:T,hcLight:T},h.kg("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Mt=f("list.focusAndSelectionOutline",null,h.kg("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Tt=f("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:r.Q1.fromHex("#0F4A85").transparent(.1)},h.kg("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Dt=f("list.activeSelectionForeground",{dark:r.Q1.white,light:r.Q1.white,hcDark:null,hcLight:null},h.kg("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Nt=f("list.activeSelectionIconForeground",null,h.kg("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),It=f("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:r.Q1.fromHex("#0F4A85").transparent(.1)},h.kg("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),At=f("list.inactiveSelectionForeground",null,h.kg("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Rt=f("list.inactiveSelectionIconForeground",null,h.kg("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Pt=f("list.inactiveFocusBackground",null,h.kg("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Ot=f("list.inactiveFocusOutline",null,h.kg("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Ft=f("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:r.Q1.white.transparent(.1),hcLight:r.Q1.fromHex("#0F4A85").transparent(.1)},h.kg("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Bt=f("list.hoverForeground",null,h.kg("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),zt=f("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},h.kg("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),Vt=f("list.dropBetweenBackground",{dark:L,light:L,hcDark:null,hcLight:null},h.kg("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Wt=f("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:E,hcLight:E},h.kg("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));f("list.focusHighlightForeground",{dark:Wt,light:(Ht=Tt,Ut=Wt,jt="#BBE7FF",{op:6,if:Ht,then:Ut,else:jt}),hcDark:Wt,hcLight:Wt},h.kg("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));var Ht,Ut,jt;f("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},h.kg("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),f("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},h.kg("listErrorForeground","Foreground color of list items containing errors.")),f("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},h.kg("listWarningForeground","Foreground color of list items containing warnings."));const Gt=f("listFilterWidget.background",{light:m(V,0),dark:_(V,0),hcDark:V,hcLight:V},h.kg("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Kt=f("listFilterWidget.outline",{dark:r.Q1.transparent,light:r.Q1.transparent,hcDark:"#f38518",hcLight:"#007ACC"},h.kg("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),$t=f("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:M,hcLight:M},h.kg("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),qt=f("listFilterWidget.shadow",ge,h.kg("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),Qt=(f("list.filterMatchBackground",{dark:ee,light:ee,hcDark:null,hcLight:null},h.kg("listFilterMatchHighlight","Background color of the filtered match.")),f("list.filterMatchBorder",{dark:te,light:te,hcDark:M,hcLight:T},h.kg("listFilterMatchHighlightBorder","Border color of the filtered match.")),f("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},h.kg("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),f("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},h.kg("treeIndentGuidesStroke","Tree stroke color for the indentation guides."))),Xt=f("tree.inactiveIndentGuidesStroke",v(Qt,.4),h.kg("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Yt=f("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},h.kg("tableColumnsBorder","Table border color between columns.")),Zt=f("tree.tableOddRowsBackground",{dark:v(k,.04),light:v(k,.04),hcDark:null,hcLight:null},h.kg("tableOddRowsBackgroundColor","Background color for odd table rows.")),Jt=(f("editorActionList.background",V,h.kg("editorActionListBackground","Action List background color.")),f("editorActionList.foreground",W,h.kg("editorActionListForeground","Action List foreground color.")),f("editorActionList.focusForeground",Dt,h.kg("editorActionListFocusForeground","Action List foreground color for the focused item.")),f("editorActionList.focusBackground",Tt,h.kg("editorActionListFocusBackground","Action List background color for the focused item.")),f("menu.border",{dark:null,light:null,hcDark:M,hcLight:M},h.kg("menuBorder","Border color of menus."))),ei=f("menu.foreground",tt,h.kg("menuForeground","Foreground color of menu items.")),ti=f("menu.background",Je,h.kg("menuBackground","Background color of menu items.")),ii=f("menu.selectionForeground",Dt,h.kg("menuSelectionForeground","Foreground color of the selected menu item in menus.")),ni=f("menu.selectionBackground",Tt,h.kg("menuSelectionBackground","Background color of the selected menu item in menus.")),si=f("menu.selectionBorder",{dark:null,light:null,hcDark:T,hcLight:T},h.kg("menuSelectionBorder","Border color of the selected menu item in menus.")),ri=f("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:M,hcLight:M},h.kg("menuSeparatorBackground","Color of a separator menu item in menus.")),oi=f("quickInput.background",V,h.kg("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),ai=f("quickInput.foreground",W,h.kg("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),li=f("quickInputTitle.background",{dark:new r.Q1(new r.bU(255,255,255,.105)),light:new r.Q1(new r.bU(0,0,0,.06)),hcDark:"#000000",hcLight:r.Q1.white},h.kg("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),hi=f("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:r.Q1.white,hcLight:"#0F4A85"},h.kg("pickerGroupForeground","Quick picker color for grouping labels.")),ci=f("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:r.Q1.white,hcLight:"#0F4A85"},h.kg("pickerGroupBorder","Quick picker color for grouping borders.")),di=f("quickInput.list.focusBackground",null,"",void 0,h.kg("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),ui=f("quickInputList.focusForeground",Dt,h.kg("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),gi=f("quickInputList.focusIconForeground",Nt,h.kg("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),pi=f("quickInputList.focusBackground",{dark:b(di,Tt),light:b(di,Tt),hcDark:null,hcLight:null},h.kg("quickInput.listFocusBackground","Quick picker background color for the focused item."));f("search.resultsInfoForeground",{light:k,dark:v(k,.65),hcDark:k,hcLight:k},h.kg("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),f("searchEditor.findMatchBackground",{light:v(ee,.66),dark:v(ee,.66),hcDark:ee,hcLight:ee},h.kg("searchEditor.queryMatch","Color of the Search Editor query matches.")),f("searchEditor.findMatchBorder",{light:v(te,.66),dark:v(te,.66),hcDark:te,hcLight:te},h.kg("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."))},9734:(e,t,i)=>{"use strict";var n;function s(e){return e===n.HIGH_CONTRAST_DARK||e===n.HIGH_CONTRAST_LIGHT}function r(e){return e===n.DARK||e===n.HIGH_CONTRAST_DARK}i.d(t,{Bb:()=>s,HD:()=>r,zM:()=>n}),function(e){e.DARK="dark",e.LIGHT="light",e.HIGH_CONTRAST_DARK="hcDark",e.HIGH_CONTRAST_LIGHT="hcLight"}(n||(n={}))},2427:(e,t,i)=>{"use strict";i.d(t,{Fd:()=>d,Gy:()=>l,Pz:()=>c,Yf:()=>h,lR:()=>p,zy:()=>g});var n=i(9563),s=i(4663),r=i(9398),o=i(5050),a=i(9734);const l=(0,r.u1)("themeService");function h(e){return{id:e}}function c(e){switch(e){case a.zM.DARK:return"vs-dark";case a.zM.HIGH_CONTRAST_DARK:return"hc-black";case a.zM.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const d={ThemingContribution:"base.contributions.theming"};const u=new class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new n.vl}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),(0,s.s)((()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)}))}getThemingParticipants(){return this.themingParticipants}};function g(e){return u.onColorThemeChange(e)}o.O.add(d.ThemingContribution,u);class p extends s.jG{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange((e=>this.onThemeChange(e))))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}},5582:(e,t,i)=>{"use strict";i.d(t,{$D:()=>n,I_:()=>r,To:()=>s,Ym:()=>o});const n=(0,i(9398).u1)("undoRedoService");class s{constructor(e,t){this.resource=e,this.elements=t}}class r{static#e=(()=>this._ID=0)();constructor(){this.id=r._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}static#t=(()=>this.None=new r)()}class o{static#e=(()=>this._ID=0)();constructor(){this.id=o._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}static#t=(()=>this.None=new o)()}},2730:(e,t,i)=>{"use strict";var n=i(5043),s=i(8853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},p={};function f(e,t,i,n,s,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,i,n){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,s,n)&&(i=null),n||null===s?function(e){return!!d.call(p,e)||!d.call(g,e)&&(u.test(e)?p[e]=!0:(g[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):s.mustUseProperty?e[s.propertyName]=null===i?3!==s.type&&"":i:(t=s.attributeName,n=s.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(s=s.type)||4===s&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_,v);m[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_,v);m[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_,v);m[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),C=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),E=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,F=Object.assign;function B(e){if(void 0===O)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function V(e,t){if(!e||z)return"";z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&"string"===typeof h.stack){for(var s=h.stack.split("\n"),r=n.stack.split("\n"),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==r[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?B(e):""}function W(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case C:return"Portal";case k:return"Profiler";case x:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case L:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return H(e(t))}catch(i){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var s=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var i=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function X(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=j(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Y(e,t);var i=j(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&q(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,n){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&n&&(e[i].defaultSelected=!0)}else{for(i=""+j(i),t=null,s=0;s<e.length;s++){if(e[s].value===i)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(r(92));if(te(i)){if(1<i.length)throw Error(r(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:j(i)}}function re(e,t){var i=j(t.value),n=j(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var he,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((he=he||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=he.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function ue(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function me(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),s=fe(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,s):e[i]=s}}Object.keys(ge).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var _e=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Se=null,xe=null;function ke(e){if(e=bs(e)){if("function"!==typeof Ce)throw Error(r(280));var t=e.stateNode;t&&(t=ws(t),Ce(e.stateNode,e.type,t))}}function Le(e){Se?xe?xe.push(e):xe=[e]:Se=e}function Ee(){if(Se){var e=Se,t=xe;if(xe=Se=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Me(e,t){return e(t)}function Te(){}var De=!1;function Ne(e,t,i){if(De)return e(t,i);De=!0;try{return Me(e,t,i)}finally{De=!1,(null!==Se||null!==xe)&&(Te(),Ee())}}function Ie(e,t){var i=e.stateNode;if(null===i)return null;var n=ws(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(r(231,t,typeof i));return i}var Ae=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Ae=!1}function Pe(e,t,i,n,s,r,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(i,h)}catch(c){this.onError(c)}}var Oe=!1,Fe=null,Be=!1,ze=null,Ve={onError:function(e){Oe=!0,Fe=e}};function We(e,t,i,n,s,r,o,a,l){Oe=!1,Fe=null,Pe.apply(Ve,arguments)}function He(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(He(e)!==e)throw Error(r(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(r(188));return t!==e?null:e}for(var i=e,n=t;;){var s=i.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(n=s.return)){i=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===i)return je(s),e;if(o===n)return je(s),t;o=o.sibling}throw Error(r(188))}if(i.return!==n.return)i=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===i){a=!0,i=s,n=o;break}if(l===n){a=!0,n=s,i=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===i){a=!0,i=o,n=s;break}if(l===n){a=!0,n=o,i=s;break}l=l.sibling}if(!a)throw Error(r(189))}}if(i.alternate!==n)throw Error(r(190))}if(3!==i.tag)throw Error(r(188));return i.stateNode.current===i?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var $e=s.unstable_scheduleCallback,qe=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Ye=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,Je=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,it=s.unstable_LowPriority,nt=s.unstable_IdlePriority,st=null,rt=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ht=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,s=e.suspendedLanes,r=e.pingedLanes,o=268435455&i;if(0!==o){var a=o&~s;0!==a?n=dt(a):0!==(r&=o)&&(n=dt(r))}else 0!==(o=i&~s)?n=dt(o):0!==r&&(n=dt(r));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(r=t&-t)||16===s&&0!==(4194240&r)))return t;if(0!==(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(i=31-ot(t)),n|=e[i],t&=~s;return n}function gt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ht;return 0===(4194240&(ht<<=1))&&(ht=64),e}function mt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function _t(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=i}function vt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-ot(i),s=1<<n;s&t|e[n]&t&&(e[n]|=t),i&=~s}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Ct,St,xt,kt,Lt=!1,Et=[],Mt=null,Tt=null,Dt=null,Nt=new Map,It=new Map,At=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ot(e,t,i,n,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&Ct(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ft(e){var t=vs(e.target);if(null!==t){var i=He(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Ue(i)))return e.blockedOn=t,void kt(e.priority,(function(){St(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=bs(i))&&Ct(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);ye=n,i.target.dispatchEvent(n),ye=null,t.shift()}return!0}function zt(e,t,i){Bt(e)&&i.delete(t)}function Vt(){Lt=!1,null!==Mt&&Bt(Mt)&&(Mt=null),null!==Tt&&Bt(Tt)&&(Tt=null),null!==Dt&&Bt(Dt)&&(Dt=null),Nt.forEach(zt),It.forEach(zt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Lt||(Lt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function Ht(e){function t(t){return Wt(t,e)}if(0<Et.length){Wt(Et[0],e);for(var i=1;i<Et.length;i++){var n=Et[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Mt&&Wt(Mt,e),null!==Tt&&Wt(Tt,e),null!==Dt&&Wt(Dt,e),Nt.forEach(t),It.forEach(t),i=0;i<At.length;i++)(n=At[i]).blockedOn===e&&(n.blockedOn=null);for(;0<At.length&&null===(i=At[0]).blockedOn;)Ft(i),null===i.blockedOn&&At.shift()}var Ut=y.ReactCurrentBatchConfig,jt=!0;function Gt(e,t,i,n){var s=bt,r=Ut.transition;Ut.transition=null;try{bt=1,$t(e,t,i,n)}finally{bt=s,Ut.transition=r}}function Kt(e,t,i,n){var s=bt,r=Ut.transition;Ut.transition=null;try{bt=4,$t(e,t,i,n)}finally{bt=s,Ut.transition=r}}function $t(e,t,i,n){if(jt){var s=Qt(e,t,i,n);if(null===s)jn(e,t,n,qt,i),Pt(e,n);else if(function(e,t,i,n,s){switch(t){case"focusin":return Mt=Ot(Mt,e,t,i,n,s),!0;case"dragenter":return Tt=Ot(Tt,e,t,i,n,s),!0;case"mouseover":return Dt=Ot(Dt,e,t,i,n,s),!0;case"pointerover":var r=s.pointerId;return Nt.set(r,Ot(Nt.get(r)||null,e,t,i,n,s)),!0;case"gotpointercapture":return r=s.pointerId,It.set(r,Ot(It.get(r)||null,e,t,i,n,s)),!0}return!1}(s,e,t,i,n))n.stopPropagation();else if(Pt(e,n),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var r=bs(s);if(null!==r&&wt(r),null===(r=Qt(e,t,i,n))&&jn(e,t,n,qt,i),r===s)break;s=r}null!==s&&n.stopPropagation()}else jn(e,t,n,null,i)}}var qt=null;function Qt(e,t,i,n){if(qt=null,null!==(e=vs(e=we(n))))if(null===(t=He(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case it:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,Zt=null,Jt=null;function ei(){if(Jt)return Jt;var e,t,i=Zt,n=i.length,s="value"in Yt?Yt.value:Yt.textContent,r=s.length;for(e=0;e<n&&i[e]===s[e];e++);var o=n-e;for(t=1;t<=o&&i[n-t]===s[r-t];t++);return Jt=s.slice(e,1<t?1-t:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function ni(){return!1}function si(e){function t(t,i,n,s,r){for(var o in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?ii:ni,this.isPropagationStopped=ni,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var ri,oi,ai,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=si(li),ci=F({},li,{view:0,detail:0}),di=si(ci),ui=F({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&"mousemove"===e.type?(ri=e.screenX-ai.screenX,oi=e.screenY-ai.screenY):oi=ri=0,ai=e),ri)},movementY:function(e){return"movementY"in e?e.movementY:oi}}),gi=si(ui),pi=si(F({},ui,{dataTransfer:0})),fi=si(F({},ci,{relatedTarget:0})),mi=si(F({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),_i=F({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vi=si(_i),bi=si(F({},li,{data:0})),yi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ci={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ci[e])&&!!t[e]}function xi(){return Si}var ki=F({},ci,{key:function(e){if(e.key){var t=yi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xi,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Li=si(ki),Ei=si(F({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mi=si(F({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xi})),Ti=si(F({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Di=F({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ni=si(Di),Ii=[9,13,27,32],Ai=c&&"CompositionEvent"in window,Ri=null;c&&"documentMode"in document&&(Ri=document.documentMode);var Pi=c&&"TextEvent"in window&&!Ri,Oi=c&&(!Ai||Ri&&8<Ri&&11>=Ri),Fi=String.fromCharCode(32),Bi=!1;function zi(e,t){switch(e){case"keyup":return-1!==Ii.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wi=!1;var Hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hi[e.type]:"textarea"===t}function ji(e,t,i,n){Le(n),0<(t=Kn(t,"onChange")).length&&(i=new hi("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Gi=null,Ki=null;function $i(e){Bn(e,0)}function qi(e){if($(ys(e)))return e}function Qi(e,t){if("change"===e)return t}var Xi=!1;if(c){var Yi;if(c){var Zi="oninput"in document;if(!Zi){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),Zi="function"===typeof Ji.oninput}Yi=Zi}else Yi=!1;Xi=Yi&&(!document.documentMode||9<document.documentMode)}function en(){Gi&&(Gi.detachEvent("onpropertychange",tn),Ki=Gi=null)}function tn(e){if("value"===e.propertyName&&qi(Ki)){var t=[];ji(t,Ki,e,we(e)),Ne($i,t)}}function nn(e,t,i){"focusin"===e?(en(),Ki=i,(Gi=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function sn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qi(Ki)}function rn(e,t){if("click"===e)return qi(t)}function on(e,t){if("input"===e||"change"===e)return qi(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!d.call(t,s)||!an(e[s],t[s]))return!1}return!0}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cn(e,t){var i,n=hn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function un(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=q((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=un(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&dn(i.ownerDocument.documentElement,i)){if(null!==n&&gn(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=i.textContent.length,r=Math.min(n.start,s);n=void 0===n.end?r:Math.min(n.end,s),!e.extend&&r>n&&(s=n,n=r,r=s),s=cn(i,r);var o=cn(i,n);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),r>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fn=c&&"documentMode"in document&&11>=document.documentMode,mn=null,_n=null,vn=null,bn=!1;function yn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;bn||null==mn||mn!==q(n)||("selectionStart"in(n=mn)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Kn(_n,"onSelect")).length&&(t=new hi("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=mn)))}function wn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Cn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},Sn={},xn={};function kn(e){if(Sn[e])return Sn[e];if(!Cn[e])return e;var t,i=Cn[e];for(t in i)if(i.hasOwnProperty(t)&&t in xn)return Sn[e]=i[t];return e}c&&(xn=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);var Ln=kn("animationend"),En=kn("animationiteration"),Mn=kn("animationstart"),Tn=kn("transitionend"),Dn=new Map,Nn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,t){Dn.set(e,t),l(t,[e])}for(var An=0;An<Nn.length;An++){var Rn=Nn[An];In(Rn.toLowerCase(),"on"+(Rn[0].toUpperCase()+Rn.slice(1)))}In(Ln,"onAnimationEnd"),In(En,"onAnimationIteration"),In(Mn,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Tn,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),On=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pn));function Fn(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,s,o,a,l,h){if(We.apply(this,arguments),Oe){if(!Oe)throw Error(r(198));var c=Fe;Oe=!1,Fe=null,Be||(Be=!0,ze=c)}}(n,t,void 0,e),e.currentTarget=null}function Bn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],s=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;Fn(s,a,h),r=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,h=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;Fn(s,a,h),r=l}}}if(Be)throw e=ze,Be=!1,ze=null,e}function zn(e,t){var i=t[fs];void 0===i&&(i=t[fs]=new Set);var n=e+"__bubble";i.has(n)||(Un(t,e,2,!1),i.add(n))}function Vn(e,t,i){var n=0;t&&(n|=4),Un(i,e,n,t)}var Wn="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[Wn]){e[Wn]=!0,o.forEach((function(t){"selectionchange"!==t&&(On.has(t)||Vn(t,!1,e),Vn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wn]||(t[Wn]=!0,Vn("selectionchange",!1,t))}}function Un(e,t,i,n){switch(Xt(t)){case 1:var s=Gt;break;case 4:s=Kt;break;default:s=$t}i=s.bind(null,t,i,e),s=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):void 0!==s?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function jn(e,t,i,n,s){var r=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=vs(a)))return;if(5===(l=o.tag)||6===l){n=r=o;continue e}a=a.parentNode}}n=n.return}Ne((function(){var n=r,s=we(i),o=[];e:{var a=Dn.get(e);if(void 0!==a){var l=hi,h=e;switch(e){case"keypress":if(0===ti(i))break e;case"keydown":case"keyup":l=Li;break;case"focusin":h="focus",l=fi;break;case"focusout":h="blur",l=fi;break;case"beforeblur":case"afterblur":l=fi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mi;break;case Ln:case En:case Mn:l=mi;break;case Tn:l=Ti;break;case"scroll":l=di;break;case"wheel":l=Ni;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ei}var c=0!==(4&t),d=!c&&"scroll"===e,u=c?null!==a?a+"Capture":null:a;c=[];for(var g,p=n;null!==p;){var f=(g=p).stateNode;if(5===g.tag&&null!==f&&(g=f,null!==u&&(null!=(f=Ie(p,u))&&c.push(Gn(p,f,g)))),d)break;p=p.return}0<c.length&&(a=new l(a,h,null,i,s),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===ye||!(h=i.relatedTarget||i.fromElement)||!vs(h)&&!h[ps])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(h=(h=i.relatedTarget||i.toElement)?vs(h):null)&&(h!==(d=He(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=n),l!==h)){if(c=gi,f="onMouseLeave",u="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ei,f="onPointerLeave",u="onPointerEnter",p="pointer"),d=null==l?a:ys(l),g=null==h?a:ys(h),(a=new c(f,p+"leave",l,i,s)).target=d,a.relatedTarget=g,f=null,vs(s)===n&&((c=new c(u,p+"enter",h,i,s)).target=g,c.relatedTarget=d,f=c),d=f,l&&h)e:{for(u=h,p=0,g=c=l;g;g=$n(g))p++;for(g=0,f=u;f;f=$n(f))g++;for(;0<p-g;)c=$n(c),p--;for(;0<g-p;)u=$n(u),g--;for(;p--;){if(c===u||null!==u&&c===u.alternate)break e;c=$n(c),u=$n(u)}c=null}else c=null;null!==l&&qn(o,a,l,c,!1),null!==h&&null!==d&&qn(o,d,h,c,!0)}if("select"===(l=(a=n?ys(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qi;else if(Ui(a))if(Xi)m=on;else{m=sn;var _=nn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=rn);switch(m&&(m=m(e,n))?ji(o,m,i,s):(_&&_(e,a,n),"focusout"===e&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&ee(a,"number",a.value)),_=n?ys(n):window,e){case"focusin":(Ui(_)||"true"===_.contentEditable)&&(mn=_,_n=n,vn=null);break;case"focusout":vn=_n=mn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,yn(o,i,s);break;case"selectionchange":if(fn)break;case"keydown":case"keyup":yn(o,i,s)}var v;if(Ai)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wi?zi(e,i)&&(b="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(b="onCompositionStart");b&&(Oi&&"ko"!==i.locale&&(Wi||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wi&&(v=ei()):(Zt="value"in(Yt=s)?Yt.value:Yt.textContent,Wi=!0)),0<(_=Kn(n,b)).length&&(b=new bi(b,e,null,i,s),o.push({event:b,listeners:_}),v?b.data=v:null!==(v=Vi(i))&&(b.data=v))),(v=Pi?function(e,t){switch(e){case"compositionend":return Vi(t);case"keypress":return 32!==t.which?null:(Bi=!0,Fi);case"textInput":return(e=t.data)===Fi&&Bi?null:e;default:return null}}(e,i):function(e,t){if(Wi)return"compositionend"===e||!Ai&&zi(e,t)?(e=ei(),Jt=Zt=Yt=null,Wi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=Kn(n,"onBeforeInput")).length&&(s=new bi("onBeforeInput","beforeinput",null,i,s),o.push({event:s,listeners:n}),s.data=v))}Bn(o,t)}))}function Gn(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Kn(e,t){for(var i=t+"Capture",n=[];null!==e;){var s=e,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Ie(e,i))&&n.unshift(Gn(e,r,s)),null!=(r=Ie(e,t))&&n.push(Gn(e,r,s))),e=e.return}return n}function $n(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qn(e,t,i,n,s){for(var r=t._reactName,o=[];null!==i&&i!==n;){var a=i,l=a.alternate,h=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==h&&(a=h,s?null!=(l=Ie(i,r))&&o.unshift(Gn(i,l,a)):s||null!=(l=Ie(i,r))&&o.push(Gn(i,l,a))),i=i.return}0!==o.length&&e.push({event:t,listeners:o})}var Qn=/\r\n?/g,Xn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Qn,"\n").replace(Xn,"")}function Zn(e,t,i){if(t=Yn(t),Yn(e)!==t&&i)throw Error(r(425))}function Jn(){}var es=null,ts=null;function is(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(e){return rs.resolve(null).then(e).catch(as)}:ns;function as(e){setTimeout((function(){throw e}))}function ls(e,t){var i=t,n=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&8===s.nodeType)if("/$"===(i=s.data)){if(0===n)return e.removeChild(s),void Ht(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=s}while(i);Ht(t)}function hs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),us="__reactFiber$"+ds,gs="__reactProps$"+ds,ps="__reactContainer$"+ds,fs="__reactEvents$"+ds,ms="__reactListeners$"+ds,_s="__reactHandles$"+ds;function vs(e){var t=e[us];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ps]||i[us]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=cs(e);null!==e;){if(i=e[us])return i;e=cs(e)}return t}i=(e=i).parentNode}return null}function bs(e){return!(e=e[us]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ys(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function ws(e){return e[gs]||null}var Cs=[],Ss=-1;function xs(e){return{current:e}}function ks(e){0>Ss||(e.current=Cs[Ss],Cs[Ss]=null,Ss--)}function Ls(e,t){Ss++,Cs[Ss]=e.current,e.current=t}var Es={},Ms=xs(Es),Ts=xs(!1),Ds=Es;function Ns(e,t){var i=e.type.contextTypes;if(!i)return Es;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in i)r[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Is(e){return null!==(e=e.childContextTypes)&&void 0!==e}function As(){ks(Ts),ks(Ms)}function Rs(e,t,i){if(Ms.current!==Es)throw Error(r(168));Ls(Ms,t),Ls(Ts,i)}function Ps(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var s in n=n.getChildContext())if(!(s in t))throw Error(r(108,U(e)||"Unknown",s));return F({},i,n)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,Ds=Ms.current,Ls(Ms,e),Ls(Ts,Ts.current),!0}function Fs(e,t,i){var n=e.stateNode;if(!n)throw Error(r(169));i?(e=Ps(e,t,Ds),n.__reactInternalMemoizedMergedChildContext=e,ks(Ts),ks(Ms),Ls(Ms,e)):ks(Ts),Ls(Ts,i)}var Bs=null,zs=!1,Vs=!1;function Ws(e){null===Bs?Bs=[e]:Bs.push(e)}function Hs(){if(!Vs&&null!==Bs){Vs=!0;var e=0,t=bt;try{var i=Bs;for(bt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}Bs=null,zs=!1}catch(s){throw null!==Bs&&(Bs=Bs.slice(e+1)),$e(Je,Hs),s}finally{bt=t,Vs=!1}}return null}var Us=[],js=0,Gs=null,Ks=0,$s=[],qs=0,Qs=null,Xs=1,Ys="";function Zs(e,t){Us[js++]=Ks,Us[js++]=Gs,Gs=e,Ks=t}function Js(e,t,i){$s[qs++]=Xs,$s[qs++]=Ys,$s[qs++]=Qs,Qs=e;var n=Xs;e=Ys;var s=32-ot(n)-1;n&=~(1<<s),i+=1;var r=32-ot(t)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Xs=1<<32-ot(t)+s|i<<s|n,Ys=r+e}else Xs=1<<r|i<<s|n,Ys=e}function er(e){null!==e.return&&(Zs(e,1),Js(e,1,0))}function tr(e){for(;e===Gs;)Gs=Us[--js],Us[js]=null,Ks=Us[--js],Us[js]=null;for(;e===Qs;)Qs=$s[--qs],$s[qs]=null,Ys=$s[--qs],$s[qs]=null,Xs=$s[--qs],$s[qs]=null}var ir=null,nr=null,sr=!1,rr=null;function or(e,t){var i=Nh(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function ar(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ir=e,nr=hs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ir=e,nr=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==Qs?{id:Xs,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Nh(18,null,null,0)).stateNode=t,i.return=e,e.child=i,ir=e,nr=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function hr(e){if(sr){var t=nr;if(t){var i=t;if(!ar(e,t)){if(lr(e))throw Error(r(418));t=hs(i.nextSibling);var n=ir;t&&ar(e,t)?or(n,i):(e.flags=-4097&e.flags|2,sr=!1,ir=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,sr=!1,ir=e}}}function cr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ir=e}function dr(e){if(e!==ir)return!1;if(!sr)return cr(e),sr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!is(e.type,e.memoizedProps)),t&&(t=nr)){if(lr(e))throw ur(),Error(r(418));for(;t;)or(e,t),t=hs(t.nextSibling)}if(cr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){nr=hs(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}nr=null}}else nr=ir?hs(e.stateNode.nextSibling):null;return!0}function ur(){for(var e=nr;e;)e=hs(e.nextSibling)}function gr(){nr=ir=null,sr=!1}function pr(e){null===rr?rr=[e]:rr.push(e)}var fr=y.ReactCurrentBatchConfig;function mr(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(r(309));var n=i.stateNode}if(!n)throw Error(r(147,e));var s=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function _r(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vr(e){return(0,e._init)(e._payload)}function br(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Ah(e,t)).index=0,e.sibling=null,e}function o(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Fh(i,e.mode,n)).return=e,t):((t=s(t,i)).return=e,t)}function h(e,t,i,n){var r=i.type;return r===S?d(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===I&&vr(r)===t.type)?((n=s(t,i.props)).ref=mr(e,t,i),n.return=e,n):((n=Rh(i.type,i.key,i.props,null,e.mode,n)).ref=mr(e,t,i),n.return=e,n)}function c(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Bh(i,e.mode,n)).return=e,t):((t=s(t,i.children||[])).return=e,t)}function d(e,t,i,n,r){return null===t||7!==t.tag?((t=Ph(i,e.mode,n,r)).return=e,t):((t=s(t,i)).return=e,t)}function u(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fh(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(i=Rh(t.type,t.key,t.props,null,e.mode,i)).ref=mr(e,null,t),i.return=e,i;case C:return(t=Bh(t,e.mode,i)).return=e,t;case I:return u(e,(0,t._init)(t._payload),i)}if(te(t)||P(t))return(t=Ph(t,e.mode,i,null)).return=e,t;_r(e,t)}return null}function g(e,t,i,n){var s=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==s?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===s?h(e,t,i,n):null;case C:return i.key===s?c(e,t,i,n):null;case I:return g(e,t,(s=i._init)(i._payload),n)}if(te(i)||P(i))return null!==s?null:d(e,t,i,n,null);_r(e,i)}return null}function p(e,t,i,n,s){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return h(t,e=e.get(null===n.key?i:n.key)||null,n,s);case C:return c(t,e=e.get(null===n.key?i:n.key)||null,n,s);case I:return p(e,t,i,(0,n._init)(n._payload),s)}if(te(n)||P(n))return d(t,e=e.get(i)||null,n,s,null);_r(t,n)}return null}function f(s,r,a,l){for(var h=null,c=null,d=r,f=r=0,m=null;null!==d&&f<a.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var _=g(s,d,a[f],l);if(null===_){null===d&&(d=m);break}e&&d&&null===_.alternate&&t(s,d),r=o(_,r,f),null===c?h=_:c.sibling=_,c=_,d=m}if(f===a.length)return i(s,d),sr&&Zs(s,f),h;if(null===d){for(;f<a.length;f++)null!==(d=u(s,a[f],l))&&(r=o(d,r,f),null===c?h=d:c.sibling=d,c=d);return sr&&Zs(s,f),h}for(d=n(s,d);f<a.length;f++)null!==(m=p(d,s,f,a[f],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),r=o(m,r,f),null===c?h=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return t(s,e)})),sr&&Zs(s,f),h}function m(s,a,l,h){var c=P(l);if("function"!==typeof c)throw Error(r(150));if(null==(l=c.call(l)))throw Error(r(151));for(var d=c=null,f=a,m=a=0,_=null,v=l.next();null!==f&&!v.done;m++,v=l.next()){f.index>m?(_=f,f=null):_=f.sibling;var b=g(s,f,v.value,h);if(null===b){null===f&&(f=_);break}e&&f&&null===b.alternate&&t(s,f),a=o(b,a,m),null===d?c=b:d.sibling=b,d=b,f=_}if(v.done)return i(s,f),sr&&Zs(s,m),c;if(null===f){for(;!v.done;m++,v=l.next())null!==(v=u(s,v.value,h))&&(a=o(v,a,m),null===d?c=v:d.sibling=v,d=v);return sr&&Zs(s,m),c}for(f=n(s,f);!v.done;m++,v=l.next())null!==(v=p(f,s,m,v.value,h))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),a=o(v,a,m),null===d?c=v:d.sibling=v,d=v);return e&&f.forEach((function(e){return t(s,e)})),sr&&Zs(s,m),c}return function e(n,r,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var h=o.key,c=r;null!==c;){if(c.key===h){if((h=o.type)===S){if(7===c.tag){i(n,c.sibling),(r=s(c,o.props.children)).return=n,n=r;break e}}else if(c.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===I&&vr(h)===c.type){i(n,c.sibling),(r=s(c,o.props)).ref=mr(n,c,o),r.return=n,n=r;break e}i(n,c);break}t(n,c),c=c.sibling}o.type===S?((r=Ph(o.props.children,n.mode,l,o.key)).return=n,n=r):((l=Rh(o.type,o.key,o.props,null,n.mode,l)).ref=mr(n,r,o),l.return=n,n=l)}return a(n);case C:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){i(n,r.sibling),(r=s(r,o.children||[])).return=n,n=r;break e}i(n,r);break}t(n,r),r=r.sibling}(r=Bh(o,n.mode,l)).return=n,n=r}return a(n);case I:return e(n,r,(c=o._init)(o._payload),l)}if(te(o))return f(n,r,o,l);if(P(o))return m(n,r,o,l);_r(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==r&&6===r.tag?(i(n,r.sibling),(r=s(r,o)).return=n,n=r):(i(n,r),(r=Fh(o,n.mode,l)).return=n,n=r),a(n)):i(n,r)}}var yr=br(!0),wr=br(!1),Cr=xs(null),Sr=null,xr=null,kr=null;function Lr(){kr=xr=Sr=null}function Er(e){var t=Cr.current;ks(Cr),e._currentValue=t}function Mr(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Tr(e,t){Sr=e,kr=xr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Dr(e){var t=e._currentValue;if(kr!==e)if(e={context:e,memoizedValue:t,next:null},null===xr){if(null===Sr)throw Error(r(308));xr=e,Sr.dependencies={lanes:0,firstContext:e}}else xr=xr.next=e;return t}var Nr=null;function Ir(e){null===Nr?Nr=[e]:Nr.push(e)}function Ar(e,t,i,n){var s=t.interleaved;return null===s?(i.next=i,Ir(t)):(i.next=s.next,s.next=i),t.interleaved=i,Rr(e,n)}function Rr(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Pr=!1;function Or(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Br(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Ml)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Rr(e,i)}return null===(s=n.interleaved)?(t.next=t,Ir(n)):(t.next=s.next,s.next=t),n.interleaved=t,Rr(e,i)}function Vr(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}function Wr(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var s=null,r=null;if(null!==(i=i.firstBaseUpdate)){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===r?s=r=o:r=r.next=o,i=i.next}while(null!==i);null===r?s=r=t:r=r.next=t}else s=r=t;return i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Hr(e,t,i,n){var s=e.updateQueue;Pr=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,h=l.next;l.next=null,null===o?r=h:o.next=h,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=l))}if(null!==r){var d=s.baseState;for(o=0,c=h=l=null,a=r;;){var u=a.lane,g=a.eventTime;if((n&u)===u){null!==c&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,f=a;switch(u=t,g=i,f.tag){case 1:if("function"===typeof(p=f.payload)){d=p.call(g,d,u);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(u="function"===typeof(p=f.payload)?p.call(g,d,u):p)||void 0===u)break e;d=F({},d,u);break e;case 2:Pr=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(u=s.effects)?s.effects=[a]:u.push(a))}else g={eventTime:g,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(h=c=g,l=d):c=c.next=g,o|=u;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(u=a).next,u.next=null,s.lastBaseUpdate=u,s.shared.pending=null}}if(null===c&&(l=d),s.baseState=l,s.firstBaseUpdate=h,s.lastBaseUpdate=c,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===r&&(s.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=d}}function Ur(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=i,"function"!==typeof s)throw Error(r(191,s));s.call(n)}}}var jr={},Gr=xs(jr),Kr=xs(jr),$r=xs(jr);function qr(e){if(e===jr)throw Error(r(174));return e}function Qr(e,t){switch(Ls($r,t),Ls(Kr,e),Ls(Gr,jr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ks(Gr),Ls(Gr,t)}function Xr(){ks(Gr),ks(Kr),ks($r)}function Yr(e){qr($r.current);var t=qr(Gr.current),i=le(t,e.type);t!==i&&(Ls(Kr,e),Ls(Gr,i))}function Zr(e){Kr.current===e&&(ks(Gr),ks(Kr))}var Jr=xs(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function io(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var no=y.ReactCurrentDispatcher,so=y.ReactCurrentBatchConfig,ro=0,oo=null,ao=null,lo=null,ho=!1,co=!1,uo=0,go=0;function po(){throw Error(r(321))}function fo(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!an(e[i],t[i]))return!1;return!0}function mo(e,t,i,n,s,o){if(ro=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,no.current=null===e||null===e.memoizedState?Jo:ea,e=i(n,s),co){o=0;do{if(co=!1,uo=0,25<=o)throw Error(r(301));o+=1,lo=ao=null,t.updateQueue=null,no.current=ta,e=i(n,s)}while(co)}if(no.current=Zo,t=null!==ao&&null!==ao.next,ro=0,lo=ao=oo=null,ho=!1,t)throw Error(r(300));return e}function _o(){var e=0!==uo;return uo=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(r(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function yo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=bo(),i=t.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=e;var n=ao,s=n.baseQueue,o=i.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,i.pending=null}if(null!==s){o=s.next,n=n.baseState;var l=a=null,h=null,c=o;do{var d=c.lane;if((ro&d)===d)null!==h&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===h?(l=h=u,a=n):h=h.next=u,oo.lanes|=d,Ol|=d}c=c.next}while(null!==c&&c!==o);null===h?a=n:h.next=l,an(n,t.memoizedState)||(ba=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=h,i.lastRenderedState=n}if(null!==(e=i.interleaved)){s=e;do{o=s.lane,oo.lanes|=o,Ol|=o,s=s.next}while(s!==e)}else null===s&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Co(e){var t=bo(),i=t.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=e;var n=i.dispatch,s=i.pending,o=t.memoizedState;if(null!==s){i.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);an(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,n]}function So(){}function xo(e,t){var i=oo,n=bo(),s=t(),o=!an(n.memoizedState,s);if(o&&(n.memoizedState=s,ba=!0),n=n.queue,Oo(Eo.bind(null,i,n,e),[e]),n.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(i.flags|=2048,No(9,Lo.bind(null,i,n,s,t),void 0,null),null===Tl)throw Error(r(349));0!==(30&ro)||ko(i,t,s)}return s}function ko(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Lo(e,t,i,n){t.value=i,t.getSnapshot=n,Mo(t)&&To(e)}function Eo(e,t,i){return i((function(){Mo(t)&&To(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!an(e,i)}catch(n){return!0}}function To(e){var t=Rr(e,1);null!==t&&ih(t,e,1,-1)}function Do(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:e},t.queue=e,e=e.dispatch=qo.bind(null,oo,e),[t.memoizedState,e]}function No(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Io(){return bo().memoizedState}function Ao(e,t,i,n){var s=vo();oo.flags|=e,s.memoizedState=No(1|t,i,void 0,void 0===n?null:n)}function Ro(e,t,i,n){var s=bo();n=void 0===n?null:n;var r=void 0;if(null!==ao){var o=ao.memoizedState;if(r=o.destroy,null!==n&&fo(n,o.deps))return void(s.memoizedState=No(t,i,r,n))}oo.flags|=e,s.memoizedState=No(1|t,i,r,n)}function Po(e,t){return Ao(8390656,8,e,t)}function Oo(e,t){return Ro(2048,8,e,t)}function Fo(e,t){return Ro(4,2,e,t)}function Bo(e,t){return Ro(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ro(4,4,zo.bind(null,t,e),i)}function Wo(){}function Ho(e,t){var i=bo();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&fo(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Uo(e,t){var i=bo();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&fo(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function jo(e,t,i){return 0===(21&ro)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=i):(an(i,t)||(i=ft(),oo.lanes|=i,Ol|=i,e.baseState=!0),t)}function Go(e,t){var i=bt;bt=0!==i&&4>i?i:4,e(!0);var n=so.transition;so.transition={};try{e(!1),t()}finally{bt=i,so.transition=n}}function Ko(){return bo().memoizedState}function $o(e,t,i){var n=th(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Qo(e))Xo(t,i);else if(null!==(i=Ar(e,t,i,n))){ih(i,e,n,eh()),Yo(i,t,n)}}function qo(e,t,i){var n=th(e),s={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Xo(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=r(o,i);if(s.hasEagerState=!0,s.eagerState=a,an(a,o)){var l=t.interleaved;return null===l?(s.next=s,Ir(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(h){}null!==(i=Ar(e,t,s,n))&&(ih(i,e,n,s=eh()),Yo(i,t,n))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){co=ho=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Yo(e,t,i){if(0!==(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}var Zo={readContext:Dr,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Jo={readContext:Dr,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Dr,useEffect:Po,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ao(4194308,4,zo.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ao(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ao(4,2,e,t)},useMemo:function(e,t){var i=vo();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=vo();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$o.bind(null,oo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Do,useDebugValue:Wo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Go.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=oo,s=vo();if(sr){if(void 0===i)throw Error(r(407));i=i()}else{if(i=t(),null===Tl)throw Error(r(349));0!==(30&ro)||ko(n,t,i)}s.memoizedState=i;var o={value:i,getSnapshot:t};return s.queue=o,Po(Eo.bind(null,n,o,e),[e]),n.flags|=2048,No(9,Lo.bind(null,n,o,i,t),void 0,null),i},useId:function(){var e=vo(),t=Tl.identifierPrefix;if(sr){var i=Ys;t=":"+t+"R"+(i=(Xs&~(1<<32-ot(Xs)-1)).toString(32)+i),0<(i=uo++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=go++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Dr,useCallback:Ho,useContext:Dr,useEffect:Oo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Bo,useMemo:Uo,useReducer:wo,useRef:Io,useState:function(){return wo(yo)},useDebugValue:Wo,useDeferredValue:function(e){return jo(bo(),ao.memoizedState,e)},useTransition:function(){return[wo(yo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:Dr,useCallback:Ho,useContext:Dr,useEffect:Oo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Bo,useMemo:Uo,useReducer:Co,useRef:Io,useState:function(){return Co(yo)},useDebugValue:Wo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:jo(t,ao.memoizedState,e)},useTransition:function(){return[Co(yo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Ko,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){for(var i in t=F({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function na(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:F({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=eh(),s=th(e),r=Br(n,s);r.payload=t,void 0!==i&&null!==i&&(r.callback=i),null!==(t=zr(e,r,s))&&(ih(t,e,s,n),Vr(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=eh(),s=th(e),r=Br(n,s);r.tag=1,r.payload=t,void 0!==i&&null!==i&&(r.callback=i),null!==(t=zr(e,r,s))&&(ih(t,e,s,n),Vr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=eh(),n=th(e),s=Br(i,n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=zr(e,s,n))&&(ih(t,e,n,i),Vr(t,e,n))}};function ra(e,t,i,n,s,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!ln(i,n)||!ln(s,r))}function oa(e,t,i){var n=!1,s=Es,r=t.contextType;return"object"===typeof r&&null!==r?r=Dr(r):(s=Is(t)?Ds:Ms.current,r=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ns(e,s):Es),t=new t(i,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function aa(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function la(e,t,i,n){var s=e.stateNode;s.props=i,s.state=e.memoizedState,s.refs={},Or(e);var r=t.contextType;"object"===typeof r&&null!==r?s.context=Dr(r):(r=Is(t)?Ds:Ms.current,s.context=Ns(e,r)),s.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(na(e,t,r,i),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&sa.enqueueReplaceState(s,s.state,null),Hr(e,i,s,n),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ha(e,t){try{var i="",n=t;do{i+=W(n),n=n.return}while(n);var s=i}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:s,digest:null}}function ca(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}var ua="function"===typeof WeakMap?WeakMap:Map;function ga(e,t,i){(i=Br(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){jl||(jl=!0,Gl=n),da(0,t)},i}function pa(e,t,i){(i=Br(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var s=t.value;i.payload=function(){return n(s)},i.callback=function(){da(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(i.callback=function(){da(0,t),"function"!==typeof n&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function fa(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new ua;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(i)||(s.add(i),e=kh.bind(null,e,t,i),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,i,n,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=Br(-1,1)).tag=2,zr(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var va=y.ReactCurrentOwner,ba=!1;function ya(e,t,i,n){t.child=null===e?wr(t,null,i,n):yr(t,e.child,i,n)}function wa(e,t,i,n,s){i=i.render;var r=t.ref;return Tr(t,s),n=mo(e,t,i,n,r,s),i=_o(),null===e||ba?(sr&&i&&er(t),t.flags|=1,ya(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ja(e,t,s))}function Ca(e,t,i,n,s){if(null===e){var r=i.type;return"function"!==typeof r||Ih(r)||void 0!==r.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Rh(i.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Sa(e,t,r,n,s))}if(r=e.child,0===(e.lanes&s)){var o=r.memoizedProps;if((i=null!==(i=i.compare)?i:ln)(o,n)&&e.ref===t.ref)return ja(e,t,s)}return t.flags|=1,(e=Ah(r,n)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,i,n,s){if(null!==e){var r=e.memoizedProps;if(ln(r,n)&&e.ref===t.ref){if(ba=!1,t.pendingProps=n=r,0===(e.lanes&s))return t.lanes=e.lanes,ja(e,t,s);0!==(131072&e.flags)&&(ba=!0)}}return La(e,t,i,n,s)}function xa(e,t,i){var n=t.pendingProps,s=n.children,r=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ls(Al,Il),Il|=i;else{if(0===(1073741824&i))return e=null!==r?r.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ls(Al,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==r?r.baseLanes:i,Ls(Al,Il),Il|=n}else null!==r?(n=r.baseLanes|i,t.memoizedState=null):n=i,Ls(Al,Il),Il|=n;return ya(e,t,s,i),t.child}function ka(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function La(e,t,i,n,s){var r=Is(i)?Ds:Ms.current;return r=Ns(t,r),Tr(t,s),i=mo(e,t,i,n,r,s),n=_o(),null===e||ba?(sr&&n&&er(t),t.flags|=1,ya(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ja(e,t,s))}function Ea(e,t,i,n,s){if(Is(i)){var r=!0;Os(t)}else r=!1;if(Tr(t,s),null===t.stateNode)Ua(e,t),oa(t,i,n),la(t,i,n,s),n=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,h=i.contextType;"object"===typeof h&&null!==h?h=Dr(h):h=Ns(t,h=Is(i)?Ds:Ms.current);var c=i.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==n||l!==h)&&aa(t,o,n,h),Pr=!1;var u=t.memoizedState;o.state=u,Hr(t,n,o,s),l=t.memoizedState,a!==n||u!==l||Ts.current||Pr?("function"===typeof c&&(na(t,i,c,n),l=t.memoizedState),(a=Pr||ra(t,i,a,n,u,l,h))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=h,n=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Fr(e,t),a=t.memoizedProps,h=t.type===t.elementType?a:ia(t.type,a),o.props=h,d=t.pendingProps,u=o.context,"object"===typeof(l=i.contextType)&&null!==l?l=Dr(l):l=Ns(t,l=Is(i)?Ds:Ms.current);var g=i.getDerivedStateFromProps;(c="function"===typeof g||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||u!==l)&&aa(t,o,n,l),Pr=!1,u=t.memoizedState,o.state=u,Hr(t,n,o,s);var p=t.memoizedState;a!==d||u!==p||Ts.current||Pr?("function"===typeof g&&(na(t,i,g,n),p=t.memoizedState),(h=Pr||ra(t,i,h,n,u,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=l,n=h):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),n=!1)}return Ma(e,t,i,n,r,s)}function Ma(e,t,i,n,s,r){ka(e,t);var o=0!==(128&t.flags);if(!n&&!o)return s&&Fs(t,i,!1),ja(e,t,r);n=t.stateNode,va.current=t;var a=o&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=yr(t,e.child,null,r),t.child=yr(t,null,a,r)):ya(e,t,a,r),t.memoizedState=n.state,s&&Fs(t,i,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Qr(e,t.containerInfo)}function Da(e,t,i,n,s){return gr(),pr(s),t.flags|=256,ya(e,t,i,n),t.child}var Na,Ia,Aa,Ra,Pa={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,i){var n,s=t.pendingProps,o=Jr.current,a=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ls(Jr,1&o),null===e)return hr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Oh(l,s,0,null),e=Ph(e,s,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oa(i),t.memoizedState=Pa,e):Ba(t,l));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,i,n,s,o,a){if(i)return 256&t.flags?(t.flags&=-257,za(e,t,a,n=ca(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Oh({mode:"visible",children:n.children},s,0,null),(o=Ph(o,s,a,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&yr(t,e.child,null,a),t.child.memoizedState=Oa(a),t.memoizedState=Pa,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var l=n.dgst;return n=l,za(e,t,a,n=ca(o=Error(r(419)),n,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(n=Tl)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Rr(e,s),ih(n,e,s,-1))}return fh(),za(e,t,a,n=ca(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Eh.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,nr=hs(s.nextSibling),ir=t,sr=!0,rr=null,null!==e&&($s[qs++]=Xs,$s[qs++]=Ys,$s[qs++]=Qs,Xs=e.id,Ys=e.overflow,Qs=t),t=Ba(t,n.children),t.flags|=4096,t)}(e,t,l,s,n,o,i);if(a){a=s.fallback,l=t.mode,n=(o=e.child).sibling;var h={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=h,t.deletions=null):(s=Ah(o,h)).subtreeFlags=14680064&o.subtreeFlags,null!==n?a=Ah(n,a):(a=Ph(a,l,i,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?Oa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~i,t.memoizedState=Pa,s}return e=(a=e.child).sibling,s=Ah(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=i),s.return=t,s.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function Ba(e,t){return(t=Oh({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,i,n){return null!==n&&pr(n),yr(t,e.child,null,i),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Mr(e.return,t,i)}function Wa(e,t,i,n,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=s)}function Ha(e,t,i){var n=t.pendingProps,s=n.revealOrder,r=n.tail;if(ya(e,t,n.children,i),0!==(2&(n=Jr.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,i,t);else if(19===e.tag)Va(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ls(Jr,n),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(i=t.child,s=null;null!==i;)null!==(e=i.alternate)&&null===eo(e)&&(s=i),i=i.sibling;null===(i=s)?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),Wa(t,!1,s,i,r);break;case"backwards":for(i=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===eo(e)){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}Wa(t,!0,i,null,r);break;case"together":Wa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ua(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ja(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(i=Ah(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Ah(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Ga(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var s=e.child;null!==s;)i|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function $a(e,t,i){var n=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Is(t.type)&&As(),Ka(t),null;case 3:return n=t.stateNode,Xr(),ks(Ts),ks(Ms),io(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(dr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(oh(rr),rr=null))),Ia(e,t),Ka(t),null;case 5:Zr(t);var s=qr($r.current);if(i=t.type,null!==e&&null!=t.stateNode)Aa(e,t,i,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(r(166));return Ka(t),null}if(e=qr(Gr.current),dr(t)){n=t.stateNode,i=t.type;var o=t.memoizedProps;switch(n[us]=t,n[gs]=o,e=0!==(1&t.mode),i){case"dialog":zn("cancel",n),zn("close",n);break;case"iframe":case"object":case"embed":zn("load",n);break;case"video":case"audio":for(s=0;s<Pn.length;s++)zn(Pn[s],n);break;case"source":zn("error",n);break;case"img":case"image":case"link":zn("error",n),zn("load",n);break;case"details":zn("toggle",n);break;case"input":X(n,o),zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},zn("invalid",n);break;case"textarea":se(n,o),zn("invalid",n)}for(var l in ve(i,o),s=null,o)if(o.hasOwnProperty(l)){var h=o[l];"children"===l?"string"===typeof h?n.textContent!==h&&(!0!==o.suppressHydrationWarning&&Zn(n.textContent,h,e),s=["children",h]):"number"===typeof h&&n.textContent!==""+h&&(!0!==o.suppressHydrationWarning&&Zn(n.textContent,h,e),s=["children",""+h]):a.hasOwnProperty(l)&&null!=h&&"onScroll"===l&&zn("scroll",n)}switch(i){case"input":K(n),J(n,o,!0);break;case"textarea":K(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=Jn)}n=s,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),"select"===i&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[us]=t,e[gs]=n,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(i,n),i){case"dialog":zn("cancel",e),zn("close",e),s=n;break;case"iframe":case"object":case"embed":zn("load",e),s=n;break;case"video":case"audio":for(s=0;s<Pn.length;s++)zn(Pn[s],e);s=n;break;case"source":zn("error",e),s=n;break;case"img":case"image":case"link":zn("error",e),zn("load",e),s=n;break;case"details":zn("toggle",e),s=n;break;case"input":X(e,n),s=Q(e,n),zn("invalid",e);break;case"option":default:s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=F({},n,{value:void 0}),zn("invalid",e);break;case"textarea":se(e,n),s=ne(e,n),zn("invalid",e)}for(o in ve(i,s),h=s)if(h.hasOwnProperty(o)){var c=h[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==i||""!==c)&&ue(e,c):"number"===typeof c&&ue(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zn("scroll",e):null!=c&&b(e,o,c,l))}switch(i){case"input":K(e),J(e,n,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+j(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?ie(e,!!n.multiple,o,!1):null!=n.defaultValue&&ie(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Jn)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Ra(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(r(166));if(i=qr($r.current),qr(Gr.current),dr(t)){if(n=t.stateNode,i=t.memoizedProps,n[us]=t,(o=n.nodeValue!==i)&&null!==(e=ir))switch(e.tag){case 3:Zn(n.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,i,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[us]=t,t.stateNode=n}return Ka(t),null;case 13:if(ks(Jr),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sr&&null!==nr&&0!==(1&t.mode)&&0===(128&t.flags))ur(),gr(),t.flags|=98560,o=!1;else if(o=dr(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[us]=t}else gr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==rr&&(oh(rr),rr=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Jr.current)?0===Rl&&(Rl=3):fh())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Xr(),Ia(e,t),null===e&&Hn(t.stateNode.containerInfo),Ka(t),null;case 10:return Er(t.type._context),Ka(t),null;case 19:if(ks(Jr),null===(o=t.memoizedState))return Ka(t),null;if(n=0!==(128&t.flags),null===(l=o.rendering))if(n)Ga(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ga(o,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(o=i).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ls(Jr,1&Jr.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Hl&&(t.flags|=128,n=!0,Ga(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=eo(l))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!sr)return Ka(t),null}else 2*Ye()-o.renderingStartTime>Hl&&1073741824!==i&&(t.flags|=128,n=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=o.last)?i.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,i=Jr.current,Ls(Jr,n?1&i|2:1&i),t):(Ka(t),null);case 22:case 23:return dh(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function qa(e,t){switch(tr(t),t.tag){case 1:return Is(t.type)&&As(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xr(),ks(Ts),ks(Ms),io(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zr(t),null;case 13:if(ks(Jr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));gr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ks(Jr),null;case 4:return Xr(),null;case 10:return Er(t.type._context),null;case 22:case 23:return dh(),null;default:return null}}Na=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ia=function(){},Aa=function(e,t,i,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,qr(Gr.current);var r,o=null;switch(i){case"input":s=Q(e,s),n=Q(e,n),o=[];break;case"select":s=F({},s,{value:void 0}),n=F({},n,{value:void 0}),o=[];break;case"textarea":s=ne(e,s),n=ne(e,n),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(c in ve(i,n),i=null,s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(r in l)l.hasOwnProperty(r)&&(i||(i={}),i[r]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var h=n[c];if(l=null!=s?s[c]:void 0,n.hasOwnProperty(c)&&h!==l&&(null!=h||null!=l))if("style"===c)if(l){for(r in l)!l.hasOwnProperty(r)||h&&h.hasOwnProperty(r)||(i||(i={}),i[r]="");for(r in h)h.hasOwnProperty(r)&&l[r]!==h[r]&&(i||(i={}),i[r]=h[r])}else i||(o||(o=[]),o.push(c,i)),i=h;else"dangerouslySetInnerHTML"===c?(h=h?h.__html:void 0,l=l?l.__html:void 0,null!=h&&l!==h&&(o=o||[]).push(c,h)):"children"===c?"string"!==typeof h&&"number"!==typeof h||(o=o||[]).push(c,""+h):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=h&&"onScroll"===c&&zn("scroll",e),o||l===h||(o=[])):(o=o||[]).push(c,h))}i&&(o=o||[]).push("style",i);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ra=function(e,t,i,n){i!==n&&(t.flags|=4)};var Qa=!1,Xa=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Za=null;function Ja(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(n){xh(e,t,n)}else i.current=null}function el(e,t,i){try{i()}catch(n){xh(e,t,n)}}var tl=!1;function il(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,void 0!==r&&el(t,i,r)}s=s.next}while(s!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function sl(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[us],delete t[gs],delete t[fs],delete t[ms],delete t[_s])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,i),e=e.sibling;null!==e;)ll(e,t,i),e=e.sibling}function hl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(hl(e,t,i),e=e.sibling;null!==e;)hl(e,t,i),e=e.sibling}var cl=null,dl=!1;function ul(e,t,i){for(i=i.child;null!==i;)gl(e,t,i),i=i.sibling}function gl(e,t,i){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(st,i)}catch(a){}switch(i.tag){case 5:Xa||Ja(i,t);case 6:var n=cl,s=dl;cl=null,ul(e,t,i),dl=s,null!==(cl=n)&&(dl?(e=cl,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):cl.removeChild(i.stateNode));break;case 18:null!==cl&&(dl?(e=cl,i=i.stateNode,8===e.nodeType?ls(e.parentNode,i):1===e.nodeType&&ls(e,i),Ht(e)):ls(cl,i.stateNode));break;case 4:n=cl,s=dl,cl=i.stateNode.containerInfo,dl=!0,ul(e,t,i),cl=n,dl=s;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var r=s,o=r.destroy;r=r.tag,void 0!==o&&(0!==(2&r)||0!==(4&r))&&el(i,t,o),s=s.next}while(s!==n)}ul(e,t,i);break;case 1:if(!Xa&&(Ja(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(a){xh(i,t,a)}ul(e,t,i);break;case 21:ul(e,t,i);break;case 22:1&i.mode?(Xa=(n=Xa)||null!==i.memoizedState,ul(e,t,i),Xa=n):ul(e,t,i);break;default:ul(e,t,i)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Ya),t.forEach((function(t){var n=Mh.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function fl(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var s=i[n];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(r(160));gl(o,a,s),cl=null,dl=!1;var h=s.alternate;null!==h&&(h.return=null),s.return=null}catch(c){xh(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),_l(e),4&n){try{il(3,e,e.return),nl(3,e)}catch(m){xh(e,e.return,m)}try{il(5,e,e.return)}catch(m){xh(e,e.return,m)}}break;case 1:fl(t,e),_l(e),512&n&&null!==i&&Ja(i,i.return);break;case 5:if(fl(t,e),_l(e),512&n&&null!==i&&Ja(i,i.return),32&e.flags){var s=e.stateNode;try{ue(s,"")}catch(m){xh(e,e.return,m)}}if(4&n&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==i?i.memoizedProps:o,l=e.type,h=e.updateQueue;if(e.updateQueue=null,null!==h)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(s,o),be(l,a);var c=be(l,o);for(a=0;a<h.length;a+=2){var d=h[a],u=h[a+1];"style"===d?me(s,u):"dangerouslySetInnerHTML"===d?de(s,u):"children"===d?ue(s,u):b(s,d,u,c)}switch(l){case"input":Z(s,o);break;case"textarea":re(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ie(s,!!o.multiple,p,!1):g!==!!o.multiple&&(null!=o.defaultValue?ie(s,!!o.multiple,o.defaultValue,!0):ie(s,!!o.multiple,o.multiple?[]:"",!1))}s[gs]=o}catch(m){xh(e,e.return,m)}}break;case 6:if(fl(t,e),_l(e),4&n){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(m){xh(e,e.return,m)}}break;case 3:if(fl(t,e),_l(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){xh(e,e.return,m)}break;case 4:default:fl(t,e),_l(e);break;case 13:fl(t,e),_l(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Wl=Ye())),4&n&&pl(e);break;case 22:if(d=null!==i&&null!==i.memoizedState,1&e.mode?(Xa=(c=Xa)||d,fl(t,e),Xa=c):fl(t,e),_l(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Za=e,d=e.child;null!==d;){for(u=Za=d;null!==Za;){switch(p=(g=Za).child,g.tag){case 0:case 11:case 14:case 15:il(4,g,g.return);break;case 1:Ja(g,g.return);var f=g.stateNode;if("function"===typeof f.componentWillUnmount){n=g,i=g.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){xh(n,i,m)}}break;case 5:Ja(g,g.return);break;case 22:if(null!==g.memoizedState){wl(u);continue}}null!==p?(p.return=g,Za=p):wl(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{s=u.stateNode,c?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=u.stateNode,a=void 0!==(h=u.memoizedProps.style)&&null!==h&&h.hasOwnProperty("display")?h.display:null,l.style.display=fe("display",a))}catch(m){xh(e,e.return,m)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){xh(e,e.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:fl(t,e),_l(e),4&n&&pl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(ol(i)){var n=i;break e}i=i.return}throw Error(r(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(ue(s,""),n.flags&=-33),hl(e,al(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(r(161))}}catch(a){xh(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,i){Za=e,bl(e,t,i)}function bl(e,t,i){for(var n=0!==(1&e.mode);null!==Za;){var s=Za,r=s.child;if(22===s.tag&&n){var o=null!==s.memoizedState||Qa;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Qa;var h=Xa;if(Qa=o,(Xa=l)&&!h)for(Za=s;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Cl(s):null!==l?(l.return=o,Za=l):Cl(s);for(;null!==r;)Za=r,bl(r,t,i),r=r.sibling;Za=s,Qa=a,Xa=h}yl(e)}else 0!==(8772&s.subtreeFlags)&&null!==r?(r.return=s,Za=r):yl(e)}}function yl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xa)if(null===i)n.componentDidMount();else{var s=t.elementType===t.type?i.memoizedProps:ia(t.type,i.memoizedProps);n.componentDidUpdate(s,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ur(t,o,n);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Ur(t,a,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&i.focus();break;case"img":h.src&&(i.src=h.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&Ht(u)}}}break;default:throw Error(r(163))}Xa||512&t.flags&&sl(t)}catch(g){xh(t,t.return,g)}}if(t===e){Za=null;break}if(null!==(i=t.sibling)){i.return=t.return,Za=i;break}Za=t.return}}function wl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Za=i;break}Za=t.return}}function Cl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{nl(4,t)}catch(l){xh(t,i,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(l){xh(t,s,l)}}var r=t.return;try{sl(t)}catch(l){xh(t,r,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){xh(t,o,l)}}}catch(l){xh(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,xl=Math.ceil,kl=y.ReactCurrentDispatcher,Ll=y.ReactCurrentOwner,El=y.ReactCurrentBatchConfig,Ml=0,Tl=null,Dl=null,Nl=0,Il=0,Al=xs(0),Rl=0,Pl=null,Ol=0,Fl=0,Bl=0,zl=null,Vl=null,Wl=0,Hl=1/0,Ul=null,jl=!1,Gl=null,Kl=null,$l=!1,ql=null,Ql=0,Xl=0,Yl=null,Zl=-1,Jl=0;function eh(){return 0!==(6&Ml)?Ye():-1!==Zl?Zl:Zl=Ye()}function th(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Nl?Nl&-Nl:null!==fr.transition?(0===Jl&&(Jl=ft()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ih(e,t,i,n){if(50<Xl)throw Xl=0,Yl=null,Error(r(185));_t(e,i,n),0!==(2&Ml)&&e===Tl||(e===Tl&&(0===(2&Ml)&&(Fl|=i),4===Rl&&ah(e,Nl)),nh(e,n),1===i&&0===Ml&&0===(1&t.mode)&&(Hl=Ye()+500,zs&&Hs()))}function nh(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-ot(r),a=1<<o,l=s[o];-1===l?0!==(a&i)&&0===(a&n)||(s[o]=gt(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}(e,t);var n=ut(e,e===Tl?Nl:0);if(0===n)null!==i&&qe(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&qe(i),1===t)0===e.tag?function(e){zs=!0,Ws(e)}(lh.bind(null,e)):Ws(lh.bind(null,e)),os((function(){0===(6&Ml)&&Hs()})),i=null;else{switch(yt(n)){case 1:i=Je;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=nt}i=Th(i,sh.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function sh(e,t){if(Zl=-1,Jl=0,0!==(6&Ml))throw Error(r(327));var i=e.callbackNode;if(Ch()&&e.callbackNode!==i)return null;var n=ut(e,e===Tl?Nl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=mh(e,n);else{t=n;var s=Ml;Ml|=2;var o=ph();for(Tl===e&&Nl===t||(Ul=null,Hl=Ye()+500,uh(e,t));;)try{vh();break}catch(l){gh(e,l)}Lr(),kl.current=o,Ml=s,null!==Dl?t=0:(Tl=null,Nl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(n=s,t=rh(e,s))),1===t)throw i=Pl,uh(e,0),ah(e,n),nh(e,Ye()),i;if(6===t)ah(e,n);else{if(s=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var s=i[n],r=s.getSnapshot;s=s.value;try{if(!an(r(),s))return!1}catch(a){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=mh(e,n))&&(0!==(o=pt(e))&&(n=o,t=rh(e,o))),1===t))throw i=Pl,uh(e,0),ah(e,n),nh(e,Ye()),i;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(r(345));case 2:case 5:wh(e,Vl,Ul);break;case 3:if(ah(e,n),(130023424&n)===n&&10<(t=Wl+500-Ye())){if(0!==ut(e,0))break;if(((s=e.suspendedLanes)&n)!==n){eh(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ns(wh.bind(null,e,Vl,Ul),t);break}wh(e,Vl,Ul);break;case 4:if(ah(e,n),(4194240&n)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-ot(n);o=1<<a,(a=t[a])>s&&(s=a),n&=~o}if(n=s,10<(n=(120>(n=Ye()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xl(n/1960))-n)){e.timeoutHandle=ns(wh.bind(null,e,Vl,Ul),n);break}wh(e,Vl,Ul);break;default:throw Error(r(329))}}}return nh(e,Ye()),e.callbackNode===i?sh.bind(null,e):null}function rh(e,t){var i=zl;return e.current.memoizedState.isDehydrated&&(uh(e,t).flags|=256),2!==(e=mh(e,t))&&(t=Vl,Vl=i,null!==t&&oh(t)),e}function oh(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ah(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ot(t),n=1<<i;e[i]=-1,t&=~n}}function lh(e){if(0!==(6&Ml))throw Error(r(327));Ch();var t=ut(e,0);if(0===(1&t))return nh(e,Ye()),null;var i=mh(e,t);if(0!==e.tag&&2===i){var n=pt(e);0!==n&&(t=n,i=rh(e,n))}if(1===i)throw i=Pl,uh(e,0),ah(e,t),nh(e,Ye()),i;if(6===i)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wh(e,Vl,Ul),nh(e,Ye()),null}function hh(e,t){var i=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=i)&&(Hl=Ye()+500,zs&&Hs())}}function ch(e){null!==ql&&0===ql.tag&&0===(6&Ml)&&Ch();var t=Ml;Ml|=1;var i=El.transition,n=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=n,El.transition=i,0===(6&(Ml=t))&&Hs()}}function dh(){Il=Al.current,ks(Al)}function uh(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,ss(i)),null!==Dl)for(i=Dl.return;null!==i;){var n=i;switch(tr(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&As();break;case 3:Xr(),ks(Ts),ks(Ms),io();break;case 5:Zr(n);break;case 4:Xr();break;case 13:case 19:ks(Jr);break;case 10:Er(n.type._context);break;case 22:case 23:dh()}i=i.return}if(Tl=e,Dl=e=Ah(e.current,null),Nl=Il=t,Rl=0,Pl=null,Bl=Fl=Ol=0,Vl=zl=null,null!==Nr){for(t=0;t<Nr.length;t++)if(null!==(n=(i=Nr[t]).interleaved)){i.interleaved=null;var s=n.next,r=i.pending;if(null!==r){var o=r.next;r.next=s,n.next=o}i.pending=n}Nr=null}return e}function gh(e,t){for(;;){var i=Dl;try{if(Lr(),no.current=Zo,ho){for(var n=oo.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}ho=!1}if(ro=0,lo=ao=oo=null,co=!1,uo=0,Ll.current=null,null===i||null===i.return){Rl=1,Pl=t,Dl=null;break}e:{var o=e,a=i.return,l=i,h=t;if(t=Nl,l.flags|=32768,null!==h&&"object"===typeof h&&"function"===typeof h.then){var c=h,d=l,u=d.tag;if(0===(1&d.mode)&&(0===u||11===u||15===u)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&fa(o,c,t),h=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(h),t.updateQueue=m}else f.add(h);break e}if(0===(1&t)){fa(o,c,t),fh();break e}h=Error(r(426))}else if(sr&&1&l.mode){var _=ma(a);if(null!==_){0===(65536&_.flags)&&(_.flags|=256),_a(_,a,l,0,t),pr(ha(h,l));break e}}o=h=ha(h,l),4!==Rl&&(Rl=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Wr(o,ga(0,h,t));break e;case 1:l=h;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Wr(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}yh(i)}catch(y){t=y,Dl===i&&null!==i&&(Dl=i=i.return);continue}break}}function ph(){var e=kl.current;return kl.current=Zo,null===e?Zo:e}function fh(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&Ol)&&0===(268435455&Fl)||ah(Tl,Nl)}function mh(e,t){var i=Ml;Ml|=2;var n=ph();for(Tl===e&&Nl===t||(Ul=null,uh(e,t));;)try{_h();break}catch(s){gh(e,s)}if(Lr(),Ml=i,kl.current=n,null!==Dl)throw Error(r(261));return Tl=null,Nl=0,Rl}function _h(){for(;null!==Dl;)bh(Dl)}function vh(){for(;null!==Dl&&!Qe();)bh(Dl)}function bh(e){var t=Sl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?yh(e):Dl=t,Ll.current=null}function yh(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=$a(i,t,Il)))return void(Dl=i)}else{if(null!==(i=qa(i,t)))return i.flags&=32767,void(Dl=i);if(null===e)return Rl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wh(e,t,i){var n=bt,s=El.transition;try{El.transition=null,bt=1,function(e,t,i,n){do{Ch()}while(null!==ql);if(0!==(6&Ml))throw Error(r(327));i=e.finishedWork;var s=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var s=31-ot(i),r=1<<s;t[s]=0,n[s]=-1,e[s]=-1,i&=~r}}(e,o),e===Tl&&(Dl=Tl=null,Nl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||$l||($l=!0,Th(tt,(function(){return Ch(),null}))),o=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||o){o=El.transition,El.transition=null;var a=bt;bt=1;var l=Ml;Ml|=4,Ll.current=null,function(e,t){if(es=jt,gn(e=un())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{i.nodeType,o.nodeType}catch(w){i=null;break e}var a=0,l=-1,h=-1,c=0,d=0,u=e,g=null;t:for(;;){for(var p;u!==i||0!==s&&3!==u.nodeType||(l=a+s),u!==o||0!==n&&3!==u.nodeType||(h=a+n),3===u.nodeType&&(a+=u.nodeValue.length),null!==(p=u.firstChild);)g=u,u=p;for(;;){if(u===e)break t;if(g===i&&++c===s&&(l=a),g===o&&++d===n&&(h=a),null!==(p=u.nextSibling))break;g=(u=g).parentNode}u=p}i=-1===l||-1===h?null:{start:l,end:h}}else i=null}i=i||{start:0,end:0}}else i=null;for(ts={focusedElem:e,selectionRange:i},jt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,_=f.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ia(t.type,m),_);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(r(163))}}catch(w){xh(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}f=tl,tl=!1}(e,i),ml(i,e),pn(ts),jt=!!es,ts=es=null,e.current=i,vl(i,e,s),Xe(),Ml=l,bt=a,El.transition=o}else e.current=i;if($l&&($l=!1,ql=e,Ql=s),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),nh(e,Ye()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)s=t[i],n(s.value,{componentStack:s.stack,digest:s.digest});if(jl)throw jl=!1,e=Gl,Gl=null,e;0!==(1&Ql)&&0!==e.tag&&Ch(),o=e.pendingLanes,0!==(1&o)?e===Yl?Xl++:(Xl=0,Yl=e):Xl=0,Hs()}(e,t,i,n)}finally{El.transition=s,bt=n}return null}function Ch(){if(null!==ql){var e=yt(Ql),t=El.transition,i=bt;try{if(El.transition=null,bt=16>e?16:e,null===ql)var n=!1;else{if(e=ql,ql=null,Ql=0,0!==(6&Ml))throw Error(r(331));var s=Ml;for(Ml|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var h=0;h<l.length;h++){var c=l[h];for(Za=c;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:il(8,d,o)}var u=d.child;if(null!==u)u.return=d,Za=u;else for(;null!==Za;){var g=(d=Za).sibling,p=d.return;if(rl(d),d===c){Za=null;break}if(null!==g){g.return=p,Za=g;break}Za=p}}}var f=o.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var b=e.current;for(Za=b;null!==Za;){var y=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==y)y.return=a,Za=y;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(C){xh(l,l.return,C)}if(l===a){Za=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break e}Za=l.return}}if(Ml=s,Hs(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(st,e)}catch(C){}n=!0}return n}finally{bt=i,El.transition=t}}return!1}function Sh(e,t,i){e=zr(e,t=ga(0,t=ha(i,t),1),1),t=eh(),null!==e&&(_t(e,1,t),nh(e,t))}function xh(e,t,i){if(3===e.tag)Sh(e,e,i);else for(;null!==t;){if(3===t.tag){Sh(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Kl||!Kl.has(n))){t=zr(t,e=pa(t,e=ha(i,e),1),1),e=eh(),null!==t&&(_t(t,1,e),nh(t,e));break}}t=t.return}}function kh(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=eh(),e.pingedLanes|=e.suspendedLanes&i,Tl===e&&(Nl&i)===i&&(4===Rl||3===Rl&&(130023424&Nl)===Nl&&500>Ye()-Wl?uh(e,0):Bl|=i),nh(e,t)}function Lh(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var i=eh();null!==(e=Rr(e,t))&&(_t(e,t,i),nh(e,i))}function Eh(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Lh(e,i)}function Mh(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(i=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(r(314))}null!==n&&n.delete(t),Lh(e,i)}function Th(e,t){return $e(e,t)}function Dh(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nh(e,t,i,n){return new Dh(e,t,i,n)}function Ih(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ah(e,t){var i=e.alternate;return null===i?((i=Nh(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Rh(e,t,i,n,s,o){var a=2;if(n=e,"function"===typeof e)Ih(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ph(i.children,s,o,t);case x:a=8,s|=8;break;case k:return(e=Nh(12,i,t,2|s)).elementType=k,e.lanes=o,e;case T:return(e=Nh(13,i,t,s)).elementType=T,e.lanes=o,e;case D:return(e=Nh(19,i,t,s)).elementType=D,e.lanes=o,e;case A:return Oh(i,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case L:a=10;break e;case E:a=9;break e;case M:a=11;break e;case N:a=14;break e;case I:a=16,n=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Nh(a,i,t,s)).elementType=e,t.type=n,t.lanes=o,t}function Ph(e,t,i,n){return(e=Nh(7,e,n,t)).lanes=i,e}function Oh(e,t,i,n){return(e=Nh(22,e,n,t)).elementType=A,e.lanes=i,e.stateNode={isHidden:!1},e}function Fh(e,t,i){return(e=Nh(6,e,null,t)).lanes=i,e}function Bh(e,t,i){return(t=Nh(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zh(e,t,i,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vh(e,t,i,n,s,r,o,a,l){return e=new zh(e,t,i,a,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Nh(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Or(r),e}function Wh(e){if(!e)return Es;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Is(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var i=e.type;if(Is(i))return Ps(e,i,t)}return t}function Hh(e,t,i,n,s,r,o,a,l){return(e=Vh(i,n,!0,e,0,r,0,a,l)).context=Wh(null),i=e.current,(r=Br(n=eh(),s=th(i))).callback=void 0!==t&&null!==t?t:null,zr(i,r,s),e.current.lanes=s,_t(e,s,n),nh(e,n),e}function Uh(e,t,i,n){var s=t.current,r=eh(),o=th(s);return i=Wh(i),null===t.context?t.context=i:t.pendingContext=i,(t=Br(r,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zr(s,t,o))&&(ih(e,s,o,r),Vr(e,s,o)),o}function jh(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Kh(e,t){Gh(e,t),(e=e.alternate)&&Gh(e,t)}Sl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ts.current)ba=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return ba=!1,function(e,t,i){switch(t.tag){case 3:Ta(t),gr();break;case 5:Yr(t);break;case 1:Is(t.type)&&Os(t);break;case 4:Qr(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ls(Cr,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ls(Jr,1&Jr.current),t.flags|=128,null):0!==(i&t.child.childLanes)?Fa(e,t,i):(Ls(Jr,1&Jr.current),null!==(e=ja(e,t,i))?e.sibling:null);Ls(Jr,1&Jr.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(128&e.flags)){if(n)return Ha(e,t,i);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ls(Jr,Jr.current),n)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,i)}return ja(e,t,i)}(e,t,i);ba=0!==(131072&e.flags)}else ba=!1,sr&&0!==(1048576&t.flags)&&Js(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ua(e,t),e=t.pendingProps;var s=Ns(t,Ms.current);Tr(t,i),s=mo(null,t,n,e,s,i);var o=_o();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Is(n)?(o=!0,Os(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Or(t),s.updater=sa,t.stateNode=s,s._reactInternals=t,la(t,n,e,i),t=Ma(null,t,n,!0,o,i)):(t.tag=0,sr&&o&&er(t),ya(null,t,s,i),t=t.child),t;case 16:n=t.elementType;e:{switch(Ua(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"===typeof e)return Ih(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===N)return 14}return 2}(n),e=ia(n,e),s){case 0:t=La(null,t,n,e,i);break e;case 1:t=Ea(null,t,n,e,i);break e;case 11:t=wa(null,t,n,e,i);break e;case 14:t=Ca(null,t,n,ia(n.type,e),i);break e}throw Error(r(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,La(e,t,n,s=t.elementType===n?s:ia(n,s),i);case 1:return n=t.type,s=t.pendingProps,Ea(e,t,n,s=t.elementType===n?s:ia(n,s),i);case 3:e:{if(Ta(t),null===e)throw Error(r(387));n=t.pendingProps,s=(o=t.memoizedState).element,Fr(e,t),Hr(t,n,null,i);var a=t.memoizedState;if(n=a.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,n,i,s=ha(Error(r(423)),t));break e}if(n!==s){t=Da(e,t,n,i,s=ha(Error(r(424)),t));break e}for(nr=hs(t.stateNode.containerInfo.firstChild),ir=t,sr=!0,rr=null,i=wr(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(gr(),n===s){t=ja(e,t,i);break e}ya(e,t,n,i)}t=t.child}return t;case 5:return Yr(t),null===e&&hr(t),n=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,is(n,s)?a=null:null!==o&&is(n,o)&&(t.flags|=32),ka(e,t),ya(e,t,a,i),t.child;case 6:return null===e&&hr(t),null;case 13:return Fa(e,t,i);case 4:return Qr(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=yr(t,null,n,i):ya(e,t,n,i),t.child;case 11:return n=t.type,s=t.pendingProps,wa(e,t,n,s=t.elementType===n?s:ia(n,s),i);case 7:return ya(e,t,t.pendingProps,i),t.child;case 8:case 12:return ya(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ls(Cr,n._currentValue),n._currentValue=a,null!==o)if(an(o.value,a)){if(o.children===s.children&&!Ts.current){t=ja(e,t,i);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var h=l.firstContext;null!==h;){if(h.context===n){if(1===o.tag){(h=Br(-1,i&-i)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?h.next=h:(h.next=d.next,d.next=h),c.pending=h}}o.lanes|=i,null!==(h=o.alternate)&&(h.lanes|=i),Mr(o.return,i,t),l.lanes|=i;break}h=h.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Mr(a,i,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ya(e,t,s.children,i),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Tr(t,i),n=n(s=Dr(s)),t.flags|=1,ya(e,t,n,i),t.child;case 14:return s=ia(n=t.type,t.pendingProps),Ca(e,t,n,s=ia(n.type,s),i);case 15:return Sa(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ia(n,s),Ua(e,t),t.tag=1,Is(n)?(e=!0,Os(t)):e=!1,Tr(t,i),oa(t,n,s),la(t,n,s,i),Ma(null,t,n,!0,e,i);case 19:return Ha(e,t,i);case 22:return xa(e,t,i)}throw Error(r(156,t.tag))};var $h="function"===typeof reportError?reportError:function(e){console.error(e)};function qh(e){this._internalRoot=e}function Qh(e){this._internalRoot=e}function Xh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zh(){}function Jh(e,t,i,n,s){var r=i._reactRootContainer;if(r){var o=r;if("function"===typeof s){var a=s;s=function(){var e=jh(o);a.call(e)}}Uh(t,o,e,s)}else o=function(e,t,i,n,s){if(s){if("function"===typeof n){var r=n;n=function(){var e=jh(o);r.call(e)}}var o=Hh(t,n,e,0,null,!1,0,"",Zh);return e._reactRootContainer=o,e[ps]=o.current,Hn(8===e.nodeType?e.parentNode:e),ch(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof n){var a=n;n=function(){var e=jh(l);a.call(e)}}var l=Vh(e,0,!1,null,0,!1,0,"",Zh);return e._reactRootContainer=l,e[ps]=l.current,Hn(8===e.nodeType?e.parentNode:e),ch((function(){Uh(t,l,i,n)})),l}(i,t,e,s,n);return jh(o)}Qh.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Uh(e,t,null,null)},Qh.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ch((function(){Uh(null,e,null,null)})),t[ps]=null}},Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var i=0;i<At.length&&0!==t&&t<At[i].priority;i++);At.splice(i,0,e),0===i&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=dt(t.pendingLanes);0!==i&&(vt(t,1|i),nh(t,Ye()),0===(6&Ml)&&(Hl=Ye()+500,Hs()))}break;case 13:ch((function(){var t=Rr(e,1);if(null!==t){var i=eh();ih(t,e,1,i)}})),Kh(e,1)}},Ct=function(e){if(13===e.tag){var t=Rr(e,134217728);if(null!==t)ih(t,e,134217728,eh());Kh(e,134217728)}},St=function(e){if(13===e.tag){var t=th(e),i=Rr(e,t);if(null!==i)ih(i,e,t,eh());Kh(e,t)}},xt=function(){return bt},kt=function(e,t){var i=bt;try{return bt=e,t()}finally{bt=i}},Ce=function(e,t,i){switch(t){case"input":if(Z(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var s=ws(n);if(!s)throw Error(r(90));$(n),Z(n,s)}}}break;case"textarea":re(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Me=hh,Te=ch;var ec={usingClientEntryPoint:!1,Events:[bs,ys,ws,Le,Ee,hh]},tc={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ic={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{st=nc.inject(ic),rt=nc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xh(t))throw Error(r(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!Xh(e))throw Error(r(299));var i=!1,n="",s=$h;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Vh(e,1,!1,null,0,i,0,n,s),e[ps]=t.current,Hn(8===e.nodeType?e.parentNode:e),new qh(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ch(e)},t.hydrate=function(e,t,i){if(!Yh(t))throw Error(r(200));return Jh(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!Xh(e))throw Error(r(405));var n=null!=i&&i.hydratedSources||null,s=!1,o="",a=$h;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(s=!0),void 0!==i.identifierPrefix&&(o=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),t=Hh(t,null,e,1,null!=i?i:null,s,0,o,a),e[ps]=t.current,Hn(e),n)for(e=0;e<n.length;e++)s=(s=(i=n[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,s]:t.mutableSourceEagerHydrationData.push(i,s);return new Qh(t)},t.render=function(e,t,i){if(!Yh(t))throw Error(r(200));return Jh(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Yh(e))throw Error(r(40));return!!e._reactRootContainer&&(ch((function(){Jh(null,null,e,!1,(function(){e._reactRootContainer=null,e[ps]=null}))})),!0)},t.unstable_batchedUpdates=hh,t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Yh(i))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Jh(e,t,i,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,i)=>{"use strict";var n=i(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},7950:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(2730)},1153:(e,t,i)=>{"use strict";var n=i(5043),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,i){var n,r={},h=null,c=null;for(n in void 0!==i&&(h=""+i),void 0!==t.key&&(h=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:s,type:e,key:h,ref:c,props:r,_owner:a.current}}t.jsx=h,t.jsxs=h},4202:(e,t)=>{"use strict";var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),g=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function _(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||p}function v(){}function b(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||p}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=_.prototype;var y=b.prototype=new v;y.constructor=b,f(y,_.prototype),y.isPureReactComponent=!0;var w=Array.isArray,C=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var s,r={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,s)&&!x.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];r.children=h}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:i,type:e,key:o,ref:a,props:r,_owner:S.current}}function L(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,s,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case n:l=!0}}if(l)return o=o(l=e),e=""===r?"."+M(l,0):r,w(o)?(s="",null!=e&&(s=e.replace(E,"$&/")+"/"),T(o,t,s,"",(function(e){return e}))):null!=o&&(L(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",w(e))for(var h=0;h<e.length;h++){var c=r+M(a=e[h],h);l+=T(a,t,s,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),h=0;!(a=e.next()).done;)l+=T(a=a.value,t,s,c=r+M(a,h++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,i){if(null==e)return e;var n=[],s=0;return T(e,n,"","",(function(e){return t.call(i,e,s++)})),n}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},A={transition:null},R={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,i){D(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!L(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=_,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=r,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),r=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(h in t)C.call(t,h)&&!x.hasOwnProperty(h)&&(s[h]=void 0===t[h]&&void 0!==l?l[h]:t[h])}var h=arguments.length-2;if(1===h)s.children=n;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:i,type:e.type,key:r,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=L,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,i){return I.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,i){return I.current.useReducer(e,t,i)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return I.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},5043:(e,t,i)=>{"use strict";e.exports=i(4202)},579:(e,t,i)=>{"use strict";e.exports=i(1153)},7234:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,s=e[n];if(!(0<r(s,t)))break e;e[n]=t,e[i]=s,i=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,s=e.length,o=s>>>1;n<o;){var a=2*(n+1)-1,l=e[a],h=a+1,c=e[h];if(0>r(l,i))h<s&&0>r(c,l)?(e[n]=c,e[h]=i,n=h):(e[n]=l,e[a]=i,n=a);else{if(!(h<s&&0>r(c,i)))break e;e[n]=c,e[h]=i,n=h}}}return t}function r(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var h=[],c=[],d=1,u=null,g=3,p=!1,f=!1,m=!1,_="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=n(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,i(h,t)}t=n(c)}}function w(e){if(m=!1,y(e),!f)if(null!==n(h))f=!0,A(C);else{var t=n(c);null!==t&&R(w,t.startTime-e)}}function C(e,i){f=!1,m&&(m=!1,v(L),L=-1),p=!0;var r=g;try{for(y(i),u=n(h);null!==u&&(!(u.expirationTime>i)||e&&!T());){var o=u.callback;if("function"===typeof o){u.callback=null,g=u.priorityLevel;var a=o(u.expirationTime<=i);i=t.unstable_now(),"function"===typeof a?u.callback=a:u===n(h)&&s(h),y(i)}else s(h);u=n(h)}if(null!==u)var l=!0;else{var d=n(c);null!==d&&R(w,d.startTime-i),l=!1}return l}finally{u=null,g=r,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,k=null,L=-1,E=5,M=-1;function T(){return!(t.unstable_now()-M<E)}function D(){if(null!==k){var e=t.unstable_now();M=e;var i=!0;try{i=k(!0,e)}finally{i?S():(x=!1,k=null)}}else x=!1}if("function"===typeof b)S=function(){b(D)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,I=N.port2;N.port1.onmessage=D,S=function(){I.postMessage(null)}}else S=function(){_(D,0)};function A(e){k=e,x||(x=!0,S())}function R(e,i){L=_((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,A(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(e){switch(g){case 1:case 2:case 3:var t=3;break;default:t=g}var i=g;g=t;try{return e()}finally{g=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=g;g=e;try{return t()}finally{g=i}},t.unstable_scheduleCallback=function(e,s,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(e.sortIndex=r,i(c,e),null===n(h)&&e===n(c)&&(m?(v(L),L=-1):m=!0,R(w,r-o))):(e.sortIndex=a,i(h,e),f||p||(f=!0,A(C))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=g;return function(){var i=g;g=t;try{return e.apply(this,arguments)}finally{g=i}}}},8853:(e,t,i)=>{"use strict";e.exports=i(7234)},7927:function(e){var t;"undefined"!=typeof self&&self,t=()=>(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e){for(;e.children&&e.children.length>0;)i(e.children[0]),e.remove(e.children[0]);e.geometry&&e.geometry.dispose(),e.material&&(Object.keys(e.material).forEach((t=>{e.material[t]&&null!==e.material[t]&&"function"==typeof e.material[t].dispose&&e.material[t].dispose()})),e.material.dispose())}e.r(t),e.d(t,{default:()=>u}),Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)};const n="object"==typeof window;let s=n&&window.THREE||{};n&&!window.VANTA&&(window.VANTA={});const r=n&&window.VANTA||{};r.register=(e,t)=>r[e]=e=>new t(e),r.version="0.5.24";const o=function(){return Array.prototype.unshift.call(arguments,"[VANTA]"),console.error.apply(this,arguments)};r.VantaBase=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n)return!1;r.current=this,this.windowMouseMoveWrapper=this.windowMouseMoveWrapper.bind(this),this.windowTouchWrapper=this.windowTouchWrapper.bind(this),this.windowGyroWrapper=this.windowGyroWrapper.bind(this),this.resize=this.resize.bind(this),this.animationLoop=this.animationLoop.bind(this),this.restart=this.restart.bind(this);const t="function"==typeof this.getDefaultOptions?this.getDefaultOptions():this.defaultOptions;if(this.options=Object.assign({mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,scale:1,scaleMobile:1},t),(e instanceof HTMLElement||"string"==typeof e)&&(e={el:e}),Object.assign(this.options,e),this.options.THREE&&(s=this.options.THREE),this.el=this.options.el,null==this.el)o('Instance needs "el" param!');else if(!(this.options.el instanceof HTMLElement)){const e=this.el;if(this.el=(i=e,document.querySelector(i)),!this.el)return void o("Cannot find element",e)}var i,a;this.prepareEl(),this.initThree(),this.setSize();try{this.init()}catch(e){return o("Init error",e),this.renderer&&this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),void(this.options.backgroundColor&&(console.log("[VANTA] Falling back to backgroundColor"),this.el.style.background=(a=this.options.backgroundColor,"number"==typeof a?"#"+("00000"+a.toString(16)).slice(-6):a)))}this.initMouse(),this.resize(),this.animationLoop();const l=window.addEventListener;l("resize",this.resize),window.requestAnimationFrame(this.resize),this.options.mouseControls&&(l("scroll",this.windowMouseMoveWrapper),l("mousemove",this.windowMouseMoveWrapper)),this.options.touchControls&&(l("touchstart",this.windowTouchWrapper),l("touchmove",this.windowTouchWrapper)),this.options.gyroControls&&l("deviceorientation",this.windowGyroWrapper)}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.options,e),this.triggerMouseMove()}prepareEl(){let e,t;if("undefined"!=typeof Node&&Node.TEXT_NODE)for(e=0;e<this.el.childNodes.length;e++){const t=this.el.childNodes[e];if(t.nodeType===Node.TEXT_NODE){const e=document.createElement("span");e.textContent=t.textContent,t.parentElement.insertBefore(e,t),t.remove()}}for(e=0;e<this.el.children.length;e++)t=this.el.children[e],"static"===getComputedStyle(t).position&&(t.style.position="relative"),"auto"===getComputedStyle(t).zIndex&&(t.style.zIndex=1);"static"===getComputedStyle(this.el).position&&(this.el.style.position="relative")}applyCanvasStyles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(e.style,{position:"absolute",zIndex:0,top:0,left:0,background:""}),Object.assign(e.style,t),e.classList.add("vanta-canvas")}initThree(){s.WebGLRenderer?(this.renderer=new s.WebGLRenderer({alpha:!0,antialias:!0}),this.el.appendChild(this.renderer.domElement),this.applyCanvasStyles(this.renderer.domElement),isNaN(this.options.backgroundAlpha)&&(this.options.backgroundAlpha=1),this.scene=new s.Scene):console.warn("[VANTA] No THREE defined on window")}getCanvasElement(){return this.renderer?this.renderer.domElement:this.p5renderer?this.p5renderer.canvas:void 0}getCanvasRect(){const e=this.getCanvasElement();return!!e&&e.getBoundingClientRect()}windowMouseMoveWrapper(e){const t=this.getCanvasRect();if(!t)return!1;const i=e.clientX-t.left,n=e.clientY-t.top;i>=0&&n>=0&&i<=t.width&&n<=t.height&&(this.mouseX=i,this.mouseY=n,this.options.mouseEase||this.triggerMouseMove(i,n))}windowTouchWrapper(e){const t=this.getCanvasRect();if(!t)return!1;if(1===e.touches.length){const i=e.touches[0].clientX-t.left,n=e.touches[0].clientY-t.top;i>=0&&n>=0&&i<=t.width&&n<=t.height&&(this.mouseX=i,this.mouseY=n,this.options.mouseEase||this.triggerMouseMove(i,n))}}windowGyroWrapper(e){const t=this.getCanvasRect();if(!t)return!1;const i=Math.round(2*e.alpha)-t.left,n=Math.round(2*e.beta)-t.top;i>=0&&n>=0&&i<=t.width&&n<=t.height&&(this.mouseX=i,this.mouseY=n,this.options.mouseEase||this.triggerMouseMove(i,n))}triggerMouseMove(e,t){void 0===e&&void 0===t&&(this.options.mouseEase?(e=this.mouseEaseX,t=this.mouseEaseY):(e=this.mouseX,t=this.mouseY)),this.uniforms&&(this.uniforms.iMouse.value.x=e/this.scale,this.uniforms.iMouse.value.y=t/this.scale);const i=e/this.width,n=t/this.height;"function"==typeof this.onMouseMove&&this.onMouseMove(i,n)}setSize(){this.scale||(this.scale=1),"undefined"!=typeof navigator&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<600)&&this.options.scaleMobile?this.scale=this.options.scaleMobile:this.options.scale&&(this.scale=this.options.scale),this.width=Math.max(this.el.offsetWidth,this.options.minWidth),this.height=Math.max(this.el.offsetHeight,this.options.minHeight)}initMouse(){(!this.mouseX&&!this.mouseY||this.mouseX===this.options.minWidth/2&&this.mouseY===this.options.minHeight/2)&&(this.mouseX=this.width/2,this.mouseY=this.height/2,this.triggerMouseMove(this.mouseX,this.mouseY))}resize(){this.setSize(),this.camera&&(this.camera.aspect=this.width/this.height,"function"==typeof this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio/this.scale)),"function"==typeof this.onResize&&this.onResize()}isOnScreen(){const e=this.el.offsetHeight,t=this.el.getBoundingClientRect(),i=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,n=t.top+i;return n-window.innerHeight<=i&&i<=n+e}animationLoop(){this.t||(this.t=0),this.t2||(this.t2=0);const e=performance.now();if(this.prevNow){let t=(e-this.prevNow)/(1e3/60);t=Math.max(.2,Math.min(t,5)),this.t+=t,this.t2+=(this.options.speed||1)*t,this.uniforms&&(this.uniforms.iTime.value=.016667*this.t2)}return this.prevNow=e,this.options.mouseEase&&(this.mouseEaseX=this.mouseEaseX||this.mouseX||0,this.mouseEaseY=this.mouseEaseY||this.mouseY||0,Math.abs(this.mouseEaseX-this.mouseX)+Math.abs(this.mouseEaseY-this.mouseY)>.1&&(this.mouseEaseX+=.05*(this.mouseX-this.mouseEaseX),this.mouseEaseY+=.05*(this.mouseY-this.mouseEaseY),this.triggerMouseMove(this.mouseEaseX,this.mouseEaseY))),(this.isOnScreen()||this.options.forceAnimate)&&("function"==typeof this.onUpdate&&this.onUpdate(),this.scene&&this.camera&&(this.renderer.render(this.scene,this.camera),this.renderer.setClearColor(this.options.backgroundColor,this.options.backgroundAlpha)),this.fps&&this.fps.update&&this.fps.update(),"function"==typeof this.afterRender&&this.afterRender()),this.req=window.requestAnimationFrame(this.animationLoop)}restart(){if(this.scene)for(;this.scene.children.length;)this.scene.remove(this.scene.children[0]);"function"==typeof this.onRestart&&this.onRestart(),this.init()}init(){"function"==typeof this.onInit&&this.onInit()}destroy(){"function"==typeof this.onDestroy&&this.onDestroy();const e=window.removeEventListener;e("touchstart",this.windowTouchWrapper),e("touchmove",this.windowTouchWrapper),e("scroll",this.windowMouseMoveWrapper),e("mousemove",this.windowMouseMoveWrapper),e("deviceorientation",this.windowGyroWrapper),e("resize",this.resize),window.cancelAnimationFrame(this.req);const t=this.scene;t&&t.children&&i(t),this.renderer&&(this.renderer.domElement&&this.el.removeChild(this.renderer.domElement),this.renderer=null,this.scene=null),r.current===this&&(r.current=null)}};const a=r.VantaBase;let l="object"==typeof window&&window.THREE;class h extends a{constructor(e){l=e.THREE||l,l.Color.prototype.toVector=function(){return new l.Vector3(this.r,this.g,this.b)},super(e),this.updateUniforms=this.updateUniforms.bind(this)}init(){this.mode="shader",this.uniforms={iTime:{type:"f",value:1},iResolution:{type:"v2",value:new l.Vector2(1,1)},iDpr:{type:"f",value:window.devicePixelRatio||1},iMouse:{type:"v2",value:new l.Vector2(this.mouseX||0,this.mouseY||0)}},super.init(),this.fragmentShader&&this.initBasicShader()}setOptions(e){super.setOptions(e),this.updateUniforms()}initBasicShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.fragmentShader,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.vertexShader;t||(t="uniform float uTime;\nuniform vec2 uResolution;\nvoid main() {\n  gl_Position = vec4( position, 1.0 );\n}"),this.updateUniforms(),"function"==typeof this.valuesChanger&&this.valuesChanger();const i=new l.ShaderMaterial({uniforms:this.uniforms,vertexShader:t,fragmentShader:e}),n=this.options.texturePath;n&&(this.uniforms.iTex={type:"t",value:(new l.TextureLoader).load(n)});const s=new l.Mesh(new l.PlaneGeometry(2,2),i);this.scene.add(s),this.camera=new l.Camera,this.camera.position.z=1}updateUniforms(){const e={};let t,i;for(t in this.options)i=this.options[t],-1!==t.toLowerCase().indexOf("color")?e[t]={type:"v3",value:new l.Color(i).toVector()}:"number"==typeof i&&(e[t]={type:"f",value:i});return Object.assign(this.uniforms,e)}resize(){super.resize(),this.uniforms.iResolution.value.x=this.width/this.scale,this.uniforms.iResolution.value.y=this.height/this.scale}}let c="object"==typeof window&&window.THREE;class d extends h{constructor(e){c=e.THREE||c,super(e)}getDefaultOptions(){return{baseColor:6745,color2:15918901,backgroundColor:1251907,amplitudeFactor:1,ringFactor:1,rotationFactor:1,xOffset:0,yOffset:0,size:1,speed:1,mouseEase:!0,scaleMobile:1,scale:1}}onInit(){const e={minFilter:c.LinearFilter,magFilter:c.LinearFilter,format:c.RGBFormat},t=this.width*window.devicePixelRatio/this.scale,i=this.height*window.devicePixelRatio/this.scale;this.bufferTarget=new c.WebGLRenderTarget(t,i,e),this.bufferFeedback=new c.WebGLRenderTarget(t,i,e)}initBasicShader(e,t){super.initBasicShader(e,t),this.uniforms.iBuffer={type:"t",value:this.bufferTarget.texture}}onUpdate(){this.uniforms.iBuffer.value=this.bufferFeedback.texture;const e=this.renderer;e.setRenderTarget(this.bufferTarget),e.render(this.scene,this.camera),e.setRenderTarget(null),e.clear();let t=this.bufferTarget;this.bufferTarget=this.bufferFeedback,this.bufferFeedback=t}onResize(){if(this.bufferTarget){const e=this.width*window.devicePixelRatio/this.scale,t=this.height*window.devicePixelRatio/this.scale;this.bufferTarget.setSize(e,t),this.bufferFeedback.setSize(e,t)}}onDestroy(){this.bufferTarget=null,this.bufferFeedback=null}}const u=r.register("HALO",d);return d.prototype.fragmentShader="uniform vec2 iResolution;\nuniform float iDpr;\nuniform vec2 iMouse;\nuniform float iTime;\n\nuniform float xOffset;\nuniform float yOffset;\nuniform vec3 baseColor;\nuniform vec3 color2;\nuniform vec3 backgroundColor;\nuniform float size;\nuniform float shape;\nuniform float ringFactor;\nuniform float rotationFactor;\nuniform float amplitudeFactor;\n\nuniform sampler2D iBuffer;\nuniform sampler2D iTex;\nconst float PI = 3.14159265359;\n\n// float length2(vec2 p) { return dot(p, p); }\n\n// float noise(vec2 p){\n//   return fract(sin(fract(sin(p.x) * (43.13311)) + p.y) * 31.0011);\n// }\n\n// float worley(vec2 p) {\n//     float d = 1e30;\n//     for (int xo = -1; xo <= 1; ++xo) {\n//         for (int yo = -1; yo <= 1; ++yo) {\n//             vec2 tp = floor(p) + vec2(xo, yo);\n//             d = min(d, length2(p - tp - vec2(noise(tp))));\n//         }\n//     }\n//     vec2 uv = gl_FragCoord.xy / iResolution.xy;\n//     float timeOffset =  0.15 * sin(iTime * 2.0 + 10.0*(uv.x - uv.y));\n//     return 3.0*exp(-4.0*abs(2.0*d - 1.0 + timeOffset));\n// }\n\n// float fworley(vec2 p) {\n//     return sqrt(\n//     1.1 * // light\n//     worley(p*10. + .3 + iTime*.0525) *\n//     sqrt(worley(p * 50. / size + 0.1 + iTime * -0.75)) *\n//     4.1 *\n//     sqrt(sqrt(worley(p * -1. + 9.3))));\n// }\n\nvec4 j2hue(float c) {\n  return .5+.5*cos(6.28*c+vec4(0,-2.1,2.1,0));\n}\n\nvec3 permute(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }\n\nfloat snoise(vec2 v){\n  const vec4 C = vec4(0.211324865405187, 0.366025403784439,\n           -0.577350269189626, 0.024390243902439);\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n  i = mod(i, 289.0);\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n  + i.x + vec3(0.0, i1.x, 1.0 ));\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),\n    dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nvec2 sincos( float x ){return vec2(sin(x), cos(x));}\nvec2 rotate2d(vec2 uv, float phi){vec2 t = sincos(phi); return vec2(uv.x*t.y-uv.y*t.x, uv.x*t.x+uv.y*t.y);}\nvec3 rotate3d(vec3 p, vec3 v, float phi){ v = normalize(v); vec2 t = sincos(-phi); float s = t.x, c = t.y, x =-v.x, y =-v.y, z =-v.z; mat4 M = mat4(x*x*(1.-c)+c,x*y*(1.-c)-z*s,x*z*(1.-c)+y*s,0.,y*x*(1.-c)+z*s,y*y*(1.-c)+c,y*z*(1.-c)-x*s,0.,z*x*(1.-c)-y*s,z*y*(1.-c)+x*s,z*z*(1.-c)+c,0.,0.,0.,0.,1.);return (vec4(p,1.)*M).xyz;}\n\n// Classic Perlin 3D Noise\n// by Stefan Gustavson\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\nfloat p3d(vec3 P){\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n\nvoid main() {\n  vec2 res2 = iResolution.xy * iDpr;\n  vec2 pixel = vec2(gl_FragCoord.xy - 0.5 * res2) / res2.y; // center-origin pixel coord\n  pixel.x -= xOffset * res2.x / res2.y;\n  pixel.y -= yOffset;\n\n  vec2 uv = gl_FragCoord.xy / res2; // 0 to 1\n\n  // float nn1 = snoise(uv * 0.25 + iTime * 0.005 + mixedColor.b * 0.01) * 0.1;\n  // float nn2 = snoise(uv * 0.25 + iTime * 0.005 + mixedColor.b * 0.01 + 1000.) * 0.1;\n  // uv += vec2(nn1, nn2);\n\n  // PERLIN DISTORTION\n  // float noiseScale = 10.;\n  // float timeScale = 0.5;\n  // uv += vec2( p3d(vec3(uv * noiseScale, iTime * timeScale)), p3d(vec3(1000. + uv * noiseScale , iTime * timeScale)) ) * 0.001;\n\n  // uv = rotate2d(uv, 0.001);\n  // pixel = rotate2d(pixel, 0.001);\n\n  vec2 mouse2 = (iMouse * iDpr / res2 - 0.5) * vec2(1.,-1.);\n  vec2 uvBig = (uv - 0.5) * 0.996 + 0.5;\n\n  vec4 oldImage = texture2D(iBuffer, uv);\n  vec3 mixedColor = oldImage.rgb - backgroundColor;\n\n  // float spinDist = 0.002 + 0.002 * sin(iTime * 0.4);\n  float cropDist = 0.01;\n  float cropXOffset = 0.2;\n  float cropYOffset = 0.2;\n  // float cropXOffset = 0.4 + 0.1 * sin(iTime * 0.4);\n  // float cropYOffset = 0.4 + 0.1 * cos(iTime * 0.6);\n\n  vec2 offset = uv + vec2((mixedColor.g - cropXOffset) * cropDist, (mixedColor.r - cropYOffset) * cropDist);\n\n  // float nn = snoise(uv * 10.) * 0.001;\n  // offset += nn;\n\n  float spinDist = 0.001;\n  float spinSpeed = 0.2 + 0.15 * cos(iTime * 0.5);\n  float timeFrac = mod(iTime, 6.5);\n  vec2 offset2 = uvBig + vec2(cos(timeFrac * spinSpeed) * spinDist, sin(timeFrac * spinSpeed) * spinDist);\n\n  mixedColor = texture2D(iBuffer, offset).rgb * 0.4\n    + texture2D(iBuffer, offset2).rgb * 0.6\n    - backgroundColor;\n\n\n  // mixedColor *= .875;\n  float fadeAmt = 0.0015; // fade this amount each frame // 0.002\n  mixedColor = (mixedColor - fadeAmt) * .995;\n\n  // float nn = snoise(uvBig * 10.) * 20.;\n  // mixedColor *= clamp(nn, 0.98, 1.0);\n\n  vec4 spectrum = abs( abs( .95*atan(uv.x, uv.y) -vec4(0,2,4,0) ) -3. )-1.;\n  float angle = atan(pixel.x, pixel.y);\n  float dist = length(pixel - mouse2*0.15) * 8. + sin(iTime) * .01;\n\n  // mixedColor *= pow(1.-dist*0.002, 2.);\n\n\n  // Flowery shapes\n  // float edge = abs(dist * 0.5);\n  float flowerPeaks = .05 * amplitudeFactor * size;\n  float flowerPetals = 7.;\n  float edge = abs((dist + sin(angle * flowerPetals + iTime * 0.5) * sin(iTime * 1.5) * flowerPeaks) * 0.65 / size);\n  // float edge = abs((dist + sin(angle * 4. + iTime * 2.) * sin(iTime * 3.) * 0.75) * 1.);\n\n  // vec4 rainbow = abs( abs( .95*mod(iTime * 1., 2. * PI) - vec4(0,2,4,0) ) -3. )-1.;\n  // vec4 rainbow = vec4(0,2,4,0);\n\n  float colorChangeSpeed = 0.75 + 0.05 * sin(iTime) * 1.5;\n  float rainbowInput = timeFrac * colorChangeSpeed;\n  // NOISE!\n  // float nn = snoise(uv * 0.25 + iTime * 0.005 + mixedColor.b * 0.01) * 20.;\n  // rainbowInput += nn;\n\n  float brightness = 0.7;\n  vec4 rainbow = sqrt(j2hue(cos(rainbowInput))) + vec4(baseColor,0) - 1.0 + brightness;\n  float factor = smoothstep(1., .9, edge) * pow(edge, 2.);\n  vec3 color = rainbow.rgb * smoothstep(1., .9, edge) * pow(edge, 20.);\n  vec4 ring = vec4(\n    backgroundColor + clamp( mixedColor + color, 0., 1.)\n    , 1.0);\n\n  // float t = fworley(uv * u_resolution.xy / 1500.0);\n  // t *= exp(-length2(abs(0.7*uv - 1.0)));\n  // float tExp = pow(t, 2. - t);\n  // vec3 c1 = color1 * (1.0 - t);\n  // vec3 c2 = color2 * tExp;\n  // vec4 cells = vec4(mixedColor * 0.25, 1.) + vec4(pow(t, 1.0 - t) * (c1 + c2), 1.0);\n  // gl_FragColor = clamp(ring + cells * 0.5, 0.0, 1.0);\n\n  // float nn = snoise(uv * 10.) * 0.01; // creepy!\n  gl_FragColor = ring;\n}\n",t})(),e.exports=t()},5890:(e,t,i)=>{var n={"./simpleWorker":8964,"./simpleWorker.js":8964,"monaco-editor/esm/vs/base/common/worker/simpleWorker":8964,"monaco-editor/esm/vs/base/common/worker/simpleWorker.js":8964};function s(e){return Promise.resolve().then((()=>{if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i(n[e])}))}s.keys=()=>Object.keys(n),s.id=5890,e.exports=s},9204:(e,t,i)=>{var n={"./editorBaseApi":[2212],"./editorBaseApi.js":[2212],"./editorSimpleWorker":[104],"./editorSimpleWorker.js":[104],"./editorWorker":[4225],"./editorWorker.js":[4225],"./editorWorkerHost":[9487],"./editorWorkerHost.js":[9487],"./findSectionHeaders":[730],"./findSectionHeaders.js":[730],"./getIconClasses":[9320,320],"./getIconClasses.js":[9320,320],"./languageFeatureDebounce":[8787],"./languageFeatureDebounce.js":[8787],"./languageFeatures":[8715],"./languageFeatures.js":[8715],"./languageFeaturesService":[4836],"./languageFeaturesService.js":[4836],"./languageService":[5297],"./languageService.js":[5297],"./languagesAssociations":[1011],"./languagesAssociations.js":[1011],"./languagesRegistry":[7780],"./languagesRegistry.js":[7780],"./markerDecorations":[3473],"./markerDecorations.js":[3473],"./markerDecorationsService":[4286],"./markerDecorationsService.js":[4286],"./model":[2597],"./model.js":[2597],"./modelService":[3538],"./modelService.js":[3538],"./resolverService":[3537],"./resolverService.js":[3537],"./semanticTokensDto":[1351,351],"./semanticTokensDto.js":[1351,351],"./semanticTokensProviderStyling":[452],"./semanticTokensProviderStyling.js":[452],"./semanticTokensStyling":[3120],"./semanticTokensStyling.js":[3120],"./semanticTokensStylingService":[7129],"./semanticTokensStylingService.js":[7129],"./textModelSync/textModelSync.impl":[5212],"./textModelSync/textModelSync.impl.js":[5212],"./textModelSync/textModelSync.protocol":[9421,421],"./textModelSync/textModelSync.protocol.js":[9421,421],"./textResourceConfiguration":[683],"./textResourceConfiguration.js":[683],"./treeSitterParserService":[4051],"./treeSitterParserService.js":[4051],"./treeViewsDnd":[7542,542],"./treeViewsDnd.js":[7542,542],"./treeViewsDndService":[6443,443],"./treeViewsDndService.js":[6443,443],"./unicodeTextModelHighlighter":[3072],"./unicodeTextModelHighlighter.js":[3072],"monaco-editor/esm/vs/editor/common/services/editorBaseApi":[2212],"monaco-editor/esm/vs/editor/common/services/editorBaseApi.js":[2212],"monaco-editor/esm/vs/editor/common/services/editorSimpleWorker":[104],"monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js":[104],"monaco-editor/esm/vs/editor/common/services/editorWorker":[4225],"monaco-editor/esm/vs/editor/common/services/editorWorker.js":[4225],"monaco-editor/esm/vs/editor/common/services/editorWorkerHost":[9487],"monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js":[9487],"monaco-editor/esm/vs/editor/common/services/findSectionHeaders":[730],"monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js":[730],"monaco-editor/esm/vs/editor/common/services/getIconClasses":[9320,320],"monaco-editor/esm/vs/editor/common/services/getIconClasses.js":[9320,320],"monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce":[8787],"monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js":[8787],"monaco-editor/esm/vs/editor/common/services/languageFeatures":[8715],"monaco-editor/esm/vs/editor/common/services/languageFeatures.js":[8715],"monaco-editor/esm/vs/editor/common/services/languageFeaturesService":[4836],"monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js":[4836],"monaco-editor/esm/vs/editor/common/services/languageService":[5297],"monaco-editor/esm/vs/editor/common/services/languageService.js":[5297],"monaco-editor/esm/vs/editor/common/services/languagesAssociations":[1011],"monaco-editor/esm/vs/editor/common/services/languagesAssociations.js":[1011],"monaco-editor/esm/vs/editor/common/services/languagesRegistry":[7780],"monaco-editor/esm/vs/editor/common/services/languagesRegistry.js":[7780],"monaco-editor/esm/vs/editor/common/services/markerDecorations":[3473],"monaco-editor/esm/vs/editor/common/services/markerDecorations.js":[3473],"monaco-editor/esm/vs/editor/common/services/markerDecorationsService":[4286],"monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js":[4286],"monaco-editor/esm/vs/editor/common/services/model":[2597],"monaco-editor/esm/vs/editor/common/services/model.js":[2597],"monaco-editor/esm/vs/editor/common/services/modelService":[3538],"monaco-editor/esm/vs/editor/common/services/modelService.js":[3538],"monaco-editor/esm/vs/editor/common/services/resolverService":[3537],"monaco-editor/esm/vs/editor/common/services/resolverService.js":[3537],"monaco-editor/esm/vs/editor/common/services/semanticTokensDto":[1351,351],"monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js":[1351,351],"monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling":[452],"monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js":[452],"monaco-editor/esm/vs/editor/common/services/semanticTokensStyling":[3120],"monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js":[3120],"monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService":[7129],"monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js":[7129],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl":[5212],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js":[5212],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol":[9421,421],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js":[9421,421],"monaco-editor/esm/vs/editor/common/services/textResourceConfiguration":[683],"monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js":[683],"monaco-editor/esm/vs/editor/common/services/treeSitterParserService":[4051],"monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js":[4051],"monaco-editor/esm/vs/editor/common/services/treeViewsDnd":[7542,542],"monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js":[7542,542],"monaco-editor/esm/vs/editor/common/services/treeViewsDndService":[6443,443],"monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js":[6443,443],"monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter":[3072],"monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js":[3072]};function s(e){if(!i.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],s=t[0];return Promise.all(t.slice(1).map(i.e)).then((()=>i(s)))}s.keys=()=>Object.keys(n),s.id=9204,e.exports=s}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.m=e,i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var r=Object.create(null);i.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(r,o),r}})(),i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>"static/js/"+e+"."+{320:"1663cd42",351:"f54a3839",421:"0095e120",443:"5714c808",542:"8cc6148d",614:"3f0b90da"}[e]+".chunk.js",i.miniCssF=e=>{},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="fitnes-web:";i.l=(n,s,r,o)=>{if(e[n])e[n].push(s);else{var a,l;if(void 0!==r)for(var h=document.getElementsByTagName("script"),c=0;c<h.length;c++){var d=h[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+r),a.src=n),e[n]=[s];var u=(t,i)=>{a.onerror=a.onload=null,clearTimeout(g);var s=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(i))),t)return t(i)},g=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",(()=>{var e={792:0};i.f.j=(t,n)=>{var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var r=new Promise(((i,n)=>s=e[t]=[i,n]));n.push(s[2]=r);var o=i.p+i.u(t),a=new Error;i.l(o,(n=>{if(i.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,s[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var s,r,o=n[0],a=n[1],l=n[2],h=0;if(o.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)l(i)}for(t&&t(n);h<o.length;h++)r=o[h],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkfitnes_web=self.webpackChunkfitnes_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};i.r(e),i.d(e,{ACESFilmicToneMapping:()=>Nl,AddEquation:()=>Xa,AddOperation:()=>Ll,AdditiveAnimationBlendMode:()=>fc,AdditiveBlending:()=>Ka,AgXToneMapping:()=>Al,AlphaFormat:()=>ph,AlwaysCompare:()=>Jc,AlwaysDepth:()=>_l,AlwaysStencilFunc:()=>Gc,AmbientLight:()=>tb,AnimationAction:()=>Gb,AnimationClip:()=>xv,AnimationLoader:()=>Av,AnimationMixer:()=>$b,AnimationObjectGroup:()=>jb,AnimationUtils:()=>dv,ArcCurve:()=>Lm,ArrayCamera:()=>wb,ArrowHelper:()=>Hy,AttachedBindMode:()=>Pl,Audio:()=>Tb,AudioAnalyser:()=>Pb,AudioContext:()=>fb,AudioListener:()=>Mb,AudioLoader:()=>mb,AxesHelper:()=>Uy,BackSide:()=>Ha,BasicDepthPacking:()=>bc,BasicShadowMap:()=>Fa,BatchedMesh:()=>qf,Bone:()=>cf,BooleanKeyframeTrack:()=>_v,Box2:()=>hy,Box3:()=>ru,Box3Helper:()=>Fy,BoxGeometry:()=>gp,BoxHelper:()=>Oy,BufferAttribute:()=>Og,BufferGeometry:()=>Jg,BufferGeometryLoader:()=>lb,ByteType:()=>nh,Cache:()=>Lv,Camera:()=>bp,CameraHelper:()=>Ay,CanvasTexture:()=>Cm,CapsuleGeometry:()=>$m,CatmullRomCurve3:()=>Im,CineonToneMapping:()=>Dl,CircleGeometry:()=>qm,ClampToEdgeWrapping:()=>jl,Clock:()=>Cb,Color:()=>xg,ColorKeyframeTrack:()=>vv,ColorManagement:()=>Bd,CompressedArrayTexture:()=>ym,CompressedCubeTexture:()=>wm,CompressedTexture:()=>bm,CompressedTextureLoader:()=>Rv,ConeGeometry:()=>Xm,ConstantAlphaFactor:()=>pl,ConstantColorFactor:()=>ul,Controls:()=>Gy,CubeCamera:()=>kp,CubeReflectionMapping:()=>Bl,CubeRefractionMapping:()=>zl,CubeTexture:()=>Lp,CubeTextureLoader:()=>Ov,CubeUVReflectionMapping:()=>Hl,CubicBezierCurve:()=>Om,CubicBezierCurve3:()=>Fm,CubicInterpolant:()=>gv,CullFaceBack:()=>Ra,CullFaceFront:()=>Pa,CullFaceFrontBack:()=>Oa,CullFaceNone:()=>Aa,Curve:()=>xm,CurvePath:()=>jm,CustomBlending:()=>Qa,CustomToneMapping:()=>Il,CylinderGeometry:()=>Qm,Cylindrical:()=>oy,Data3DTexture:()=>Jd,DataArrayTexture:()=>Yd,DataTexture:()=>df,DataTextureLoader:()=>Fv,DataUtils:()=>Ag,DecrementStencilOp:()=>Rc,DecrementWrapStencilOp:()=>Oc,DefaultLoadingManager:()=>Mv,DepthFormat:()=>bh,DepthStencilFormat:()=>yh,DepthTexture:()=>Sm,DetachedBindMode:()=>Ol,DirectionalLight:()=>eb,DirectionalLightHelper:()=>Dy,DiscreteInterpolant:()=>fv,DodecahedronGeometry:()=>Zm,DoubleSide:()=>Ua,DstAlphaFactor:()=>al,DstColorFactor:()=>hl,DynamicCopyUsage:()=>ad,DynamicDrawUsage:()=>td,DynamicReadUsage:()=>sd,EdgesGeometry:()=>n_,EllipseCurve:()=>km,EqualCompare:()=>qc,EqualDepth:()=>yl,EqualStencilFunc:()=>Vc,EquirectangularReflectionMapping:()=>Vl,EquirectangularRefractionMapping:()=>Wl,Euler:()=>Hu,EventDispatcher:()=>gd,ExtrudeGeometry:()=>A_,FileLoader:()=>Iv,Float16BufferAttribute:()=>jg,Float32BufferAttribute:()=>Gg,FloatType:()=>lh,Fog:()=>Tp,FogExp2:()=>Mp,FramebufferTexture:()=>vm,FrontSide:()=>Wa,Frustum:()=>Df,GLBufferAttribute:()=>ey,GLSL1:()=>hd,GLSL3:()=>cd,GreaterCompare:()=>Xc,GreaterDepth:()=>Cl,GreaterEqualCompare:()=>Zc,GreaterEqualDepth:()=>wl,GreaterEqualStencilFunc:()=>jc,GreaterStencilFunc:()=>Hc,GridHelper:()=>ky,Group:()=>mm,HalfFloatType:()=>hh,HemisphereLight:()=>Vv,HemisphereLightHelper:()=>xy,IcosahedronGeometry:()=>P_,ImageBitmapLoader:()=>gb,ImageLoader:()=>Pv,ImageUtils:()=>Hd,IncrementStencilOp:()=>Ac,IncrementWrapStencilOp:()=>Pc,InstancedBufferAttribute:()=>ff,InstancedBufferGeometry:()=>ab,InstancedInterleavedBuffer:()=>Jb,InstancedMesh:()=>Sf,Int16BufferAttribute:()=>Vg,Int32BufferAttribute:()=>Hg,Int8BufferAttribute:()=>Fg,IntType:()=>oh,InterleavedBuffer:()=>Np,InterleavedBufferAttribute:()=>Ap,Interpolant:()=>uv,InterpolateDiscrete:()=>lc,InterpolateLinear:()=>hc,InterpolateSmooth:()=>cc,InvertStencilOp:()=>Fc,KeepStencilOp:()=>Nc,KeyframeTrack:()=>mv,LOD:()=>Zp,LatheGeometry:()=>Km,Layers:()=>Uu,LessCompare:()=>$c,LessDepth:()=>vl,LessEqualCompare:()=>Qc,LessEqualDepth:()=>bl,LessEqualStencilFunc:()=>Wc,LessStencilFunc:()=>zc,Light:()=>zv,LightProbe:()=>sb,Line:()=>nm,Line3:()=>uy,LineBasicMaterial:()=>Qf,LineCurve:()=>Bm,LineCurve3:()=>zm,LineDashedMaterial:()=>rv,LineLoop:()=>lm,LineSegments:()=>am,LinearFilter:()=>Yl,LinearInterpolant:()=>pv,LinearMipMapLinearFilter:()=>th,LinearMipMapNearestFilter:()=>Jl,LinearMipmapLinearFilter:()=>eh,LinearMipmapNearestFilter:()=>Zl,LinearSRGBColorSpace:()=>Ec,LinearToneMapping:()=>Ml,LinearTransfer:()=>Mc,Loader:()=>Tv,LoaderUtils:()=>ob,LoadingManager:()=>Ev,LoopOnce:()=>rc,LoopPingPong:()=>ac,LoopRepeat:()=>oc,LuminanceAlphaFormat:()=>vh,LuminanceFormat:()=>_h,MOUSE:()=>Na,Material:()=>Eg,MaterialLoader:()=>rb,MathUtils:()=>xd,Matrix2:()=>ay,Matrix3:()=>Ld,Matrix4:()=>Iu,MaxEquation:()=>el,Mesh:()=>dp,MeshBasicMaterial:()=>Mg,MeshDepthMaterial:()=>iv,MeshDistanceMaterial:()=>nv,MeshLambertMaterial:()=>tv,MeshMatcapMaterial:()=>sv,MeshNormalMaterial:()=>ev,MeshPhongMaterial:()=>Z_,MeshPhysicalMaterial:()=>Y_,MeshStandardMaterial:()=>X_,MeshToonMaterial:()=>J_,MinEquation:()=>Ja,MirroredRepeatWrapping:()=>Gl,MixOperation:()=>kl,MultiplyBlending:()=>qa,MultiplyOperation:()=>xl,NearestFilter:()=>Kl,NearestMipMapLinearFilter:()=>Xl,NearestMipMapNearestFilter:()=>ql,NearestMipmapLinearFilter:()=>Ql,NearestMipmapNearestFilter:()=>$l,NeutralToneMapping:()=>Rl,NeverCompare:()=>Kc,NeverDepth:()=>ml,NeverStencilFunc:()=>Bc,NoBlending:()=>ja,NoColorSpace:()=>kc,NoToneMapping:()=>El,NormalAnimationBlendMode:()=>pc,NormalBlending:()=>Ga,NotEqualCompare:()=>Yc,NotEqualDepth:()=>Sl,NotEqualStencilFunc:()=>Uc,NumberKeyframeTrack:()=>bv,Object3D:()=>rg,ObjectLoader:()=>hb,ObjectSpaceNormalMap:()=>xc,OctahedronGeometry:()=>O_,OneFactor:()=>il,OneMinusConstantAlphaFactor:()=>fl,OneMinusConstantColorFactor:()=>gl,OneMinusDstAlphaFactor:()=>ll,OneMinusDstColorFactor:()=>cl,OneMinusSrcAlphaFactor:()=>ol,OneMinusSrcColorFactor:()=>sl,OrthographicCamera:()=>Zv,PCFShadowMap:()=>Ba,PCFSoftShadowMap:()=>za,PMREMGenerator:()=>bw,Path:()=>Gm,PerspectiveCamera:()=>Sp,Plane:()=>Ef,PlaneGeometry:()=>F_,PlaneHelper:()=>By,PointLight:()=>Yv,PointLightHelper:()=>yy,Points:()=>pm,PointsMaterial:()=>hm,PolarGridHelper:()=>Ly,PolyhedronGeometry:()=>Ym,PositionalAudio:()=>Rb,PropertyBinding:()=>Ub,PropertyMixer:()=>Ob,QuadraticBezierCurve:()=>Vm,QuadraticBezierCurve3:()=>Wm,Quaternion:()=>tu,QuaternionKeyframeTrack:()=>wv,QuaternionLinearInterpolant:()=>yv,RED_GREEN_RGTC2_Format:()=>nc,RED_RGTC1_Format:()=>tc,REVISION:()=>Da,RGBADepthPacking:()=>yc,RGBAFormat:()=>mh,RGBAIntegerFormat:()=>Lh,RGBA_ASTC_10x10_Format:()=>Qh,RGBA_ASTC_10x5_Format:()=>Kh,RGBA_ASTC_10x6_Format:()=>$h,RGBA_ASTC_10x8_Format:()=>qh,RGBA_ASTC_12x10_Format:()=>Xh,RGBA_ASTC_12x12_Format:()=>Yh,RGBA_ASTC_4x4_Format:()=>Bh,RGBA_ASTC_5x4_Format:()=>zh,RGBA_ASTC_5x5_Format:()=>Vh,RGBA_ASTC_6x5_Format:()=>Wh,RGBA_ASTC_6x6_Format:()=>Hh,RGBA_ASTC_8x5_Format:()=>Uh,RGBA_ASTC_8x6_Format:()=>jh,RGBA_ASTC_8x8_Format:()=>Gh,RGBA_BPTC_Format:()=>Zh,RGBA_ETC2_EAC_Format:()=>Fh,RGBA_PVRTC_2BPPV1_Format:()=>Rh,RGBA_PVRTC_4BPPV1_Format:()=>Ah,RGBA_S3TC_DXT1_Format:()=>Mh,RGBA_S3TC_DXT3_Format:()=>Th,RGBA_S3TC_DXT5_Format:()=>Dh,RGBDepthPacking:()=>wc,RGBFormat:()=>fh,RGBIntegerFormat:()=>kh,RGB_BPTC_SIGNED_Format:()=>Jh,RGB_BPTC_UNSIGNED_Format:()=>ec,RGB_ETC1_Format:()=>Ph,RGB_ETC2_Format:()=>Oh,RGB_PVRTC_2BPPV1_Format:()=>Ih,RGB_PVRTC_4BPPV1_Format:()=>Nh,RGB_S3TC_DXT1_Format:()=>Eh,RGDepthPacking:()=>Cc,RGFormat:()=>Sh,RGIntegerFormat:()=>xh,RawShaderMaterial:()=>Q_,Ray:()=>Nu,Raycaster:()=>iy,RectAreaLight:()=>ib,RedFormat:()=>wh,RedIntegerFormat:()=>Ch,ReinhardToneMapping:()=>Tl,RenderTarget:()=>Qd,RenderTarget3D:()=>qb,RenderTargetArray:()=>Qb,RepeatWrapping:()=>Ul,ReplaceStencilOp:()=>Ic,ReverseSubtractEquation:()=>Za,RingGeometry:()=>B_,SIGNED_RED_GREEN_RGTC2_Format:()=>sc,SIGNED_RED_RGTC1_Format:()=>ic,SRGBColorSpace:()=>Lc,SRGBTransfer:()=>Tc,Scene:()=>Dp,ShaderChunk:()=>Xy,ShaderLib:()=>Zy,ShaderMaterial:()=>vp,ShadowMaterial:()=>q_,Shape:()=>s_,ShapeGeometry:()=>z_,ShapePath:()=>jy,ShapeUtils:()=>D_,ShortType:()=>sh,Skeleton:()=>pf,SkeletonHelper:()=>vy,SkinnedMesh:()=>hf,Source:()=>jd,Sphere:()=>Su,SphereGeometry:()=>V_,Spherical:()=>ry,SphericalHarmonics3:()=>nb,SplineCurve:()=>Hm,SpotLight:()=>Kv,SpotLightHelper:()=>py,Sprite:()=>qp,SpriteMaterial:()=>Rp,SrcAlphaFactor:()=>rl,SrcAlphaSaturateFactor:()=>dl,SrcColorFactor:()=>nl,StaticCopyUsage:()=>od,StaticDrawUsage:()=>ed,StaticReadUsage:()=>nd,StereoCamera:()=>yb,StreamCopyUsage:()=>ld,StreamDrawUsage:()=>id,StreamReadUsage:()=>rd,StringKeyframeTrack:()=>Cv,SubtractEquation:()=>Ya,SubtractiveBlending:()=>$a,TOUCH:()=>Ia,TangentSpaceNormalMap:()=>Sc,TetrahedronGeometry:()=>W_,Texture:()=>$d,TextureLoader:()=>Bv,TextureUtils:()=>$y,TorusGeometry:()=>H_,TorusKnotGeometry:()=>U_,Triangle:()=>bg,TriangleFanDrawMode:()=>vc,TriangleStripDrawMode:()=>_c,TrianglesDrawMode:()=>mc,TubeGeometry:()=>j_,UVMapping:()=>Fl,Uint16BufferAttribute:()=>Wg,Uint32BufferAttribute:()=>Ug,Uint8BufferAttribute:()=>Bg,Uint8ClampedBufferAttribute:()=>zg,Uniform:()=>Xb,UniformsGroup:()=>Zb,UniformsLib:()=>Yy,UniformsUtils:()=>_p,UnsignedByteType:()=>ih,UnsignedInt248Type:()=>uh,UnsignedInt5999Type:()=>gh,UnsignedIntType:()=>ah,UnsignedShort4444Type:()=>ch,UnsignedShort5551Type:()=>dh,UnsignedShortType:()=>rh,VSMShadowMap:()=>Va,Vector2:()=>kd,Vector3:()=>iu,Vector4:()=>qd,VectorKeyframeTrack:()=>Sv,VideoTexture:()=>_m,WebGL3DRenderTarget:()=>eu,WebGLArrayRenderTarget:()=>Zd,WebGLCoordinateSystem:()=>dd,WebGLCubeRenderTarget:()=>Ep,WebGLRenderTarget:()=>Xd,WebGLRenderer:()=>IS,WebGLUtils:()=>SS,WebGPUCoordinateSystem:()=>ud,WireframeGeometry:()=>G_,WrapAroundEnding:()=>gc,ZeroCurvatureEnding:()=>dc,ZeroFactor:()=>tl,ZeroSlopeEnding:()=>uc,ZeroStencilOp:()=>Dc,createCanvasElement:()=>Id});var t={};i.r(t),i.d(t,{CancellationTokenSource:()=>h2,Emitter:()=>c2,KeyCode:()=>d2,KeyMod:()=>u2,MarkerSeverity:()=>_2,MarkerTag:()=>v2,Position:()=>g2,Range:()=>p2,Selection:()=>f2,SelectionDirection:()=>m2,Token:()=>y2,Uri:()=>b2,editor:()=>w2,languages:()=>C2});var n,s=i(5043),r=i.t(s,2),o=i(4391),a=i(7950),l=i.t(a,2);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const c="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(i){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,i,n){return void 0===i&&(i=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:i,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:i="",hash:n=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function m(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function _(e,t,i,s){void 0===s&&(s={});let{window:r=document.defaultView,v5Compat:o=!1}=s,a=r.history,l=n.Pop,u=null,m=_();function _(){return(a.state||{idx:null}).idx}function v(){l=n.Pop;let e=_(),t=null==e?null:e-m;m=e,u&&u({action:l,location:y.location,delta:t})}function b(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,i="string"===typeof e?e:f(e);return i=i.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+i),new URL(i,t)}null==m&&(m=0,a.replaceState(h({},a.state,{idx:m}),""));let y={get action(){return l},get location(){return e(r,a)},listen(e){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(c,v),u=e,()=>{r.removeEventListener(c,v),u=null}},createHref:e=>t(r,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let s=p(y.location,e,t);i&&i(s,e),m=_()+1;let h=g(s,m),c=y.createHref(s);try{a.pushState(h,"",c)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;r.location.assign(c)}o&&u&&u({action:l,location:y.location,delta:1})},replace:function(e,t){l=n.Replace;let s=p(y.location,e,t);i&&i(s,e),m=_();let r=g(s,m),h=y.createHref(s);a.replaceState(r,"",h),o&&u&&u({action:l,location:y.location,delta:0})},go:e=>a.go(e)};return y}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,i){return void 0===i&&(i="/"),y(e,t,i,!1)}function y(e,t,i,n){let s=R(("string"===typeof t?m(t):t).pathname||"/",i);if(null==s)return null;let r=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every(((e,i)=>e===t[i]));return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let o=null;for(let a=0;null==o&&a<r.length;++a){let e=A(s);o=N(r[a],e,n)}return o}function w(e,t,i,n){void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===n&&(n="");let s=(e,s,r)=>{let o={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let a=z([n,o.relativePath]),l=i.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:D(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var i;if(""!==e.path&&null!=(i=e.path)&&i.includes("?"))for(let n of C(e.path))s(e,t,n);else s(e,t)})),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[i,...n]=t,s=i.endsWith("?"),r=i.replace(/\?$/,"");if(0===n.length)return s?[r,""]:[r];let o=C(n.join("/")),a=[];return a.push(...o.map((e=>""===e?r:[r,e].join("/")))),s&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,x=3,k=2,L=1,E=10,M=-2,T=e=>"*"===e;function D(e,t){let i=e.split("/"),n=i.length;return i.some(T)&&(n+=M),t&&(n+=k),i.filter((e=>!T(e))).reduce(((e,t)=>e+(S.test(t)?x:""===t?L:E)),n)}function N(e,t,i){void 0===i&&(i=!1);let{routesMeta:n}=e,s={},r="/",o=[];for(let a=0;a<n.length;++a){let e=n[a],l=a===n.length-1,h="/"===r?t:t.slice(r.length)||"/",c=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},h),d=e.route;if(!c&&l&&i&&!n[n.length-1].route.index&&(c=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},h)),!c)return null;Object.assign(s,c.params),o.push({params:s,pathname:z([r,c.pathname]),pathnameBase:V(z([r,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(r=z([r,c.pathnameBase]))}return o}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=function(e,t,i){void 0===t&&(t=!1);void 0===i&&(i=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,i)=>(n.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let r=new RegExp(s,t?void 0:"i");return[r,n]}(e.path,e.caseSensitive,e.end),s=t.match(i);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce(((e,t,i)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=a[i]||"";o=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[i];return e[n]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:r,pathnameBase:o,pattern:e}}function A(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&"/"!==n?null:e.slice(i)||"/"}function P(e,t,i,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+i+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function F(e,t){let i=O(e);return t?i.map(((e,t)=>t===i.length-1?e.pathname:e.pathnameBase)):i.map((e=>e.pathnameBase))}function B(e,t,i,n){let s;void 0===n&&(n=!1),"string"===typeof e?s=m(e):(s=h({},e),d(!s.pathname||!s.pathname.includes("?"),P("?","pathname","search",s)),d(!s.pathname||!s.pathname.includes("#"),P("#","pathname","hash",s)),d(!s.search||!s.search.includes("#"),P("#","search","hash",s)));let r,o=""===e||""===s.pathname,a=o?"/":s.pathname;if(null==a)r=i;else{let e=t.length-1;if(!n&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:i,search:n="",hash:s=""}="string"===typeof e?m(e):e,r=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)})),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:r,search:W(n),hash:H(s)}}(s,r),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&i.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),W=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const j=["post","put","patch","delete"],G=(new Set(j),["get",...j]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},K.apply(this,arguments)}const $=s.createContext(null);const q=s.createContext(null);const Q=s.createContext(null);const X=s.createContext(null);const Y=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function J(){return null!=s.useContext(X)}function ee(){return J()||d(!1),s.useContext(X).location}function te(e){s.useContext(Q).static||s.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=s.useContext(Y);return e?function(){let{router:e}=ue(ce.UseNavigateStable),t=pe(de.UseNavigateStable),i=s.useRef(!1);te((()=>{i.current=!0}));let n=s.useCallback((function(n,s){void 0===s&&(s={}),i.current&&("number"===typeof n?e.navigate(n):e.navigate(n,K({fromRouteId:t},s)))}),[e,t]);return n}():function(){J()||d(!1);let e=s.useContext($),{basename:t,future:i,navigator:n}=s.useContext(Q),{matches:r}=s.useContext(Y),{pathname:o}=ee(),a=JSON.stringify(F(r,i.v7_relativeSplatPath)),l=s.useRef(!1);te((()=>{l.current=!0}));let h=s.useCallback((function(i,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof i)return void n.go(i);let r=B(i,JSON.parse(a),o,"path"===s.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:z([t,r.pathname])),(s.replace?n.replace:n.push)(r,s.state,s)}),[t,n,a,o,e]);return h}()}function ne(e,t){let{relative:i}=void 0===t?{}:t,{future:n}=s.useContext(Q),{matches:r}=s.useContext(Y),{pathname:o}=ee(),a=JSON.stringify(F(r,n.v7_relativeSplatPath));return s.useMemo((()=>B(e,JSON.parse(a),o,"path"===i)),[e,a,o,i])}function se(e,t,i,r){J()||d(!1);let{navigator:o}=s.useContext(Q),{matches:a}=s.useContext(Y),l=a[a.length-1],h=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let u,g=ee();if(t){var p;let e="string"===typeof t?m(t):t;"/"===c||(null==(p=e.pathname)?void 0:p.startsWith(c))||d(!1),u=e}else u=g;let f=u.pathname||"/",_=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");_="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:_});let y=he(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:z([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:z([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,r);return t&&y?s.createElement(X.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:n.Pop}},y):y}function re(){let e=function(){var e;let t=s.useContext(Z),i=ge(de.UseRouteError),n=pe(de.UseRouteError);if(void 0!==t)return t;return null==(e=i.errors)?void 0:e[n]}(),t=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),i?s.createElement("pre",{style:r},i):null,null)}const oe=s.createElement(re,null);class ae extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Y.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:i,children:n}=e,r=s.useContext($);return r&&r.static&&r.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=i.route.id),s.createElement(Y.Provider,{value:t},n)}function he(e,t,i,n){var r;if(void 0===t&&(t=[]),void 0===i&&(i=null),void 0===n&&(n=null),null==e){var o;if(!i)return null;if(i.errors)e=i.matches;else{if(!(null!=(o=n)&&o.v7_partialHydration&&0===t.length&&!i.initialized&&i.matches.length>0))return null;e=i.matches}}let a=e,l=null==(r=i)?void 0:r.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let h=!1,c=-1;if(i&&n&&n.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=s),e.route.id){let{loaderData:t,errors:n}=i,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){h=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,n,r)=>{let o,d=!1,u=null,g=null;var p;i&&(o=l&&n.route.id?l[n.route.id]:void 0,u=n.route.errorElement||oe,h&&(c<0&&0===r?(p="route-fallback",!1||fe[p]||(fe[p]=!0),d=!0,g=null):c===r&&(d=!0,g=n.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,r+1)),m=()=>{let t;return t=o?u:d?g:n.route.Component?s.createElement(n.route.Component,null):n.route.element?n.route.element:e,s.createElement(le,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=i},children:t})};return i&&(n.route.ErrorBoundary||n.route.errorElement||0===r)?s.createElement(ae,{location:i.location,revalidation:i.revalidation,component:u,error:o,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function ue(e){let t=s.useContext($);return t||d(!1),t}function ge(e){let t=s.useContext(q);return t||d(!1),t}function pe(e){let t=function(){let e=s.useContext(Y);return e||d(!1),e}(),i=t.matches[t.matches.length-1];return i.route.id||d(!1),i.route.id}const fe={};r.startTransition;function me(e){d(!1)}function _e(e){let{basename:t="/",children:i=null,location:r,navigationType:o=n.Pop,navigator:a,static:l=!1,future:h}=e;J()&&d(!1);let c=t.replace(/^\/*/,"/"),u=s.useMemo((()=>({basename:c,navigator:a,static:l,future:K({v7_relativeSplatPath:!1},h)})),[c,h,a,l]);"string"===typeof r&&(r=m(r));let{pathname:g="/",search:p="",hash:f="",state:_=null,key:v="default"}=r,b=s.useMemo((()=>{let e=R(g,c);return null==e?null:{location:{pathname:e,search:p,hash:f,state:_,key:v},navigationType:o}}),[c,g,p,f,_,v,o]);return null==b?null:s.createElement(Q.Provider,{value:u},s.createElement(X.Provider,{children:i,value:b}))}function ve(e){let{children:t,location:i}=e;return se(be(t),i)}new Promise((()=>{}));s.Component;function be(e,t){void 0===t&&(t=[]);let i=[];return s.Children.forEach(e,((e,n)=>{if(!s.isValidElement(e))return;let r=[...t,n];if(e.type===s.Fragment)return void i.push.apply(i,be(e.props.children,r));e.type!==me&&d(!1),e.props.index&&e.props.children&&d(!1);let o={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,r)),i.push(o)})),i}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},ye.apply(this,arguments)}function we(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(O2){}new Map;const Se=r.startTransition;l.flushSync,r.useId;function xe(e){let{basename:t,children:i,future:n,window:r}=e,o=s.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),_((function(e,t){let{pathname:i,search:n,hash:s}=e.location;return p("",{pathname:i,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,e)}({window:r,v5Compat:!0}));let a=o.current,[l,h]=s.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=s.useCallback((e=>{c&&Se?Se((()=>h(e))):h(e)}),[h,c]);return s.useLayoutEffect((()=>a.listen(d)),[a,d]),s.createElement(_e,{basename:t,children:i,location:l.location,navigationType:l.action,navigator:a,future:n})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Le=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=s.forwardRef((function(e,t){let i,{onClick:n,relative:r,reloadDocument:o,replace:a,state:l,target:h,to:c,preventScrollReset:u,viewTransition:g}=e,p=we(e,Ce),{basename:m}=s.useContext(Q),_=!1;if("string"===typeof c&&Le.test(c)&&(i=c,ke))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),i=R(t.pathname,m);t.origin===e.origin&&null!=i?c=i+t.search+t.hash:_=!0}catch(O2){}let v=function(e,t){let{relative:i}=void 0===t?{}:t;J()||d(!1);let{basename:n,navigator:r}=s.useContext(Q),{hash:o,pathname:a,search:l}=ne(e,{relative:i}),h=a;return"/"!==n&&(h="/"===a?n:z([n,a])),r.createHref({pathname:h,search:l,hash:o})}(c,{relative:r}),b=function(e,t){let{target:i,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,h=ie(),c=ee(),d=ne(e,{relative:a});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();let i=void 0!==n?n:f(c)===f(d);h(e,{replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:l})}}),[c,h,d,n,r,i,e,o,a,l])}(c,{replace:a,state:l,target:h,preventScrollReset:u,relative:r,viewTransition:g});return s.createElement("a",ye({},p,{href:i||v,onClick:_||o?n:function(e){n&&n(e),e.defaultPrevented||b(e)},ref:t,target:h}))}));var Me,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Me||(Me={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var De=i(579);function Ne(){const[e,t]=(0,s.useState)(""),[i,n]=(0,s.useState)(""),[r,o]=(0,s.useState)({}),a=ie();return(0,De.jsx)("div",{className:"login-page",children:(0,De.jsxs)("div",{className:"container",children:[(0,De.jsx)("div",{className:"right-side-container",children:(0,De.jsx)("div",{className:"img-container",children:(0,De.jsx)("img",{className:"app-logo",src:"./assets/images/1236589.png"})})}),(0,De.jsx)("div",{className:"display-content",children:(0,De.jsx)("div",{className:"login-screen",children:(0,De.jsxs)("div",{className:"login-details-content",children:[(0,De.jsx)("h1",{className:"login-title",children:"Login into your account"}),(0,De.jsx)("p",{className:"login-description"}),(0,De.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return e||(t.email="Email is a required field"),i?i.length<8&&(t.password="Password must be at least 8 characters"):t.password="Password is a required field",o(t),0===Object.keys(t).length})())try{const t=await fetch("https://api.avai.woycedemo.com/api/web/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:i})}),n=await t.json();t.ok?(console.log("Login successful:",n),a("/Dashboard")):(console.error("Login failed:",n.message),o({server:n.message}))}catch(n){console.error("An error occurred:",n),o({server:"Failed to connect to server. Please try again later."})}},children:[(0,De.jsxs)("div",{className:"container-form",children:[(0,De.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Your email address",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",className:"input",value:e,onChange:e=>t(e.target.value)}),r.email&&(0,De.jsx)("p",{className:"error-message",children:r.email})]})]}),(0,De.jsxs)("div",{className:"container-form",children:[(0,De.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Your password",className:"input",value:i,onChange:e=>n(e.target.value)}),r.password&&(0,De.jsx)("p",{className:"error-message",children:r.password})]})]}),r.server&&(0,De.jsx)("p",{className:"error-message",children:r.server}),(0,De.jsx)("button",{className:"Sign-In-button",type:"submit",children:"Login"})]}),(0,De.jsxs)("div",{className:"sign-up-text",children:[(0,De.jsx)("p",{children:"Don't have an account?"}),(0,De.jsx)(Ee,{to:"/SignUp",className:"sign-up-link",children:"Sign up"})]})]})})})]})})}function Ie(){const e=ie(),[t,i]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[o,a]=(0,s.useState)({}),[l,h]=(0,s.useState)(""),c=()=>{const e={};return t||(e.email="Email is required"),n||(e.password="Password is required"),e};return(0,De.jsx)("div",{className:"login-page",children:(0,De.jsxs)("div",{className:"container",children:[(0,De.jsx)("div",{className:"display-content",children:(0,De.jsx)("div",{className:"login-screen",children:(0,De.jsxs)("div",{className:"login-details-content",children:[(0,De.jsx)("h1",{className:"login-title",children:"Create your account"}),(0,De.jsx)("p",{className:"login-discription",children:"Enter an email and create a password, getting started is easy!"}),(0,De.jsxs)("form",{onSubmit:async i=>{i.preventDefault();const s=c();if(Object.keys(s).length>0)a(s);else try{const i=await fetch("https://api.avai.woycedemo.com/api/web/sign_up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}),s=await i.json();i.ok?(console.log("Sign up successful:",s),e("/dashboard")):h(s.message||"Failed to sign up")}catch(r){console.error("An error occurred:",r),h("Failed to connect to server. Please try again later.")}},children:[(0,De.jsxs)("div",{className:"container-form",children:[(0,De.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Your email address",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",className:"input",value:t,onChange:e=>i(e.target.value)}),o.email&&(0,De.jsx)("p",{className:"error-message",children:o.email})]})]}),(0,De.jsxs)("div",{className:"container-form",children:[(0,De.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Your password",className:"input",value:n,onChange:e=>r(e.target.value)}),o.password&&(0,De.jsx)("p",{className:"error-message",children:o.password})]})]}),l&&(0,De.jsx)("p",{className:"error-message",children:l}),(0,De.jsx)("button",{className:"Sign-In-button",type:"submit",children:"Sign Up"})]}),(0,De.jsxs)("div",{className:"sign-up-text",children:[(0,De.jsx)("p",{children:"Already have an account?"}),(0,De.jsx)("p",{className:"Sign-in-text",onClick:()=>{e("/Login")},style:{cursor:"pointer"},children:"Sign in"})]})]})})}),(0,De.jsx)("div",{className:"right-side-container",children:(0,De.jsx)("div",{className:"img-container",children:(0,De.jsx)("img",{className:"app-logo",src:"./assets/images/1236589.png"})})})]})})}function Ae(e){var t,i,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(i=Ae(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}const Re=function(){for(var e,t,i=0,n="",s=arguments.length;i<s;i++)(e=arguments[i])&&(t=Ae(e))&&(n&&(n+=" "),n+=t);return n};function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Pe.apply(null,arguments)}function Oe(e){var t=Object.create(null);return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}}var Fe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Be=Oe((function(e){return Fe.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var ze=function(){function e(e){var t=this;this._insertTag=function(e){var i;i=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,i),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{i.insertRule(e,i.cssRules.length)}catch(O2){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ve=Math.abs,We=String.fromCharCode,He=Object.assign;function Ue(e){return e.trim()}function je(e,t,i){return e.replace(t,i)}function Ge(e,t){return e.indexOf(t)}function Ke(e,t){return 0|e.charCodeAt(t)}function $e(e,t,i){return e.slice(t,i)}function qe(e){return e.length}function Qe(e){return e.length}function Xe(e,t){return t.push(e),e}var Ye=1,Ze=1,Je=0,et=0,tt=0,it="";function nt(e,t,i,n,s,r,o){return{value:e,root:t,parent:i,type:n,props:s,children:r,line:Ye,column:Ze,length:o,return:""}}function st(e,t){return He(nt("",null,null,"",null,null,0),e,{length:-e.length},t)}function rt(){return tt=et>0?Ke(it,--et):0,Ze--,10===tt&&(Ze=1,Ye--),tt}function ot(){return tt=et<Je?Ke(it,et++):0,Ze++,10===tt&&(Ze=1,Ye++),tt}function at(){return Ke(it,et)}function lt(){return et}function ht(e,t){return $e(it,e,t)}function ct(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dt(e){return Ye=Ze=1,Je=qe(it=e),et=0,[]}function ut(e){return it="",e}function gt(e){return Ue(ht(et-1,mt(91===e?e+2:40===e?e+1:e)))}function pt(e){for(;(tt=at())&&tt<33;)ot();return ct(e)>2||ct(tt)>3?"":" "}function ft(e,t){for(;--t&&ot()&&!(tt<48||tt>102||tt>57&&tt<65||tt>70&&tt<97););return ht(e,lt()+(t<6&&32==at()&&32==ot()))}function mt(e){for(;ot();)switch(tt){case e:return et;case 34:case 39:34!==e&&39!==e&&mt(tt);break;case 40:41===e&&mt(e);break;case 92:ot()}return et}function _t(e,t){for(;ot()&&e+tt!==57&&(e+tt!==84||47!==at()););return"/*"+ht(t,et-1)+"*"+We(47===e?e:ot())}function vt(e){for(;!ct(at());)ot();return ht(e,et)}var bt="-ms-",yt="-moz-",wt="-webkit-",Ct="comm",St="rule",xt="decl",kt="@keyframes";function Lt(e,t){for(var i="",n=Qe(e),s=0;s<n;s++)i+=t(e[s],s,e,t)||"";return i}function Et(e,t,i,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case xt:return e.return=e.return||e.value;case Ct:return"";case kt:return e.return=e.value+"{"+Lt(e.children,n)+"}";case St:e.value=e.props.join(",")}return qe(i=Lt(e.children,n))?e.return=e.value+"{"+i+"}":""}function Mt(e){return ut(Tt("",null,null,null,[""],e=dt(e),0,[0],e))}function Tt(e,t,i,n,s,r,o,a,l){for(var h=0,c=0,d=o,u=0,g=0,p=0,f=1,m=1,_=1,v=0,b="",y=s,w=r,C=n,S=b;m;)switch(p=v,v=ot()){case 40:if(108!=p&&58==Ke(S,d-1)){-1!=Ge(S+=je(gt(v),"&","&\f"),"&\f")&&(_=-1);break}case 34:case 39:case 91:S+=gt(v);break;case 9:case 10:case 13:case 32:S+=pt(p);break;case 92:S+=ft(lt()-1,7);continue;case 47:switch(at()){case 42:case 47:Xe(Nt(_t(ot(),lt()),t,i),l);break;default:S+="/"}break;case 123*f:a[h++]=qe(S)*_;case 125*f:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:-1==_&&(S=je(S,/\f/g,"")),g>0&&qe(S)-d&&Xe(g>32?It(S+";",n,i,d-1):It(je(S," ","")+";",n,i,d-2),l);break;case 59:S+=";";default:if(Xe(C=Dt(S,t,i,h,c,s,a,b,y=[],w=[],d),r),123===v)if(0===c)Tt(S,t,C,C,y,r,d,a,w);else switch(99===u&&110===Ke(S,3)?100:u){case 100:case 108:case 109:case 115:Tt(e,C,C,n&&Xe(Dt(e,C,C,0,0,s,a,b,s,y=[],d),w),s,w,d,a,n?y:w);break;default:Tt(S,C,C,C,[""],w,0,a,w)}}h=c=g=0,f=_=1,b=S="",d=o;break;case 58:d=1+qe(S),g=p;default:if(f<1)if(123==v)--f;else if(125==v&&0==f++&&125==rt())continue;switch(S+=We(v),v*f){case 38:_=c>0?1:(S+="\f",-1);break;case 44:a[h++]=(qe(S)-1)*_,_=1;break;case 64:45===at()&&(S+=gt(ot())),u=at(),c=d=qe(b=S+=vt(lt())),v++;break;case 45:45===p&&2==qe(S)&&(f=0)}}return r}function Dt(e,t,i,n,s,r,o,a,l,h,c){for(var d=s-1,u=0===s?r:[""],g=Qe(u),p=0,f=0,m=0;p<n;++p)for(var _=0,v=$e(e,d+1,d=Ve(f=o[p])),b=e;_<g;++_)(b=Ue(f>0?u[_]+" "+v:je(v,/&\f/g,u[_])))&&(l[m++]=b);return nt(e,t,i,0===s?St:a,l,h,c)}function Nt(e,t,i){return nt(e,t,i,Ct,We(tt),$e(e,2,-2),0)}function It(e,t,i,n){return nt(e,t,i,xt,$e(e,0,n),$e(e,n+1,-1),n)}var At=function(e,t,i){for(var n=0,s=0;n=s,s=at(),38===n&&12===s&&(t[i]=1),!ct(s);)ot();return ht(e,et)},Rt=function(e,t){return ut(function(e,t){var i=-1,n=44;do{switch(ct(n)){case 0:38===n&&12===at()&&(t[i]=1),e[i]+=At(et-1,t,i);break;case 2:e[i]+=gt(n);break;case 4:if(44===n){e[++i]=58===at()?"&\f":"",t[i]=e[i].length;break}default:e[i]+=We(n)}}while(n=ot());return e}(dt(e),t))},Pt=new WeakMap,Ot=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,i=e.parent,n=e.column===i.column&&e.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Pt.get(i))&&!n){Pt.set(e,!0);for(var s=[],r=Rt(t,s),o=i.props,a=0,l=0;a<r.length;a++)for(var h=0;h<o.length;h++,l++)e.props[l]=s[a]?r[a].replace(/&\f/g,o[h]):o[h]+" "+r[a]}}},Ft=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Bt(e,t){switch(function(e,t){return 45^Ke(e,0)?(((t<<2^Ke(e,0))<<2^Ke(e,1))<<2^Ke(e,2))<<2^Ke(e,3):0}(e,t)){case 5103:return wt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wt+e+yt+e+bt+e+e;case 6828:case 4268:return wt+e+bt+e+e;case 6165:return wt+e+bt+"flex-"+e+e;case 5187:return wt+e+je(e,/(\w+).+(:[^]+)/,wt+"box-$1$2"+bt+"flex-$1$2")+e;case 5443:return wt+e+bt+"flex-item-"+je(e,/flex-|-self/,"")+e;case 4675:return wt+e+bt+"flex-line-pack"+je(e,/align-content|flex-|-self/,"")+e;case 5548:return wt+e+bt+je(e,"shrink","negative")+e;case 5292:return wt+e+bt+je(e,"basis","preferred-size")+e;case 6060:return wt+"box-"+je(e,"-grow","")+wt+e+bt+je(e,"grow","positive")+e;case 4554:return wt+je(e,/([^-])(transform)/g,"$1"+wt+"$2")+e;case 6187:return je(je(je(e,/(zoom-|grab)/,wt+"$1"),/(image-set)/,wt+"$1"),e,"")+e;case 5495:case 3959:return je(e,/(image-set\([^]*)/,wt+"$1$`$1");case 4968:return je(je(e,/(.+:)(flex-)?(.*)/,wt+"box-pack:$3"+bt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wt+e+e;case 4095:case 3583:case 4068:case 2532:return je(e,/(.+)-inline(.+)/,wt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qe(e)-1-t>6)switch(Ke(e,t+1)){case 109:if(45!==Ke(e,t+4))break;case 102:return je(e,/(.+:)(.+)-([^]+)/,"$1"+wt+"$2-$3$1"+yt+(108==Ke(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ge(e,"stretch")?Bt(je(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Ke(e,t+1))break;case 6444:switch(Ke(e,qe(e)-3-(~Ge(e,"!important")&&10))){case 107:return je(e,":",":"+wt)+e;case 101:return je(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wt+(45===Ke(e,14)?"inline-":"")+"box$3$1"+wt+"$2$3$1"+bt+"$2box$3")+e}break;case 5936:switch(Ke(e,t+11)){case 114:return wt+e+bt+je(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wt+e+bt+je(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wt+e+bt+je(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wt+e+bt+e+e}return e}var zt=[function(e,t,i,n){if(e.length>-1&&!e.return)switch(e.type){case xt:e.return=Bt(e.value,e.length);break;case kt:return Lt([st(e,{value:je(e.value,"@","@"+wt)})],n);case St:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Lt([st(e,{props:[je(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Lt([st(e,{props:[je(t,/:(plac\w+)/,":"+wt+"input-$1")]}),st(e,{props:[je(t,/:(plac\w+)/,":-moz-$1")]}),st(e,{props:[je(t,/:(plac\w+)/,bt+"input-$1")]})],n)}return""}))}}],Vt=function(e){var t=e.key;if("css"===t){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,s,r=e.stylisPlugins||zt,o={},a=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),i=1;i<t.length;i++)o[t[i]]=!0;a.push(e)}));var l,h,c=[Et,(h=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],d=function(e){var t=Qe(e);return function(i,n,s,r){for(var o="",a=0;a<t;a++)o+=e[a](i,n,s,r)||"";return o}}([Ot,Ft].concat(r,c));s=function(e,t,i,n){l=i,Lt(Mt(e?e+"{"+t.styles+"}":t.styles),d),n&&(u.inserted[t.name]=!0)};var u={key:t,sheet:new ze({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return u.sheet.hydrate(a),u};var Wt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ht=!1,Ut=/[A-Z]|^ms/g,jt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Gt=function(e){return 45===e.charCodeAt(1)},Kt=function(e){return null!=e&&"boolean"!==typeof e},$t=Oe((function(e){return Gt(e)?e:e.replace(Ut,"-$&").toLowerCase()})),qt=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(jt,(function(e,t,i){return Yt={name:t,styles:i,next:Yt},t}))}return 1===Wt[e]||Gt(e)||"number"!==typeof t||0===t?t:t+"px"},Qt="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Xt(e,t,i){if(null==i)return"";var n=i;if(void 0!==n.__emotion_styles)return n;switch(typeof i){case"boolean":return"";case"object":var s=i;if(1===s.anim)return Yt={name:s.name,styles:s.styles,next:Yt},s.name;var r=i;if(void 0!==r.styles){var o=r.next;if(void 0!==o)for(;void 0!==o;)Yt={name:o.name,styles:o.styles,next:Yt},o=o.next;return r.styles+";"}return function(e,t,i){var n="";if(Array.isArray(i))for(var s=0;s<i.length;s++)n+=Xt(e,t,i[s])+";";else for(var r in i){var o=i[r];if("object"!==typeof o){var a=o;null!=t&&void 0!==t[a]?n+=r+"{"+t[a]+"}":Kt(a)&&(n+=$t(r)+":"+qt(r,a)+";")}else{if("NO_COMPONENT_SELECTOR"===r&&Ht)throw new Error(Qt);if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var l=Xt(e,t,o);switch(r){case"animation":case"animationName":n+=$t(r)+":"+l+";";break;default:n+=r+"{"+l+"}"}}else for(var h=0;h<o.length;h++)Kt(o[h])&&(n+=$t(r)+":"+qt(r,o[h])+";")}}return n}(e,t,i);case"function":if(void 0!==e){var a=Yt,l=i(e);return Yt=a,Xt(e,t,l)}}var h=i;if(null==t)return h;var c=t[h];return void 0!==c?c:h}var Yt,Zt=/label:\s*([^\s;{]+)\s*(;|$)/g;function Jt(e,t,i){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,s="";Yt=void 0;var r=e[0];null==r||void 0===r.raw?(n=!1,s+=Xt(i,t,r)):s+=r[0];for(var o=1;o<e.length;o++){if(s+=Xt(i,t,e[o]),n)s+=r[o]}Zt.lastIndex=0;for(var a,l="";null!==(a=Zt.exec(s));)l+="-"+a[1];var h=function(e){for(var t,i=0,n=0,s=e.length;s>=4;++n,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),i=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(s){case 3:i^=(255&e.charCodeAt(n+2))<<16;case 2:i^=(255&e.charCodeAt(n+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(n)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)}(s)+l;return{name:h,styles:s,next:Yt}}var ei=!!r.useInsertionEffect&&r.useInsertionEffect,ti=ei||function(e){return e()},ii=(ei||s.useLayoutEffect,s.createContext("undefined"!==typeof HTMLElement?Vt({key:"css"}):null)),ni=(ii.Provider,function(e){return(0,s.forwardRef)((function(t,i){var n=(0,s.useContext)(ii);return e(t,n,i)}))}),si=s.createContext({});var ri=function(e,t,i){var n=e.key+"-"+t.name;!1===i&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},oi=Be,ai=function(e){return"theme"!==e},li=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?oi:ai},hi=function(e,t,i){var n;if(t){var s=t.shouldForwardProp;n=e.__emotion_forwardProp&&s?function(t){return e.__emotion_forwardProp(t)&&s(t)}:s}return"function"!==typeof n&&i&&(n=e.__emotion_forwardProp),n},ci=function(e){var t=e.cache,i=e.serialized,n=e.isStringTag;return ri(t,i,n),ti((function(){return function(e,t,i){ri(e,t,i);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+n:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}}(t,i,n)})),null},di=function e(t,i){var n,r,o=t.__emotion_real===t,a=o&&t.__emotion_base||t;void 0!==i&&(n=i.label,r=i.target);var l=hi(t,i,o),h=l||li(a),c=!h("as");return function(){var d=arguments,u=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&u.push("label:"+n+";"),null==d[0]||void 0===d[0].raw)u.push.apply(u,d);else{u.push(d[0][0]);for(var g=d.length,p=1;p<g;p++)u.push(d[p],d[0][p])}var f=ni((function(e,t,i){var n=c&&e.as||a,o="",d=[],g=e;if(null==e.theme){for(var p in g={},e)g[p]=e[p];g.theme=s.useContext(si)}"string"===typeof e.className?o=function(e,t,i){var n="";return i.split(" ").forEach((function(i){void 0!==e[i]?t.push(e[i]+";"):i&&(n+=i+" ")})),n}(t.registered,d,e.className):null!=e.className&&(o=e.className+" ");var f=Jt(u.concat(d),t.registered,g);o+=t.key+"-"+f.name,void 0!==r&&(o+=" "+r);var m=c&&void 0===l?li(n):h,_={};for(var v in e)c&&"as"===v||m(v)&&(_[v]=e[v]);return _.className=o,i&&(_.ref=i),s.createElement(s.Fragment,null,s.createElement(ci,{cache:t,serialized:f,isStringTag:"string"===typeof n}),s.createElement(n,_))}));return f.displayName=void 0!==n?n:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",f.defaultProps=t.defaultProps,f.__emotion_real=f,f.__emotion_base=a,f.__emotion_styles=u,f.__emotion_forwardProp=l,Object.defineProperty(f,"toString",{value:function(){return"."+r}}),f.withComponent=function(t,n){return e(t,Pe({},i,n,{shouldForwardProp:hi(f,n,!0)})).apply(void 0,u)},f}}.bind();function ui(e,t){return di(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){di[e]=di(e)}));const gi=[];function pi(e){return gi[0]=e,Jt(gi)}function fi(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return n.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}function mi(e){if("string"!==typeof e)throw new Error(fi(7));return e.charAt(0).toUpperCase()+e.slice(1)}function _i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vi(e){if(s.isValidElement(e)||!_i(e))return e;const t={};return Object.keys(e).forEach((i=>{t[i]=vi(e[i])})),t}function bi(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const n=i.clone?{...e}:e;return _i(e)&&_i(t)&&Object.keys(t).forEach((r=>{s.isValidElement(t[r])?n[r]=t[r]:_i(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&_i(e[r])?n[r]=bi(e[r],t[r],i):i.clone?n[r]=_i(t[r])?vi(t[r]):t[r]:n[r]=t[r]})),n}const yi=function(e,t){return t?bi(e,t,{clone:!1}):e};const wi={xs:0,sm:600,md:900,lg:1200,xl:1536},Ci={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${wi[e]}px)`},Si={containerQueries:e=>({up:t=>{let i="number"===typeof t?t:wi[t]||t;return"number"===typeof i&&(i=`${i}px`),e?`@container ${e} (min-width:${i})`:`@container (min-width:${i})`}})};function xi(e,t,i){const n=e.theme||{};if(Array.isArray(t)){const e=n.breakpoints||Ci;return t.reduce(((n,s,r)=>(n[e.up(e.keys[r])]=i(t[r]),n)),{})}if("object"===typeof t){const e=n.breakpoints||Ci;return Object.keys(t).reduce(((s,r)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,r)){const e=function(e,t){const i=t.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,n,s]=i,r=Number.isNaN(+n)?n||0:+n;return e.containerQueries(s).up(r)}(n.containerQueries?n:Si,r);e&&(s[e]=i(t[r],r))}else if(Object.keys(e.values||wi).includes(r)){s[e.up(r)]=i(t[r],r)}else{const e=r;s[e]=t[e]}return s}),{})}return i(t)}function ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,i)=>(t[e.up(i)]={},t)),{});return t||{}}function Li(e,t){return e.reduce(((e,t)=>{const i=e[t];return(!i||0===Object.keys(i).length)&&delete e[t],e}),t)}function Ei(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&i){const i=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=i)return i}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Mi(e,t,i){let n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;return n="function"===typeof e?e(i):Array.isArray(e)?e[i]||s:Ei(e,i)||s,t&&(n=t(n,s,e)),n}const Ti=function(e){const{prop:t,cssProperty:i=e.prop,themeKey:n,transform:s}=e,r=e=>{if(null==e[t])return null;const r=e[t],o=Ei(e.theme,n)||{};return xi(e,r,(e=>{let n=Mi(o,s,e);return e===n&&"string"===typeof e&&(n=Mi(o,s,`${t}${"default"===e?"":mi(e)}`,e)),!1===i?n:{[i]:n}}))};return r.propTypes={},r.filterProps=[t],r};const Di={m:"margin",p:"padding"},Ni={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ii={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ai=function(e){const t={};return i=>(void 0===t[i]&&(t[i]=e(i)),t[i])}((e=>{if(e.length>2){if(!Ii[e])return[e];e=Ii[e]}const[t,i]=e.split(""),n=Di[t],s=Ni[i]||"";return Array.isArray(s)?s.map((e=>n+e)):[n+s]})),Ri=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Pi=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Oi=[...Ri,...Pi];function Fi(e,t,i,n){const s=Ei(e,t,!0)??i;return"number"===typeof s||"string"===typeof s?e=>"string"===typeof e?e:"string"===typeof s?`calc(${e} * ${s})`:s*e:Array.isArray(s)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const i=s[t];return e>=0?i:"number"===typeof i?-i:`-${i}`}:"function"===typeof s?s:()=>{}}function Bi(e){return Fi(e,"spacing",8)}function zi(e,t){return"string"===typeof t||null==t?t:e(t)}function Vi(e,t,i,n){if(!t.includes(i))return null;const s=function(e,t){return i=>e.reduce(((e,n)=>(e[n]=zi(t,i),e)),{})}(Ai(i),n);return xi(e,e[i],s)}function Wi(e,t){const i=Bi(e.theme);return Object.keys(e).map((n=>Vi(e,t,n,i))).reduce(yi,{})}function Hi(e){return Wi(e,Ri)}function Ui(e){return Wi(e,Pi)}function ji(e){return Wi(e,Oi)}Hi.propTypes={},Hi.filterProps=Ri,Ui.propTypes={},Ui.filterProps=Pi,ji.propTypes={},ji.filterProps=Oi;const Gi=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce(((e,t)=>(t.filterProps.forEach((i=>{e[i]=t})),e)),{}),s=e=>Object.keys(e).reduce(((t,i)=>n[i]?yi(t,n[i](e)):t),{});return s.propTypes={},s.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),s};function Ki(e){return"number"!==typeof e?e:`${e}px solid`}function $i(e,t){return Ti({prop:e,themeKey:"borders",transform:t})}const qi=$i("border",Ki),Qi=$i("borderTop",Ki),Xi=$i("borderRight",Ki),Yi=$i("borderBottom",Ki),Zi=$i("borderLeft",Ki),Ji=$i("borderColor"),en=$i("borderTopColor"),tn=$i("borderRightColor"),nn=$i("borderBottomColor"),sn=$i("borderLeftColor"),rn=$i("outline",Ki),on=$i("outlineColor"),an=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=Fi(e.theme,"shape.borderRadius",4),i=e=>({borderRadius:zi(t,e)});return xi(e,e.borderRadius,i)}return null};an.propTypes={},an.filterProps=["borderRadius"];Gi(qi,Qi,Xi,Yi,Zi,Ji,en,tn,nn,sn,an,rn,on);const ln=e=>{if(void 0!==e.gap&&null!==e.gap){const t=Fi(e.theme,"spacing",8),i=e=>({gap:zi(t,e)});return xi(e,e.gap,i)}return null};ln.propTypes={},ln.filterProps=["gap"];const hn=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=Fi(e.theme,"spacing",8),i=e=>({columnGap:zi(t,e)});return xi(e,e.columnGap,i)}return null};hn.propTypes={},hn.filterProps=["columnGap"];const cn=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=Fi(e.theme,"spacing",8),i=e=>({rowGap:zi(t,e)});return xi(e,e.rowGap,i)}return null};cn.propTypes={},cn.filterProps=["rowGap"];Gi(ln,hn,cn,Ti({prop:"gridColumn"}),Ti({prop:"gridRow"}),Ti({prop:"gridAutoFlow"}),Ti({prop:"gridAutoColumns"}),Ti({prop:"gridAutoRows"}),Ti({prop:"gridTemplateColumns"}),Ti({prop:"gridTemplateRows"}),Ti({prop:"gridTemplateAreas"}),Ti({prop:"gridArea"}));function dn(e,t){return"grey"===t?t:e}Gi(Ti({prop:"color",themeKey:"palette",transform:dn}),Ti({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:dn}),Ti({prop:"backgroundColor",themeKey:"palette",transform:dn}));function un(e){return e<=1&&0!==e?100*e+"%":e}const gn=Ti({prop:"width",transform:un}),pn=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const i=e.theme?.breakpoints?.values?.[t]||wi[t];return i?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:un(t)}};return xi(e,e.maxWidth,t)}return null};pn.filterProps=["maxWidth"];const fn=Ti({prop:"minWidth",transform:un}),mn=Ti({prop:"height",transform:un}),_n=Ti({prop:"maxHeight",transform:un}),vn=Ti({prop:"minHeight",transform:un}),bn=(Ti({prop:"size",cssProperty:"width",transform:un}),Ti({prop:"size",cssProperty:"height",transform:un}),Gi(gn,pn,fn,mn,_n,vn,Ti({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Ki},borderTop:{themeKey:"borders",transform:Ki},borderRight:{themeKey:"borders",transform:Ki},borderBottom:{themeKey:"borders",transform:Ki},borderLeft:{themeKey:"borders",transform:Ki},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ki},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:an},color:{themeKey:"palette",transform:dn},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:dn},backgroundColor:{themeKey:"palette",transform:dn},p:{style:Ui},pt:{style:Ui},pr:{style:Ui},pb:{style:Ui},pl:{style:Ui},px:{style:Ui},py:{style:Ui},padding:{style:Ui},paddingTop:{style:Ui},paddingRight:{style:Ui},paddingBottom:{style:Ui},paddingLeft:{style:Ui},paddingX:{style:Ui},paddingY:{style:Ui},paddingInline:{style:Ui},paddingInlineStart:{style:Ui},paddingInlineEnd:{style:Ui},paddingBlock:{style:Ui},paddingBlockStart:{style:Ui},paddingBlockEnd:{style:Ui},m:{style:Hi},mt:{style:Hi},mr:{style:Hi},mb:{style:Hi},ml:{style:Hi},mx:{style:Hi},my:{style:Hi},margin:{style:Hi},marginTop:{style:Hi},marginRight:{style:Hi},marginBottom:{style:Hi},marginLeft:{style:Hi},marginX:{style:Hi},marginY:{style:Hi},marginInline:{style:Hi},marginInlineStart:{style:Hi},marginInlineEnd:{style:Hi},marginBlock:{style:Hi},marginBlockStart:{style:Hi},marginBlockEnd:{style:Hi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ln},rowGap:{style:cn},columnGap:{style:hn},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:un},maxWidth:{style:pn},minWidth:{transform:un},height:{transform:un},maxHeight:{transform:un},minHeight:{transform:un},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const yn=function(){function e(e,t,i,n){const s={[e]:t,theme:i},r=n[e];if(!r)return{[e]:t};const{cssProperty:o=e,themeKey:a,transform:l,style:h}=r;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const c=Ei(i,a)||{};if(h)return h(s);return xi(s,t,(t=>{let i=Mi(c,l,t);return t===i&&"string"===typeof t&&(i=Mi(c,l,`${e}${"default"===t?"":mi(t)}`,t)),!1===o?i:{[o]:i}}))}return function t(i){const{sx:n,theme:s={}}=i||{};if(!n)return null;const r=s.unstable_sxConfig??bn;function o(i){let n=i;if("function"===typeof i)n=i(s);else if("object"!==typeof i)return i;if(!n)return null;const o=ki(s.breakpoints),a=Object.keys(o);let l=o;return Object.keys(n).forEach((i=>{const o=function(e,t){return"function"===typeof e?e(t):e}(n[i],s);if(null!==o&&void 0!==o)if("object"===typeof o)if(r[i])l=yi(l,e(i,o,s,r));else{const e=xi({theme:s},o,(e=>({[i]:e})));!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),s=new Set(n);return t.every((e=>s.size===Object.keys(e).length))}(e,o)?l=yi(l,e):l[i]=t({sx:o,theme:s})}else l=yi(l,e(i,o,s,r))})),function(e,t){if(!e.containerQueries)return t;const i=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const i=/min-width:\s*([0-9.]+)/;return+(e.match(i)?.[1]||0)-+(t.match(i)?.[1]||0)}));return i.length?i.reduce(((e,i)=>{const n=t[i];return delete e[i],e[i]=n,e}),{...t}):t}(s,Li(a,l))}return Array.isArray(n)?n.map(o):o(n)}}();yn.filterProps=["sx"];const wn=yn,Cn=e=>{const t={systemProps:{},otherProps:{}},i=e?.theme?.unstable_sxConfig??bn;return Object.keys(e).forEach((n=>{i[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t};function Sn(e){const{sx:t,...i}=e,{systemProps:n,otherProps:s}=Cn(i);let r;return r=Array.isArray(t)?[n,...t]:"function"===typeof t?function(){const e=t(...arguments);return _i(e)?{...n,...e}:n}:{...n,...t},{...s,sx:r}}const xn=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})};const kn={borderRadius:4};function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi({spacing:e});if(e.mui)return e;const i=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(0===i.length?[1]:i).map((e=>{const i=t(e);return"number"===typeof i?`${i}px`:i})).join(" ")};return i.mui=!0,i}function En(e,t){const i=this;if(i.vars){if(!i.colorSchemes?.[e]||"function"!==typeof i.getColorSchemeSelector)return{};let n=i.getColorSchemeSelector(e);return"&"===n?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return i.palette.mode===e?t:{}}const Mn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:i={},spacing:n,shape:s={},...r}=e,o=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:n=5,...s}=e,r=xn(t),o=Object.keys(r);function a(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${i})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-n/100}${i})`}function h(e,s){const r=o.indexOf(s);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${i}) and (max-width:${(-1!==r&&"number"===typeof t[o[r]]?t[o[r]]:s)-n/100}${i})`}return{keys:o,values:r,up:a,down:l,between:h,only:function(e){return o.indexOf(e)+1<o.length?h(e,o[o.indexOf(e)+1]):a(e)},not:function(e){const t=o.indexOf(e);return 0===t?a(o[1]):t===o.length-1?l(o[t]):h(e,o[o.indexOf(e)+1]).replace("@media","@media not all and")},unit:i,...s}}(t);let a=bi({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:Ln(n),shape:{...kn,...s}},r);a=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function i(i,n){i.up=function(){return t(e.breakpoints.up(...arguments),n)},i.down=function(){return t(e.breakpoints.down(...arguments),n)},i.between=function(){return t(e.breakpoints.between(...arguments),n)},i.only=function(){return t(e.breakpoints.only(...arguments),n)},i.not=function(){const i=t(e.breakpoints.not(...arguments),n);return i.includes("not all and")?i.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):i}}const n={},s=e=>(i(n,e),n);return i(s),{...e,containerQueries:s}}(a),a.applyStyles=En;for(var l=arguments.length,h=new Array(l>1?l-1:0),c=1;c<l;c++)h[c-1]=arguments[c];return a=h.reduce(((e,t)=>bi(e,t)),a),a.unstable_sxConfig={...bn,...r?.unstable_sxConfig},a.unstable_sx=function(e){return wn({sx:e,theme:this})},a};const Tn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=s.useContext(si);return t&&(i=t,0!==Object.keys(i).length)?t:e;var i},Dn=Mn();const Nn=function(){return Tn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn)};const In=e=>e,An=(()=>{let e=In;return{configure(t){e=t},generate:t=>e(t),reset(){e=In}}})();const Rn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,i))};function Pn(e){return Rn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function On(e){if(e.type)return e;if("#"===e.charAt(0))return On(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&1===i[0].length&&(i=i.map((e=>e+e))),i?`rgb${4===i.length?"a":""}(${i.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),i=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(fi(9,e));let n,s=e.substring(t+1,e.length-1);if("color"===i){if(s=s.split(" "),n=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(fi(10,n))}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:i,values:s,colorSpace:n}}const Fn=(e,t)=>{try{return(e=>{const t=On(e);return t.values.slice(0,3).map(((e,i)=>t.type.includes("hsl")&&0!==i?`${e}%`:e)).join(" ")})(e)}catch(i){return e}};function Bn(e){const{type:t,colorSpace:i}=e;let{values:n}=e;return t.includes("rgb")?n=n.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),n=t.includes("color")?`${i} ${n.join(" ")}`:`${n.join(", ")}`,`${t}(${n})`}function zn(e){e=On(e);const{values:t}=e,i=t[0],n=t[1]/100,s=t[2]/100,r=n*Math.min(s,1-s),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+i/30)%12;return s-r*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),Bn({type:a,values:l})}function Vn(e){let t="hsl"===(e=On(e)).type||"hsla"===e.type?On(zn(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Wn(e,t){return e=On(e),t=Pn(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,Bn(e)}function Hn(e,t,i){try{return Wn(e,t)}catch(n){return e}}function Un(e,t){if(e=On(e),t=Pn(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return Bn(e)}function jn(e,t,i){try{return Un(e,t)}catch(n){return e}}function Gn(e,t){if(e=On(e),t=Pn(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return Bn(e)}function Kn(e,t,i){try{return Gn(e,t)}catch(n){return e}}function $n(e,t,i){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return Vn(e)>.5?Un(e,t):Gn(e,t)}(e,t)}catch(n){return e}}const qn={black:"#000",white:"#fff"},Qn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Xn={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Yn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Zn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Jn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},es={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ts={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function is(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:qn.white,default:qn.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const ns=is();function ss(){return{text:{primary:qn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:qn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const rs=ss();function os(e,t,i,n){const s=n.light||n,r=n.dark||1.5*n;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:"light"===t?e.light=Gn(e.main,s):"dark"===t&&(e.dark=Un(e.main,r)))}function as(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:n=.2,...s}=e,r=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Jn[200],light:Jn[50],dark:Jn[400]}:{main:Jn[700],light:Jn[400],dark:Jn[800]}}(t),o=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Xn[200],light:Xn[50],dark:Xn[400]}:{main:Xn[500],light:Xn[300],dark:Xn[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Yn[500],light:Yn[300],dark:Yn[700]}:{main:Yn[700],light:Yn[400],dark:Yn[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:es[400],light:es[300],dark:es[700]}:{main:es[700],light:es[500],dark:es[900]}}(t),h=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ts[400],light:ts[300],dark:ts[700]}:{main:ts[800],light:ts[500],dark:ts[900]}}(t),c=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Zn[400],light:Zn[300],dark:Zn[700]}:{main:"#ed6c02",light:Zn[500],dark:Zn[900]}}(t);function d(e){const t=function(e,t){const i=Vn(e),n=Vn(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}(e,rs.text.primary)>=i?rs.text.primary:ns.text.primary;return t}const u=e=>{let{color:t,name:i,mainShade:s=500,lightShade:r=300,darkShade:o=700}=e;if(t={...t},!t.main&&t[s]&&(t.main=t[s]),!t.hasOwnProperty("main"))throw new Error(fi(11,i?` (${i})`:"",s));if("string"!==typeof t.main)throw new Error(fi(12,i?` (${i})`:"",JSON.stringify(t.main)));return os(t,"light",r,n),os(t,"dark",o,n),t.contrastText||(t.contrastText=d(t.main)),t};let g;"light"===t?g=is():"dark"===t&&(g=ss());return bi({common:{...qn},mode:t,primary:u({color:r,name:"primary"}),secondary:u({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:u({color:a,name:"error"}),warning:u({color:c,name:"warning"}),info:u({color:l,name:"info"}),success:u({color:h,name:"success"}),grey:Qn,contrastThreshold:i,getContrastText:d,augmentColor:u,tonalOffset:n,...g},s)}function ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];if(!n.length)return"";const r=n[0];return"string"!==typeof r||r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${r}`:`, var(--${e?`${e}-`:""}${r}${t(...n.slice(1))})`}return function(i){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return`var(--${e?`${e}-`:""}${i}${t(...s)})`}}function hs(e){const t={};return Object.entries(e).forEach((e=>{const[i,n]=e;"object"===typeof n&&(t[i]=`${n.fontStyle?`${n.fontStyle} `:""}${n.fontVariant?`${n.fontVariant} `:""}${n.fontWeight?`${n.fontWeight} `:""}${n.fontStretch?`${n.fontStretch} `:""}${n.fontSize||""}${n.lineHeight?`/${n.lineHeight} `:""}${n.fontFamily||""}`)})),t}const cs=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=e;t.forEach(((e,r)=>{r===t.length-1?Array.isArray(s)?s[Number(e)]=i:s&&"object"===typeof s&&(s[e]=i):s&&"object"===typeof s&&(s[e]||(s[e]=n.includes(e)?[]:{}),s=s[e])}))},ds=(e,t,i)=>{!function e(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(n).forEach((n=>{let[o,a]=n;(!i||i&&!i([...s,o]))&&void 0!==a&&null!==a&&("object"===typeof a&&Object.keys(a).length>0?e(a,[...s,o],Array.isArray(a)?[...r,o]:r):t([...s,o],a,r))}))}(e)},us=(e,t)=>{if("number"===typeof t){if(["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t))))return t;return e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`}return t};function gs(e,t){const{prefix:i,shouldSkipGeneratingVar:n}=t||{},s={},r={},o={};return ds(e,((e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!n||!n(e,t))){const n=`--${i?`${i}-`:""}${e.join("-")}`,l=us(e,t);Object.assign(s,{[n]:l}),cs(r,e,`var(${n})`,a),cs(o,e,`var(${n}, ${l})`,a)}}),(e=>"vars"===e[0])),{css:s,vars:r,varsWithDefaults:o}}const ps=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:i=m,disableCssColorScheme:n,colorSchemeSelector:s}=t,{colorSchemes:r={},components:o,defaultColorScheme:a="light",...l}=e,{vars:h,css:c,varsWithDefaults:d}=gs(l,t);let u=d;const g={},{[a]:p,...f}=r;if(Object.entries(f||{}).forEach((e=>{let[i,n]=e;const{vars:s,css:r,varsWithDefaults:o}=gs(n,t);u=bi(u,o),g[i]={css:r,vars:s}})),p){const{css:e,vars:i,varsWithDefaults:n}=gs(p,t);u=bi(u,n),g[a]={css:e,vars:i}}function m(t,i){let n=s;if("class"===s&&(n=".%s"),"data"===s&&(n="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(n=`[${s}="%s"]`),t){if("media"===n){if(e.defaultColorScheme===t)return":root";const n=r[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${n})`]:{":root":i}}}if(n)return e.defaultColorScheme===t?`:root, ${n.replace("%s",String(t))}`:n.replace("%s",String(t))}return":root"}return{vars:u,generateThemeVars:()=>{let e={...h};return Object.entries(g).forEach((t=>{let[,{vars:i}]=t;e=bi(e,i)})),e},generateStyleSheets:()=>{const t=[],s=e.defaultColorScheme||"light";function o(e,i){Object.keys(i).length&&t.push("string"===typeof e?{[e]:{...i}}:e)}o(i(void 0,{...c}),c);const{[s]:a,...l}=g;if(a){const{css:e}=a,t=r[s]?.palette?.mode,l=!n&&t?{colorScheme:t,...e}:{...e};o(i(s,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:s}]=e;const a=r[t]?.palette?.mode,l=!n&&a?{colorScheme:a,...s}:{...s};o(i(t,{...l}),l)})),t}}};function fs(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}const ms={textTransform:"uppercase"},_s='"Roboto", "Helvetica", "Arial", sans-serif';function vs(e,t){const{fontFamily:i=_s,fontSize:n=14,fontWeightLight:s=300,fontWeightRegular:r=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:h,pxToRem:c,...d}="function"===typeof t?t(e):t;const u=n/14,g=c||(e=>e/l*u+"rem"),p=(e,t,n,s,r)=>{return{fontFamily:i,fontWeight:e,fontSize:g(t),lineHeight:n,...i===_s?{letterSpacing:(o=s/t,Math.round(1e5*o)/1e5)+"em"}:{},...r,...h};var o},f={h1:p(s,96,1.167,-1.5),h2:p(s,60,1.2,-.5),h3:p(r,48,1.167,0),h4:p(r,34,1.235,.25),h5:p(r,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(r,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(r,16,1.5,.15),body2:p(r,14,1.43,.15),button:p(o,14,1.75,.4,ms),caption:p(r,12,1.66,.4),overline:p(r,12,2.66,1,ms),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return bi({htmlFontSize:l,pxToRem:g,fontFamily:i,fontSize:n,fontWeightLight:s,fontWeightRegular:r,fontWeightMedium:o,fontWeightBold:a,...f},d,{clone:!1})}function bs(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const ys=["none",bs(0,2,1,-1,0,1,1,0,0,1,3,0),bs(0,3,1,-2,0,2,2,0,0,1,5,0),bs(0,3,3,-2,0,3,4,0,0,1,8,0),bs(0,2,4,-1,0,4,5,0,0,1,10,0),bs(0,3,5,-1,0,5,8,0,0,1,14,0),bs(0,3,5,-1,0,6,10,0,0,1,18,0),bs(0,4,5,-2,0,7,10,1,0,2,16,1),bs(0,5,5,-3,0,8,10,1,0,3,14,2),bs(0,5,6,-3,0,9,12,1,0,3,16,2),bs(0,6,6,-3,0,10,14,1,0,4,18,3),bs(0,6,7,-4,0,11,15,1,0,4,20,3),bs(0,7,8,-4,0,12,17,2,0,5,22,4),bs(0,7,8,-4,0,13,19,2,0,5,24,4),bs(0,7,9,-4,0,14,21,2,0,5,26,4),bs(0,8,9,-5,0,15,22,2,0,6,28,5),bs(0,8,10,-5,0,16,24,2,0,6,30,5),bs(0,8,11,-5,0,17,26,2,0,6,32,5),bs(0,9,11,-5,0,18,28,2,0,7,34,6),bs(0,9,12,-6,0,19,29,2,0,7,36,6),bs(0,10,13,-6,0,20,31,3,0,8,38,7),bs(0,10,13,-6,0,21,33,3,0,8,40,7),bs(0,10,14,-6,0,22,35,3,0,8,42,7),bs(0,11,14,-7,0,23,36,3,0,9,44,8),bs(0,11,15,-7,0,24,38,3,0,9,46,8)],ws={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Cs={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ss(e){return`${Math.round(e)}ms`}function xs(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function ks(e){const t={...ws,...e.easing},i={...Cs,...e.duration};return{getAutoHeightDuration:xs,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=i.standard,easing:r=t.easeInOut,delay:o=0,...a}=n;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof s?s:Ss(s)} ${r} ${"string"===typeof o?o:Ss(o)}`)).join(",")},...e,easing:t,duration:i}}const Ls={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Es(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const i=Object.entries(t);for(let s=0;s<i.length;s++){const[r,o]=i[s];!_i(n=o)&&"undefined"!==typeof n&&"string"!==typeof n&&"boolean"!==typeof n&&"number"!==typeof n&&!Array.isArray(n)||r.startsWith("unstable_")?delete t[r]:_i(o)&&(t[r]={...o},e(t[r]))}var n}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function Ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:i={},spacing:n,palette:s={},transitions:r={},typography:o={},shape:a,...l}=e;if(e.vars)throw new Error(fi(20));const h=as(s),c=Mn(e);let d=bi(c,{mixins:fs(c.breakpoints,i),palette:h,shadows:ys.slice(),typography:vs(h,o),transitions:ks(r),zIndex:{...Ls}});d=bi(d,l);for(var u=arguments.length,g=new Array(u>1?u-1:0),p=1;p<u;p++)g[p-1]=arguments[p];return d=g.reduce(((e,t)=>bi(e,t)),d),d.unstable_sxConfig={...bn,...l?.unstable_sxConfig},d.unstable_sx=function(e){return wn({sx:e,theme:this})},d.toRuntimeSource=Es,d}const Ts=Ms;const Ds=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const i=function(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}(t);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`}));function Ns(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function Is(e){return"dark"===e?Ds:[]}function As(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Rs=e=>[...[...Array(25)].map(((t,i)=>`--${e?`${e}-`:""}overlays-${i}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Ps=e=>(t,i)=>{const n=e.rootSelector||":root",s=e.colorSchemeSelector;let r=s;if("class"===s&&(r=".%s"),"data"===s&&(r="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(r=`[${s}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const s={};return Rs(e.cssVarPrefix).forEach((e=>{s[e]=i[e],delete i[e]})),"media"===r?{[n]:i,"@media (prefers-color-scheme: dark)":{[n]:s}}:r?{[r.replace("%s",t)]:s,[`${n}, ${r.replace("%s",t)}`]:i}:{[n]:{...i,...s}}}if(r&&"media"!==r)return`${n}, ${r.replace("%s",String(t))}`}else if(t){if("media"===r)return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:i}};if(r)return r.replace("%s",String(t))}return n};function Os(e,t,i){!e[t]&&i&&(e[t]=i)}function Fs(e){return"string"===typeof e&&e.startsWith("hsl")?zn(e):e}function Bs(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Fn(Fs(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().\nTo suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const zs=e=>{try{return e()}catch(t){}},Vs=function(){return ls(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")};function Ws(e,t,i,n){if(!t)return;t=!0===t?{}:t;const s="dark"===n?"dark":"light";if(!i)return void(e[n]=function(e){const{palette:t={mode:"light"},opacity:i,overlays:n,...s}=e,r=as(t);return{palette:r,opacity:{...Ns(r.mode),...i},overlays:n||Is(r.mode),...s}}({...t,palette:{mode:s,...t?.palette}}));const{palette:r,...o}=Ts({...i,palette:{mode:s,...t?.palette}});return e[n]={...t,palette:r,opacity:{...Ns(s),...t?.opacity},overlays:t?.overlays||Is(s)},o}function Hs(e,t,i){e.colorSchemes&&i&&(e.colorSchemes[t]={...!0!==i&&i,palette:as({...!0===i?{}:i.palette,mode:t})})}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:i=!1,colorSchemes:n=(t?void 0:{light:!0}),defaultColorScheme:s=t?.mode,...r}=e,o=s||"light",a=n?.[o],l={...n,...t?{[o]:{..."boolean"!==typeof a&&a,palette:t}}:void 0};for(var h=arguments.length,c=new Array(h>1?h-1:0),d=1;d<h;d++)c[d-1]=arguments[d];if(!1===i){if(!("colorSchemes"in e))return Ts(e,...c);let i=t;"palette"in e||l[o]&&(!0!==l[o]?i=l[o].palette:"dark"===o&&(i={mode:"dark"}));const n=Ts({...e,palette:i},...c);return n.defaultColorScheme=o,n.colorSchemes=l,"light"===n.palette.mode&&(n.colorSchemes.light={...!0!==l.light&&l.light,palette:n.palette},Hs(n,"dark",l.dark)),"dark"===n.palette.mode&&(n.colorSchemes.dark={...!0!==l.dark&&l.dark,palette:n.palette},Hs(n,"light",l.light)),n}return t||"light"in l||"light"!==o||(l.light=!0),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:i,disableCssColorScheme:n=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:r=As,colorSchemeSelector:o=(t.light&&t.dark?"media":void 0),rootSelector:a=":root",...l}=e,h=Object.keys(t)[0],c=i||(t.light&&"light"!==h?"light":h),d=Vs(s),{[c]:u,light:g,dark:p,...f}=t,m={...f};let _=u;if(("dark"===c&&!("dark"in t)||"light"===c&&!("light"in t))&&(_=!0),!_)throw new Error(fi(21,c));const v=Ws(m,_,l,c);g&&!m.light&&Ws(m,g,void 0,"light"),p&&!m.dark&&Ws(m,p,void 0,"dark");let b={defaultColorScheme:c,...v,cssVarPrefix:s,colorSchemeSelector:o,rootSelector:a,getCssVar:d,colorSchemes:m,font:{...hs(v.typography),...v.font},spacing:(y=l.spacing,"number"===typeof y?`${y}px`:"string"===typeof y||"function"===typeof y||Array.isArray(y)?y:"8px")};var y;Object.keys(b.colorSchemes).forEach((e=>{const t=b.colorSchemes[e].palette,i=e=>{const i=e.split("-"),n=i[1],s=i[2];return d(e,t[n][s])};var n;if("light"===t.mode&&(Os(t.common,"background","#fff"),Os(t.common,"onBackground","#000")),"dark"===t.mode&&(Os(t.common,"background","#000"),Os(t.common,"onBackground","#fff")),n=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{n[e]||(n[e]={})})),"light"===t.mode){Os(t.Alert,"errorColor",jn(t.error.light,.6)),Os(t.Alert,"infoColor",jn(t.info.light,.6)),Os(t.Alert,"successColor",jn(t.success.light,.6)),Os(t.Alert,"warningColor",jn(t.warning.light,.6)),Os(t.Alert,"errorFilledBg",i("palette-error-main")),Os(t.Alert,"infoFilledBg",i("palette-info-main")),Os(t.Alert,"successFilledBg",i("palette-success-main")),Os(t.Alert,"warningFilledBg",i("palette-warning-main")),Os(t.Alert,"errorFilledColor",zs((()=>t.getContrastText(t.error.main)))),Os(t.Alert,"infoFilledColor",zs((()=>t.getContrastText(t.info.main)))),Os(t.Alert,"successFilledColor",zs((()=>t.getContrastText(t.success.main)))),Os(t.Alert,"warningFilledColor",zs((()=>t.getContrastText(t.warning.main)))),Os(t.Alert,"errorStandardBg",Kn(t.error.light,.9)),Os(t.Alert,"infoStandardBg",Kn(t.info.light,.9)),Os(t.Alert,"successStandardBg",Kn(t.success.light,.9)),Os(t.Alert,"warningStandardBg",Kn(t.warning.light,.9)),Os(t.Alert,"errorIconColor",i("palette-error-main")),Os(t.Alert,"infoIconColor",i("palette-info-main")),Os(t.Alert,"successIconColor",i("palette-success-main")),Os(t.Alert,"warningIconColor",i("palette-warning-main")),Os(t.AppBar,"defaultBg",i("palette-grey-100")),Os(t.Avatar,"defaultBg",i("palette-grey-400")),Os(t.Button,"inheritContainedBg",i("palette-grey-300")),Os(t.Button,"inheritContainedHoverBg",i("palette-grey-A100")),Os(t.Chip,"defaultBorder",i("palette-grey-400")),Os(t.Chip,"defaultAvatarColor",i("palette-grey-700")),Os(t.Chip,"defaultIconColor",i("palette-grey-700")),Os(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Os(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Os(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Os(t.LinearProgress,"primaryBg",Kn(t.primary.main,.62)),Os(t.LinearProgress,"secondaryBg",Kn(t.secondary.main,.62)),Os(t.LinearProgress,"errorBg",Kn(t.error.main,.62)),Os(t.LinearProgress,"infoBg",Kn(t.info.main,.62)),Os(t.LinearProgress,"successBg",Kn(t.success.main,.62)),Os(t.LinearProgress,"warningBg",Kn(t.warning.main,.62)),Os(t.Skeleton,"bg",`rgba(${i("palette-text-primaryChannel")} / 0.11)`),Os(t.Slider,"primaryTrack",Kn(t.primary.main,.62)),Os(t.Slider,"secondaryTrack",Kn(t.secondary.main,.62)),Os(t.Slider,"errorTrack",Kn(t.error.main,.62)),Os(t.Slider,"infoTrack",Kn(t.info.main,.62)),Os(t.Slider,"successTrack",Kn(t.success.main,.62)),Os(t.Slider,"warningTrack",Kn(t.warning.main,.62));const e=$n(t.background.default,.8);Os(t.SnackbarContent,"bg",e),Os(t.SnackbarContent,"color",zs((()=>t.getContrastText(e)))),Os(t.SpeedDialAction,"fabHoverBg",$n(t.background.paper,.15)),Os(t.StepConnector,"border",i("palette-grey-400")),Os(t.StepContent,"border",i("palette-grey-400")),Os(t.Switch,"defaultColor",i("palette-common-white")),Os(t.Switch,"defaultDisabledColor",i("palette-grey-100")),Os(t.Switch,"primaryDisabledColor",Kn(t.primary.main,.62)),Os(t.Switch,"secondaryDisabledColor",Kn(t.secondary.main,.62)),Os(t.Switch,"errorDisabledColor",Kn(t.error.main,.62)),Os(t.Switch,"infoDisabledColor",Kn(t.info.main,.62)),Os(t.Switch,"successDisabledColor",Kn(t.success.main,.62)),Os(t.Switch,"warningDisabledColor",Kn(t.warning.main,.62)),Os(t.TableCell,"border",Kn(Hn(t.divider,1),.88)),Os(t.Tooltip,"bg",Hn(t.grey[700],.92))}if("dark"===t.mode){Os(t.Alert,"errorColor",Kn(t.error.light,.6)),Os(t.Alert,"infoColor",Kn(t.info.light,.6)),Os(t.Alert,"successColor",Kn(t.success.light,.6)),Os(t.Alert,"warningColor",Kn(t.warning.light,.6)),Os(t.Alert,"errorFilledBg",i("palette-error-dark")),Os(t.Alert,"infoFilledBg",i("palette-info-dark")),Os(t.Alert,"successFilledBg",i("palette-success-dark")),Os(t.Alert,"warningFilledBg",i("palette-warning-dark")),Os(t.Alert,"errorFilledColor",zs((()=>t.getContrastText(t.error.dark)))),Os(t.Alert,"infoFilledColor",zs((()=>t.getContrastText(t.info.dark)))),Os(t.Alert,"successFilledColor",zs((()=>t.getContrastText(t.success.dark)))),Os(t.Alert,"warningFilledColor",zs((()=>t.getContrastText(t.warning.dark)))),Os(t.Alert,"errorStandardBg",jn(t.error.light,.9)),Os(t.Alert,"infoStandardBg",jn(t.info.light,.9)),Os(t.Alert,"successStandardBg",jn(t.success.light,.9)),Os(t.Alert,"warningStandardBg",jn(t.warning.light,.9)),Os(t.Alert,"errorIconColor",i("palette-error-main")),Os(t.Alert,"infoIconColor",i("palette-info-main")),Os(t.Alert,"successIconColor",i("palette-success-main")),Os(t.Alert,"warningIconColor",i("palette-warning-main")),Os(t.AppBar,"defaultBg",i("palette-grey-900")),Os(t.AppBar,"darkBg",i("palette-background-paper")),Os(t.AppBar,"darkColor",i("palette-text-primary")),Os(t.Avatar,"defaultBg",i("palette-grey-600")),Os(t.Button,"inheritContainedBg",i("palette-grey-800")),Os(t.Button,"inheritContainedHoverBg",i("palette-grey-700")),Os(t.Chip,"defaultBorder",i("palette-grey-700")),Os(t.Chip,"defaultAvatarColor",i("palette-grey-300")),Os(t.Chip,"defaultIconColor",i("palette-grey-300")),Os(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Os(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Os(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Os(t.LinearProgress,"primaryBg",jn(t.primary.main,.5)),Os(t.LinearProgress,"secondaryBg",jn(t.secondary.main,.5)),Os(t.LinearProgress,"errorBg",jn(t.error.main,.5)),Os(t.LinearProgress,"infoBg",jn(t.info.main,.5)),Os(t.LinearProgress,"successBg",jn(t.success.main,.5)),Os(t.LinearProgress,"warningBg",jn(t.warning.main,.5)),Os(t.Skeleton,"bg",`rgba(${i("palette-text-primaryChannel")} / 0.13)`),Os(t.Slider,"primaryTrack",jn(t.primary.main,.5)),Os(t.Slider,"secondaryTrack",jn(t.secondary.main,.5)),Os(t.Slider,"errorTrack",jn(t.error.main,.5)),Os(t.Slider,"infoTrack",jn(t.info.main,.5)),Os(t.Slider,"successTrack",jn(t.success.main,.5)),Os(t.Slider,"warningTrack",jn(t.warning.main,.5));const e=$n(t.background.default,.98);Os(t.SnackbarContent,"bg",e),Os(t.SnackbarContent,"color",zs((()=>t.getContrastText(e)))),Os(t.SpeedDialAction,"fabHoverBg",$n(t.background.paper,.15)),Os(t.StepConnector,"border",i("palette-grey-600")),Os(t.StepContent,"border",i("palette-grey-600")),Os(t.Switch,"defaultColor",i("palette-grey-300")),Os(t.Switch,"defaultDisabledColor",i("palette-grey-600")),Os(t.Switch,"primaryDisabledColor",jn(t.primary.main,.55)),Os(t.Switch,"secondaryDisabledColor",jn(t.secondary.main,.55)),Os(t.Switch,"errorDisabledColor",jn(t.error.main,.55)),Os(t.Switch,"infoDisabledColor",jn(t.info.main,.55)),Os(t.Switch,"successDisabledColor",jn(t.success.main,.55)),Os(t.Switch,"warningDisabledColor",jn(t.warning.main,.55)),Os(t.TableCell,"border",jn(Hn(t.divider,1),.68)),Os(t.Tooltip,"bg",Hn(t.grey[700],.92))}Bs(t.background,"default"),Bs(t.background,"paper"),Bs(t.common,"background"),Bs(t.common,"onBackground"),Bs(t,"divider"),Object.keys(t).forEach((e=>{const i=t[e];"tonalOffset"!==e&&i&&"object"===typeof i&&(i.main&&Os(t[e],"mainChannel",Fn(Fs(i.main))),i.light&&Os(t[e],"lightChannel",Fn(Fs(i.light))),i.dark&&Os(t[e],"darkChannel",Fn(Fs(i.dark))),i.contrastText&&Os(t[e],"contrastTextChannel",Fn(Fs(i.contrastText))),"text"===e&&(Bs(t[e],"primary"),Bs(t[e],"secondary")),"action"===e&&(i.active&&Bs(t[e],"active"),i.selected&&Bs(t[e],"selected")))}))}));for(var w=arguments.length,C=new Array(w>1?w-1:0),S=1;S<w;S++)C[S-1]=arguments[S];b=C.reduce(((e,t)=>bi(e,t)),b);const x={prefix:s,disableCssColorScheme:n,shouldSkipGeneratingVar:r,getSelector:Ps(b)},{vars:k,generateThemeVars:L,generateStyleSheets:E}=ps(b,x);return b.vars=k,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach((e=>{let[t,i]=e;b[t]=i})),b.generateThemeVars=L,b.generateStyleSheets=E,b.generateSpacing=function(){return Ln(l.spacing,Bi(this))},b.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(o),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=r,b.unstable_sxConfig={...bn,...l?.unstable_sxConfig},b.unstable_sx=function(e){return wn({sx:e,theme:this})},b.toRuntimeSource=Es,b}({...r,colorSchemes:l,defaultColorScheme:o,..."boolean"!==typeof i&&i},...c)}const js="$$material",Gs={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ks(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const n=Gs[t];return n?`${i}-${n}`:`${An.generate(e)}-${t}`}function $s(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const n={};return t.forEach((t=>{n[t]=Ks(e,t,i)})),n}const qs=$s("MuiBox",["root"]),Qs=Us(),Xs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:i,defaultClassName:n="MuiBox-root",generateClassName:r}=e,o=ui("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(wn);return s.forwardRef((function(e,s){const a=Nn(i),{className:l,component:h="div",...c}=Sn(e);return(0,De.jsx)(o,{as:h,ref:s,className:Re(l,r?r(n):n),theme:t&&a[t]||a,...c})}))}({themeId:js,defaultTheme:Qs,defaultClassName:qs.root,generateClassName:An.generate}),Ys=Xs;function Zs(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n={};for(const s in e){const r=e[s];let o="",a=!0;for(let e=0;e<r.length;e+=1){const n=r[e];n&&(o+=(!0===a?"":" ")+t(n),a=!1,i&&i[n]&&(o+=" "+i[n]))}n[s]=o}return n}function Js(e){const{variants:t,...i}=e,n={variants:t,style:pi(i),isProcessed:!0};return n.style===i||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=pi(e.style))})),n}const er=Mn();function tr(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function ir(e){return e?(t,i)=>i[e]:null}function nr(e,t){const i="function"===typeof t?t(e):t;if(Array.isArray(i))return i.flatMap((t=>nr(e,t)));if(Array.isArray(i?.variants)){let t;if(i.isProcessed)t=i.style;else{const{variants:e,...n}=i;t=n}return sr(e,i.variants,[t])}return i?.isProcessed?i.style:i}function sr(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let s=0;s<t.length;s+=1){const r=t[s];if("function"===typeof r.props){if(i??={...e,...e.ownerState,ownerState:e.ownerState},!r.props(i))continue}else for(const t in r.props)if(e[t]!==r.props[t]&&e.ownerState?.[t]!==r.props[t])continue e;"function"===typeof r.style?(i??={...e,...e.ownerState,ownerState:e.ownerState},n.push(r.style(i))):n.push(r.style)}return n}function rr(e,t){}function or(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const ar=Us();const lr=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},hr=e=>lr(e)&&"classes"!==e,cr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:i=er,rootShouldForwardProp:n=tr,slotShouldForwardProp:s=tr}=e;function r(e){!function(e,t,i){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?i:e.theme[t]||e.theme}(e,t,i)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==wn))));const{name:i,slot:o,skipVariantsResolver:a,skipSx:l,overridesResolver:h=ir(or(o)),...c}=t,d=void 0!==a?a:o&&"Root"!==o&&"root"!==o||!1,u=l||!1;let g=tr;"Root"===o||"root"===o?g=n:o?g=s:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(g=void 0);const p=ui(e,{shouldForwardProp:g,label:rr(i,o),...c}),f=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return nr(t,e)};if(_i(e)){const t=Js(e);return t.variants?function(e){return nr(e,t)}:t.style}return e},m=function(){const t=[];for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];const a=s.map(f),l=[];if(t.push(r),i&&h&&l.push((function(e){const t=e.theme,n=t.components?.[i]?.styleOverrides;if(!n)return null;const s={};for(const i in n)s[i]=nr(e,n[i]);return h(e,s)})),i&&!d&&l.push((function(e){const t=e.theme,n=t?.components?.[i]?.variants;return n?sr(e,n):null})),u||l.push(wn),Array.isArray(a[0])){const e=a.shift(),i=new Array(t.length).fill(""),n=new Array(l.length).fill("");let s;s=[...i,...e,...n],s.raw=[...i,...e.raw,...n],t.unshift(s)}const c=[...t,...a,...l],g=p(...c);return e.muiName&&(g.muiName=e.muiName),g};return p.withConfig&&(m.withConfig=p.withConfig),m}}({themeId:js,defaultTheme:ar,rootShouldForwardProp:hr}),dr=cr;function ur(e,t){const i={...t};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const s=n;if("components"===s||"slots"===s)i[s]={...e[s],...i[s]};else if("componentsProps"===s||"slotProps"===s){const n=e[s],r=t[s];if(r)if(n){i[s]={...r};for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=e;i[s][t]=ur(n[t],r[t])}}else i[s]=r;else i[s]=n||{}}else void 0===i[s]&&(i[s]=e[s])}return i}const gr=s.createContext(void 0);function pr(e){let{props:t,name:i}=e;return function(e){const{theme:t,name:i,props:n}=e;if(!t||!t.components||!t.components[i])return n;const s=t.components[i];return s.defaultProps?ur(s.defaultProps,n):s.styleOverrides||s.variants?n:ur(s,n)}({props:t,name:i,theme:{components:s.useContext(gr)}})}function fr(e){return pr(e)}const mr=s.createContext({});function _r(e){return Ks("MuiList",e)}$s("MuiList",["root","padding","dense","subheader"]);const vr=dr("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,!i.disablePadding&&t.padding,i.dense&&t.dense,i.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),br=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiList"}),{children:n,className:r,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:h,...c}=i,d=s.useMemo((()=>({dense:a})),[a]),u={...i,component:o,dense:a,disablePadding:l},g=(e=>{const{classes:t,disablePadding:i,dense:n,subheader:s}=e;return Zs({root:["root",!i&&"padding",n&&"dense",s&&"subheader"]},_r,t)})(u);return(0,De.jsx)(mr.Provider,{value:d,children:(0,De.jsxs)(vr,{as:o,className:Re(g.root,r),ref:t,ownerState:u,...c,children:[h,n]})})}));const yr=function(e){return"string"===typeof e},wr={theme:void 0};const Cr=function(e){let t,i;return function(n){let s=t;return void 0!==s&&n.theme===i||(wr.theme=n.theme,s=Js(e(wr)),t=s,i=n.theme),s}};const Sr=function(e,t){return s.isValidElement(e)&&-1!==t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)};function xr(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{!function(e,t){"function"===typeof e?e(t):e&&(e.current=t)}(t,e)}))}),t)}const kr=xr;function Lr(e){return Ks("MuiListItem",e)}$s("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Er(e){return Ks("MuiListItemButton",e)}const Mr=$s("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Tr(e){return Ks("MuiListItemSecondaryAction",e)}$s("MuiListItemSecondaryAction",["root","disableGutters"]);const Dr=dr("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:e=>{let{ownerState:t}=e;return t.disableGutters},style:{right:0}}]}),Nr=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiListItemSecondaryAction"}),{className:n,...r}=i,o=s.useContext(mr),a={...i,disableGutters:o.disableGutters},l=(e=>{const{disableGutters:t,classes:i}=e;return Zs({root:["root",t&&"disableGutters"]},Tr,i)})(a);return(0,De.jsx)(Dr,{className:Re(l.root,n),ownerState:a,ref:t,...r})}));Nr.muiName="ListItemSecondaryAction";const Ir=Nr,Ar=dr("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.dense&&t.dense,"flex-start"===i.alignItems&&t.alignItemsFlexStart,i.divider&&t.divider,!i.disableGutters&&t.gutters,!i.disablePadding&&t.padding,i.hasSecondaryAction&&t.secondaryAction]}})(Cr((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&t.dense},style:{paddingTop:4,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!!t.secondaryAction},style:{paddingRight:48}},{props:e=>{let{ownerState:t}=e;return!!t.secondaryAction},style:{[`& > .${Mr.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return t.button},style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:e=>{let{ownerState:t}=e;return t.hasSecondaryAction},style:{paddingRight:48}}]}}))),Rr=dr("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Pr=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiListItem"}),{alignItems:n="center",children:r,className:o,component:a,components:l={},componentsProps:h={},ContainerComponent:c="li",ContainerProps:{className:d,...u}={},dense:g=!1,disableGutters:p=!1,disablePadding:f=!1,divider:m=!1,secondaryAction:_,slotProps:v={},slots:b={},...y}=i,w=s.useContext(mr),C=s.useMemo((()=>({dense:g||w.dense||!1,alignItems:n,disableGutters:p})),[n,w.dense,g,p]),S=s.useRef(null),x=s.Children.toArray(r),k=x.length&&Sr(x[x.length-1],["ListItemSecondaryAction"]),L={...i,alignItems:n,dense:C.dense,disableGutters:p,disablePadding:f,divider:m,hasSecondaryAction:k},E=(e=>{const{alignItems:t,classes:i,dense:n,disableGutters:s,disablePadding:r,divider:o,hasSecondaryAction:a}=e;return Zs({root:["root",n&&"dense",!s&&"gutters",!r&&"padding",o&&"divider","flex-start"===t&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},Lr,i)})(L),M=kr(S,t),T=b.root||l.Root||Ar,D=v.root||h.root||{},N={className:Re(E.root,D.className,o),...y};let I=a||"li";return k?(I=N.component||a?I:"div","li"===c&&("li"===I?I="div":"li"===N.component&&(N.component="div")),(0,De.jsx)(mr.Provider,{value:C,children:(0,De.jsxs)(Rr,{as:c,className:Re(E.container,d),ref:M,ownerState:L,...u,children:[(0,De.jsx)(T,{...D,...!yr(T)&&{as:I,ownerState:{...L,...D.ownerState}},...N,children:x}),x.pop()]})})):(0,De.jsx)(mr.Provider,{value:C,children:(0,De.jsxs)(T,{...D,as:I,ref:M,...!yr(T)&&{ownerState:{...L,...D.ownerState}},...N,children:[x,_&&(0,De.jsx)(Ir,{children:_})]})})}));function Or(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}const Fr="undefined"!==typeof window?s.useLayoutEffect:s.useEffect;const Br=function(e){const t=s.useRef(e);return Fr((()=>{t.current=e})),s.useRef((function(){return(0,t.current)(...arguments)})).current},zr={};function Vr(e,t){const i=s.useRef(zr);return i.current===zr&&(i.current=e(t)),i}class Wr{static create(){return new Wr}static use(){const e=Vr(Wr.create).current,[t,i]=s.useState(!1);return e.shouldMount=t,e.setShouldMount=i,s.useEffect(e.mountEffect,[t]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const i=new Promise(((i,n)=>{e=i,t=n}));return i.resolve=e,i.reject=t,i}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())};start(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.mount().then((()=>this.ref.current?.start(...t)))}stop(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.mount().then((()=>this.ref.current?.stop(...t)))}pulsate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.mount().then((()=>this.ref.current?.pulsate(...t)))}}function Hr(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;i[n]=e[n]}return i}function Ur(e,t){return Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ur(e,t)}function jr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ur(e,t)}const Gr=s.createContext(null);function Kr(e,t){var i=Object.create(null);return e&&s.Children.map(e,(function(e){return e})).forEach((function(e){i[e.key]=function(e){return t&&(0,s.isValidElement)(e)?t(e):e}(e)})),i}function $r(e,t,i){return null!=i[t]?i[t]:e.props[t]}function qr(e,t,i){var n=Kr(e.children),r=function(e,t){function i(i){return i in t?t[i]:e[i]}e=e||{},t=t||{};var n,s=Object.create(null),r=[];for(var o in e)o in t?r.length&&(s[o]=r,r=[]):r.push(o);var a={};for(var l in t){if(s[l])for(n=0;n<s[l].length;n++){var h=s[l][n];a[s[l][n]]=i(h)}a[l]=i(l)}for(n=0;n<r.length;n++)a[r[n]]=i(r[n]);return a}(t,n);return Object.keys(r).forEach((function(o){var a=r[o];if((0,s.isValidElement)(a)){var l=o in t,h=o in n,c=t[o],d=(0,s.isValidElement)(c)&&!c.props.in;!h||l&&!d?h||!l||d?h&&l&&(0,s.isValidElement)(c)&&(r[o]=(0,s.cloneElement)(a,{onExited:i.bind(null,a),in:c.props.in,exit:$r(a,"exit",e),enter:$r(a,"enter",e)})):r[o]=(0,s.cloneElement)(a,{in:!1}):r[o]=(0,s.cloneElement)(a,{onExited:i.bind(null,a),in:!0,exit:$r(a,"exit",e),enter:$r(a,"enter",e)})}})),r}var Qr=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Xr=function(e){function t(t,i){var n,s=(n=e.call(this,t,i)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},n}jr(t,e);var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var i,n,r=t.children,o=t.handleExited;return{children:t.firstRender?(i=e,n=o,Kr(i.children,(function(e){return(0,s.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:$r(e,"appear",i),enter:$r(e,"enter",i),exit:$r(e,"exit",i)})}))):qr(e,r,o),firstRender:!1}},i.handleExited=function(e,t){var i=Kr(this.props.children);e.key in i||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var i=Pe({},t.children);return delete i[e.key],{children:i}})))},i.render=function(){var e=this.props,t=e.component,i=e.childFactory,n=Hr(e,["component","childFactory"]),r=this.state.contextValue,o=Qr(this.state.children).map(i);return delete n.appear,delete n.enter,delete n.exit,null===t?s.createElement(Gr.Provider,{value:r},o):s.createElement(Gr.Provider,{value:r},s.createElement(t,n,o))},t}(s.Component);Xr.propTypes={},Xr.defaultProps={component:"div",childFactory:function(e){return e}};const Yr=Xr,Zr=[];class Jr{static create(){return new Jr}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function eo(){const e=Vr(Jr.create).current;var t;return t=e.disposeEffect,s.useEffect(t,Zr),e}i(219);function to(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Jt(t)}var io=function(){var e=to.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const no=function(e){const{className:t,classes:i,pulsate:n=!1,rippleX:r,rippleY:o,rippleSize:a,in:l,onExited:h,timeout:c}=e,[d,u]=s.useState(!1),g=Re(t,i.ripple,i.rippleVisible,n&&i.ripplePulsate),p={width:a,height:a,top:-a/2+o,left:-a/2+r},f=Re(i.child,d&&i.childLeaving,n&&i.childPulsate);return l||d||u(!0),s.useEffect((()=>{if(!l&&null!=h){const e=setTimeout(h,c);return()=>{clearTimeout(e)}}}),[h,l,c]),(0,De.jsx)("span",{className:g,style:p,children:(0,De.jsx)("span",{className:f})})};const so=$s("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ro=io`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,oo=io`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,ao=io`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,lo=dr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ho=dr(no,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${so.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${ro};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  &.${so.ripplePulsate} {
    animation-duration: ${e=>{let{theme:t}=e;return t.transitions.duration.shorter}}ms;
  }

  & .${so.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${so.childLeaving} {
    opacity: 0;
    animation-name: ${oo};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  & .${so.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${ao};
    animation-duration: 2500ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,co=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiTouchRipple"}),{center:n=!1,classes:r={},className:o,...a}=i,[l,h]=s.useState([]),c=s.useRef(0),d=s.useRef(null);s.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const u=s.useRef(!1),g=eo(),p=s.useRef(null),f=s.useRef(null),m=s.useCallback((e=>{const{pulsate:t,rippleX:i,rippleY:n,rippleSize:s,cb:o}=e;h((e=>[...e,(0,De.jsx)(ho,{classes:{ripple:Re(r.ripple,so.ripple),rippleVisible:Re(r.rippleVisible,so.rippleVisible),ripplePulsate:Re(r.ripplePulsate,so.ripplePulsate),child:Re(r.child,so.child),childLeaving:Re(r.childLeaving,so.childLeaving),childPulsate:Re(r.childPulsate,so.childPulsate)},timeout:550,pulsate:t,rippleX:i,rippleY:n,rippleSize:s},c.current)])),c.current+=1,d.current=o}),[r]),_=s.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:s=!1,center:r=n||t.pulsate,fakeElement:o=!1}=t;if("mousedown"===e?.type&&u.current)return void(u.current=!1);"touchstart"===e?.type&&(u.current=!0);const a=o?null:f.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let h,c,d;if(r||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)h=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:t,clientY:i}=e.touches&&e.touches.length>0?e.touches[0]:e;h=Math.round(t-l.left),c=Math.round(i-l.top)}if(r)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-h),h)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-c),c)+2;d=Math.sqrt(e**2+t**2)}e?.touches?null===p.current&&(p.current=()=>{m({pulsate:s,rippleX:h,rippleY:c,rippleSize:d,cb:i})},g.start(80,(()=>{p.current&&(p.current(),p.current=null)}))):m({pulsate:s,rippleX:h,rippleY:c,rippleSize:d,cb:i})}),[n,m,g]),v=s.useCallback((()=>{_({},{pulsate:!0})}),[_]),b=s.useCallback(((e,t)=>{if(g.clear(),"touchend"===e?.type&&p.current)return p.current(),p.current=null,void g.start(0,(()=>{b(e,t)}));p.current=null,h((e=>e.length>0?e.slice(1):e)),d.current=t}),[g]);return s.useImperativeHandle(t,(()=>({pulsate:v,start:_,stop:b})),[v,_,b]),(0,De.jsx)(lo,{className:Re(so.root,r.root,o),ref:f,...a,children:(0,De.jsx)(Yr,{component:null,exit:!0,children:l})})})),uo=co;function go(e){return Ks("MuiButtonBase",e)}const po=$s("MuiButtonBase",["root","disabled","focusVisible"]),fo=dr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${po.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});function mo(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Br((s=>(i&&i(s),n||e[t](s),!0)))}const _o=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiButtonBase"}),{action:n,centerRipple:r=!1,children:o,className:a,component:l="button",disabled:h=!1,disableRipple:c=!1,disableTouchRipple:d=!1,focusRipple:u=!1,focusVisibleClassName:g,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:_,onDragLeave:v,onFocus:b,onFocusVisible:y,onKeyDown:w,onKeyUp:C,onMouseDown:S,onMouseLeave:x,onMouseUp:k,onTouchEnd:L,onTouchMove:E,onTouchStart:M,tabIndex:T=0,TouchRippleProps:D,touchRippleRef:N,type:I,...A}=i,R=s.useRef(null),P=Wr.use(),O=kr(P.ref,N),[F,B]=s.useState(!1);h&&F&&B(!1),s.useImperativeHandle(n,(()=>({focusVisible:()=>{B(!0),R.current.focus()}})),[]);const z=P.shouldMount&&!c&&!h;s.useEffect((()=>{F&&u&&!c&&P.pulsate()}),[c,u,F,P]);const V=mo(P,"start",S,d),W=mo(P,"stop",_,d),H=mo(P,"stop",v,d),U=mo(P,"stop",k,d),j=mo(P,"stop",(e=>{F&&e.preventDefault(),x&&x(e)}),d),G=mo(P,"start",M,d),K=mo(P,"stop",L,d),$=mo(P,"stop",E,d),q=mo(P,"stop",(e=>{Or(e.target)||B(!1),f&&f(e)}),!1),Q=Br((e=>{R.current||(R.current=e.currentTarget),Or(e.target)&&(B(!0),y&&y(e)),b&&b(e)})),X=()=>{const e=R.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},Y=Br((e=>{u&&!e.repeat&&F&&" "===e.key&&P.stop(e,(()=>{P.start(e)})),e.target===e.currentTarget&&X()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&X()&&"Enter"===e.key&&!h&&(e.preventDefault(),m&&m(e))})),Z=Br((e=>{u&&" "===e.key&&F&&!e.defaultPrevented&&P.stop(e,(()=>{P.pulsate(e)})),C&&C(e),m&&e.target===e.currentTarget&&X()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let J=l;"button"===J&&(A.href||A.to)&&(J=p);const ee={};"button"===J?(ee.type=void 0===I?"button":I,ee.disabled=h):(A.href||A.to||(ee.role="button"),h&&(ee["aria-disabled"]=h));const te=kr(t,R),ie={...i,centerRipple:r,component:l,disabled:h,disableRipple:c,disableTouchRipple:d,focusRipple:u,tabIndex:T,focusVisible:F},ne=(e=>{const{disabled:t,focusVisible:i,focusVisibleClassName:n,classes:s}=e,r=Zs({root:["root",t&&"disabled",i&&"focusVisible"]},go,s);return i&&n&&(r.root+=` ${n}`),r})(ie);return(0,De.jsxs)(fo,{as:J,className:Re(ne.root,a),ownerState:ie,onBlur:q,onClick:m,onContextMenu:W,onFocus:Q,onKeyDown:Y,onKeyUp:Z,onMouseDown:V,onMouseLeave:j,onMouseUp:U,onDragLeave:H,onTouchEnd:K,onTouchMove:$,onTouchStart:G,ref:te,tabIndex:h?-1:T,type:I,...ee,...A,children:[o,z?(0,De.jsx)(uo,{ref:O,center:r,...D}):null]})})),vo=Fr,bo=dr(_o,{shouldForwardProp:e=>hr(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.dense&&t.dense,"flex-start"===i.alignItems&&t.alignItemsFlexStart,i.divider&&t.divider,!i.disableGutters&&t.gutters]}})(Cr((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Mr.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Wn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Mr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Wn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Mr.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Wn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Wn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Mr.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Mr.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{paddingTop:4,paddingBottom:4}}]}}))),yo=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:r=!1,component:o="div",children:a,dense:l=!1,disableGutters:h=!1,divider:c=!1,focusVisibleClassName:d,selected:u=!1,className:g,...p}=i,f=s.useContext(mr),m=s.useMemo((()=>({dense:l||f.dense||!1,alignItems:n,disableGutters:h})),[n,f.dense,l,h]),_=s.useRef(null);vo((()=>{r&&_.current&&_.current.focus()}),[r]);const v={...i,alignItems:n,dense:m.dense,disableGutters:h,divider:c,selected:u},b=(e=>{const{alignItems:t,classes:i,dense:n,disabled:s,disableGutters:r,divider:o,selected:a}=e,l=Zs({root:["root",n&&"dense",!r&&"gutters",o&&"divider",s&&"disabled","flex-start"===t&&"alignItemsFlexStart",a&&"selected"]},Er,i);return{...i,...l}})(v),y=kr(_,t);return(0,De.jsx)(mr.Provider,{value:m,children:(0,De.jsx)(bo,{ref:y,href:p.href||p.to,component:(p.href||p.to)&&"div"===o?"button":o,focusVisibleClassName:Re(b.focusVisible,d),ownerState:v,className:Re(b.root,g),...p,classes:b,children:a})})}));function wo(e){return Ks("MuiListItemIcon",e)}$s("MuiListItemIcon",["root","alignItemsFlexStart"]);const Co=dr("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,"flex-start"===i.alignItems&&t.alignItemsFlexStart]}})(Cr((e=>{let{theme:t}=e;return{minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}}))),So=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiListItemIcon"}),{className:n,...r}=i,o=s.useContext(mr),a={...i,alignItems:o.alignItems},l=(e=>{const{alignItems:t,classes:i}=e;return Zs({root:["root","flex-start"===t&&"alignItemsFlexStart"]},wo,i)})(a);return(0,De.jsx)(Co,{className:Re(l.root,n),ownerState:a,ref:t,...r})}));function xo(e){return Ks("MuiTypography",e)}const ko=$s("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Lo=mi;function Eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,i]=t;return i&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const i of t)if(!e.hasOwnProperty(i)||"string"!==typeof e[i])return!1;return!0}(i,e)}}const Mo={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},To=Sn,Do=dr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.variant&&t[i.variant],"inherit"!==i.align&&t[`align${Lo(i.align)}`],i.noWrap&&t.noWrap,i.gutterBottom&&t.gutterBottom,i.paragraph&&t.paragraph]}})(Cr((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,i]=e;return"inherit"!==t&&i&&"object"===typeof i})).map((e=>{let[t,i]=e;return{props:{variant:t},style:i}})),...Object.entries(t.palette).filter(Eo()).map((e=>{let[i]=e;return{props:{color:i},style:{color:(t.vars||t).palette[i].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[i]=e;return{props:{color:`text${Lo(i)}`},style:{color:(t.vars||t).palette.text[i]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),No={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Io=s.forwardRef((function(e,t){const{color:i,...n}=fr({props:e,name:"MuiTypography"}),s=To({...n,...!Mo[i]&&{color:i}}),{align:r="inherit",className:o,component:a,gutterBottom:l=!1,noWrap:h=!1,paragraph:c=!1,variant:d="body1",variantMapping:u=No,...g}=s,p={...s,align:r,color:i,className:o,component:a,gutterBottom:l,noWrap:h,paragraph:c,variant:d,variantMapping:u},f=a||(c?"p":u[d]||No[d])||"span",m=(e=>{const{align:t,gutterBottom:i,noWrap:n,paragraph:s,variant:r,classes:o}=e;return Zs({root:["root",r,"inherit"!==e.align&&`align${Lo(t)}`,i&&"gutterBottom",n&&"noWrap",s&&"paragraph"]},xo,o)})(p);return(0,De.jsx)(Do,{as:f,ref:t,className:Re(m.root,o),...g,ownerState:p,style:{..."inherit"!==r&&{"--Typography-textAlign":r},...g.style}})})),Ao=Io;function Ro(e){return Ks("MuiListItemText",e)}const Po=$s("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);const Oo=function(e){return"string"===typeof e};const Fo=function(e,t,i){return void 0===e||Oo(e)?t:{...t,ownerState:{...t.ownerState,...i}}};const Bo=function(e,t,i){return"function"===typeof e?e(t,i):e};const zo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const i={};return Object.keys(e).filter((i=>i.match(/^on[A-Z]/)&&"function"===typeof e[i]&&!t.includes(i))).forEach((t=>{i[t]=e[t]})),i};const Vo=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((i=>{t[i]=e[i]})),t};const Wo=function(e){const{getSlotProps:t,additionalProps:i,externalSlotProps:n,externalForwardedProps:s,className:r}=e;if(!t){const e=Re(i?.className,r,s?.className,n?.className),t={...i?.style,...s?.style,...n?.style},o={...i,...s,...n};return e.length>0&&(o.className=e),Object.keys(t).length>0&&(o.style=t),{props:o,internalRef:void 0}}const o=zo({...s,...n}),a=Vo(n),l=Vo(s),h=t(o),c=Re(h?.className,i?.className,r,s?.className,n?.className),d={...h?.style,...i?.style,...s?.style,...n?.style},u={...h,...i,...l,...a};return c.length>0&&(u.className=c),Object.keys(d).length>0&&(u.style=d),{props:u,internalRef:h.ref}};function Ho(e,t){const{className:i,elementType:n,ownerState:s,externalForwardedProps:r,internalForwardedProps:o,...a}=t,{component:l,slots:h={[e]:void 0},slotProps:c={[e]:void 0},...d}=r,u=h[e]||n,g=Bo(c[e],s),{props:{component:p,...f},internalRef:m}=Wo({className:i,...a,externalForwardedProps:"root"===e?d:void 0,externalSlotProps:g}),_=xr(m,g?.ref,t.ref),v="root"===e?p||l:p;return[u,Fo(u,{..."root"===e&&!l&&!h[e]&&o,..."root"!==e&&!h[e]&&o,...f,...v&&{as:v},ref:_},s)]}const Uo=dr("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`& .${Po.primary}`]:t.primary},{[`& .${Po.secondary}`]:t.secondary},t.root,i.inset&&t.inset,i.primary&&i.secondary&&t.multiline,i.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${ko.root}:where(& .${Po.primary})`]:{display:"block"},[`.${ko.root}:where(& .${Po.secondary})`]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),jo=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiListItemText"}),{children:n,className:r,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:h,secondary:c,secondaryTypographyProps:d,slots:u={},slotProps:g={},...p}=i,{dense:f}=s.useContext(mr);let m=null!=l?l:n,_=c;const v={...i,disableTypography:o,inset:a,primary:!!m,secondary:!!_,dense:f},b=(e=>{const{classes:t,inset:i,primary:n,secondary:s,dense:r}=e;return Zs({root:["root",i&&"inset",r&&"dense",n&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},Ro,t)})(v),y={slots:u,slotProps:{primary:h,secondary:d,...g}},[w,C]=Ho("primary",{className:b.primary,elementType:Ao,externalForwardedProps:y,ownerState:v}),[S,x]=Ho("secondary",{className:b.secondary,elementType:Ao,externalForwardedProps:y,ownerState:v});return null==m||m.type===Ao||o||(m=(0,De.jsx)(w,{variant:f?"body2":"body1",component:C?.variant?void 0:"span",...C,children:m})),null==_||_.type===Ao||o||(_=(0,De.jsx)(S,{variant:"body2",color:"textSecondary",...x,children:_})),(0,De.jsxs)(Uo,{className:Re(b.root,r),ownerState:v,ref:t,...p,children:[m,_]})})),Go=!1;var Ko="unmounted",$o="exited",qo="entering",Qo="entered",Xo="exiting",Yo=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var s,r=i&&!i.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?r?(s=$o,n.appearStatus=qo):s=Qo:s=t.unmountOnExit||t.mountOnEnter?Ko:$o,n.state={status:s},n.nextCallback=null,n}jr(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ko?{status:$o}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==qo&&i!==Qo&&(t=qo):i!==qo&&i!==Qo||(t=Xo)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,n=this.props.timeout;return e=t=i=n,null!=n&&"number"!==typeof n&&(e=n.exit,t=n.enter,i=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===qo){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);i&&function(e){e.scrollTop}(i)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===$o&&this.setState({status:Ko})},i.performEnter=function(e){var t=this,i=this.props.enter,n=this.context?this.context.isMounting:e,s=this.props.nodeRef?[n]:[a.findDOMNode(this),n],r=s[0],o=s[1],l=this.getTimeouts(),h=n?l.appear:l.enter;!e&&!i||Go?this.safeSetState({status:Qo},(function(){t.props.onEntered(r)})):(this.props.onEnter(r,o),this.safeSetState({status:qo},(function(){t.props.onEntering(r,o),t.onTransitionEnd(h,(function(){t.safeSetState({status:Qo},(function(){t.props.onEntered(r,o)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),n=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!Go?(this.props.onExit(n),this.safeSetState({status:Xo},(function(){e.props.onExiting(n),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:$o},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:$o},(function(){e.props.onExited(n)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(n){i&&(i=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(i&&!n){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],r=s[0],o=s[1];this.props.addEndListener(r,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===Ko)return null;var t=this.props,i=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Hr(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(Gr.Provider,{value:null},"function"===typeof i?i(e,n):s.cloneElement(s.Children.only(i),n))},t}(s.Component);function Zo(){}Yo.contextType=Gr,Yo.propTypes={},Yo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Zo,onEntering:Zo,onEntered:Zo,onExit:Zo,onExiting:Zo,onExited:Zo},Yo.UNMOUNTED=Ko,Yo.EXITED=$o,Yo.ENTERING=qo,Yo.ENTERED=Qo,Yo.EXITING=Xo;const Jo=Yo;function ea(e,t){const{timeout:i,easing:n,style:s={}}=e;return{duration:s.transitionDuration??("number"===typeof i?i:i[t.mode]||0),easing:s.transitionTimingFunction??("object"===typeof n?n[t.mode]:n),delay:s.transitionDelay}}function ta(e){return Ks("MuiCollapse",e)}$s("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ia=dr("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.orientation],"entered"===i.state&&t.entered,"exited"===i.state&&!i.in&&"0px"===i.collapsedSize&&t.hidden]}})(Cr((e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}}))),na=dr("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),sa=dr("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),ra=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiCollapse"}),{addEndListener:n,children:r,className:o,collapsedSize:a="0px",component:l,easing:h,in:c,onEnter:d,onEntered:u,onEntering:g,onExit:p,onExited:f,onExiting:m,orientation:_="vertical",style:v,timeout:b=Cs.standard,TransitionComponent:y=Jo,...w}=i,C={...i,orientation:_,collapsedSize:a},S=(e=>{const{orientation:t,classes:i}=e;return Zs({root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]},ta,i)})(C),x=function(){const e=Nn(ar);return e[js]||e}(),k=eo(),L=s.useRef(null),E=s.useRef(),M="number"===typeof a?`${a}px`:a,T="horizontal"===_,D=T?"width":"height",N=s.useRef(null),I=kr(t,N),A=e=>t=>{if(e){const i=N.current;void 0===t?e(i):e(i,t)}},R=()=>L.current?L.current[T?"clientWidth":"clientHeight"]:0,P=A(((e,t)=>{L.current&&T&&(L.current.style.position="absolute"),e.style[D]=M,d&&d(e,t)})),O=A(((e,t)=>{const i=R();L.current&&T&&(L.current.style.position="");const{duration:n,easing:s}=ea({style:v,timeout:b,easing:h},{mode:"enter"});if("auto"===b){const t=x.transitions.getAutoHeightDuration(i);e.style.transitionDuration=`${t}ms`,E.current=t}else e.style.transitionDuration="string"===typeof n?n:`${n}ms`;e.style[D]=`${i}px`,e.style.transitionTimingFunction=s,g&&g(e,t)})),F=A(((e,t)=>{e.style[D]="auto",u&&u(e,t)})),B=A((e=>{e.style[D]=`${R()}px`,p&&p(e)})),z=A(f),V=A((e=>{const t=R(),{duration:i,easing:n}=ea({style:v,timeout:b,easing:h},{mode:"exit"});if("auto"===b){const i=x.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${i}ms`,E.current=i}else e.style.transitionDuration="string"===typeof i?i:`${i}ms`;e.style[D]=M,e.style.transitionTimingFunction=n,m&&m(e)}));return(0,De.jsx)(y,{in:c,onEnter:P,onEntered:F,onEntering:O,onExit:B,onExited:z,onExiting:V,addEndListener:e=>{"auto"===b&&k.start(E.current||0,e),n&&n(N.current,e)},nodeRef:N,timeout:"auto"===b?null:b,...w,children:(e,t)=>{let{ownerState:i,...n}=t;return(0,De.jsx)(ia,{as:l,className:Re(S.root,o,{entered:S.entered,exited:!c&&"0px"===M&&S.hidden}[e]),style:{[T?"minWidth":"minHeight"]:M,...v},ref:I,ownerState:{...C,state:e},...n,children:(0,De.jsx)(na,{ownerState:{...C,state:e},className:S.wrapper,ref:L,children:(0,De.jsx)(sa,{ownerState:{...C,state:e},className:S.wrapperInner,children:r})})})}})}));ra&&(ra.muiSupportAuto=!0);const oa=ra;function aa(e){return Ks("MuiButton",e)}const la=$s("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const ha=s.createContext({});const ca=s.createContext(void 0),da=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ua=dr(_o,{shouldForwardProp:e=>hr(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.variant],t[`${i.variant}${Lo(i.color)}`],t[`size${Lo(i.size)}`],t[`${i.variant}Size${Lo(i.size)}`],"inherit"===i.color&&t.colorInherit,i.disableElevation&&t.disableElevation,i.fullWidth&&t.fullWidth]}})(Cr((e=>{let{theme:t}=e;const i="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],n="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${la.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${la.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${la.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${la.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Eo()).map((e=>{let[i]=e;return{props:{color:i},style:{"--variant-textColor":(t.vars||t).palette[i].main,"--variant-outlinedColor":(t.vars||t).palette[i].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[i].mainChannel} / 0.5)`:Wn(t.palette[i].main,.5),"--variant-containedColor":(t.vars||t).palette[i].contrastText,"--variant-containedBg":(t.vars||t).palette[i].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[i].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[i].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Wn(t.palette[i].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[i].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[i].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Wn(t.palette[i].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:i,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Wn(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Wn(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${la.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${la.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}}))),ga=dr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.startIcon,t[`iconSize${Lo(i.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...da]}),pa=dr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.endIcon,t[`iconSize${Lo(i.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...da]}),fa=s.forwardRef((function(e,t){const i=s.useContext(ha),n=s.useContext(ca),r=fr({props:ur(i,e),name:"MuiButton"}),{children:o,color:a="primary",component:l="button",className:h,disabled:c=!1,disableElevation:d=!1,disableFocusRipple:u=!1,endIcon:g,focusVisibleClassName:p,fullWidth:f=!1,size:m="medium",startIcon:_,type:v,variant:b="text",...y}=r,w={...r,color:a,component:l,disabled:c,disableElevation:d,disableFocusRipple:u,fullWidth:f,size:m,type:v,variant:b},C=(e=>{const{color:t,disableElevation:i,fullWidth:n,size:s,variant:r,classes:o}=e,a=Zs({root:["root",r,`${r}${Lo(t)}`,`size${Lo(s)}`,`${r}Size${Lo(s)}`,`color${Lo(t)}`,i&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Lo(s)}`],endIcon:["icon","endIcon",`iconSize${Lo(s)}`]},aa,o);return{...o,...a}})(w),S=_&&(0,De.jsx)(ga,{className:C.startIcon,ownerState:w,children:_}),x=g&&(0,De.jsx)(pa,{className:C.endIcon,ownerState:w,children:g}),k=n||"";return(0,De.jsxs)(ua,{ownerState:w,className:Re(i.className,C.root,h,k),component:l,disabled:c,focusRipple:!u,focusVisibleClassName:Re(C.focusVisible,p),ref:t,type:v,...y,classes:C,children:[S,o,x]})})),ma=fa;function _a(e){return Ks("MuiSvgIcon",e)}$s("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const va=dr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,"inherit"!==i.color&&t[`color${Lo(i.color)}`],t[`fontSize${Lo(i.fontSize)}`]]}})(Cr((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[i]=e;return{props:{color:i},style:{color:(t.vars??t).palette?.[i]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),ba=s.forwardRef((function(e,t){const i=fr({props:e,name:"MuiSvgIcon"}),{children:n,className:r,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:h,inheritViewBox:c=!1,titleAccess:d,viewBox:u="0 0 24 24",...g}=i,p=s.isValidElement(n)&&"svg"===n.type,f={...i,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:u,hasSvgAsChild:p},m={};c||(m.viewBox=u);const _=(e=>{const{color:t,fontSize:i,classes:n}=e;return Zs({root:["root","inherit"!==t&&`color${Lo(t)}`,`fontSize${Lo(i)}`]},_a,n)})(f);return(0,De.jsxs)(va,{as:a,className:Re(_.root,r),focusable:"false",color:h,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:t,...m,...g,...p&&n.props,ownerState:f,children:[p?n.props.children:n,d?(0,De.jsx)("title",{children:d}):null]})}));ba.muiName="SvgIcon";const ya=ba;function wa(e,t){function i(i,n){return(0,De.jsx)(ya,{"data-testid":`${t}Icon`,ref:n,...i,children:e})}return i.muiName=ya.muiName,s.memo(s.forwardRef(i))}const Ca=wa((0,De.jsx)("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),Sa=wa((0,De.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),xa=wa((0,De.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),ka=wa((0,De.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),La=wa((0,De.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4z"}),"LibraryMusic"),Ea=wa((0,De.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),Ma=()=>{const[e,t]=(0,s.useState)({}),i=[{name:"Overview",icon:(0,De.jsx)(Ca,{sx:{color:"orange"}}),link:"/overview"},{name:"Platform",icon:(0,De.jsx)(Sa,{sx:{color:"orange"}}),subItems:[{name:"Assistant",link:"/platform/assistant"},{name:"Files",link:"/platform/files"},{name:"Phone Number",link:"/platform/phone-number"},{name:"Tools",link:"/platform/tools"}]},{name:"Play Ground",icon:(0,De.jsx)(La,{sx:{color:"orange"}}),link:"/play-ground"},{name:"Logs",icon:(0,De.jsx)(Ea,{sx:{color:"orange"}}),subItems:[{name:"Settings",link:"/logs/settings"},{name:"Calls",link:"/logs/calls"},{name:"Webhooks",link:"/logs/webhooks"}]}];return(0,De.jsxs)(Ys,{sx:{width:"250px",backgroundColor:"white",color:"orange",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:2},children:[(0,De.jsxs)(Ys,{children:[(0,De.jsx)("img",{src:"./assets/images/11.png",alt:"Logo",className:"w-[150px] sm:w-[175px]"}),(0,De.jsx)(br,{children:i.map((i=>(0,De.jsxs)(Ys,{children:[(0,De.jsx)(Pr,{disablePadding:!0,children:(0,De.jsxs)(yo,{onClick:()=>{return i.subItems&&(e=i.name,void t((t=>({...t,[e]:!t[e]}))));var e},component:i.subItems?void 0:Ee,to:i.subItems?void 0:i.link,children:[(0,De.jsx)(So,{children:i.icon}),(0,De.jsx)(jo,{primary:i.name}),i.subItems&&(e[i.name]?(0,De.jsx)(ka,{sx:{color:"orange"}}):(0,De.jsx)(xa,{sx:{color:"orange"}}))]})}),i.subItems&&(0,De.jsx)(oa,{in:e[i.name],timeout:"auto",unmountOnExit:!0,children:(0,De.jsx)(Ys,{sx:{pl:4},children:(0,De.jsx)(br,{children:i.subItems.map((e=>(0,De.jsx)(Pr,{disablePadding:!0,children:(0,De.jsx)(yo,{component:Ee,to:e.link,children:(0,De.jsx)(jo,{primary:e.name,sx:{color:"orange"}})})},e.name)))})})})]},i.name)))})]}),(0,De.jsx)(Ys,{children:(0,De.jsx)(ma,{variant:"contained",sx:{backgroundColor:"orange",width:"100%"},component:Ee,to:"/profile",children:"Profile"})})]})},Ta=()=>(0,De.jsx)(Ys,{sx:{display:"flex",height:"100vh"},children:(0,De.jsx)(Ma,{})}),Da="172",Na={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ia={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Aa=0,Ra=1,Pa=2,Oa=3,Fa=0,Ba=1,za=2,Va=3,Wa=0,Ha=1,Ua=2,ja=0,Ga=1,Ka=2,$a=3,qa=4,Qa=5,Xa=100,Ya=101,Za=102,Ja=103,el=104,tl=200,il=201,nl=202,sl=203,rl=204,ol=205,al=206,ll=207,hl=208,cl=209,dl=210,ul=211,gl=212,pl=213,fl=214,ml=0,_l=1,vl=2,bl=3,yl=4,wl=5,Cl=6,Sl=7,xl=0,kl=1,Ll=2,El=0,Ml=1,Tl=2,Dl=3,Nl=4,Il=5,Al=6,Rl=7,Pl="attached",Ol="detached",Fl=300,Bl=301,zl=302,Vl=303,Wl=304,Hl=306,Ul=1e3,jl=1001,Gl=1002,Kl=1003,$l=1004,ql=1004,Ql=1005,Xl=1005,Yl=1006,Zl=1007,Jl=1007,eh=1008,th=1008,ih=1009,nh=1010,sh=1011,rh=1012,oh=1013,ah=1014,lh=1015,hh=1016,ch=1017,dh=1018,uh=1020,gh=35902,ph=1021,fh=1022,mh=1023,_h=1024,vh=1025,bh=1026,yh=1027,wh=1028,Ch=1029,Sh=1030,xh=1031,kh=1032,Lh=1033,Eh=33776,Mh=33777,Th=33778,Dh=33779,Nh=35840,Ih=35841,Ah=35842,Rh=35843,Ph=36196,Oh=37492,Fh=37496,Bh=37808,zh=37809,Vh=37810,Wh=37811,Hh=37812,Uh=37813,jh=37814,Gh=37815,Kh=37816,$h=37817,qh=37818,Qh=37819,Xh=37820,Yh=37821,Zh=36492,Jh=36494,ec=36495,tc=36283,ic=36284,nc=36285,sc=36286,rc=2200,oc=2201,ac=2202,lc=2300,hc=2301,cc=2302,dc=2400,uc=2401,gc=2402,pc=2500,fc=2501,mc=0,_c=1,vc=2,bc=3200,yc=3201,wc=3202,Cc=3203,Sc=0,xc=1,kc="",Lc="srgb",Ec="srgb-linear",Mc="linear",Tc="srgb",Dc=0,Nc=7680,Ic=7681,Ac=7682,Rc=7683,Pc=34055,Oc=34056,Fc=5386,Bc=512,zc=513,Vc=514,Wc=515,Hc=516,Uc=517,jc=518,Gc=519,Kc=512,$c=513,qc=514,Qc=515,Xc=516,Yc=517,Zc=518,Jc=519,ed=35044,td=35048,id=35040,nd=35045,sd=35049,rd=35041,od=35046,ad=35050,ld=35042,hd="100",cd="300 es",dd=2e3,ud=2001;class gd{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}const pd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fd=1234567;const md=Math.PI/180,_d=180/Math.PI;function vd(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(pd[255&e]+pd[e>>8&255]+pd[e>>16&255]+pd[e>>24&255]+"-"+pd[255&t]+pd[t>>8&255]+"-"+pd[t>>16&15|64]+pd[t>>24&255]+"-"+pd[63&i|128]+pd[i>>8&255]+"-"+pd[i>>16&255]+pd[i>>24&255]+pd[255&n]+pd[n>>8&255]+pd[n>>16&255]+pd[n>>24&255]).toLowerCase()}function bd(e,t,i){return Math.max(t,Math.min(i,e))}function yd(e,t){return(e%t+t)%t}function wd(e,t,i){return(1-i)*e+i*t}function Cd(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Sd(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const xd={DEG2RAD:md,RAD2DEG:_d,generateUUID:vd,clamp:bd,euclideanModulo:yd,mapLinear:function(e,t,i,n,s){return n+(e-t)*(s-n)/(i-t)},inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},lerp:wd,damp:function(e,t,i,n){return wd(e,t,1-Math.exp(-i*n))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(yd(e,2*t)-t)},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(fd=e);let t=fd+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*md},radToDeg:function(e){return e*_d},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,i,n,s){const r=Math.cos,o=Math.sin,a=r(i/2),l=o(i/2),h=r((t+n)/2),c=o((t+n)/2),d=r((t-n)/2),u=o((t-n)/2),g=r((n-t)/2),p=o((n-t)/2);switch(s){case"XYX":e.set(a*c,l*d,l*u,a*h);break;case"YZY":e.set(l*u,a*c,l*d,a*h);break;case"ZXZ":e.set(l*d,l*u,a*c,a*h);break;case"XZX":e.set(a*c,l*p,l*g,a*h);break;case"YXY":e.set(l*g,a*c,l*p,a*h);break;case"ZYZ":e.set(l*p,l*g,a*c,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}},normalize:Sd,denormalize:Cd};class kd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;kd.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=bd(this.x,e.x,t.x),this.y=bd(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=bd(this.x,e,t),this.y=bd(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(bd(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bd(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),s=this.x-e.x,r=this.y-e.y;return this.x=s*i-r*n+e.x,this.y=s*n+r*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ld{constructor(e,t,i,n,s,r,o,a,l){Ld.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,n,s,r,o,a,l)}set(e,t,i,n,s,r,o,a,l){const h=this.elements;return h[0]=e,h[1]=n,h[2]=o,h[3]=t,h[4]=s,h[5]=a,h[6]=i,h[7]=r,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,r=i[0],o=i[3],a=i[6],l=i[1],h=i[4],c=i[7],d=i[2],u=i[5],g=i[8],p=n[0],f=n[3],m=n[6],_=n[1],v=n[4],b=n[7],y=n[2],w=n[5],C=n[8];return s[0]=r*p+o*_+a*y,s[3]=r*f+o*v+a*w,s[6]=r*m+o*b+a*C,s[1]=l*p+h*_+c*y,s[4]=l*f+h*v+c*w,s[7]=l*m+h*b+c*C,s[2]=d*p+u*_+g*y,s[5]=d*f+u*v+g*w,s[8]=d*m+u*b+g*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],r=e[4],o=e[5],a=e[6],l=e[7],h=e[8];return t*r*h-t*o*l-i*s*h+i*o*a+n*s*l-n*r*a}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],r=e[4],o=e[5],a=e[6],l=e[7],h=e[8],c=h*r-o*l,d=o*a-h*s,u=l*s-r*a,g=t*c+i*d+n*u;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const p=1/g;return e[0]=c*p,e[1]=(n*l-h*i)*p,e[2]=(o*i-n*r)*p,e[3]=d*p,e[4]=(h*t-n*a)*p,e[5]=(n*s-o*t)*p,e[6]=u*p,e[7]=(i*a-l*t)*p,e[8]=(r*t-i*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,s,r,o){const a=Math.cos(s),l=Math.sin(s);return this.set(i*a,i*l,-i*(a*r+l*o)+r+e,-n*l,n*a,-n*(-l*r+a*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Ed.makeScale(e,t)),this}rotate(e){return this.premultiply(Ed.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ed.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ed=new Ld;function Md(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Td={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Dd(e,t){return new Td[e](t)}function Nd(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Id(){const e=Nd("canvas");return e.style.display="block",e}const Ad={};function Rd(e){e in Ad||(Ad[e]=!0,console.warn(e))}const Pd=(new Ld).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Od=(new Ld).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Fd(){const e={enabled:!0,workingColorSpace:Ec,spaces:{},convert:function(e,t,i){return!1!==this.enabled&&t!==i&&t&&i?(this.spaces[t].transfer===Tc&&(e.r=zd(e.r),e.g=zd(e.g),e.b=zd(e.b)),this.spaces[t].primaries!==this.spaces[i].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[i].fromXYZ)),this.spaces[i].transfer===Tc&&(e.r=Vd(e.r),e.g=Vd(e.g),e.b=Vd(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===kc?Mc:this.spaces[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,i){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[i].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],n=[.3127,.329];return e.define({[Ec]:{primaries:t,whitePoint:n,transfer:Mc,toXYZ:Pd,fromXYZ:Od,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:Lc},outputColorSpaceConfig:{drawingBufferColorSpace:Lc}},[Lc]:{primaries:t,whitePoint:n,transfer:Tc,toXYZ:Pd,fromXYZ:Od,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:Lc}}}),e}const Bd=Fd();function zd(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Vd(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Wd;class Hd{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Wd&&(Wd=Nd("canvas")),Wd.width=e.width,Wd.height=e.height;const i=Wd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Wd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Nd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),s=n.data;for(let e=0;e<s.length;e++)s[e]=255*zd(s[e]/255);return i.putImageData(n,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*zd(t[e]/255)):t[e]=zd(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ud=0;class jd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Ud++}),this.uuid=vd(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(Gd(n[t].image)):e.push(Gd(n[t]))}else e=Gd(n);i.url=e}return t||(e.images[this.uuid]=i),i}}function Gd(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Hd.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Kd=0;class $d extends gd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$d.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$d.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jl,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jl,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yl,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:eh,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mh,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ih,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:$d.DEFAULT_ANISOTROPY,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:kc;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Kd++}),this.uuid=vd(),this.name="",this.source=new jd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=s,this.minFilter=r,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new kd(0,0),this.repeat=new kd(1,1),this.center=new kd(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ld,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Fl)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ul:e.x=e.x-Math.floor(e.x);break;case jl:e.x=e.x<0?0:1;break;case Gl:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ul:e.y=e.y-Math.floor(e.y);break;case jl:e.y=e.y<0?0:1;break;case Gl:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}$d.DEFAULT_IMAGE=null,$d.DEFAULT_MAPPING=Fl,$d.DEFAULT_ANISOTROPY=1;class qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;qd.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,s=this.w,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n+r[12]*s,this.y=r[1]*t+r[5]*i+r[9]*n+r[13]*s,this.z=r[2]*t+r[6]*i+r[10]*n+r[14]*s,this.w=r[3]*t+r[7]*i+r[11]*n+r[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,s;const r=.01,o=.1,a=e.elements,l=a[0],h=a[4],c=a[8],d=a[1],u=a[5],g=a[9],p=a[2],f=a[6],m=a[10];if(Math.abs(h-d)<r&&Math.abs(c-p)<r&&Math.abs(g-f)<r){if(Math.abs(h+d)<o&&Math.abs(c+p)<o&&Math.abs(g+f)<o&&Math.abs(l+u+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(u+1)/2,_=(m+1)/2,v=(h+d)/4,b=(c+p)/4,y=(g+f)/4;return e>a&&e>_?e<r?(i=0,n=.707106781,s=.707106781):(i=Math.sqrt(e),n=v/i,s=b/i):a>_?a<r?(i=.707106781,n=0,s=.707106781):(n=Math.sqrt(a),i=v/n,s=y/n):_<r?(i=.707106781,n=.707106781,s=0):(s=Math.sqrt(_),i=b/s,n=y/s),this.set(i,n,s,t),this}let _=Math.sqrt((f-g)*(f-g)+(c-p)*(c-p)+(d-h)*(d-h));return Math.abs(_)<.001&&(_=1),this.x=(f-g)/_,this.y=(c-p)/_,this.z=(d-h)/_,this.w=Math.acos((l+u+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=bd(this.x,e.x,t.x),this.y=bd(this.y,e.y,t.y),this.z=bd(this.z,e.z,t.z),this.w=bd(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=bd(this.x,e,t),this.y=bd(this.y,e,t),this.z=bd(this.z,e,t),this.w=bd(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(bd(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qd extends gd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qd(0,0,e,t),this.scissorTest=!1,this.viewport=new qd(0,0,e,t);const n={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Yl,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new $d(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const r=i.count;for(let o=0;o<r;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,s=this.textures.length;n<s;n++)this.textures[n].image.width=e,this.textures[n].image.height=t,this.textures[n].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,n=e.textures.length;i<n;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new jd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xd extends Qd{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Yd extends $d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Kl,this.minFilter=Kl,this.wrapR=jl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Zd extends Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Yd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Jd extends $d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Kl,this.minFilter=Kl,this.wrapR=jl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eu extends Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Jd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class tu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,s,r,o){let a=i[n+0],l=i[n+1],h=i[n+2],c=i[n+3];const d=s[r+0],u=s[r+1],g=s[r+2],p=s[r+3];if(0===o)return e[t+0]=a,e[t+1]=l,e[t+2]=h,void(e[t+3]=c);if(1===o)return e[t+0]=d,e[t+1]=u,e[t+2]=g,void(e[t+3]=p);if(c!==p||a!==d||l!==u||h!==g){let e=1-o;const t=a*d+l*u+h*g+c*p,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const s=Math.sqrt(n),r=Math.atan2(s,t*i);e=Math.sin(e*r)/s,o=Math.sin(o*r)/s}const s=o*i;if(a=a*e+d*s,l=l*e+u*s,h=h*e+g*s,c=c*e+p*s,e===1-o){const e=1/Math.sqrt(a*a+l*l+h*h+c*c);a*=e,l*=e,h*=e,c*=e}}e[t]=a,e[t+1]=l,e[t+2]=h,e[t+3]=c}static multiplyQuaternionsFlat(e,t,i,n,s,r){const o=i[n],a=i[n+1],l=i[n+2],h=i[n+3],c=s[r],d=s[r+1],u=s[r+2],g=s[r+3];return e[t]=o*g+h*c+a*u-l*d,e[t+1]=a*g+h*d+l*c-o*u,e[t+2]=l*g+h*u+o*d-a*c,e[t+3]=h*g-o*c-a*d-l*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e._x,n=e._y,s=e._z,r=e._order,o=Math.cos,a=Math.sin,l=o(i/2),h=o(n/2),c=o(s/2),d=a(i/2),u=a(n/2),g=a(s/2);switch(r){case"XYZ":this._x=d*h*c+l*u*g,this._y=l*u*c-d*h*g,this._z=l*h*g+d*u*c,this._w=l*h*c-d*u*g;break;case"YXZ":this._x=d*h*c+l*u*g,this._y=l*u*c-d*h*g,this._z=l*h*g-d*u*c,this._w=l*h*c+d*u*g;break;case"ZXY":this._x=d*h*c-l*u*g,this._y=l*u*c+d*h*g,this._z=l*h*g+d*u*c,this._w=l*h*c-d*u*g;break;case"ZYX":this._x=d*h*c-l*u*g,this._y=l*u*c+d*h*g,this._z=l*h*g-d*u*c,this._w=l*h*c+d*u*g;break;case"YZX":this._x=d*h*c+l*u*g,this._y=l*u*c+d*h*g,this._z=l*h*g-d*u*c,this._w=l*h*c-d*u*g;break;case"XZY":this._x=d*h*c-l*u*g,this._y=l*u*c-d*h*g,this._z=l*h*g+d*u*c,this._w=l*h*c+d*u*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],s=t[8],r=t[1],o=t[5],a=t[9],l=t[2],h=t[6],c=t[10],d=i+o+c;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(h-a)*e,this._y=(s-l)*e,this._z=(r-n)*e}else if(i>o&&i>c){const e=2*Math.sqrt(1+i-o-c);this._w=(h-a)/e,this._x=.25*e,this._y=(n+r)/e,this._z=(s+l)/e}else if(o>c){const e=2*Math.sqrt(1+o-i-c);this._w=(s-l)/e,this._x=(n+r)/e,this._y=.25*e,this._z=(a+h)/e}else{const e=2*Math.sqrt(1+c-i-o);this._w=(r-n)/e,this._x=(s+l)/e,this._y=(a+h)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bd(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,s=e._z,r=e._w,o=t._x,a=t._y,l=t._z,h=t._w;return this._x=i*h+r*o+n*l-s*a,this._y=n*h+r*a+s*o-i*l,this._z=s*h+r*l+i*a-n*o,this._w=r*h-i*o-n*a-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,s=this._z,r=this._w;let o=r*e._w+i*e._x+n*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=r,this._x=i,this._y=n,this._z=s,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*r+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*s+t*this._z,this.normalize(),this}const l=Math.sqrt(a),h=Math.atan2(l,o),c=Math.sin((1-t)*h)/l,d=Math.sin(t*h)/l;return this._w=r*c+this._w*d,this._x=i*c+this._x*d,this._y=n*c+this._y*d,this._z=s*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),n=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(n*Math.sin(e),n*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;iu.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(su.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(su.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*n,this.y=s[1]*t+s[4]*i+s[7]*n,this.z=s[2]*t+s[5]*i+s[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,s=e.elements,r=1/(s[3]*t+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*n+s[12])*r,this.y=(s[1]*t+s[5]*i+s[9]*n+s[13])*r,this.z=(s[2]*t+s[6]*i+s[10]*n+s[14])*r,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,s=e.x,r=e.y,o=e.z,a=e.w,l=2*(r*n-o*i),h=2*(o*t-s*n),c=2*(s*i-r*t);return this.x=t+a*l+r*c-o*h,this.y=i+a*h+o*l-s*c,this.z=n+a*c+s*h-r*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n,this.y=s[1]*t+s[5]*i+s[9]*n,this.z=s[2]*t+s[6]*i+s[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=bd(this.x,e.x,t.x),this.y=bd(this.y,e.y,t.y),this.z=bd(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=bd(this.x,e,t),this.y=bd(this.y,e,t),this.z=bd(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(bd(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,s=e.z,r=t.x,o=t.y,a=t.z;return this.x=n*a-s*o,this.y=s*r-i*a,this.z=i*o-n*r,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return nu.copy(this).projectOnVector(e),this.sub(nu)}reflect(e){return this.sub(nu.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bd(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nu=new iu,su=new tu;class ru{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(au.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(au.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=au.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const n=i.getAttribute("position");if(!0===t&&void 0!==n&&!0!==e.isInstancedMesh)for(let t=0,i=n.count;t<i;t++)!0===e.isMesh?e.getVertexPosition(t,au):au.fromBufferAttribute(n,t),au.applyMatrix4(e.matrixWorld),this.expandByPoint(au);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),lu.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),lu.copy(i.boundingBox)),lu.applyMatrix4(e.matrixWorld),this.union(lu)}const n=e.children;for(let s=0,r=n.length;s<r;s++)this.expandByObject(n[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,au),au.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fu),mu.subVectors(this.max,fu),hu.subVectors(e.a,fu),cu.subVectors(e.b,fu),du.subVectors(e.c,fu),uu.subVectors(cu,hu),gu.subVectors(du,cu),pu.subVectors(hu,du);let t=[0,-uu.z,uu.y,0,-gu.z,gu.y,0,-pu.z,pu.y,uu.z,0,-uu.x,gu.z,0,-gu.x,pu.z,0,-pu.x,-uu.y,uu.x,0,-gu.y,gu.x,0,-pu.y,pu.x,0];return!!bu(t,hu,cu,du,mu)&&(t=[1,0,0,0,1,0,0,0,1],!!bu(t,hu,cu,du,mu)&&(_u.crossVectors(uu,gu),t=[_u.x,_u.y,_u.z],bu(t,hu,cu,du,mu)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,au).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(au).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ou[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ou[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ou[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ou[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ou[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ou[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ou[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ou[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ou)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ou=[new iu,new iu,new iu,new iu,new iu,new iu,new iu,new iu],au=new iu,lu=new ru,hu=new iu,cu=new iu,du=new iu,uu=new iu,gu=new iu,pu=new iu,fu=new iu,mu=new iu,_u=new iu,vu=new iu;function bu(e,t,i,n,s){for(let r=0,o=e.length-3;r<=o;r+=3){vu.fromArray(e,r);const o=s.x*Math.abs(vu.x)+s.y*Math.abs(vu.y)+s.z*Math.abs(vu.z),a=t.dot(vu),l=i.dot(vu),h=n.dot(vu);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>o)return!1}return!0}const yu=new ru,wu=new iu,Cu=new iu;class Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):yu.setFromPoints(e).getCenter(i);let n=0;for(let s=0,r=e.length;s<r;s++)n=Math.max(n,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;wu.subVectors(e,this.center);const t=wu.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(wu,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Cu.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(wu.copy(e.center).add(Cu)),this.expandByPoint(wu.copy(e.center).sub(Cu))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const xu=new iu,ku=new iu,Lu=new iu,Eu=new iu,Mu=new iu,Tu=new iu,Du=new iu;class Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xu.copy(this.origin).addScaledVector(this.direction,t),xu.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){ku.copy(e).add(t).multiplyScalar(.5),Lu.copy(t).sub(e).normalize(),Eu.copy(this.origin).sub(ku);const s=.5*e.distanceTo(t),r=-this.direction.dot(Lu),o=Eu.dot(this.direction),a=-Eu.dot(Lu),l=Eu.lengthSq(),h=Math.abs(1-r*r);let c,d,u,g;if(h>0)if(c=r*a-o,d=r*o-a,g=s*h,c>=0)if(d>=-g)if(d<=g){const e=1/h;c*=e,d*=e,u=c*(c+r*d+2*o)+d*(r*c+d+2*a)+l}else d=s,c=Math.max(0,-(r*d+o)),u=-c*c+d*(d+2*a)+l;else d=-s,c=Math.max(0,-(r*d+o)),u=-c*c+d*(d+2*a)+l;else d<=-g?(c=Math.max(0,-(-r*s+o)),d=c>0?-s:Math.min(Math.max(-s,-a),s),u=-c*c+d*(d+2*a)+l):d<=g?(c=0,d=Math.min(Math.max(-s,-a),s),u=d*(d+2*a)+l):(c=Math.max(0,-(r*s+o)),d=c>0?s:Math.min(Math.max(-s,-a),s),u=-c*c+d*(d+2*a)+l);else d=r>0?-s:s,c=Math.max(0,-(r*d+o)),u=-c*c+d*(d+2*a)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,c),n&&n.copy(ku).addScaledVector(Lu,d),u}intersectSphere(e,t){xu.subVectors(e.center,this.origin);const i=xu.dot(this.direction),n=xu.dot(xu)-i*i,s=e.radius*e.radius;if(n>s)return null;const r=Math.sqrt(s-n),o=i-r,a=i+r;return a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,s,r,o,a;const l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(i=(e.min.x-d.x)*l,n=(e.max.x-d.x)*l):(i=(e.max.x-d.x)*l,n=(e.min.x-d.x)*l),h>=0?(s=(e.min.y-d.y)*h,r=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,r=(e.min.y-d.y)*h),i>r||s>n?null:((s>i||isNaN(i))&&(i=s),(r<n||isNaN(n))&&(n=r),c>=0?(o=(e.min.z-d.z)*c,a=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,a=(e.min.z-d.z)*c),i>a||o>n?null:((o>i||i!==i)&&(i=o),(a<n||n!==n)&&(n=a),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,xu)}intersectTriangle(e,t,i,n,s){Mu.subVectors(t,e),Tu.subVectors(i,e),Du.crossVectors(Mu,Tu);let r,o=this.direction.dot(Du);if(o>0){if(n)return null;r=1}else{if(!(o<0))return null;r=-1,o=-o}Eu.subVectors(this.origin,e);const a=r*this.direction.dot(Tu.crossVectors(Eu,Tu));if(a<0)return null;const l=r*this.direction.dot(Mu.cross(Eu));if(l<0)return null;if(a+l>o)return null;const h=-r*Eu.dot(Du);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Iu{constructor(e,t,i,n,s,r,o,a,l,h,c,d,u,g,p,f){Iu.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,n,s,r,o,a,l,h,c,d,u,g,p,f)}set(e,t,i,n,s,r,o,a,l,h,c,d,u,g,p,f){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=n,m[1]=s,m[5]=r,m[9]=o,m[13]=a,m[2]=l,m[6]=h,m[10]=c,m[14]=d,m[3]=u,m[7]=g,m[11]=p,m[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Iu).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/Au.setFromMatrixColumn(e,0).length(),s=1/Au.setFromMatrixColumn(e,1).length(),r=1/Au.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*r,t[9]=i[9]*r,t[10]=i[10]*r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,s=e.z,r=Math.cos(i),o=Math.sin(i),a=Math.cos(n),l=Math.sin(n),h=Math.cos(s),c=Math.sin(s);if("XYZ"===e.order){const e=r*h,i=r*c,n=o*h,s=o*c;t[0]=a*h,t[4]=-a*c,t[8]=l,t[1]=i+n*l,t[5]=e-s*l,t[9]=-o*a,t[2]=s-e*l,t[6]=n+i*l,t[10]=r*a}else if("YXZ"===e.order){const e=a*h,i=a*c,n=l*h,s=l*c;t[0]=e+s*o,t[4]=n*o-i,t[8]=r*l,t[1]=r*c,t[5]=r*h,t[9]=-o,t[2]=i*o-n,t[6]=s+e*o,t[10]=r*a}else if("ZXY"===e.order){const e=a*h,i=a*c,n=l*h,s=l*c;t[0]=e-s*o,t[4]=-r*c,t[8]=n+i*o,t[1]=i+n*o,t[5]=r*h,t[9]=s-e*o,t[2]=-r*l,t[6]=o,t[10]=r*a}else if("ZYX"===e.order){const e=r*h,i=r*c,n=o*h,s=o*c;t[0]=a*h,t[4]=n*l-i,t[8]=e*l+s,t[1]=a*c,t[5]=s*l+e,t[9]=i*l-n,t[2]=-l,t[6]=o*a,t[10]=r*a}else if("YZX"===e.order){const e=r*a,i=r*l,n=o*a,s=o*l;t[0]=a*h,t[4]=s-e*c,t[8]=n*c+i,t[1]=c,t[5]=r*h,t[9]=-o*h,t[2]=-l*h,t[6]=i*c+n,t[10]=e-s*c}else if("XZY"===e.order){const e=r*a,i=r*l,n=o*a,s=o*l;t[0]=a*h,t[4]=-c,t[8]=l*h,t[1]=e*c+s,t[5]=r*h,t[9]=i*c-n,t[2]=n*c-i,t[6]=o*h,t[10]=s*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Pu,e,Ou)}lookAt(e,t,i){const n=this.elements;return zu.subVectors(e,t),0===zu.lengthSq()&&(zu.z=1),zu.normalize(),Fu.crossVectors(i,zu),0===Fu.lengthSq()&&(1===Math.abs(i.z)?zu.x+=1e-4:zu.z+=1e-4,zu.normalize(),Fu.crossVectors(i,zu)),Fu.normalize(),Bu.crossVectors(zu,Fu),n[0]=Fu.x,n[4]=Bu.x,n[8]=zu.x,n[1]=Fu.y,n[5]=Bu.y,n[9]=zu.y,n[2]=Fu.z,n[6]=Bu.z,n[10]=zu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,r=i[0],o=i[4],a=i[8],l=i[12],h=i[1],c=i[5],d=i[9],u=i[13],g=i[2],p=i[6],f=i[10],m=i[14],_=i[3],v=i[7],b=i[11],y=i[15],w=n[0],C=n[4],S=n[8],x=n[12],k=n[1],L=n[5],E=n[9],M=n[13],T=n[2],D=n[6],N=n[10],I=n[14],A=n[3],R=n[7],P=n[11],O=n[15];return s[0]=r*w+o*k+a*T+l*A,s[4]=r*C+o*L+a*D+l*R,s[8]=r*S+o*E+a*N+l*P,s[12]=r*x+o*M+a*I+l*O,s[1]=h*w+c*k+d*T+u*A,s[5]=h*C+c*L+d*D+u*R,s[9]=h*S+c*E+d*N+u*P,s[13]=h*x+c*M+d*I+u*O,s[2]=g*w+p*k+f*T+m*A,s[6]=g*C+p*L+f*D+m*R,s[10]=g*S+p*E+f*N+m*P,s[14]=g*x+p*M+f*I+m*O,s[3]=_*w+v*k+b*T+y*A,s[7]=_*C+v*L+b*D+y*R,s[11]=_*S+v*E+b*N+y*P,s[15]=_*x+v*M+b*I+y*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],s=e[12],r=e[1],o=e[5],a=e[9],l=e[13],h=e[2],c=e[6],d=e[10],u=e[14];return e[3]*(+s*a*c-n*l*c-s*o*d+i*l*d+n*o*u-i*a*u)+e[7]*(+t*a*u-t*l*d+s*r*d-n*r*u+n*l*h-s*a*h)+e[11]*(+t*l*c-t*o*u-s*r*c+i*r*u+s*o*h-i*l*h)+e[15]*(-n*o*h-t*a*c+t*o*d+n*r*c-i*r*d+i*a*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],r=e[4],o=e[5],a=e[6],l=e[7],h=e[8],c=e[9],d=e[10],u=e[11],g=e[12],p=e[13],f=e[14],m=e[15],_=c*f*l-p*d*l+p*a*u-o*f*u-c*a*m+o*d*m,v=g*d*l-h*f*l-g*a*u+r*f*u+h*a*m-r*d*m,b=h*p*l-g*c*l+g*o*u-r*p*u-h*o*m+r*c*m,y=g*c*a-h*p*a-g*o*d+r*p*d+h*o*f-r*c*f,w=t*_+i*v+n*b+s*y;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/w;return e[0]=_*C,e[1]=(p*d*s-c*f*s-p*n*u+i*f*u+c*n*m-i*d*m)*C,e[2]=(o*f*s-p*a*s+p*n*l-i*f*l-o*n*m+i*a*m)*C,e[3]=(c*a*s-o*d*s-c*n*l+i*d*l+o*n*u-i*a*u)*C,e[4]=v*C,e[5]=(h*f*s-g*d*s+g*n*u-t*f*u-h*n*m+t*d*m)*C,e[6]=(g*a*s-r*f*s-g*n*l+t*f*l+r*n*m-t*a*m)*C,e[7]=(r*d*s-h*a*s+h*n*l-t*d*l-r*n*u+t*a*u)*C,e[8]=b*C,e[9]=(g*c*s-h*p*s-g*i*u+t*p*u+h*i*m-t*c*m)*C,e[10]=(r*p*s-g*o*s+g*i*l-t*p*l-r*i*m+t*o*m)*C,e[11]=(h*o*s-r*c*s-h*i*l+t*c*l+r*i*u-t*o*u)*C,e[12]=y*C,e[13]=(h*p*n-g*c*n+g*i*d-t*p*d-h*i*f+t*c*f)*C,e[14]=(g*o*n-r*p*n-g*i*a+t*p*a+r*i*f-t*o*f)*C,e[15]=(r*c*n-h*o*n+h*i*a-t*c*a-r*i*d+t*o*d)*C,this}scale(e){const t=this.elements,i=e.x,n=e.y,s=e.z;return t[0]*=i,t[4]*=n,t[8]*=s,t[1]*=i,t[5]*=n,t[9]*=s,t[2]*=i,t[6]*=n,t[10]*=s,t[3]*=i,t[7]*=n,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),s=1-i,r=e.x,o=e.y,a=e.z,l=s*r,h=s*o;return this.set(l*r+i,l*o-n*a,l*a+n*o,0,l*o+n*a,h*o+i,h*a-n*r,0,l*a-n*o,h*a+n*r,s*a*a+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,s,r){return this.set(1,i,s,0,e,1,r,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,s=t._x,r=t._y,o=t._z,a=t._w,l=s+s,h=r+r,c=o+o,d=s*l,u=s*h,g=s*c,p=r*h,f=r*c,m=o*c,_=a*l,v=a*h,b=a*c,y=i.x,w=i.y,C=i.z;return n[0]=(1-(p+m))*y,n[1]=(u+b)*y,n[2]=(g-v)*y,n[3]=0,n[4]=(u-b)*w,n[5]=(1-(d+m))*w,n[6]=(f+_)*w,n[7]=0,n[8]=(g+v)*C,n[9]=(f-_)*C,n[10]=(1-(d+p))*C,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let s=Au.set(n[0],n[1],n[2]).length();const r=Au.set(n[4],n[5],n[6]).length(),o=Au.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),e.x=n[12],e.y=n[13],e.z=n[14],Ru.copy(this);const a=1/s,l=1/r,h=1/o;return Ru.elements[0]*=a,Ru.elements[1]*=a,Ru.elements[2]*=a,Ru.elements[4]*=l,Ru.elements[5]*=l,Ru.elements[6]*=l,Ru.elements[8]*=h,Ru.elements[9]*=h,Ru.elements[10]*=h,t.setFromRotationMatrix(Ru),i.x=s,i.y=r,i.z=o,this}makePerspective(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dd;const a=this.elements,l=2*s/(t-e),h=2*s/(i-n),c=(t+e)/(t-e),d=(i+n)/(i-n);let u,g;if(o===dd)u=-(r+s)/(r-s),g=-2*r*s/(r-s);else{if(o!==ud)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);u=-r/(r-s),g=-r*s/(r-s)}return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=h,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dd;const a=this.elements,l=1/(t-e),h=1/(i-n),c=1/(r-s),d=(t+e)*l,u=(i+n)*h;let g,p;if(o===dd)g=(r+s)*c,p=-2*c;else{if(o!==ud)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);g=s*c,p=-1*c}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=p,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Au=new iu,Ru=new Iu,Pu=new iu(0,0,0),Ou=new iu(1,1,1),Fu=new iu,Bu=new iu,zu=new iu,Vu=new Iu,Wu=new tu;class Hu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hu.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=e.elements,s=n[0],r=n[4],o=n[8],a=n[1],l=n[5],h=n[9],c=n[2],d=n[6],u=n[10];switch(t){case"XYZ":this._y=Math.asin(bd(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,u),this._z=Math.atan2(-r,s)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-bd(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,u),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,s),this._z=0);break;case"ZXY":this._x=Math.asin(bd(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,u),this._z=Math.atan2(-r,l)):(this._y=0,this._z=Math.atan2(a,s));break;case"ZYX":this._y=Math.asin(-bd(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,u),this._z=Math.atan2(a,s)):(this._x=0,this._z=Math.atan2(-r,l));break;case"YZX":this._z=Math.asin(bd(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(o,u));break;case"XZY":this._z=Math.asin(-bd(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-h,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Vu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Vu,t,i)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Wu.setFromEuler(this),this.setFromQuaternion(Wu,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Hu.DEFAULT_ORDER="XYZ";class Uu{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let ju=0;const Gu=new iu,Ku=new tu,$u=new Iu,qu=new iu,Qu=new iu,Xu=new iu,Yu=new tu,Zu=new iu(1,0,0),Ju=new iu(0,1,0),eg=new iu(0,0,1),tg={type:"added"},ig={type:"removed"},ng={type:"childadded",child:null},sg={type:"childremoved",child:null};class rg extends gd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ju++}),this.uuid=vd(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=rg.DEFAULT_UP.clone();const e=new iu,t=new Hu,i=new tu,n=new iu(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Iu},normalMatrix:{value:new Ld}}),this.matrix=new Iu,this.matrixWorld=new Iu,this.matrixAutoUpdate=rg.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=rg.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Uu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ku.setFromAxisAngle(e,t),this.quaternion.multiply(Ku),this}rotateOnWorldAxis(e,t){return Ku.setFromAxisAngle(e,t),this.quaternion.premultiply(Ku),this}rotateX(e){return this.rotateOnAxis(Zu,e)}rotateY(e){return this.rotateOnAxis(Ju,e)}rotateZ(e){return this.rotateOnAxis(eg,e)}translateOnAxis(e,t){return Gu.copy(e).applyQuaternion(this.quaternion),this.position.add(Gu.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Zu,e)}translateY(e){return this.translateOnAxis(Ju,e)}translateZ(e){return this.translateOnAxis(eg,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4($u.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?qu.copy(e):qu.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Qu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$u.lookAt(Qu,qu,this.up):$u.lookAt(qu,Qu,this.up),this.quaternion.setFromRotationMatrix($u),n&&($u.extractRotation(n.matrixWorld),Ku.setFromRotationMatrix($u),this.quaternion.premultiply(Ku.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(tg),ng.child=e,this.dispatchEvent(ng),ng.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ig),sg.child=e,this.dispatchEvent(sg),sg.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),$u.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),$u.multiply(e.parent.matrixWorld)),e.applyMatrix4($u),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(tg),ng.child=e,this.dispatchEvent(ng),ng.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&i.push(this);const n=this.children;for(let s=0,r=n.length;s<r;s++)n[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,e,Xu),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qu,Yu,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){t[i].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};function s(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(n.type="BatchedMesh",n.perObjectFrustumCulled=this.perObjectFrustumCulled,n.sortObjects=this.sortObjects,n.drawRanges=this._drawRanges,n.reservedRanges=this._reservedRanges,n.visibility=this._visibility,n.active=this._active,n.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),n.maxInstanceCount=this._maxInstanceCount,n.maxVertexCount=this._maxVertexCount,n.maxIndexCount=this._maxIndexCount,n.geometryInitialized=this._geometryInitialized,n.geometryCount=this._geometryCount,n.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(n.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(n.boundingSphere={center:n.boundingSphere.center.toArray(),radius:n.boundingSphere.radius}),null!==this.boundingBox&&(n.boundingBox={min:n.boundingBox.min.toArray(),max:n.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];s(e.shapes,n)}else s(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(s(e.materials,this.material[i]));n.material=t}else n.material=s(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(s(e.animations,i))}}if(t){const t=r(e.geometries),n=r(e.materials),s=r(e.textures),o=r(e.images),a=r(e.shapes),l=r(e.skeletons),h=r(e.animations),c=r(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),s.length>0&&(i.textures=s),o.length>0&&(i.images=o),a.length>0&&(i.shapes=a),l.length>0&&(i.skeletons=l),h.length>0&&(i.animations=h),c.length>0&&(i.nodes=c)}return i.object=n,i;function r(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++){const t=e.children[i];this.add(t.clone())}return this}}rg.DEFAULT_UP=new iu(0,1,0),rg.DEFAULT_MATRIX_AUTO_UPDATE=!0,rg.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const og=new iu,ag=new iu,lg=new iu,hg=new iu,cg=new iu,dg=new iu,ug=new iu,gg=new iu,pg=new iu,fg=new iu,mg=new qd,_g=new qd,vg=new qd;class bg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new iu;this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),og.subVectors(e,t),n.cross(og);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(e,t,i,n,s){og.subVectors(n,t),ag.subVectors(i,t),lg.subVectors(e,t);const r=og.dot(og),o=og.dot(ag),a=og.dot(lg),l=ag.dot(ag),h=ag.dot(lg),c=r*l-o*o;if(0===c)return s.set(0,0,0),null;const d=1/c,u=(l*a-o*h)*d,g=(r*h-o*a)*d;return s.set(1-u-g,g,u)}static containsPoint(e,t,i,n){return null!==this.getBarycoord(e,t,i,n,hg)&&(hg.x>=0&&hg.y>=0&&hg.x+hg.y<=1)}static getInterpolation(e,t,i,n,s,r,o,a){return null===this.getBarycoord(e,t,i,n,hg)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(s,hg.x),a.addScaledVector(r,hg.y),a.addScaledVector(o,hg.z),a)}static getInterpolatedAttribute(e,t,i,n,s,r){return mg.setScalar(0),_g.setScalar(0),vg.setScalar(0),mg.fromBufferAttribute(e,t),_g.fromBufferAttribute(e,i),vg.fromBufferAttribute(e,n),r.setScalar(0),r.addScaledVector(mg,s.x),r.addScaledVector(_g,s.y),r.addScaledVector(vg,s.z),r}static isFrontFacing(e,t,i,n){return og.subVectors(i,t),ag.subVectors(e,t),og.cross(ag).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return og.subVectors(this.c,this.b),ag.subVectors(this.a,this.b),.5*og.cross(ag).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return bg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return bg.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,n,s){return bg.getInterpolation(e,this.a,this.b,this.c,t,i,n,s)}containsPoint(e){return bg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return bg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,s=this.c;let r,o;cg.subVectors(n,i),dg.subVectors(s,i),gg.subVectors(e,i);const a=cg.dot(gg),l=dg.dot(gg);if(a<=0&&l<=0)return t.copy(i);pg.subVectors(e,n);const h=cg.dot(pg),c=dg.dot(pg);if(h>=0&&c<=h)return t.copy(n);const d=a*c-h*l;if(d<=0&&a>=0&&h<=0)return r=a/(a-h),t.copy(i).addScaledVector(cg,r);fg.subVectors(e,s);const u=cg.dot(fg),g=dg.dot(fg);if(g>=0&&u<=g)return t.copy(s);const p=u*l-a*g;if(p<=0&&l>=0&&g<=0)return o=l/(l-g),t.copy(i).addScaledVector(dg,o);const f=h*g-u*c;if(f<=0&&c-h>=0&&u-g>=0)return ug.subVectors(s,n),o=(c-h)/(c-h+(u-g)),t.copy(n).addScaledVector(ug,o);const m=1/(f+p+d);return r=p*m,o=d*m,t.copy(i).addScaledVector(cg,r).addScaledVector(dg,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const yg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wg={h:0,s:0,l:0},Cg={h:0,s:0,l:0};function Sg(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}class xg{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lc;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Bd.toWorkingColorSpace(this,t),this}setRGB(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bd.workingColorSpace;return this.r=e,this.g=t,this.b=i,Bd.toWorkingColorSpace(this,n),this}setHSL(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bd.workingColorSpace;if(e=yd(e,1),t=bd(t,0,1),i=bd(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,s=2*i-n;this.r=Sg(s,n,e+1/3),this.g=Sg(s,n,e),this.b=Sg(s,n,e-1/3)}return Bd.toWorkingColorSpace(this,n),this}setStyle(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lc;function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const r=t[1],o=t[2];switch(r){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,i);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,i);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=t[1],s=n.length;if(3===s)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,i);if(6===s)return this.setHex(parseInt(n,16),i);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,i);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lc;const i=yg[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=zd(e.r),this.g=zd(e.g),this.b=zd(e.b),this}copyLinearToSRGB(e){return this.r=Vd(e.r),this.g=Vd(e.g),this.b=Vd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lc;return Bd.fromWorkingColorSpace(kg.copy(this),e),65536*Math.round(bd(255*kg.r,0,255))+256*Math.round(bd(255*kg.g,0,255))+Math.round(bd(255*kg.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lc;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bd.workingColorSpace;Bd.fromWorkingColorSpace(kg.copy(this),t);const i=kg.r,n=kg.g,s=kg.b,r=Math.max(i,n,s),o=Math.min(i,n,s);let a,l;const h=(o+r)/2;if(o===r)a=0,l=0;else{const e=r-o;switch(l=h<=.5?e/(r+o):e/(2-r-o),r){case i:a=(n-s)/e+(n<s?6:0);break;case n:a=(s-i)/e+2;break;case s:a=(i-n)/e+4}a/=6}return e.h=a,e.s=l,e.l=h,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bd.workingColorSpace;return Bd.fromWorkingColorSpace(kg.copy(this),t),e.r=kg.r,e.g=kg.g,e.b=kg.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lc;Bd.fromWorkingColorSpace(kg.copy(this),e);const t=kg.r,i=kg.g,n=kg.b;return e!==Lc?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(wg),this.setHSL(wg.h+e,wg.s+t,wg.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(wg),e.getHSL(Cg);const i=wd(wg.h,Cg.h,t),n=wd(wg.s,Cg.s,t),s=wd(wg.l,Cg.l,t);return this.setHSL(i,n,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,n=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*n,this.g=s[1]*t+s[4]*i+s[7]*n,this.b=s[2]*t+s[5]*i+s[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const kg=new xg;xg.NAMES=yg;let Lg=0;class Eg extends gd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Lg++}),this.uuid=vd(),this.name="",this.type="Material",this.blending=Ga,this.side=Wa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=rl,this.blendDst=ol,this.blendEquation=Xa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xg(0,0,0),this.blendAlpha=0,this.depthFunc=bl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Gc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Nc,this.stencilZFail=Nc,this.stencilZPass=Nc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ga&&(i.blending=this.blending),this.side!==Wa&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),this.blendSrc!==rl&&(i.blendSrc=this.blendSrc),this.blendDst!==ol&&(i.blendDst=this.blendDst),this.blendEquation!==Xa&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==bl&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Gc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Nc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Nc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Nc&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const t=n(e.textures),s=n(e.images);t.length>0&&(i.textures=t),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Mg extends Eg{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hu,this.combine=xl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Tg=Dg();function Dg(){const e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),n=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(n[l]=0,n[256|l]=32768,s[l]=24,s[256|l]=24):e<-14?(n[l]=1024>>-e-14,n[256|l]=1024>>-e-14|32768,s[l]=-e-1,s[256|l]=-e-1):e<=15?(n[l]=e+15<<10,n[256|l]=e+15<<10|32768,s[l]=13,s[256|l]=13):e<128?(n[l]=31744,n[256|l]=64512,s[l]=24,s[256|l]=24):(n[l]=31744,n[256|l]=64512,s[l]=13,s[256|l]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,r[l]=e|t}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:i,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:a}}function Ng(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=bd(e,-65504,65504),Tg.floatView[0]=e;const t=Tg.uint32View[0],i=t>>23&511;return Tg.baseTable[i]+((8388607&t)>>Tg.shiftTable[i])}function Ig(e){const t=e>>10;return Tg.uint32View[0]=Tg.mantissaTable[Tg.offsetTable[t]+(1023&e)]+Tg.exponentTable[t],Tg.floatView[0]}const Ag={toHalfFloat:Ng,fromHalfFloat:Ig},Rg=new iu,Pg=new kd;class Og{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=ed,this.updateRanges=[],this.gpuType=lh,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Pg.fromBufferAttribute(this,t),Pg.applyMatrix3(e),this.setXY(t,Pg.x,Pg.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Rg.fromBufferAttribute(this,t),Rg.applyMatrix3(e),this.setXYZ(t,Rg.x,Rg.y,Rg.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Rg.fromBufferAttribute(this,t),Rg.applyMatrix4(e),this.setXYZ(t,Rg.x,Rg.y,Rg.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Rg.fromBufferAttribute(this,t),Rg.applyNormalMatrix(e),this.setXYZ(t,Rg.x,Rg.y,Rg.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Rg.fromBufferAttribute(this,t),Rg.transformDirection(e),this.setXYZ(t,Rg.x,Rg.y,Rg.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Cd(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Sd(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Cd(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Cd(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Cd(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Cd(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array),n=Sd(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,s){return e*=this.itemSize,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array),n=Sd(n,this.array),s=Sd(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==ed&&(e.usage=this.usage),e}}class Fg extends Og{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Bg extends Og{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class zg extends Og{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Vg extends Og{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Wg extends Og{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Hg extends Og{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Ug extends Og{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class jg extends Og{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Ig(this.array[e*this.itemSize]);return this.normalized&&(t=Cd(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize]=Ng(t),this}getY(e){let t=Ig(this.array[e*this.itemSize+1]);return this.normalized&&(t=Cd(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize+1]=Ng(t),this}getZ(e){let t=Ig(this.array[e*this.itemSize+2]);return this.normalized&&(t=Cd(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize+2]=Ng(t),this}getW(e){let t=Ig(this.array[e*this.itemSize+3]);return this.normalized&&(t=Cd(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sd(t,this.array)),this.array[e*this.itemSize+3]=Ng(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array)),this.array[e+0]=Ng(t),this.array[e+1]=Ng(i),this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array),n=Sd(n,this.array)),this.array[e+0]=Ng(t),this.array[e+1]=Ng(i),this.array[e+2]=Ng(n),this}setXYZW(e,t,i,n,s){return e*=this.itemSize,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array),n=Sd(n,this.array),s=Sd(s,this.array)),this.array[e+0]=Ng(t),this.array[e+1]=Ng(i),this.array[e+2]=Ng(n),this.array[e+3]=Ng(s),this}}class Gg extends Og{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Kg=0;const $g=new Iu,qg=new rg,Qg=new iu,Xg=new ru,Yg=new ru,Zg=new iu;class Jg extends gd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Kg++}),this.uuid=vd(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Md(e)?Ug:Wg)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new Ld).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return $g.makeRotationFromQuaternion(e),this.applyMatrix4($g),this}rotateX(e){return $g.makeRotationX(e),this.applyMatrix4($g),this}rotateY(e){return $g.makeRotationY(e),this.applyMatrix4($g),this}rotateZ(e){return $g.makeRotationZ(e),this.applyMatrix4($g),this}translate(e,t,i){return $g.makeTranslation(e,t,i),this.applyMatrix4($g),this}scale(e,t,i){return $g.makeScale(e,t,i),this.applyMatrix4($g),this}lookAt(e){return qg.lookAt(e),qg.updateMatrix(),this.applyMatrix4(qg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qg).negate(),this.translate(Qg.x,Qg.y,Qg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}this.setAttribute("position",new Gg(t,3))}else{const i=Math.min(e.length,t.count);for(let n=0;n<i;n++){const i=e[n];t.setXYZ(n,i.x,i.y,i.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ru);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new iu(-1/0,-1/0,-1/0),new iu(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const e=t[i];Xg.setFromBufferAttribute(e),this.morphTargetsRelative?(Zg.addVectors(this.boundingBox.min,Xg.min),this.boundingBox.expandByPoint(Zg),Zg.addVectors(this.boundingBox.max,Xg.max),this.boundingBox.expandByPoint(Zg)):(this.boundingBox.expandByPoint(Xg.min),this.boundingBox.expandByPoint(Xg.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Su);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new iu,1/0);if(e){const i=this.boundingSphere.center;if(Xg.setFromBufferAttribute(e),t)for(let e=0,s=t.length;e<s;e++){const i=t[e];Yg.setFromBufferAttribute(i),this.morphTargetsRelative?(Zg.addVectors(Xg.min,Yg.min),Xg.expandByPoint(Zg),Zg.addVectors(Xg.max,Yg.max),Xg.expandByPoint(Zg)):(Xg.expandByPoint(Yg.min),Xg.expandByPoint(Yg.max))}Xg.getCenter(i);let n=0;for(let t=0,s=e.count;t<s;t++)Zg.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(Zg));if(t)for(let s=0,r=t.length;s<r;s++){const r=t[s],o=this.morphTargetsRelative;for(let t=0,s=r.count;t<s;t++)Zg.fromBufferAttribute(r,t),o&&(Qg.fromBufferAttribute(e,t),Zg.add(Qg)),n=Math.max(n,i.distanceToSquared(Zg))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,n=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Og(new Float32Array(4*i.count),4));const r=this.getAttribute("tangent"),o=[],a=[];for(let S=0;S<i.count;S++)o[S]=new iu,a[S]=new iu;const l=new iu,h=new iu,c=new iu,d=new kd,u=new kd,g=new kd,p=new iu,f=new iu;function m(e,t,n){l.fromBufferAttribute(i,e),h.fromBufferAttribute(i,t),c.fromBufferAttribute(i,n),d.fromBufferAttribute(s,e),u.fromBufferAttribute(s,t),g.fromBufferAttribute(s,n),h.sub(l),c.sub(l),u.sub(d),g.sub(d);const r=1/(u.x*g.y-g.x*u.y);isFinite(r)&&(p.copy(h).multiplyScalar(g.y).addScaledVector(c,-u.y).multiplyScalar(r),f.copy(c).multiplyScalar(u.x).addScaledVector(h,-g.x).multiplyScalar(r),o[e].add(p),o[t].add(p),o[n].add(p),a[e].add(f),a[t].add(f),a[n].add(f))}let _=this.groups;0===_.length&&(_=[{start:0,count:e.count}]);for(let S=0,x=_.length;S<x;++S){const t=_[S],i=t.start;for(let n=i,s=i+t.count;n<s;n+=3)m(e.getX(n+0),e.getX(n+1),e.getX(n+2))}const v=new iu,b=new iu,y=new iu,w=new iu;function C(e){y.fromBufferAttribute(n,e),w.copy(y);const t=o[e];v.copy(t),v.sub(y.multiplyScalar(y.dot(t))).normalize(),b.crossVectors(w,t);const i=b.dot(a[e])<0?-1:1;r.setXYZW(e,v.x,v.y,v.z,i)}for(let S=0,x=_.length;S<x;++S){const t=_[S],i=t.start;for(let n=i,s=i+t.count;n<s;n+=3)C(e.getX(n+0)),C(e.getX(n+1)),C(e.getX(n+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Og(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new iu,s=new iu,r=new iu,o=new iu,a=new iu,l=new iu,h=new iu,c=new iu;if(e)for(let d=0,u=e.count;d<u;d+=3){const u=e.getX(d+0),g=e.getX(d+1),p=e.getX(d+2);n.fromBufferAttribute(t,u),s.fromBufferAttribute(t,g),r.fromBufferAttribute(t,p),h.subVectors(r,s),c.subVectors(n,s),h.cross(c),o.fromBufferAttribute(i,u),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,p),o.add(h),a.add(h),l.add(h),i.setXYZ(u,o.x,o.y,o.z),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)n.fromBufferAttribute(t,e+0),s.fromBufferAttribute(t,e+1),r.fromBufferAttribute(t,e+2),h.subVectors(r,s),c.subVectors(n,s),h.cross(c),i.setXYZ(e+0,h.x,h.y,h.z),i.setXYZ(e+1,h.x,h.y,h.z),i.setXYZ(e+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Zg.fromBufferAttribute(e,t),Zg.normalize(),e.setXYZ(t,Zg.x,Zg.y,Zg.z)}toNonIndexed(){function e(e,t){const i=e.array,n=e.itemSize,s=e.normalized,r=new i.constructor(t.length*n);let o=0,a=0;for(let l=0,h=t.length;l<h;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*n;for(let e=0;e<n;e++)r[a++]=i[o++]}return new Og(r,n,s)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jg,i=this.index.array,n=this.attributes;for(const o in n){const s=e(n[o],i);t.setAttribute(o,s)}const s=this.morphAttributes;for(const o in s){const n=[],r=s[o];for(let t=0,s=r.length;t<s;t++){const s=e(r[t],i);n.push(s)}t.morphAttributes[o]=n}t.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let o=0,a=r.length;o<a;o++){const e=r[o];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const a in i){const t=i[a];e.data.attributes[a]=t.toJSON(e.data)}const n={};let s=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],i=[];for(let n=0,s=t.length;n<s;n++){const s=t[n];i.push(s.toJSON(e.data))}i.length>0&&(n[a]=i,s=!0)}s&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(e.data.groups=JSON.parse(JSON.stringify(r)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const l in n){const e=n[l];this.setAttribute(l,e.clone(t))}const s=e.morphAttributes;for(const l in s){const e=[],i=s[l];for(let n=0,s=i.length;n<s;n++)e.push(i[n].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const r=e.groups;for(let l=0,h=r.length;l<h;l++){const e=r[l];this.addGroup(e.start,e.count,e.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ep=new Iu,tp=new Nu,ip=new Su,np=new iu,sp=new iu,rp=new iu,op=new iu,ap=new iu,lp=new iu,hp=new iu,cp=new iu;class dp extends rg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mg;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,s=i.morphAttributes.position,r=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const o=this.morphTargetInfluences;if(s&&o){lp.set(0,0,0);for(let i=0,n=s.length;i<n;i++){const n=o[i],a=s[i];0!==n&&(ap.fromBufferAttribute(a,e),r?lp.addScaledVector(ap,n):lp.addScaledVector(ap.sub(t),n))}t.add(lp)}return t}raycast(e,t){const i=this.geometry,n=this.material,s=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),ip.copy(i.boundingSphere),ip.applyMatrix4(s),tp.copy(e.ray).recast(e.near),!1===ip.containsPoint(tp.origin)){if(null===tp.intersectSphere(ip,np))return;if(tp.origin.distanceToSquared(np)>(e.far-e.near)**2)return}ep.copy(s).invert(),tp.copy(e.ray).applyMatrix4(ep),null!==i.boundingBox&&!1===tp.intersectsBox(i.boundingBox)||this._computeIntersections(e,t,tp)}}_computeIntersections(e,t,i){let n;const s=this.geometry,r=this.material,o=s.index,a=s.attributes.position,l=s.attributes.uv,h=s.attributes.uv1,c=s.attributes.normal,d=s.groups,u=s.drawRange;if(null!==o)if(Array.isArray(r))for(let g=0,p=d.length;g<p;g++){const s=d[g],a=r[s.materialIndex];for(let r=Math.max(s.start,u.start),d=Math.min(o.count,Math.min(s.start+s.count,u.start+u.count));r<d;r+=3){n=up(this,a,e,i,l,h,c,o.getX(r),o.getX(r+1),o.getX(r+2)),n&&(n.faceIndex=Math.floor(r/3),n.face.materialIndex=s.materialIndex,t.push(n))}}else{for(let s=Math.max(0,u.start),a=Math.min(o.count,u.start+u.count);s<a;s+=3){n=up(this,r,e,i,l,h,c,o.getX(s),o.getX(s+1),o.getX(s+2)),n&&(n.faceIndex=Math.floor(s/3),t.push(n))}}else if(void 0!==a)if(Array.isArray(r))for(let g=0,p=d.length;g<p;g++){const s=d[g],o=r[s.materialIndex];for(let r=Math.max(s.start,u.start),d=Math.min(a.count,Math.min(s.start+s.count,u.start+u.count));r<d;r+=3){n=up(this,o,e,i,l,h,c,r,r+1,r+2),n&&(n.faceIndex=Math.floor(r/3),n.face.materialIndex=s.materialIndex,t.push(n))}}else{for(let s=Math.max(0,u.start),o=Math.min(a.count,u.start+u.count);s<o;s+=3){n=up(this,r,e,i,l,h,c,s,s+1,s+2),n&&(n.faceIndex=Math.floor(s/3),t.push(n))}}}}function up(e,t,i,n,s,r,o,a,l,h){e.getVertexPosition(a,sp),e.getVertexPosition(l,rp),e.getVertexPosition(h,op);const c=function(e,t,i,n,s,r,o,a){let l;if(l=t.side===Ha?n.intersectTriangle(o,r,s,!0,a):n.intersectTriangle(s,r,o,t.side===Wa,a),null===l)return null;cp.copy(a),cp.applyMatrix4(e.matrixWorld);const h=i.ray.origin.distanceTo(cp);return h<i.near||h>i.far?null:{distance:h,point:cp.clone(),object:e}}(e,t,i,n,sp,rp,op,hp);if(c){const e=new iu;bg.getBarycoord(hp,sp,rp,op,e),s&&(c.uv=bg.getInterpolatedAttribute(s,a,l,h,e,new kd)),r&&(c.uv1=bg.getInterpolatedAttribute(r,a,l,h,e,new kd)),o&&(c.normal=bg.getInterpolatedAttribute(o,a,l,h,e,new iu),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const t={a:a,b:l,c:h,normal:new iu,materialIndex:0};bg.getNormal(sp,rp,op,t.normal),c.face=t,c.barycoord=e}return c}class gp extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:s,depthSegments:r};const o=this;n=Math.floor(n),s=Math.floor(s),r=Math.floor(r);const a=[],l=[],h=[],c=[];let d=0,u=0;function g(e,t,i,n,s,r,g,p,f,m,_){const v=r/f,b=g/m,y=r/2,w=g/2,C=p/2,S=f+1,x=m+1;let k=0,L=0;const E=new iu;for(let o=0;o<x;o++){const r=o*b-w;for(let a=0;a<S;a++){const d=a*v-y;E[e]=d*n,E[t]=r*s,E[i]=C,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[i]=p>0?1:-1,h.push(E.x,E.y,E.z),c.push(a/f),c.push(1-o/m),k+=1}}for(let o=0;o<m;o++)for(let e=0;e<f;e++){const t=d+e+S*o,i=d+e+S*(o+1),n=d+(e+1)+S*(o+1),s=d+(e+1)+S*o;a.push(t,i,s),a.push(i,n,s),L+=6}o.addGroup(u,L,_),u+=L,d+=k}g("z","y","x",-1,-1,i,t,e,r,s,0),g("z","y","x",1,-1,i,t,-e,r,s,1),g("x","z","y",1,1,e,i,t,n,r,2),g("x","z","y",1,-1,e,i,-t,n,r,3),g("x","y","z",1,-1,e,t,i,n,s,4),g("x","y","z",-1,-1,e,t,-i,n,s,5),this.setIndex(a),this.setAttribute("position",new Gg(l,3)),this.setAttribute("normal",new Gg(h,3)),this.setAttribute("uv",new Gg(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pp(e){const t={};for(const i in e){t[i]={};for(const n in e[i]){const s=e[i][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][n]=null):t[i][n]=s.clone():Array.isArray(s)?t[i][n]=s.slice():t[i][n]=s}}return t}function fp(e){const t={};for(let i=0;i<e.length;i++){const n=pp(e[i]);for(const e in n)t[e]=n[e]}return t}function mp(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Bd.workingColorSpace}const _p={clone:pp,merge:fp};class vp extends Eg{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pp(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const n in this.extensions)!0===this.extensions[n]&&(i[n]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class bp extends rg{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Iu,this.projectionMatrix=new Iu,this.projectionMatrixInverse=new Iu,this.coordinateSystem=dd}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const yp=new iu,wp=new kd,Cp=new kd;class Sp extends bp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*_d*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*md*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*_d*Math.atan(Math.tan(.5*md*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){yp.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(yp.x,yp.y).multiplyScalar(-e/yp.z),yp.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(yp.x,yp.y).multiplyScalar(-e/yp.z)}getViewSize(e,t){return this.getViewBounds(e,wp,Cp),t.subVectors(Cp,wp)}setViewOffset(e,t,i,n,s,r){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*md*this.fov)/this.zoom,i=2*t,n=this.aspect*i,s=-.5*n;const r=this.view;if(null!==this.view&&this.view.enabled){const e=r.fullWidth,o=r.fullHeight;s+=r.offsetX*n/e,t-=r.offsetY*i/o,n*=r.width/e,i*=r.height/o}const o=this.filmOffset;0!==o&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const xp=-90;class kp extends rg{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const n=new Sp(xp,1,e,t);n.layers=this.layers,this.add(n);const s=new Sp(xp,1,e,t);s.layers=this.layers,this.add(s);const r=new Sp(xp,1,e,t);r.layers=this.layers,this.add(r);const o=new Sp(xp,1,e,t);o.layers=this.layers,this.add(o);const a=new Sp(xp,1,e,t);a.layers=this.layers,this.add(a);const l=new Sp(xp,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,n,s,r,o,a]=t;for(const l of t)this.remove(l);if(e===dd)i.up.set(0,1,0),i.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),r.up.set(0,0,1),r.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==ud)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),r.up.set(0,0,-1),r.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:n}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,r,o,a,l,h]=this.children,c=e.getRenderTarget(),d=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,n),e.render(t,s),e.setRenderTarget(i,1,n),e.render(t,r),e.setRenderTarget(i,2,n),e.render(t,o),e.setRenderTarget(i,3,n),e.render(t,a),e.setRenderTarget(i,4,n),e.render(t,l),i.texture.generateMipmaps=p,e.setRenderTarget(i,5,n),e.render(t,h),e.setRenderTarget(c,d,u),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class Lp extends $d{constructor(e,t,i,n,s,r,o,a,l,h){super(e=void 0!==e?e:[],t=void 0!==t?t:Bl,i,n,s,r,o,a,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ep extends Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];this.texture=new Lp(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Yl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},n=new gp(5,5,5),s=new vp({name:"CubemapFromEquirect",uniforms:pp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ha,blending:ja});s.uniforms.tEquirect.value=t;const r=new dp(n,s),o=t.minFilter;t.minFilter===eh&&(t.minFilter=Yl);return new kp(1,10,this).update(e,r),t.minFilter=o,r.geometry.dispose(),r.material.dispose(),this}clear(e,t,i,n){const s=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,i,n);e.setRenderTarget(s)}}class Mp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new xg(e),this.density=t}clone(){return new Mp(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Tp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new xg(e),this.near=t,this.far=i}clone(){return new Tp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Dp extends rg{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Hu,this.environmentIntensity=1,this.environmentRotation=new Hu,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Np{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=ed,this.updateRanges=[],this.version=0,this.uuid=vd()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,s=this.stride;n<s;n++)this.array[e+n]=t.array[i+n];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vd()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vd()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ip=new iu;class Ap{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ip.fromBufferAttribute(this,t),Ip.applyMatrix4(e),this.setXYZ(t,Ip.x,Ip.y,Ip.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ip.fromBufferAttribute(this,t),Ip.applyNormalMatrix(e),this.setXYZ(t,Ip.x,Ip.y,Ip.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ip.fromBufferAttribute(this,t),Ip.transformDirection(e),this.setXYZ(t,Ip.x,Ip.y,Ip.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Cd(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Sd(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Sd(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Sd(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Sd(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Sd(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Cd(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Cd(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Cd(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Cd(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array),n=Sd(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sd(t,this.array),i=Sd(i,this.array),n=Sd(n,this.array),s=Sd(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new Og(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ap(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Rp extends Eg{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xg(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Pp;const Op=new iu,Fp=new iu,Bp=new iu,zp=new kd,Vp=new kd,Wp=new Iu,Hp=new iu,Up=new iu,jp=new iu,Gp=new kd,Kp=new kd,$p=new kd;class qp extends rg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rp;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Pp){Pp=new Jg;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Np(e,5);Pp.setIndex([0,1,2,0,2,3]),Pp.setAttribute("position",new Ap(t,3,0,!1)),Pp.setAttribute("uv",new Ap(t,2,3,!1))}this.geometry=Pp,this.material=e,this.center=new kd(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fp.setFromMatrixScale(this.matrixWorld),Wp.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fp.multiplyScalar(-Bp.z);const i=this.material.rotation;let n,s;0!==i&&(s=Math.cos(i),n=Math.sin(i));const r=this.center;Qp(Hp.set(-.5,-.5,0),Bp,r,Fp,n,s),Qp(Up.set(.5,-.5,0),Bp,r,Fp,n,s),Qp(jp.set(.5,.5,0),Bp,r,Fp,n,s),Gp.set(0,0),Kp.set(1,0),$p.set(1,1);let o=e.ray.intersectTriangle(Hp,Up,jp,!1,Op);if(null===o&&(Qp(Up.set(-.5,.5,0),Bp,r,Fp,n,s),Kp.set(0,1),o=e.ray.intersectTriangle(Hp,jp,Up,!1,Op),null===o))return;const a=e.ray.origin.distanceTo(Op);a<e.near||a>e.far||t.push({distance:a,point:Op.clone(),uv:bg.getInterpolation(Op,Hp,Up,jp,Gp,Kp,$p,new kd),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Qp(e,t,i,n,s,r){zp.subVectors(e,i).addScalar(.5).multiply(n),void 0!==s?(Vp.x=r*zp.x-s*zp.y,Vp.y=s*zp.x+r*zp.y):Vp.copy(zp),e.copy(t),e.x+=Vp.x,e.y+=Vp.y,e.applyMatrix4(Wp)}const Xp=new iu,Yp=new iu;class Zp extends rg{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,n=t.length;i<n;i++){const e=t[i];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const n=this.levels;let s;for(s=0;s<n.length&&!(t<n[s].distance);s++);return n.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const e=t.splice(i,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,n;for(i=1,n=t.length;i<n;i++){let n=t[i].distance;if(t[i].object.visible&&(n-=n*t[i].hysteresis),e<n)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Xp.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Xp);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Xp.setFromMatrixPosition(e.matrixWorld),Yp.setFromMatrixPosition(this.matrixWorld);const i=Xp.distanceTo(Yp)/e.zoom;let n,s;for(t[0].object.visible=!0,n=1,s=t.length;n<s;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),!(i>=e))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<s;n++)t[n].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let n=0,s=i.length;n<s;n++){const e=i[n];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Jp=new iu,ef=new qd,tf=new qd,nf=new iu,sf=new Iu,rf=new iu,of=new Su,af=new Iu,lf=new Nu;class hf extends dp{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Pl,this.bindMatrix=new Iu,this.bindMatrixInverse=new Iu,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new ru),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,rf),this.boundingBox.expandByPoint(rf)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Su),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,rf),this.boundingSphere.expandByPoint(rf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,n=this.matrixWorld;void 0!==i&&(null===this.boundingSphere&&this.computeBoundingSphere(),of.copy(this.boundingSphere),of.applyMatrix4(n),!1!==e.ray.intersectsSphere(of)&&(af.copy(n).invert(),lf.copy(e.ray).applyMatrix4(af),null!==this.boundingBox&&!1===lf.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,lf)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qd,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.fromBufferAttribute(t,i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Pl?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ol?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,n=this.geometry;ef.fromBufferAttribute(n.attributes.skinIndex,e),tf.fromBufferAttribute(n.attributes.skinWeight,e),Jp.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const e=tf.getComponent(s);if(0!==e){const n=ef.getComponent(s);sf.multiplyMatrices(i.bones[n].matrixWorld,i.boneInverses[n]),t.addScaledVector(nf.copy(Jp).applyMatrix4(sf),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class cf extends rg{constructor(){super(),this.isBone=!0,this.type="Bone"}}class df extends $d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Kl,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Kl,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const uf=new Iu,gf=new Iu;class pf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=vd(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Iu)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Iu;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let s=0,r=e.length;s<r;s++){const n=e[s]?e[s].matrixWorld:gf;uf.multiplyMatrices(n,t[s]),uf.toArray(i,16*s)}null!==n&&(n.needsUpdate=!0)}clone(){return new pf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new df(t,e,e,mh,lh);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const n=e.bones[i];let s=t[n];void 0===s&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),s=new cf),this.bones.push(s),this.boneInverses.push((new Iu).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,s=t.length;n<s;n++){const s=t[n];e.bones.push(s.uuid);const r=i[n];e.boneInverses.push(r.toArray())}return e}}class ff extends Og{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const mf=new Iu,_f=new Iu,vf=[],bf=new ru,yf=new Iu,wf=new dp,Cf=new Su;class Sf extends dp{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ff(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<i;n++)this.setMatrixAt(n,yf)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new ru),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,mf),bf.copy(e.boundingBox).applyMatrix4(mf),this.boundingBox.union(bf)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Su),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,mf),Cf.copy(e.boundingSphere).applyMatrix4(mf),this.boundingSphere.union(Cf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,n=this.morphTexture.source.data.data,s=e*(i.length+1)+1;for(let r=0;r<i.length;r++)i[r]=n[s+r]}raycast(e,t){const i=this.matrixWorld,n=this.count;if(wf.geometry=this.geometry,wf.material=this.material,void 0!==wf.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Cf.copy(this.boundingSphere),Cf.applyMatrix4(i),!1!==e.ray.intersectsSphere(Cf)))for(let s=0;s<n;s++){this.getMatrixAt(s,mf),_f.multiplyMatrices(i,mf),wf.matrixWorld=_f,wf.raycast(e,vf);for(let e=0,i=vf.length;e<i;e++){const i=vf[e];i.instanceId=s,i.object=this,t.push(i)}vf.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ff(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,n=i.length+1;null===this.morphTexture&&(this.morphTexture=new df(new Float32Array(n*this.count),n,this.count,wh,lh));const s=this.morphTexture.source.data.data;let r=0;for(let l=0;l<i.length;l++)r+=i[l];const o=this.geometry.morphTargetsRelative?1:1-r,a=n*e;s[a]=o,s.set(i,a+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const xf=new iu,kf=new iu,Lf=new Ld;class Ef{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=xf.subVectors(i,t).cross(kf.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(xf),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/n;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Lf.getNormalMatrix(e),n=this.coplanarPoint(xf).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Mf=new Su,Tf=new iu;class Df{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ef,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ef,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ef,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ef,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ef,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ef;this.planes=[e,t,i,n,s,r]}set(e,t,i,n,s,r){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(n),o[4].copy(s),o[5].copy(r),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dd;const i=this.planes,n=e.elements,s=n[0],r=n[1],o=n[2],a=n[3],l=n[4],h=n[5],c=n[6],d=n[7],u=n[8],g=n[9],p=n[10],f=n[11],m=n[12],_=n[13],v=n[14],b=n[15];if(i[0].setComponents(a-s,d-l,f-u,b-m).normalize(),i[1].setComponents(a+s,d+l,f+u,b+m).normalize(),i[2].setComponents(a+r,d+h,f+g,b+_).normalize(),i[3].setComponents(a-r,d-h,f-g,b-_).normalize(),i[4].setComponents(a-o,d-c,f-p,b-v).normalize(),t===dd)i[5].setComponents(a+o,d+c,f+p,b+v).normalize();else{if(t!==ud)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(o,c,p,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Mf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Mf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Mf)}intersectsSprite(e){return Mf.center.set(0,0,0),Mf.radius=.7071067811865476,Mf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Mf)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let s=0;s<6;s++){if(t[s].distanceToPoint(i)<n)return!1}return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(Tf.x=n.normal.x>0?e.max.x:e.min.x,Tf.y=n.normal.y>0?e.max.y:e.min.y,Tf.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(Tf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Nf(e,t){return e-t}function If(e,t){return e.z-t.z}function Af(e,t){return t.z-e.z}class Rf{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,n){const s=this.pool,r=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];r.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=n}reset(){this.list.length=0,this.index=0}}const Pf=new Iu,Of=new xg(1,1,1),Ff=new Df,Bf=new ru,zf=new Su,Vf=new iu,Wf=new iu,Hf=new iu,Uf=new Rf,jf=new dp,Gf=[];function Kf(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const s=e.count;for(let r=0;r<s;r++)for(let s=0;s<n;s++)t.setComponent(r+i,s,e.getComponent(r,s))}else t.array.set(e.array,i*n);t.needsUpdate=!0}function $f(e,t){if(e.constructor!==t.constructor){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++)t[n]=e[n]}else{const i=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,i))}}class qf extends dp{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,n=arguments.length>3?arguments[3]:void 0;super(new Jg,n),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new df(t,e,e,mh,lh);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new df(t,e,e,Ch,ah);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new df(t,e,e,mh,lh);i.colorSpace=Bd.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,n=this._maxIndexCount;if(!1===this._geometryInitialized){for(const n in e.attributes){const s=e.getAttribute(n),{array:r,itemSize:o,normalized:a}=s,l=new r.constructor(i*o),h=new Og(l,o,a);t.setAttribute(n,h)}if(null!==e.getIndex()){const e=i>65535?new Uint32Array(n):new Uint16Array(n);t.setIndex(new Og(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const n=e.getAttribute(i),s=t.getAttribute(i);if(n.itemSize!==s.itemSize||n.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ru);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,n=t.length;i<n;i++){if(!1===t[i].active)continue;const n=t[i].geometryIndex;this.getMatrixAt(i,Pf),this.getBoundingBoxAt(n,Bf).applyMatrix4(Pf),e.union(Bf)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Su);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,n=t.length;i<n;i++){if(!1===t[i].active)continue;const n=t[i].geometryIndex;this.getMatrixAt(i,Pf),this.getBoundingSphereAt(n,zf).applyMatrix4(Pf),e.union(zf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Nf),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=t):(i=this._instanceInfo.length,this._instanceInfo.push(t));const n=this._matricesTexture;Pf.identity().toArray(n.image.data,16*i),n.needsUpdate=!0;const s=this._colorsTexture;return s&&(Of.toArray(s.image.data,4*i),s.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const n={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;n.vertexStart=this._nextVertexStart,n.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const r=e.getIndex();if(null!==r&&(n.indexStart=this._nextIndexStart,n.reservedIndexCount=-1===i?r.count:i),-1!==n.indexStart&&n.indexStart+n.reservedIndexCount>this._maxIndexCount||n.vertexStart+n.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let o;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Nf),o=this._availableGeometryIds.shift(),s[o]=n):(o=this._geometryCount,this._geometryCount++,s.push(n)),this.setGeometryAt(o,e),this._nextIndexStart=n.indexStart+n.reservedIndexCount,this._nextVertexStart=n.vertexStart+n.reservedVertexCount,o}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,n=null!==i.getIndex(),s=i.getIndex(),r=t.getIndex(),o=this._geometryInfo[e];if(n&&r.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const a=o.vertexStart,l=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const e=t.getAttribute(h),n=i.getAttribute(h);Kf(e,n,a);const s=e.itemSize;for(let t=e.count,i=l;t<i;t++){const e=a+t;for(let t=0;t<s;t++)n.setComponent(e,t,0)}n.needsUpdate=!0,n.addUpdateRange(a*s,l*s)}if(n){const e=o.indexStart,i=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let t=0;t<r.count;t++)s.setX(e+t,a+r.getX(t));for(let t=r.count,n=i;t<n;t++)s.setX(e+t,a);s.needsUpdate=!0,s.addUpdateRange(e,o.reservedIndexCount)}return o.start=n?o.indexStart:o.vertexStart,o.count=n?o.indexCount:o.vertexCount,o.boundingBox=null,null!==t.boundingBox&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,null!==t.boundingSphere&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const i=this._instanceInfo;for(let n=0,s=i.length;n<s;n++)i[n].geometryIndex===e&&this.deleteInstance(n);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,n=i.map(((e,t)=>t)).sort(((e,t)=>i[e].vertexStart-i[t].vertexStart)),s=this.geometry;for(let r=0,o=i.length;r<o;r++){const o=n[r],a=i[o];if(!1!==a.active){if(null!==s.index){if(a.indexStart!==t){const{indexStart:i,vertexStart:n,reservedIndexCount:r}=a,o=s.index,l=o.array,h=e-n;for(let e=i;e<i+r;e++)l[e]=l[e]+h;o.array.copyWithin(t,i,i+r),o.addUpdateRange(t,r),a.indexStart=t}t+=a.reservedIndexCount}if(a.vertexStart!==e){const{vertexStart:t,reservedVertexCount:i}=a,n=s.attributes;for(const s in n){const r=n[s],{array:o,itemSize:a}=r;o.copyWithin(e*a,t*a,(t+i)*a),r.addUpdateRange(e*a,i*a)}a.vertexStart=e}e+=a.reservedVertexCount,a.start=s.index?a.indexStart:a.vertexStart,this._nextIndexStart=s.index?a.indexStart+a.reservedIndexCount:0,this._nextVertexStart=a.vertexStart+a.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,n=this._geometryInfo[e];if(null===n.boundingBox){const e=new ru,t=i.index,s=i.attributes.position;for(let i=n.start,r=n.start+n.count;i<r;i++){let n=i;t&&(n=t.getX(n)),e.expandByPoint(Vf.fromBufferAttribute(s,n))}n.boundingBox=e}return t.copy(n.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,n=this._geometryInfo[e];if(null===n.boundingSphere){const t=new Su;this.getBoundingBoxAt(e,Bf),Bf.getCenter(t.center);const s=i.index,r=i.attributes.position;let o=0;for(let e=n.start,i=n.start+n.count;e<i;e++){let i=e;s&&(i=s.getX(i)),Vf.fromBufferAttribute(r,i),o=Math.max(o,t.center.distanceToSquared(Vf))}t.radius=Math.sqrt(o),n.boundingSphere=t}return t.copy(n.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,n=this._matricesTexture.image.data;return t.toArray(n,16*e),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Nf);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const n=new Int32Array(e),s=new Int32Array(e);$f(this._multiDrawCounts,n),$f(this._multiDrawStarts,s),this._multiDrawCounts=n,this._multiDrawStarts=s,this._maxInstanceCount=e;const r=this._indirectTexture,o=this._matricesTexture,a=this._colorsTexture;r.dispose(),this._initIndirectTexture(),$f(r.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),$f(o.image.data,this._matricesTexture.image.data),a&&(a.dispose(),this._initColorsTexture(),$f(a.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter((e=>e.active));if(Math.max(...i.map((e=>e.vertexStart+e.reservedVertexCount)))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index){if(Math.max(...i.map((e=>e.indexStart+e.reservedIndexCount)))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`)}const n=this.geometry;n.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Jg,this._initializeGeometry(n));const s=this.geometry;n.index&&$f(n.index.array,s.index.array);for(const r in n.attributes)$f(n.attributes[r].array,s.attributes[r].array)}raycast(e,t){const i=this._instanceInfo,n=this._geometryInfo,s=this.matrixWorld,r=this.geometry;jf.material=this.material,jf.geometry.index=r.index,jf.geometry.attributes=r.attributes,null===jf.geometry.boundingBox&&(jf.geometry.boundingBox=new ru),null===jf.geometry.boundingSphere&&(jf.geometry.boundingSphere=new Su);for(let o=0,a=i.length;o<a;o++){if(!i[o].visible||!i[o].active)continue;const r=i[o].geometryIndex,a=n[r];jf.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(o,jf.matrixWorld).premultiply(s),this.getBoundingBoxAt(r,jf.geometry.boundingBox),this.getBoundingSphereAt(r,jf.geometry.boundingSphere),jf.raycast(e,Gf);for(let e=0,i=Gf.length;e<i;e++){const i=Gf[e];i.object=this,i.batchId=o,t.push(i)}Gf.length=0}jf.material=null,jf.geometry.index=null,jf.geometry.attributes={},jf.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map((e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null}))),this._instanceInfo=e._instanceInfo.map((e=>({...e}))),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,n,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const r=n.getIndex(),o=null===r?1:r.array.BYTES_PER_ELEMENT,a=this._instanceInfo,l=this._multiDrawStarts,h=this._multiDrawCounts,c=this._geometryInfo,d=this.perObjectFrustumCulled,u=this._indirectTexture,g=u.image.data;d&&(Pf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Ff.setFromProjectionMatrix(Pf,e.coordinateSystem));let p=0;if(this.sortObjects){Pf.copy(this.matrixWorld).invert(),Vf.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Pf),Wf.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Pf);for(let i=0,n=a.length;i<n;i++)if(a[i].visible&&a[i].active){const e=a[i].geometryIndex;this.getMatrixAt(i,Pf),this.getBoundingSphereAt(e,zf).applyMatrix4(Pf);let t=!1;if(d&&(t=!Ff.intersectsSphere(zf)),!t){const t=c[e],n=Hf.subVectors(zf.center,Vf).dot(Wf);Uf.push(t.start,t.count,n,i)}}const e=Uf.list,t=this.customSort;null===t?e.sort(s.transparent?Af:If):t.call(this,e,i);for(let i=0,n=e.length;i<n;i++){const t=e[i];l[p]=t.start*o,h[p]=t.count,g[p]=t.index,p++}Uf.reset()}else for(let f=0,m=a.length;f<m;f++)if(a[f].visible&&a[f].active){const e=a[f].geometryIndex;let t=!1;if(d&&(this.getMatrixAt(f,Pf),this.getBoundingSphereAt(e,zf).applyMatrix4(Pf),t=!Ff.intersectsSphere(zf)),!t){const t=c[e];l[p]=t.start*o,h[p]=t.count,g[p]=f,p++}}u.needsUpdate=!0,this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,i,n,s,r){this.onBeforeRender(e,null,n,s,r)}}class Qf extends Eg{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xg(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Xf=new iu,Yf=new iu,Zf=new Iu,Jf=new Nu,em=new Su,tm=new iu,im=new iu;class nm extends rg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Qf;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)Xf.fromBufferAttribute(t,e-1),Yf.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=Xf.distanceTo(Yf);e.setAttribute("lineDistance",new Gg(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,s=e.params.Line.threshold,r=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),em.copy(i.boundingSphere),em.applyMatrix4(n),em.radius+=s,!1===e.ray.intersectsSphere(em))return;Zf.copy(n).invert(),Jf.copy(e.ray).applyMatrix4(Zf);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=this.isLineSegments?2:1,h=i.index,c=i.attributes.position;if(null!==h){const i=Math.max(0,r.start),n=Math.min(h.count,r.start+r.count);for(let s=i,r=n-1;s<r;s+=l){const i=h.getX(s),n=h.getX(s+1),r=sm(this,e,Jf,a,i,n);r&&t.push(r)}if(this.isLineLoop){const s=h.getX(n-1),r=h.getX(i),o=sm(this,e,Jf,a,s,r);o&&t.push(o)}}else{const i=Math.max(0,r.start),n=Math.min(c.count,r.start+r.count);for(let s=i,r=n-1;s<r;s+=l){const i=sm(this,e,Jf,a,s,s+1);i&&t.push(i)}if(this.isLineLoop){const s=sm(this,e,Jf,a,n-1,i);s&&t.push(s)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function sm(e,t,i,n,s,r){const o=e.geometry.attributes.position;Xf.fromBufferAttribute(o,s),Yf.fromBufferAttribute(o,r);if(i.distanceSqToSegment(Xf,Yf,tm,im)>n)return;tm.applyMatrix4(e.matrixWorld);const a=t.ray.origin.distanceTo(tm);return a<t.near||a>t.far?void 0:{distance:a,point:im.clone().applyMatrix4(e.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:e}}const rm=new iu,om=new iu;class am extends nm{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)rm.fromBufferAttribute(t,e),om.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+rm.distanceTo(om);e.setAttribute("lineDistance",new Gg(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lm extends nm{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class hm extends Eg{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xg(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const cm=new Iu,dm=new Nu,um=new Su,gm=new iu;class pm extends rg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hm;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,s=e.params.Points.threshold,r=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),um.copy(i.boundingSphere),um.applyMatrix4(n),um.radius+=s,!1===e.ray.intersectsSphere(um))return;cm.copy(n).invert(),dm.copy(e.ray).applyMatrix4(cm);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=i.index,h=i.attributes.position;if(null!==l){for(let i=Math.max(0,r.start),s=Math.min(l.count,r.start+r.count);i<s;i++){const s=l.getX(i);gm.fromBufferAttribute(h,s),fm(gm,s,a,n,e,t,this)}}else{for(let i=Math.max(0,r.start),s=Math.min(h.count,r.start+r.count);i<s;i++)gm.fromBufferAttribute(h,i),fm(gm,i,a,n,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function fm(e,t,i,n,s,r,o){const a=dm.distanceSqToPoint(e);if(a<i){const i=new iu;dm.closestPointToPoint(e,i),i.applyMatrix4(n);const l=s.ray.origin.distanceTo(i);if(l<s.near||l>s.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:i,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class mm extends rg{constructor(){super(),this.isGroup=!0,this.type="Group"}}class _m extends $d{constructor(e,t,i,n,s,r,o,a,l){super(e,t,i,n,s,r,o,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==r?r:Yl,this.magFilter=void 0!==s?s:Yl,this.generateMipmaps=!1;const h=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class vm extends $d{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Kl,this.minFilter=Kl,this.generateMipmaps=!1,this.needsUpdate=!0}}class bm extends $d{constructor(e,t,i,n,s,r,o,a,l,h,c,d){super(null,r,o,a,l,h,n,s,c,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ym extends bm{constructor(e,t,i,n,s,r){super(e,t,i,s,r),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=jl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class wm extends bm{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Bl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Cm extends $d{constructor(e,t,i,n,s,r,o,a,l){super(e,t,i,n,s,r,o,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Sm extends $d{constructor(e,t,i,n,s,r,o,a,l){let h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:bh;if(h!==bh&&h!==yh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&h===bh&&(i=ah),void 0===i&&h===yh&&(i=uh),super(null,n,s,r,o,a,h,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:Kl,this.minFilter=void 0!==a?a:Kl,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class xm{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,n=this.getPoint(0),s=0;t.push(0);for(let r=1;r<=e;r++)i=this.getPoint(r/e),s+=i.distanceTo(n),t.push(s),n=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let n=0;const s=i.length;let r;r=t||e*i[s-1];let o,a=0,l=s-1;for(;a<=l;)if(n=Math.floor(a+(l-a)/2),o=i[n]-r,o<0)a=n+1;else{if(!(o>0)){l=n;break}l=n-1}if(n=l,i[n]===r)return n/(s-1);const h=i[n];return(n+(r-h)/(i[n+1]-h))/(s-1)}getTangent(e,t){const i=1e-4;let n=e-i,s=e+i;n<0&&(n=0),s>1&&(s=1);const r=this.getPoint(n),o=this.getPoint(s),a=t||(r.isVector2?new kd:new iu);return a.copy(o).sub(r).normalize(),a}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new iu,n=[],s=[],r=[],o=new iu,a=new Iu;for(let u=0;u<=e;u++){const t=u/e;n[u]=this.getTangentAt(t,new iu)}s[0]=new iu,r[0]=new iu;let l=Number.MAX_VALUE;const h=Math.abs(n[0].x),c=Math.abs(n[0].y),d=Math.abs(n[0].z);h<=l&&(l=h,i.set(1,0,0)),c<=l&&(l=c,i.set(0,1,0)),d<=l&&i.set(0,0,1),o.crossVectors(n[0],i).normalize(),s[0].crossVectors(n[0],o),r[0].crossVectors(n[0],s[0]);for(let u=1;u<=e;u++){if(s[u]=s[u-1].clone(),r[u]=r[u-1].clone(),o.crossVectors(n[u-1],n[u]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(bd(n[u-1].dot(n[u]),-1,1));s[u].applyMatrix4(a.makeRotationAxis(o,e))}r[u].crossVectors(n[u],s[u])}if(!0===t){let t=Math.acos(bd(s[0].dot(s[e]),-1,1));t/=e,n[0].dot(o.crossVectors(s[0],s[e]))>0&&(t=-t);for(let i=1;i<=e;i++)s[i].applyMatrix4(a.makeRotationAxis(n[i],t*i)),r[i].crossVectors(n[i],s[i])}return{tangents:n,normals:s,binormals:r}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class km extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=s,this.aEndAngle=r,this.aClockwise=o,this.aRotation=a}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd,i=2*Math.PI;let n=this.aEndAngle-this.aStartAngle;const s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(n=s?0:i),!0!==this.aClockwise||s||(n===i?n=-i:n-=i);const r=this.aStartAngle+e*n;let o=this.aX+this.xRadius*Math.cos(r),a=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=o-this.aX,n=a-this.aY;o=i*e-n*t+this.aX,a=i*t+n*e+this.aY}return t.set(o,a)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Lm extends km{constructor(e,t,i,n,s,r){super(e,t,i,i,n,s,r),this.isArcCurve=!0,this.type="ArcCurve"}}function Em(){let e=0,t=0,i=0,n=0;function s(s,r,o,a){e=s,t=o,i=-3*s+3*r-2*o-a,n=2*s-2*r+o+a}return{initCatmullRom:function(e,t,i,n,r){s(t,i,r*(i-e),r*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,r,o,a){let l=(t-e)/r-(i-e)/(r+o)+(i-t)/o,h=(i-t)/o-(n-t)/(o+a)+(n-i)/a;l*=o,h*=o,s(t,i,l,h)},calc:function(s){const r=s*s;return e+t*s+i*r+n*(r*s)}}}const Mm=new iu,Tm=new Em,Dm=new Em,Nm=new Em;class Im extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu,i=this.points,n=i.length,s=(n-(this.closed?0:1))*e;let r,o,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:0===l&&a===n-1&&(a=n-2,l=1),this.closed||a>0?r=i[(a-1)%n]:(Mm.subVectors(i[0],i[1]).add(i[0]),r=Mm);const h=i[a%n],c=i[(a+1)%n];if(this.closed||a+2<n?o=i[(a+2)%n]:(Mm.subVectors(i[n-1],i[n-2]).add(i[n-1]),o=Mm),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(r.distanceToSquared(h),e),i=Math.pow(h.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(o),e);i<1e-4&&(i=1),t<1e-4&&(t=i),n<1e-4&&(n=i),Tm.initNonuniformCatmullRom(r.x,h.x,c.x,o.x,t,i,n),Dm.initNonuniformCatmullRom(r.y,h.y,c.y,o.y,t,i,n),Nm.initNonuniformCatmullRom(r.z,h.z,c.z,o.z,t,i,n)}else"catmullrom"===this.curveType&&(Tm.initCatmullRom(r.x,h.x,c.x,o.x,this.tension),Dm.initCatmullRom(r.y,h.y,c.y,o.y,this.tension),Nm.initCatmullRom(r.z,h.z,c.z,o.z,this.tension));return t.set(Tm.calc(l),Dm.calc(l),Nm.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new iu).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Am(e,t,i,n,s){const r=.5*(n-t),o=.5*(s-i),a=e*e;return(2*i-2*n+r+o)*(e*a)+(-3*i+3*n-2*r-o)*a+r*e+i}function Rm(e,t,i,n){return function(e,t){const i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function Pm(e,t,i,n,s){return function(e,t){const i=1-e;return i*i*i*t}(e,t)+function(e,t){const i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,s)}class Om extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kd,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new kd,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new kd;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd,i=this.v0,n=this.v1,s=this.v2,r=this.v3;return t.set(Pm(e,i.x,n.x,s.x,r.x),Pm(e,i.y,n.y,s.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Fm extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new iu,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new iu;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu,i=this.v0,n=this.v1,s=this.v2,r=this.v3;return t.set(Pm(e,i.x,n.x,s.x,r.x),Pm(e,i.y,n.y,s.y,r.y),Pm(e,i.z,n.z,s.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Bm extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kd,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zm extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vm extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kd,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new kd;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd,i=this.v0,n=this.v1,s=this.v2;return t.set(Rm(e,i.x,n.x,s.x),Rm(e,i.y,n.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Wm extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new iu;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu,i=this.v0,n=this.v1,s=this.v2;return t.set(Rm(e,i.x,n.x,s.x),Rm(e,i.y,n.y,s.y),Rm(e,i.z,n.z,s.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hm extends xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd,i=this.points,n=(i.length-1)*e,s=Math.floor(n),r=n-s,o=i[0===s?s:s-1],a=i[s],l=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return t.set(Am(r,o.x,a.x,l.x,h.x),Am(r,o.y,a.y,l.y,h.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new kd).fromArray(i))}return this}}var Um=Object.freeze({__proto__:null,ArcCurve:Lm,CatmullRomCurve3:Im,CubicBezierCurve:Om,CubicBezierCurve3:Fm,EllipseCurve:km,LineCurve:Bm,LineCurve3:zm,QuadraticBezierCurve:Vm,QuadraticBezierCurve3:Wm,SplineCurve:Hm});class jm extends xm{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Um[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),n=this.getCurveLengths();let s=0;for(;s<n.length;){if(n[s]>=i){const e=n[s]-i,r=this.curves[s],o=r.getLength(),a=0===o?0:1-e/o;return r.getPointAt(a,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let i;for(let n=0,s=this.curves;n<s.length;n++){const r=s[n],o=r.isEllipseCurve?2*e:r.isLineCurve||r.isLineCurve3?1:r.isSplineCurve?e*r.points.length:e,a=r.getPoints(o);for(let e=0;e<a.length;e++){const n=a[e];i&&i.equals(n)||(t.push(n),i=n)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push((new Um[i.type]).fromJSON(i))}return this}}class Gm extends jm{constructor(e){super(),this.type="Path",this.currentPoint=new kd,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Bm(this.currentPoint.clone(),new kd(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){const s=new Vm(this.currentPoint.clone(),new kd(e,t),new kd(i,n));return this.curves.push(s),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,s,r){const o=new Om(this.currentPoint.clone(),new kd(e,t),new kd(i,n),new kd(s,r));return this.curves.push(o),this.currentPoint.set(s,r),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Hm(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,s,r){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,i,n,s,r),this}absarc(e,t,i,n,s,r){return this.absellipse(e,t,i,i,n,s,r),this}ellipse(e,t,i,n,s,r,o,a){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+l,t+h,i,n,s,r,o,a),this}absellipse(e,t,i,n,s,r,o,a){const l=new km(e,t,i,n,s,r,o,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Km extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new kd(0,-.5),new kd(.5,0),new kd(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=bd(n,0,2*Math.PI);const s=[],r=[],o=[],a=[],l=[],h=1/t,c=new iu,d=new kd,u=new iu,g=new iu,p=new iu;let f=0,m=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:f=e[_+1].x-e[_].x,m=e[_+1].y-e[_].y,u.x=1*m,u.y=-f,u.z=0*m,p.copy(u),u.normalize(),a.push(u.x,u.y,u.z);break;case e.length-1:a.push(p.x,p.y,p.z);break;default:f=e[_+1].x-e[_].x,m=e[_+1].y-e[_].y,u.x=1*m,u.y=-f,u.z=0*m,g.copy(u),u.x+=p.x,u.y+=p.y,u.z+=p.z,u.normalize(),a.push(u.x,u.y,u.z),p.copy(g)}for(let _=0;_<=t;_++){const s=i+_*h*n,u=Math.sin(s),g=Math.cos(s);for(let i=0;i<=e.length-1;i++){c.x=e[i].x*u,c.y=e[i].y,c.z=e[i].x*g,r.push(c.x,c.y,c.z),d.x=_/t,d.y=i/(e.length-1),o.push(d.x,d.y);const n=a[3*i+0]*u,s=a[3*i+1],h=a[3*i+0]*g;l.push(n,s,h)}}for(let _=0;_<t;_++)for(let t=0;t<e.length-1;t++){const i=t+_*e.length,n=i,r=i+e.length,o=i+e.length+1,a=i+1;s.push(n,r,a),s.push(o,a,r)}this.setIndex(s),this.setAttribute("position",new Gg(r,3)),this.setAttribute("uv",new Gg(o,2)),this.setAttribute("normal",new Gg(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Km(e.points,e.segments,e.phiStart,e.phiLength)}}class $m extends Km{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const s=new Gm;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:n}}static fromJSON(e){return new $m(e.radius,e.length,e.capSegments,e.radialSegments)}}class qm extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},t=Math.max(3,t);const s=[],r=[],o=[],a=[],l=new iu,h=new kd;r.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let c=0,d=3;c<=t;c++,d+=3){const s=i+c/t*n;l.x=e*Math.cos(s),l.y=e*Math.sin(s),r.push(l.x,l.y,l.z),o.push(0,0,1),h.x=(r[d]/e+1)/2,h.y=(r[d+1]/e+1)/2,a.push(h.x,h.y)}for(let c=1;c<=t;c++)s.push(c,c+1,0);this.setIndex(s),this.setAttribute("position",new Gg(r,3)),this.setAttribute("normal",new Gg(o,3)),this.setAttribute("uv",new Gg(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qm extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a};const l=this;n=Math.floor(n),s=Math.floor(s);const h=[],c=[],d=[],u=[];let g=0;const p=[],f=i/2;let m=0;function _(i){const s=g,r=new kd,p=new iu;let _=0;const v=!0===i?e:t,b=!0===i?1:-1;for(let e=1;e<=n;e++)c.push(0,f*b,0),d.push(0,b,0),u.push(.5,.5),g++;const y=g;for(let e=0;e<=n;e++){const t=e/n*a+o,i=Math.cos(t),s=Math.sin(t);p.x=v*s,p.y=f*b,p.z=v*i,c.push(p.x,p.y,p.z),d.push(0,b,0),r.x=.5*i+.5,r.y=.5*s*b+.5,u.push(r.x,r.y),g++}for(let e=0;e<n;e++){const t=s+e,n=y+e;!0===i?h.push(n,n+1,t):h.push(n+1,n,t),_+=3}l.addGroup(m,_,!0===i?1:2),m+=_}!function(){const r=new iu,_=new iu;let v=0;const b=(t-e)/i;for(let l=0;l<=s;l++){const h=[],m=l/s,v=m*(t-e)+e;for(let e=0;e<=n;e++){const t=e/n,s=t*a+o,l=Math.sin(s),p=Math.cos(s);_.x=v*l,_.y=-m*i+f,_.z=v*p,c.push(_.x,_.y,_.z),r.set(l,b,p).normalize(),d.push(r.x,r.y,r.z),u.push(t,1-m),h.push(g++)}p.push(h)}for(let i=0;i<n;i++)for(let n=0;n<s;n++){const r=p[n][i],o=p[n+1][i],a=p[n+1][i+1],l=p[n][i+1];(e>0||0!==n)&&(h.push(r,o,l),v+=3),(t>0||n!==s-1)&&(h.push(o,a,l),v+=3)}l.addGroup(m,v,0),m+=v}(),!1===r&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(h),this.setAttribute("position",new Gg(c,3)),this.setAttribute("normal",new Gg(d,3)),this.setAttribute("uv",new Gg(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xm extends Qm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,i,n,s,r,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:r,thetaLength:o}}static fromJSON(e){return new Xm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ym extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};const s=[],r=[];function o(e,t,i,n){const s=n+1,r=[];for(let o=0;o<=s;o++){r[o]=[];const n=e.clone().lerp(i,o/s),a=t.clone().lerp(i,o/s),l=s-o;for(let e=0;e<=l;e++)r[o][e]=0===e&&o===s?n:n.clone().lerp(a,e/l)}for(let o=0;o<s;o++)for(let e=0;e<2*(s-o)-1;e++){const t=Math.floor(e/2);e%2===0?(a(r[o][t+1]),a(r[o+1][t]),a(r[o][t])):(a(r[o][t+1]),a(r[o+1][t+1]),a(r[o+1][t]))}}function a(e){s.push(e.x,e.y,e.z)}function l(t,i){const n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function h(e,t,i,n){n<0&&1===e.x&&(r[t]=e.x-1),0===i.x&&0===i.z&&(r[t]=n/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){const i=new iu,n=new iu,s=new iu;for(let r=0;r<t.length;r+=3)l(t[r+0],i),l(t[r+1],n),l(t[r+2],s),o(i,n,s,e)}(n),function(e){const t=new iu;for(let i=0;i<s.length;i+=3)t.x=s[i+0],t.y=s[i+1],t.z=s[i+2],t.normalize().multiplyScalar(e),s[i+0]=t.x,s[i+1]=t.y,s[i+2]=t.z}(i),function(){const e=new iu;for(let i=0;i<s.length;i+=3){e.x=s[i+0],e.y=s[i+1],e.z=s[i+2];const n=c(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);r.push(n,1-o)}var t;(function(){const e=new iu,t=new iu,i=new iu,n=new iu,o=new kd,a=new kd,l=new kd;for(let d=0,u=0;d<s.length;d+=9,u+=6){e.set(s[d+0],s[d+1],s[d+2]),t.set(s[d+3],s[d+4],s[d+5]),i.set(s[d+6],s[d+7],s[d+8]),o.set(r[u+0],r[u+1]),a.set(r[u+2],r[u+3]),l.set(r[u+4],r[u+5]),n.copy(e).add(t).add(i).divideScalar(3);const g=c(n);h(o,u+0,e,g),h(a,u+2,t,g),h(l,u+4,i,g)}})(),function(){for(let e=0;e<r.length;e+=6){const t=r[e+0],i=r[e+2],n=r[e+4],s=Math.max(t,i,n),o=Math.min(t,i,n);s>.9&&o<.1&&(t<.2&&(r[e+0]+=1),i<.2&&(r[e+2]+=1),n<.2&&(r[e+4]+=1))}}()}(),this.setAttribute("position",new Gg(s,3)),this.setAttribute("normal",new Gg(s.slice(),3)),this.setAttribute("uv",new Gg(r,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ym(e.vertices,e.indices,e.radius,e.details)}}class Zm extends Ym{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zm(e.radius,e.detail)}}const Jm=new iu,e_=new iu,t_=new iu,i_=new bg;class n_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const i=4,n=Math.pow(10,i),s=Math.cos(md*t),r=e.getIndex(),o=e.getAttribute("position"),a=r?r.count:o.count,l=[0,0,0],h=["a","b","c"],c=new Array(3),d={},u=[];for(let e=0;e<a;e+=3){r?(l[0]=r.getX(e),l[1]=r.getX(e+1),l[2]=r.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:i,c:a}=i_;if(t.fromBufferAttribute(o,l[0]),i.fromBufferAttribute(o,l[1]),a.fromBufferAttribute(o,l[2]),i_.getNormal(t_),c[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,c[1]=`${Math.round(i.x*n)},${Math.round(i.y*n)},${Math.round(i.z*n)}`,c[2]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,i=c[e],n=c[t],r=i_[h[e]],o=i_[h[t]],a=`${i}_${n}`,g=`${n}_${i}`;g in d&&d[g]?(t_.dot(d[g].normal)<=s&&(u.push(r.x,r.y,r.z),u.push(o.x,o.y,o.z)),d[g]=null):a in d||(d[a]={index0:l[e],index1:l[t],normal:t_.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:i}=d[e];Jm.fromBufferAttribute(o,t),e_.fromBufferAttribute(o,i),u.push(Jm.x,Jm.y,Jm.z),u.push(e_.x,e_.y,e_.z)}this.setAttribute("position",new Gg(u,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class s_ extends Gm{constructor(e){super(e),this.uuid=vd(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push((new Gm).fromJSON(i))}return this}}const r_=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=t&&t.length,s=n?t[0]*i:e.length;let r=o_(e,0,s,i,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,h,c,d,u,g;if(n&&(r=function(e,t,i,n){const s=[];let r,o,a,l,h;for(r=0,o=t.length;r<o;r++)a=t[r]*n,l=r<o-1?t[r+1]*n:e.length,h=o_(e,a,l,n,!1),h===h.next&&(h.steiner=!0),s.push(__(h));for(s.sort(g_),r=0;r<s.length;r++)i=p_(s[r],i);return i}(e,t,r,i)),e.length>80*i){a=h=e[0],l=c=e[1];for(let t=i;t<s;t+=i)d=e[t],u=e[t+1],d<a&&(a=d),u<l&&(l=u),d>h&&(h=d),u>c&&(c=u);g=Math.max(h-a,c-l),g=0!==g?32767/g:0}return l_(r,o,i,a,l,g,0),o};function o_(e,t,i,n,s){let r,o;if(s===function(e,t,i,n){let s=0;for(let r=t,o=i-n;r<i;r+=n)s+=(e[o]-e[r])*(e[r+1]+e[o+1]),o=r;return s}(e,t,i,n)>0)for(r=t;r<i;r+=n)o=E_(r,e[r],e[r+1],o);else for(r=i-n;r>=t;r-=n)o=E_(r,e[r],e[r+1],o);return o&&w_(o,o.next)&&(M_(o),o=o.next),o}function a_(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!w_(n,n.next)&&0!==y_(n.prev,n,n.next))n=n.next;else{if(M_(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function l_(e,t,i,n,s,r,o){if(!e)return;!o&&r&&function(e,t,i,n){let s=e;do{0===s.z&&(s.z=m_(s.x,s.y,t,i,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){let t,i,n,s,r,o,a,l,h=1;do{for(i=e,e=null,r=null,o=0;i;){for(o++,n=i,a=0,t=0;t<h&&(a++,n=n.nextZ,n);t++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(s=i,i=i.nextZ,a--):(s=n,n=n.nextZ,l--),r?r.nextZ=s:e=s,s.prevZ=r,r=s;i=n}r.nextZ=null,h*=2}while(o>1)}(s)}(e,n,s,r);let a,l,h=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,r?c_(e,n,s,r):h_(e))t.push(a.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),M_(e),e=l.next,h=l.next;else if((e=l)===h){o?1===o?l_(e=d_(a_(e),t,i),t,i,n,s,r,2):2===o&&u_(e,t,i,n,s,r):l_(a_(e),t,i,n,s,r,1);break}}function h_(e){const t=e.prev,i=e,n=e.next;if(y_(t,i,n)>=0)return!1;const s=t.x,r=i.x,o=n.x,a=t.y,l=i.y,h=n.y,c=s<r?s<o?s:o:r<o?r:o,d=a<l?a<h?a:h:l<h?l:h,u=s>r?s>o?s:o:r>o?r:o,g=a>l?a>h?a:h:l>h?l:h;let p=n.next;for(;p!==t;){if(p.x>=c&&p.x<=u&&p.y>=d&&p.y<=g&&v_(s,a,r,l,o,h,p.x,p.y)&&y_(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function c_(e,t,i,n){const s=e.prev,r=e,o=e.next;if(y_(s,r,o)>=0)return!1;const a=s.x,l=r.x,h=o.x,c=s.y,d=r.y,u=o.y,g=a<l?a<h?a:h:l<h?l:h,p=c<d?c<u?c:u:d<u?d:u,f=a>l?a>h?a:h:l>h?l:h,m=c>d?c>u?c:u:d>u?d:u,_=m_(g,p,t,i,n),v=m_(f,m,t,i,n);let b=e.prevZ,y=e.nextZ;for(;b&&b.z>=_&&y&&y.z<=v;){if(b.x>=g&&b.x<=f&&b.y>=p&&b.y<=m&&b!==s&&b!==o&&v_(a,c,l,d,h,u,b.x,b.y)&&y_(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,y.x>=g&&y.x<=f&&y.y>=p&&y.y<=m&&y!==s&&y!==o&&v_(a,c,l,d,h,u,y.x,y.y)&&y_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;b&&b.z>=_;){if(b.x>=g&&b.x<=f&&b.y>=p&&b.y<=m&&b!==s&&b!==o&&v_(a,c,l,d,h,u,b.x,b.y)&&y_(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;y&&y.z<=v;){if(y.x>=g&&y.x<=f&&y.y>=p&&y.y<=m&&y!==s&&y!==o&&v_(a,c,l,d,h,u,y.x,y.y)&&y_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function d_(e,t,i){let n=e;do{const s=n.prev,r=n.next.next;!w_(s,r)&&C_(s,n,n.next,r)&&k_(s,r)&&k_(r,s)&&(t.push(s.i/i|0),t.push(n.i/i|0),t.push(r.i/i|0),M_(n),M_(n.next),n=e=r),n=n.next}while(n!==e);return a_(n)}function u_(e,t,i,n,s,r){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&b_(o,e)){let a=L_(o,e);return o=a_(o,o.next),a=a_(a,a.next),l_(o,t,i,n,s,r,0),void l_(a,t,i,n,s,r,0)}e=e.next}o=o.next}while(o!==e)}function g_(e,t){return e.x-t.x}function p_(e,t){const i=function(e,t){let i,n=t,s=-1/0;const r=e.x,o=e.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const e=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>s&&(s=e,i=n.x<n.next.x?n:n.next,e===r))return i}n=n.next}while(n!==t);if(!i)return null;const a=i,l=i.x,h=i.y;let c,d=1/0;n=i;do{r>=n.x&&n.x>=l&&r!==n.x&&v_(o<h?r:s,o,l,h,o<h?s:r,o,n.x,n.y)&&(c=Math.abs(o-n.y)/(r-n.x),k_(n,e)&&(c<d||c===d&&(n.x>i.x||n.x===i.x&&f_(i,n)))&&(i=n,d=c)),n=n.next}while(n!==a);return i}(e,t);if(!i)return t;const n=L_(i,e);return a_(n,n.next),a_(i,i.next)}function f_(e,t){return y_(e.prev,e,t.prev)<0&&y_(t.next,e,e.next)<0}function m_(e,t,i,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function __(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function v_(e,t,i,n,s,r,o,a){return(s-o)*(t-a)>=(e-o)*(r-a)&&(e-o)*(n-a)>=(i-o)*(t-a)&&(i-o)*(r-a)>=(s-o)*(n-a)}function b_(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&C_(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(k_(e,t)&&k_(t,e)&&function(e,t){let i=e,n=!1;const s=(e.x+t.x)/2,r=(e.y+t.y)/2;do{i.y>r!==i.next.y>r&&i.next.y!==i.y&&s<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(y_(e.prev,e,t.prev)||y_(e,t.prev,t))||w_(e,t)&&y_(e.prev,e,e.next)>0&&y_(t.prev,t,t.next)>0)}function y_(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function w_(e,t){return e.x===t.x&&e.y===t.y}function C_(e,t,i,n){const s=x_(y_(e,t,i)),r=x_(y_(e,t,n)),o=x_(y_(i,n,e)),a=x_(y_(i,n,t));return s!==r&&o!==a||(!(0!==s||!S_(e,i,t))||(!(0!==r||!S_(e,n,t))||(!(0!==o||!S_(i,e,n))||!(0!==a||!S_(i,t,n)))))}function S_(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function x_(e){return e>0?1:e<0?-1:0}function k_(e,t){return y_(e.prev,e,e.next)<0?y_(e,t,e.next)>=0&&y_(e,e.prev,t)>=0:y_(e,t,e.prev)<0||y_(e,e.next,t)<0}function L_(e,t){const i=new T_(e.i,e.x,e.y),n=new T_(t.i,t.x,t.y),s=e.next,r=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,n.next=i,i.prev=n,r.next=n,n.prev=r,n}function E_(e,t,i,n){const s=new T_(e,t,i);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function M_(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function T_(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class D_{static area(e){const t=e.length;let i=0;for(let n=t-1,s=0;s<t;n=s++)i+=e[n].x*e[s].y-e[s].x*e[n].y;return.5*i}static isClockWise(e){return D_.area(e)<0}static triangulateShape(e,t){const i=[],n=[],s=[];N_(e),I_(i,e);let r=e.length;t.forEach(N_);for(let a=0;a<t.length;a++)n.push(r),r+=t[a].length,I_(i,t[a]);const o=r_(i,n);for(let a=0;a<o.length;a+=3)s.push(o.slice(a,a+3));return s}}function N_(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function I_(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}class A_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s_([new kd(.5,.5),new kd(-.5,.5),new kd(-.5,-.5),new kd(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],s=[];for(let o=0,a=e.length;o<a;o++){r(e[o])}function r(e){const r=[],o=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let h=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:c-.1,u=void 0!==t.bevelOffset?t.bevelOffset:0,g=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:R_;let m,_,v,b,y,w=!1;p&&(m=p.getSpacedPoints(a),w=!0,h=!1,_=p.computeFrenetFrames(a,!1),v=new iu,b=new iu,y=new iu),h||(g=0,c=0,d=0,u=0);const C=e.extractPoints(o);let S=C.shape;const x=C.holes;if(!D_.isClockWise(S)){S=S.reverse();for(let e=0,t=x.length;e<t;e++){const t=x[e];D_.isClockWise(t)&&(x[e]=t.reverse())}}const k=D_.triangulateShape(S,x),L=S;for(let t=0,i=x.length;t<i;t++){const e=x[t];S=S.concat(e)}function E(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,i)}const M=S.length,T=k.length;function D(e,t,i){let n,s,r;const o=e.x-t.x,a=e.y-t.y,l=i.x-e.x,h=i.y-e.y,c=o*o+a*a,d=o*h-a*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(c),u=Math.sqrt(l*l+h*h),g=t.x-a/d,p=t.y+o/d,f=((i.x-h/u-g)*h-(i.y+l/u-p)*l)/(o*h-a*l);n=g+o*f-e.x,s=p+a*f-e.y;const m=n*n+s*s;if(m<=2)return new kd(n,s);r=Math.sqrt(m/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(h)&&(e=!0),e?(n=-a,s=o,r=Math.sqrt(c)):(n=o,s=a,r=Math.sqrt(c/2))}return new kd(n/r,s/r)}const N=[];for(let t=0,i=L.length,n=i-1,s=t+1;t<i;t++,n++,s++)n===i&&(n=0),s===i&&(s=0),N[t]=D(L[t],L[n],L[s]);const I=[];let A,R=N.concat();for(let t=0,i=x.length;t<i;t++){const e=x[t];A=[];for(let t=0,i=e.length,n=i-1,s=t+1;t<i;t++,n++,s++)n===i&&(n=0),s===i&&(s=0),A[t]=D(e[t],e[n],e[s]);I.push(A),R=R.concat(A)}for(let t=0;t<g;t++){const e=t/g,i=c*Math.cos(e*Math.PI/2),n=d*Math.sin(e*Math.PI/2)+u;for(let t=0,s=L.length;t<s;t++){const e=E(L[t],N[t],n);F(e.x,e.y,-i)}for(let t=0,s=x.length;t<s;t++){const e=x[t];A=I[t];for(let t=0,s=e.length;t<s;t++){const s=E(e[t],A[t],n);F(s.x,s.y,-i)}}}const P=d+u;for(let t=0;t<M;t++){const e=h?E(S[t],R[t],P):S[t];w?(b.copy(_.normals[0]).multiplyScalar(e.x),v.copy(_.binormals[0]).multiplyScalar(e.y),y.copy(m[0]).add(b).add(v),F(y.x,y.y,y.z)):F(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<M;e++){const i=h?E(S[e],R[e],P):S[e];w?(b.copy(_.normals[t]).multiplyScalar(i.x),v.copy(_.binormals[t]).multiplyScalar(i.y),y.copy(m[t]).add(b).add(v),F(y.x,y.y,y.z)):F(i.x,i.y,l/a*t)}for(let t=g-1;t>=0;t--){const e=t/g,i=c*Math.cos(e*Math.PI/2),n=d*Math.sin(e*Math.PI/2)+u;for(let t=0,s=L.length;t<s;t++){const e=E(L[t],N[t],n);F(e.x,e.y,l+i)}for(let t=0,s=x.length;t<s;t++){const e=x[t];A=I[t];for(let t=0,s=e.length;t<s;t++){const s=E(e[t],A[t],n);w?F(s.x,s.y+m[a-1].y,m[a-1].x+i):F(s.x,s.y,l+i)}}}function O(e,t){let i=e.length;for(;--i>=0;){const n=i;let s=i-1;s<0&&(s=e.length-1);for(let e=0,i=a+2*g;e<i;e++){const i=M*e,r=M*(e+1);z(t+n+i,t+s+i,t+s+r,t+n+r)}}}function F(e,t,i){r.push(e),r.push(t),r.push(i)}function B(e,t,s){V(e),V(t),V(s);const r=n.length/3,o=f.generateTopUV(i,n,r-3,r-2,r-1);W(o[0]),W(o[1]),W(o[2])}function z(e,t,s,r){V(e),V(t),V(r),V(t),V(s),V(r);const o=n.length/3,a=f.generateSideWallUV(i,n,o-6,o-3,o-2,o-1);W(a[0]),W(a[1]),W(a[3]),W(a[1]),W(a[2]),W(a[3])}function V(e){n.push(r[3*e+0]),n.push(r[3*e+1]),n.push(r[3*e+2])}function W(e){s.push(e.x),s.push(e.y)}!function(){const e=n.length/3;if(h){let e=0,t=M*e;for(let i=0;i<T;i++){const e=k[i];B(e[2]+t,e[1]+t,e[0]+t)}e=a+2*g,t=M*e;for(let i=0;i<T;i++){const e=k[i];B(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<T;e++){const t=k[e];B(t[2],t[1],t[0])}for(let e=0;e<T;e++){const t=k[e];B(t[0]+M*a,t[1]+M*a,t[2]+M*a)}}i.addGroup(e,n.length/3-e,0)}(),function(){const e=n.length/3;let t=0;O(L,t),t+=L.length;for(let i=0,n=x.length;i<n;i++){const e=x[i];O(e,t),t+=e.length}i.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new Gg(n,3)),this.setAttribute("uv",new Gg(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let n=0,s=e.length;n<s;n++){const t=e[n];i.shapes.push(t.uuid)}else i.shapes.push(e.uuid);i.options=Object.assign({},t),void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++){const n=t[e.shapes[s]];i.push(n)}const n=e.options.extrudePath;return void 0!==n&&(e.options.extrudePath=(new Um[n.type]).fromJSON(n)),new A_(i,e.options)}}const R_={generateTopUV:function(e,t,i,n,s){const r=t[3*i],o=t[3*i+1],a=t[3*n],l=t[3*n+1],h=t[3*s],c=t[3*s+1];return[new kd(r,o),new kd(a,l),new kd(h,c)]},generateSideWallUV:function(e,t,i,n,s,r){const o=t[3*i],a=t[3*i+1],l=t[3*i+2],h=t[3*n],c=t[3*n+1],d=t[3*n+2],u=t[3*s],g=t[3*s+1],p=t[3*s+2],f=t[3*r],m=t[3*r+1],_=t[3*r+2];return Math.abs(a-c)<Math.abs(o-h)?[new kd(o,1-l),new kd(h,1-d),new kd(u,1-p),new kd(f,1-_)]:[new kd(a,1-l),new kd(c,1-d),new kd(g,1-p),new kd(m,1-_)]}};class P_ extends Ym{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new P_(e.radius,e.detail)}}class O_ extends Ym{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O_(e.radius,e.detail)}}class F_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const s=e/2,r=t/2,o=Math.floor(i),a=Math.floor(n),l=o+1,h=a+1,c=e/o,d=t/a,u=[],g=[],p=[],f=[];for(let m=0;m<h;m++){const e=m*d-r;for(let t=0;t<l;t++){const i=t*c-s;g.push(i,-e,0),p.push(0,0,1),f.push(t/o),f.push(1-m/a)}}for(let m=0;m<a;m++)for(let e=0;e<o;e++){const t=e+l*m,i=e+l*(m+1),n=e+1+l*(m+1),s=e+1+l*m;u.push(t,i,s),u.push(i,n,s)}this.setIndex(u),this.setAttribute("position",new Gg(g,3)),this.setAttribute("normal",new Gg(p,3)),this.setAttribute("uv",new Gg(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F_(e.width,e.height,e.widthSegments,e.heightSegments)}}class B_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:s,thetaLength:r},i=Math.max(3,i),n=Math.max(1,n);const o=[],a=[],l=[],h=[];let c=e;const d=(t-e)/n,u=new iu,g=new kd;for(let p=0;p<=n;p++){for(let e=0;e<=i;e++){const n=s+e/i*r;u.x=c*Math.cos(n),u.y=c*Math.sin(n),a.push(u.x,u.y,u.z),l.push(0,0,1),g.x=(u.x/t+1)/2,g.y=(u.y/t+1)/2,h.push(g.x,g.y)}c+=d}for(let p=0;p<n;p++){const e=p*(i+1);for(let t=0;t<i;t++){const n=t+e,s=n,r=n+i+1,a=n+i+2,l=n+1;o.push(s,r,l),o.push(r,a,l)}}this.setIndex(o),this.setAttribute("position",new Gg(a,3)),this.setAttribute("normal",new Gg(l,3)),this.setAttribute("uv",new Gg(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class z_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s_([new kd(0,.5),new kd(-.5,-.5),new kd(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],s=[],r=[];let o=0,a=0;if(!1===Array.isArray(e))l(e);else for(let h=0;h<e.length;h++)l(e[h]),this.addGroup(o,a,h),o+=a,a=0;function l(e){const o=n.length/3,l=e.extractPoints(t);let h=l.shape;const c=l.holes;!1===D_.isClockWise(h)&&(h=h.reverse());for(let t=0,i=c.length;t<i;t++){const e=c[t];!0===D_.isClockWise(e)&&(c[t]=e.reverse())}const d=D_.triangulateShape(h,c);for(let t=0,i=c.length;t<i;t++){const e=c[t];h=h.concat(e)}for(let t=0,i=h.length;t<i;t++){const e=h[t];n.push(e.x,e.y,0),s.push(0,0,1),r.push(e.x,e.y)}for(let t=0,n=d.length;t<n;t++){const e=d[t],n=e[0]+o,s=e[1]+o,r=e[2]+o;i.push(n,s,r),a+=3}}this.setIndex(i),this.setAttribute("position",new Gg(n,3)),this.setAttribute("normal",new Gg(s,3)),this.setAttribute("uv",new Gg(r,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){const n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let n=0,s=e.shapes.length;n<s;n++){const s=t[e.shapes[n]];i.push(s)}return new z_(i,e.curveSegments)}}class V_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:s,thetaStart:r,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const a=Math.min(r+o,Math.PI);let l=0;const h=[],c=new iu,d=new iu,u=[],g=[],p=[],f=[];for(let m=0;m<=i;m++){const u=[],_=m/i;let v=0;0===m&&0===r?v=.5/t:m===i&&a===Math.PI&&(v=-.5/t);for(let i=0;i<=t;i++){const a=i/t;c.x=-e*Math.cos(n+a*s)*Math.sin(r+_*o),c.y=e*Math.cos(r+_*o),c.z=e*Math.sin(n+a*s)*Math.sin(r+_*o),g.push(c.x,c.y,c.z),d.copy(c).normalize(),p.push(d.x,d.y,d.z),f.push(a+v,1-_),u.push(l++)}h.push(u)}for(let m=0;m<i;m++)for(let e=0;e<t;e++){const t=h[m][e+1],n=h[m][e],s=h[m+1][e],o=h[m+1][e+1];(0!==m||r>0)&&u.push(t,n,o),(m!==i-1||a<Math.PI)&&u.push(n,s,o)}this.setIndex(u),this.setAttribute("position",new Gg(g,3)),this.setAttribute("normal",new Gg(p,3)),this.setAttribute("uv",new Gg(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new V_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class W_ extends Ym{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new W_(e.radius,e.detail)}}class H_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:s},i=Math.floor(i),n=Math.floor(n);const r=[],o=[],a=[],l=[],h=new iu,c=new iu,d=new iu;for(let u=0;u<=i;u++)for(let r=0;r<=n;r++){const g=r/n*s,p=u/i*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(g),c.y=(e+t*Math.cos(p))*Math.sin(g),c.z=t*Math.sin(p),o.push(c.x,c.y,c.z),h.x=e*Math.cos(g),h.y=e*Math.sin(g),d.subVectors(c,h).normalize(),a.push(d.x,d.y,d.z),l.push(r/n),l.push(u/i)}for(let u=1;u<=i;u++)for(let e=1;e<=n;e++){const t=(n+1)*u+e-1,i=(n+1)*(u-1)+e-1,s=(n+1)*(u-1)+e,o=(n+1)*u+e;r.push(t,i,o),r.push(i,s,o)}this.setIndex(r),this.setAttribute("position",new Gg(o,3)),this.setAttribute("normal",new Gg(a,3)),this.setAttribute("uv",new Gg(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class U_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:s,q:r},i=Math.floor(i),n=Math.floor(n);const o=[],a=[],l=[],h=[],c=new iu,d=new iu,u=new iu,g=new iu,p=new iu,f=new iu,m=new iu;for(let v=0;v<=i;++v){const o=v/i*s*Math.PI*2;_(o,s,r,e,u),_(o+.01,s,r,e,g),f.subVectors(g,u),m.addVectors(g,u),p.crossVectors(f,m),m.crossVectors(p,f),p.normalize(),m.normalize();for(let e=0;e<=n;++e){const s=e/n*Math.PI*2,r=-t*Math.cos(s),o=t*Math.sin(s);c.x=u.x+(r*m.x+o*p.x),c.y=u.y+(r*m.y+o*p.y),c.z=u.z+(r*m.z+o*p.z),a.push(c.x,c.y,c.z),d.subVectors(c,u).normalize(),l.push(d.x,d.y,d.z),h.push(v/i),h.push(e/n)}}for(let v=1;v<=i;v++)for(let e=1;e<=n;e++){const t=(n+1)*(v-1)+(e-1),i=(n+1)*v+(e-1),s=(n+1)*v+e,r=(n+1)*(v-1)+e;o.push(t,i,r),o.push(i,s,r)}function _(e,t,i,n,s){const r=Math.cos(e),o=Math.sin(e),a=i/t*e,l=Math.cos(a);s.x=n*(2+l)*.5*r,s.y=n*(2+l)*o*.5,s.z=n*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new Gg(a,3)),this.setAttribute("normal",new Gg(l,3)),this.setAttribute("uv",new Gg(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class j_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wm(new iu(-1,-1,0),new iu(-1,1,0),new iu(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:s};const r=e.computeFrenetFrames(t,s);this.tangents=r.tangents,this.normals=r.normals,this.binormals=r.binormals;const o=new iu,a=new iu,l=new kd;let h=new iu;const c=[],d=[],u=[],g=[];function p(s){h=e.getPointAt(s/t,h);const l=r.normals[s],u=r.binormals[s];for(let e=0;e<=n;e++){const t=e/n*Math.PI*2,s=Math.sin(t),r=-Math.cos(t);a.x=r*l.x+s*u.x,a.y=r*l.y+s*u.y,a.z=r*l.z+s*u.z,a.normalize(),d.push(a.x,a.y,a.z),o.x=h.x+i*a.x,o.y=h.y+i*a.y,o.z=h.z+i*a.z,c.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===s?t:0),function(){for(let e=0;e<=t;e++)for(let i=0;i<=n;i++)l.x=e/t,l.y=i/n,u.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),s=(n+1)*e+(t-1),r=(n+1)*e+t,o=(n+1)*(e-1)+t;g.push(i,s,o),g.push(s,r,o)}}()}(),this.setIndex(g),this.setAttribute("position",new Gg(c,3)),this.setAttribute("normal",new Gg(d,3)),this.setAttribute("uv",new Gg(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new j_((new Um[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class G_ extends Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],i=new Set,n=new iu,s=new iu;if(null!==e.index){const r=e.attributes.position,o=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],h=l.start;for(let e=h,a=h+l.count;e<a;e+=3)for(let l=0;l<3;l++){const a=o.getX(e+l),h=o.getX(e+(l+1)%3);n.fromBufferAttribute(r,a),s.fromBufferAttribute(r,h),!0===K_(n,s,i)&&(t.push(n.x,n.y,n.z),t.push(s.x,s.y,s.z))}}}else{const r=e.attributes.position;for(let e=0,o=r.count/3;e<o;e++)for(let a=0;a<3;a++){const o=3*e+a,l=3*e+(a+1)%3;n.fromBufferAttribute(r,o),s.fromBufferAttribute(r,l),!0===K_(n,s,i)&&(t.push(n.x,n.y,n.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Gg(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function K_(e,t,i){const n=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==i.has(n)&&!0!==i.has(s)&&(i.add(n),i.add(s),!0)}var $_=Object.freeze({__proto__:null,BoxGeometry:gp,CapsuleGeometry:$m,CircleGeometry:qm,ConeGeometry:Xm,CylinderGeometry:Qm,DodecahedronGeometry:Zm,EdgesGeometry:n_,ExtrudeGeometry:A_,IcosahedronGeometry:P_,LatheGeometry:Km,OctahedronGeometry:O_,PlaneGeometry:F_,PolyhedronGeometry:Ym,RingGeometry:B_,ShapeGeometry:z_,SphereGeometry:V_,TetrahedronGeometry:W_,TorusGeometry:H_,TorusKnotGeometry:U_,TubeGeometry:j_,WireframeGeometry:G_});class q_ extends Eg{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xg(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Q_ extends vp{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class X_ extends Eg{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new xg(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sc,this.normalScale=new kd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Y_ extends X_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new kd(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bd(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xg(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xg(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xg(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Z_ extends Eg{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xg(16777215),this.specular=new xg(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sc,this.normalScale=new kd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hu,this.combine=xl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class J_ extends Eg{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xg(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sc,this.normalScale=new kd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ev extends Eg{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sc,this.normalScale=new kd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class tv extends Eg{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xg(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sc,this.normalScale=new kd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hu,this.combine=xl,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iv extends Eg{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bc,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class nv extends Eg{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class sv extends Eg{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xg(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sc,this.normalScale=new kd(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rv extends Qf{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ov(e,t,i){return!e||!i&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function av(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lv(e){const t=e.length,i=new Array(t);for(let n=0;n!==t;++n)i[n]=n;return i.sort((function(t,i){return e[t]-e[i]})),i}function hv(e,t,i){const n=e.length,s=new e.constructor(n);for(let r=0,o=0;o!==n;++r){const n=i[r]*t;for(let i=0;i!==t;++i)s[o++]=e[n+i]}return s}function cv(e,t,i,n){let s=1,r=e[0];for(;void 0!==r&&void 0===r[n];)r=e[s++];if(void 0===r)return;let o=r[n];if(void 0!==o)if(Array.isArray(o))do{o=r[n],void 0!==o&&(t.push(r.time),i.push.apply(i,o)),r=e[s++]}while(void 0!==r);else if(void 0!==o.toArray)do{o=r[n],void 0!==o&&(t.push(r.time),o.toArray(i,i.length)),r=e[s++]}while(void 0!==r);else do{o=r[n],void 0!==o&&(t.push(r.time),i.push(o)),r=e[s++]}while(void 0!==r)}const dv={convertArray:ov,isTypedArray:av,getKeyframeOrder:lv,sortedArray:hv,flattenJSON:cv,subclip:function(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const r=e.clone();r.name=t;const o=[];for(let l=0;l<r.tracks.length;++l){const e=r.tracks[l],t=e.getValueSize(),a=[],h=[];for(let r=0;r<e.times.length;++r){const o=e.times[r]*s;if(!(o<i||o>=n)){a.push(e.times[r]);for(let i=0;i<t;++i)h.push(e.values[r*t+i])}}0!==a.length&&(e.times=ov(a,e.times.constructor),e.values=ov(h,e.values.constructor),o.push(e))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;n<=0&&(n=30);const s=i.tracks.length,r=t/n;for(let o=0;o<s;++o){const t=i.tracks[o],n=t.ValueTypeName;if("bool"===n||"string"===n)continue;const s=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===n}));if(void 0===s)continue;let a=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let h=0;const c=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=c/3);const d=t.times.length-1;let u;if(r<=t.times[0]){const e=a,i=l-a;u=t.values.slice(e,i)}else if(r>=t.times[d]){const e=d*l+a,i=e+l-a;u=t.values.slice(e,i)}else{const e=t.createInterpolant(),i=a,n=l-a;e.evaluate(r),u=e.resultBuffer.slice(i,n)}if("quaternion"===n){(new tu).fromArray(u).normalize().conjugate().toArray(u)}const g=s.times.length;for(let e=0;e<g;++e){const t=e*c+h;if("quaternion"===n)tu.multiplyQuaternionsFlat(s.values,t,u,0,s.values,t);else{const e=c-2*h;for(let i=0;i<e;++i)s.values[t+i]-=u[i]}}}return e.blendMode=fc,e}};class uv{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],s=t[i-1];e:{t:{let r;i:{n:if(!(e<n)){for(let r=i+2;;){if(void 0===n){if(e<s)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===r)break;if(s=n,n=t[++i],e<n)break t}r=t.length;break i}if(e>=s)break e;{const o=t[1];e<o&&(i=2,s=o);for(let r=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===r)break;if(n=s,s=t[--i-1],e>=s)break t}r=i,i=0}}for(;i<r;){const n=i+r>>>1;e<t[n]?r=n:i=n+1}if(n=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,n)}return this.interpolate_(i,s,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=e*n;for(let r=0;r!==n;++r)t[r]=i[s+r];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gv extends uv{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:dc,endingEnd:dc}}intervalChanged_(e,t,i){const n=this.parameterPositions;let s=e-2,r=e+1,o=n[s],a=n[r];if(void 0===o)switch(this.getSettings_().endingStart){case uc:s=e,o=2*t-i;break;case gc:s=n.length-2,o=t+n[s]-n[s+1];break;default:s=e,o=i}if(void 0===a)switch(this.getSettings_().endingEnd){case uc:r=e,a=2*i-t;break;case gc:r=1,a=i+n[1]-n[0];break;default:r=e-1,a=t}const l=.5*(i-t),h=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-i),this._offsetPrev=s*h,this._offsetNext=r*h}interpolate_(e,t,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,h=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,u=this._weightNext,g=(i-t)/(n-t),p=g*g,f=p*g,m=-d*f+2*d*p-d*g,_=(1+d)*f+(-1.5-2*d)*p+(-.5+d)*g+1,v=(-1-u)*f+(1.5+u)*p+.5*g,b=u*f-u*p;for(let y=0;y!==o;++y)s[y]=m*r[h+y]+_*r[l+y]+v*r[a+y]+b*r[c+y];return s}}class pv extends uv{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,h=(i-t)/(n-t),c=1-h;for(let d=0;d!==o;++d)s[d]=r[l+d]*c+r[a+d]*h;return s}}class fv extends uv{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class mv{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ov(t,this.TimeBufferType),this.values=ov(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ov(e.times,Array),values:ov(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new fv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case lc:t=this.InterpolantFactoryMethodDiscrete;break;case hc:t=this.InterpolantFactoryMethodLinear;break;case cc:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lc;case this.InterpolantFactoryMethodLinear:return hc;case this.InterpolantFactoryMethodSmooth:return cc}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let s=0,r=n-1;for(;s!==n&&i[s]<e;)++s;for(;-1!==r&&i[r]>t;)--r;if(++r,0!==s||r!==n){s>=r&&(r=Math.max(r,1),s=r-1);const e=this.getValueSize();this.times=i.slice(s,r),this.values=this.values.slice(s*e,r*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let r=null;for(let o=0;o!==s;o++){const t=i[o];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,t),e=!1;break}if(null!==r&&r>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,t,r),e=!1;break}r=t}if(void 0!==n&&av(n))for(let o=0,a=n.length;o!==a;++o){const t=n[o];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),n=this.getInterpolation()===cc,s=e.length-1;let r=1;for(let o=1;o<s;++o){let s=!1;const a=e[o];if(a!==e[o+1]&&(1!==o||a!==e[0]))if(n)s=!0;else{const e=o*i,n=e-i,r=e+i;for(let o=0;o!==i;++o){const i=t[e+o];if(i!==t[n+o]||i!==t[r+o]){s=!0;break}}}if(s){if(o!==r){e[r]=e[o];const n=o*i,s=r*i;for(let e=0;e!==i;++e)t[s+e]=t[n+e]}++r}}if(s>0){e[r]=e[s];for(let e=s*i,n=r*i,o=0;o!==i;++o)t[n+o]=t[e+o];++r}return r!==e.length?(this.times=e.slice(0,r),this.values=t.slice(0,r*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}mv.prototype.TimeBufferType=Float32Array,mv.prototype.ValueBufferType=Float32Array,mv.prototype.DefaultInterpolation=hc;class _v extends mv{constructor(e,t,i){super(e,t,i)}}_v.prototype.ValueTypeName="bool",_v.prototype.ValueBufferType=Array,_v.prototype.DefaultInterpolation=lc,_v.prototype.InterpolantFactoryMethodLinear=void 0,_v.prototype.InterpolantFactoryMethodSmooth=void 0;class vv extends mv{}vv.prototype.ValueTypeName="color";class bv extends mv{}bv.prototype.ValueTypeName="number";class yv extends uv{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=(i-t)/(n-t);let l=e*o;for(let h=l+o;l!==h;l+=4)tu.slerpFlat(s,0,r,l-o,r,l,a);return s}}class wv extends mv{InterpolantFactoryMethodLinear(e){return new yv(this.times,this.values,this.getValueSize(),e)}}wv.prototype.ValueTypeName="quaternion",wv.prototype.InterpolantFactoryMethodSmooth=void 0;class Cv extends mv{constructor(e,t,i){super(e,t,i)}}Cv.prototype.ValueTypeName="string",Cv.prototype.ValueBufferType=Array,Cv.prototype.DefaultInterpolation=lc,Cv.prototype.InterpolantFactoryMethodLinear=void 0,Cv.prototype.InterpolantFactoryMethodSmooth=void 0;class Sv extends mv{}Sv.prototype.ValueTypeName="vector";class xv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pc;this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=vd(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let r=0,o=i.length;r!==o;++r)t.push(kv(i[r]).scale(n));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,r=i.length;s!==r;++s)t.push(mv.toJSON(i[s]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const s=t.length,r=[];for(let o=0;o<s;o++){let e=[],a=[];e.push((o+s-1)%s,o,(o+1)%s),a.push(0,1,0);const l=lv(e);e=hv(e,1,l),a=hv(a,1,l),n||0!==e[0]||(e.push(s),a.push(a[0])),r.push(new bv(".morphTargetInfluences["+t[o].name+"]",e,a).scale(1/i))}return new this(e,-1,r)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,a=e.length;o<a;o++){const t=e[o],i=t.name.match(s);if(i&&i.length>1){const e=i[1];let s=n[e];s||(n[e]=s=[]),s.push(t)}}const r=[];for(const o in n)r.push(this.CreateFromMorphTargetSequence(o,n[o],t,i));return r}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,n,s){if(0!==i.length){const r=[],o=[];cv(i,r,o,n),0!==r.length&&s.push(new e(t,r,o))}},n=[],s=e.name||"default",r=e.fps||30,o=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let h=0;h<l.length;h++){const e=l[h].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let i;for(i=0;i<e.length;i++)if(e[i].morphTargets)for(let n=0;n<e[i].morphTargets.length;n++)t[e[i].morphTargets[n]]=-1;for(const s in t){const t=[],r=[];for(let n=0;n!==e[i].morphTargets.length;++n){const n=e[i];t.push(n.time),r.push(n.morphTarget===s?1:0)}n.push(new bv(".morphTargetInfluence["+s+"]",t,r))}a=t.length*r}else{const s=".bones["+t[h].name+"]";i(Sv,s+".position",e,"pos",n),i(wv,s+".quaternion",e,"rot",n),i(Sv,s+".scale",e,"scl",n)}}if(0===n.length)return null;return new this(s,a,n,o)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function kv(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bv;case"vector":case"vector2":case"vector3":case"vector4":return Sv;case"color":return vv;case"quaternion":return wv;case"bool":case"boolean":return _v;case"string":return Cv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];cv(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Lv={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Ev{constructor(e,t,i){const n=this;let s,r=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++,!1===r&&void 0!==n.onStart&&n.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}}const Mv=new Ev;class Tv{constructor(e){this.manager=void 0!==e?e:Mv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise((function(n,s){i.load(e,n,t,s)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Tv.DEFAULT_MATERIAL_NAME="__DEFAULT";const Dv={};class Nv extends Error{constructor(e,t){super(e),this.response=t}}class Iv extends Tv{constructor(e){super(e)}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Lv.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout((()=>{t&&t(s),this.manager.itemEnd(e)}),0),s;if(void 0!==Dv[e])return void Dv[e].push({onLoad:t,onProgress:i,onError:n});Dv[e]=[],Dv[e].push({onLoad:t,onProgress:i,onError:n});const r=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(r).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const i=Dv[e],n=t.body.getReader(),s=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),r=s?parseInt(s):0,o=0!==r;let a=0;const l=new ReadableStream({start(e){!function t(){n.read().then((n=>{let{done:s,value:l}=n;if(s)e.close();else{a+=l.byteLength;const n=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:r});for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onProgress&&t.onProgress(n)}e.enqueue(l),t()}}),(t=>{e.error(t)}))}()}});return new Response(l)}throw new Nv(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),i=t&&t[1]?t[1].toLowerCase():void 0,n=new TextDecoder(i);return e.arrayBuffer().then((e=>n.decode(e)))}}})).then((t=>{Lv.add(e,t);const i=Dv[e];delete Dv[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onLoad&&n.onLoad(t)}})).catch((t=>{const i=Dv[e];if(void 0===i)throw this.manager.itemError(e),t;delete Dv[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Av extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=this,r=new Iv(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(i){try{t(s.parse(JSON.parse(i)))}catch(O2){n?n(O2):console.error(O2),s.manager.itemError(e)}}),i,n)}parse(e){const t=[];for(let i=0;i<e.length;i++){const n=xv.parse(e[i]);t.push(n)}return t}}class Rv extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=this,r=[],o=new bm,a=new Iv(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(s.withCredentials);let l=0;function h(h){a.load(e[h],(function(e){const i=s.parse(e,!0);r[h]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(o.minFilter=Yl),o.image=r,o.format=i.format,o.needsUpdate=!0,t&&t(o))}),i,n)}if(Array.isArray(e))for(let c=0,d=e.length;c<d;++c)h(c);else a.load(e,(function(e){const i=s.parse(e,!0);if(i.isCubemap){const e=i.mipmaps.length/i.mipmapCount;for(let t=0;t<e;t++){r[t]={mipmaps:[]};for(let e=0;e<i.mipmapCount;e++)r[t].mipmaps.push(i.mipmaps[t*i.mipmapCount+e]),r[t].format=i.format,r[t].width=i.width,r[t].height=i.height}o.image=r}else o.image.width=i.width,o.image.height=i.height,o.mipmaps=i.mipmaps;1===i.mipmapCount&&(o.minFilter=Yl),o.format=i.format,o.needsUpdate=!0,t&&t(o)}),i,n);return o}}class Pv extends Tv{constructor(e){super(e)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,r=Lv.get(e);if(void 0!==r)return s.manager.itemStart(e),setTimeout((function(){t&&t(r),s.manager.itemEnd(e)}),0),r;const o=Nd("img");function a(){h(),Lv.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(t){h(),n&&n(t),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class Ov extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=new Lp;s.colorSpace=Lc;const r=new Pv(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let o=0;function a(i){r.load(e[i],(function(e){s.images[i]=e,o++,6===o&&(s.needsUpdate=!0,t&&t(s))}),void 0,n)}for(let l=0;l<e.length;++l)a(l);return s}}class Fv extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=this,r=new df,o=new Iv(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,(function(e){let i;try{i=s.parse(e)}catch(o){if(void 0===n)return void console.error(o);n(o)}void 0!==i.image?r.image=i.image:void 0!==i.data&&(r.image.width=i.width,r.image.height=i.height,r.image.data=i.data),r.wrapS=void 0!==i.wrapS?i.wrapS:jl,r.wrapT=void 0!==i.wrapT?i.wrapT:jl,r.magFilter=void 0!==i.magFilter?i.magFilter:Yl,r.minFilter=void 0!==i.minFilter?i.minFilter:Yl,r.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.colorSpace&&(r.colorSpace=i.colorSpace),void 0!==i.flipY&&(r.flipY=i.flipY),void 0!==i.format&&(r.format=i.format),void 0!==i.type&&(r.type=i.type),void 0!==i.mipmaps&&(r.mipmaps=i.mipmaps,r.minFilter=eh),1===i.mipmapCount&&(r.minFilter=Yl),void 0!==i.generateMipmaps&&(r.generateMipmaps=i.generateMipmaps),r.needsUpdate=!0,t&&t(r,i)}),i,n),r}}class Bv extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=new $d,r=new Pv(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(e,(function(e){s.image=e,s.needsUpdate=!0,void 0!==t&&t(s)}),i,n),s}}class zv extends rg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new xg(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class Vv extends zv{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(rg.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xg(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Wv=new Iu,Hv=new iu,Uv=new iu;class jv{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new kd(512,512),this.map=null,this.mapPass=null,this.matrix=new Iu,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Df,this._frameExtents=new kd(1,1),this._viewportCount=1,this._viewports=[new qd(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Hv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Hv),Uv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Uv),t.updateMatrixWorld(),Wv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wv),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Wv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Gv extends jv{constructor(){super(new Sp(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*_d*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;i===t.fov&&n===t.aspect&&s===t.far||(t.fov=i,t.aspect=n,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Kv extends zv{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(rg.DEFAULT_UP),this.updateMatrix(),this.target=new rg,this.distance=i,this.angle=n,this.penumbra=s,this.decay=r,this.map=null,this.shadow=new Gv}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $v=new Iu,qv=new iu,Qv=new iu;class Xv extends jv{constructor(){super(new Sp(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new kd(4,2),this._viewportCount=6,this._viewports=[new qd(2,1,1,1),new qd(0,1,1,1),new qd(3,1,1,1),new qd(1,1,1,1),new qd(3,0,1,1),new qd(1,0,1,1)],this._cubeDirections=[new iu(1,0,0),new iu(-1,0,0),new iu(0,0,1),new iu(0,0,-1),new iu(0,1,0),new iu(0,-1,0)],this._cubeUps=[new iu(0,1,0),new iu(0,1,0),new iu(0,1,0),new iu(0,1,0),new iu(0,0,1),new iu(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.camera,n=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),qv.setFromMatrixPosition(e.matrixWorld),i.position.copy(qv),Qv.copy(i.position),Qv.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Qv),i.updateMatrixWorld(),n.makeTranslation(-qv.x,-qv.y,-qv.z),$v.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($v)}}class Yv extends zv{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new Xv}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zv extends bp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=s,this.far=r,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,s,r){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let s=i-e,r=i+e,o=n+t,a=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=e*this.view.offsetX,r=s+e*this.view.width,o-=t*this.view.offsetY,a=o-t*this.view.height}this.projectionMatrix.makeOrthographic(s,r,o,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Jv extends jv{constructor(){super(new Zv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class eb extends zv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(rg.DEFAULT_UP),this.updateMatrix(),this.target=new rg,this.shadow=new Jv}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class tb extends zv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ib extends zv{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class nb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new iu)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,s=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.282095),t.addScaledVector(r[1],.488603*n),t.addScaledVector(r[2],.488603*s),t.addScaledVector(r[3],.488603*i),t.addScaledVector(r[4],i*n*1.092548),t.addScaledVector(r[5],n*s*1.092548),t.addScaledVector(r[6],.315392*(3*s*s-1)),t.addScaledVector(r[7],i*s*1.092548),t.addScaledVector(r[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,s=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.886227),t.addScaledVector(r[1],1.023328*n),t.addScaledVector(r[2],1.023328*s),t.addScaledVector(r[3],1.023328*i),t.addScaledVector(r[4],.858086*i*n),t.addScaledVector(r[5],.858086*n*s),t.addScaledVector(r[6],.743125*s*s-.247708),t.addScaledVector(r[7],.858086*i*s),t.addScaledVector(r[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,s=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-n*n)}}class sb extends zv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nb;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class rb extends Tv{constructor(e){super(e),this.textures={}}load(e,t,i,n){const s=this,r=new Iv(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.setWithCredentials(s.withCredentials),r.load(e,(function(i){try{t(s.parse(JSON.parse(i)))}catch(O2){n?n(O2):console.error(O2),s.manager.itemError(e)}}),i,n)}parse(e){const t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const n=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&void 0!==n.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=e.sheen),void 0!==e.sheenColor&&(n.sheenColor=(new xg).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(n.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==n.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==n.specular&&n.specular.setHex(e.specular),void 0!==e.specularIntensity&&(n.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==n.specularColor&&n.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(n.dispersion=e.dispersion),void 0!==e.iridescence&&(n.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(n.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(n.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(n.transmission=e.transmission),void 0!==e.thickness&&(n.thickness=e.thickness),void 0!==e.attenuationDistance&&(n.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==n.attenuationColor&&n.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(n.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(n.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.shadowSide&&(n.shadowSide=e.shadowSide),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(n.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(n.depthFunc=e.depthFunc),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(n.blendSrc=e.blendSrc),void 0!==e.blendDst&&(n.blendDst=e.blendDst),void 0!==e.blendEquation&&(n.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(n.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(n.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(n.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==n.blendColor&&n.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(n.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),void 0!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.alphaToCoverage&&(n.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(n.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(n.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?n.vertexColors=e.vertexColors>0:n.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const s in e.uniforms){const t=e.uniforms[s];switch(n.uniforms[s]={},t.type){case"t":n.uniforms[s].value=i(t.value);break;case"c":n.uniforms[s].value=(new xg).setHex(t.value);break;case"v2":n.uniforms[s].value=(new kd).fromArray(t.value);break;case"v3":n.uniforms[s].value=(new iu).fromArray(t.value);break;case"v4":n.uniforms[s].value=(new qd).fromArray(t.value);break;case"m3":n.uniforms[s].value=(new Ld).fromArray(t.value);break;case"m4":n.uniforms[s].value=(new Iu).fromArray(t.value);break;default:n.uniforms[s].value=t.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(n.glslVersion=e.glslVersion),void 0!==e.extensions)for(const s in e.extensions)n.extensions[s]=e.extensions[s];if(void 0!==e.lights&&(n.lights=e.lights),void 0!==e.clipping&&(n.clipping=e.clipping),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=i(e.map)),void 0!==e.matcap&&(n.matcap=i(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(n.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),n.normalScale=(new kd).fromArray(t)}return void 0!==e.displacementMap&&(n.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(n.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(n.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(n.envMap=i(e.envMap)),void 0!==e.envMapRotation&&n.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(n.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new kd).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(n.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(n.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(n.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(n.thicknessMap=i(e.thicknessMap)),void 0!==e.anisotropyMap&&(n.anisotropyMap=i(e.anisotropyMap)),void 0!==e.sheenColorMap&&(n.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(n.sheenRoughnessMap=i(e.sheenRoughnessMap)),n}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return rb.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:q_,SpriteMaterial:Rp,RawShaderMaterial:Q_,ShaderMaterial:vp,PointsMaterial:hm,MeshPhysicalMaterial:Y_,MeshStandardMaterial:X_,MeshPhongMaterial:Z_,MeshToonMaterial:J_,MeshNormalMaterial:ev,MeshLambertMaterial:tv,MeshDepthMaterial:iv,MeshDistanceMaterial:nv,MeshBasicMaterial:Mg,MeshMatcapMaterial:sv,LineDashedMaterial:rv,LineBasicMaterial:Qf,Material:Eg}[e]}}class ob{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(O2){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ab extends Jg{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lb extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=this,r=new Iv(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.setWithCredentials(s.withCredentials),r.load(e,(function(i){try{t(s.parse(JSON.parse(i)))}catch(O2){n?n(O2):console.error(O2),s.manager.itemError(e)}}),i,n)}parse(e){const t={},i={};function n(e,n){if(void 0!==t[n])return t[n];const s=e.interleavedBuffers[n],r=function(e,t){if(void 0!==i[t])return i[t];const n=e.arrayBuffers,s=n[t],r=new Uint32Array(s).buffer;return i[t]=r,r}(e,s.buffer),o=Dd(s.type,r),a=new Np(o,s.stride);return a.uuid=s.uuid,t[n]=a,a}const s=e.isInstancedBufferGeometry?new ab:new Jg,r=e.data.index;if(void 0!==r){const e=Dd(r.type,r.array);s.setIndex(new Og(e,1))}const o=e.data.attributes;for(const c in o){const t=o[c];let i;if(t.isInterleavedBufferAttribute){const s=n(e.data,t.data);i=new Ap(s,t.itemSize,t.offset,t.normalized)}else{const e=Dd(t.type,t.array);i=new(t.isInstancedBufferAttribute?ff:Og)(e,t.itemSize,t.normalized)}void 0!==t.name&&(i.name=t.name),void 0!==t.usage&&i.setUsage(t.usage),s.setAttribute(c,i)}const a=e.data.morphAttributes;if(a)for(const c in a){const t=a[c],i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];let o;if(r.isInterleavedBufferAttribute){const t=n(e.data,r.data);o=new Ap(t,r.itemSize,r.offset,r.normalized)}else{const e=Dd(r.type,r.array);o=new Og(e,r.itemSize,r.normalized)}void 0!==r.name&&(o.name=r.name),i.push(o)}s.morphAttributes[c]=i}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let c=0,d=l.length;c!==d;++c){const e=l[c];s.addGroup(e.start,e.count,e.materialIndex)}const h=e.data.boundingSphere;if(void 0!==h){const e=new iu;void 0!==h.center&&e.fromArray(h.center),s.boundingSphere=new Su(e,h.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class hb extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=this,r=""===this.path?ob.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const o=new Iv(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(i){let r=null;try{r=JSON.parse(i)}catch(a){return void 0!==n&&n(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}const o=r.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==n&&n(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);s.parse(r,t)}),i,n)}async loadAsync(e,t){const i=""===this.path?ob.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const n=new Iv(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const s=await n.loadAsync(e,t),r=JSON.parse(s),o=r.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(r)}parse(e,t){const i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,s,a,o,i),h=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,h),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in r)if(r[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),r=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,r),a=this.parseObject(e.object,n,o,r,t),l=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,l),this.bindLightTargets(a),a}parseShapes(e){const t={};if(void 0!==e)for(let i=0,n=e.length;i<n;i++){const n=(new s_).fromJSON(e[i]);t[n.uuid]=n}return t}parseSkeletons(e,t){const i={},n={};if(t.traverse((function(e){e.isBone&&(n[e.uuid]=e)})),void 0!==e)for(let s=0,r=e.length;s<r;s++){const t=(new pf).fromJSON(e[s],n);i[t.uuid]=t}return i}parseGeometries(e,t){const i={};if(void 0!==e){const n=new lb;for(let s=0,r=e.length;s<r;s++){let r;const o=e[s];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":r=n.parse(o);break;default:o.type in $_?r=$_[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}r.uuid=o.uuid,void 0!==o.name&&(r.name=o.name),void 0!==o.userData&&(r.userData=o.userData),i[o.uuid]=r}}return i}parseMaterials(e,t){const i={},n={};if(void 0!==e){const s=new rb;s.setTextures(t);for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0===i[r.uuid]&&(i[r.uuid]=s.parse(r)),n[r.uuid]=i[r.uuid]}}return n}parseAnimations(e){const t={};if(void 0!==e)for(let i=0;i<e.length;i++){const n=e[i],s=xv.parse(n);t[s.uuid]=s}return t}parseImages(e,t){const i=this,n={};let s;function r(e){if("string"===typeof e){const t=e;return function(e){return i.manager.itemStart(e),s.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:Dd(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const i=new Ev(t);s=new Pv(i),s.setCrossOrigin(this.crossOrigin);for(let t=0,s=e.length;t<s;t++){const i=e[t],s=i.url;if(Array.isArray(s)){const e=[];for(let t=0,i=s.length;t<i;t++){const i=r(s[t]);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new df(i.data,i.width,i.height)))}n[i.uuid]=new jd(e)}else{const e=r(i.url);n[i.uuid]=new jd(e)}}}return n}async parseImagesAsync(e){const t=this,i={};let n;async function s(e){if("string"===typeof e){const i=e,s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:t.resourcePath+i;return await n.loadAsync(s)}return e.data?{data:Dd(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){n=new Pv(this.manager),n.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,i=r.length;t<i;t++){const i=r[t],n=await s(i);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new df(n.data,n.width,n.height)))}i[n.uuid]=new jd(e)}else{const e=await s(n.url);i[n.uuid]=new jd(e)}}}return i}parseTextures(e,t){function i(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const n={};if(void 0!==e)for(let s=0,r=e.length;s<r;s++){const r=e[s];void 0===r.image&&console.warn('THREE.ObjectLoader: No "image" specified for',r.uuid),void 0===t[r.image]&&console.warn("THREE.ObjectLoader: Undefined image",r.image);const o=t[r.image],a=o.data;let l;Array.isArray(a)?(l=new Lp,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new df:new $d,a&&(l.needsUpdate=!0)),l.source=o,l.uuid=r.uuid,void 0!==r.name&&(l.name=r.name),void 0!==r.mapping&&(l.mapping=i(r.mapping,cb)),void 0!==r.channel&&(l.channel=r.channel),void 0!==r.offset&&l.offset.fromArray(r.offset),void 0!==r.repeat&&l.repeat.fromArray(r.repeat),void 0!==r.center&&l.center.fromArray(r.center),void 0!==r.rotation&&(l.rotation=r.rotation),void 0!==r.wrap&&(l.wrapS=i(r.wrap[0],db),l.wrapT=i(r.wrap[1],db)),void 0!==r.format&&(l.format=r.format),void 0!==r.internalFormat&&(l.internalFormat=r.internalFormat),void 0!==r.type&&(l.type=r.type),void 0!==r.colorSpace&&(l.colorSpace=r.colorSpace),void 0!==r.minFilter&&(l.minFilter=i(r.minFilter,ub)),void 0!==r.magFilter&&(l.magFilter=i(r.magFilter,ub)),void 0!==r.anisotropy&&(l.anisotropy=r.anisotropy),void 0!==r.flipY&&(l.flipY=r.flipY),void 0!==r.generateMipmaps&&(l.generateMipmaps=r.generateMipmaps),void 0!==r.premultiplyAlpha&&(l.premultiplyAlpha=r.premultiplyAlpha),void 0!==r.unpackAlignment&&(l.unpackAlignment=r.unpackAlignment),void 0!==r.compareFunction&&(l.compareFunction=r.compareFunction),void 0!==r.userData&&(l.userData=r.userData),n[r.uuid]=l}return n}parseObject(e,t,i,n,s){let r,o,a;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function h(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let n=0,s=e.length;n<s;n++){const s=e[n];void 0===i[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),t.push(i[s])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}function c(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),n[e]}switch(e.type){case"Scene":r=new Dp,void 0!==e.background&&(Number.isInteger(e.background)?r.background=new xg(e.background):r.background=c(e.background)),void 0!==e.environment&&(r.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Tp(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Mp(e.fog.color,e.fog.density)),""!==e.fog.name&&(r.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(r.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(r.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&r.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(r.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&r.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":r=new Sp(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Zv(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new tb(e.color,e.intensity);break;case"DirectionalLight":r=new eb(e.color,e.intensity),r.target=e.target||"";break;case"PointLight":r=new Yv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new ib(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Kv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),r.target=e.target||"";break;case"HemisphereLight":r=new Vv(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=(new sb).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),a=h(e.material),r=new hf(o,a),void 0!==e.bindMode&&(r.bindMode=e.bindMode),void 0!==e.bindMatrix&&r.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(r.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),a=h(e.material),r=new dp(o,a);break;case"InstancedMesh":o=l(e.geometry),a=h(e.material);const t=e.count,i=e.instanceMatrix,n=e.instanceColor;r=new Sf(o,a,t),r.instanceMatrix=new ff(new Float32Array(i.array),16),void 0!==n&&(r.instanceColor=new ff(new Float32Array(n.array),n.itemSize));break;case"BatchedMesh":o=l(e.geometry),a=h(e.material),r=new qf(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,a),r.geometry=o,r.perObjectFrustumCulled=e.perObjectFrustumCulled,r.sortObjects=e.sortObjects,r._drawRanges=e.drawRanges,r._reservedRanges=e.reservedRanges,r._visibility=e.visibility,r._active=e.active,r._bounds=e.bounds.map((e=>{const t=new ru;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const i=new Su;return i.radius=e.sphereRadius,i.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:i}})),r._maxInstanceCount=e.maxInstanceCount,r._maxVertexCount=e.maxVertexCount,r._maxIndexCount=e.maxIndexCount,r._geometryInitialized=e.geometryInitialized,r._geometryCount=e.geometryCount,r._matricesTexture=c(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(r._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":r=new Zp;break;case"Line":r=new nm(l(e.geometry),h(e.material));break;case"LineLoop":r=new lm(l(e.geometry),h(e.material));break;case"LineSegments":r=new am(l(e.geometry),h(e.material));break;case"PointCloud":case"Points":r=new pm(l(e.geometry),h(e.material));break;case"Sprite":r=new qp(h(e.material));break;case"Group":r=new mm;break;case"Bone":r=new cf;break;default:r=new rg}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.up&&r.up.fromArray(e.up),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(r.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(r.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)r.add(this.parseObject(o[e],t,i,n,s))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const i=t[e];r.animations.push(s[i])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(r.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const i=t[e],n=r.getObjectByProperty("uuid",i.object);void 0!==n&&r.addLevel(n,i.distance,i.hysteresis)}}return r}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const i=t[e.skeleton];void 0===i?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(i,e.bindMatrix)}}))}bindLightTargets(e){e.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,n=e.getObjectByProperty("uuid",i);t.target=void 0!==n?n:new rg}}))}}const cb={UVMapping:Fl,CubeReflectionMapping:Bl,CubeRefractionMapping:zl,EquirectangularReflectionMapping:Vl,EquirectangularRefractionMapping:Wl,CubeUVReflectionMapping:Hl},db={RepeatWrapping:Ul,ClampToEdgeWrapping:jl,MirroredRepeatWrapping:Gl},ub={NearestFilter:Kl,NearestMipmapNearestFilter:$l,NearestMipmapLinearFilter:Ql,LinearFilter:Yl,LinearMipmapNearestFilter:Zl,LinearMipmapLinearFilter:eh};class gb extends Tv{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,r=Lv.get(e);if(void 0!==r)return s.manager.itemStart(e),r.then?void r.then((i=>{t&&t(i),s.manager.itemEnd(e)})).catch((e=>{n&&n(e)})):(setTimeout((function(){t&&t(r),s.manager.itemEnd(e)}),0),r);const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader;const a=fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(s.options,{colorSpaceConversion:"none"}))})).then((function(i){return Lv.add(e,i),t&&t(i),s.manager.itemEnd(e),i})).catch((function(t){n&&n(t),Lv.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)}));Lv.add(e,a),s.manager.itemStart(e)}}let pb;class fb{static getContext(){return void 0===pb&&(pb=new(window.AudioContext||window.webkitAudioContext)),pb}static setContext(e){pb=e}}class mb extends Tv{constructor(e){super(e)}load(e,t,i,n){const s=this,r=new Iv(this.manager);function o(t){n?n(t):console.error(t),s.manager.itemError(e)}r.setResponseType("arraybuffer"),r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(e){try{const i=e.slice(0);fb.getContext().decodeAudioData(i,(function(e){t(e)})).catch(o)}catch(O2){o(O2)}}),i,n)}}const _b=new Iu,vb=new Iu,bb=new Iu;class yb{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Sp,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Sp,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,bb.copy(e.projectionMatrix);const i=t.eyeSep/2,n=i*t.near/t.focus,s=t.near*Math.tan(md*t.fov*.5)/t.zoom;let r,o;vb.elements[12]=-i,_b.elements[12]=i,r=-s*t.aspect+n,o=s*t.aspect+n,bb.elements[0]=2*t.near/(o-r),bb.elements[8]=(o+r)/(o-r),this.cameraL.projectionMatrix.copy(bb),r=-s*t.aspect-n,o=s*t.aspect-n,bb.elements[0]=2*t.near/(o-r),bb.elements[8]=(o+r)/(o-r),this.cameraR.projectionMatrix.copy(bb)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(vb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_b)}}class wb extends Sp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class Cb{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Sb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Sb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Sb(){return performance.now()}const xb=new iu,kb=new tu,Lb=new iu,Eb=new iu;class Mb extends rg{constructor(){super(),this.type="AudioListener",this.context=fb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Cb}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xb,kb,Lb),Eb.set(0,0,-1).applyQuaternion(kb),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(xb.x,e),t.positionY.linearRampToValueAtTime(xb.y,e),t.positionZ.linearRampToValueAtTime(xb.z,e),t.forwardX.linearRampToValueAtTime(Eb.x,e),t.forwardY.linearRampToValueAtTime(Eb.y,e),t.forwardZ.linearRampToValueAtTime(Eb.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)}else t.setPosition(xb.x,xb.y,xb.z),t.setOrientation(Eb.x,Eb.y,Eb.z,i.x,i.y,i.z)}}class Tb extends rg{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Db=new iu,Nb=new tu,Ib=new iu,Ab=new iu;class Rb extends Tb{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Db,Nb,Ib),Ab.set(0,0,1).applyQuaternion(Nb);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Db.x,e),t.positionY.linearRampToValueAtTime(Db.y,e),t.positionZ.linearRampToValueAtTime(Db.z,e),t.orientationX.linearRampToValueAtTime(Ab.x,e),t.orientationY.linearRampToValueAtTime(Ab.y,e),t.orientationZ.linearRampToValueAtTime(Ab.z,e)}else t.setPosition(Db.x,Db.y,Db.z),t.setOrientation(Ab.x,Ab.y,Ab.z)}}class Pb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class Ob{constructor(e,t,i){let n,s,r;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,s=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,s=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,s=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=s,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,s=e*n+n;let r=this.cumulativeWeight;if(0===r){for(let e=0;e!==n;++e)i[s+e]=i[e];r=t}else{r+=t;const e=t/r;this._mixBufferRegion(i,s,0,e,n)}this.cumulativeWeight=r}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,s=this.cumulativeWeight,r=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-s,t)}r>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(i[a]!==i[a+t]){o.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let s=i,r=n;s!==r;++s)t[s]=t[n+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,s){if(n>=.5)for(let r=0;r!==s;++r)e[t+r]=e[i+r]}_slerp(e,t,i,n){tu.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,s){const r=this._workIndex*s;tu.multiplyQuaternionsFlat(e,r,e,t,e,i),tu.slerpFlat(e,t,e,t,e,r,n)}_lerp(e,t,i,n,s){const r=1-n;for(let o=0;o!==s;++o){const s=t+o;e[s]=e[s]*r+e[i+o]*n}}_lerpAdditive(e,t,i,n,s){for(let r=0;r!==s;++r){const s=t+r;e[s]=e[s]+e[i+r]*n}}}const Fb="\\[\\]\\.:\\/",Bb=new RegExp("["+Fb+"]","g"),zb="[^"+Fb+"]",Vb="[^"+Fb.replace("\\.","")+"]",Wb=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",zb)+/(WCOD+)?/.source.replace("WCOD",Vb)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zb)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zb)+"$"),Hb=["material","materials","bones","map"];class Ub{constructor(e,t,i){this.path=t,this.parsedPath=i||Ub.parseTrackName(t),this.node=Ub.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ub.Composite(e,t,i):new Ub(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Bb,"")}static parseTrackName(e){const t=Wb.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=i.nodeName.substring(n+1);-1!==Hb.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let n=0;n<e.length;n++){const s=e[n];if(s.name===t||s.uuid===t)return s;const r=i(s.children);if(r)return r}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let s=t.propertyIndex;if(e||(e=Ub.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const r=e[n];if(void 0===r){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?o=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[s]&&(s=e.morphTargetDictionary[s])}a=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else void 0!==r.fromArray&&void 0!==r.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(a=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=n;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ub.Composite=class{constructor(e,t,i){const n=i||Ub.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=i.length;n!==s;++n)i[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Ub.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ub.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ub.prototype.GetterByBindingType=[Ub.prototype._getValue_direct,Ub.prototype._getValue_array,Ub.prototype._getValue_arrayElement,Ub.prototype._getValue_toArray],Ub.prototype.SetterByBindingTypeAndVersioning=[[Ub.prototype._setValue_direct,Ub.prototype._setValue_direct_setNeedsUpdate,Ub.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ub.prototype._setValue_array,Ub.prototype._setValue_array_setNeedsUpdate,Ub.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ub.prototype._setValue_arrayElement,Ub.prototype._setValue_arrayElement_setNeedsUpdate,Ub.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ub.prototype._setValue_fromArray,Ub.prototype._setValue_fromArray_setNeedsUpdate,Ub.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class jb{constructor(){this.isAnimationObjectGroup=!0,this.uuid=vd(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,n=arguments.length;i!==n;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,n=this._parsedPaths,s=this._bindings,r=s.length;let o,a=e.length,l=this.nCachedObjects_;for(let h=0,c=arguments.length;h!==c;++h){const c=arguments[h],d=c.uuid;let u=t[d];if(void 0===u){u=a++,t[d]=u,e.push(c);for(let e=0,t=r;e!==t;++e)s[e].push(new Ub(c,i[e],n[e]))}else if(u<l){o=e[u];const a=--l,h=e[a];t[h.uuid]=u,e[u]=h,t[d]=a,e[a]=c;for(let e=0,t=r;e!==t;++e){const t=s[e],r=t[a];let o=t[u];t[u]=r,void 0===o&&(o=new Ub(c,i[e],n[e])),t[a]=o}}else e[u]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let s=this.nCachedObjects_;for(let r=0,o=arguments.length;r!==o;++r){const o=arguments[r],a=o.uuid,l=t[a];if(void 0!==l&&l>=s){const r=s++,h=e[r];t[h.uuid]=l,e[l]=h,t[a]=r,e[r]=o;for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[r],s=t[l];t[l]=n,t[r]=s}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let s=this.nCachedObjects_,r=e.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<s){const o=--s,a=e[o],h=--r,c=e[h];t[a.uuid]=l,e[l]=a,t[c.uuid]=o,e[o]=c,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[o],s=t[h];t[l]=n,t[o]=s,t.pop()}}else{const s=--r,o=e[s];s>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e];t[l]=t[s],t.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let n=i[e];const s=this._bindings;if(void 0!==n)return s[n];const r=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,h=this.nCachedObjects_,c=new Array(l);n=s.length,i[e]=n,r.push(e),o.push(t),s.push(c);for(let d=h,u=a.length;d!==u;++d){const i=a[d];c[d]=new Ub(i,e,t)}return c}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){const n=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length-1,a=r[o];t[e[o]]=i,r[i]=a,r.pop(),s[i]=s[o],s.pop(),n[i]=n[o],n.pop()}}}class Gb{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const s=t.tracks,r=s.length,o=new Array(r),a={endingStart:dc,endingEnd:dc};for(let l=0;l!==r;++l){const e=s[l].createInterpolant(null);o[l]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=oc,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,n=e._clip.duration,s=n/i,r=i/n;e.warp(1,s,t),this.warp(r,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,s=n.time,r=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,a[1]=s+i,l[0]=e/r,l[1]=t/r,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const n=(e-s)*i;n<0||0===i?t=0:(this._startTime=null,t=i*n)}t*=this._updateTimeScale(e);const r=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===fc)for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(r),t[i].accumulateAdditive(o);else for(let i=0,s=e.length;i!==s;++i)e[i].evaluate(r),t[i].accumulate(n,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(null!==i){t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,s=this._loopCount;const r=i===ac;if(0===e)return-1===s?n:r&&1===(1&s)?t-n:n;if(i===rc){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,r)):this._setEndings(0===this.repetitions,!0,r)),n>=t||n<0){const i=Math.floor(n/t);n-=t*i,s+=Math.abs(i);const o=this.repetitions-s;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,r)}else this._setEndings(!1,!1,r);this._loopCount=s,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(r&&1===(1&s))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=uc,n.endingEnd=uc):(n.endingStart=e?this.zeroSlopeAtStart?uc:dc:gc,n.endingEnd=t?this.zeroSlopeAtEnd?uc:dc:gc)}_scheduleFading(e,t,i){const n=this._mixer,s=n.time;let r=this._weightInterpolant;null===r&&(r=n._lendControlInterpolant(),this._weightInterpolant=r);const o=r.parameterPositions,a=r.sampleValues;return o[0]=s,a[0]=t,o[1]=s+e,a[1]=i,this}}const Kb=new Float32Array(1);class $b extends gd{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,s=n.length,r=e._propertyBindings,o=e._interpolants,a=i.uuid,l=this._bindingsByRootAndName;let h=l[a];void 0===h&&(h={},l[a]=h);for(let c=0;c!==s;++c){const e=n[c],s=e.name;let l=h[s];if(void 0!==l)++l.referenceCount,r[c]=l;else{if(l=r[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,s));continue}const n=t&&t._propertyBindings[c].binding.parsedPath;l=new Ob(Ub.create(i,s,n),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,s),r[c]=l}o[c].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,s=this._actionsByClip;let r=s[t];if(void 0===r)r={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=r;else{const t=r.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),r.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,r=this._actionsByClip,o=r[s],a=o.knownActions,l=a[a.length-1],h=e._byClipCacheIndex;l._byClipCacheIndex=h,a[h]=l,a.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete r[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const e=t[i];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,s=this._bindings;let r=n[t];void 0===r&&(r={},n[t]=r),r[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,s=i.path,r=this._bindingsByRootAndName,o=r[n],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete o[s],0===Object.keys(o).length&&delete r[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new pv(new Float32Array(2),new Float32Array(2),1,Kb),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,s=t[n];e.__cacheIndex=n,t[n]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const n=t||this._root,s=n.uuid;let r="string"===typeof e?xv.findByName(n,e):e;const o=null!==r?r.uuid:e,a=this._actionsByClip[o];let l=null;if(void 0===i&&(i=null!==r?r.blendMode:pc),void 0!==a){const e=a.actionByRoot[s];if(void 0!==e&&e.blendMode===i)return e;l=a.knownActions[0],null===r&&(r=l._clip)}if(null===r)return null;const h=new Gb(this,r,t,i);return this._bindAction(h,l),this._addInactiveAction(h,o,s),h}existingAction(e,t){const i=t||this._root,n=i.uuid,s="string"===typeof e?xv.findByName(i,e):e,r=s?s.uuid:e,o=this._actionsByClip[r];return void 0!==o&&o.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,s=Math.sign(e),r=this._accuIndex^=1;for(let l=0;l!==i;++l){t[l]._update(n,e,s,r)}const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(r);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,s=n[i];if(void 0!==s){const e=s.knownActions;for(let i=0,n=e.length;i!==n;++i){const n=e[i];this._deactivateAction(n);const s=n._cacheIndex,r=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,r._cacheIndex=s,t[s]=r,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const e=i[s].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const s in n){const e=n[s];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class qb extends Qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Jd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Qb extends Qd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Yd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Xb{constructor(e){this.value=e}clone(){return new Xb(void 0===this.value.clone?this.value:this.value.clone())}}let Yb=0;class Zb extends gd{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Yb++}),this.name="",this.usage=ed,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,n=t.length;i<n;i++){const e=Array.isArray(t[i])?t[i]:[t[i]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Jb extends Np{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ey{constructor(e,t,i,n,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=s,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ty=new Iu;class iy{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Nu(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new Uu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return ty.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ty),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return sy(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(ny),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let n=0,s=e.length;n<s;n++)sy(e[n],this,i,t);return i.sort(ny),i}}function ny(e,t){return e.distance-t.distance}function sy(e,t,i,n){let s=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,i)&&(s=!1)}if(!0===s&&!0===n){const n=e.children;for(let e=0,s=n.length;e<s;e++)sy(n[e],t,i,!0)}}class ry{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=bd(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(bd(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class oy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class ay{constructor(e,t,i,n){ay.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,i,n)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,n){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=n,this}}const ly=new kd;class hy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kd(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kd(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ly.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ly).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cy=new iu,dy=new iu;class uy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){cy.subVectors(e,this.start),dy.subVectors(this.end,this.start);const i=dy.dot(dy);let n=dy.dot(cy)/i;return t&&(n=bd(n,0,1)),n}closestPointToPoint(e,t,i){const n=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const gy=new iu;class py extends rg{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Jg,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let r=0,o=1,a=32;r<a;r++,o++){const e=r/a*Math.PI*2,t=o/a*Math.PI*2;n.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}i.setAttribute("position",new Gg(n,3));const s=new Qf({fog:!1,toneMapped:!1});this.cone=new am(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),gy.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gy),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const fy=new iu,my=new Iu,_y=new Iu;class vy extends am{constructor(e){const t=by(e),i=new Jg,n=[],s=[],r=new xg(0,0,1),o=new xg(0,1,0);for(let a=0;a<t.length;a++){const e=t[a];e.parent&&e.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),s.push(r.r,r.g,r.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new Gg(n,3)),i.setAttribute("color",new Gg(s,3));super(i,new Qf({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,n=i.getAttribute("position");_y.copy(this.root.matrixWorld).invert();for(let s=0,r=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(my.multiplyMatrices(_y,e.matrixWorld),fy.setFromMatrixPosition(my),n.setXYZ(r,fy.x,fy.y,fy.z),my.multiplyMatrices(_y,e.parent.matrixWorld),fy.setFromMatrixPosition(my),n.setXYZ(r+1,fy.x,fy.y,fy.z),r+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function by(e){const t=[];!0===e.isBone&&t.push(e);for(let i=0;i<e.children.length;i++)t.push.apply(t,by(e.children[i]));return t}class yy extends dp{constructor(e,t,i){super(new V_(t,4,2),new Mg({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const wy=new iu,Cy=new xg,Sy=new xg;class xy extends rg{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const n=new O_(t);n.rotateY(.5*Math.PI),this.material=new Mg({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const s=n.getAttribute("position"),r=new Float32Array(3*s.count);n.setAttribute("color",new Og(r,3)),this.add(new dp(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Cy.copy(this.light.color),Sy.copy(this.light.groundColor);for(let e=0,i=t.count;e<i;e++){const n=e<i/2?Cy:Sy;t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(wy.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ky extends am{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;i=new xg(i),n=new xg(n);const s=t/2,r=e/t,o=e/2,a=[],l=[];for(let c=0,d=0,u=-o;c<=t;c++,u+=r){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);const e=c===s?i:n;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const h=new Jg;h.setAttribute("position",new Gg(a,3)),h.setAttribute("color",new Gg(l,3));super(h,new Qf({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ly extends am{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;s=new xg(s),r=new xg(r);const o=[],a=[];if(t>1)for(let h=0;h<t;h++){const i=h/t*(2*Math.PI),n=Math.sin(i)*e,l=Math.cos(i)*e;o.push(0,0,0),o.push(n,0,l);const c=1&h?s:r;a.push(c.r,c.g,c.b),a.push(c.r,c.g,c.b)}for(let h=0;h<i;h++){const t=1&h?s:r,l=e-e/i*h;for(let e=0;e<n;e++){let i=e/n*(2*Math.PI),s=Math.sin(i)*l,r=Math.cos(i)*l;o.push(s,0,r),a.push(t.r,t.g,t.b),i=(e+1)/n*(2*Math.PI),s=Math.sin(i)*l,r=Math.cos(i)*l,o.push(s,0,r),a.push(t.r,t.g,t.b)}}const l=new Jg;l.setAttribute("position",new Gg(o,3)),l.setAttribute("color",new Gg(a,3));super(l,new Qf({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Ey=new iu,My=new iu,Ty=new iu;class Dy extends rg{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===t&&(t=1);let n=new Jg;n.setAttribute("position",new Gg([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Qf({fog:!1,toneMapped:!1});this.lightPlane=new nm(n,s),this.add(this.lightPlane),n=new Jg,n.setAttribute("position",new Gg([0,0,0,0,0,1],3)),this.targetLine=new nm(n,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Ey.setFromMatrixPosition(this.light.matrixWorld),My.setFromMatrixPosition(this.light.target.matrixWorld),Ty.subVectors(My,Ey),this.lightPlane.lookAt(My),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(My),this.targetLine.scale.z=Ty.length()}}const Ny=new iu,Iy=new bp;class Ay extends am{constructor(e){const t=new Jg,i=new Qf({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],s=[],r={};function o(e,t){a(e),a(t)}function a(e){n.push(0,0,0),s.push(0,0,0),void 0===r[e]&&(r[e]=[]),r[e].push(n.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new Gg(n,3)),t.setAttribute("color",new Gg(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update();const l=new xg(16755200),h=new xg(16711680),c=new xg(43775),d=new xg(16777215),u=new xg(3355443);this.setColors(l,h,c,d,u)}setColors(e,t,i,n,s){const r=this.geometry.getAttribute("color");r.setXYZ(0,e.r,e.g,e.b),r.setXYZ(1,e.r,e.g,e.b),r.setXYZ(2,e.r,e.g,e.b),r.setXYZ(3,e.r,e.g,e.b),r.setXYZ(4,e.r,e.g,e.b),r.setXYZ(5,e.r,e.g,e.b),r.setXYZ(6,e.r,e.g,e.b),r.setXYZ(7,e.r,e.g,e.b),r.setXYZ(8,e.r,e.g,e.b),r.setXYZ(9,e.r,e.g,e.b),r.setXYZ(10,e.r,e.g,e.b),r.setXYZ(11,e.r,e.g,e.b),r.setXYZ(12,e.r,e.g,e.b),r.setXYZ(13,e.r,e.g,e.b),r.setXYZ(14,e.r,e.g,e.b),r.setXYZ(15,e.r,e.g,e.b),r.setXYZ(16,e.r,e.g,e.b),r.setXYZ(17,e.r,e.g,e.b),r.setXYZ(18,e.r,e.g,e.b),r.setXYZ(19,e.r,e.g,e.b),r.setXYZ(20,e.r,e.g,e.b),r.setXYZ(21,e.r,e.g,e.b),r.setXYZ(22,e.r,e.g,e.b),r.setXYZ(23,e.r,e.g,e.b),r.setXYZ(24,t.r,t.g,t.b),r.setXYZ(25,t.r,t.g,t.b),r.setXYZ(26,t.r,t.g,t.b),r.setXYZ(27,t.r,t.g,t.b),r.setXYZ(28,t.r,t.g,t.b),r.setXYZ(29,t.r,t.g,t.b),r.setXYZ(30,t.r,t.g,t.b),r.setXYZ(31,t.r,t.g,t.b),r.setXYZ(32,i.r,i.g,i.b),r.setXYZ(33,i.r,i.g,i.b),r.setXYZ(34,i.r,i.g,i.b),r.setXYZ(35,i.r,i.g,i.b),r.setXYZ(36,i.r,i.g,i.b),r.setXYZ(37,i.r,i.g,i.b),r.setXYZ(38,n.r,n.g,n.b),r.setXYZ(39,n.r,n.g,n.b),r.setXYZ(40,s.r,s.g,s.b),r.setXYZ(41,s.r,s.g,s.b),r.setXYZ(42,s.r,s.g,s.b),r.setXYZ(43,s.r,s.g,s.b),r.setXYZ(44,s.r,s.g,s.b),r.setXYZ(45,s.r,s.g,s.b),r.setXYZ(46,s.r,s.g,s.b),r.setXYZ(47,s.r,s.g,s.b),r.setXYZ(48,s.r,s.g,s.b),r.setXYZ(49,s.r,s.g,s.b),r.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Iy.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const i=this.camera.coordinateSystem===dd?-1:0;Ry("c",t,e,Iy,0,0,i),Ry("t",t,e,Iy,0,0,1),Ry("n1",t,e,Iy,-1,-1,i),Ry("n2",t,e,Iy,1,-1,i),Ry("n3",t,e,Iy,-1,1,i),Ry("n4",t,e,Iy,1,1,i),Ry("f1",t,e,Iy,-1,-1,1),Ry("f2",t,e,Iy,1,-1,1),Ry("f3",t,e,Iy,-1,1,1),Ry("f4",t,e,Iy,1,1,1),Ry("u1",t,e,Iy,.7,1.1,i),Ry("u2",t,e,Iy,-.7,1.1,i),Ry("u3",t,e,Iy,0,2,i),Ry("cf1",t,e,Iy,-1,0,1),Ry("cf2",t,e,Iy,1,0,1),Ry("cf3",t,e,Iy,0,-1,1),Ry("cf4",t,e,Iy,0,1,1),Ry("cn1",t,e,Iy,-1,0,i),Ry("cn2",t,e,Iy,1,0,i),Ry("cn3",t,e,Iy,0,-1,i),Ry("cn4",t,e,Iy,0,1,i),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ry(e,t,i,n,s,r,o){Ny.set(s,r,o).unproject(n);const a=t[e];if(void 0!==a){const e=i.getAttribute("position");for(let t=0,i=a.length;t<i;t++)e.setXYZ(a[t],Ny.x,Ny.y,Ny.z)}}const Py=new ru;class Oy extends am{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),s=new Jg;s.setIndex(new Og(i,1)),s.setAttribute("position",new Og(n,3)),super(s,new Qf({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Py.setFromObject(this.object),Py.isEmpty())return;const t=Py.min,i=Py.max,n=this.geometry.attributes.position,s=n.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fy extends am{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Jg;n.setIndex(new Og(i,1)),n.setAttribute("position",new Gg([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new Qf({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class By extends nm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,n=new Jg;n.setAttribute("position",new Gg([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere(),super(n,new Qf({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=new Jg;s.setAttribute("position",new Gg([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),s.computeBoundingSphere(),this.add(new dp(s,new Mg({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const zy=new iu;let Vy,Wy;class Hy extends rg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iu(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iu(0,0,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*i,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;super(),this.type="ArrowHelper",void 0===Vy&&(Vy=new Jg,Vy.setAttribute("position",new Gg([0,0,0,0,1,0],3)),Wy=new Qm(0,.5,1,5,1),Wy.translate(0,-.5,0)),this.position.copy(t),this.line=new nm(Vy,new Qf({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new dp(Wy,new Mg({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,r)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{zy.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(zy,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Uy extends am{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Jg;i.setAttribute("position",new Gg(t,3)),i.setAttribute("color",new Gg([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(i,new Qf({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const n=new xg,s=this.geometry.attributes.color.array;return n.set(e),n.toArray(s,0),n.toArray(s,3),n.set(t),n.toArray(s,6),n.toArray(s,9),n.set(i),n.toArray(s,12),n.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class jy{constructor(){this.type="ShapePath",this.color=new xg,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Gm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,s,r){return this.currentPath.bezierCurveTo(e,t,i,n,s,r),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const i=t.length;let n=!1;for(let s=i-1,r=0;r<i;s=r++){let i=t[s],o=t[r],a=o.x-i.x,l=o.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=t[r],a=-a,o=t[s],l=-l),e.y<i.y||e.y>o.y)continue;if(e.y===i.y){if(e.x===i.x)return!0}else{const t=l*(e.x-i.x)-a*(e.y-i.y);if(0===t)return!0;if(t<0)continue;n=!n}}else{if(e.y!==i.y)continue;if(o.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=o.x)return!0}}return n}const i=D_.isClockWise,n=this.subPaths;if(0===n.length)return[];let s,r,o;const a=[];if(1===n.length)return r=n[0],o=new s_,o.curves=r.curves,a.push(o),a;let l=!i(n[0].getPoints());l=e?!l:l;const h=[],c=[];let d,u,g=[],p=0;c[p]=void 0,g[p]=[];for(let f=0,m=n.length;f<m;f++)r=n[f],d=r.getPoints(),s=i(d),s=e?!s:s,s?(!l&&c[p]&&p++,c[p]={s:new s_,p:d},c[p].s.curves=r.curves,l&&p++,g[p]=[]):g[p].push({h:r,p:d[0]});if(!c[0])return function(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],s=new s_;s.curves=n.curves,t.push(s)}return t}(n);if(c.length>1){let e=!1,i=0;for(let t=0,n=c.length;t<n;t++)h[t]=[];for(let n=0,s=c.length;n<s;n++){const s=g[n];for(let r=0;r<s.length;r++){const o=s[r];let a=!0;for(let s=0;s<c.length;s++)t(o.p,c[s].p)&&(n!==s&&i++,a?(a=!1,h[s].push(o)):e=!0);a&&h[n].push(o)}}i>0&&!1===e&&(g=h)}for(let f=0,m=c.length;f<m;f++){o=c[f].s,a.push(o),u=g[f];for(let e=0,t=u.length;e<t;e++)o.holes.push(u[e].h)}return a}}class Gy extends gd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Ky(e,t,i,n){const s=function(e){switch(e){case ih:case nh:return{byteLength:1,components:1};case rh:case sh:case hh:return{byteLength:2,components:1};case ch:case dh:return{byteLength:2,components:4};case ah:case oh:case lh:return{byteLength:4,components:1};case gh:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(n);switch(i){case ph:case _h:return e*t;case vh:return e*t*2;case wh:case Ch:return e*t/s.components*s.byteLength;case Sh:case xh:return e*t*2/s.components*s.byteLength;case fh:return e*t*3/s.components*s.byteLength;case mh:case Lh:return e*t*4/s.components*s.byteLength;case Eh:case Mh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Th:case Dh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Ih:case Rh:return Math.max(e,16)*Math.max(t,8)/4;case Nh:case Ah:return Math.max(e,8)*Math.max(t,8)/2;case Ph:case Oh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Fh:case Bh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case zh:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Vh:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Wh:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case Hh:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Uh:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case jh:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case Gh:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case Kh:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case $h:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case qh:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Qh:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Xh:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Yh:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Zh:case Jh:case ec:return Math.ceil(e/4)*Math.ceil(t/4)*16;case tc:case ic:return Math.ceil(e/4)*Math.ceil(t/4)*8;case nc:case sc:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}const $y={contain:function(e,t){const i=e.image&&e.image.width?e.image.width/e.image.height:1;return i>t?(e.repeat.x=1,e.repeat.y=i/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/i,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){const i=e.image&&e.image.width?e.image.width/e.image.height:1;return i>t?(e.repeat.x=t/i,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=i/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:Ky};function qy(){let e=null,t=!1,i=null,n=null;function s(t,r){i(t,r),n=e.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(s),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function Qy(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);const n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){if(i.isInterleavedBufferAttribute&&(i=i.data),i.isGLBufferAttribute){const e=t.get(i);return void((!e||e.version<i.version)&&t.set(i,{buffer:i.buffer,type:i.type,bytesPerElement:i.elementSize,version:i.version}))}const s=t.get(i);if(void 0===s)t.set(i,function(t,i){const n=t.array,s=t.usage,r=n.byteLength,o=e.createBuffer();let a;if(e.bindBuffer(i,o),e.bufferData(i,n,s),t.onUploadCallback(),n instanceof Float32Array)a=e.FLOAT;else if(n instanceof Uint16Array)a=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(n instanceof Int16Array)a=e.SHORT;else if(n instanceof Uint32Array)a=e.UNSIGNED_INT;else if(n instanceof Int32Array)a=e.INT;else if(n instanceof Int8Array)a=e.BYTE;else if(n instanceof Uint8Array)a=e.UNSIGNED_BYTE;else{if(!(n instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+n);a=e.UNSIGNED_BYTE}return{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version,size:r}}(i,n));else if(s.version<i.version){if(s.size!==i.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,n){const s=i.array,r=i.updateRanges;if(e.bindBuffer(n,t),0===r.length)e.bufferSubData(n,0,s);else{r.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<r.length;e++){const i=r[t],n=r[e];n.start<=i.start+i.count+1?i.count=Math.max(i.count,n.start+n.count-i.start):(++t,r[t]=n)}r.length=t+1;for(let i=0,o=r.length;i<o;i++){const t=r[i];e.bufferSubData(n,t.start*s.BYTES_PER_ELEMENT,s,t.start,t.count)}i.clearUpdateRanges()}i.onUploadCallback()}(s.buffer,i,n),s.version=i.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Da}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Da);const Xy={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Yy={common:{diffuse:{value:new xg(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ld},alphaMap:{value:null},alphaMapTransform:{value:new Ld},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ld}},envmap:{envMap:{value:null},envMapRotation:{value:new Ld},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ld}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ld}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ld},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ld},normalScale:{value:new kd(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ld},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ld}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ld}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ld}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xg(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ld},alphaTest:{value:0},uvTransform:{value:new Ld}},sprite:{diffuse:{value:new xg(16777215)},opacity:{value:1},center:{value:new kd(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ld},alphaMap:{value:null},alphaMapTransform:{value:new Ld},alphaTest:{value:0}}},Zy={basic:{uniforms:fp([Yy.common,Yy.specularmap,Yy.envmap,Yy.aomap,Yy.lightmap,Yy.fog]),vertexShader:Xy.meshbasic_vert,fragmentShader:Xy.meshbasic_frag},lambert:{uniforms:fp([Yy.common,Yy.specularmap,Yy.envmap,Yy.aomap,Yy.lightmap,Yy.emissivemap,Yy.bumpmap,Yy.normalmap,Yy.displacementmap,Yy.fog,Yy.lights,{emissive:{value:new xg(0)}}]),vertexShader:Xy.meshlambert_vert,fragmentShader:Xy.meshlambert_frag},phong:{uniforms:fp([Yy.common,Yy.specularmap,Yy.envmap,Yy.aomap,Yy.lightmap,Yy.emissivemap,Yy.bumpmap,Yy.normalmap,Yy.displacementmap,Yy.fog,Yy.lights,{emissive:{value:new xg(0)},specular:{value:new xg(1118481)},shininess:{value:30}}]),vertexShader:Xy.meshphong_vert,fragmentShader:Xy.meshphong_frag},standard:{uniforms:fp([Yy.common,Yy.envmap,Yy.aomap,Yy.lightmap,Yy.emissivemap,Yy.bumpmap,Yy.normalmap,Yy.displacementmap,Yy.roughnessmap,Yy.metalnessmap,Yy.fog,Yy.lights,{emissive:{value:new xg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xy.meshphysical_vert,fragmentShader:Xy.meshphysical_frag},toon:{uniforms:fp([Yy.common,Yy.aomap,Yy.lightmap,Yy.emissivemap,Yy.bumpmap,Yy.normalmap,Yy.displacementmap,Yy.gradientmap,Yy.fog,Yy.lights,{emissive:{value:new xg(0)}}]),vertexShader:Xy.meshtoon_vert,fragmentShader:Xy.meshtoon_frag},matcap:{uniforms:fp([Yy.common,Yy.bumpmap,Yy.normalmap,Yy.displacementmap,Yy.fog,{matcap:{value:null}}]),vertexShader:Xy.meshmatcap_vert,fragmentShader:Xy.meshmatcap_frag},points:{uniforms:fp([Yy.points,Yy.fog]),vertexShader:Xy.points_vert,fragmentShader:Xy.points_frag},dashed:{uniforms:fp([Yy.common,Yy.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xy.linedashed_vert,fragmentShader:Xy.linedashed_frag},depth:{uniforms:fp([Yy.common,Yy.displacementmap]),vertexShader:Xy.depth_vert,fragmentShader:Xy.depth_frag},normal:{uniforms:fp([Yy.common,Yy.bumpmap,Yy.normalmap,Yy.displacementmap,{opacity:{value:1}}]),vertexShader:Xy.meshnormal_vert,fragmentShader:Xy.meshnormal_frag},sprite:{uniforms:fp([Yy.sprite,Yy.fog]),vertexShader:Xy.sprite_vert,fragmentShader:Xy.sprite_frag},background:{uniforms:{uvTransform:{value:new Ld},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xy.background_vert,fragmentShader:Xy.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ld}},vertexShader:Xy.backgroundCube_vert,fragmentShader:Xy.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xy.cube_vert,fragmentShader:Xy.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xy.equirect_vert,fragmentShader:Xy.equirect_frag},distanceRGBA:{uniforms:fp([Yy.common,Yy.displacementmap,{referencePosition:{value:new iu},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xy.distanceRGBA_vert,fragmentShader:Xy.distanceRGBA_frag},shadow:{uniforms:fp([Yy.lights,Yy.fog,{color:{value:new xg(0)},opacity:{value:1}}]),vertexShader:Xy.shadow_vert,fragmentShader:Xy.shadow_frag}};Zy.physical={uniforms:fp([Zy.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ld},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ld},clearcoatNormalScale:{value:new kd(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ld},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ld},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ld},sheen:{value:0},sheenColor:{value:new xg(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ld},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ld},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ld},transmissionSamplerSize:{value:new kd},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ld},attenuationDistance:{value:0},attenuationColor:{value:new xg(0)},specularColor:{value:new xg(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ld},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ld},anisotropyVector:{value:new kd},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ld}}]),vertexShader:Xy.meshphysical_vert,fragmentShader:Xy.meshphysical_frag};const Jy={r:0,b:0,g:0},ew=new Hu,tw=new Iu;function iw(e,t,i,n,s,r,o){const a=new xg(0);let l,h,c=!0===r?0:1,d=null,u=0,g=null;function p(e){let n=!0===e.isScene?e.background:null;if(n&&n.isTexture){n=(e.backgroundBlurriness>0?i:t).get(n)}return n}function f(t,i){t.getRGB(Jy,mp(e)),n.buffers.color.setClear(Jy.r,Jy.g,Jy.b,i,o)}return{getClearColor:function(){return a},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.set(e),c=t,f(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,f(a,c)},render:function(t){let i=!1;const s=p(t);null===s?f(a,c):s&&s.isColor&&(f(s,1),i=!0);const r=e.xr.getEnvironmentBlendMode();"additive"===r?n.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===r&&n.buffers.color.setClear(0,0,0,0,o),(e.autoClear||i)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,i){const n=p(i);n&&(n.isCubeTexture||n.mapping===Hl)?(void 0===h&&(h=new dp(new gp(1,1,1),new vp({name:"BackgroundCubeMaterial",uniforms:pp(Zy.backgroundCube.uniforms),vertexShader:Zy.backgroundCube.vertexShader,fragmentShader:Zy.backgroundCube.fragmentShader,side:Ha,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(h)),ew.copy(i.backgroundRotation),ew.x*=-1,ew.y*=-1,ew.z*=-1,n.isCubeTexture&&!1===n.isRenderTargetTexture&&(ew.y*=-1,ew.z*=-1),h.material.uniforms.envMap.value=n,h.material.uniforms.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=i.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(tw.makeRotationFromEuler(ew)),h.material.toneMapped=Bd.getTransfer(n.colorSpace)!==Tc,d===n&&u===n.version&&g===e.toneMapping||(h.material.needsUpdate=!0,d=n,u=n.version,g=e.toneMapping),h.layers.enableAll(),t.unshift(h,h.geometry,h.material,0,0,null)):n&&n.isTexture&&(void 0===l&&(l=new dp(new F_(2,2),new vp({name:"BackgroundMaterial",uniforms:pp(Zy.background.uniforms),vertexShader:Zy.background.vertexShader,fragmentShader:Zy.background.fragmentShader,side:Wa,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(l)),l.material.uniforms.t2D.value=n,l.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,l.material.toneMapped=Bd.getTransfer(n.colorSpace)!==Tc,!0===n.matrixAutoUpdate&&n.updateMatrix(),l.material.uniforms.uvTransform.value.copy(n.matrix),d===n&&u===n.version&&g===e.toneMapping||(l.material.needsUpdate=!0,d=n,u=n.version,g=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==h&&(h.geometry.dispose(),h.material.dispose()),void 0!==l&&(l.geometry.dispose(),l.material.dispose())}}}function nw(e,t){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),n={},s=h(null);let r=s,o=!1;function a(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function h(e){const t=[],n=[],s=[];for(let r=0;r<i;r++)t[r]=0,n[r]=0,s[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:s,object:e,attributes:{},index:null}}function c(){const e=r.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function d(e){u(e,0)}function u(t,i){const n=r.newAttributes,s=r.enabledAttributes,o=r.attributeDivisors;n[t]=1,0===s[t]&&(e.enableVertexAttribArray(t),s[t]=1),o[t]!==i&&(e.vertexAttribDivisor(t,i),o[t]=i)}function g(){const t=r.newAttributes,i=r.enabledAttributes;for(let n=0,s=i.length;n<s;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function p(t,i,n,s,r,o,a){!0===a?e.vertexAttribIPointer(t,i,n,r,o):e.vertexAttribPointer(t,i,n,s,r,o)}function f(){m(),o=!0,r!==s&&(r=s,a(r.object))}function m(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:function(i,s,l,f,m){let _=!1;const v=function(t,i,s){const r=!0===s.wireframe;let o=n[t.id];void 0===o&&(o={},n[t.id]=o);let a=o[i.id];void 0===a&&(a={},o[i.id]=a);let l=a[r];void 0===l&&(l=h(e.createVertexArray()),a[r]=l);return l}(f,l,s);r!==v&&(r=v,a(r.object)),_=function(e,t,i,n){const s=r.attributes,o=t.attributes;let a=0;const l=i.getAttributes();for(const r in l){if(l[r].location>=0){const t=s[r];let i=o[r];if(void 0===i&&("instanceMatrix"===r&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===r&&e.instanceColor&&(i=e.instanceColor)),void 0===t)return!0;if(t.attribute!==i)return!0;if(i&&t.data!==i.data)return!0;a++}}return r.attributesNum!==a||r.index!==n}(i,f,l,m),_&&function(e,t,i,n){const s={},o=t.attributes;let a=0;const l=i.getAttributes();for(const r in l){if(l[r].location>=0){let t=o[r];void 0===t&&("instanceMatrix"===r&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===r&&e.instanceColor&&(t=e.instanceColor));const i={};i.attribute=t,t&&t.data&&(i.data=t.data),s[r]=i,a++}}r.attributes=s,r.attributesNum=a,r.index=n}(i,f,l,m),null!==m&&t.update(m,e.ELEMENT_ARRAY_BUFFER),(_||o)&&(o=!1,function(i,n,s,r){c();const o=r.attributes,a=s.getAttributes(),l=n.defaultAttributeValues;for(const h in a){const n=a[h];if(n.location>=0){let s=o[h];if(void 0===s&&("instanceMatrix"===h&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const o=s.normalized,a=s.itemSize,l=t.get(s);if(void 0===l)continue;const h=l.buffer,c=l.type,g=l.bytesPerElement,f=c===e.INT||c===e.UNSIGNED_INT||s.gpuType===oh;if(s.isInterleavedBufferAttribute){const t=s.data,l=t.stride,m=s.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)u(n.location+e,t.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===r._maxInstanceCount&&(r._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<n.locationSize;e++)d(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<n.locationSize;e++)p(n.location+e,a/n.locationSize,c,o,l*g,(m+a/n.locationSize*e)*g,f)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)u(n.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===r._maxInstanceCount&&(r._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<n.locationSize;e++)d(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<n.locationSize;e++)p(n.location+e,a/n.locationSize,c,o,a*g,a/n.locationSize*e*g,f)}}else if(void 0!==l){const t=l[h];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(n.location,t);break;case 3:e.vertexAttrib3fv(n.location,t);break;case 4:e.vertexAttrib4fv(n.location,t);break;default:e.vertexAttrib1fv(n.location,t)}}}}g()}(i,s,l,f),null!==m&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(m).buffer))},reset:f,resetDefaultState:m,dispose:function(){f();for(const e in n){const t=n[e];for(const e in t){const i=t[e];for(const e in i)l(i[e].object),delete i[e];delete t[e]}delete n[e]}},releaseStatesOfGeometry:function(e){if(void 0===n[e.id])return;const t=n[e.id];for(const i in t){const e=t[i];for(const t in e)l(e[t].object),delete e[t];delete t[i]}delete n[e.id]},releaseStatesOfProgram:function(e){for(const t in n){const i=n[t];if(void 0===i[e.id])continue;const s=i[e.id];for(const e in s)l(s[e].object),delete s[e];delete i[e.id]}},initAttributes:c,enableAttribute:d,disableUnusedAttributes:g}}function sw(e,t,i){let n;function s(t,s,r){0!==r&&(e.drawArraysInstanced(n,t,s,r),i.update(s,n,r))}this.setMode=function(e){n=e},this.render=function(t,s){e.drawArrays(n,t,s),i.update(s,n,1)},this.renderInstances=s,this.renderMultiDraw=function(e,s,r){if(0===r)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,e,0,s,0,r);let o=0;for(let t=0;t<r;t++)o+=s[t];i.update(o,n,1)},this.renderMultiDrawInstances=function(e,r,o,a){if(0===o)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)s(e[t],r[t],a[t]);else{l.multiDrawArraysInstancedWEBGL(n,e,0,r,0,a,0,o);let t=0;for(let e=0;e<o;e++)t+=r[e]*a[e];i.update(t,n,1)}}}function rw(e,t,i,n){let s;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=void 0!==i.precision?i.precision:"highp";const a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=!0===i.logarithmicDepthBuffer,h=!0===i.reverseDepthBuffer&&t.has("EXT_clip_control"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==s)return s;if(!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");s=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:r,textureFormatReadable:function(t){return t===mh||n.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(i){const s=i===hh&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(i!==ih&&n.convert(i)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&i!==lh&&!s)},precision:o,logarithmicDepthBuffer:l,reverseDepthBuffer:h,maxTextures:c,maxVertexTextures:d,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:d>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function ow(e){const t=this;let i=null,n=0,s=!1,r=!1;const o=new Ef,a=new Ld,l={value:null,needsUpdate:!1};function h(e,i,n,s){const r=null!==e?e.length:0;let h=null;if(0!==r){if(h=l.value,!0!==s||null===h){const t=n+4*r,s=i.matrixWorldInverse;a.getNormalMatrix(s),(null===h||h.length<t)&&(h=new Float32Array(t));for(let i=0,l=n;i!==r;++i,l+=4)o.copy(e[i]).applyMatrix4(s,a),o.normal.toArray(h,l),h[l+3]=o.constant}l.value=h,l.needsUpdate=!0}return t.numPlanes=r,t.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const i=0!==e.length||t||0!==n||s;return s=t,n=e.length,i},this.beginShadows=function(){r=!0,h(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(e,t){i=h(e,t,0)},this.setState=function(o,a,c){const d=o.clippingPlanes,u=o.clipIntersection,g=o.clipShadows,p=e.get(o);if(!s||null===d||0===d.length||r&&!g)r?h(null):function(){l.value!==i&&(l.value=i,l.needsUpdate=n>0);t.numPlanes=n,t.numIntersection=0}();else{const e=r?0:n,t=4*e;let s=p.clippingState||null;l.value=s,s=h(d,a,t,c);for(let n=0;n!==t;++n)s[n]=i[n];p.clippingState=s,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=e}}}function aw(e){let t=new WeakMap;function i(e,t){return t===Vl?e.mapping=Bl:t===Wl&&(e.mapping=zl),e}function n(e){const i=e.target;i.removeEventListener("dispose",n);const s=t.get(i);void 0!==s&&(t.delete(i),s.dispose())}return{get:function(s){if(s&&s.isTexture){const r=s.mapping;if(r===Vl||r===Wl){if(t.has(s)){return i(t.get(s).texture,s.mapping)}{const r=s.image;if(r&&r.height>0){const o=new Ep(r.height);return o.fromEquirectangularTexture(e,s),t.set(s,o),s.addEventListener("dispose",n),i(o.texture,s.mapping)}return null}}}return s},dispose:function(){t=new WeakMap}}}const lw=[.125,.215,.35,.446,.526,.582],hw=20,cw=new Zv,dw=new xg;let uw=null,gw=0,pw=0,fw=!1;const mw=(1+Math.sqrt(5))/2,_w=1/mw,vw=[new iu(-mw,_w,0),new iu(mw,_w,0),new iu(-_w,0,mw),new iu(_w,0,mw),new iu(0,mw,-_w),new iu(0,mw,_w),new iu(-1,1,-1),new iu(1,1,-1),new iu(-1,1,1),new iu(1,1,1)];class bw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;uw=this._renderer.getRenderTarget(),gw=this._renderer.getActiveCubeFace(),pw=this._renderer.getActiveMipmapLevel(),fw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,n,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Sw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Cw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(uw,gw,pw),this._renderer.xr.enabled=fw,e.scissorTest=!1,ww(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Bl||e.mapping===zl?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),uw=this._renderer.getRenderTarget(),gw=this._renderer.getActiveCubeFace(),pw=this._renderer.getActiveMipmapLevel(),fw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Yl,minFilter:Yl,generateMipmaps:!1,type:hh,format:mh,colorSpace:Ec,depthBuffer:!1},n=yw(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=yw(e,t,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],i=[],n=[];let s=e;const r=e-4+1+lw.length;for(let o=0;o<r;o++){const r=Math.pow(2,s);i.push(r);let a=1/r;o>e-4?a=lw[o-e+4-1]:0===o&&(a=0),n.push(a);const l=1/(r-2),h=-l,c=1+l,d=[h,h,c,h,c,c,h,h,c,c,h,c],u=6,g=6,p=3,f=2,m=1,_=new Float32Array(p*g*u),v=new Float32Array(f*g*u),b=new Float32Array(m*g*u);for(let e=0;e<u;e++){const t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];_.set(n,p*g*e),v.set(d,f*g*e);const s=[e,e,e,e,e,e];b.set(s,m*g*e)}const y=new Jg;y.setAttribute("position",new Og(_,p)),y.setAttribute("uv",new Og(v,f)),y.setAttribute("faceIndex",new Og(b,m)),t.push(y),s>4&&s--}return{lodPlanes:t,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(e,t,i){const n=new Float32Array(hw),s=new iu(0,1,0),r=new vp({name:"SphericalGaussianBlur",defines:{n:hw,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:xw(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:ja,depthTest:!1,depthWrite:!1});return r}(n,e,t)}return n}_compileMaterial(e){const t=new dp(this._lodPlanes[0],e);this._renderer.compile(t,cw)}_sceneToCubeUV(e,t,i,n){const s=new Sp(90,1,t,i),r=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,h=a.toneMapping;a.getClearColor(dw),a.toneMapping=El,a.autoClear=!1;const c=new Mg({name:"PMREM.Background",side:Ha,depthWrite:!1,depthTest:!1}),d=new dp(new gp,c);let u=!1;const g=e.background;g?g.isColor&&(c.color.copy(g),e.background=null,u=!0):(c.color.copy(dw),u=!0);for(let p=0;p<6;p++){const t=p%3;0===t?(s.up.set(0,r[p],0),s.lookAt(o[p],0,0)):1===t?(s.up.set(0,0,r[p]),s.lookAt(0,o[p],0)):(s.up.set(0,r[p],0),s.lookAt(0,0,o[p]));const i=this._cubeSize;ww(n,t*i,p>2?i:0,i,i),a.setRenderTarget(n),u&&a.render(d,s),a.render(e,s)}d.geometry.dispose(),d.material.dispose(),a.toneMapping=h,a.autoClear=l,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===Bl||e.mapping===zl;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Sw()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Cw());const s=n?this._cubemapMaterial:this._equirectMaterial,r=new dp(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const o=this._cubeSize;ww(t,0,0,3*o,2*o),i.setRenderTarget(t),i.render(r,cw)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const n=this._lodPlanes.length;for(let s=1;s<n;s++){const t=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),i=vw[(n-s-1)%vw.length];this._blur(e,s-1,s,t,i)}t.autoClear=i}_blur(e,t,i,n,s){const r=this._pingPongRenderTarget;this._halfBlur(e,r,t,i,n,"latitudinal",s),this._halfBlur(r,e,i,i,n,"longitudinal",s)}_halfBlur(e,t,i,n,s,r,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==r&&"longitudinal"!==r&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new dp(this._lodPlanes[n],l),c=l.uniforms,d=this._sizeLods[i]-1,u=isFinite(s)?Math.PI/(2*d):2*Math.PI/39,g=s/u,p=isFinite(s)?1+Math.floor(3*g):hw;p>hw&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const f=[];let m=0;for(let b=0;b<hw;++b){const e=b/g,t=Math.exp(-e*e/2);f.push(t),0===b?m+=t:b<p&&(m+=2*t)}for(let b=0;b<f.length;b++)f[b]=f[b]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=f,c.latitudinal.value="latitudinal"===r,o&&(c.poleAxis.value=o);const{_lodMax:_}=this;c.dTheta.value=u,c.mipInt.value=_-i;const v=this._sizeLods[n];ww(t,3*v*(n>_-4?n-_+4:0),4*(this._cubeSize-v),3*v,2*v),a.setRenderTarget(t),a.render(h,cw)}}function yw(e,t,i){const n=new Xd(e,t,i);return n.texture.mapping=Hl,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ww(e,t,i,n,s){e.viewport.set(t,i,n,s),e.scissor.set(t,i,n,s)}function Cw(){return new vp({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:xw(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:ja,depthTest:!1,depthWrite:!1})}function Sw(){return new vp({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:xw(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:ja,depthTest:!1,depthWrite:!1})}function xw(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function kw(e){let t=new WeakMap,i=null;function n(e){const i=e.target;i.removeEventListener("dispose",n);const s=t.get(i);void 0!==s&&(t.delete(i),s.dispose())}return{get:function(s){if(s&&s.isTexture){const r=s.mapping,o=r===Vl||r===Wl,a=r===Bl||r===zl;if(o||a){let r=t.get(s);const l=void 0!==r?r.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==l)return null===i&&(i=new bw(e)),r=o?i.fromEquirectangular(s,r):i.fromCubemap(s,r),r.texture.pmremVersion=s.pmremVersion,t.set(s,r),r.texture;if(void 0!==r)return r.texture;{const l=s.image;return o&&l&&l.height>0||a&&l&&function(e){let t=0;const i=6;for(let n=0;n<i;n++)void 0!==e[n]&&t++;return t===i}(l)?(null===i&&(i=new bw(e)),r=o?i.fromEquirectangular(s):i.fromCubemap(s),r.texture.pmremVersion=s.pmremVersion,t.set(s,r),s.addEventListener("dispose",n),r.texture):null}}}return s},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function Lw(e){const t={};function i(i){if(void 0!==t[i])return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(e){const t=i(e);return null===t&&Rd("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Ew(e,t,i,n){const s={},r=new WeakMap;function o(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const i in a.attributes)t.remove(a.attributes[i]);a.removeEventListener("dispose",o),delete s[a.id];const l=r.get(a);l&&(t.remove(l),r.delete(a)),n.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,i.memory.geometries--}function a(e){const i=[],n=e.index,s=e.attributes.position;let o=0;if(null!==n){const e=n.array;o=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],s=e[t+1],r=e[t+2];i.push(n,s,s,r,r,n)}}else{if(void 0===s)return;{const e=s.array;o=s.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,s=t+2;i.push(e,n,n,s,s,e)}}}const a=new(Md(i)?Ug:Wg)(i,1);a.version=o;const l=r.get(e);l&&t.remove(l),r.set(e,a)}return{get:function(e,t){return!0===s[t.id]||(t.addEventListener("dispose",o),s[t.id]=!0,i.memory.geometries++),t},update:function(i){const n=i.attributes;for(const s in n)t.update(n[s],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=r.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&a(e)}else a(e);return r.get(e)}}}function Mw(e,t,i){let n,s,r;function o(t,o,a){0!==a&&(e.drawElementsInstanced(n,o,s,t*r,a),i.update(o,n,a))}this.setMode=function(e){n=e},this.setIndex=function(e){s=e.type,r=e.bytesPerElement},this.render=function(t,o){e.drawElements(n,o,s,t*r),i.update(o,n,1)},this.renderInstances=o,this.renderMultiDraw=function(e,r,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,r,0,s,e,0,o);let a=0;for(let t=0;t<o;t++)a+=r[t];i.update(a,n,1)},this.renderMultiDrawInstances=function(e,a,l,h){if(0===l)return;const c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)o(e[t]/r,a[t],h[t]);else{c.multiDrawElementsInstancedWEBGL(n,a,0,s,e,0,h,0,l);let t=0;for(let e=0;e<l;e++)t+=a[e]*h[e];i.update(t,n,1)}}}function Tw(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,s){switch(t.calls++,n){case e.TRIANGLES:t.triangles+=s*(i/3);break;case e.LINES:t.lines+=s*(i/2);break;case e.LINE_STRIP:t.lines+=s*(i-1);break;case e.LINE_LOOP:t.lines+=s*i;break;case e.POINTS:t.points+=s*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Dw(e,t,i){const n=new WeakMap,s=new qd;return{update:function(r,o,a){const l=r.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,c=void 0!==h?h.length:0;let d=n.get(o);if(void 0===d||d.count!==c){void 0!==d&&d.texture.dispose();const u=void 0!==o.morphAttributes.position,g=void 0!==o.morphAttributes.normal,p=void 0!==o.morphAttributes.color,f=o.morphAttributes.position||[],m=o.morphAttributes.normal||[],_=o.morphAttributes.color||[];let v=0;!0===u&&(v=1),!0===g&&(v=2),!0===p&&(v=3);let b=o.attributes.position.count*v,y=1;b>t.maxTextureSize&&(y=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);const w=new Float32Array(b*y*4*c),C=new Yd(w,b,y,c);C.type=lh,C.needsUpdate=!0;const S=4*v;for(let k=0;k<c;k++){const L=f[k],E=m[k],M=_[k],T=b*y*4*k;for(let D=0;D<L.count;D++){const N=D*S;!0===u&&(s.fromBufferAttribute(L,D),w[T+N+0]=s.x,w[T+N+1]=s.y,w[T+N+2]=s.z,w[T+N+3]=0),!0===g&&(s.fromBufferAttribute(E,D),w[T+N+4]=s.x,w[T+N+5]=s.y,w[T+N+6]=s.z,w[T+N+7]=0),!0===p&&(s.fromBufferAttribute(M,D),w[T+N+8]=s.x,w[T+N+9]=s.y,w[T+N+10]=s.z,w[T+N+11]=4===M.itemSize?s.w:1)}}function x(){C.dispose(),n.delete(o),o.removeEventListener("dispose",x)}d={count:c,texture:C,size:new kd(b,y)},n.set(o,d),o.addEventListener("dispose",x)}if(!0===r.isInstancedMesh&&null!==r.morphTexture)a.getUniforms().setValue(e,"morphTexture",r.morphTexture,i);else{let I=0;for(let R=0;R<l.length;R++)I+=l[R];const A=o.morphTargetsRelative?1:1-I;a.getUniforms().setValue(e,"morphTargetBaseInfluence",A),a.getUniforms().setValue(e,"morphTargetInfluences",l)}a.getUniforms().setValue(e,"morphTargetsTexture",d.texture,i),a.getUniforms().setValue(e,"morphTargetsTextureSize",d.size)}}}function Nw(e,t,i,n){let s=new WeakMap;function r(e){const t=e.target;t.removeEventListener("dispose",r),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(o){const a=n.render.frame,l=o.geometry,h=t.get(o,l);if(s.get(h)!==a&&(t.update(h),s.set(h,a)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",r)&&o.addEventListener("dispose",r),s.get(o)!==a&&(i.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&i.update(o.instanceColor,e.ARRAY_BUFFER),s.set(o,a))),o.isSkinnedMesh){const e=o.skeleton;s.get(e)!==a&&(e.update(),s.set(e,a))}return h},dispose:function(){s=new WeakMap}}}const Iw=new $d,Aw=new Sm(1,1),Rw=new Yd,Pw=new Jd,Ow=new Lp,Fw=[],Bw=[],zw=new Float32Array(16),Vw=new Float32Array(9),Ww=new Float32Array(4);function Hw(e,t,i){const n=e[0];if(n<=0||n>0)return e;const s=t*i;let r=Fw[s];if(void 0===r&&(r=new Float32Array(s),Fw[s]=r),0!==t){n.toArray(r,0);for(let n=1,s=0;n!==t;++n)s+=i,e[n].toArray(r,s)}return r}function Uw(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function jw(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function Gw(e,t){let i=Bw[t];void 0===i&&(i=new Int32Array(t),Bw[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function Kw(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function $w(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Uw(i,t))return;e.uniform2fv(this.addr,t),jw(i,t)}}function qw(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Uw(i,t))return;e.uniform3fv(this.addr,t),jw(i,t)}}function Qw(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Uw(i,t))return;e.uniform4fv(this.addr,t),jw(i,t)}}function Xw(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(Uw(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),jw(i,t)}else{if(Uw(i,n))return;Ww.set(n),e.uniformMatrix2fv(this.addr,!1,Ww),jw(i,n)}}function Yw(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(Uw(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),jw(i,t)}else{if(Uw(i,n))return;Vw.set(n),e.uniformMatrix3fv(this.addr,!1,Vw),jw(i,n)}}function Zw(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(Uw(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),jw(i,t)}else{if(Uw(i,n))return;zw.set(n),e.uniformMatrix4fv(this.addr,!1,zw),jw(i,n)}}function Jw(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function eC(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Uw(i,t))return;e.uniform2iv(this.addr,t),jw(i,t)}}function tC(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Uw(i,t))return;e.uniform3iv(this.addr,t),jw(i,t)}}function iC(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Uw(i,t))return;e.uniform4iv(this.addr,t),jw(i,t)}}function nC(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function sC(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Uw(i,t))return;e.uniform2uiv(this.addr,t),jw(i,t)}}function rC(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Uw(i,t))return;e.uniform3uiv(this.addr,t),jw(i,t)}}function oC(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Uw(i,t))return;e.uniform4uiv(this.addr,t),jw(i,t)}}function aC(e,t,i){const n=this.cache,s=i.allocateTextureUnit();let r;n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),this.type===e.SAMPLER_2D_SHADOW?(Aw.compareFunction=Qc,r=Aw):r=Iw,i.setTexture2D(t||r,s)}function lC(e,t,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),i.setTexture3D(t||Pw,s)}function hC(e,t,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),i.setTextureCube(t||Ow,s)}function cC(e,t,i){const n=this.cache,s=i.allocateTextureUnit();n[0]!==s&&(e.uniform1i(this.addr,s),n[0]=s),i.setTexture2DArray(t||Rw,s)}function dC(e,t){e.uniform1fv(this.addr,t)}function uC(e,t){const i=Hw(t,this.size,2);e.uniform2fv(this.addr,i)}function gC(e,t){const i=Hw(t,this.size,3);e.uniform3fv(this.addr,i)}function pC(e,t){const i=Hw(t,this.size,4);e.uniform4fv(this.addr,i)}function fC(e,t){const i=Hw(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function mC(e,t){const i=Hw(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function _C(e,t){const i=Hw(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function vC(e,t){e.uniform1iv(this.addr,t)}function bC(e,t){e.uniform2iv(this.addr,t)}function yC(e,t){e.uniform3iv(this.addr,t)}function wC(e,t){e.uniform4iv(this.addr,t)}function CC(e,t){e.uniform1uiv(this.addr,t)}function SC(e,t){e.uniform2uiv(this.addr,t)}function xC(e,t){e.uniform3uiv(this.addr,t)}function kC(e,t){e.uniform4uiv(this.addr,t)}function LC(e,t,i){const n=this.cache,s=t.length,r=Gw(i,s);Uw(n,r)||(e.uniform1iv(this.addr,r),jw(n,r));for(let o=0;o!==s;++o)i.setTexture2D(t[o]||Iw,r[o])}function EC(e,t,i){const n=this.cache,s=t.length,r=Gw(i,s);Uw(n,r)||(e.uniform1iv(this.addr,r),jw(n,r));for(let o=0;o!==s;++o)i.setTexture3D(t[o]||Pw,r[o])}function MC(e,t,i){const n=this.cache,s=t.length,r=Gw(i,s);Uw(n,r)||(e.uniform1iv(this.addr,r),jw(n,r));for(let o=0;o!==s;++o)i.setTextureCube(t[o]||Ow,r[o])}function TC(e,t,i){const n=this.cache,s=t.length,r=Gw(i,s);Uw(n,r)||(e.uniform1iv(this.addr,r),jw(n,r));for(let o=0;o!==s;++o)i.setTexture2DArray(t[o]||Rw,r[o])}class DC{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Kw;case 35664:return $w;case 35665:return qw;case 35666:return Qw;case 35674:return Xw;case 35675:return Yw;case 35676:return Zw;case 5124:case 35670:return Jw;case 35667:case 35671:return eC;case 35668:case 35672:return tC;case 35669:case 35673:return iC;case 5125:return nC;case 36294:return sC;case 36295:return rC;case 36296:return oC;case 35678:case 36198:case 36298:case 36306:case 35682:return aC;case 35679:case 36299:case 36307:return lC;case 35680:case 36300:case 36308:case 36293:return hC;case 36289:case 36303:case 36311:case 36292:return cC}}(t.type)}}class NC{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return dC;case 35664:return uC;case 35665:return gC;case 35666:return pC;case 35674:return fC;case 35675:return mC;case 35676:return _C;case 5124:case 35670:return vC;case 35667:case 35671:return bC;case 35668:case 35672:return yC;case 35669:case 35673:return wC;case 5125:return CC;case 36294:return SC;case 36295:return xC;case 36296:return kC;case 35678:case 36198:case 36298:case 36306:case 35682:return LC;case 35679:case 36299:case 36307:return EC;case 35680:case 36300:case 36308:case 36293:return MC;case 36289:case 36303:case 36311:case 36292:return TC}}(t.type)}}class IC{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let s=0,r=n.length;s!==r;++s){const r=n[s];r.setValue(e,t[r.id],i)}}}const AC=/(\w+)(\])?(\[|\.)?/g;function RC(e,t){e.seq.push(t),e.map[t.id]=t}function PC(e,t,i){const n=e.name,s=n.length;for(AC.lastIndex=0;;){const r=AC.exec(n),o=AC.lastIndex;let a=r[1];const l="]"===r[2],h=r[3];if(l&&(a|=0),void 0===h||"["===h&&o+2===s){RC(i,void 0===h?new DC(a,e,t):new NC(a,e,t));break}{let e=i.map[a];void 0===e&&(e=new IC(a),RC(i,e)),i=e}}}class OC{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);PC(i,e.getUniformLocation(t,i.name),this)}}setValue(e,t,i,n){const s=this.map[t];void 0!==s&&s.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];void 0!==n&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let s=0,r=t.length;s!==r;++s){const r=t[s],o=i[r.id];!1!==o.needsUpdate&&r.setValue(e,o.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,s=e.length;n!==s;++n){const s=e[n];s.id in t&&i.push(s)}return i}}function FC(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}const BC=37297;let zC=0;const VC=new Ld;function WC(e,t,i){const n=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(n&&""===s)return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const n=parseInt(r[1]);return i.toUpperCase()+"\n\n"+s+"\n\n"+function(e,t){const i=e.split("\n"),n=[],s=Math.max(t-6,0),r=Math.min(t+6,i.length);for(let o=s;o<r;o++){const e=o+1;n.push(`${e===t?">":" "} ${e}: ${i[o]}`)}return n.join("\n")}(e.getShaderSource(t),n)}return s}function HC(e,t){const i=function(e){Bd._getMatrix(VC,Bd.workingColorSpace,e);const t=`mat3( ${VC.elements.map((e=>e.toFixed(4)))} )`;switch(Bd.getTransfer(e)){case Mc:return[t,"LinearTransferOETF"];case Tc:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );`,"}"].join("\n")}function UC(e,t){let i;switch(t){case Ml:i="Linear";break;case Tl:i="Reinhard";break;case Dl:i="Cineon";break;case Nl:i="ACESFilmic";break;case Al:i="AgX";break;case Rl:i="Neutral";break;case Il:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const jC=new iu;function GC(){Bd.getLuminanceCoefficients(jC);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${jC.x.toFixed(4)}, ${jC.y.toFixed(4)}, ${jC.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function KC(e){return""!==e}function $C(e,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function qC(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const QC=/^[ \t]*#include +<([\w\d./]+)>/gm;function XC(e){return e.replace(QC,ZC)}const YC=new Map;function ZC(e,t){let i=Xy[t];if(void 0===i){const e=YC.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");i=Xy[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return XC(i)}const JC=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eS(e){return e.replace(JC,tS)}function tS(e,t,i,n){let s="";for(let r=parseInt(t);r<parseInt(i);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function iS(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function nS(e,t,i,n){const s=e.getContext(),r=i.defines;let o=i.vertexShader,a=i.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Ba?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===za?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Va&&(t="SHADOWMAP_TYPE_VSM"),t}(i),h=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Bl:case zl:t="ENVMAP_TYPE_CUBE";break;case Hl:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),c=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===zl&&(t="ENVMAP_MODE_REFRACTION");return t}(i),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case xl:t="ENVMAP_BLENDING_MULTIPLY";break;case kl:t="ENVMAP_BLENDING_MIX";break;case Ll:t="ENVMAP_BLENDING_ADD"}return t}(i),u=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),g=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(KC).join("\n")}(i),p=function(e){const t=[];for(const i in e){const n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(r),f=s.createProgram();let m,_,v=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(m=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p].filter(KC).join("\n"),m.length>0&&(m+="\n"),_=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p].filter(KC).join("\n"),_.length>0&&(_+="\n")):(m=[iS(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(KC).join("\n"),_=[iS(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,p,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.envMap?"#define "+c:"",i.envMap?"#define "+d:"",u?"#define CUBEUV_TEXEL_WIDTH "+u.texelWidth:"",u?"#define CUBEUV_TEXEL_HEIGHT "+u.texelHeight:"",u?"#define CUBEUV_MAX_MIP "+u.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==El?"#define TONE_MAPPING":"",i.toneMapping!==El?Xy.tonemapping_pars_fragment:"",i.toneMapping!==El?UC("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Xy.colorspace_pars_fragment,HC("linearToOutputTexel",i.outputColorSpace),GC(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(KC).join("\n")),o=XC(o),o=$C(o,i),o=qC(o,i),a=XC(a),a=$C(a,i),a=qC(a,i),o=eS(o),a=eS(a),!0!==i.isRawShaderMaterial&&(v="#version 300 es\n",m=[g,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["#define varying in",i.glslVersion===cd?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===cd?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=v+m+o,y=v+_+a,w=FC(s,s.VERTEX_SHADER,b),C=FC(s,s.FRAGMENT_SHADER,y);function S(t){if(e.debug.checkShaderErrors){const i=s.getProgramInfoLog(f).trim(),n=s.getShaderInfoLog(w).trim(),r=s.getShaderInfoLog(C).trim();let o=!0,a=!0;if(!1===s.getProgramParameter(f,s.LINK_STATUS))if(o=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(s,f,w,C);else{const e=WC(s,w,"vertex"),n=WC(s,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(f,s.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+i+"\n"+e+"\n"+n)}else""!==i?console.warn("THREE.WebGLProgram: Program Info Log:",i):""!==n&&""!==r||(a=!1);a&&(t.diagnostics={runnable:o,programLog:i,vertexShader:{log:n,prefix:m},fragmentShader:{log:r,prefix:_}})}s.deleteShader(w),s.deleteShader(C),x=new OC(s,f),k=function(e,t){const i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const n=e.getActiveAttrib(t,s),r=n.name;let o=1;n.type===e.FLOAT_MAT2&&(o=2),n.type===e.FLOAT_MAT3&&(o=3),n.type===e.FLOAT_MAT4&&(o=4),i[r]={type:n.type,location:e.getAttribLocation(t,r),locationSize:o}}return i}(s,f)}let x,k;s.attachShader(f,w),s.attachShader(f,C),void 0!==i.index0AttributeName?s.bindAttribLocation(f,0,i.index0AttributeName):!0===i.morphTargets&&s.bindAttribLocation(f,0,"position"),s.linkProgram(f),this.getUniforms=function(){return void 0===x&&S(this),x},this.getAttributes=function(){return void 0===k&&S(this),k};let L=!1===i.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===L&&(L=s.getProgramParameter(f,BC)),L},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(f),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=zC++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=w,this.fragmentShader=C,this}let sS=0;class rS{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),s=this._getShaderStage(i),r=this._getShaderCacheForMaterial(e);return!1===r.has(n)&&(r.add(n),n.usedTimes++),!1===r.has(s)&&(r.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new oS(e),t.set(e,i)),i}}class oS{constructor(e){this.id=sS++,this.code=e,this.usedTimes=0}}function aS(e,t,i,n,s,r,o){const a=new Uu,l=new rS,h=new Set,c=[],d=s.logarithmicDepthBuffer,u=s.vertexTextures;let g=s.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return h.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(r,a,c,m,_){const v=m.fog,b=_.geometry,y=r.isMeshStandardMaterial?m.environment:null,w=(r.isMeshStandardMaterial?i:t).get(r.envMap||y),C=w&&w.mapping===Hl?w.image.height:null,S=p[r.type];null!==r.precision&&(g=s.getMaxPrecision(r.precision),g!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",g,"instead."));const x=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,k=void 0!==x?x.length:0;let L,E,M,T,D=0;if(void 0!==b.morphAttributes.position&&(D=1),void 0!==b.morphAttributes.normal&&(D=2),void 0!==b.morphAttributes.color&&(D=3),S){const e=Zy[S];L=e.vertexShader,E=e.fragmentShader}else L=r.vertexShader,E=r.fragmentShader,l.update(r),M=l.getVertexShaderID(r),T=l.getFragmentShaderID(r);const N=e.getRenderTarget(),I=e.state.buffers.depth.getReversed(),A=!0===_.isInstancedMesh,R=!0===_.isBatchedMesh,P=!!r.map,O=!!r.matcap,F=!!w,B=!!r.aoMap,z=!!r.lightMap,V=!!r.bumpMap,W=!!r.normalMap,H=!!r.displacementMap,U=!!r.emissiveMap,j=!!r.metalnessMap,G=!!r.roughnessMap,K=r.anisotropy>0,$=r.clearcoat>0,q=r.dispersion>0,Q=r.iridescence>0,X=r.sheen>0,Y=r.transmission>0,Z=K&&!!r.anisotropyMap,J=$&&!!r.clearcoatMap,ee=$&&!!r.clearcoatNormalMap,te=$&&!!r.clearcoatRoughnessMap,ie=Q&&!!r.iridescenceMap,ne=Q&&!!r.iridescenceThicknessMap,se=X&&!!r.sheenColorMap,re=X&&!!r.sheenRoughnessMap,oe=!!r.specularMap,ae=!!r.specularColorMap,le=!!r.specularIntensityMap,he=Y&&!!r.transmissionMap,ce=Y&&!!r.thicknessMap,de=!!r.gradientMap,ue=!!r.alphaMap,ge=r.alphaTest>0,pe=!!r.alphaHash,fe=!!r.extensions;let me=El;r.toneMapped&&(null!==N&&!0!==N.isXRRenderTarget||(me=e.toneMapping));const _e={shaderID:S,shaderType:r.type,shaderName:r.name,vertexShader:L,fragmentShader:E,defines:r.defines,customVertexShaderID:M,customFragmentShaderID:T,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:g,batching:R,batchingColor:R&&null!==_._colorsTexture,instancing:A,instancingColor:A&&null!==_.instanceColor,instancingMorph:A&&null!==_.morphTexture,supportsVertexTextures:u,outputColorSpace:null===N?e.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:Ec,alphaToCoverage:!!r.alphaToCoverage,map:P,matcap:O,envMap:F,envMapMode:F&&w.mapping,envMapCubeUVHeight:C,aoMap:B,lightMap:z,bumpMap:V,normalMap:W,displacementMap:u&&H,emissiveMap:U,normalMapObjectSpace:W&&r.normalMapType===xc,normalMapTangentSpace:W&&r.normalMapType===Sc,metalnessMap:j,roughnessMap:G,anisotropy:K,anisotropyMap:Z,clearcoat:$,clearcoatMap:J,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:q,iridescence:Q,iridescenceMap:ie,iridescenceThicknessMap:ne,sheen:X,sheenColorMap:se,sheenRoughnessMap:re,specularMap:oe,specularColorMap:ae,specularIntensityMap:le,transmission:Y,transmissionMap:he,thicknessMap:ce,gradientMap:de,opaque:!1===r.transparent&&r.blending===Ga&&!1===r.alphaToCoverage,alphaMap:ue,alphaTest:ge,alphaHash:pe,combine:r.combine,mapUv:P&&f(r.map.channel),aoMapUv:B&&f(r.aoMap.channel),lightMapUv:z&&f(r.lightMap.channel),bumpMapUv:V&&f(r.bumpMap.channel),normalMapUv:W&&f(r.normalMap.channel),displacementMapUv:H&&f(r.displacementMap.channel),emissiveMapUv:U&&f(r.emissiveMap.channel),metalnessMapUv:j&&f(r.metalnessMap.channel),roughnessMapUv:G&&f(r.roughnessMap.channel),anisotropyMapUv:Z&&f(r.anisotropyMap.channel),clearcoatMapUv:J&&f(r.clearcoatMap.channel),clearcoatNormalMapUv:ee&&f(r.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&f(r.clearcoatRoughnessMap.channel),iridescenceMapUv:ie&&f(r.iridescenceMap.channel),iridescenceThicknessMapUv:ne&&f(r.iridescenceThicknessMap.channel),sheenColorMapUv:se&&f(r.sheenColorMap.channel),sheenRoughnessMapUv:re&&f(r.sheenRoughnessMap.channel),specularMapUv:oe&&f(r.specularMap.channel),specularColorMapUv:ae&&f(r.specularColorMap.channel),specularIntensityMapUv:le&&f(r.specularIntensityMap.channel),transmissionMapUv:he&&f(r.transmissionMap.channel),thicknessMapUv:ce&&f(r.thicknessMap.channel),alphaMapUv:ue&&f(r.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(W||K),vertexColors:r.vertexColors,vertexAlphas:!0===r.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===_.isPoints&&!!b.attributes.uv&&(P||ue),fog:!!v,useFog:!0===r.fog,fogExp2:!!v&&v.isFogExp2,flatShading:!0===r.flatShading,sizeAttenuation:!0===r.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:I,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:k,morphTextureStride:D,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:me,decodeVideoTexture:P&&!0===r.map.isVideoTexture&&Bd.getTransfer(r.map.colorSpace)===Tc,decodeVideoTextureEmissive:U&&!0===r.emissiveMap.isVideoTexture&&Bd.getTransfer(r.emissiveMap.colorSpace)===Tc,premultipliedAlpha:r.premultipliedAlpha,doubleSided:r.side===Ua,flipSided:r.side===Ha,useDepthPacking:r.depthPacking>=0,depthPacking:r.depthPacking||0,index0AttributeName:r.index0AttributeName,extensionClipCullDistance:fe&&!0===r.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(fe&&!0===r.extensions.multiDraw||R)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:r.customProgramCacheKey()};return _e.vertexUv1s=h.has(1),_e.vertexUv2s=h.has(2),_e.vertexUv3s=h.has(3),h.clear(),_e},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.customVertexShaderID),i.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(i,t),function(e,t){a.disableAll(),t.supportsVertexTextures&&a.enable(0);t.instancing&&a.enable(1);t.instancingColor&&a.enable(2);t.instancingMorph&&a.enable(3);t.matcap&&a.enable(4);t.envMap&&a.enable(5);t.normalMapObjectSpace&&a.enable(6);t.normalMapTangentSpace&&a.enable(7);t.clearcoat&&a.enable(8);t.iridescence&&a.enable(9);t.alphaTest&&a.enable(10);t.vertexColors&&a.enable(11);t.vertexAlphas&&a.enable(12);t.vertexUv1s&&a.enable(13);t.vertexUv2s&&a.enable(14);t.vertexUv3s&&a.enable(15);t.vertexTangents&&a.enable(16);t.anisotropy&&a.enable(17);t.alphaHash&&a.enable(18);t.batching&&a.enable(19);t.dispersion&&a.enable(20);t.batchingColor&&a.enable(21);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.reverseDepthBuffer&&a.enable(4);t.skinning&&a.enable(5);t.morphTargets&&a.enable(6);t.morphNormals&&a.enable(7);t.morphColors&&a.enable(8);t.premultipliedAlpha&&a.enable(9);t.shadowMapEnabled&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.transmission&&a.enable(15);t.sheen&&a.enable(16);t.opaque&&a.enable(17);t.pointsUvs&&a.enable(18);t.decodeVideoTexture&&a.enable(19);t.decodeVideoTextureEmissive&&a.enable(20);t.alphaToCoverage&&a.enable(21);e.push(a.mask)}(i,t),i.push(e.outputColorSpace)),i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){const t=p[e.type];let i;if(t){const e=Zy[t];i=_p.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let n;for(let e=0,s=c.length;e<s;e++){const t=c[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new nS(e,i,t,r),c.push(n)),n},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function lS(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function hS(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function cS(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function dS(){const e=[];let t=0;const i=[],n=[],s=[];function r(i,n,s,r,o,a){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:n,material:s,groupOrder:r,renderOrder:i.renderOrder,z:o,group:a},e[t]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=s,l.groupOrder=r,l.renderOrder=i.renderOrder,l.z=o,l.group=a),t++,l}return{opaque:i,transmissive:n,transparent:s,init:function(){t=0,i.length=0,n.length=0,s.length=0},push:function(e,t,o,a,l,h){const c=r(e,t,o,a,l,h);o.transmission>0?n.push(c):!0===o.transparent?s.push(c):i.push(c)},unshift:function(e,t,o,a,l,h){const c=r(e,t,o,a,l,h);o.transmission>0?n.unshift(c):!0===o.transparent?s.unshift(c):i.unshift(c)},finish:function(){for(let i=t,n=e.length;i<n;i++){const t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||hS),n.length>1&&n.sort(t||cS),s.length>1&&s.sort(t||cS)}}}function uS(){let e=new WeakMap;return{get:function(t,i){const n=e.get(t);let s;return void 0===n?(s=new dS,e.set(t,[s])):i>=n.length?(s=new dS,n.push(s)):s=n[i],s},dispose:function(){e=new WeakMap}}}function gS(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new iu,color:new xg};break;case"SpotLight":i={position:new iu,direction:new iu,color:new xg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new iu,color:new xg,distance:0,decay:0};break;case"HemisphereLight":i={direction:new iu,skyColor:new xg,groundColor:new xg};break;case"RectAreaLight":i={color:new xg,position:new iu,halfWidth:new iu,halfHeight:new iu}}return e[t.id]=i,i}}}let pS=0;function fS(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function mS(e){const t=new gS,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kd};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kd,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)n.probe.push(new iu);const s=new iu,r=new Iu,o=new Iu;return{setup:function(s){let r=0,o=0,a=0;for(let e=0;e<9;e++)n.probe[e].set(0,0,0);let l=0,h=0,c=0,d=0,u=0,g=0,p=0,f=0,m=0,_=0,v=0;s.sort(fS);for(let e=0,y=s.length;e<y;e++){const b=s[e],y=b.color,w=b.intensity,C=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)r+=y.r*w,o+=y.g*w,a+=y.b*w;else if(b.isLightProbe){for(let e=0;e<9;e++)n.probe[e].addScaledVector(b.sh.coefficients[e],w);v++}else if(b.isDirectionalLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){const e=b.shadow,t=i.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,n.directionalShadow[l]=t,n.directionalShadowMap[l]=S,n.directionalShadowMatrix[l]=b.shadow.matrix,g++}n.directional[l]=e,l++}else if(b.isSpotLight){const e=t.get(b);e.position.setFromMatrixPosition(b.matrixWorld),e.color.copy(y).multiplyScalar(w),e.distance=C,e.coneCos=Math.cos(b.angle),e.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),e.decay=b.decay,n.spot[c]=e;const s=b.shadow;if(b.map&&(n.spotLightMap[m]=b.map,m++,s.updateMatrices(b),b.castShadow&&_++),n.spotLightMatrix[c]=s.matrix,b.castShadow){const e=i.get(b);e.shadowIntensity=s.intensity,e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,n.spotShadow[c]=e,n.spotShadowMap[c]=S,f++}c++}else if(b.isRectAreaLight){const e=t.get(b);e.color.copy(y).multiplyScalar(w),e.halfWidth.set(.5*b.width,0,0),e.halfHeight.set(0,.5*b.height,0),n.rectArea[d]=e,d++}else if(b.isPointLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),e.distance=b.distance,e.decay=b.decay,b.castShadow){const e=b.shadow,t=i.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,n.pointShadow[h]=t,n.pointShadowMap[h]=S,n.pointShadowMatrix[h]=b.shadow.matrix,p++}n.point[h]=e,h++}else if(b.isHemisphereLight){const e=t.get(b);e.skyColor.copy(b.color).multiplyScalar(w),e.groundColor.copy(b.groundColor).multiplyScalar(w),n.hemi[u]=e,u++}}d>0&&(!0===e.has("OES_texture_float_linear")?(n.rectAreaLTC1=Yy.LTC_FLOAT_1,n.rectAreaLTC2=Yy.LTC_FLOAT_2):(n.rectAreaLTC1=Yy.LTC_HALF_1,n.rectAreaLTC2=Yy.LTC_HALF_2)),n.ambient[0]=r,n.ambient[1]=o,n.ambient[2]=a;const b=n.hash;b.directionalLength===l&&b.pointLength===h&&b.spotLength===c&&b.rectAreaLength===d&&b.hemiLength===u&&b.numDirectionalShadows===g&&b.numPointShadows===p&&b.numSpotShadows===f&&b.numSpotMaps===m&&b.numLightProbes===v||(n.directional.length=l,n.spot.length=c,n.rectArea.length=d,n.point.length=h,n.hemi.length=u,n.directionalShadow.length=g,n.directionalShadowMap.length=g,n.pointShadow.length=p,n.pointShadowMap.length=p,n.spotShadow.length=f,n.spotShadowMap.length=f,n.directionalShadowMatrix.length=g,n.pointShadowMatrix.length=p,n.spotLightMatrix.length=f+m-_,n.spotLightMap.length=m,n.numSpotLightShadowsWithMaps=_,n.numLightProbes=v,b.directionalLength=l,b.pointLength=h,b.spotLength=c,b.rectAreaLength=d,b.hemiLength=u,b.numDirectionalShadows=g,b.numPointShadows=p,b.numSpotShadows=f,b.numSpotMaps=m,b.numLightProbes=v,n.version=pS++)},setupView:function(e,t){let i=0,a=0,l=0,h=0,c=0;const d=t.matrixWorldInverse;for(let u=0,g=e.length;u<g;u++){const t=e[u];if(t.isDirectionalLight){const e=n.directional[i];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),i++}else if(t.isSpotLight){const e=n.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=n.rectArea[h];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o.identity(),r.copy(t.matrixWorld),r.premultiply(d),o.extractRotation(r),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),h++}else if(t.isPointLight){const e=n.point[a];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),a++}else if(t.isHemisphereLight){const e=n.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),c++}}},state:n}}function _S(e){const t=new mS(e),i=[],n=[];const s={lightsArray:i,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){s.camera=e,i.length=0,n.length=0},state:s,setupLights:function(){t.setup(i)},setupLightsView:function(e){t.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){n.push(e)}}}function vS(e){let t=new WeakMap;return{get:function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=t.get(i);let r;return void 0===s?(r=new _S(e),t.set(i,[r])):n>=s.length?(r=new _S(e),s.push(r)):r=s[n],r},dispose:function(){t=new WeakMap}}}function bS(e,t,i){let n=new Df;const s=new kd,r=new kd,o=new qd,a=new iv({depthPacking:yc}),l=new nv,h={},c=i.maxTextureSize,d={[Wa]:Ha,[Ha]:Wa,[Ua]:Ua},u=new vp({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new kd},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=u.clone();g.defines.HORIZONTAL_PASS=1;const p=new Jg;p.setAttribute("position",new Og(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new dp(p,u),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ba;let _=this.type;function v(i,n){const r=t.update(f);u.defines.VSM_SAMPLES!==i.blurSamples&&(u.defines.VSM_SAMPLES=i.blurSamples,g.defines.VSM_SAMPLES=i.blurSamples,u.needsUpdate=!0,g.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new Xd(s.x,s.y)),u.uniforms.shadow_pass.value=i.map.texture,u.uniforms.resolution.value=i.mapSize,u.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,r,u,f,null),g.uniforms.shadow_pass.value=i.mapPass.texture,g.uniforms.resolution.value=i.mapSize,g.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,r,g,f,null)}function b(t,i,n,s){let r=null;const o=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)r=o;else if(r=!0===n.isPointLight?l:a,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const e=r.uuid,t=i.uuid;let n=h[e];void 0===n&&(n={},h[e]=n);let s=n[t];void 0===s&&(s=r.clone(),n[t]=s,i.addEventListener("dispose",w)),r=s}if(r.visible=i.visible,r.wireframe=i.wireframe,r.side=s===Va?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:d[i.side],r.alphaMap=i.alphaMap,r.alphaTest=i.alphaTest,r.map=i.map,r.clipShadows=i.clipShadows,r.clippingPlanes=i.clippingPlanes,r.clipIntersection=i.clipIntersection,r.displacementMap=i.displacementMap,r.displacementScale=i.displacementScale,r.displacementBias=i.displacementBias,r.wireframeLinewidth=i.wireframeLinewidth,r.linewidth=i.linewidth,!0===n.isPointLight&&!0===r.isMeshDistanceMaterial){e.properties.get(r).light=n}return r}function y(i,s,r,o,a){if(!1===i.visible)return;if(i.layers.test(s.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&a===Va)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld);const n=t.update(i),l=i.material;if(Array.isArray(l)){const t=n.groups;for(let h=0,c=t.length;h<c;h++){const c=t[h],d=l[c.materialIndex];if(d&&d.visible){const t=b(i,d,o,a);i.onBeforeShadow(e,i,s,r,n,t,c),e.renderBufferDirect(r,null,n,t,i,c),i.onAfterShadow(e,i,s,r,n,t,c)}}}else if(l.visible){const t=b(i,l,o,a);i.onBeforeShadow(e,i,s,r,n,t,null),e.renderBufferDirect(r,null,n,t,i,null),i.onAfterShadow(e,i,s,r,n,t,null)}}const l=i.children;for(let e=0,t=l.length;e<t;e++)y(l[e],s,r,o,a)}function w(e){e.target.removeEventListener("dispose",w);for(const t in h){const i=h[t],n=e.target.uuid;if(n in i){i[n].dispose(),delete i[n]}}}this.render=function(t,i,a){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),u=e.state;u.setBlending(ja),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);const g=_!==Va&&this.type===Va,p=_===Va&&this.type!==Va;for(let f=0,m=t.length;f<m;f++){const l=t[f],h=l.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;s.copy(h.mapSize);const d=h.getFrameExtents();if(s.multiply(d),r.copy(h.mapSize),(s.x>c||s.y>c)&&(s.x>c&&(r.x=Math.floor(c/d.x),s.x=r.x*d.x,h.mapSize.x=r.x),s.y>c&&(r.y=Math.floor(c/d.y),s.y=r.y*d.y,h.mapSize.y=r.y)),null===h.map||!0===g||!0===p){const e=this.type!==Va?{minFilter:Kl,magFilter:Kl}:{};null!==h.map&&h.map.dispose(),h.map=new Xd(s.x,s.y,e),h.map.texture.name=l.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const m=h.getViewportCount();for(let e=0;e<m;e++){const t=h.getViewport(e);o.set(r.x*t.x,r.y*t.y,r.x*t.z,r.y*t.w),u.viewport(o),h.updateMatrices(l,e),n=h.getFrustum(),y(i,a,h.camera,l,this.type)}!0!==h.isPointLightShadow&&this.type===Va&&v(h,a),h.needsUpdate=!1}_=this.type,m.needsUpdate=!1,e.setRenderTarget(l,h,d)}}const yS={[ml]:_l,[vl]:Cl,[yl]:Sl,[bl]:wl,[_l]:ml,[Cl]:vl,[Sl]:yl,[wl]:bl};function wS(e,t){const i=new function(){let t=!1;const i=new qd;let n=null;const s=new qd(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,r,o,a){!0===a&&(t*=o,n*=o,r*=o),i.set(t,n,r,o),!1===s.equals(i)&&(e.clearColor(t,n,r,o),s.copy(i))},reset:function(){t=!1,n=null,s.set(-1,0,0,0)}}},n=new function(){let i=!1,n=!1,s=null,r=null,o=null;return{setReversed:function(e){if(n!==e){const e=t.get("EXT_clip_control");n?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);const i=o;o=null,this.setClear(i)}n=e},getReversed:function(){return n},setTest:function(t){t?V(e.DEPTH_TEST):W(e.DEPTH_TEST)},setMask:function(t){s===t||i||(e.depthMask(t),s=t)},setFunc:function(t){if(n&&(t=yS[t]),r!==t){switch(t){case ml:e.depthFunc(e.NEVER);break;case _l:e.depthFunc(e.ALWAYS);break;case vl:e.depthFunc(e.LESS);break;case bl:e.depthFunc(e.LEQUAL);break;case yl:e.depthFunc(e.EQUAL);break;case wl:e.depthFunc(e.GEQUAL);break;case Cl:e.depthFunc(e.GREATER);break;case Sl:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){i=e},setClear:function(t){o!==t&&(n&&(t=1-t),e.clearDepth(t),o=t)},reset:function(){i=!1,s=null,r=null,o=null,n=!1}}},s=new function(){let t=!1,i=null,n=null,s=null,r=null,o=null,a=null,l=null,h=null;return{setTest:function(i){t||(i?V(e.STENCIL_TEST):W(e.STENCIL_TEST))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,o){n===t&&s===i&&r===o||(e.stencilFunc(t,i,o),n=t,s=i,r=o)},setOp:function(t,i,n){o===t&&a===i&&l===n||(e.stencilOp(t,i,n),o=t,a=i,l=n)},setLocked:function(e){t=e},setClear:function(t){h!==t&&(e.clearStencil(t),h=t)},reset:function(){t=!1,i=null,n=null,s=null,r=null,o=null,a=null,l=null,h=null}}},r=new WeakMap,o=new WeakMap;let a={},l={},h=new WeakMap,c=[],d=null,u=!1,g=null,p=null,f=null,m=null,_=null,v=null,b=null,y=new xg(0,0,0),w=0,C=!1,S=null,x=null,k=null,L=null,E=null;const M=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let T=!1,D=0;const N=e.getParameter(e.VERSION);-1!==N.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(N)[1]),T=D>=1):-1!==N.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),T=D>=2);let I=null,A={};const R=e.getParameter(e.SCISSOR_BOX),P=e.getParameter(e.VIEWPORT),O=(new qd).fromArray(R),F=(new qd).fromArray(P);function B(t,i,n,s){const r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let a=0;a<n;a++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(i,0,e.RGBA,1,1,s,0,e.RGBA,e.UNSIGNED_BYTE,r):e.texImage2D(i+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}const z={};function V(t){!0!==a[t]&&(e.enable(t),a[t]=!0)}function W(t){!1!==a[t]&&(e.disable(t),a[t]=!1)}z[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=B(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=B(e.TEXTURE_3D,e.TEXTURE_3D,1,1),i.setClear(0,0,0,1),n.setClear(1),s.setClear(0),V(e.DEPTH_TEST),n.setFunc(bl),G(!1),K(Ra),V(e.CULL_FACE),j(ja);const H={[Xa]:e.FUNC_ADD,[Ya]:e.FUNC_SUBTRACT,[Za]:e.FUNC_REVERSE_SUBTRACT};H[Ja]=e.MIN,H[el]=e.MAX;const U={[tl]:e.ZERO,[il]:e.ONE,[nl]:e.SRC_COLOR,[rl]:e.SRC_ALPHA,[dl]:e.SRC_ALPHA_SATURATE,[hl]:e.DST_COLOR,[al]:e.DST_ALPHA,[sl]:e.ONE_MINUS_SRC_COLOR,[ol]:e.ONE_MINUS_SRC_ALPHA,[cl]:e.ONE_MINUS_DST_COLOR,[ll]:e.ONE_MINUS_DST_ALPHA,[ul]:e.CONSTANT_COLOR,[gl]:e.ONE_MINUS_CONSTANT_COLOR,[pl]:e.CONSTANT_ALPHA,[fl]:e.ONE_MINUS_CONSTANT_ALPHA};function j(t,i,n,s,r,o,a,l,h,c){if(t!==ja){if(!1===u&&(V(e.BLEND),u=!0),t===Qa)r=r||i,o=o||n,a=a||s,i===p&&r===_||(e.blendEquationSeparate(H[i],H[r]),p=i,_=r),n===f&&s===m&&o===v&&a===b||(e.blendFuncSeparate(U[n],U[s],U[o],U[a]),f=n,m=s,v=o,b=a),!1!==l.equals(y)&&h===w||(e.blendColor(l.r,l.g,l.b,h),y.copy(l),w=h),g=t,C=!1;else if(t!==g||c!==C){if(p===Xa&&_===Xa||(e.blendEquation(e.FUNC_ADD),p=Xa,_=Xa),c)switch(t){case Ga:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Ka:e.blendFunc(e.ONE,e.ONE);break;case $a:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case qa:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Ga:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Ka:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case $a:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case qa:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,v=null,b=null,y.set(0,0,0),w=0,g=t,C=c}}else!0===u&&(W(e.BLEND),u=!1)}function G(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function K(t){t!==Aa?(V(e.CULL_FACE),t!==x&&(t===Ra?e.cullFace(e.BACK):t===Pa?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):W(e.CULL_FACE),x=t}function $(t,i,n){t?(V(e.POLYGON_OFFSET_FILL),L===i&&E===n||(e.polygonOffset(i,n),L=i,E=n)):W(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:n,stencil:s},enable:V,disable:W,bindFramebuffer:function(t,i){return l[t]!==i&&(e.bindFramebuffer(t,i),l[t]=i,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=i),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=i),!0)},drawBuffers:function(t,i){let n=c,s=!1;if(t){n=h.get(i),void 0===n&&(n=[],h.set(i,n));const r=t.textures;if(n.length!==r.length||n[0]!==e.COLOR_ATTACHMENT0){for(let t=0,i=r.length;t<i;t++)n[t]=e.COLOR_ATTACHMENT0+t;n.length=r.length,s=!0}}else n[0]!==e.BACK&&(n[0]=e.BACK,s=!0);s&&e.drawBuffers(n)},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:j,setMaterial:function(t,r){t.side===Ua?W(e.CULL_FACE):V(e.CULL_FACE);let o=t.side===Ha;r&&(o=!o),G(o),t.blending===Ga&&!1===t.transparent?j(ja):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),n.setFunc(t.depthFunc),n.setTest(t.depthTest),n.setMask(t.depthWrite),i.setMask(t.colorWrite);const a=t.stencilWrite;s.setTest(a),a&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?V(e.SAMPLE_ALPHA_TO_COVERAGE):W(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:K,setLineWidth:function(t){t!==k&&(T&&e.lineWidth(t),k=t)},setPolygonOffset:$,setScissorTest:function(t){t?V(e.SCISSOR_TEST):W(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+M-1),I!==t&&(e.activeTexture(t),I=t)},bindTexture:function(t,i,n){void 0===n&&(n=null===I?e.TEXTURE0+M-1:I);let s=A[n];void 0===s&&(s={type:void 0,texture:void 0},A[n]=s),s.type===t&&s.texture===i||(I!==n&&(e.activeTexture(n),I=n),e.bindTexture(t,i||z[t]),s.type=t,s.texture=i)},unbindTexture:function(){const t=A[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,i){let n=o.get(i);void 0===n&&(n=new WeakMap,o.set(i,n));let s=n.get(t);void 0===s&&(s=e.getUniformBlockIndex(i,t.name),n.set(t,s))},uniformBlockBinding:function(t,i){const n=o.get(i).get(t);r.get(i)!==n&&(e.uniformBlockBinding(i,n,t.__bindingPointIndex),r.set(i,n))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),n.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),a={},I=null,A={},l={},h=new WeakMap,c=[],d=null,u=!1,g=null,p=null,f=null,m=null,_=null,v=null,b=null,y=new xg(0,0,0),w=0,C=!1,S=null,x=null,k=null,L=null,E=null,O.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),i.reset(),n.reset(),s.reset()}}}function CS(e,t,i,n,s,r,o){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),h=new kd,c=new WeakMap;let d;const u=new WeakMap;let g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(H){}function p(e,t){return g?new OffscreenCanvas(e,t):Nd("canvas")}function f(e,t,i){let n=1;const s=W(e);if((s.width>i||s.height>i)&&(n=i/Math.max(s.width,s.height)),n<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const i=Math.floor(n*s.width),r=Math.floor(n*s.height);void 0===d&&(d=p(i,r));const o=t?p(i,r):d;o.width=i,o.height=r;return o.getContext("2d").drawImage(e,0,0,i,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+s.width+"x"+s.height+") to ("+i+"x"+r+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+s.width+"x"+s.height+")."),e}return e}function m(e){return e.generateMipmaps}function _(t){e.generateMipmap(t)}function v(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function b(i,n,s,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let a=n;if(n===e.RED&&(s===e.FLOAT&&(a=e.R32F),s===e.HALF_FLOAT&&(a=e.R16F),s===e.UNSIGNED_BYTE&&(a=e.R8)),n===e.RED_INTEGER&&(s===e.UNSIGNED_BYTE&&(a=e.R8UI),s===e.UNSIGNED_SHORT&&(a=e.R16UI),s===e.UNSIGNED_INT&&(a=e.R32UI),s===e.BYTE&&(a=e.R8I),s===e.SHORT&&(a=e.R16I),s===e.INT&&(a=e.R32I)),n===e.RG&&(s===e.FLOAT&&(a=e.RG32F),s===e.HALF_FLOAT&&(a=e.RG16F),s===e.UNSIGNED_BYTE&&(a=e.RG8)),n===e.RG_INTEGER&&(s===e.UNSIGNED_BYTE&&(a=e.RG8UI),s===e.UNSIGNED_SHORT&&(a=e.RG16UI),s===e.UNSIGNED_INT&&(a=e.RG32UI),s===e.BYTE&&(a=e.RG8I),s===e.SHORT&&(a=e.RG16I),s===e.INT&&(a=e.RG32I)),n===e.RGB_INTEGER&&(s===e.UNSIGNED_BYTE&&(a=e.RGB8UI),s===e.UNSIGNED_SHORT&&(a=e.RGB16UI),s===e.UNSIGNED_INT&&(a=e.RGB32UI),s===e.BYTE&&(a=e.RGB8I),s===e.SHORT&&(a=e.RGB16I),s===e.INT&&(a=e.RGB32I)),n===e.RGBA_INTEGER&&(s===e.UNSIGNED_BYTE&&(a=e.RGBA8UI),s===e.UNSIGNED_SHORT&&(a=e.RGBA16UI),s===e.UNSIGNED_INT&&(a=e.RGBA32UI),s===e.BYTE&&(a=e.RGBA8I),s===e.SHORT&&(a=e.RGBA16I),s===e.INT&&(a=e.RGBA32I)),n===e.RGB&&s===e.UNSIGNED_INT_5_9_9_9_REV&&(a=e.RGB9_E5),n===e.RGBA){const t=o?Mc:Bd.getTransfer(r);s===e.FLOAT&&(a=e.RGBA32F),s===e.HALF_FLOAT&&(a=e.RGBA16F),s===e.UNSIGNED_BYTE&&(a=t===Tc?e.SRGB8_ALPHA8:e.RGBA8),s===e.UNSIGNED_SHORT_4_4_4_4&&(a=e.RGBA4),s===e.UNSIGNED_SHORT_5_5_5_1&&(a=e.RGB5_A1)}return a!==e.R16F&&a!==e.R32F&&a!==e.RG16F&&a!==e.RG32F&&a!==e.RGBA16F&&a!==e.RGBA32F||t.get("EXT_color_buffer_float"),a}function y(t,i){let n;return t?null===i||i===ah||i===uh?n=e.DEPTH24_STENCIL8:i===lh?n=e.DEPTH32F_STENCIL8:i===rh&&(n=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===i||i===ah||i===uh?n=e.DEPTH_COMPONENT24:i===lh?n=e.DEPTH_COMPONENT32F:i===rh&&(n=e.DEPTH_COMPONENT16),n}function w(e,t){return!0===m(e)||e.isFramebufferTexture&&e.minFilter!==Kl&&e.minFilter!==Yl?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function C(e){const t=e.target;t.removeEventListener("dispose",C),function(e){const t=n.get(e);if(void 0===t.__webglInit)return;const i=e.source,s=u.get(i);if(s){const n=s[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&x(e),0===Object.keys(s).length&&u.delete(i)}n.remove(e)}(t),t.isVideoTexture&&c.delete(t)}function S(t){const i=t.target;i.removeEventListener("dispose",S),function(t){const i=n.get(t);t.depthTexture&&(t.depthTexture.dispose(),n.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let n=0;n<6;n++){if(Array.isArray(i.__webglFramebuffer[n]))for(let t=0;t<i.__webglFramebuffer[n].length;t++)e.deleteFramebuffer(i.__webglFramebuffer[n][t]);else e.deleteFramebuffer(i.__webglFramebuffer[n]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[n])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}const s=t.textures;for(let r=0,a=s.length;r<a;r++){const t=n.get(s[r]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),o.memory.textures--),n.remove(s[r])}n.remove(t)}(i)}function x(t){const i=n.get(t);e.deleteTexture(i.__webglTexture);const s=t.source;delete u.get(s)[i.__cacheKey],o.memory.textures--}let k=0;function L(t,s){const r=n.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;c.get(e)!==t&&(c.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&r.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void I(r,t,s);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(e.TEXTURE_2D,r.__webglTexture,e.TEXTURE0+s)}const E={[Ul]:e.REPEAT,[jl]:e.CLAMP_TO_EDGE,[Gl]:e.MIRRORED_REPEAT},M={[Kl]:e.NEAREST,[$l]:e.NEAREST_MIPMAP_NEAREST,[Ql]:e.NEAREST_MIPMAP_LINEAR,[Yl]:e.LINEAR,[Zl]:e.LINEAR_MIPMAP_NEAREST,[eh]:e.LINEAR_MIPMAP_LINEAR},T={[Kc]:e.NEVER,[Jc]:e.ALWAYS,[$c]:e.LESS,[Qc]:e.LEQUAL,[qc]:e.EQUAL,[Zc]:e.GEQUAL,[Xc]:e.GREATER,[Yc]:e.NOTEQUAL};function D(i,r){if(r.type!==lh||!1!==t.has("OES_texture_float_linear")||r.magFilter!==Yl&&r.magFilter!==Zl&&r.magFilter!==Ql&&r.magFilter!==eh&&r.minFilter!==Yl&&r.minFilter!==Zl&&r.minFilter!==Ql&&r.minFilter!==eh||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(i,e.TEXTURE_WRAP_S,E[r.wrapS]),e.texParameteri(i,e.TEXTURE_WRAP_T,E[r.wrapT]),i!==e.TEXTURE_3D&&i!==e.TEXTURE_2D_ARRAY||e.texParameteri(i,e.TEXTURE_WRAP_R,E[r.wrapR]),e.texParameteri(i,e.TEXTURE_MAG_FILTER,M[r.magFilter]),e.texParameteri(i,e.TEXTURE_MIN_FILTER,M[r.minFilter]),r.compareFunction&&(e.texParameteri(i,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(i,e.TEXTURE_COMPARE_FUNC,T[r.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(r.magFilter===Kl)return;if(r.minFilter!==Ql&&r.minFilter!==eh)return;if(r.type===lh&&!1===t.has("OES_texture_float_linear"))return;if(r.anisotropy>1||n.get(r).__currentAnisotropy){const o=t.get("EXT_texture_filter_anisotropic");e.texParameterf(i,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,s.getMaxAnisotropy())),n.get(r).__currentAnisotropy=r.anisotropy}}}function N(t,i){let n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",C));const s=i.source;let r=u.get(s);void 0===r&&(r={},u.set(s,r));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(i);if(a!==t.__cacheKey){void 0===r[a]&&(r[a]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,n=!0),r[a].usedTimes++;const s=r[t.__cacheKey];void 0!==s&&(r[t.__cacheKey].usedTimes--,0===s.usedTimes&&x(i)),t.__cacheKey=a,t.__webglTexture=r[a].texture}return n}function I(t,o,a){let l=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(l=e.TEXTURE_3D);const h=N(t,o),c=o.source;i.bindTexture(l,t.__webglTexture,e.TEXTURE0+a);const d=n.get(c);if(c.version!==d.__version||!0===h){i.activeTexture(e.TEXTURE0+a);const t=Bd.getPrimaries(Bd.workingColorSpace),n=o.colorSpace===kc?null:Bd.getPrimaries(o.colorSpace),u=o.colorSpace===kc||t===n?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,u);let g=f(o.image,!1,s.maxTextureSize);g=V(o,g);const p=r.convert(o.format,o.colorSpace),v=r.convert(o.type);let C,S=b(o.internalFormat,p,v,o.colorSpace,o.isVideoTexture);D(l,o);const x=o.mipmaps,k=!0!==o.isVideoTexture,L=void 0===d.__version||!0===h,E=c.dataReady,M=w(o,g);if(o.isDepthTexture)S=y(o.format===yh,o.type),L&&(k?i.texStorage2D(e.TEXTURE_2D,1,S,g.width,g.height):i.texImage2D(e.TEXTURE_2D,0,S,g.width,g.height,0,p,v,null));else if(o.isDataTexture)if(x.length>0){k&&L&&i.texStorage2D(e.TEXTURE_2D,M,S,x[0].width,x[0].height);for(let t=0,n=x.length;t<n;t++)C=x[t],k?E&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,p,v,C.data):i.texImage2D(e.TEXTURE_2D,t,S,C.width,C.height,0,p,v,C.data);o.generateMipmaps=!1}else k?(L&&i.texStorage2D(e.TEXTURE_2D,M,S,g.width,g.height),E&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,g.width,g.height,p,v,g.data)):i.texImage2D(e.TEXTURE_2D,0,S,g.width,g.height,0,p,v,g.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){k&&L&&i.texStorage3D(e.TEXTURE_2D_ARRAY,M,S,x[0].width,x[0].height,g.depth);for(let t=0,n=x.length;t<n;t++)if(C=x[t],o.format!==mh)if(null!==p)if(k){if(E)if(o.layerUpdates.size>0){const n=Ky(C.width,C.height,o.format,o.type);for(const s of o.layerUpdates){const r=C.data.subarray(s*n/C.data.BYTES_PER_ELEMENT,(s+1)*n/C.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,s,C.width,C.height,1,p,r)}o.clearLayerUpdates()}else i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,C.width,C.height,g.depth,p,C.data)}else i.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,S,C.width,C.height,g.depth,0,C.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else k?E&&i.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,C.width,C.height,g.depth,p,v,C.data):i.texImage3D(e.TEXTURE_2D_ARRAY,t,S,C.width,C.height,g.depth,0,p,v,C.data)}else{k&&L&&i.texStorage2D(e.TEXTURE_2D,M,S,x[0].width,x[0].height);for(let t=0,n=x.length;t<n;t++)C=x[t],o.format!==mh?null!==p?k?E&&i.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,p,C.data):i.compressedTexImage2D(e.TEXTURE_2D,t,S,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?E&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,p,v,C.data):i.texImage2D(e.TEXTURE_2D,t,S,C.width,C.height,0,p,v,C.data)}else if(o.isDataArrayTexture)if(k){if(L&&i.texStorage3D(e.TEXTURE_2D_ARRAY,M,S,g.width,g.height,g.depth),E)if(o.layerUpdates.size>0){const t=Ky(g.width,g.height,o.format,o.type);for(const n of o.layerUpdates){const s=g.data.subarray(n*t/g.data.BYTES_PER_ELEMENT,(n+1)*t/g.data.BYTES_PER_ELEMENT);i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,n,g.width,g.height,1,p,v,s)}o.clearLayerUpdates()}else i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,g.width,g.height,g.depth,p,v,g.data)}else i.texImage3D(e.TEXTURE_2D_ARRAY,0,S,g.width,g.height,g.depth,0,p,v,g.data);else if(o.isData3DTexture)k?(L&&i.texStorage3D(e.TEXTURE_3D,M,S,g.width,g.height,g.depth),E&&i.texSubImage3D(e.TEXTURE_3D,0,0,0,0,g.width,g.height,g.depth,p,v,g.data)):i.texImage3D(e.TEXTURE_3D,0,S,g.width,g.height,g.depth,0,p,v,g.data);else if(o.isFramebufferTexture){if(L)if(k)i.texStorage2D(e.TEXTURE_2D,M,S,g.width,g.height);else{let t=g.width,n=g.height;for(let s=0;s<M;s++)i.texImage2D(e.TEXTURE_2D,s,S,t,n,0,p,v,null),t>>=1,n>>=1}}else if(x.length>0){if(k&&L){const t=W(x[0]);i.texStorage2D(e.TEXTURE_2D,M,S,t.width,t.height)}for(let t=0,n=x.length;t<n;t++)C=x[t],k?E&&i.texSubImage2D(e.TEXTURE_2D,t,0,0,p,v,C):i.texImage2D(e.TEXTURE_2D,t,S,p,v,C);o.generateMipmaps=!1}else if(k){if(L){const t=W(g);i.texStorage2D(e.TEXTURE_2D,M,S,t.width,t.height)}E&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,p,v,g)}else i.texImage2D(e.TEXTURE_2D,0,S,p,v,g);m(o)&&_(l),d.__version=c.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function A(t,s,o,l,h,c){const d=r.convert(o.format,o.colorSpace),u=r.convert(o.type),g=b(o.internalFormat,d,u,o.colorSpace),p=n.get(s),f=n.get(o);if(f.__renderTarget=s,!p.__hasExternalTextures){const t=Math.max(1,s.width>>c),n=Math.max(1,s.height>>c);h===e.TEXTURE_3D||h===e.TEXTURE_2D_ARRAY?i.texImage3D(h,c,g,t,n,s.depth,0,d,u,null):i.texImage2D(h,c,g,t,n,0,d,u,null)}i.bindFramebuffer(e.FRAMEBUFFER,t),z(s)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,h,f.__webglTexture,0,B(s)):(h===e.TEXTURE_2D||h>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&h<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,h,f.__webglTexture,c),i.bindFramebuffer(e.FRAMEBUFFER,null)}function R(t,i,n){if(e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer){const s=i.depthTexture,r=s&&s.isDepthTexture?s.type:null,o=y(i.stencilBuffer,r),l=i.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,h=B(i);z(i)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,o,i.width,i.height):n?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,o,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,o,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=i.textures;for(let s=0;s<t.length;s++){const o=t[s],l=r.convert(o.format,o.colorSpace),h=r.convert(o.type),c=b(o.internalFormat,l,h,o.colorSpace),d=B(i);n&&!1===z(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,c,i.width,i.height):z(i)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,c,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,c,i.width,i.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function P(t){const s=n.get(t),r=!0===t.isWebGLCubeRenderTarget;if(s.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(s.__depthDisposeCallback&&s.__depthDisposeCallback(),e){const t=()=>{delete s.__boundDepthTexture,delete s.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),s.__depthDisposeCallback=t}s.__boundDepthTexture=e}if(t.depthTexture&&!s.__autoAllocateDepthBuffer){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,s){if(s&&s.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(e.FRAMEBUFFER,t),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const r=n.get(s.depthTexture);r.__renderTarget=s,r.__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),L(s.depthTexture,0);const o=r.__webglTexture,l=B(s);if(s.depthTexture.format===bh)z(s)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(s.depthTexture.format!==yh)throw new Error("Unknown depthTexture format");z(s)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(s.__webglFramebuffer,t)}else if(r){s.__webglDepthbuffer=[];for(let n=0;n<6;n++)if(i.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer[n]),void 0===s.__webglDepthbuffer[n])s.__webglDepthbuffer[n]=e.createRenderbuffer(),R(s.__webglDepthbuffer[n],t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=s.__webglDepthbuffer[n];e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,r)}}else if(i.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer),void 0===s.__webglDepthbuffer)s.__webglDepthbuffer=e.createRenderbuffer(),R(s.__webglDepthbuffer,t,!1);else{const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,n=s.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,n)}i.bindFramebuffer(e.FRAMEBUFFER,null)}const O=[],F=[];function B(e){return Math.min(s.maxSamples,e.samples)}function z(e){const i=n.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function V(e,t){const i=e.colorSpace,n=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||i!==Ec&&i!==kc&&(Bd.getTransfer(i)===Tc?n===mh&&s===ih||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),t}function W(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(h.width=e.naturalWidth||e.width,h.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(h.width=e.displayWidth,h.height=e.displayHeight):(h.width=e.width,h.height=e.height),h}this.allocateTextureUnit=function(){const e=k;return e>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+s.maxTextures),k+=1,e},this.resetTextureUnits=function(){k=0},this.setTexture2D=L,this.setTexture2DArray=function(t,s){const r=n.get(t);t.version>0&&r.__version!==t.version?I(r,t,s):i.bindTexture(e.TEXTURE_2D_ARRAY,r.__webglTexture,e.TEXTURE0+s)},this.setTexture3D=function(t,s){const r=n.get(t);t.version>0&&r.__version!==t.version?I(r,t,s):i.bindTexture(e.TEXTURE_3D,r.__webglTexture,e.TEXTURE0+s)},this.setTextureCube=function(t,o){const a=n.get(t);t.version>0&&a.__version!==t.version?function(t,o,a){if(6!==o.image.length)return;const l=N(t,o),h=o.source;i.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+a);const c=n.get(h);if(h.version!==c.__version||!0===l){i.activeTexture(e.TEXTURE0+a);const t=Bd.getPrimaries(Bd.workingColorSpace),n=o.colorSpace===kc?null:Bd.getPrimaries(o.colorSpace),d=o.colorSpace===kc||t===n?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const u=o.isCompressedTexture||o.image[0].isCompressedTexture,g=o.image[0]&&o.image[0].isDataTexture,p=[];for(let e=0;e<6;e++)p[e]=u||g?g?o.image[e].image:o.image[e]:f(o.image[e],!0,s.maxCubemapSize),p[e]=V(o,p[e]);const v=p[0],y=r.convert(o.format,o.colorSpace),C=r.convert(o.type),S=b(o.internalFormat,y,C,o.colorSpace),x=!0!==o.isVideoTexture,k=void 0===c.__version||!0===l,L=h.dataReady;let E,M=w(o,v);if(D(e.TEXTURE_CUBE_MAP,o),u){x&&k&&i.texStorage2D(e.TEXTURE_CUBE_MAP,M,S,v.width,v.height);for(let t=0;t<6;t++){E=p[t].mipmaps;for(let n=0;n<E.length;n++){const s=E[n];o.format!==mh?null!==y?x?L&&i.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,s.width,s.height,y,s.data):i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,S,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):x?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,s.width,s.height,y,C,s.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,S,s.width,s.height,0,y,C,s.data)}}}else{if(E=o.mipmaps,x&&k){E.length>0&&M++;const t=W(p[0]);i.texStorage2D(e.TEXTURE_CUBE_MAP,M,S,t.width,t.height)}for(let t=0;t<6;t++)if(g){x?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,p[t].width,p[t].height,y,C,p[t].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,p[t].width,p[t].height,0,y,C,p[t].data);for(let n=0;n<E.length;n++){const s=E[n].image[t].image;x?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,s.width,s.height,y,C,s.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,S,s.width,s.height,0,y,C,s.data)}}else{x?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,y,C,p[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,y,C,p[t]);for(let n=0;n<E.length;n++){const s=E[n];x?L&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,y,C,s.image[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,S,y,C,s.image[t])}}}m(o)&&_(e.TEXTURE_CUBE_MAP),c.__version=h.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(a,t,o):i.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,i,s){const r=n.get(t);void 0!==i&&A(r.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==s&&P(t)},this.setupRenderTarget=function(t){const s=t.texture,a=n.get(t),l=n.get(s);t.addEventListener("dispose",S);const h=t.textures,c=!0===t.isWebGLCubeRenderTarget,d=h.length>1;if(d||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,o.memory.textures++),c){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(s.mipmaps&&s.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let i=0;i<s.mipmaps.length;i++)a.__webglFramebuffer[t][i]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(s.mipmaps&&s.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<s.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,i=h.length;t<i;t++){const i=n.get(h[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===z(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],i.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let i=0;i<h.length;i++){const n=h[i];a.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[i]);const s=r.convert(n.format,n.colorSpace),o=r.convert(n.type),l=b(n.internalFormat,s,o,n.colorSpace,!0===t.isXRRenderTarget),c=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+i,e.RENDERBUFFER,a.__webglColorRenderbuffer[i])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),R(a.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){i.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),D(e.TEXTURE_CUBE_MAP,s);for(let i=0;i<6;i++)if(s.mipmaps&&s.mipmaps.length>0)for(let n=0;n<s.mipmaps.length;n++)A(a.__webglFramebuffer[i][n],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n);else A(a.__webglFramebuffer[i],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);m(s)&&_(e.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(d){for(let s=0,r=h.length;s<r;s++){const r=h[s],o=n.get(r);i.bindTexture(e.TEXTURE_2D,o.__webglTexture),D(e.TEXTURE_2D,r),A(a.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D,0),m(r)&&_(e.TEXTURE_2D)}i.unbindTexture()}else{let n=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(n=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),i.bindTexture(n,l.__webglTexture),D(n,s),s.mipmaps&&s.mipmaps.length>0)for(let i=0;i<s.mipmaps.length;i++)A(a.__webglFramebuffer[i],t,s,e.COLOR_ATTACHMENT0,n,i);else A(a.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0,n,0);m(s)&&_(n),i.unbindTexture()}t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let s=0,r=t.length;s<r;s++){const r=t[s];if(m(r)){const t=v(e),s=n.get(r).__webglTexture;i.bindTexture(t,s),_(t),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===z(t)){const s=t.textures,r=t.width,o=t.height;let a=e.COLOR_BUFFER_BIT;const h=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=n.get(t),d=s.length>1;if(d)for(let t=0;t<s.length;t++)i.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),i.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);i.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let i=0;i<s.length;i++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[i]);const t=n.get(s[i]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,r,o,0,0,r,o,a,e.NEAREST),!0===l&&(O.length=0,F.length=0,O.push(e.COLOR_ATTACHMENT0+i),t.depthBuffer&&!1===t.resolveDepthBuffer&&(O.push(h),F.push(h),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,F)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,O))}if(i.bindFramebuffer(e.READ_FRAMEBUFFER,null),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<s.length;t++){i.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);const r=n.get(s[t]).__webglTexture;i.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,r,0)}i.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[i])}},this.setupDepthRenderbuffer=P,this.setupFrameBufferTexture=A,this.useMultisampledRTT=z}function SS(e,t){return{convert:function(i){let n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kc;const r=Bd.getTransfer(s);if(i===ih)return e.UNSIGNED_BYTE;if(i===ch)return e.UNSIGNED_SHORT_4_4_4_4;if(i===dh)return e.UNSIGNED_SHORT_5_5_5_1;if(i===gh)return e.UNSIGNED_INT_5_9_9_9_REV;if(i===nh)return e.BYTE;if(i===sh)return e.SHORT;if(i===rh)return e.UNSIGNED_SHORT;if(i===oh)return e.INT;if(i===ah)return e.UNSIGNED_INT;if(i===lh)return e.FLOAT;if(i===hh)return e.HALF_FLOAT;if(i===ph)return e.ALPHA;if(i===fh)return e.RGB;if(i===mh)return e.RGBA;if(i===_h)return e.LUMINANCE;if(i===vh)return e.LUMINANCE_ALPHA;if(i===bh)return e.DEPTH_COMPONENT;if(i===yh)return e.DEPTH_STENCIL;if(i===wh)return e.RED;if(i===Ch)return e.RED_INTEGER;if(i===Sh)return e.RG;if(i===xh)return e.RG_INTEGER;if(i===Lh)return e.RGBA_INTEGER;if(i===Eh||i===Mh||i===Th||i===Dh)if(r===Tc){if(n=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===n)return null;if(i===Eh)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Mh)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Th)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Dh)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(i===Eh)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Mh)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Th)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Dh)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===Nh||i===Ih||i===Ah||i===Rh){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(i===Nh)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ih)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ah)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Rh)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===Ph||i===Oh||i===Fh){if(n=t.get("WEBGL_compressed_texture_etc"),null===n)return null;if(i===Ph||i===Oh)return r===Tc?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(i===Fh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(i===Bh||i===zh||i===Vh||i===Wh||i===Hh||i===Uh||i===jh||i===Gh||i===Kh||i===$h||i===qh||i===Qh||i===Xh||i===Yh){if(n=t.get("WEBGL_compressed_texture_astc"),null===n)return null;if(i===Bh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===zh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Vh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Wh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Hh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Uh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===jh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Gh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Kh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===$h)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===qh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Qh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Xh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Yh)return r===Tc?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===Zh||i===Jh||i===ec){if(n=t.get("EXT_texture_compression_bptc"),null===n)return null;if(i===Zh)return r===Tc?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Jh)return n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===ec)return n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===tc||i===ic||i===nc||i===sc){if(n=t.get("EXT_texture_compression_rgtc"),null===n)return null;if(i===Zh)return n.COMPRESSED_RED_RGTC1_EXT;if(i===ic)return n.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===nc)return n.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===sc)return n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===uh?e.UNSIGNED_INT_24_8:void 0!==e[i]?e[i]:null}}}const xS={type:"move"};class kS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new mm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new mm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new iu,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new iu),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new mm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new iu,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new iu),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,s=null,r=null;const o=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){r=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,i),n=this._getHandJoint(l,r);null!==e&&(n.matrix.fromArray(e.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,n.jointRadius=e.radius),n.visible=null!==e}const n=l.joints["index-finger-tip"],s=l.joints["thumb-tip"],o=n.position.distanceTo(s.position),a=.02,h=.005;l.inputState.pinching&&o>a+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=a-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(n=t.getPose(e.targetRaySpace,i),null===n&&null!==s&&(n=s),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(xS)))}return null!==o&&(o.visible=null!==n),null!==a&&(a.visible=null!==s),null!==l&&(l.visible=null!==r),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new mm;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class LS{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const n=new $d;e.properties.get(n).__webglTexture=t.texture,t.depthNear===i.depthNear&&t.depthFar===i.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new vp({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new dp(new F_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ES extends gd{constructor(e,t){super();const i=this;let n=null,s=1,r=null,o="local-floor",a=1,l=null,h=null,c=null,d=null,u=null,g=null;const p=new LS,f=t.getContextAttributes();let m=null,_=null;const v=[],b=[],y=new kd;let w=null;const C=new Sp;C.viewport=new qd;const S=new Sp;S.viewport=new qd;const x=[C,S],k=new wb;let L=null,E=null;function M(e){const t=b.indexOf(e.inputSource);if(-1===t)return;const i=v[t];void 0!==i&&(i.update(e.inputSource,e.frame,l||r),i.dispatchEvent({type:e.type,data:e.inputSource}))}function T(){n.removeEventListener("select",M),n.removeEventListener("selectstart",M),n.removeEventListener("selectend",M),n.removeEventListener("squeeze",M),n.removeEventListener("squeezestart",M),n.removeEventListener("squeezeend",M),n.removeEventListener("end",T),n.removeEventListener("inputsourceschange",D);for(let e=0;e<v.length;e++){const t=b[e];null!==t&&(b[e]=null,v[e].disconnect(t))}L=null,E=null,p.reset(),e.setRenderTarget(m),u=null,d=null,c=null,n=null,_=null,P.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(y.width,y.height,!1),i.dispatchEvent({type:"sessionend"})}function D(e){for(let t=0;t<e.removed.length;t++){const i=e.removed[t],n=b.indexOf(i);n>=0&&(b[n]=null,v[n].disconnect(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t];let n=b.indexOf(i);if(-1===n){for(let e=0;e<v.length;e++){if(e>=b.length){b.push(i),n=e;break}if(null===b[e]){b[e]=i,n=e;break}}if(-1===n)break}const s=v[n];s&&s.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new kS,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new kS,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new kS,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||r},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:u},this.getBinding=function(){return c},this.getFrame=function(){return g},this.getSession=function(){return n},this.setSession=async function(h){if(n=h,null!==n){m=e.getRenderTarget(),n.addEventListener("select",M),n.addEventListener("selectstart",M),n.addEventListener("selectend",M),n.addEventListener("squeeze",M),n.addEventListener("squeezestart",M),n.addEventListener("squeezeend",M),n.addEventListener("end",T),n.addEventListener("inputsourceschange",D),!0!==f.xrCompatible&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(y);if(void 0!==n.enabledFeatures&&n.enabledFeatures.includes("layers")){let i=null,r=null,o=null;f.depth&&(o=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,i=f.stencil?yh:bh,r=f.stencil?uh:ah);const a={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:s};c=new XRWebGLBinding(n,t),d=c.createProjectionLayer(a),n.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),_=new Xd(d.textureWidth,d.textureHeight,{format:mh,type:ih,depthTexture:new Sm(d.textureWidth,d.textureHeight,r,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0,resolveDepthBuffer:!1===d.ignoreDepthValues})}else{const i={antialias:f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:s};u=new XRWebGLLayer(n,t,i),n.updateRenderState({baseLayer:u}),e.setPixelRatio(1),e.setSize(u.framebufferWidth,u.framebufferHeight,!1),_=new Xd(u.framebufferWidth,u.framebufferHeight,{format:mh,type:ih,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}_.isXRRenderTarget=!0,this.setFoveation(a),l=null,r=await n.requestReferenceSpace(o),P.setContext(n),P.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==n)return n.environmentBlendMode},this.getDepthTexture=function(){return p.getDepthTexture()};const N=new iu,I=new iu;function A(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===n)return;let t=e.near,i=e.far;null!==p.texture&&(p.depthNear>0&&(t=p.depthNear),p.depthFar>0&&(i=p.depthFar)),k.near=S.near=C.near=t,k.far=S.far=C.far=i,L===k.near&&E===k.far||(n.updateRenderState({depthNear:k.near,depthFar:k.far}),L=k.near,E=k.far),C.layers.mask=2|e.layers.mask,S.layers.mask=4|e.layers.mask,k.layers.mask=C.layers.mask|S.layers.mask;const s=e.parent,r=k.cameras;A(k,s);for(let n=0;n<r.length;n++)A(r[n],s);2===r.length?function(e,t,i){N.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(i.matrixWorld);const n=N.distanceTo(I),s=t.projectionMatrix.elements,r=i.projectionMatrix.elements,o=s[14]/(s[10]-1),a=s[14]/(s[10]+1),l=(s[9]+1)/s[5],h=(s[9]-1)/s[5],c=(s[8]-1)/s[0],d=(r[8]+1)/r[0],u=o*c,g=o*d,p=n/(-c+d),f=p*-c;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===s[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=o+p,i=a+p,s=u-f,r=g+(n-f),c=l*a/i*t,d=h*a/i*t;e.projectionMatrix.makePerspective(s,r,c,d,t,i),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(k,C,S):k.projectionMatrix.copy(C.projectionMatrix),function(e,t,i){null===i?e.matrix.copy(t.matrixWorld):(e.matrix.copy(i.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*_d*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,k,s)},this.getCamera=function(){return k},this.getFoveation=function(){if(null!==d||null!==u)return a},this.setFoveation=function(e){a=e,null!==d&&(d.fixedFoveation=e),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==p.texture},this.getDepthSensingMesh=function(){return p.getMesh(k)};let R=null;const P=new qy;P.setAnimationLoop((function(t,s){if(h=s.getViewerPose(l||r),g=s,null!==h){const t=h.views;null!==u&&(e.setRenderTargetFramebuffer(_,u.framebuffer),e.setRenderTarget(_));let i=!1;t.length!==k.cameras.length&&(k.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const s=t[n];let r=null;if(null!==u)r=u.getViewport(s);else{const t=c.getViewSubImage(d,s);r=t.viewport,0===n&&(e.setRenderTargetTextures(_,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(_))}let o=x[n];void 0===o&&(o=new Sp,o.layers.enable(n),o.viewport=new qd,x[n]=o),o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(s.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(r.x,r.y,r.width,r.height),0===n&&(k.matrix.copy(o.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),!0===i&&k.cameras.push(o)}const s=n.enabledFeatures;if(s&&s.includes("depth-sensing")){const i=c.getDepthInformation(t[0]);i&&i.isValid&&i.texture&&p.init(e,i,n.renderState)}}for(let e=0;e<v.length;e++){const t=b[e],i=v[e];null!==t&&void 0!==i&&i.update(t,s,l||r)}R&&R(t,s),s.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:s}),g=null})),this.setAnimationLoop=function(e){R=e},this.dispose=function(){}}}const MS=new Hu,TS=new Iu;function DS(e,t){function i(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function n(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map,i(n.map,e.mapTransform)),n.alphaMap&&(e.alphaMap.value=n.alphaMap,i(n.alphaMap,e.alphaMapTransform)),n.bumpMap&&(e.bumpMap.value=n.bumpMap,i(n.bumpMap,e.bumpMapTransform),e.bumpScale.value=n.bumpScale,n.side===Ha&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,i(n.normalMap,e.normalMapTransform),e.normalScale.value.copy(n.normalScale),n.side===Ha&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,i(n.displacementMap,e.displacementMapTransform),e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap,i(n.emissiveMap,e.emissiveMapTransform)),n.specularMap&&(e.specularMap.value=n.specularMap,i(n.specularMap,e.specularMapTransform)),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const s=t.get(n),r=s.envMap,o=s.envMapRotation;r&&(e.envMap.value=r,MS.copy(o),MS.x*=-1,MS.y*=-1,MS.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(MS.y*=-1,MS.z*=-1),e.envMapRotation.value.setFromMatrix4(TS.makeRotationFromEuler(MS)),e.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity,i(n.lightMap,e.lightMapTransform)),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity,i(n.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,mp(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,s,r,o,a){s.isMeshBasicMaterial||s.isMeshLambertMaterial?n(e,s):s.isMeshToonMaterial?(n(e,s),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,s)):s.isMeshPhongMaterial?(n(e,s),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,s)):s.isMeshStandardMaterial?(n(e,s),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,i(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,i(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,s),s.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,i(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,i(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,i(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,i(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,i(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Ha&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,i(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,i(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,i(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,i(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,i(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,i(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,i(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,s,a)):s.isMeshMatcapMaterial?(n(e,s),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,s)):s.isMeshDepthMaterial?n(e,s):s.isMeshDistanceMaterial?(n(e,s),function(e,i){const n=t.get(i).light;e.referencePosition.value.setFromMatrixPosition(n.matrixWorld),e.nearDistance.value=n.shadow.camera.near,e.farDistance.value=n.shadow.camera.far}(e,s)):s.isMeshNormalMaterial?n(e,s):s.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform))}(e,s),s.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,s)):s.isPointsMaterial?function(e,t,n,s){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*s,t.map&&(e.map.value=t.map,i(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,i(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,s,r,o):s.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,i(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,s):s.isShadowMaterial?(e.color.value.copy(s.color),e.opacity.value=s.opacity):s.isShaderMaterial&&(s.uniformsNeedUpdate=!1)}}}function NS(e,t,i,n){let s={},r={},o=[];const a=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,i,n){const s=e.value,r=t+"_"+i;if(void 0===n[r])return n[r]="number"===typeof s||"boolean"===typeof s?s:s.clone(),!0;{const e=n[r];if("number"===typeof s||"boolean"===typeof s){if(e!==s)return n[r]=s,!0}else if(!1===e.equals(s))return e.copy(s),!0}return!1}function h(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){const i=t.target;i.removeEventListener("dispose",c);const n=o.indexOf(i.__bindingPointIndex);o.splice(n,1),e.deleteBuffer(s[i.id]),delete s[i.id],delete r[i.id]}return{bind:function(e,t){const i=t.program;n.uniformBlockBinding(e,i)},update:function(i,d){let u=s[i.id];void 0===u&&(!function(e){const t=e.uniforms;let i=0;const n=16;for(let r=0,o=t.length;r<o;r++){const e=Array.isArray(t[r])?t[r]:[t[r]];for(let t=0,s=e.length;t<s;t++){const s=e[t],r=Array.isArray(s.value)?s.value:[s.value];for(let e=0,t=r.length;e<t;e++){const t=h(r[e]),o=i%n,a=o%t.boundary,l=o+a;i+=a,0!==l&&n-l<t.storage&&(i+=n-l),s.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=i,i+=t.storage}}}const s=i%n;s>0&&(i+=n-s);e.__size=i,e.__cache={}}(i),u=function(t){const i=function(){for(let e=0;e<a;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=i;const n=e.createBuffer(),s=t.__size,r=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,n),e.bufferData(e.UNIFORM_BUFFER,s,r),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,i,n),n}(i),s[i.id]=u,i.addEventListener("dispose",c));const g=d.program;n.updateUBOMapping(i,g);const p=t.render.frame;r[i.id]!==p&&(!function(t){const i=s[t.id],n=t.uniforms,r=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,i);for(let s=0,o=n.length;s<o;s++){const t=Array.isArray(n[s])?n[s]:[n[s]];for(let i=0,n=t.length;i<n;i++){const n=t[i];if(!0===l(n,s,i,r)){const t=n.__offset,i=Array.isArray(n.value)?n.value:[n.value];let s=0;for(let r=0;r<i.length;r++){const o=i[r],a=h(o);"number"===typeof o||"boolean"===typeof o?(n.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+s,n.__data)):o.isMatrix3?(n.__data[0]=o.elements[0],n.__data[1]=o.elements[1],n.__data[2]=o.elements[2],n.__data[3]=0,n.__data[4]=o.elements[3],n.__data[5]=o.elements[4],n.__data[6]=o.elements[5],n.__data[7]=0,n.__data[8]=o.elements[6],n.__data[9]=o.elements[7],n.__data[10]=o.elements[8],n.__data[11]=0):(o.toArray(n.__data,s),s+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(i),r[i.id]=p)},dispose:function(){for(const t in s)e.deleteBuffer(s[t]);o=[],s={},r={}}}}class IS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=Id(),context:i=null,depth:n=!0,stencil:s=!1,alpha:r=!1,antialias:o=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:l=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:c=!1,reverseDepthBuffer:d=!1}=e;let u;if(this.isWebGLRenderer=!0,null!==i){if("undefined"!==typeof WebGLRenderingContext&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");u=i.getContextAttributes().alpha}else u=r;const g=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const _=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Lc,this.toneMapping=El,this.toneMappingExposure=1;const b=this;let y=!1,w=0,C=0,S=null,x=-1,k=null;const L=new qd,E=new qd;let M=null;const T=new xg(0);let D=0,N=t.width,I=t.height,A=1,R=null,P=null;const O=new qd(0,0,N,I),F=new qd(0,0,N,I);let B=!1;const z=new Df;let V=!1,W=!1;this.transmissionResolutionScale=1;const H=new Iu,U=new Iu,j=new iu,G=new qd,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let $=!1;function q(){return null===S?A:1}let Q,X,Y,Z,J,ee,te,ie,ne,se,re,oe,ae,le,he,ce,de,ue,ge,pe,fe,me,_e,ve,be=i;function ye(e,i){return t.getContext(e,i)}try{const e={alpha:!0,depth:n,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:h,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Da}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",xe,!1),t.addEventListener("webglcontextcreationerror",ke,!1),null===be){const t="webgl2";if(be=ye(t,e),null===be)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ue){throw console.error("THREE.WebGLRenderer: "+Ue.message),Ue}function we(){Q=new Lw(be),Q.init(),me=new SS(be,Q),X=new rw(be,Q,e,me),Y=new wS(be,Q),X.reverseDepthBuffer&&d&&Y.buffers.depth.setReversed(!0),Z=new Tw(be),J=new lS,ee=new CS(be,Q,Y,J,X,me,Z),te=new aw(b),ie=new kw(b),ne=new Qy(be),_e=new nw(be,ne),se=new Ew(be,ne,Z,_e),re=new Nw(be,se,ne,Z),ge=new Dw(be,X,ee),ce=new ow(J),oe=new aS(b,te,ie,Q,X,_e,ce),ae=new DS(b,J),le=new uS,he=new vS(Q),ue=new iw(b,te,ie,Y,re,u,a),de=new bS(b,re,X),ve=new NS(be,Z,X,Y),pe=new sw(be,Q,Z),fe=new Mw(be,Q,Z),Z.programs=oe.programs,b.capabilities=X,b.extensions=Q,b.properties=J,b.renderLists=le,b.shadowMap=de,b.state=Y,b.info=Z}we();const Ce=new ES(b,be);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const e=Z.autoReset,t=de.enabled,i=de.autoUpdate,n=de.needsUpdate,s=de.type;we(),Z.autoReset=e,de.enabled=t,de.autoUpdate=i,de.needsUpdate=n,de.type=s}function ke(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Le(e){const t=e.target;t.removeEventListener("dispose",Le),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach((function(e){oe.releaseProgram(e)})),e.isShaderMaterial&&oe.releaseShaderCache(e))})(e),J.remove(e)}(t)}function Ee(e,t,i){!0===e.transparent&&e.side===Ua&&!1===e.forceSinglePass?(e.side=Ha,e.needsUpdate=!0,Fe(e,t,i),e.side=Wa,e.needsUpdate=!0,Fe(e,t,i),e.side=Ua):Fe(e,t,i)}this.xr=Ce,this.getContext=function(){return be},this.getContextAttributes=function(){return be.getContextAttributes()},this.forceContextLoss=function(){const e=Q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(e){void 0!==e&&(A=e,this.setSize(N,I,!1))},this.getSize=function(e){return e.set(N,I)},this.setSize=function(e,i){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ce.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=e,I=i,t.width=Math.floor(e*A),t.height=Math.floor(i*A),!0===n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return e.set(N*A,I*A).floor()},this.setDrawingBufferSize=function(e,i,n){N=e,I=i,A=n,t.width=Math.floor(e*n),t.height=Math.floor(i*n),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return e.copy(L)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,i,n){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,i,n),Y.viewport(L.copy(O).multiplyScalar(A).round())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,i,n){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,i,n),Y.scissor(E.copy(F).multiplyScalar(A).round())},this.getScissorTest=function(){return B},this.setScissorTest=function(e){Y.setScissorTest(B=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==S){const t=S.texture.format;e=t===Lh||t===xh||t===Ch}if(e){const e=S.texture.type,t=e===ih||e===ah||e===rh||e===uh||e===ch||e===dh,i=ue.getClearColor(),n=ue.getClearAlpha(),s=i.r,r=i.g,o=i.b;t?(g[0]=s,g[1]=r,g[2]=o,g[3]=n,be.clearBufferuiv(be.COLOR,0,g)):(p[0]=s,p[1]=r,p[2]=o,p[3]=n,be.clearBufferiv(be.COLOR,0,p))}else i|=be.COLOR_BUFFER_BIT}e&&(i|=be.DEPTH_BUFFER_BIT),t&&(i|=be.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),be.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",xe,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),ue.dispose(),le.dispose(),he.dispose(),J.dispose(),te.dispose(),ie.dispose(),re.dispose(),_e.dispose(),ve.dispose(),oe.dispose(),Ce.dispose(),Ce.removeEventListener("sessionstart",Te),Ce.removeEventListener("sessionend",De),Ne.stop()},this.renderBufferDirect=function(e,t,i,n,s,r){null===t&&(t=K);const o=s.isMesh&&s.matrixWorld.determinant()<0,a=function(e,t,i,n,s){!0!==t.isScene&&(t=K);ee.resetTextureUnits();const r=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===S?b.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:Ec,l=(n.isMeshStandardMaterial?ie:te).get(n.envMap||o),h=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,c=!!i.attributes.tangent&&(!!n.normalMap||n.anisotropy>0),d=!!i.morphAttributes.position,u=!!i.morphAttributes.normal,g=!!i.morphAttributes.color;let p=El;n.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(p=b.toneMapping));const f=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,_=void 0!==f?f.length:0,v=J.get(n),y=m.state.lights;if(!0===V&&(!0===W||e!==k)){const t=e===k&&n.id===x;ce.setState(n,e,t)}let w=!1;n.version===v.__version?v.needsLights&&v.lightsStateVersion!==y.state.version||v.outputColorSpace!==a||s.isBatchedMesh&&!1===v.batching?w=!0:s.isBatchedMesh||!0!==v.batching?s.isBatchedMesh&&!0===v.batchingColor&&null===s.colorTexture||s.isBatchedMesh&&!1===v.batchingColor&&null!==s.colorTexture||s.isInstancedMesh&&!1===v.instancing?w=!0:s.isInstancedMesh||!0!==v.instancing?s.isSkinnedMesh&&!1===v.skinning?w=!0:s.isSkinnedMesh||!0!==v.skinning?s.isInstancedMesh&&!0===v.instancingColor&&null===s.instanceColor||s.isInstancedMesh&&!1===v.instancingColor&&null!==s.instanceColor||s.isInstancedMesh&&!0===v.instancingMorph&&null===s.morphTexture||s.isInstancedMesh&&!1===v.instancingMorph&&null!==s.morphTexture||v.envMap!==l||!0===n.fog&&v.fog!==r?w=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ce.numPlanes&&v.numIntersection===ce.numIntersection?(v.vertexAlphas!==h||v.vertexTangents!==c||v.morphTargets!==d||v.morphNormals!==u||v.morphColors!==g||v.toneMapping!==p||v.morphTargetsCount!==_)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,v.__version=n.version);let C=v.currentProgram;!0===w&&(C=Fe(n,t,s));let L=!1,E=!1,M=!1;const T=C.getUniforms(),D=v.uniforms;Y.useProgram(C.program)&&(L=!0,E=!0,M=!0);n.id!==x&&(x=n.id,E=!0);if(L||k!==e){Y.buffers.depth.getReversed()?(H.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(H),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(H),T.setValue(be,"projectionMatrix",H)):T.setValue(be,"projectionMatrix",e.projectionMatrix),T.setValue(be,"viewMatrix",e.matrixWorldInverse);const t=T.map.cameraPosition;void 0!==t&&t.setValue(be,j.setFromMatrixPosition(e.matrixWorld)),X.logarithmicDepthBuffer&&T.setValue(be,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&T.setValue(be,"isOrthographic",!0===e.isOrthographicCamera),k!==e&&(k=e,E=!0,M=!0)}if(s.isSkinnedMesh){T.setOptional(be,s,"bindMatrix"),T.setOptional(be,s,"bindMatrixInverse");const e=s.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),T.setValue(be,"boneTexture",e.boneTexture,ee))}s.isBatchedMesh&&(T.setOptional(be,s,"batchingTexture"),T.setValue(be,"batchingTexture",s._matricesTexture,ee),T.setOptional(be,s,"batchingIdTexture"),T.setValue(be,"batchingIdTexture",s._indirectTexture,ee),T.setOptional(be,s,"batchingColorTexture"),null!==s._colorsTexture&&T.setValue(be,"batchingColorTexture",s._colorsTexture,ee));const N=i.morphAttributes;void 0===N.position&&void 0===N.normal&&void 0===N.color||ge.update(s,i,C);(E||v.receiveShadow!==s.receiveShadow)&&(v.receiveShadow=s.receiveShadow,T.setValue(be,"receiveShadow",s.receiveShadow));n.isMeshGouraudMaterial&&null!==n.envMap&&(D.envMap.value=l,D.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);n.isMeshStandardMaterial&&null===n.envMap&&null!==t.environment&&(D.envMapIntensity.value=t.environmentIntensity);E&&(T.setValue(be,"toneMappingExposure",b.toneMappingExposure),v.needsLights&&(P=M,(R=D).ambientLightColor.needsUpdate=P,R.lightProbe.needsUpdate=P,R.directionalLights.needsUpdate=P,R.directionalLightShadows.needsUpdate=P,R.pointLights.needsUpdate=P,R.pointLightShadows.needsUpdate=P,R.spotLights.needsUpdate=P,R.spotLightShadows.needsUpdate=P,R.rectAreaLights.needsUpdate=P,R.hemisphereLights.needsUpdate=P),r&&!0===n.fog&&ae.refreshFogUniforms(D,r),ae.refreshMaterialUniforms(D,n,A,I,m.state.transmissionRenderTarget[e.id]),OC.upload(be,Be(v),D,ee));var R,P;n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(OC.upload(be,Be(v),D,ee),n.uniformsNeedUpdate=!1);n.isSpriteMaterial&&T.setValue(be,"center",s.center);if(T.setValue(be,"modelViewMatrix",s.modelViewMatrix),T.setValue(be,"normalMatrix",s.normalMatrix),T.setValue(be,"modelMatrix",s.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const e=n.uniformsGroups;for(let t=0,i=e.length;t<i;t++){const i=e[t];ve.update(i,C),ve.bind(i,C)}}return C}(e,t,i,n,s);Y.setMaterial(n,o);let l=i.index,h=1;if(!0===n.wireframe){if(l=se.getWireframeAttribute(i),void 0===l)return;h=2}const c=i.drawRange,d=i.attributes.position;let u=c.start*h,g=(c.start+c.count)*h;null!==r&&(u=Math.max(u,r.start*h),g=Math.min(g,(r.start+r.count)*h)),null!==l?(u=Math.max(u,0),g=Math.min(g,l.count)):void 0!==d&&null!==d&&(u=Math.max(u,0),g=Math.min(g,d.count));const p=g-u;if(p<0||p===1/0)return;let f;_e.setup(s,n,a,i,l);let _=pe;if(null!==l&&(f=ne.get(l),_=fe,_.setIndex(f)),s.isMesh)!0===n.wireframe?(Y.setLineWidth(n.wireframeLinewidth*q()),_.setMode(be.LINES)):_.setMode(be.TRIANGLES);else if(s.isLine){let e=n.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*q()),s.isLineSegments?_.setMode(be.LINES):s.isLineLoop?_.setMode(be.LINE_LOOP):_.setMode(be.LINE_STRIP)}else s.isPoints?_.setMode(be.POINTS):s.isSprite&&_.setMode(be.TRIANGLES);if(s.isBatchedMesh)if(null!==s._multiDrawInstances)_.renderMultiDrawInstances(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount,s._multiDrawInstances);else if(Q.get("WEBGL_multi_draw"))_.renderMultiDraw(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount);else{const e=s._multiDrawStarts,t=s._multiDrawCounts,i=s._multiDrawCount,r=l?ne.get(l).bytesPerElement:1,o=J.get(n).currentProgram.getUniforms();for(let n=0;n<i;n++)o.setValue(be,"_gl_DrawID",n),_.render(e[n]/r,t[n])}else if(s.isInstancedMesh)_.renderInstances(u,p,s.count);else if(i.isInstancedBufferGeometry){const e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);_.renderInstances(u,p,t)}else _.render(u,p)},this.compile=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===i&&(i=e),m=he.get(i),m.init(t),v.push(m),i.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==i&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights();const n=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let s=0;s<t.length;s++){const r=t[s];Ee(r,i,e),n.add(r)}else Ee(t,i,e),n.add(t)})),v.pop(),m=null,n},this.compileAsync=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=this.compile(e,t,i);return new Promise((t=>{function i(){n.forEach((function(e){J.get(e).currentProgram.isReady()&&n.delete(e)})),0!==n.size?setTimeout(i,10):t(e)}null!==Q.get("KHR_parallel_shader_compile")?i():setTimeout(i,10)}))};let Me=null;function Te(){Ne.stop()}function De(){Ne.start()}const Ne=new qy;function Ie(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){n&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);const t=re.update(e),s=e.material;s.visible&&f.push(e,t,s,i,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||z.intersectsObject(e))){const t=re.update(e),s=e.material;if(n&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)),G.applyMatrix4(e.matrixWorld).applyMatrix4(U)),Array.isArray(s)){const n=t.groups;for(let r=0,o=n.length;r<o;r++){const o=n[r],a=s[o.materialIndex];a&&a.visible&&f.push(e,t,a,i,G.z,o)}}else s.visible&&f.push(e,t,s,i,G.z,null)}const s=e.children;for(let r=0,o=s.length;r<o;r++)Ie(s[r],t,i,n)}function Ae(e,t,i,n){const s=e.opaque,r=e.transmissive,o=e.transparent;m.setupLightsView(i),!0===V&&ce.setGlobalState(b.clippingPlanes,i),n&&Y.viewport(L.copy(n)),s.length>0&&Pe(s,t,i),r.length>0&&Pe(r,t,i),o.length>0&&Pe(o,t,i),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Re(e,t,i,n){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[n.id]&&(m.state.transmissionRenderTarget[n.id]=new Xd(1,1,{generateMipmaps:!0,type:Q.has("EXT_color_buffer_half_float")||Q.has("EXT_color_buffer_float")?hh:ih,minFilter:eh,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Bd.workingColorSpace}));const r=m.state.transmissionRenderTarget[n.id],o=n.viewport||L;r.setSize(o.z*b.transmissionResolutionScale,o.w*b.transmissionResolutionScale);const a=b.getRenderTarget();b.setRenderTarget(r),b.getClearColor(T),D=b.getClearAlpha(),D<1&&b.setClearColor(16777215,.5),b.clear(),$&&ue.render(i);const l=b.toneMapping;b.toneMapping=El;const h=n.viewport;if(void 0!==n.viewport&&(n.viewport=void 0),m.setupLightsView(n),!0===V&&ce.setGlobalState(b.clippingPlanes,n),Pe(e,i,n),ee.updateMultisampleRenderTarget(r),ee.updateRenderTargetMipmap(r),!1===Q.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.object,a=r.geometry,l=r.material,h=r.group;if(l.side===Ua&&o.layers.test(n.layers)){const t=l.side;l.side=Ha,l.needsUpdate=!0,Oe(o,i,n,a,l,h),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(ee.updateMultisampleRenderTarget(r),ee.updateRenderTargetMipmap(r))}b.setRenderTarget(a),b.setClearColor(T,D),void 0!==h&&(n.viewport=h),b.toneMapping=l}function Pe(e,t,i){const n=!0===t.isScene?t.overrideMaterial:null;for(let s=0,r=e.length;s<r;s++){const r=e[s],o=r.object,a=r.geometry,l=null===n?r.material:n,h=r.group;o.layers.test(i.layers)&&Oe(o,t,i,a,l,h)}}function Oe(e,t,i,n,s,r){e.onBeforeRender(b,t,i,n,s,r),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),s.onBeforeRender(b,t,i,n,e,r),!0===s.transparent&&s.side===Ua&&!1===s.forceSinglePass?(s.side=Ha,s.needsUpdate=!0,b.renderBufferDirect(i,t,n,s,e,r),s.side=Wa,s.needsUpdate=!0,b.renderBufferDirect(i,t,n,s,e,r),s.side=Ua):b.renderBufferDirect(i,t,n,s,e,r),e.onAfterRender(b,t,i,n,s,r)}function Fe(e,t,i){!0!==t.isScene&&(t=K);const n=J.get(e),s=m.state.lights,r=m.state.shadowsArray,o=s.state.version,a=oe.getParameters(e,s.state,r,t,i),l=oe.getProgramCacheKey(a);let h=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?ie:te).get(e.envMap||n.environment),n.envMapRotation=null!==n.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===h&&(e.addEventListener("dispose",Le),h=new Map,n.programs=h);let c=h.get(l);if(void 0!==c){if(n.currentProgram===c&&n.lightsStateVersion===o)return ze(e,a),c}else a.uniforms=oe.getUniforms(e),e.onBeforeCompile(a,b),c=oe.acquireProgram(a,l),h.set(l,c),n.uniforms=a.uniforms;const d=n.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ce.uniform),ze(e,a),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=o,n.needsLights&&(d.ambientLightColor.value=s.state.ambient,d.lightProbe.value=s.state.probe,d.directionalLights.value=s.state.directional,d.directionalLightShadows.value=s.state.directionalShadow,d.spotLights.value=s.state.spot,d.spotLightShadows.value=s.state.spotShadow,d.rectAreaLights.value=s.state.rectArea,d.ltc_1.value=s.state.rectAreaLTC1,d.ltc_2.value=s.state.rectAreaLTC2,d.pointLights.value=s.state.point,d.pointLightShadows.value=s.state.pointShadow,d.hemisphereLights.value=s.state.hemi,d.directionalShadowMap.value=s.state.directionalShadowMap,d.directionalShadowMatrix.value=s.state.directionalShadowMatrix,d.spotShadowMap.value=s.state.spotShadowMap,d.spotLightMatrix.value=s.state.spotLightMatrix,d.spotLightMap.value=s.state.spotLightMap,d.pointShadowMap.value=s.state.pointShadowMap,d.pointShadowMatrix.value=s.state.pointShadowMatrix),n.currentProgram=c,n.uniformsList=null,c}function Be(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=OC.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function ze(e,t){const i=J.get(e);i.outputColorSpace=t.outputColorSpace,i.batching=t.batching,i.batchingColor=t.batchingColor,i.instancing=t.instancing,i.instancingColor=t.instancingColor,i.instancingMorph=t.instancingMorph,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}Ne.setAnimationLoop((function(e){Me&&Me(e)})),"undefined"!==typeof self&&Ne.setContext(self),this.setAnimationLoop=function(e){Me=e,Ce.setAnimationLoop(e),null===e?Ne.stop():Ne.start()},Ce.addEventListener("sessionstart",Te),Ce.addEventListener("sessionend",De),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ce.enabled&&!0===Ce.isPresenting&&(!0===Ce.cameraAutoUpdate&&Ce.updateCamera(t),t=Ce.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,S),m=he.get(e,v.length),m.init(t),v.push(m),U.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(U),W=this.localClippingEnabled,V=ce.init(this.clippingPlanes,W),f=le.get(e,_.length),f.init(),_.push(f),!0===Ce.enabled&&!0===Ce.isPresenting){const e=b.xr.getDepthSensingMesh();null!==e&&Ie(e,t,-1/0,b.sortObjects)}Ie(e,t,0,b.sortObjects),f.finish(),!0===b.sortObjects&&f.sort(R,P),$=!1===Ce.enabled||!1===Ce.isPresenting||!1===Ce.hasDepthSensing(),$&&ue.addToRenderList(f,e),this.info.render.frame++,!0===V&&ce.beginShadows();const i=m.state.shadowsArray;de.render(i,e,t),!0===V&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset();const n=f.opaque,s=f.transmissive;if(m.setupLights(),t.isArrayCamera){const i=t.cameras;if(s.length>0)for(let t=0,r=i.length;t<r;t++){Re(n,s,e,i[t])}$&&ue.render(e);for(let t=0,n=i.length;t<n;t++){const n=i[t];Ae(f,e,n,n.viewport)}}else s.length>0&&Re(n,s,e,t),$&&ue.render(e),Ae(f,e,t);null!==S&&0===C&&(ee.updateMultisampleRenderTarget(S),ee.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(b,e,t),_e.resetDefaultState(),x=-1,k=null,v.pop(),v.length>0?(m=v[v.length-1],!0===V&&ce.setGlobalState(b.clippingPlanes,m.state.camera)):m=null,_.pop(),f=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,i){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=i;const n=J.get(e);n.__hasExternalTextures=!0,n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===Q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const i=J.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t};const Ve=be.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;S=e,w=t,C=i;let n=!0,s=null,r=!1,o=!1;if(e){const a=J.get(e);if(void 0!==a.__useDefaultFramebuffer)Y.bindFramebuffer(be.FRAMEBUFFER,null),n=!1;else if(void 0===a.__webglFramebuffer)ee.setupRenderTarget(e);else if(a.__hasExternalTextures)ee.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(a.__boundDepthTexture!==t){if(null!==t&&J.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const h=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(s=Array.isArray(h[t])?h[t][i]:h[t],r=!0):s=e.samples>0&&!1===ee.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:Array.isArray(h)?h[i]:h,L.copy(e.viewport),E.copy(e.scissor),M=e.scissorTest}else L.copy(O).multiplyScalar(A).floor(),E.copy(F).multiplyScalar(A).floor(),M=B;0!==i&&(s=Ve);if(Y.bindFramebuffer(be.FRAMEBUFFER,s)&&n&&Y.drawBuffers(e,s),Y.viewport(L),Y.scissor(E),Y.setScissorTest(M),r){const n=J.get(e.texture);be.framebufferTexture2D(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_CUBE_MAP_POSITIVE_X+t,n.__webglTexture,i)}else if(o){const n=J.get(e.texture),s=t;be.framebufferTextureLayer(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0,n.__webglTexture,i,s)}else if(null!==e&&0!==i){const t=J.get(e.texture);be.framebufferTexture2D(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_2D,t.__webglTexture,i)}x=-1},this.readRenderTargetPixels=function(e,t,i,n,s,r,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){Y.bindFramebuffer(be.FRAMEBUFFER,a);try{const o=e.texture,a=o.format,l=o.type;if(!X.textureFormatReadable(a))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-n&&i>=0&&i<=e.height-s&&be.readPixels(t,i,n,s,me.convert(a),me.convert(l),r)}finally{const e=null!==S?J.get(S).__webglFramebuffer:null;Y.bindFramebuffer(be.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,i,n,s,r,o){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){const o=e.texture,l=o.format,h=o.type;if(!X.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(h))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-n&&i>=0&&i<=e.height-s){Y.bindFramebuffer(be.FRAMEBUFFER,a);const e=be.createBuffer();be.bindBuffer(be.PIXEL_PACK_BUFFER,e),be.bufferData(be.PIXEL_PACK_BUFFER,r.byteLength,be.STREAM_READ),be.readPixels(t,i,n,s,me.convert(l),me.convert(h),0);const o=null!==S?J.get(S).__webglFramebuffer:null;Y.bindFramebuffer(be.FRAMEBUFFER,o);const c=be.fenceSync(be.SYNC_GPU_COMMANDS_COMPLETE,0);return be.flush(),await function(e,t,i){return new Promise((function(n,s){setTimeout((function r(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:s();break;case e.TIMEOUT_EXPIRED:setTimeout(r,i);break;default:n()}}),i)}))}(be,c,4),be.bindBuffer(be.PIXEL_PACK_BUFFER,e),be.getBufferSubData(be.PIXEL_PACK_BUFFER,0,r),be.deleteBuffer(e),be.deleteSync(c),r}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(Rd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const n=Math.pow(2,-i),s=Math.floor(e.image.width*n),r=Math.floor(e.image.height*n),o=null!==t?t.x:0,a=null!==t?t.y:0;ee.setTexture2D(e,0),be.copyTexSubImage2D(be.TEXTURE_2D,i,0,0,o,a,s,r),Y.unbindTexture()};const We=be.createFramebuffer(),He=be.createFramebuffer();this.copyTextureToTexture=function(e,t){let i,n,s,r,o,a,l,h,c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!0!==e.isTexture&&(Rd("WebGLRenderer: copyTextureToTexture function signature has changed."),u=arguments[0]||null,e=arguments[1],t=arguments[2],p=arguments[3]||0,d=null),null===p&&(0!==g?(Rd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),p=g,g=0):p=0);const f=e.isCompressedTexture?e.mipmaps[p]:e.image;if(null!==d)i=d.max.x-d.min.x,n=d.max.y-d.min.y,s=d.isBox3?d.max.z-d.min.z:1,r=d.min.x,o=d.min.y,a=d.isBox3?d.min.z:0;else{const t=Math.pow(2,-g);i=Math.floor(f.width*t),n=Math.floor(f.height*t),s=e.isDataArrayTexture?f.depth:e.isData3DTexture?Math.floor(f.depth*t):1,r=0,o=0,a=0}null!==u?(l=u.x,h=u.y,c=u.z):(l=0,h=0,c=0);const m=me.convert(t.format),_=me.convert(t.type);let v;t.isData3DTexture?(ee.setTexture3D(t,0),v=be.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ee.setTexture2DArray(t,0),v=be.TEXTURE_2D_ARRAY):(ee.setTexture2D(t,0),v=be.TEXTURE_2D),be.pixelStorei(be.UNPACK_FLIP_Y_WEBGL,t.flipY),be.pixelStorei(be.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),be.pixelStorei(be.UNPACK_ALIGNMENT,t.unpackAlignment);const b=be.getParameter(be.UNPACK_ROW_LENGTH),y=be.getParameter(be.UNPACK_IMAGE_HEIGHT),w=be.getParameter(be.UNPACK_SKIP_PIXELS),C=be.getParameter(be.UNPACK_SKIP_ROWS),S=be.getParameter(be.UNPACK_SKIP_IMAGES);be.pixelStorei(be.UNPACK_ROW_LENGTH,f.width),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,f.height),be.pixelStorei(be.UNPACK_SKIP_PIXELS,r),be.pixelStorei(be.UNPACK_SKIP_ROWS,o),be.pixelStorei(be.UNPACK_SKIP_IMAGES,a);const x=e.isDataArrayTexture||e.isData3DTexture,k=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const d=J.get(e),u=J.get(t),f=J.get(d.__renderTarget),m=J.get(u.__renderTarget);Y.bindFramebuffer(be.READ_FRAMEBUFFER,f.__webglFramebuffer),Y.bindFramebuffer(be.DRAW_FRAMEBUFFER,m.__webglFramebuffer);for(let _=0;_<s;_++)x&&(be.framebufferTextureLayer(be.READ_FRAMEBUFFER,be.COLOR_ATTACHMENT0,J.get(e).__webglTexture,g,a+_),be.framebufferTextureLayer(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0,J.get(t).__webglTexture,p,c+_)),be.blitFramebuffer(r,o,i,n,l,h,i,n,be.DEPTH_BUFFER_BIT,be.NEAREST);Y.bindFramebuffer(be.READ_FRAMEBUFFER,null),Y.bindFramebuffer(be.DRAW_FRAMEBUFFER,null)}else if(0!==g||e.isRenderTargetTexture||J.has(e)){const d=J.get(e),u=J.get(t);Y.bindFramebuffer(be.READ_FRAMEBUFFER,We),Y.bindFramebuffer(be.DRAW_FRAMEBUFFER,He);for(let e=0;e<s;e++)x?be.framebufferTextureLayer(be.READ_FRAMEBUFFER,be.COLOR_ATTACHMENT0,d.__webglTexture,g,a+e):be.framebufferTexture2D(be.READ_FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_2D,d.__webglTexture,g),k?be.framebufferTextureLayer(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0,u.__webglTexture,p,c+e):be.framebufferTexture2D(be.DRAW_FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_2D,u.__webglTexture,p),0!==g?be.blitFramebuffer(r,o,i,n,l,h,i,n,be.COLOR_BUFFER_BIT,be.NEAREST):k?be.copyTexSubImage3D(v,p,l,h,c+e,r,o,i,n):be.copyTexSubImage2D(v,p,l,h,r,o,i,n);Y.bindFramebuffer(be.READ_FRAMEBUFFER,null),Y.bindFramebuffer(be.DRAW_FRAMEBUFFER,null)}else k?e.isDataTexture||e.isData3DTexture?be.texSubImage3D(v,p,l,h,c,i,n,s,m,_,f.data):t.isCompressedArrayTexture?be.compressedTexSubImage3D(v,p,l,h,c,i,n,s,m,f.data):be.texSubImage3D(v,p,l,h,c,i,n,s,m,_,f):e.isDataTexture?be.texSubImage2D(be.TEXTURE_2D,p,l,h,i,n,m,_,f.data):e.isCompressedTexture?be.compressedTexSubImage2D(be.TEXTURE_2D,p,l,h,f.width,f.height,m,f.data):be.texSubImage2D(be.TEXTURE_2D,p,l,h,i,n,m,_,f);be.pixelStorei(be.UNPACK_ROW_LENGTH,b),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,y),be.pixelStorei(be.UNPACK_SKIP_PIXELS,w),be.pixelStorei(be.UNPACK_SKIP_ROWS,C),be.pixelStorei(be.UNPACK_SKIP_IMAGES,S),0===p&&t.generateMipmaps&&be.generateMipmap(v),Y.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return!0!==e.isTexture&&(Rd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),i=arguments[0]||null,n=arguments[1]||null,e=arguments[2],t=arguments[3],s=arguments[4]||0),Rd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,i,n,s)},this.initRenderTarget=function(e){void 0===J.get(e).__webglFramebuffer&&ee.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ee.setTextureCube(e,0):e.isData3DTexture?ee.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ee.setTexture2DArray(e,0):ee.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){w=0,C=0,S=null,Y.reset(),_e.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return dd}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Bd._getDrawingBufferColorSpace(e),t.unpackColorSpace=Bd._getUnpackColorSpace()}}var AS=i(7927),RS=i.n(AS);const PS=function(){const t=(0,s.useRef)(null),i=(0,s.useRef)(null);(0,s.useEffect)((()=>(i.current||(i.current=RS()({el:t.current,THREE:e,mouseControls:!0,touchControls:!0,gyroControls:!1,minHeight:200,minWidth:200,backgroundColor:789516,amplitudeFactor:2.5})),()=>{i.current&&(i.current.destroy(),i.current=null)})),[]);const n=e=>{let{title:t,description:i}=e;return(0,De.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-lg hover:shadow-2xl transition",children:[(0,De.jsx)("h3",{className:"text-lg font-bold text-yellow-600 mb-4",children:t}),(0,De.jsx)("p",{className:"text-sm text-gray-700",children:i})]})},r=e=>{let{name:t,role:i,feedback:n,image:s}=e;return(0,De.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 shadow-lg bg-gray-100",children:[(0,De.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,De.jsx)("img",{src:s,alt:t,className:"w-16 h-16 rounded-full object-cover"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:t}),(0,De.jsx)("p",{className:"text-gray-500 text-sm",children:i})]})]}),(0,De.jsx)("p",{className:"text-gray-800 text-sm",children:n})]})};return(0,De.jsxs)("div",{ref:t,className:"min-h-screen flex flex-col",children:[(0,De.jsxs)("nav",{className:"w-full py-4 px-6 flex justify-between items-center bg-opacity-75 bg-black text-white",children:[(0,De.jsx)("div",{className:"flex items-center",children:(0,De.jsx)("img",{src:"./assets/images/logo.png",alt:"Code Craftery Logo",className:"h-10"})}),(0,De.jsx)(Ee,{to:"/Dashboard",children:(0,De.jsx)("button",{className:"px-4 py-2 bg-yellow-500 text-white rounded-full shadow-md hover:bg-yellow-600 transition",children:"Login"})})]}),(0,De.jsxs)("section",{className:"flex flex-col items-center text-center px-4 py-20 justify-center",children:[(0,De.jsx)("h1",{className:"text-4xl md:text-6xl font-extrabold text-yellow-500 mb-6",children:"Welcome to Code Craftery"}),(0,De.jsx)("p",{className:"text-gray-200 text-lg md:text-xl max-w-2xl",children:"Your ultimate destination for programming knowledge. Access valuable resources, dynamic content, and connect with a vibrant community of developers."}),(0,De.jsx)(Ee,{to:"/Login",children:(0,De.jsx)("button",{className:"mt-8 px-6 py-3 bg-yellow-500 text-white rounded-full shadow-md text-lg font-semibold hover:bg-yellow-600 transition",children:"Get Started"})})]}),(0,De.jsxs)("section",{className:"py-12 px-6 w-full",children:[(0,De.jsx)("h2",{className:"text-2xl font-bold text-yellow-600 text-center mb-8",children:"Features of Code Craftery"}),(0,De.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto",children:[(0,De.jsx)(n,{title:"Easy-to-use Interface",description:"Write and compile code directly within the browser."}),(0,De.jsx)(n,{title:"Automatic Documentation",description:"Step-by-step guides to simplify complex tasks."}),(0,De.jsx)(n,{title:"Voice-Control Dashboard",description:"Interactive tutorials with feedback and progress tracking."})]})]}),(0,De.jsx)("section",{className:"py-12 px-6 w-full",children:(0,De.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,De.jsx)("h2",{className:"text-center text-3xl font-bold text-yellow-500 mb-12",children:"Automate Your Process"}),(0,De.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,De.jsxs)("div",{children:[(0,De.jsxs)("div",{className:"mb-8",children:[(0,De.jsx)("h3",{className:"text-lg font-bold text-yellow-500",children:"Streamline Intake"}),(0,De.jsx)("p",{className:"text-gray-200 text-lg md:text-xl",children:"Send your clients an intake form to capture data and generate documents."})]}),(0,De.jsxs)("div",{className:"mb-8",children:[(0,De.jsx)("h3",{className:"text-lg font-bold text-yellow-500",children:"Demand Letter"}),(0,De.jsx)("p",{className:"text-gray-200 text-lg md:text-x",children:"Generate customized demand letters for your clients."})]}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h3",{className:"text-lg font-bold text-yellow-500",children:"Case Management"}),(0,De.jsx)("p",{className:"text-gray-200 text-lg md:text-x",children:"Easily manage client data and supplement as needed."})]})]}),(0,De.jsx)("div",{className:"flex justify-end",children:(0,De.jsx)("img",{src:"./assets/images/grp.png",alt:"Process illustration",className:"w-[400px] h-[250px]"})})]})]})}),(0,De.jsx)("section",{className:"py-12 px-6 w-full",children:(0,De.jsxs)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[(0,De.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-md",children:(0,De.jsx)("iframe",{className:"w-full h-64",src:"",title:"Demo Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),(0,De.jsxs)("div",{children:[(0,De.jsx)("h3",{className:"text-lg font-bold text-yellow-600 mb-4",children:"Watch a Demo:"}),(0,De.jsx)("p",{className:"text-gray-200 text-lg md:text-x",children:"Clear and concise tutorials that break down complex coding tasks into manageable steps. Track progress and gain valuable insights."})]})]})}),(0,De.jsxs)("section",{className:"py-12 px-6 bg-gray-100 w-full",children:[(0,De.jsx)("h2",{className:"text-2xl font-bold text-yellow-600 text-center mb-8",children:"Feedback from Our Clients"}),(0,De.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto",children:[{name:"Ashish Sekhva",role:"Chief Manager",feedback:"Use this section to describe your company and the products you offer. You could share your company\u2019s story and details about why you are in business.",image:"https://via.placeholder.com/150"},{name:"Dabhi Devang",role:"Chief Manager",feedback:"Use this section to describe your company and the products you offer. You could share your company\u2019s story and details about why you are in business.",image:"https://via.placeholder.com/150"},{name:"Mr. Makwana",role:"Chief Manager",feedback:"Use this section to describe your company and the products you offer. You could share your company\u2019s story and details about why you are in business.",image:"https://via.placeholder.com/150"}].map(((e,t)=>(0,De.jsx)(r,{...e},t)))})]})]})};var OS=i(4961),FS=i(2823),BS=i(1540),zS=i(2569),VS=i(4423),WS=i(1266);class HS{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class US{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class jS{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return KS(e,t)}compute(e,t,i){return i}}class GS{constructor(e,t){this.newValue=e,this.didChange=t}}function KS(e,t){if("object"!==typeof e||"object"!==typeof t||!e||!t)return new GS(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&OS.aI(e,t);return new GS(t,!i)}let i=!1;for(const n in t)if(t.hasOwnProperty(n)){const s=KS(e[n],t[n]);s.didChange&&(e[n]=s.newValue,i=!0)}return new GS(e,i)}class $S{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return KS(e,t)}validate(e){return this.defaultValue}}class qS{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return KS(e,t)}validate(e){return"undefined"===typeof e?this.defaultValue:e}compute(e,t,i){return i}}function QS(e,t){return"undefined"===typeof e?t:"false"!==e&&Boolean(e)}class XS extends qS{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;"undefined"!==typeof n&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return QS(e,this.defaultValue)}}function YS(e,t,i,n){if("undefined"===typeof e)return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(i,s),s=Math.min(n,s),0|s)}class ZS extends qS{static clampedInt(e,t,i,n){return YS(e,t,i,n)}constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;"undefined"!==typeof r&&(r.type="integer",r.default=i,r.minimum=n,r.maximum=s),super(e,t,i,r),this.minimum=n,this.maximum=s}validate(e){return ZS.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function JS(e,t,i,n){if("undefined"===typeof e)return t;const s=ex.float(e,t);return ex.clamp(s,i,n)}class ex extends qS{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if("number"===typeof e)return e;if("undefined"===typeof e)return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,n,s){"undefined"!==typeof s&&(s.type="number",s.default=i),super(e,t,i,s),this.validationFn=n}validate(e){return this.validationFn(ex.float(e,this.defaultValue))}}class tx extends qS{static string(e,t){return"string"!==typeof e?t:e}constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;"undefined"!==typeof n&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return tx.string(e,this.defaultValue)}}function ix(e,t,i,n){return"string"!==typeof e?t:n&&e in n?n[e]:-1===i.indexOf(e)?t:e}class nx extends qS{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;"undefined"!==typeof s&&(s.type="string",s.enum=n,s.default=i),super(e,t,i,s),this._allowedValues=n}validate(e){return ix(e,this.defaultValue,this._allowedValues)}}class sx extends jS{constructor(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;"undefined"!==typeof o&&(o.type="string",o.enum=s,o.default=n),super(e,t,i,o),this._allowedValues=s,this._convert=r}validate(e){return"string"!==typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}}var rx,ox;!function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(rx||(rx={}));class ax extends jS{static#e=(()=>this.OFF='"liga" off, "calt" off')();static#t=(()=>this.ON='"liga" on, "calt" on')();constructor(){super(51,"fontLigatures",ax.OFF,{anyOf:[{type:"boolean",description:WS.kg("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:WS.kg("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:WS.kg("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return"undefined"===typeof e?this.defaultValue:"string"===typeof e?"false"===e||0===e.length?ax.OFF:"true"===e?ax.ON:e:Boolean(e)?ax.ON:ax.OFF}}class lx extends jS{static#e=(()=>this.OFF="normal")();static#t=(()=>this.TRANSLATE="translate")();constructor(){super(54,"fontVariations",lx.OFF,{anyOf:[{type:"boolean",description:WS.kg("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:WS.kg("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:WS.kg("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return"undefined"===typeof e?this.defaultValue:"string"===typeof e?"false"===e?lx.OFF:"true"===e?lx.TRANSLATE:e:Boolean(e)?lx.TRANSLATE:lx.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}}class hx extends jS{static#e=(()=>this.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"])();static#t=(()=>this.MINIMUM_VALUE=1)();static#i=(()=>this.MAXIMUM_VALUE=1e3)();constructor(){super(53,"fontWeight",Cx.fontWeight,{anyOf:[{type:"number",minimum:hx.MINIMUM_VALUE,maximum:hx.MAXIMUM_VALUE,errorMessage:WS.kg("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:hx.SUGGESTION_VALUES}],default:Cx.fontWeight,description:WS.kg("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return"normal"===e||"bold"===e?e:String(ZS.clampedInt(e,Cx.fontWeight,hx.MINIMUM_VALUE,hx.MAXIMUM_VALUE))}}class cx extends $S{constructor(){super(146)}compute(e,t,i){return cx.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));const s=(i+e.viewLineCount+n)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:Math.floor(e.viewLineCount/s)}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const r=t.stableMinimapLayoutInput,o=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,a=e.lineHeight,l=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,c=e.minimap.renderCharacters;let d=s>=2?Math.round(2*e.minimap.scale):e.minimap.scale;const u=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,f=e.verticalScrollbarWidth,m=e.viewLineCount,_=e.remainingWidth,v=e.isViewportWrapping,b=c?2:3;let y=Math.floor(s*n);const w=y/s;let C=!1,S=!1,x=b*d,k=d/s,L=1;if("fill"===g||"fit"===g){const{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:l,desiredRatio:c,minimapLineCount:u}=cx.computeContainedMinimapLineCount({viewLineCount:m,scrollBeyondLastLine:h,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:a,pixelRatio:s});if(m/u>1)C=!0,S=!0,d=1,x=1,k=d/s;else{let n=!1,h=d+1;if("fit"===g){const e=Math.ceil((r+m+l)*x);v&&o&&_<=t.stableFitRemainingWidth?(n=!0,h=t.stableFitMaxMinimapScale):n=e>y}if("fill"===g||n){C=!0;const n=d;x=Math.min(a*s,Math.max(1,Math.floor(1/c))),v&&o&&_<=t.stableFitRemainingWidth&&(h=t.stableFitMaxMinimapScale),d=Math.min(h,Math.max(1,Math.floor(x/b))),d>n&&(L=Math.min(2,d/n)),k=d/s/L,y=Math.ceil(Math.max(i,r+m+l)*x),v?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=_,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const E=Math.floor(u*k),M=Math.min(E,Math.max(0,Math.floor((_-f-2)*k/(l+k)))+8);let T=Math.floor(s*M);const D=T/s;T=Math.floor(T*L);return{renderMinimap:c?1:2,minimapLeft:"left"===p?0:i-M-f,minimapWidth:M,minimapHeightIsEditorHeight:C,minimapIsSampling:S,minimapScale:d,minimapLineHeight:x,minimapCanvasInnerWidth:T,minimapCanvasInnerHeight:y,minimapCanvasOuterWidth:D,minimapCanvasOuterHeight:w}}static computeLayout(e,t){const i=0|t.outerWidth,n=0|t.outerHeight,s=0|t.lineHeight,r=0|t.lineNumbersDigitCount,o=t.typicalHalfwidthCharacterWidth,a=t.maxDigitWidth,l=t.pixelRatio,h=t.viewLineCount,c=e.get(138),d="inherit"===c?e.get(137):c,u="inherit"===d?e.get(133):d,g=e.get(136),p=t.isDominatedByLongLines,f=e.get(57),m=0!==e.get(68).renderType,_=e.get(69),v=e.get(106),b=e.get(84),y=e.get(73),w=e.get(104),C=w.verticalScrollbarSize,S=w.verticalHasArrows,x=w.arrowSize,k=w.horizontalScrollbarSize,L=e.get(43),E="never"!==e.get(111);let M=e.get(66);L&&E&&(M+=16);let T=0;if(m){const e=Math.max(r,_);T=Math.round(e*a)}let D=0;f&&(D=s*t.glyphMarginDecorationLaneCount);let N=0,I=N+D,A=I+T,R=A+M;const P=i-D-T-M;let O=!1,F=!1,B=-1;"inherit"===d&&p?(O=!0,F=!0):"on"===u||"bounded"===u?F=!0:"wordWrapColumn"===u&&(B=g);const z=cx._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:s,typicalHalfwidthCharacterWidth:o,pixelRatio:l,scrollBeyondLastLine:v,paddingTop:b.top,paddingBottom:b.bottom,minimap:y,verticalScrollbarWidth:C,viewLineCount:h,remainingWidth:P,isViewportWrapping:F},t.memory||new US);0!==z.renderMinimap&&0===z.minimapLeft&&(N+=z.minimapWidth,I+=z.minimapWidth,A+=z.minimapWidth,R+=z.minimapWidth);const V=P-z.minimapWidth,W=Math.max(1,Math.floor((V-C-2)/o)),H=S?x:0;return F&&(B=Math.max(1,W),"bounded"===u&&(B=Math.min(B,g))),{width:i,height:n,glyphMarginLeft:N,glyphMarginWidth:D,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:I,lineNumbersWidth:T,decorationsLeft:A,decorationsWidth:M,contentLeft:R,contentWidth:V,minimap:z,viewportColumn:W,isWordWrapMinified:O,isViewportWrapping:F,wrappingColumn:B,verticalScrollbarWidth:C,horizontalScrollbarHeight:k,overviewRuler:{top:H,width:C,height:n-2*H,right:0}}}}!function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(ox||(ox={}));function dx(e){const t=e.get(99);return"editable"===t?e.get(92):"on"!==t}function ux(e,t){if("string"!==typeof e)return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}const gx="inUntrustedWorkspace",px="editor.unicodeHighlight.allowedCharacters",fx="editor.unicodeHighlight.invisibleCharacters",mx="editor.unicodeHighlight.nonBasicASCII",_x="editor.unicodeHighlight.ambiguousCharacters",vx="editor.unicodeHighlight.includeComments",bx="editor.unicodeHighlight.includeStrings",yx="editor.unicodeHighlight.allowedLocales";function wx(e,t,i){const n=i.indexOf(e);return-1===n?t:i[n]}const Cx={fontFamily:BS.zx?"Menlo, Monaco, 'Courier New', monospace":BS.j9?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:BS.zx?12:14,lineHeight:0,letterSpacing:0},Sx=[];function xx(e){return Sx[e.id]=e,e}const kx={acceptSuggestionOnCommitCharacter:xx(new XS(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:WS.kg("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:xx(new nx(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",WS.kg("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:WS.kg("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:xx(new class extends jS{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[WS.kg("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),WS.kg("accessibilitySupport.on","Optimize for usage with a Screen Reader."),WS.kg("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:WS.kg("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return 0===i?e.accessibilitySupport:i}}),accessibilityPageSize:xx(new ZS(3,"accessibilityPageSize",10,1,1073741824,{description:WS.kg("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:xx(new tx(4,"ariaLabel",WS.kg("editorViewAccessibleLabel","Editor content"))),ariaRequired:xx(new XS(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:xx(new XS(8,"screenReaderAnnounceInlineSuggestion",!0,{description:WS.kg("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:xx(new nx(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",WS.kg("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),WS.kg("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:WS.kg("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:xx(new nx(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",WS.kg("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),WS.kg("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:WS.kg("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:xx(new nx(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",WS.kg("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:WS.kg("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:xx(new nx(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",WS.kg("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:WS.kg("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:xx(new nx(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",WS.kg("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),WS.kg("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:WS.kg("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:xx(new sx(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[WS.kg("editor.autoIndent.none","The editor will not insert indentation automatically."),WS.kg("editor.autoIndent.keep","The editor will keep the current line's indentation."),WS.kg("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),WS.kg("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),WS.kg("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:WS.kg("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:xx(new XS(13,"automaticLayout",!1)),autoSurround:xx(new nx(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[WS.kg("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),WS.kg("editor.autoSurround.quotes","Surround with quotes but not brackets."),WS.kg("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:WS.kg("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:xx(new class extends jS{constructor(){const e={enabled:zS.R.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:zS.R.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:WS.kg("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:WS.kg("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:QS(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}),bracketPairGuides:xx(new class extends jS{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[WS.kg("editor.guides.bracketPairs.true","Enables bracket pair guides."),WS.kg("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),WS.kg("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:WS.kg("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[WS.kg("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),WS.kg("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),WS.kg("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:WS.kg("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:WS.kg("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:WS.kg("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[WS.kg("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),WS.kg("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),WS.kg("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:WS.kg("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{bracketPairs:wx(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:wx(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:QS(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:QS(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:wx(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}),stickyTabStops:xx(new XS(117,"stickyTabStops",!1,{description:WS.kg("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:xx(new XS(17,"codeLens",!0,{description:WS.kg("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:xx(new tx(18,"codeLensFontFamily","",{description:WS.kg("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:xx(new ZS(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:WS.kg("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:xx(new XS(20,"colorDecorators",!0,{description:WS.kg("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:xx(new nx(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[WS.kg("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),WS.kg("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),WS.kg("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:WS.kg("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:xx(new ZS(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:WS.kg("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:xx(new XS(22,"columnSelection",!1,{description:WS.kg("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:xx(new class extends jS{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:WS.kg("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:WS.kg("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{insertSpace:QS(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:QS(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),contextmenu:xx(new XS(24,"contextmenu",!0)),copyWithSyntaxHighlighting:xx(new XS(25,"copyWithSyntaxHighlighting",!0,{description:WS.kg("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:xx(new sx(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:WS.kg("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:xx(new nx(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[WS.kg("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),WS.kg("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),WS.kg("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:WS.kg("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:xx(new sx(28,"cursorStyle",rx.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(e){switch(e){case"line":return rx.Line;case"block":return rx.Block;case"underline":return rx.Underline;case"line-thin":return rx.LineThin;case"block-outline":return rx.BlockOutline;case"underline-thin":return rx.UnderlineThin}}),{description:WS.kg("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:xx(new ZS(29,"cursorSurroundingLines",0,0,1073741824,{description:WS.kg("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:xx(new nx(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[WS.kg("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),WS.kg("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:WS.kg("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:xx(new ZS(31,"cursorWidth",0,0,1073741824,{markdownDescription:WS.kg("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:xx(new XS(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:xx(new XS(33,"disableMonospaceOptimizations",!1)),domReadOnly:xx(new XS(34,"domReadOnly",!1)),dragAndDrop:xx(new XS(35,"dragAndDrop",!0,{description:WS.kg("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:xx(new class extends XS{constructor(){super(37,"emptySelectionClipboard",!0,{description:WS.kg("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}),dropIntoEditor:xx(new class extends jS{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:WS.kg("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:WS.kg("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[WS.kg("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),WS.kg("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),showDropSelector:ix(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}),stickyScroll:xx(new class extends jS{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:WS.kg("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:WS.kg("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:WS.kg("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:WS.kg("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),maxLineCount:ZS.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:ix(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:QS(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}),experimentalWhitespaceRendering:xx(new nx(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[WS.kg("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),WS.kg("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),WS.kg("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:WS.kg("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:xx(new tx(39,"extraEditorClassName","")),fastScrollSensitivity:xx(new ex(40,"fastScrollSensitivity",5,(e=>e<=0?5:e),{markdownDescription:WS.kg("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:xx(new class extends jS{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:WS.kg("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[WS.kg("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),WS.kg("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),WS.kg("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:WS.kg("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[WS.kg("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),WS.kg("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),WS.kg("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:WS.kg("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:WS.kg("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:BS.zx},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:WS.kg("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:WS.kg("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{cursorMoveOnType:QS(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:"boolean"===typeof e.seedSearchStringFromSelection?e.seedSearchStringFromSelection?"always":"never":ix(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"===typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":ix(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:QS(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:QS(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:QS(t.loop,this.defaultValue.loop)}}}),fixedOverflowWidgets:xx(new XS(42,"fixedOverflowWidgets",!1)),folding:xx(new XS(43,"folding",!0,{description:WS.kg("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:xx(new nx(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[WS.kg("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),WS.kg("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:WS.kg("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:xx(new XS(45,"foldingHighlight",!0,{description:WS.kg("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:xx(new XS(46,"foldingImportsByDefault",!1,{description:WS.kg("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:xx(new ZS(47,"foldingMaximumRegions",5e3,10,65e3,{description:WS.kg("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:xx(new XS(48,"unfoldOnClickAfterEndOfLine",!1,{description:WS.kg("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:xx(new tx(49,"fontFamily",Cx.fontFamily,{description:WS.kg("fontFamily","Controls the font family.")})),fontInfo:xx(new class extends $S{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}),fontLigatures2:xx(new ax),fontSize:xx(new class extends qS{constructor(){super(52,"fontSize",Cx.fontSize,{type:"number",minimum:6,maximum:100,default:Cx.fontSize,description:WS.kg("fontSize","Controls the font size in pixels.")})}validate(e){const t=ex.float(e,this.defaultValue);return 0===t?Cx.fontSize:ex.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}),fontWeight:xx(new hx),fontVariations:xx(new lx),formatOnPaste:xx(new XS(55,"formatOnPaste",!1,{description:WS.kg("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:xx(new XS(56,"formatOnType",!1,{description:WS.kg("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:xx(new XS(57,"glyphMargin",!0,{description:WS.kg("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:xx(new class extends jS{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[WS.kg("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),WS.kg("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),WS.kg("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:WS.kg("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:WS.kg("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:WS.kg("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:WS.kg("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:WS.kg("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:WS.kg("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:WS.kg("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:WS.kg("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:WS.kg("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:WS.kg("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:WS.kg("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{multiple:ix(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??ix(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??ix(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??ix(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??ix(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??ix(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??ix(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:tx.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:tx.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:tx.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:tx.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:tx.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:tx.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}),hideCursorInOverviewRuler:xx(new XS(59,"hideCursorInOverviewRuler",!1,{description:WS.kg("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:xx(new class extends jS{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:WS.kg("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:WS.kg("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:WS.kg("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:WS.kg("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:WS.kg("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),delay:ZS.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:QS(t.sticky,this.defaultValue.sticky),hidingDelay:ZS.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:QS(t.above,this.defaultValue.above)}}}),inDiffEditor:xx(new XS(61,"inDiffEditor",!1)),letterSpacing:xx(new ex(64,"letterSpacing",Cx.letterSpacing,(e=>ex.clamp(e,-5,20)),{description:WS.kg("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:xx(new class extends jS{constructor(){const e={enabled:ox.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[ox.Off,ox.OnCode,ox.On],default:e.enabled,enumDescriptions:[WS.kg("editor.lightbulb.enabled.off","Disable the code action menu."),WS.kg("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),WS.kg("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:WS.kg("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;return{enabled:ix(e.enabled,this.defaultValue.enabled,[ox.Off,ox.OnCode,ox.On])}}}),lineDecorationsWidth:xx(new class extends jS{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){if("string"===typeof e&&/^\d+(\.\d+)?ch$/.test(e)){return-parseFloat(e.substring(0,e.length-2))}return ZS.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?ZS.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}),lineHeight:xx(new class extends ex{constructor(){super(67,"lineHeight",Cx.lineHeight,(e=>ex.clamp(e,0,150)),{markdownDescription:WS.kg("lineHeight","Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")})}compute(e,t,i){return e.fontInfo.lineHeight}}),lineNumbers:xx(new class extends jS{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[WS.kg("lineNumbers.off","Line numbers are not rendered."),WS.kg("lineNumbers.on","Line numbers are rendered as absolute number."),WS.kg("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),WS.kg("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:WS.kg("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return"undefined"!==typeof e&&("function"===typeof e?(t=4,i=e):t="interval"===e?3:"relative"===e?2:"on"===e?1:0),{renderType:t,renderFn:i}}}),lineNumbersMinChars:xx(new ZS(69,"lineNumbersMinChars",5,1,300)),linkedEditing:xx(new XS(70,"linkedEditing",!1,{description:WS.kg("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:xx(new XS(71,"links",!0,{description:WS.kg("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:xx(new nx(72,"matchBrackets","always",["always","near","never"],{description:WS.kg("matchBrackets","Highlight matching brackets.")})),minimap:xx(new class extends jS{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:WS.kg("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:WS.kg("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[WS.kg("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),WS.kg("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),WS.kg("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:WS.kg("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:WS.kg("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:WS.kg("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:WS.kg("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:WS.kg("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:WS.kg("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:WS.kg("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:WS.kg("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:WS.kg("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:WS.kg("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),autohide:QS(t.autohide,this.defaultValue.autohide),size:ix(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ix(t.side,this.defaultValue.side,["right","left"]),showSlider:ix(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:QS(t.renderCharacters,this.defaultValue.renderCharacters),scale:ZS.clampedInt(t.scale,1,1,3),maxColumn:ZS.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:QS(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:QS(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:ex.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:ex.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}),mouseStyle:xx(new nx(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:xx(new ex(75,"mouseWheelScrollSensitivity",1,(e=>0===e?1:e),{markdownDescription:WS.kg("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:xx(new XS(76,"mouseWheelZoom",!1,{markdownDescription:BS.zx?WS.kg("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):WS.kg("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:xx(new XS(77,"multiCursorMergeOverlapping",!0,{description:WS.kg("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:xx(new sx(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(e){return"ctrlCmd"===e?BS.zx?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[WS.kg("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),WS.kg("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:WS.kg({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:xx(new nx(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[WS.kg("multiCursorPaste.spread","Each cursor pastes a single line of the text."),WS.kg("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:WS.kg("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:xx(new ZS(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:WS.kg("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:xx(new nx(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[WS.kg("occurrencesHighlight.off","Does not highlight occurrences."),WS.kg("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),WS.kg("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:WS.kg("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:xx(new XS(82,"overviewRulerBorder",!0,{description:WS.kg("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:xx(new ZS(83,"overviewRulerLanes",3,0,3)),padding:xx(new class extends jS{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:WS.kg("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:WS.kg("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{top:ZS.clampedInt(t.top,0,0,1e3),bottom:ZS.clampedInt(t.bottom,0,0,1e3)}}}),pasteAs:xx(new class extends jS{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:WS.kg("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:WS.kg("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[WS.kg("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),WS.kg("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),showPasteSelector:ix(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}),parameterHints:xx(new class extends jS{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:WS.kg("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:WS.kg("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),cycle:QS(t.cycle,this.defaultValue.cycle)}}}),peekWidgetDefaultFocus:xx(new nx(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[WS.kg("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),WS.kg("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:WS.kg("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:xx(new class extends jS{constructor(){super(88,"placeholder",void 0)}validate(e){return"undefined"===typeof e?this.defaultValue:"string"===typeof e?e:this.defaultValue}}),definitionLinkOpensInPeek:xx(new XS(89,"definitionLinkOpensInPeek",!1,{description:WS.kg("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:xx(new class extends jS{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[WS.kg("on","Quick suggestions show inside the suggest widget"),WS.kg("inline","Quick suggestions show as ghost text"),WS.kg("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:WS.kg("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:WS.kg("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:WS.kg("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:WS.kg("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if("boolean"===typeof e){const t=e?"on":"off";return{comments:t,strings:t,other:t}}if(!e||"object"!==typeof e)return this.defaultValue;const{other:t,comments:i,strings:n}=e,s=["on","inline","off"];let r,o,a;return r="boolean"===typeof t?t?"on":"off":ix(t,this.defaultValue.other,s),o="boolean"===typeof i?i?"on":"off":ix(i,this.defaultValue.comments,s),a="boolean"===typeof n?n?"on":"off":ix(n,this.defaultValue.strings,s),{other:r,comments:o,strings:a}}}),quickSuggestionsDelay:xx(new ZS(91,"quickSuggestionsDelay",10,0,1073741824,{description:WS.kg("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:xx(new XS(92,"readOnly",!1)),readOnlyMessage:xx(new class extends jS{constructor(){super(93,"readOnlyMessage",undefined)}validate(e){return e&&"object"===typeof e?e:this.defaultValue}}),renameOnType:xx(new XS(94,"renameOnType",!1,{description:WS.kg("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:WS.kg("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:xx(new XS(95,"renderControlCharacters",!0,{description:WS.kg("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:xx(new nx(96,"renderFinalNewline",BS.j9?"dimmed":"on",["off","on","dimmed"],{description:WS.kg("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:xx(new nx(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",WS.kg("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:WS.kg("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:xx(new XS(98,"renderLineHighlightOnlyWhenFocus",!1,{description:WS.kg("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:xx(new nx(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:xx(new nx(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",WS.kg("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),WS.kg("renderWhitespace.selection","Render whitespace characters only on selected text."),WS.kg("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:WS.kg("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:xx(new ZS(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:xx(new XS(102,"roundedSelection",!0,{description:WS.kg("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:xx(new class extends jS{constructor(){const e=[],t={type:"number",description:WS.kg("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:WS.kg("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:WS.kg("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if("number"===typeof i)t.push({column:ZS.clampedInt(i,0,0,1e4),color:null});else if(i&&"object"===typeof i){const e=i;t.push({column:ZS.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort(((e,t)=>e.column-t.column)),t}return this.defaultValue}}),scrollbar:xx(new class extends jS{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[WS.kg("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),WS.kg("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),WS.kg("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:WS.kg("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[WS.kg("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),WS.kg("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),WS.kg("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:WS.kg("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:WS.kg("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:WS.kg("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:WS.kg("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:WS.kg("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e,i=ZS.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=ZS.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:ZS.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:ux(t.vertical,this.defaultValue.vertical),horizontal:ux(t.horizontal,this.defaultValue.horizontal),useShadows:QS(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:QS(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:QS(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:QS(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:QS(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:ZS.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:ZS.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:QS(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:QS(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}),scrollBeyondLastColumn:xx(new ZS(105,"scrollBeyondLastColumn",4,0,1073741824,{description:WS.kg("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:xx(new XS(106,"scrollBeyondLastLine",!0,{description:WS.kg("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:xx(new XS(107,"scrollPredominantAxis",!0,{description:WS.kg("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:xx(new XS(108,"selectionClipboard",!0,{description:WS.kg("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:BS.j9})),selectionHighlight:xx(new XS(109,"selectionHighlight",!0,{description:WS.kg("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:xx(new XS(110,"selectOnLineNumbers",!0)),showFoldingControls:xx(new nx(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[WS.kg("showFoldingControls.always","Always show the folding controls."),WS.kg("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),WS.kg("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:WS.kg("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:xx(new XS(112,"showUnused",!0,{description:WS.kg("showUnused","Controls fading out of unused code.")})),showDeprecated:xx(new XS(141,"showDeprecated",!0,{description:WS.kg("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:xx(new class extends jS{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:WS.kg("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[WS.kg("editor.inlayHints.on","Inlay hints are enabled"),WS.kg("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",BS.zx?"Ctrl+Option":"Ctrl+Alt"),WS.kg("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",BS.zx?"Ctrl+Option":"Ctrl+Alt"),WS.kg("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:WS.kg("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:WS.kg("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:WS.kg("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return"boolean"===typeof t.enabled&&(t.enabled=t.enabled?"on":"off"),{enabled:ix(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:ZS.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:tx.string(t.fontFamily,this.defaultValue.fontFamily),padding:QS(t.padding,this.defaultValue.padding)}}}),snippetSuggestions:xx(new nx(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[WS.kg("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),WS.kg("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),WS.kg("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),WS.kg("snippetSuggestions.none","Do not show snippet suggestions.")],description:WS.kg("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:xx(new class extends jS{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:WS.kg("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:WS.kg("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return e&&"object"===typeof e?{selectLeadingAndTrailingWhitespace:QS(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:QS(e.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}}),smoothScrolling:xx(new XS(115,"smoothScrolling",!1,{description:WS.kg("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:xx(new ZS(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:xx(new class extends jS{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[WS.kg("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),WS.kg("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:WS.kg("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:WS.kg("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:WS.kg("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:WS.kg("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[WS.kg("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),WS.kg("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),WS.kg("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),WS.kg("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:WS.kg("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:WS.kg("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:WS.kg("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:WS.kg("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:WS.kg("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:WS.kg("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:WS.kg("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:WS.kg("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:WS.kg("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{insertMode:ix(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:QS(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:QS(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:QS(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:QS(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:ix(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:QS(t.showIcons,this.defaultValue.showIcons),showStatusBar:QS(t.showStatusBar,this.defaultValue.showStatusBar),preview:QS(t.preview,this.defaultValue.preview),previewMode:ix(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:QS(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:QS(t.showMethods,this.defaultValue.showMethods),showFunctions:QS(t.showFunctions,this.defaultValue.showFunctions),showConstructors:QS(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:QS(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:QS(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:QS(t.showFields,this.defaultValue.showFields),showVariables:QS(t.showVariables,this.defaultValue.showVariables),showClasses:QS(t.showClasses,this.defaultValue.showClasses),showStructs:QS(t.showStructs,this.defaultValue.showStructs),showInterfaces:QS(t.showInterfaces,this.defaultValue.showInterfaces),showModules:QS(t.showModules,this.defaultValue.showModules),showProperties:QS(t.showProperties,this.defaultValue.showProperties),showEvents:QS(t.showEvents,this.defaultValue.showEvents),showOperators:QS(t.showOperators,this.defaultValue.showOperators),showUnits:QS(t.showUnits,this.defaultValue.showUnits),showValues:QS(t.showValues,this.defaultValue.showValues),showConstants:QS(t.showConstants,this.defaultValue.showConstants),showEnums:QS(t.showEnums,this.defaultValue.showEnums),showEnumMembers:QS(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:QS(t.showKeywords,this.defaultValue.showKeywords),showWords:QS(t.showWords,this.defaultValue.showWords),showColors:QS(t.showColors,this.defaultValue.showColors),showFiles:QS(t.showFiles,this.defaultValue.showFiles),showReferences:QS(t.showReferences,this.defaultValue.showReferences),showFolders:QS(t.showFolders,this.defaultValue.showFolders),showTypeParameters:QS(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:QS(t.showSnippets,this.defaultValue.showSnippets),showUsers:QS(t.showUsers,this.defaultValue.showUsers),showIssues:QS(t.showIssues,this.defaultValue.showIssues)}}}),inlineSuggest:xx(new class extends jS{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:WS.kg("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[WS.kg("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),WS.kg("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),WS.kg("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:WS.kg("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:WS.kg("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:WS.kg("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),mode:ix(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:ix(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:QS(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:QS(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:tx.string(t.fontFamily,this.defaultValue.fontFamily)}}}),inlineEdit:xx(new class extends jS{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:WS.kg("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[WS.kg("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),WS.kg("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),WS.kg("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:WS.kg("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:WS.kg("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:QS(t.enabled,this.defaultValue.enabled),showToolbar:ix(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:tx.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:QS(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}),inlineCompletionsAccessibilityVerbose:xx(new XS(150,"inlineCompletionsAccessibilityVerbose",!1,{description:WS.kg("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:xx(new ZS(120,"suggestFontSize",0,0,1e3,{markdownDescription:WS.kg("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:xx(new ZS(121,"suggestLineHeight",0,0,1e3,{markdownDescription:WS.kg("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:xx(new XS(122,"suggestOnTriggerCharacters",!0,{description:WS.kg("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:xx(new nx(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[WS.kg("suggestSelection.first","Always select the first suggestion."),WS.kg("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),WS.kg("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:WS.kg("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:xx(new nx(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[WS.kg("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),WS.kg("tabCompletion.off","Disable tab completions."),WS.kg("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:WS.kg("tabCompletion","Enables tab completions.")})),tabIndex:xx(new ZS(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:xx(new class extends jS{constructor(){const e={nonBasicASCII:gx,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:gx,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[mx]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gx],default:e.nonBasicASCII,description:WS.kg("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[fx]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:WS.kg("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[_x]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:WS.kg("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[vx]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gx],default:e.includeComments,description:WS.kg("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[bx]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gx],default:e.includeStrings,description:WS.kg("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[px]:{restricted:!0,type:"object",default:e.allowedCharacters,description:WS.kg("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[yx]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:WS.kg("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(FS.aI(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(FS.aI(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const n=super.applyUpdate(e,t);return i?new GS(n.newValue,!0):n}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{nonBasicASCII:wx(t.nonBasicASCII,gx,[!0,!1,gx]),invisibleCharacters:QS(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:QS(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:wx(t.includeComments,gx,[!0,!1,gx]),includeStrings:wx(t.includeStrings,gx,[!0,!1,gx]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if("object"!==typeof e||!e)return t;const i={};for(const[n,s]of Object.entries(e))!0===s&&(i[n]=!0);return i}}),unusualLineTerminators:xx(new nx(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[WS.kg("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),WS.kg("unusualLineTerminators.off","Unusual line terminators are ignored."),WS.kg("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:WS.kg("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:xx(new XS(128,"useShadowDOM",!0)),useTabStops:xx(new XS(129,"useTabStops",!0,{description:WS.kg("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:xx(new nx(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[WS.kg("wordBreak.normal","Use the default line break rule."),WS.kg("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:WS.kg("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:xx(new class extends jS{constructor(){super(131,"wordSegmenterLocales",[],{anyOf:[{description:WS.kg("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:WS.kg("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if("string"===typeof e&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if("string"===typeof i)try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}),wordSeparators:xx(new tx(132,"wordSeparators",VS.J3,{description:WS.kg("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:xx(new nx(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[WS.kg("wordWrap.off","Lines will never wrap."),WS.kg("wordWrap.on","Lines will wrap at the viewport width."),WS.kg({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),WS.kg({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:WS.kg({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:xx(new tx(134,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;\xa2\xb0\u2032\u2033\u2030\u2103\u3001\u3002\uff61\uff64\uffe0\uff0c\uff0e\uff1a\uff1b\uff1f\uff01\uff05\u30fb\uff65\u309d\u309e\u30fd\u30fe\u30fc\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u31f0\u31f1\u31f2\u31f3\u31f4\u31f5\u31f6\u31f7\u31f8\u31f9\u31fa\u31fb\u31fc\u31fd\u31fe\u31ff\u3005\u303b\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff70\u201d\u3009\u300b\u300d\u300f\u3011\u3015\uff09\uff3d\uff5d\uff63")),wordWrapBreakBeforeCharacters:xx(new tx(135,"wordWrapBreakBeforeCharacters","([{\u2018\u201c\u3008\u300a\u300c\u300e\u3010\u3014\uff08\uff3b\uff5b\uff62\xa3\xa5\uff04\uffe1\uffe5+\uff0b")),wordWrapColumn:xx(new ZS(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:WS.kg({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:xx(new nx(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:xx(new nx(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:xx(new class extends $S{constructor(){super(143)}compute(e,t,i){const n=["monaco-editor"];return t.get(39)&&n.push(t.get(39)),e.extraEditorClassName&&n.push(e.extraEditorClassName),"default"===t.get(74)?n.push("mouse-default"):"copy"===t.get(74)&&n.push("mouse-copy"),t.get(112)&&n.push("showUnused"),t.get(141)&&n.push("showDeprecated"),n.join(" ")}}),defaultColorDecorators:xx(new XS(148,"defaultColorDecorators",!1,{markdownDescription:WS.kg("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:xx(new class extends $S{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}),tabFocusMode:xx(new XS(145,"tabFocusMode",!1,{markdownDescription:WS.kg("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:xx(new cx),wrappingInfo:xx(new class extends $S{constructor(){super(147)}compute(e,t,i){const n=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}),wrappingIndent:xx(new class extends jS{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[WS.kg("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),WS.kg("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),WS.kg("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),WS.kg("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:WS.kg("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return 2===t.get(2)?0:i}}),wrappingStrategy:xx(new class extends jS{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[WS.kg("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),WS.kg("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:WS.kg("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return ix(e,"simple",["simple","advanced"])}compute(e,t,i){return 2===t.get(2)?"advanced":i}})};var Lx=i(2212);const Ex=window;var Mx=i(4663),Tx=i(6637),Dx=i(4673);class Nx{constructor(){this.mapWindowIdToZoomFactor=new Map}static#e=(()=>this.INSTANCE=new Nx)();getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}}function Ix(e,t,i){"string"===typeof t&&(t=e.matchMedia(t)),t.addEventListener("change",i)}const Ax=navigator.userAgent,Rx=Ax.indexOf("Firefox")>=0,Px=Ax.indexOf("AppleWebKit")>=0,Ox=Ax.indexOf("Chrome")>=0,Fx=!Ox&&Ax.indexOf("Safari")>=0,Bx=!Ox&&!Fx&&Px,zx=(Ax.indexOf("Electron/"),Ax.indexOf("Android")>=0);let Vx=!1;if("function"===typeof Ex.matchMedia){const e=Ex.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=Ex.matchMedia("(display-mode: fullscreen)");Vx=e.matches,Ix(Ex,e,(e=>{let{matches:i}=e;Vx&&t.matches||(Vx=i)}))}BS.ib||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText,BS.ib||navigator&&navigator.clipboard&&navigator.clipboard.readText,BS.ib||Vx||navigator.keyboard,"ontouchstart"in Ex||navigator.maxTouchPoints;const Wx=Ex.PointerEvent&&("ontouchstart"in Ex||navigator.maxTouchPoints>0);var Hx=i(6648),Ux=i(2240);function jx(e,t){if("number"===typeof e){if(0===e)return null;const i=(65535&e)>>>0,n=(4294901760&e)>>>16;return new $x(0!==n?[Gx(i,t),Gx(n,t)]:[Gx(i,t)])}{const i=[];for(let n=0;n<e.length;n++)i.push(Gx(e[n],t));return new $x(i)}}function Gx(e,t){const i=!!(2048&e),n=!!(256&e);return new Kx(2===t?n:i,!!(1024&e),!!(512&e),2===t?i:n,255&e)}class Kx{constructor(e,t,i,n,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=s}equals(e){return e instanceof Kx&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}class $x{constructor(e){if(0===e.length)throw(0,Ux.Qg)("chords");this.chords=e}}class qx{constructor(e,t,i,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=s,this.keyAriaLabel=r}}class Qx{}const Xx=BS.zx?256:2048,Yx=BS.zx?2048:256;class Zx{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=function(e){if(e.charCode){const t=String.fromCharCode(e.charCode).toUpperCase();return Hx.YM.fromString(t)}const t=e.keyCode;if(3===t)return 7;if(Rx)switch(t){case 59:return 85;case 60:if(BS.j9)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(BS.zx)return 57}else if(Px){if(BS.zx&&93===t)return 57;if(!BS.zx&&92===t)return 57}return Hx.uw[t]||0}(t),this.code=t.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Xx),this.altKey&&(t|=512),this.shiftKey&&(t|=1024),this.metaKey&&(t|=Yx),t|=e,t}_computeKeyCodeChord(){let e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new Kx(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const Jx=new WeakMap;function ek(e){if(!e.parent||e.parent===e)return null;try{const t=e.location,i=e.parent.location;if("null"!==t.origin&&"null"!==i.origin&&t.origin!==i.origin)return null}catch(O2){return null}return e.parent}class tk{static getSameOriginWindowChain(e){let t=Jx.get(e);if(!t){t=[],Jx.set(e,t);let i,n=e;do{i=ek(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i}while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0;const s=this.getSameOriginWindowChain(e);for(const r of s){const e=r.window.deref();if(i+=e?.scrollY??0,n+=e?.scrollX??0,e===t)break;if(!r.iframeElement)break;const s=r.iframeElement.getBoundingClientRect();i+=s.top,n+=s.left}return{top:i,left:n}}}class ik{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"===typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=tk.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class nk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(Ox){const e=navigator.userAgent.match(/Chrome\/(\d+)/);n=(e?parseInt(e[1]):123)<=122}if(e){const t=e,i=e,s=e.view?.devicePixelRatio||1;if("undefined"!==typeof t.wheelDeltaY)this.deltaY=n?t.wheelDeltaY/(120*s):t.wheelDeltaY/120;else if("undefined"!==typeof i.VERTICAL_AXIS&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?Rx&&!BS.zx?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if("undefined"!==typeof t.wheelDeltaX)Fx&&BS.uF?this.deltaX=-t.wheelDeltaX/120:this.deltaX=n?t.wheelDeltaX/(120*s):t.wheelDeltaX/120;else if("undefined"!==typeof i.HORIZONTAL_AXIS&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?Rx&&!BS.zx?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=n?e.wheelDelta/(120*s):e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}var sk=i(8591),rk=i(9563);const{entries:ok,setPrototypeOf:ak,isFrozen:lk,getPrototypeOf:hk,getOwnPropertyDescriptor:ck}=Object;let{freeze:dk,seal:uk,create:gk}=Object,{apply:pk,construct:fk}="undefined"!==typeof Reflect&&Reflect;dk||(dk=function(e){return e}),uk||(uk=function(e){return e}),pk||(pk=function(e,t,i){return e.apply(t,i)}),fk||(fk=function(e,t){return new e(...t)});const mk=Tk(Array.prototype.forEach),_k=Tk(Array.prototype.pop),vk=Tk(Array.prototype.push),bk=Tk(String.prototype.toLowerCase),yk=Tk(String.prototype.toString),wk=Tk(String.prototype.match),Ck=Tk(String.prototype.replace),Sk=Tk(String.prototype.indexOf),xk=Tk(String.prototype.trim),kk=Tk(Object.prototype.hasOwnProperty),Lk=Tk(RegExp.prototype.test),Ek=(Mk=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return fk(Mk,t)});var Mk;function Tk(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return pk(e,t,n)}}function Dk(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bk;ak&&ak(e,null);let n=t.length;for(;n--;){let s=t[n];if("string"===typeof s){const e=i(s);e!==s&&(lk(t)||(t[n]=e),s=e)}e[s]=!0}return e}function Nk(e){for(let t=0;t<e.length;t++){kk(e,t)||(e[t]=null)}return e}function Ik(e){const t=gk(null);for(const[i,n]of ok(e)){kk(e,i)&&(Array.isArray(n)?t[i]=Nk(n):n&&"object"===typeof n&&n.constructor===Object?t[i]=Ik(n):t[i]=n)}return t}function Ak(e,t){for(;null!==e;){const i=ck(e,t);if(i){if(i.get)return Tk(i.get);if("function"===typeof i.value)return Tk(i.value)}e=hk(e)}return function(){return null}}const Rk=dk(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pk=dk(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ok=dk(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Fk=dk(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Bk=dk(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),zk=dk(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vk=dk(["#text"]),Wk=dk(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Hk=dk(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Uk=dk(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),jk=dk(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Gk=uk(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Kk=uk(/<%[\w\W]*|[\w\W]*%>/gm),$k=uk(/\${[\w\W]*}/gm),qk=uk(/^data-[\-\w.\u00B7-\uFFFF]/),Qk=uk(/^aria-[\-\w]+$/),Xk=uk(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Yk=uk(/^(?:\w+script|data):/i),Zk=uk(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Jk=uk(/^html$/i),eL=uk(/^[a-z][.\w]*(-[.\w]+)+$/i);var tL=Object.freeze({__proto__:null,MUSTACHE_EXPR:Gk,ERB_EXPR:Kk,TMPLIT_EXPR:$k,DATA_ATTR:qk,ARIA_ATTR:Qk,IS_ALLOWED_URI:Xk,IS_SCRIPT_OR_DATA:Yk,ATTR_WHITESPACE:Zk,DOCTYPE_NAME:Jk,CUSTOM_ELEMENT:eL});const iL=1,nL=3,sL=7,rL=8,oL=9,aL=function(){return"undefined"===typeof window?null:window};var lL=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aL();const i=t=>e(t);if(i.version="3.1.7",i.removed=[],!t||!t.document||t.document.nodeType!==oL)return i.isSupported=!1,i;let{document:n}=t;const s=n,r=s.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:h,NodeFilter:c,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:g,trustedTypes:p}=t,f=h.prototype,m=Ak(f,"cloneNode"),_=Ak(f,"remove"),v=Ak(f,"nextSibling"),b=Ak(f,"childNodes"),y=Ak(f,"parentNode");if("function"===typeof a){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let w,C="";const{implementation:S,createNodeIterator:x,createDocumentFragment:k,getElementsByTagName:L}=n,{importNode:E}=s;let M={};i.isSupported="function"===typeof ok&&"function"===typeof y&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:D,TMPLIT_EXPR:N,DATA_ATTR:I,ARIA_ATTR:A,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:O}=tL;let{IS_ALLOWED_URI:F}=tL,B=null;const z=Dk({},[...Rk,...Pk,...Ok,...Bk,...Vk]);let V=null;const W=Dk({},[...Wk,...Hk,...Uk,...jk]);let H=Object.seal(gk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,j=null,G=!0,K=!0,$=!1,q=!0,Q=!1,X=!0,Y=!1,Z=!1,J=!1,ee=!1,te=!1,ie=!1,ne=!0,se=!1,re=!0,oe=!1,ae={},le=null;const he=Dk({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ce=null;const de=Dk({},["audio","video","img","source","image","track"]);let ue=null;const ge=Dk({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml";let _e=me,ve=!1,be=null;const ye=Dk({},[pe,fe,me],yk);let we=null;const Ce=["application/xhtml+xml","text/html"];let Se=null,xe=null;const ke=n.createElement("form"),Le=function(e){return e instanceof RegExp||e instanceof Function},Ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!xe||xe!==e){if(e&&"object"===typeof e||(e={}),e=Ik(e),we=-1===Ce.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Se="application/xhtml+xml"===we?yk:bk,B=kk(e,"ALLOWED_TAGS")?Dk({},e.ALLOWED_TAGS,Se):z,V=kk(e,"ALLOWED_ATTR")?Dk({},e.ALLOWED_ATTR,Se):W,be=kk(e,"ALLOWED_NAMESPACES")?Dk({},e.ALLOWED_NAMESPACES,yk):ye,ue=kk(e,"ADD_URI_SAFE_ATTR")?Dk(Ik(ge),e.ADD_URI_SAFE_ATTR,Se):ge,ce=kk(e,"ADD_DATA_URI_TAGS")?Dk(Ik(de),e.ADD_DATA_URI_TAGS,Se):de,le=kk(e,"FORBID_CONTENTS")?Dk({},e.FORBID_CONTENTS,Se):he,U=kk(e,"FORBID_TAGS")?Dk({},e.FORBID_TAGS,Se):{},j=kk(e,"FORBID_ATTR")?Dk({},e.FORBID_ATTR,Se):{},ae=!!kk(e,"USE_PROFILES")&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,K=!1!==e.ALLOW_DATA_ATTR,$=e.ALLOW_UNKNOWN_PROTOCOLS||!1,q=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Q=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,Y=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ie=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,se=e.SANITIZE_NAMED_PROPS||!1,re=!1!==e.KEEP_CONTENT,oe=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||Xk,_e=e.NAMESPACE||me,H=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Le(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Le(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Q&&(K=!1),te&&(ee=!0),ae&&(B=Dk({},Vk),V=[],!0===ae.html&&(Dk(B,Rk),Dk(V,Wk)),!0===ae.svg&&(Dk(B,Pk),Dk(V,Hk),Dk(V,jk)),!0===ae.svgFilters&&(Dk(B,Ok),Dk(V,Hk),Dk(V,jk)),!0===ae.mathMl&&(Dk(B,Bk),Dk(V,Uk),Dk(V,jk))),e.ADD_TAGS&&(B===z&&(B=Ik(B)),Dk(B,e.ADD_TAGS,Se)),e.ADD_ATTR&&(V===W&&(V=Ik(V)),Dk(V,e.ADD_ATTR,Se)),e.ADD_URI_SAFE_ATTR&&Dk(ue,e.ADD_URI_SAFE_ATTR,Se),e.FORBID_CONTENTS&&(le===he&&(le=Ik(le)),Dk(le,e.FORBID_CONTENTS,Se)),re&&(B["#text"]=!0),Y&&Dk(B,["html","head","body"]),B.table&&(Dk(B,["tbody"]),delete U.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Ek('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Ek('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,C=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML:e=>e,createScriptURL:e=>e})}catch(r){return console.warn("TrustedTypes policy "+s+" could not be created."),null}}(p,r)),null!==w&&"string"===typeof C&&(C=w.createHTML(""));dk&&dk(e),xe=e}},Me=Dk({},["mi","mo","mn","ms","mtext"]),Te=Dk({},["annotation-xml"]),De=Dk({},["title","style","font","a","script"]),Ne=Dk({},[...Pk,...Ok,...Fk]),Ie=Dk({},[...Bk,...zk]),Ae=function(e){vk(i.removed,{element:e});try{y(e).removeChild(e)}catch(t){_(e)}},Re=function(e,t){try{vk(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(n){vk(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!V[e])if(ee||te)try{Ae(t)}catch(n){}else try{t.setAttribute(e,"")}catch(n){}},Pe=function(e){let t=null,i=null;if(J)e="<remove></remove>"+e;else{const t=wk(e,/^[\r\n\t ]+/);i=t&&t[0]}"application/xhtml+xml"===we&&_e===me&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const s=w?w.createHTML(e):e;if(_e===me)try{t=(new g).parseFromString(s,we)}catch(o){}if(!t||!t.documentElement){t=S.createDocument(_e,"template",null);try{t.documentElement.innerHTML=ve?C:s}catch(o){}}const r=t.body||t.documentElement;return e&&i&&r.insertBefore(n.createTextNode(i),r.childNodes[0]||null),_e===me?L.call(t,Y?"html":"body")[0]:Y?t.documentElement:r},Oe=function(e){return x.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Fe=function(e){return e instanceof u&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof d)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)},Be=function(e){return"function"===typeof l&&e instanceof l},ze=function(e,t,n){M[e]&&mk(M[e],(e=>{e.call(i,t,n,xe)}))},Ve=function(e){let t=null;if(ze("beforeSanitizeElements",e,null),Fe(e))return Ae(e),!0;const n=Se(e.nodeName);if(ze("uponSanitizeElement",e,{tagName:n,allowedTags:B}),e.hasChildNodes()&&!Be(e.firstElementChild)&&Lk(/<[/\w]/g,e.innerHTML)&&Lk(/<[/\w]/g,e.textContent))return Ae(e),!0;if(e.nodeType===sL)return Ae(e),!0;if(X&&e.nodeType===rL&&Lk(/<[/\w]/g,e.data))return Ae(e),!0;if(!B[n]||U[n]){if(!U[n]&&He(n)){if(H.tagNameCheck instanceof RegExp&&Lk(H.tagNameCheck,n))return!1;if(H.tagNameCheck instanceof Function&&H.tagNameCheck(n))return!1}if(re&&!le[n]){const t=y(e)||e.parentNode,i=b(e)||e.childNodes;if(i&&t){for(let n=i.length-1;n>=0;--n){const s=m(i[n],!0);s.__removalCount=(e.__removalCount||0)+1,t.insertBefore(s,v(e))}}}return Ae(e),!0}return e instanceof h&&!function(e){let t=y(e);t&&t.tagName||(t={namespaceURI:_e,tagName:"template"});const i=bk(e.tagName),n=bk(t.tagName);return!!be[e.namespaceURI]&&(e.namespaceURI===fe?t.namespaceURI===me?"svg"===i:t.namespaceURI===pe?"svg"===i&&("annotation-xml"===n||Me[n]):Boolean(Ne[i]):e.namespaceURI===pe?t.namespaceURI===me?"math"===i:t.namespaceURI===fe?"math"===i&&Te[n]:Boolean(Ie[i]):e.namespaceURI===me?!(t.namespaceURI===fe&&!Te[n])&&!(t.namespaceURI===pe&&!Me[n])&&!Ie[i]&&(De[i]||!Ne[i]):!("application/xhtml+xml"!==we||!be[e.namespaceURI]))}(e)?(Ae(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!Lk(/<\/no(script|embed|frames)/i,e.innerHTML)?(Q&&e.nodeType===nL&&(t=e.textContent,mk([T,D,N],(e=>{t=Ck(t,e," ")})),e.textContent!==t&&(vk(i.removed,{element:e.cloneNode()}),e.textContent=t)),ze("afterSanitizeElements",e,null),!1):(Ae(e),!0)},We=function(e,t,i){if(ne&&("id"===t||"name"===t)&&(i in n||i in ke))return!1;if(K&&!j[t]&&Lk(I,t));else if(G&&Lk(A,t));else if(!V[t]||j[t]){if(!(He(e)&&(H.tagNameCheck instanceof RegExp&&Lk(H.tagNameCheck,e)||H.tagNameCheck instanceof Function&&H.tagNameCheck(e))&&(H.attributeNameCheck instanceof RegExp&&Lk(H.attributeNameCheck,t)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(t))||"is"===t&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&Lk(H.tagNameCheck,i)||H.tagNameCheck instanceof Function&&H.tagNameCheck(i))))return!1}else if(ue[t]);else if(Lk(F,Ck(i,P,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Sk(i,"data:")||!ce[e]){if($&&!Lk(R,Ck(i,P,"")));else if(i)return!1}else;return!0},He=function(e){return"annotation-xml"!==e&&wk(e,O)},Ue=function(e){ze("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V};let s=t.length;for(;s--;){const o=t[s],{name:a,namespaceURI:l,value:h}=o,c=Se(a);let d="value"===a?h:xk(h);if(n.attrName=c,n.attrValue=d,n.keepAttr=!0,n.forceKeepAttr=void 0,ze("uponSanitizeAttribute",e,n),d=n.attrValue,n.forceKeepAttr)continue;if(Re(a,e),!n.keepAttr)continue;if(!q&&Lk(/\/>/i,d)){Re(a,e);continue}Q&&mk([T,D,N],(e=>{d=Ck(d,e," ")}));const u=Se(e.nodeName);if(We(u,c,d))if(!se||"id"!==c&&"name"!==c||(Re(a,e),d="user-content-"+d),X&&Lk(/((--!?|])>)|<\/(style|title)/i,d))Re(a,e);else{if(w&&"object"===typeof p&&"function"===typeof p.getAttributeType)if(l);else switch(p.getAttributeType(u,c)){case"TrustedHTML":d=w.createHTML(d);break;case"TrustedScriptURL":d=w.createScriptURL(d)}try{l?e.setAttributeNS(l,a,d):e.setAttribute(a,d),Fe(e)?Ae(e):_k(i.removed)}catch(r){}}}ze("afterSanitizeAttributes",e,null)},je=function e(t){let i=null;const n=Oe(t);for(ze("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)ze("uponSanitizeShadowNode",i,null),Ve(i)||(i.content instanceof o&&e(i.content),Ue(i));ze("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null,a=null,h=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!==typeof e&&!Be(e)){if("function"!==typeof e.toString)throw Ek("toString is not a function");if("string"!==typeof(e=e.toString()))throw Ek("dirty is not a string, aborting")}if(!i.isSupported)return e;if(Z||Ee(t),i.removed=[],"string"===typeof e&&(oe=!1),oe){if(e.nodeName){const t=Se(e.nodeName);if(!B[t]||U[t])throw Ek("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)n=Pe("\x3c!----\x3e"),r=n.ownerDocument.importNode(e,!0),r.nodeType===iL&&"BODY"===r.nodeName||"HTML"===r.nodeName?n=r:n.appendChild(r);else{if(!ee&&!Q&&!Y&&-1===e.indexOf("<"))return w&&ie?w.createHTML(e):e;if(n=Pe(e),!n)return ee?null:ie?C:""}n&&J&&Ae(n.firstChild);const c=Oe(oe?e:n);for(;a=c.nextNode();)Ve(a)||(a.content instanceof o&&je(a.content),Ue(a));if(oe)return e;if(ee){if(te)for(h=k.call(n.ownerDocument);n.firstChild;)h.appendChild(n.firstChild);else h=n;return(V.shadowroot||V.shadowrootmode)&&(h=E.call(s,h,!0)),h}let d=Y?n.outerHTML:n.innerHTML;return Y&&B["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&Lk(Jk,n.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+d),Q&&mk([T,D,N],(e=>{d=Ck(d,e," ")})),w&&ie?w.createHTML(d):d},i.setConfig=function(){Ee(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Z=!0},i.clearConfig=function(){xe=null,Z=!1},i.isValidAttribute=function(e,t,i){xe||Ee({});const n=Se(e),s=Se(t);return We(n,s,i)},i.addHook=function(e,t){"function"===typeof t&&(M[e]=M[e]||[],vk(M[e],t))},i.removeHook=function(e){if(M[e])return _k(M[e])},i.removeHooks=function(e){M[e]&&(M[e]=[])},i.removeAllHooks=function(){M={}},i}();lL.version,lL.isSupported;const hL=lL.sanitize,cL=(lL.setConfig,lL.clearConfig,lL.isValidAttribute,lL.addHook),dL=lL.removeHook;lL.removeHooks,lL.removeAllHooks;var uL=i(4405),gL=i(2707);const{registerWindow:pL,getWindow:fL,getDocument:mL,getWindows:_L,getWindowsCount:vL,getWindowId:bL,getWindowById:yL,hasWindow:wL,onDidRegisterWindow:CL,onWillUnregisterWindow:SL,onDidUnregisterWindow:xL}=function(){const e=new Map;!function(e,t){const i=e;"number"!==typeof i.vscodeWindowId&&Object.defineProperty(i,"vscodeWindowId",{get:()=>t})}(Ex,1);const t={window:Ex,disposables:new Mx.Cm};e.set(Ex.vscodeWindowId,t);const i=new rk.vl,n=new rk.vl,s=new rk.vl;return{onDidRegisterWindow:i.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:n.event,registerWindow(t){if(e.has(t.vscodeWindowId))return Mx.jG.None;const r=new Mx.Cm,o={window:t,disposables:r.add(new Mx.Cm)};return e.set(t.vscodeWindowId,o),r.add((0,Mx.s)((()=>{e.delete(t.vscodeWindowId),n.fire(t)}))),r.add(EL(t,gE.BEFORE_UNLOAD,(()=>{s.fire(t)}))),i.fire(o),r},getWindows:()=>e.values(),getWindowsCount:()=>e.size,getWindowId:e=>e.vscodeWindowId,hasWindow:t=>e.has(t),getWindowById:function(i,n){return("number"===typeof i?e.get(i):void 0)??(n?t:void 0)},getWindow(e){const t=e;if(t?.ownerDocument?.defaultView)return t.ownerDocument.defaultView.window;const i=e;return i?.view?i.view.window:Ex},getDocument:e=>fL(e).document}}();function kL(e){for(;e.firstChild;)e.firstChild.remove()}class LL{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function EL(e,t,i,n){return new LL(e,t,i,n)}function ML(e,t){return function(i){return t(new ik(e,i))}}const TL=function(e,t,i,n){let s=i;return"click"===t||"mousedown"===t||"contextmenu"===t?s=ML(fL(e),i):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(s=function(e){return function(t){return e(new Zx(t))}}(i)),EL(e,t,s,n)};function DL(e,t,i){return(0,sk.b7)(e,t,i)}sk.A0;let NL,IL;class AL extends sk.vb{constructor(e){super(),this.defaultTarget=e&&fL(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class RL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(O2){(0,Ux.dz)(O2)}}static sort(e,t){return t.priority-e.priority}}function PL(e){return fL(e).getComputedStyle(e,null)}function OL(e,t){const i=fL(e),n=i.document;if(e!==n.body)return new BL(e.clientWidth,e.clientHeight);if(BS.un&&i?.visualViewport)return new BL(i.visualViewport.width,i.visualViewport.height);if(i?.innerWidth&&i.innerHeight)return new BL(i.innerWidth,i.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new BL(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new BL(n.documentElement.clientWidth,n.documentElement.clientHeight);if(t)return OL(t);throw new Error("Unable to figure out browser width and height")}!function(){const e=new Map,t=new Map,i=new Map,n=new Map;IL=function(s,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=bL(s),l=new RL(r,o);let h=e.get(a);return h||(h=[],e.set(a,h)),h.push(l),i.get(a)||(i.set(a,!0),s.requestAnimationFrame((()=>(s=>{i.set(s,!1);const r=e.get(s)??[];for(t.set(s,r),e.set(s,[]),n.set(s,!0);r.length>0;)r.sort(RL.sort),r.shift().execute();n.set(s,!1)})(a)))),l},NL=(e,i,s)=>{const r=bL(e);if(n.get(r)){const e=new RL(i,s);let n=t.get(r);return n||(n=[],t.set(r,n)),n.push(e),e}return IL(e,i,s)}}();class FL{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const n=PL(e),s=n?n.getPropertyValue(t):"0";return FL.convertToPixels(e,s)}static getBorderLeftWidth(e){return FL.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return FL.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return FL.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return FL.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return FL.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return FL.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return FL.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return FL.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return FL.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return FL.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return FL.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return FL.getDimension(e,"margin-bottom","marginBottom")}}class BL{static#e=(()=>this.None=new BL(0,0))();constructor(e,t){this.width=e,this.height=t}with(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height;return e!==this.width||t!==this.height?new BL(e,t):this}static is(e){return"object"===typeof e&&"number"===typeof e.height&&"number"===typeof e.width}static lift(e){return e instanceof BL?e:new BL(e.width,e.height)}static equals(e,t){return e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height)}}function zL(e){const t=e.getBoundingClientRect(),i=fL(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}function VL(e){let t=e,i=1;do{const e=PL(t).zoom;null!==e&&void 0!==e&&"1"!==e&&(i*=e),t=t.parentElement}while(null!==t&&t!==t.ownerDocument.documentElement);return i}function WL(e){const t=FL.getMarginLeft(e)+FL.getMarginRight(e);return e.offsetWidth+t}function HL(e){const t=FL.getBorderLeftWidth(e)+FL.getBorderRightWidth(e),i=FL.getPaddingLeft(e)+FL.getPaddingRight(e);return e.offsetWidth-t-i}function UL(e){const t=FL.getBorderTopWidth(e)+FL.getBorderBottomWidth(e),i=FL.getPaddingTop(e)+FL.getPaddingBottom(e);return e.offsetHeight-t-i}function jL(e){const t=FL.getMarginTop(e)+FL.getMarginBottom(e);return e.offsetHeight+t}function GL(e,t){return Boolean(t?.contains(e))}function KL(e,t,i){return!!function(e,t,i){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(i)if("string"===typeof i){if(e.classList.contains(i))return null}else if(e===i)return null;e=e.parentNode}return null}(e,t,i)}function $L(e){return e&&!!e.host&&!!e.mode}function qL(e){return!!QL(e)}function QL(e){for(;e.parentNode;){if(e===e.ownerDocument?.body)return null;e=e.parentNode}return $L(e)?e:null}function XL(){let e=JL().activeElement;for(;e?.shadowRoot;)e=e.shadowRoot.activeElement;return e}function YL(e){return XL()===e}function ZL(e){return GL(XL(),e)}function JL(){if(vL()<=1)return Ex.document;return Array.from(_L()).map((e=>{let{window:t}=e;return t.document})).find((e=>e.hasFocus()))??Ex.document}function eE(){const e=JL();return e.defaultView?.window??Ex}const tE=new Map;function iE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ex.document.head,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const n=document.createElement("style");if(n.type="text/css",n.media="screen",t?.(n),e.appendChild(n),i&&i.add((0,Mx.s)((()=>n.remove()))),e===Ex.document.head){const e=new Set;tE.set(n,e);for(const{window:t,disposables:s}of _L()){if(t===Ex)continue;const r=s.add(nE(n,e,t));i?.add(r)}}return n}function nE(e,t,i){const n=new Mx.Cm,s=e.cloneNode(!0);i.document.head.appendChild(s),n.add((0,Mx.s)((()=>s.remove())));for(const r of aE(e))s.sheet?.insertRule(r.cssText,s.sheet?.cssRules.length);return n.add(sE.observe(e,n,{childList:!0})((()=>{s.textContent=e.textContent}))),t.add(s),n.add((0,Mx.s)((()=>t.delete(s)))),n}const sE=new class{constructor(){this.mutationObservers=new Map}observe(e,t,i){let n=this.mutationObservers.get(e);n||(n=new Map,this.mutationObservers.set(e,n));const s=(0,gL.tW)(i);let r=n.get(s);if(r)r.users+=1;else{const o=new rk.vl,a=new MutationObserver((e=>o.fire(e)));a.observe(e,i);const l=r={users:1,observer:a,onDidMutate:o.event};t.add((0,Mx.s)((()=>{l.users-=1,0===l.users&&(o.dispose(),a.disconnect(),n?.delete(s),0===n?.size&&this.mutationObservers.delete(e))}))),n.set(s,r)}return r.onDidMutate}};let rE=null;function oE(){return rE||(rE=iE()),rE}function aE(e){return e?.sheet?.rules?e.sheet.rules:e?.sheet?.cssRules?e.sheet.cssRules:[]}function lE(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oE();if(i&&t){i.sheet?.insertRule(`${e} {${t}}`,0);for(const n of tE.get(i)??[])lE(e,t,n)}}function hE(e){return e instanceof HTMLElement||e instanceof fL(e).HTMLElement}function cE(e){return e instanceof HTMLAnchorElement||e instanceof fL(e).HTMLAnchorElement}function dE(e){return e instanceof MouseEvent||e instanceof fL(e).MouseEvent}function uE(e){return e instanceof KeyboardEvent||e instanceof fL(e).KeyboardEvent}const gE={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Px?"webkitAnimationStart":"animationstart",ANIMATION_END:Px?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Px?"webkitAnimationIteration":"animationiteration"};function pE(e){const t=e;return!(!t||"function"!==typeof t.preventDefault||"function"!==typeof t.stopPropagation)}const fE=(e,t)=>(e.preventDefault(),t&&e.stopPropagation(),e);class mE extends Mx.jG{static hasFocusWithin(e){if(hE(e)){const t=QL(e);return GL(t?t.activeElement:e.ownerDocument.activeElement,e)}{const t=e;return GL(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new rk.vl),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new rk.vl),this.onDidBlur=this._onDidBlur.event;let t=mE.hasFocusWithin(e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(i=!0,(hE(e)?fL(e):e).setTimeout((()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())}),0))};this._refreshStateHandler=()=>{mE.hasFocusWithin(e)!==t&&(t?s():n())},this._register(EL(e,gE.FOCUS,n,!0)),this._register(EL(e,gE.BLUR,s,!0)),hE(e)&&(this._register(EL(e,gE.FOCUS_IN,(()=>this._refreshStateHandler()))),this._register(EL(e,gE.FOCUS_OUT,(()=>this._refreshStateHandler()))))}}function _E(e){return new mE(e)}function vE(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(e.append(...i),1===i.length&&"string"!==typeof i[0])return i[0]}function bE(e,t){return e.insertBefore(t,e.firstChild),t}function yE(e){e.innerText="";for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];vE(e,...i)}const wE=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var CE;function SE(e,t,i){const n=wE.exec(t);if(!n)throw new Error("Bad use of emmet");const s=n[1]||"div";let r;r=e!==CE.HTML?document.createElementNS(e,s):document.createElement(s),n[3]&&(r.id=n[3]),n[4]&&(r.className=n[4].replace(/\./g," ").trim()),i&&Object.entries(i).forEach((e=>{let[t,i]=e;"undefined"!==typeof i&&(/^on\w+$/.test(t)?r[t]=i:"selected"===t?i&&r.setAttribute(t,"true"):r.setAttribute(t,i))}));for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return r.append(...a),r}function xE(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return SE(CE.HTML,e,t,...n)}function kE(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)n.style.display="",n.removeAttribute("aria-hidden")}function LE(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const n of t)n.style.display="none",n.setAttribute("aria-hidden","true")}function EE(e,t){const i=e.devicePixelRatio*t;return Math.max(1,Math.floor(i))/e.devicePixelRatio}function ME(e){Ex.open(e,"_blank","noopener")}function TE(e){return e?`url('${uL.zl.uriToBrowserUri(e).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function DE(e){return`'${e.replace(/'/g,"%27")}'`}function NE(e,t){if(void 0!==e){const i=e.match(/^\s*var\((.+)\)$/);if(i){const e=i[1].split(",",2);return 2===e.length&&(t=NE(e[1].trim(),t)),`var(${e[0]}, ${t})`}return e}return t}!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.SVG="http://www.w3.org/2000/svg"}(CE||(CE={})),xE.SVG=function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return SE(CE.SVG,e,t,...n)},uL.Ez.setPreferredWebSchema(/^https:/.test(Ex.location.href)?"https":"http");const IE=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});class AE extends rk.vl{constructor(){super(),this._subscriptions=new Mx.Cm,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(rk.Jh.runAndSubscribe(CL,(e=>{let{window:t,disposables:i}=e;return this.registerListeners(t,i)}),{window:Ex,disposables:this._subscriptions}))}registerListeners(e,t){t.add(EL(e,"keydown",(e=>{if(e.defaultPrevented)return;const t=new Zx(e);if(6!==t.keyCode||!e.repeat){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(6===t.keyCode)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}}),!0)),t.add(EL(e,"keyup",(e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))}),!0)),t.add(EL(e.document.body,"mousedown",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),t.add(EL(e.document.body,"mouseup",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),t.add(EL(e.document.body,"mousemove",(e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)}),!0)),t.add(EL(e,"blur",(()=>{this.resetKeyStatus()})))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return AE.instance||(AE.instance=new AE),AE.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class RE extends Mx.jG{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(EL(this.element,gE.DRAG_START,(e=>{this.callbacks.onDragStart?.(e)}))),this.callbacks.onDrag&&this._register(EL(this.element,gE.DRAG,(e=>{this.callbacks.onDrag?.(e)}))),this._register(EL(this.element,gE.DRAG_ENTER,(e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter?.(e)}))),this._register(EL(this.element,gE.DRAG_OVER,(e=>{e.preventDefault(),this.callbacks.onDragOver?.(e,e.timeStamp-this.dragStartTime)}))),this._register(EL(this.element,gE.DRAG_LEAVE,(e=>{this.counter--,0===this.counter&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(e))}))),this._register(EL(this.element,gE.DRAG_END,(e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(e)}))),this._register(EL(this.element,gE.DROP,(e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(e)})))}}const PE=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function OE(e){let t,i;Array.isArray(arguments.length<=1?void 0:arguments[1])?(t={},i=arguments.length<=1?void 0:arguments[1]):(t=(arguments.length<=1?void 0:arguments[1])||{},i=arguments.length<=2?void 0:arguments[2]);const n=PE.exec(e);if(!n||!n.groups)throw new Error("Bad use of h");const s=n.groups.tag||"div",r=document.createElement(s);n.groups.id&&(r.id=n.groups.id);const o=[];if(n.groups.class)for(const l of n.groups.class.split("."))""!==l&&o.push(l);if(void 0!==t.className)for(const l of t.className.split("."))""!==l&&o.push(l);o.length>0&&(r.className=o.join(" "));const a={};if(n.groups.name&&(a[n.groups.name]=r),i)for(const l of i)hE(l)?r.appendChild(l):"string"===typeof l?r.append(l):"root"in l&&(Object.assign(a,l),r.appendChild(l.root));for(const[l,h]of Object.entries(t))if("className"!==l)if("style"===l)for(const[e,t]of Object.entries(h))r.style.setProperty(FE(e),"number"===typeof t?t+"px":""+t);else"tabIndex"===l?r.tabIndex=h:r.setAttribute(FE(l),h.toString());return a.root=r,a}function FE(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class BE extends Mx.jG{constructor(e){super(),this._onDidChange=this._register(new rk.vl),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class zE extends Mx.jG{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new rk.vl),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new BE(e));this._register(t.onDidChange((()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)})))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d");return(e.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}}const VE=new class{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=bL(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=(0,Mx.lC)(new zE(e)),this.mapWindowIdToPixelRatioMonitor.set(t,i),(0,Mx.lC)(rk.Jh.once(xL)((e=>{let{vscodeWindowId:n}=e;n===t&&(i?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})))),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}};class WE{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=HE(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=HE(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=HE(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=HE(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=HE(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=HE(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=HE(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=HE(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=HE(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=HE(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=HE(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function HE(e){return"number"===typeof e?`${e}px`:e}function UE(e){return new WE(e)}function jE(e,t){e instanceof WE?(e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setFontVariationSettings(t.fontVariationSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)):(e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.fontVariationSettings=t.fontVariationSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px")}class GE{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class KE{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");jE(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");jE(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const n=document.createElement("div");jE(n,this._bareFontInfo),n.style.fontStyle="italic",e.appendChild(n);const s=[];for(const r of this._requests){let e;0===r.type&&(e=t),2===r.type&&(e=i),1===r.type&&(e=n),e.appendChild(document.createElement("br"));const o=document.createElement("span");KE._render(o,r),e.appendChild(o),s.push(o)}this._container=e,this._testElements=s}static _render(e,t){if(" "===t.chr){let t="\xa0";for(let e=0;e<8;e++)t+=t;e.innerText=t}else{let i=t.chr;for(let e=0;e<8;e++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const t=this._requests[e],i=this._testElements[e];t.fulfill(i.offsetWidth/256)}}}const $E=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new rk.vl,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},qE=BS.zx?1.5:1.35;class QE{static createFromValidatedSettings(e,t,i){const n=e.get(49),s=e.get(53),r=e.get(52),o=e.get(51),a=e.get(54),l=e.get(67),h=e.get(64);return QE._create(n,s,r,o,a,l,h,t,i)}static _create(e,t,i,n,s,r,o,a,l){0===r?r=qE*i:r<8&&(r*=i),(r=Math.round(r))<8&&(r=8);const h=1+(l?0:.1*$E.getZoomLevel());if(i*=h,r*=h,s===lx.TRANSLATE)if("normal"===t||"bold"===t)s=lx.OFF;else{s=`'wght' ${parseInt(t,10)}`,t="normal"}return new QE({pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,fontVariationSettings:s,lineHeight:r,letterSpacing:o})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=0|e.lineHeight,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Cx.fontFamily,t=QE._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}class XE extends QE{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class YE extends Mx.jG{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new rk.vl),this.onDidChange=this._onDidChange.event}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=bL(e);let i=this._cache.get(t);return i||(i=new ZE,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),i.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=e.setTimeout((()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)}),5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let n=!1;for(const s of i)s.isTrusted||(n=!0,t.remove(s));n&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let i=this._actualReadFontInfo(e,t);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new XE({pixelRatio:VE.getInstance(e).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,t,i)}return i.get(t)}_createRequest(e,t,i,n){const s=new GE(e,t);return i.push(s),n?.push(s),s}_actualReadFontInfo(e,t){const i=[],n=[],s=this._createRequest("n",0,i,n),r=this._createRequest("\uff4d",0,i,null),o=this._createRequest(" ",0,i,n),a=this._createRequest("0",0,i,n),l=this._createRequest("1",0,i,n),h=this._createRequest("2",0,i,n),c=this._createRequest("3",0,i,n),d=this._createRequest("4",0,i,n),u=this._createRequest("5",0,i,n),g=this._createRequest("6",0,i,n),p=this._createRequest("7",0,i,n),f=this._createRequest("8",0,i,n),m=this._createRequest("9",0,i,n),_=this._createRequest("\u2192",0,i,n),v=this._createRequest("\uffeb",0,i,null),b=this._createRequest("\xb7",0,i,n),y=this._createRequest(String.fromCharCode(11825),0,i,null),w="|/-_ilm%";for(let L=0,E=8;L<E;L++)this._createRequest(w.charAt(L),0,i,n),this._createRequest(w.charAt(L),1,i,n),this._createRequest(w.charAt(L),2,i,n);!function(e,t,i){new KE(t,i).read(e)}(e,t,i);const C=Math.max(a.width,l.width,h.width,c.width,d.width,u.width,g.width,p.width,f.width,m.width);let S=t.fontFeatureSettings===ax.OFF;const x=n[0].width;for(let L=1,E=n.length;S&&L<E;L++){const e=x-n[L].width;if(e<-.001||e>.001){S=!1;break}}let k=!0;return S&&v.width!==x&&(k=!1),v.width>_.width&&(k=!1),new XE({pixelRatio:VE.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:k,spaceWidth:o.width,middotWidth:b.width,wsmiddotWidth:y.width,maxDigitWidth:C},!0)}}class ZE{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map((e=>this._values[e]))}}const JE=new YE;var eM=i(9398);const tM=(0,eM.u1)("codeEditorService");var iM=i(2597),nM=i(3537);class sM extends Mx.jG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;super(),this._onDidChange=this._register(new rk.vl),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class rM extends Mx.jG{constructor(){super(...arguments),this._onWillRun=this._register(new rk.vl),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new rk.vl),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;let i;this._onWillRun.fire({action:e});try{await this.runAction(e,t)}catch(O2){i=O2}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}class oM{constructor(){this.id=oM.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(){let e=[];for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(const s of i)s.length&&(e=e.length?[...e,new oM,...s]:s);return e}static#e=(()=>this.ID="vs.actions.separator")();async run(){}}class aM{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}}class lM extends sM{static#e=(()=>this.ID="vs.actions.empty")();constructor(){super(lM.ID,WS.kg("submenu.empty","(empty)"),void 0,!1)}}function hM(e){return{id:e.id,label:e.label,tooltip:e.tooltip??e.label,class:e.class,enabled:e.enabled??!0,checked:e.checked,run:async function(){return e.run(...arguments)}}}var cM=i(7824),dM=i(2194),uM=i(8353),gM=i(4622);const pM=(0,eM.u1)("commandService"),fM=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new rk.vl,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"===typeof e){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const t=[];for(const n of e.metadata.args)t.push(n.constraint);const i=e.handler;e.handler=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return(0,gM.jx)(s,t),i(e,...s)}}const{id:i}=e;let n=this._commands.get(i);n||(n=new dM.w,this._commands.set(i,n));const s=n.unshift(e),r=(0,Mx.s)((()=>{s();const e=this._commands.get(i);e?.isEmpty()&&this._commands.delete(i)}));return this._onDidRegisterCommand.fire(i),r}registerCommandAlias(e,t){return fM.registerCommand(e,(function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.get(pM).executeCommand(t,...n)}))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return uM.f.first(t)}getCommands(){const e=new Map;for(const t of this._commands.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};fM.registerCommand("noop",(()=>{}));var mM=i(7039),_M=i(5050);class vM{constructor(){this._coreKeybindings=new dM.w,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(1===BS.OS){if(e&&e.win)return e.win}else if(2===BS.OS){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=vM.bindToCurrentPlatform(e),i=new Mx.Cm;if(t&&t.primary){const n=jx(t.primary,BS.OS);n&&i.add(this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let n=0,s=t.secondary.length;n<s;n++){const s=jx(t.secondary[n],BS.OS);s&&i.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-n-1,e.when))}return i}registerCommandAndKeybindingRule(e){return(0,Mx.qE)(this.registerKeybindingRule(e),fM.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,s,r){const o=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:n,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,(0,Mx.s)((()=>{o(),this._cachedMergedKeybindings=null}))}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(yM)),this._cachedMergedKeybindings.slice(0)}}const bM=new vM;function yM(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}_M.O.add("platform.keybindingsRegistry",bM);var wM,CM=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},SM=function(e,t){return function(i,n){t(i,n,e)}};function xM(e){return void 0!==e.command}class kM{static#e=(()=>this._instances=new Map)();static#t=(()=>this.CommandPalette=new kM("CommandPalette"))();static#i=(()=>this.DebugBreakpointsContext=new kM("DebugBreakpointsContext"))();static#n=(()=>this.DebugCallStackContext=new kM("DebugCallStackContext"))();static#s=(()=>this.DebugConsoleContext=new kM("DebugConsoleContext"))();static#r=(()=>this.DebugVariablesContext=new kM("DebugVariablesContext"))();static#o=(()=>this.NotebookVariablesContext=new kM("NotebookVariablesContext"))();static#a=(()=>this.DebugHoverContext=new kM("DebugHoverContext"))();static#l=(()=>this.DebugWatchContext=new kM("DebugWatchContext"))();static#h=(()=>this.DebugToolBar=new kM("DebugToolBar"))();static#c=(()=>this.DebugToolBarStop=new kM("DebugToolBarStop"))();static#d=(()=>this.DebugCallStackToolbar=new kM("DebugCallStackToolbar"))();static#u=(()=>this.DebugCreateConfiguration=new kM("DebugCreateConfiguration"))();static#g=(()=>this.EditorContext=new kM("EditorContext"))();static#p=(()=>this.SimpleEditorContext=new kM("SimpleEditorContext"))();static#f=(()=>this.EditorContent=new kM("EditorContent"))();static#m=(()=>this.EditorLineNumberContext=new kM("EditorLineNumberContext"))();static#_=(()=>this.EditorContextCopy=new kM("EditorContextCopy"))();static#v=(()=>this.EditorContextPeek=new kM("EditorContextPeek"))();static#b=(()=>this.EditorContextShare=new kM("EditorContextShare"))();static#y=(()=>this.EditorTitle=new kM("EditorTitle"))();static#w=(()=>this.EditorTitleRun=new kM("EditorTitleRun"))();static#C=(()=>this.EditorTitleContext=new kM("EditorTitleContext"))();static#S=(()=>this.EditorTitleContextShare=new kM("EditorTitleContextShare"))();static#x=(()=>this.EmptyEditorGroup=new kM("EmptyEditorGroup"))();static#k=(()=>this.EmptyEditorGroupContext=new kM("EmptyEditorGroupContext"))();static#L=(()=>this.EditorTabsBarContext=new kM("EditorTabsBarContext"))();static#E=(()=>this.EditorTabsBarShowTabsSubmenu=new kM("EditorTabsBarShowTabsSubmenu"))();static#M=(()=>this.EditorTabsBarShowTabsZenModeSubmenu=new kM("EditorTabsBarShowTabsZenModeSubmenu"))();static#T=(()=>this.EditorActionsPositionSubmenu=new kM("EditorActionsPositionSubmenu"))();static#D=(()=>this.ExplorerContext=new kM("ExplorerContext"))();static#N=(()=>this.ExplorerContextShare=new kM("ExplorerContextShare"))();static#I=(()=>this.ExtensionContext=new kM("ExtensionContext"))();static#A=(()=>this.GlobalActivity=new kM("GlobalActivity"))();static#R=(()=>this.CommandCenter=new kM("CommandCenter"))();static#P=(()=>this.CommandCenterCenter=new kM("CommandCenterCenter"))();static#O=(()=>this.LayoutControlMenuSubmenu=new kM("LayoutControlMenuSubmenu"))();static#F=(()=>this.LayoutControlMenu=new kM("LayoutControlMenu"))();static#B=(()=>this.MenubarMainMenu=new kM("MenubarMainMenu"))();static#z=(()=>this.MenubarAppearanceMenu=new kM("MenubarAppearanceMenu"))();static#V=(()=>this.MenubarDebugMenu=new kM("MenubarDebugMenu"))();static#W=(()=>this.MenubarEditMenu=new kM("MenubarEditMenu"))();static#H=(()=>this.MenubarCopy=new kM("MenubarCopy"))();static#U=(()=>this.MenubarFileMenu=new kM("MenubarFileMenu"))();static#j=(()=>this.MenubarGoMenu=new kM("MenubarGoMenu"))();static#G=(()=>this.MenubarHelpMenu=new kM("MenubarHelpMenu"))();static#K=(()=>this.MenubarLayoutMenu=new kM("MenubarLayoutMenu"))();static#$=(()=>this.MenubarNewBreakpointMenu=new kM("MenubarNewBreakpointMenu"))();static#q=(()=>this.PanelAlignmentMenu=new kM("PanelAlignmentMenu"))();static#Q=(()=>this.PanelPositionMenu=new kM("PanelPositionMenu"))();static#X=(()=>this.ActivityBarPositionMenu=new kM("ActivityBarPositionMenu"))();static#Y=(()=>this.MenubarPreferencesMenu=new kM("MenubarPreferencesMenu"))();static#Z=(()=>this.MenubarRecentMenu=new kM("MenubarRecentMenu"))();static#J=(()=>this.MenubarSelectionMenu=new kM("MenubarSelectionMenu"))();static#ee=(()=>this.MenubarShare=new kM("MenubarShare"))();static#te=(()=>this.MenubarSwitchEditorMenu=new kM("MenubarSwitchEditorMenu"))();static#ie=(()=>this.MenubarSwitchGroupMenu=new kM("MenubarSwitchGroupMenu"))();static#ne=(()=>this.MenubarTerminalMenu=new kM("MenubarTerminalMenu"))();static#se=(()=>this.MenubarViewMenu=new kM("MenubarViewMenu"))();static#re=(()=>this.MenubarHomeMenu=new kM("MenubarHomeMenu"))();static#oe=(()=>this.OpenEditorsContext=new kM("OpenEditorsContext"))();static#ae=(()=>this.OpenEditorsContextShare=new kM("OpenEditorsContextShare"))();static#le=(()=>this.ProblemsPanelContext=new kM("ProblemsPanelContext"))();static#he=(()=>this.SCMInputBox=new kM("SCMInputBox"))();static#ce=(()=>this.SCMChangesSeparator=new kM("SCMChangesSeparator"))();static#de=(()=>this.SCMChangesContext=new kM("SCMChangesContext"))();static#ue=(()=>this.SCMIncomingChanges=new kM("SCMIncomingChanges"))();static#ge=(()=>this.SCMIncomingChangesContext=new kM("SCMIncomingChangesContext"))();static#pe=(()=>this.SCMIncomingChangesSetting=new kM("SCMIncomingChangesSetting"))();static#fe=(()=>this.SCMOutgoingChanges=new kM("SCMOutgoingChanges"))();static#me=(()=>this.SCMOutgoingChangesContext=new kM("SCMOutgoingChangesContext"))();static#_e=(()=>this.SCMOutgoingChangesSetting=new kM("SCMOutgoingChangesSetting"))();static#ve=(()=>this.SCMIncomingChangesAllChangesContext=new kM("SCMIncomingChangesAllChangesContext"))();static#be=(()=>this.SCMIncomingChangesHistoryItemContext=new kM("SCMIncomingChangesHistoryItemContext"))();static#ye=(()=>this.SCMOutgoingChangesAllChangesContext=new kM("SCMOutgoingChangesAllChangesContext"))();static#we=(()=>this.SCMOutgoingChangesHistoryItemContext=new kM("SCMOutgoingChangesHistoryItemContext"))();static#Ce=(()=>this.SCMChangeContext=new kM("SCMChangeContext"))();static#Se=(()=>this.SCMResourceContext=new kM("SCMResourceContext"))();static#xe=(()=>this.SCMResourceContextShare=new kM("SCMResourceContextShare"))();static#ke=(()=>this.SCMResourceFolderContext=new kM("SCMResourceFolderContext"))();static#Le=(()=>this.SCMResourceGroupContext=new kM("SCMResourceGroupContext"))();static#Ee=(()=>this.SCMSourceControl=new kM("SCMSourceControl"))();static#Me=(()=>this.SCMSourceControlInline=new kM("SCMSourceControlInline"))();static#Te=(()=>this.SCMSourceControlTitle=new kM("SCMSourceControlTitle"))();static#De=(()=>this.SCMHistoryTitle=new kM("SCMHistoryTitle"))();static#Ne=(()=>this.SCMTitle=new kM("SCMTitle"))();static#Ie=(()=>this.SearchContext=new kM("SearchContext"))();static#Ae=(()=>this.SearchActionMenu=new kM("SearchActionContext"))();static#Re=(()=>this.StatusBarWindowIndicatorMenu=new kM("StatusBarWindowIndicatorMenu"))();static#Pe=(()=>this.StatusBarRemoteIndicatorMenu=new kM("StatusBarRemoteIndicatorMenu"))();static#Oe=(()=>this.StickyScrollContext=new kM("StickyScrollContext"))();static#Fe=(()=>this.TestItem=new kM("TestItem"))();static#Be=(()=>this.TestItemGutter=new kM("TestItemGutter"))();static#ze=(()=>this.TestProfilesContext=new kM("TestProfilesContext"))();static#Ve=(()=>this.TestMessageContext=new kM("TestMessageContext"))();static#We=(()=>this.TestMessageContent=new kM("TestMessageContent"))();static#He=(()=>this.TestPeekElement=new kM("TestPeekElement"))();static#Ue=(()=>this.TestPeekTitle=new kM("TestPeekTitle"))();static#je=(()=>this.TestCallStack=new kM("TestCallStack"))();static#Ge=(()=>this.TouchBarContext=new kM("TouchBarContext"))();static#Ke=(()=>this.TitleBarContext=new kM("TitleBarContext"))();static#$e=(()=>this.TitleBarTitleContext=new kM("TitleBarTitleContext"))();static#qe=(()=>this.TunnelContext=new kM("TunnelContext"))();static#Qe=(()=>this.TunnelPrivacy=new kM("TunnelPrivacy"))();static#Xe=(()=>this.TunnelProtocol=new kM("TunnelProtocol"))();static#Ye=(()=>this.TunnelPortInline=new kM("TunnelInline"))();static#Ze=(()=>this.TunnelTitle=new kM("TunnelTitle"))();static#Je=(()=>this.TunnelLocalAddressInline=new kM("TunnelLocalAddressInline"))();static#et=(()=>this.TunnelOriginInline=new kM("TunnelOriginInline"))();static#tt=(()=>this.ViewItemContext=new kM("ViewItemContext"))();static#it=(()=>this.ViewContainerTitle=new kM("ViewContainerTitle"))();static#nt=(()=>this.ViewContainerTitleContext=new kM("ViewContainerTitleContext"))();static#st=(()=>this.ViewTitle=new kM("ViewTitle"))();static#rt=(()=>this.ViewTitleContext=new kM("ViewTitleContext"))();static#ot=(()=>this.CommentEditorActions=new kM("CommentEditorActions"))();static#at=(()=>this.CommentThreadTitle=new kM("CommentThreadTitle"))();static#lt=(()=>this.CommentThreadActions=new kM("CommentThreadActions"))();static#ht=(()=>this.CommentThreadAdditionalActions=new kM("CommentThreadAdditionalActions"))();static#ct=(()=>this.CommentThreadTitleContext=new kM("CommentThreadTitleContext"))();static#dt=(()=>this.CommentThreadCommentContext=new kM("CommentThreadCommentContext"))();static#ut=(()=>this.CommentTitle=new kM("CommentTitle"))();static#gt=(()=>this.CommentActions=new kM("CommentActions"))();static#pt=(()=>this.CommentsViewThreadActions=new kM("CommentsViewThreadActions"))();static#ft=(()=>this.InteractiveToolbar=new kM("InteractiveToolbar"))();static#mt=(()=>this.InteractiveCellTitle=new kM("InteractiveCellTitle"))();static#_t=(()=>this.InteractiveCellDelete=new kM("InteractiveCellDelete"))();static#vt=(()=>this.InteractiveCellExecute=new kM("InteractiveCellExecute"))();static#bt=(()=>this.InteractiveInputExecute=new kM("InteractiveInputExecute"))();static#yt=(()=>this.InteractiveInputConfig=new kM("InteractiveInputConfig"))();static#wt=(()=>this.ReplInputExecute=new kM("ReplInputExecute"))();static#Ct=(()=>this.IssueReporter=new kM("IssueReporter"))();static#St=(()=>this.NotebookToolbar=new kM("NotebookToolbar"))();static#xt=(()=>this.NotebookStickyScrollContext=new kM("NotebookStickyScrollContext"))();static#kt=(()=>this.NotebookCellTitle=new kM("NotebookCellTitle"))();static#Lt=(()=>this.NotebookCellDelete=new kM("NotebookCellDelete"))();static#Et=(()=>this.NotebookCellInsert=new kM("NotebookCellInsert"))();static#Mt=(()=>this.NotebookCellBetween=new kM("NotebookCellBetween"))();static#Tt=(()=>this.NotebookCellListTop=new kM("NotebookCellTop"))();static#Dt=(()=>this.NotebookCellExecute=new kM("NotebookCellExecute"))();static#Nt=(()=>this.NotebookCellExecuteGoTo=new kM("NotebookCellExecuteGoTo"))();static#It=(()=>this.NotebookCellExecutePrimary=new kM("NotebookCellExecutePrimary"))();static#At=(()=>this.NotebookDiffCellInputTitle=new kM("NotebookDiffCellInputTitle"))();static#Rt=(()=>this.NotebookDiffCellMetadataTitle=new kM("NotebookDiffCellMetadataTitle"))();static#Pt=(()=>this.NotebookDiffCellOutputsTitle=new kM("NotebookDiffCellOutputsTitle"))();static#Ot=(()=>this.NotebookOutputToolbar=new kM("NotebookOutputToolbar"))();static#Ft=(()=>this.NotebookOutlineFilter=new kM("NotebookOutlineFilter"))();static#Bt=(()=>this.NotebookOutlineActionMenu=new kM("NotebookOutlineActionMenu"))();static#zt=(()=>this.NotebookEditorLayoutConfigure=new kM("NotebookEditorLayoutConfigure"))();static#Vt=(()=>this.NotebookKernelSource=new kM("NotebookKernelSource"))();static#Wt=(()=>this.BulkEditTitle=new kM("BulkEditTitle"))();static#Ht=(()=>this.BulkEditContext=new kM("BulkEditContext"))();static#Ut=(()=>this.TimelineItemContext=new kM("TimelineItemContext"))();static#jt=(()=>this.TimelineTitle=new kM("TimelineTitle"))();static#Gt=(()=>this.TimelineTitleContext=new kM("TimelineTitleContext"))();static#Kt=(()=>this.TimelineFilterSubMenu=new kM("TimelineFilterSubMenu"))();static#$t=(()=>this.AccountsContext=new kM("AccountsContext"))();static#qt=(()=>this.SidebarTitle=new kM("SidebarTitle"))();static#Qt=(()=>this.PanelTitle=new kM("PanelTitle"))();static#Xt=(()=>this.AuxiliaryBarTitle=new kM("AuxiliaryBarTitle"))();static#Yt=(()=>this.AuxiliaryBarHeader=new kM("AuxiliaryBarHeader"))();static#Zt=(()=>this.TerminalInstanceContext=new kM("TerminalInstanceContext"))();static#Jt=(()=>this.TerminalEditorInstanceContext=new kM("TerminalEditorInstanceContext"))();static#ei=(()=>this.TerminalNewDropdownContext=new kM("TerminalNewDropdownContext"))();static#ti=(()=>this.TerminalTabContext=new kM("TerminalTabContext"))();static#ii=(()=>this.TerminalTabEmptyAreaContext=new kM("TerminalTabEmptyAreaContext"))();static#ni=(()=>this.TerminalStickyScrollContext=new kM("TerminalStickyScrollContext"))();static#si=(()=>this.WebviewContext=new kM("WebviewContext"))();static#ri=(()=>this.InlineCompletionsActions=new kM("InlineCompletionsActions"))();static#oi=(()=>this.InlineEditsActions=new kM("InlineEditsActions"))();static#ai=(()=>this.InlineEditActions=new kM("InlineEditActions"))();static#li=(()=>this.NewFile=new kM("NewFile"))();static#hi=(()=>this.MergeInput1Toolbar=new kM("MergeToolbar1Toolbar"))();static#ci=(()=>this.MergeInput2Toolbar=new kM("MergeToolbar2Toolbar"))();static#di=(()=>this.MergeBaseToolbar=new kM("MergeBaseToolbar"))();static#ui=(()=>this.MergeInputResultToolbar=new kM("MergeToolbarResultToolbar"))();static#gi=(()=>this.InlineSuggestionToolbar=new kM("InlineSuggestionToolbar"))();static#pi=(()=>this.InlineEditToolbar=new kM("InlineEditToolbar"))();static#fi=(()=>this.ChatContext=new kM("ChatContext"))();static#mi=(()=>this.ChatCodeBlock=new kM("ChatCodeblock"))();static#_i=(()=>this.ChatCompareBlock=new kM("ChatCompareBlock"))();static#vi=(()=>this.ChatMessageTitle=new kM("ChatMessageTitle"))();static#bi=(()=>this.ChatExecute=new kM("ChatExecute"))();static#yi=(()=>this.ChatExecuteSecondary=new kM("ChatExecuteSecondary"))();static#wi=(()=>this.ChatInputSide=new kM("ChatInputSide"))();static#Ci=(()=>this.AccessibleView=new kM("AccessibleView"))();static#Si=(()=>this.MultiDiffEditorFileToolbar=new kM("MultiDiffEditorFileToolbar"))();static#xi=(()=>this.DiffEditorHunkToolbar=new kM("DiffEditorHunkToolbar"))();static#ki=(()=>this.DiffEditorSelectionToolbar=new kM("DiffEditorSelectionToolbar"))();constructor(e){if(kM._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);kM._instances.set(e,this),this.id=e}}const LM=(0,eM.u1)("menuService");class EM{static#e=(()=>this._all=new Map)();static for(e){let t=this._all.get(e);return t||(t=new EM(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof EM&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}const MM=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new rk.QT({merge:EM.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(e){return this._commands.set(e.id,e),this._onDidChangeMenu.fire(EM.for(kM.CommandPalette)),(0,Mx.s)((()=>{this._commands.delete(e.id)&&this._onDidChangeMenu.fire(EM.for(kM.CommandPalette))}))}getCommand(e){return this._commands.get(e)}getCommands(){const e=new Map;return this._commands.forEach(((t,i)=>e.set(i,t))),e}appendMenuItem(e,t){let i=this._menuItems.get(e);i||(i=new dM.w,this._menuItems.set(e,i));const n=i.push(t);return this._onDidChangeMenu.fire(EM.for(e)),(0,Mx.s)((()=>{n(),this._onDidChangeMenu.fire(EM.for(e))}))}appendMenuItems(e){const t=new Mx.Cm;for(const{id:i,item:n}of e)t.add(this.appendMenuItem(i,n));return t}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===kM.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){const t=new Set;for(const i of e)xM(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this._commands.forEach(((i,n)=>{t.has(n)||e.push({command:i})}))}};class TM extends aM{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,"string"===typeof e.title?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let DM=wM=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?"string"===typeof e.shortTitle?e.shortTitle:e.shortTitle.value:"string"===typeof e.title?e.title:e.title.value}constructor(e,t,i,n,s,r,o){let a;if(this.hideActions=n,this.menuKeybinding=s,this._commandService=o,this.id=e.id,this.label=wM.label(e,i),this.tooltip=("string"===typeof e.tooltip?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const t=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(t.condition),this.checked&&t.tooltip&&(this.tooltip="string"===typeof t.tooltip?t.tooltip:t.tooltip.value),this.checked&&cM.L.isThemeIcon(t.icon)&&(a=t.icon),this.checked&&t.title&&(this.label="string"===typeof t.title?t.title:t.title.value)}a||(a=cM.L.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new wM(t,void 0,i,n,void 0,r,o):void 0,this._options=i,this.class=a&&cM.L.asClassName(a)}run(){let e=[];if(this._options?.arg&&(e=[...e,this._options.arg]),this._options?.shouldForwardArgs){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e=[...e,...i]}return this._commandService.executeCommand(this.id,...e)}};DM=wM=CM([SM(5,mM.fN),SM(6,pM)],DM);const NM=(0,eM.u1)("telemetryService");var IM,AM=i(4888);class RM{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let e=t.kbExpr;this.precondition&&(e=e?mM.M$.and(e,this.precondition):this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};bM.registerKeybindingRule(i)}}fM.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){MM.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class PM extends RM{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort(((e,t)=>t.priority-e.priority)),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i)return void this._implementations.splice(e,1)}}}runCommand(e,t){const i=e.get(AM.rr),n=e.get(mM.fN);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const e=n.getContext(XL());if(!s.when.evaluate(e))continue}const r=s.implementation(e,t);if(r){if(i.trace(`Command '${this.id}' was handled by '${s.name}'.`),"boolean"===typeof r)return;return r}}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class OM extends RM{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class FM extends RM{static bindToContribution(e){return class extends FM{constructor(e){super(e),this._callback=e.handler}runEditorCommand(t,i,n){const s=e(i);s&&this._callback(s,n)}}}static runEditorCommand(e,t,i,n){const s=e.get(tM),r=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(r)return r.invokeWithinContext((e=>{if(e.get(mM.fN).contextMatchesRules(i??void 0))return n(e,r,t)}))}runCommand(e,t){return FM.runEditorCommand(e,t,this.precondition,((e,t,i)=>this.runEditorCommand(e,t,i)))}}function BM(e){return VM.INSTANCE.registerEditorCommand(e),e}function zM(e,t,i){VM.INSTANCE.registerEditorContribution(e,t,i)}!function(e){e.getEditorCommand=function(e){return VM.INSTANCE.getEditorCommand(e)},e.getEditorActions=function(){return VM.INSTANCE.getEditorActions()},e.getEditorContributions=function(){return VM.INSTANCE.getEditorContributions()},e.getSomeEditorContributions=function(e){return VM.INSTANCE.getEditorContributions().filter((t=>e.indexOf(t.id)>=0))},e.getDiffEditorContributions=function(){return VM.INSTANCE.getDiffEditorContributions()}}(IM||(IM={}));class VM{static#e=(()=>this.INSTANCE=new VM)();constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}function WM(e){return e.register(),e}_M.O.add("editor.contributions",VM.INSTANCE);const HM=WM(new PM({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:kM.MenubarEditMenu,group:"1_do",title:WS.kg({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:kM.CommandPalette,group:"",title:WS.kg("undo","Undo"),order:1}]}));WM(new OM(HM,{id:"default:undo",precondition:void 0}));const UM=WM(new PM({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:kM.MenubarEditMenu,group:"1_do",title:WS.kg({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:kM.CommandPalette,group:"",title:WS.kg("redo","Redo"),order:1}]}));WM(new OM(UM,{id:"default:redo",precondition:void 0}));const jM=WM(new PM({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:kM.MenubarSelectionMenu,group:"1_basic",title:WS.kg({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:kM.CommandPalette,group:"",title:WS.kg("selectAll","Select All"),order:1}]}));var GM=i(8964);function KM(e,t){const i=globalThis.MonacoEnvironment;if(i?.createTrustedTypesPolicy)try{return i.createTrustedTypesPolicy(e,t)}catch(n){return void(0,Ux.dz)(n)}try{return globalThis.trustedTypes?.createPolicy(e,t)}catch(n){return void(0,Ux.dz)(n)}}const $M=!0;let qM;function QM(e,t){const i=globalThis.MonacoEnvironment;if(i){if("function"===typeof i.getWorker)return i.getWorker("workerMain.js",t);if("function"===typeof i.getWorkerUrl){const e=i.getWorkerUrl("workerMain.js",t);return new Worker(qM?qM.createScriptURL(e):e,{name:t,type:$M?"module":void 0})}}if(e){const i=function(e,t,i){const n=/^((http:)|(https:)|(file:)|(vscode-file:))/.test(t);if(n&&t.substring(0,globalThis.origin.length)!==globalThis.origin);else{const i=t.lastIndexOf("?"),n=t.lastIndexOf("#",i),s=i>0?new URLSearchParams(t.substring(i+1,~n?n:void 0)):new URLSearchParams;uL.SJ.addSearchParam(s,!0,!0);t=s.toString()?`${t}?${s.toString()}#${e}`:`${t}#${e}`}$M||n||(t=new URL(t,globalThis.origin).toString());const s=new Blob([(0,OS.Yc)([`/*${e}*/`,i?`globalThis.MonacoEnvironment = { baseUrl: '${i}' };`:void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify((0,WS.Ec)())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify((0,WS.i8)())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",$M?`await import(ttPolicy?.createScriptURL('${t}') ?? '${t}');`:`importScripts(ttPolicy?.createScriptURL('${t}') ?? '${t}');`,$M?"globalThis.postMessage({ type: 'vscode-worker-ready' });":void 0,`/*${e}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(s)}(t,e.toString(!0)),n=new Worker(qM?qM.createScriptURL(i):i,{name:t,type:$M?"module":void 0});return $M?function(e){return new Promise(((t,i)=>{e.onmessage=function(i){"vscode-worker-ready"===i.data.type&&(e.onmessage=null,t(e))},e.onerror=i}))}(n):n}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}qM="object"===typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name&&void 0!==globalThis.workerttPolicy?globalThis.workerttPolicy:KM("defaultWorkerFactory",{createScriptURL:e=>e});class XM extends Mx.jG{constructor(e,t,i,n,s,r){super(),this.id=i,this.label=n;const o=QM(e,n);"function"===typeof o.then?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(t,[]),this.worker.then((e=>{e.onmessage=function(e){s(e.data)},e.onmessageerror=r,"function"===typeof e.addEventListener&&e.addEventListener("error",r)})),this._register((0,Mx.s)((()=>{this.worker?.then((e=>{e.onmessage=null,e.onmessageerror=null,e.removeEventListener("error",r),e.terminate()})),this.worker=null})))}getId(){return this.id}postMessage(e,t){this.worker?.then((i=>{try{i.postMessage(e,t)}catch(n){(0,Ux.dz)(n),(0,Ux.dz)(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:n}))}}))}}class YM{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=$M?uL.zl.asBrowserUri(`${e}.esm.js`):void 0}}class ZM{static#e=(()=>this.LAST_WORKER_ID=0)();constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const n=++ZM.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new XM(e.esmModuleLocation,e.amdModuleId,n,e.label||"anonymous"+n,t,(e=>{(0,GM.logOnceWebWorkerWarning)(e),this._webWorkerFailedBeforeError=e,i(e)}))}}var JM=i(5902),eT=i(787),tT=i(104),iT=i(683),nT=i(1340),sT=i(8715),rT=i(810),oT=i(3534),aT=i(6612),lT=i(5212),hT=i(9487),cT=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},dT=function(e,t){return function(i,n){t(i,n,e)}};const uT=3e5;function gT(e,t){const i=e.getModel(t);return!!i&&!i.isTooLargeForSyncing()}let pT=class extends Mx.jG{constructor(e,t,i,n,s,r){super(),this._languageConfigurationService=s,this._modelService=t,this._workerManager=this._register(new mT(e,this._modelService)),this._logService=n,this._register(r.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(e,t)=>{if(!gT(this._modelService,e.uri))return Promise.resolve({links:[]});const i=await this._workerWithResources([e.uri]),n=await i.$computeLinks(e.uri.toString());return n&&{links:n}}})),this._register(r.completionProvider.register("*",new fT(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return gT(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,n){const s=await this._workerWithResources([e,t],!0),r=await s.$computeDiff(e.toString(),t.toString(),i,n);if(!r)return null;return{identical:r.identical,quitEarly:r.quitEarly,changes:o(r.changes),moves:r.moves.map((e=>new rT.t(new oT.WL(new aT.M(e[0],e[1]),new aT.M(e[2],e[3])),o(e[4]))))};function o(e){return e.map((e=>new oT.wm(new aT.M(e[0],e[1]),new aT.M(e[2],e[3]),e[4]?.map((e=>new oT.q6(new JM.Q(e[0],e[1],e[2],e[3]),new JM.Q(e[4],e[5],e[6],e[7])))))))}}async computeMoreMinimalEdits(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,OS.EI)(t)){if(!gT(this._modelService,e))return Promise.resolve(t);const n=nT.W.create(),s=this._workerWithResources([e]).then((n=>n.$computeMoreMinimalEdits(e.toString(),t,i)));return s.finally((()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed()))),Promise.race([s,(0,sk.wR)(1e3).then((()=>t))])}return Promise.resolve(void 0)}canNavigateValueSet(e){return gT(this._modelService,e)}async navigateValueSet(e,t,i){const n=this._modelService.getModel(e);if(!n)return null;const s=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=s.source,o=s.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,r,o)}canComputeWordRanges(e){return gT(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const n=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),s=n.source,r=n.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,s,r)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=await this._workerManager.withWorker();return await i.workerWithSyncedResources(e,t)}};pT=cT([dT(1,iM.IModelService),dT(2,iT.ITextResourceConfigurationService),dT(3,AM.rr),dT(4,eT.JZ),dT(5,sT.ILanguageFeaturesService)],pT);class fT{constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if("off"===i.wordBasedSuggestions)return;const n=[];if("currentDocument"===i.wordBasedSuggestions)gT(this._modelService,e.uri)&&n.push(e.uri);else for(const c of this._modelService.getModels())gT(this._modelService,c.uri)&&(c===e?n.unshift(c.uri):"allDocuments"!==i.wordBasedSuggestions&&c.getLanguageId()!==e.getLanguageId()||n.push(c.uri));if(0===n.length)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),o=r?new JM.Q(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):JM.Q.fromPositions(t),a=o.setEndPosition(t.lineNumber,t.column),l=await this._workerManager.withWorker(),h=await l.textualSuggest(n,r?.word,s);return h?{duration:h.duration,suggestions:h.words.map((e=>({kind:18,label:e,insertText:e,range:{insert:a,replace:o}})))}:void 0}}let mT=class extends Mx.jG{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=(new Date).getTime();this._register(new AL).cancelAndSet((()=>this._checkStopIdleWorker()),Math.round(15e4),Ex),this._register(this._modelService.onModelRemoved((e=>this._checkStopEmptyWorker())))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;0===this._modelService.getModels().length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;(new Date).getTime()-this._lastWorkerUsedTime>uT&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new vT(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};mT=cT([dT(1,iM.IModelService)],mT);class _T{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let vT=class extends Mx.jG{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(function(e,t){const i="string"===typeof e?new YM(e,t):e;return new GM.SimpleWorkerClient(new ZM,i)}(this._workerDescriptor)),hT.EditorWorkerHost.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){(0,GM.logOnceWebWorkerWarning)(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return(0,GM.logOnceWebWorkerWarning)(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new _T(new tT.EditorSimpleWorker(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new lT.WorkerTextModelSyncClient(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._disposed)return Promise.reject((0,Ux.aD)());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const n=await this.workerWithSyncedResources(e),s=i.source,r=i.flags;return n.$textualSuggest(e.map((e=>e.toString())),t,s,r)}dispose(){super.dispose(),this._disposed=!0}};vT=cT([dT(2,iM.IModelService)],vT);var bT=i(2427),yT=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},wT=function(e,t){return function(i,n){t(i,n,e)}};let CT=class extends Mx.jG{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new rk.vl),this._onCodeEditorAdd=this._register(new rk.vl),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new rk.vl),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new rk.vl),this._onDiffEditorAdd=this._register(new rk.vl),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new rk.vl),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new dM.w,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map((e=>this._codeEditors[e]))}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map((e=>this._diffEditors[e]))}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach((t=>t.removeDecorationsByType(e)))))}setModelProperty(e,t,i){const n=e.toString();let s;this._modelProperties.has(n)?s=this._modelProperties.get(n):(s=new Map,this._modelProperties.set(n,s)),s.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i)){return this._modelProperties.get(i).get(t)}}async openCodeEditor(e,t,i){for(const n of this._codeEditorOpenHandlers){const s=await n(e,t,i);if(null!==s)return s}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return(0,Mx.s)(t)}};CT=yT([wT(0,bT.Gy)],CT);var ST=i(8357),xT=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},kT=function(e,t){return function(i,n){t(i,n,e)}};let LT=class extends CT{constructor(e,t){super(t),this._register(this.onCodeEditorAdd((()=>this._checkContextKey()))),this._register(this.onCodeEditorRemove((()=>this._checkContextKey()))),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler((async(e,t,i)=>t?this.doOpenEditor(t,e):null)))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const i=t.resource.scheme;if(i===uL.ny.http||i===uL.ny.https)return ME(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if("number"===typeof i.endLineNumber&&"number"===typeof i.endColumn)e.setSelection(i),e.revealRangeInCenter(i,1);else{const t={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};LT=xT([kT(0,mM.fN),kT(1,bT.Gy)],LT),(0,ST.v)(tM,LT,0);const ET=(0,eM.u1)("layoutService");var MT=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},TT=function(e,t){return function(i,n){t(i,n,e)}};let DT=class{get mainContainer(){return(0,OS.Fy)(this._codeEditorService.listCodeEditors())?.getContainerDomNode()??Ex.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return e?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return OL(this.mainContainer)}get activeContainerDimension(){return OL(this.activeContainer)}get containers(){return(0,OS.Yc)(this._codeEditorService.listCodeEditors().map((e=>e.getContainerDomNode())))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=rk.Jh.None,this.onDidLayoutActiveContainer=rk.Jh.None,this.onDidLayoutContainer=rk.Jh.None,this.onDidChangeActiveContainer=rk.Jh.None,this.onDidAddContainer=rk.Jh.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};DT=MT([TT(0,tM)],DT);let NT=class extends DT{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};NT=MT([TT(1,tM)],NT),(0,ST.v)(ET,DT,1);var IT=i(7848);const AT=(0,eM.u1)("dialogService");var RT=IT.A;const PT=(0,eM.u1)("notificationService");class OT{}var FT=i(5582),BT=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},zT=function(e,t){return function(i,n){t(i,n,e)}};const VT=!1;function WT(e){return e.scheme===uL.ny.file?e.fsPath:e.path}let HT=0;class UT{constructor(e,t,i,n,s,r,o){this.id=++HT,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=o,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class jT{constructor(e,t){this.resourceLabel=e,this.reason=t}}class GT{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,n]of this.elements){(0===n.reason?e:t).push(n.resourceLabel)}const i=[];return e.length>0&&i.push(WS.kg({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(WS.kg({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join("\n")}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class KT{constructor(e,t,i,n,s,r,o){this.id=++HT,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=o,this.removedResources=null,this.invalidatedResources=null}canSplit(){return"function"===typeof this.actual.split}removeResource(e,t,i){this.removedResources||(this.removedResources=new GT),this.removedResources.has(t)||this.removedResources.set(t,new jT(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new GT),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new jT(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class $T{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join("\n")}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){1===e.type?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)1===t.type&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new FT.To(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,s=-1;for(let o=0,a=this._past.length;o<a;o++,n++){const r=this._past[o];i&&(n>=t||r.id!==e.elements[n])&&(i=!1,s=0),i||1!==r.type||r.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let o=this._future.length-1;o>=0;o--,n++){const s=this._future[o];i&&(n>=t||s.id!==e.elements[n])&&(i=!1,r=o),i||1!==s.type||s.removeResource(this.resourceLabel,this.strResource,0)}-1!==s&&(this._past=this._past.slice(0,s)),-1!==r&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class qT{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const QT=new $T("","");QT.locked=!0;let XT=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join("\n"))}pushElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:FT.I_.None,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:FT.Ym.None;if(0===e.type){const n=WT(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new UT(e,n,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,s=[],r=[];for(const t of e.resources){const e=WT(t),i=this.getUriComparisonKey(t);n.has(i)||(n.add(i),s.push(e),r.push(i))}1===s.length?this._pushElement(new UT(e,s[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new KT(e,s,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const i=e.resourceLabels[t],n=e.strResources[t];let s;this._editStacks.has(n)?s=this._editStacks.get(n):(s=new $T(i,n),this._editStacks.set(n,s)),s.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const e=this._editStacks.get(t);if(e.hasFutureElements())return null;const i=e.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const s of i){const e=WT(s.resource),t=this.getUriComparisonKey(s.resource),i=new UT(s,e,t,0,0,0,0);n.set(i.strResource,i)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const s of i){const e=WT(s.resource),t=this.getUriComparisonKey(s.resource),i=new UT(s,e,t,0,0,0,0);n.set(i.strResource,i)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t="string"===typeof e?e:this.getUriComparisonKey(e);if(this._editStacks.has(t)){this._editStacks.get(t).dispose(),this._editStacks.delete(t)}}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);if(this._editStacks.has(n)){this._editStacks.get(n).setElementsValidFlag(t,i)}}createSnapshot(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).createSnapshot(e)}return new FT.To(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),i.hasPastElements()||i.hasFutureElements()||(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).getElements()}return{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestPastElement();r&&(r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=n))}return[t,i]}canUndo(e){if(e instanceof FT.Ym){const[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasPastElements()}return!1}_onError(e,t){(0,Ux.dz)(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,s){const r=this._acquireLocks(i);let o;try{o=t()}catch(a){return r(),n.dispose(),this._onError(a,e)}return o?o.then((()=>(r(),n.dispose(),s())),(t=>(r(),n.dispose(),this._onError(t,e)))):(r(),n.dispose(),s())}async _invokeWorkspacePrepare(e){if("undefined"===typeof e.actual.prepareUndoRedo)return Mx.jG.None;const t=e.actual.prepareUndoRedo();return"undefined"===typeof t?Mx.jG.None:t}_invokeResourcePrepare(e,t){if(1!==e.actual.type||"undefined"===typeof e.actual.prepareUndoRedo)return t(Mx.jG.None);const i=e.actual.prepareUndoRedo();return i?(0,Mx.Xm)(i)?t(i):i.then((e=>t(e))):t(Mx.jG.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||QT);return new qT(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new YT(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new YT}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,WS.kg({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,WS.kg({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const o of i.editStacks)o.getClosestPastElement()!==t&&s.push(o.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,WS.kg({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const o of i.editStacks)o.locked&&r.push(o.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,WS.kg({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,WS.kg({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,n,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let s;!function(e){e[e.All=0]="All",e[e.This=1]="This",e[e.Cancel=2]="Cancel"}(s||(s={}));const{result:r}=await this._dialogService.prompt({type:IT.A.Info,message:WS.kg("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:WS.kg({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>s.All},{label:WS.kg({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>s.This}],cancelButton:{run:()=>s.Cancel}});if(r===s.Cancel)return;if(r===s.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const o=this._checkWorkspaceUndo(e,t,i,!1);if(o)return o.returnValue;n=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return s.dispose(),r.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.undo()),i,s,(()=>this._continueUndoInGroup(t.groupId,n)))}_resourceUndo(e,t,i){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,(()=>t.actual.undo()),new qT([e]),n,(()=>this._continueUndoInGroup(t.groupId,i))))));{const e=WS.kg({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestPastElement();r&&(r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=n))}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);return i?this._undo(i,0,t):void 0}undo(e){if(e instanceof FT.Ym){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return"string"===typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),s=n.getClosestPastElement();if(!s)return;if(s.groupId){const[e,n]=this._findClosestUndoElementInGroup(s.groupId);if(s!==e&&n)return this._undo(n,t,i)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,s);try{return 1===s.type?this._workspaceUndo(e,s,i):this._resourceUndo(n,s,i)}finally{VT}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:WS.kg("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:WS.kg({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:WS.kg("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestFutureElement();r&&(r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=n))}return[t,i]}canRedo(e){if(e instanceof FT.Ym){const[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasFutureElements()}return!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new YT(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new YT}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,WS.kg({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,WS.kg({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const o of i.editStacks)o.getClosestFutureElement()!==t&&s.push(o.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,WS.kg({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const o of i.editStacks)o.locked&&r.push(o.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,WS.kg({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,WS.kg({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const s=this._checkWorkspaceRedo(e,t,i,!0);if(s)return n.dispose(),s.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.redo()),i,n,(()=>this._continueRedoInGroup(t.groupId)))}_resourceRedo(e,t){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(i=>(e.moveForward(t),this._safeInvokeWithLocks(t,(()=>t.actual.redo()),new qT([e]),i,(()=>this._continueRedoInGroup(t.groupId))))));{const e=WS.kg({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestFutureElement();r&&(r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=n))}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);return t?this._redo(t):void 0}redo(e){if(e instanceof FT.Ym){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return"string"===typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[e,t]=this._findClosestRedoElementInGroup(i.groupId);if(i!==e&&t)return this._redo(t)}try{return 1===i.type?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{VT}}}};XT=BT([zT(0,AT),zT(1,PT)],XT);class YT{constructor(e){this.returnValue=e}}(0,ST.v)(FT.$D,XT,1);i(8787),i(7129),i(4836);var ZT=i(2583),JT=i(5968),eD=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},tD=function(e,t){return function(i,n){t(i,n,e)}};const iD=(0,eM.u1)("hoverService");let nD=class extends Mx.jG{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Mx.Cm),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))})))}showHover(e,t){const i="function"===typeof this.overrideOptions?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const n=hE(e.target)?[e.target]:e.target.targetElements;for(const r of n)this.hoverDisposables.add(TL(r,"keydown",(e=>{e.equals(9)&&this.hoverService.hideHover()})));const s=hE(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};nD=eD([tD(3,JT.pG),tD(4,iD)],nD);const sD=(0,eM.u1)("contextViewService"),rD=(0,eM.u1)("contextMenuService"),oD=(0,eM.u1)("keybindingService");class aD{constructor(){this._hooks=new Mx.Cm,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add((0,Mx.s)((()=>{try{e.releasePointerCapture(t)}catch(i){}})))}catch(o){r=fL(e)}this._hooks.add(EL(r,gE.POINTER_MOVE,(e=>{e.buttons===i?(e.preventDefault(),this._pointerMoveCallback(e)):this.stopMonitoring(!0)}))),this._hooks.add(EL(r,gE.POINTER_UP,(e=>this.stopMonitoring(!0))))}}function lD(e,t,i){let n=null,s=null;if("function"===typeof i.value?(n="value",s=i.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"===typeof i.get&&(n="get",s=i.get),!s)throw new Error("not supported");const r=`$memoize$${t}`;i[n]=function(){if(!this.hasOwnProperty(r)){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,t)})}return this[r]}}var hD,cD=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"}(hD||(hD={}));class dD extends Mx.jG{static#e=(()=>this.SCROLL_FRICTION=-.005)();static#t=(()=>this.HOLD_DELAY=700)();static#i=(()=>this.CLEAR_TAP_COUNT_TIME=400)();constructor(){super(),this.dispatched=!1,this.targets=new dM.w,this.ignoreTargets=new dM.w,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(rk.Jh.runAndSubscribe(CL,(e=>{let{window:t,disposables:i}=e;i.add(EL(t.document,"touchstart",(e=>this.onTouchStart(e)),{passive:!1})),i.add(EL(t.document,"touchend",(e=>this.onTouchEnd(t,e)))),i.add(EL(t.document,"touchmove",(e=>this.onTouchMove(e)),{passive:!1}))}),{window:Ex,disposables:this._store}))}static addTarget(e){if(!dD.isTouchDevice())return Mx.jG.None;dD.INSTANCE||(dD.INSTANCE=(0,Mx.lC)(new dD));const t=dD.INSTANCE.targets.push(e);return(0,Mx.s)(t)}static ignoreTarget(e){if(!dD.isTouchDevice())return Mx.jG.None;dD.INSTANCE||(dD.INSTANCE=(0,Mx.lC)(new dD));const t=dD.INSTANCE.ignoreTargets.push(e);return(0,Mx.s)(t)}static isTouchDevice(){return"ontouchstart"in Ex||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){const n=e.targetTouches.item(i);this.activeTouches[n.identifier]={id:n.identifier,initialTarget:n.target,initialTimeStamp:t,initialPageX:n.pageX,initialPageY:n.pageY,rollingTimestamps:[t],rollingPageX:[n.pageX],rollingPageY:[n.pageY]};const s=this.newGestureEvent(hD.Start,n.target);s.pageX=n.pageX,s.pageY=n.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),n=Object.keys(this.activeTouches).length;for(let s=0,r=t.changedTouches.length;s<r;s++){const r=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=Date.now()-o.initialTimeStamp;if(a<dD.HOLD_DELAY&&Math.abs(o.initialPageX-OS.RT(o.rollingPageX))<30&&Math.abs(o.initialPageY-OS.RT(o.rollingPageY))<30){const e=this.newGestureEvent(hD.Tap,o.initialTarget);e.pageX=OS.RT(o.rollingPageX),e.pageY=OS.RT(o.rollingPageY),this.dispatchEvent(e)}else if(a>=dD.HOLD_DELAY&&Math.abs(o.initialPageX-OS.RT(o.rollingPageX))<30&&Math.abs(o.initialPageY-OS.RT(o.rollingPageY))<30){const e=this.newGestureEvent(hD.Contextmenu,o.initialTarget);e.pageX=OS.RT(o.rollingPageX),e.pageY=OS.RT(o.rollingPageY),this.dispatchEvent(e)}else if(1===n){const t=OS.RT(o.rollingPageX),n=OS.RT(o.rollingPageY),s=OS.RT(o.rollingTimestamps)-o.rollingTimestamps[0],r=t-o.rollingPageX[0],a=n-o.rollingPageY[0],l=[...this.targets].filter((e=>o.initialTarget instanceof Node&&e.contains(o.initialTarget)));this.inertia(e,l,i,Math.abs(r)/s,r>0?1:-1,t,Math.abs(a)/s,a>0?1:-1,n)}this.dispatchEvent(this.newGestureEvent(hD.End,o.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===hD.Tap){const t=(new Date).getTime();let i=0;i=t-this._lastSetTapCountTime>dD.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=t,e.tapCount=i}else e.type!==hD.Change&&e.type!==hD.Contextmenu||(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let n=0,s=e.initialTarget;for(;s&&s!==i;)n++,s=s.parentElement;t.push([n,i])}t.sort(((e,t)=>e[0]-t[0]));for(const[i,n]of t)n.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,n,s,r,o,a,l){this.handle=IL(e,(()=>{const h=Date.now(),c=h-i;let d=0,u=0,g=!0;n+=dD.SCROLL_FRICTION*c,o+=dD.SCROLL_FRICTION*c,n>0&&(g=!1,d=s*n*c),o>0&&(g=!1,u=a*o*c);const p=this.newGestureEvent(hD.Change);p.translationX=d,p.translationY=u,t.forEach((e=>e.dispatchEvent(p))),g||this.inertia(e,t,h,n,s,r+d,o,a,l+u)}))}onTouchMove(e){const t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){const n=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(n.identifier))){console.warn("end of an UNKNOWN touch",n);continue}const s=this.activeTouches[n.identifier],r=this.newGestureEvent(hD.Change,s.initialTarget);r.translationX=n.pageX-OS.RT(s.rollingPageX),r.translationY=n.pageY-OS.RT(s.rollingPageY),r.pageX=n.pageX,r.pageY=n.pageY,this.dispatchEvent(r),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(n.pageX),s.rollingPageY.push(n.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}cD([lD],dD,"isTouchDevice",null);class uD extends Mx.jG{onclick(e,t){this._register(EL(e,gE.CLICK,(i=>t(new ik(fL(e),i)))))}onmousedown(e,t){this._register(EL(e,gE.MOUSE_DOWN,(i=>t(new ik(fL(e),i)))))}onmouseover(e,t){this._register(EL(e,gE.MOUSE_OVER,(i=>t(new ik(fL(e),i)))))}onmouseleave(e,t){this._register(EL(e,gE.MOUSE_LEAVE,(i=>t(new ik(fL(e),i)))))}onkeydown(e,t){this._register(EL(e,gE.KEY_DOWN,(e=>t(new Zx(e)))))}onkeyup(e,t){this._register(EL(e,gE.KEY_UP,(e=>t(new Zx(e)))))}oninput(e,t){this._register(EL(e,gE.INPUT,t))}onblur(e,t){this._register(EL(e,gE.BLUR,t))}onfocus(e,t){this._register(EL(e,gE.FOCUS,t))}ignoreGesture(e){return dD.ignoreTarget(e)}}const gD=11;class pD extends uD{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px","undefined"!==typeof e.top&&(this.bgDomNode.style.top="0px"),"undefined"!==typeof e.left&&(this.bgDomNode.style.left="0px"),"undefined"!==typeof e.bottom&&(this.bgDomNode.style.bottom="0px"),"undefined"!==typeof e.right&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...cM.L.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px","undefined"!==typeof e.top&&(this.domNode.style.top=e.top+"px"),"undefined"!==typeof e.left&&(this.domNode.style.left=e.left+"px"),"undefined"!==typeof e.bottom&&(this.domNode.style.bottom=e.bottom+"px"),"undefined"!==typeof e.right&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new aD),this._register(TL(this.bgDomNode,gE.POINTER_DOWN,(e=>this._arrowPointerDown(e)))),this._register(TL(this.domNode,gE.POINTER_DOWN,(e=>this._arrowPointerDown(e)))),this._pointerdownRepeatTimer=this._register(new AL),this._pointerdownScheduleRepeatTimer=this._register(new sk.pc)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet((()=>{this._pointerdownRepeatTimer.cancelAndSet((()=>this._onActivate()),1e3/24,fL(e))}),200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>{}),(()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()})),e.preventDefault()}}class fD extends Mx.jG{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new sk.pc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return 2!==this._visibility&&(3===this._visibility||this._rawShouldBeVisible)}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((()=>{this._domNode?.setClassName(this._visibleClassName)}),0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}}class mD extends uD{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new fD(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new aD),this._shouldRender=!0,this.domNode=UE(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(EL(this.domNode.domNode,gE.POINTER_DOWN,(e=>this._domNodePointerDown(e))))}_createArrow(e){const t=this._register(new pD(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=UE(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),"number"===typeof i&&this.slider.setWidth(i),"number"===typeof n&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(EL(this.slider.domNode,gE.POINTER_DOWN,(e=>{0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}))),this.onclick(this.slider.domNode,(e=>{e.leftButton&&e.stopPropagation()}))}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);i<=s&&s<=n?0===e.button&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&"number"===typeof e.offsetX&&"number"===typeof e.offsetY)t=e.offsetX,i=e.offsetY;else{const n=zL(this.domNode.domNode);t=e.pageX-n.left,i=e.pageY-n.top}const n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>{const s=this._sliderOrthogonalPointerPosition(e),r=Math.abs(s-i);if(BS.uF&&r>140)return void this._setDesiredScrollPositionNow(n.getScrollPosition());const o=this._sliderPointerPosition(e)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(o))}),(()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()})),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}class _D{constructor(e,t,i,n,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new _D(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t&&(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t&&(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t&&(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,s){const r=Math.max(0,i-e),o=Math.max(0,r-2*t),a=n>0&&n>i;if(!a)return{computedAvailableSize:Math.round(r),computedIsNeeded:a,computedSliderSize:Math.round(o),computedSliderRatio:0,computedSliderPosition:0};const l=Math.round(Math.max(20,Math.floor(i*o/n))),h=(o-l)/(n-i),c=s*h;return{computedAvailableSize:Math.round(r),computedIsNeeded:a,computedSliderSize:Math.round(l),computedSliderRatio:h,computedSliderPosition:Math.round(c)}}_refreshComputedValues(){const e=_D._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}var vD=i(4808);class bD extends mD{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new _D(t.horizontalHasArrows?t.arrowSize:0,2===t.horizontal?0:t.horizontalScrollbarSize,2===t.vertical?0:t.verticalScrollbarSize,n.width,n.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const e=(t.arrowSize-gD)/2,i=(t.horizontalScrollbarSize-gD)/2;this._createArrow({className:"scra",icon:vD.W.scrollbarButtonLeft,top:i,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new nk(null,1,0))}),this._createArrow({className:"scra",icon:vD.W.scrollbarButtonRight,top:i,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new nk(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(2===e.horizontal?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class yD extends mD{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new _D(t.verticalHasArrows?t.arrowSize:0,2===t.vertical?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const e=(t.arrowSize-gD)/2,i=(t.verticalScrollbarSize-gD)/2;this._createArrow({className:"scra",icon:vD.W.scrollbarButtonUp,top:e,left:i,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new nk(null,0,1))}),this._createArrow({className:"scra",icon:vD.W.scrollbarButtonDown,top:void 0,left:i,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new nk(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class wD{constructor(e,t,i,n,s,r,o){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t|=0,i|=0,n|=0,s|=0,r|=0,o|=0),this.rawScrollLeft=n,this.rawScrollTop=o,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),s<0&&(s=0),o+s>r&&(o=r-s),o<0&&(o=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=s,this.scrollHeight=r,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new wD(this._forceIntegerValues,"undefined"!==typeof e.width?e.width:this.width,"undefined"!==typeof e.scrollWidth?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,"undefined"!==typeof e.height?e.height:this.height,"undefined"!==typeof e.scrollHeight?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new wD(this._forceIntegerValues,this.width,this.scrollWidth,"undefined"!==typeof e.scrollLeft?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,"undefined"!==typeof e.scrollTop?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:o,scrollTopChanged:a}}}class CD extends Mx.jG{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new rk.vl),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new wD(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:"undefined"===typeof e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:"undefined"===typeof e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;n=t?new kD(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const t=this._state.withScrollPosition(e);this._smoothScrolling=kD.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))}hasPendingScrollAnimation(){return Boolean(this._smoothScrolling)}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);return this._setState(t,!0),this._smoothScrolling?e.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))):void 0}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class SD{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function xD(e,t){const i=t-e;return function(t){return e+i*(1-function(e){return Math.pow(e,3)}(1-t))}}class kD{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let o,a;return e<t?(o=e+.75*i,a=t-.75*i):(o=e-.75*i,a=t+.75*i),n=xD(e,o),s=xD(a,t),r=.33,function(e){return e<r?n(e/r):s((e-r)/(1-r))}}var n,s,r;return xD(e,t)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const e=this.scrollLeft(t),i=this.scrollTop(t);return new SD(e,i,!1)}return new SD(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return kD.start(e,t,i)}static start(e,t,i){i+=10;const n=Date.now()-10;return new kD(e,t,n,i)}}class LD{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class ED{static#e=(()=>this.INSTANCE=new ED)();constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(-1===this._front&&-1===this._rear)return!1;let e=1,t=0,i=1,n=this._rear;for(;;){const s=n===this._front?e:Math.pow(2,-i);if(e-=s,t+=this._memory[n].score*s,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}return t<=.5}acceptStandardWheelEvent(e){if(Ox){const t=function(e){return Nx.INSTANCE.getZoomFactor(e)}(fL(e.browserEvent));this.accept(Date.now(),e.deltaX*t,e.deltaY*t)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=null;const s=new LD(e,t,i);-1===this._front&&-1===this._rear?(this._memory[0]=s,this._front=0,this._rear=0):(n=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,n)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if(this._isAlmostInt(e.deltaX)&&this._isAlmostInt(e.deltaY)||(i+=.25),t){const n=Math.abs(e.deltaX),s=Math.abs(e.deltaY),r=Math.abs(t.deltaX),o=Math.abs(t.deltaY),a=Math.max(Math.min(n,r),1),l=Math.max(Math.min(s,o),1),h=Math.max(n,r),c=Math.max(s,o);h%a===0&&c%l===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}class MD extends uD{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new rk.vl),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new rk.vl),e.style.overflow="hidden",this._options=function(e){const t={lazyRender:"undefined"!==typeof e.lazyRender&&e.lazyRender,className:"undefined"!==typeof e.className?e.className:"",useShadows:"undefined"===typeof e.useShadows||e.useShadows,handleMouseWheel:"undefined"===typeof e.handleMouseWheel||e.handleMouseWheel,flipAxes:"undefined"!==typeof e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:"undefined"!==typeof e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:"undefined"!==typeof e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:"undefined"!==typeof e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:"undefined"!==typeof e.mouseWheelScrollSensitivity?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:"undefined"!==typeof e.fastScrollSensitivity?e.fastScrollSensitivity:5,scrollPredominantAxis:"undefined"===typeof e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:"undefined"===typeof e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,arrowSize:"undefined"!==typeof e.arrowSize?e.arrowSize:11,listenOnDomNode:"undefined"!==typeof e.listenOnDomNode?e.listenOnDomNode:null,horizontal:"undefined"!==typeof e.horizontal?e.horizontal:1,horizontalScrollbarSize:"undefined"!==typeof e.horizontalScrollbarSize?e.horizontalScrollbarSize:10,horizontalSliderSize:"undefined"!==typeof e.horizontalSliderSize?e.horizontalSliderSize:0,horizontalHasArrows:"undefined"!==typeof e.horizontalHasArrows&&e.horizontalHasArrows,vertical:"undefined"!==typeof e.vertical?e.vertical:1,verticalScrollbarSize:"undefined"!==typeof e.verticalScrollbarSize?e.verticalScrollbarSize:10,verticalHasArrows:"undefined"!==typeof e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:"undefined"!==typeof e.verticalSliderSize?e.verticalSliderSize:0,scrollByPage:"undefined"!==typeof e.scrollByPage&&e.scrollByPage};t.horizontalSliderSize="undefined"!==typeof e.horizontalSliderSize?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize="undefined"!==typeof e.verticalSliderSize?e.verticalSliderSize:t.verticalScrollbarSize,BS.zx&&(t.className+=" mac");return t}(t),this._scrollable=i,this._register(this._scrollable.onScroll((e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)})));const n={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new yD(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new bD(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=UE(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=UE(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=UE(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(e=>this._onMouseOver(e))),this.onmouseleave(this._listenOnDomNode,(e=>this._onMouseLeave(e))),this._hideTimeout=this._register(new sk.pc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=(0,Mx.AS)(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,BS.zx&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){"undefined"!==typeof e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),"undefined"!==typeof e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),"undefined"!==typeof e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),"undefined"!==typeof e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),"undefined"!==typeof e.horizontal&&(this._options.horizontal=e.horizontal),"undefined"!==typeof e.vertical&&(this._options.vertical=e.vertical),"undefined"!==typeof e.horizontalScrollbarSize&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),"undefined"!==typeof e.verticalScrollbarSize&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),"undefined"!==typeof e.scrollByPage&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new nk(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=(0,Mx.AS)(this._mouseWheelToDispose),e)){const e=e=>{this._onMouseWheel(new nk(e))};this._mouseWheelToDispose.push(EL(this._listenOnDomNode,gE.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;const t=ED.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let n=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+n===0?s=n=0:Math.abs(n)>=Math.abs(s)?s=0:n=0),this._options.flipAxes&&([n,s]=[s,n]);const r=!BS.zx&&e.browserEvent&&e.browserEvent.shiftKey;!this._options.scrollYToX&&!r||s||(s=n,n=0),e.browserEvent&&e.browserEvent.altKey&&(s*=this._options.fastScrollSensitivity,n*=this._options.fastScrollSensitivity);const o=this._scrollable.getFutureScrollPosition();let a={};if(n){const e=50*n,t=o.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(a,t)}if(s){const e=50*s,t=o.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(a,t)}if(a=this._scrollable.validateScrollPosition(a),o.scrollLeft!==a.scrollLeft||o.scrollTop!==a.scrollTop){this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(a):this._scrollable.setScrollPositionNow(a),i=!0}}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",s=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${s}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((()=>this._hide()),500)}}class TD extends MD{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;const i=new CD({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>IL(fL(e),t)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class DD extends MD{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class ND extends MD{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;const i=new CD({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>IL(fL(e),t)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll((e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)}))),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}const ID=xE;class AD extends Mx.jG{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new ND(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class RD extends Mx.jG{static render(e,t,i){return new RD(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=vE(e,ID("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=vE(this.actionContainer,ID("a.action")),this.action.setAttribute("role","button"),t.iconClass&&vE(this.action,ID(`span.icon.${t.iconClass}`));vE(this.action,ID("span")).textContent=i?`${t.label} (${i})`:t.label,this._store.add(new PD(this.actionContainer,t.run)),this._store.add(new OD(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}class PD extends Mx.jG{constructor(e,t){super(),this._register(EL(e,gE.CLICK,(i=>{i.stopPropagation(),i.preventDefault(),t(e)})))}}class OD extends Mx.jG{constructor(e,t,i){super(),this._register(EL(e,gE.KEY_DOWN,(n=>{const s=new Zx(n);i.some((e=>s.equals(e)))&&(n.stopPropagation(),n.preventDefault(),t(e))})))}}const FD=(0,eM.u1)("openerService");class BD{get event(){return this.emitter.event}constructor(e,t,i){const n=e=>this.emitter.fire(e);this.emitter=new rk.vl({onWillAddFirstListener:()=>e.addEventListener(t,n,i),onDidRemoveLastListener:()=>e.removeEventListener(t,n,i)})}dispose(){this.emitter.dispose()}}function zD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=VD(t);return HD(i,function(e,t){const i={type:1,children:[]};let n=0,s=i;const r=[],o=new WD(e);for(;!o.eos();){let e=o.next();const i="\\"===e&&0!==jD(o.peek(),t);if(i&&(e=o.next()),!i&&UD(e,t)&&e===o.peek()){o.advance(),2===s.type&&(s=r.pop());const i=jD(e,t);if(s.type===i||5===s.type&&6===i)s=r.pop();else{const e={type:i,children:[]};5===i&&(e.index=n,n++),s.children.push(e),r.push(s),s=e}}else if("\n"===e)2===s.type&&(s=r.pop()),s.children.push({type:8});else if(2!==s.type){const t={type:2,content:e};s.children.push(t),r.push(s),s=t}else s.content+=e}2===s.type&&(s=r.pop());r.length;return i}(e,!!t.renderCodeSegments),t.actionHandler,t.renderCodeSegments),i}function VD(e){const t=e.inline?"span":"div",i=document.createElement(t);return e.className&&(i.className=e.className),i}class WD{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function HD(e,t,i,n){let s;if(2===t.type)s=document.createTextNode(t.content||"");else if(3===t.type)s=document.createElement("b");else if(4===t.type)s=document.createElement("i");else if(7===t.type&&n)s=document.createElement("code");else if(5===t.type&&i){const e=document.createElement("a");i.disposables.add(TL(e,"click",(e=>{i.callback(String(t.index),e)}))),s=e}else 8===t.type?s=document.createElement("br"):1===t.type&&(s=e);s&&e!==s&&e.appendChild(s),s&&Array.isArray(t.children)&&t.children.forEach((e=>{HD(s,e,i,n)}))}function UD(e,t){return 0!==jD(e,t)}function jD(e,t){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return t?7:0;default:return 0}}const GD=new RegExp(`(\\\\)?\\$\\((${cM.L.iconNameExpression}(?:${cM.L.iconModifierExpression})?)\\)`,"g");function KD(e){const t=new Array;let i,n=0,s=0;for(;null!==(i=GD.exec(e));){s=i.index||0,n<s&&t.push(e.substring(n,s)),n=(i.index||0)+i[0].length;const[,r,o]=i;t.push(r?`$(${o})`:$D({id:o}))}return n<e.length&&t.push(e.substring(n)),t}function $D(e){const t=xE("span");return t.classList.add(...cM.L.asClassNameArray(e)),t}var qD=i(197);new Uint32Array(10);new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function QD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e,i){for(let n=0,s=t.length;n<s;n++){const s=t[n](e,i);if(s)return s}return null}}YD.bind(void 0,!1);const XD=YD.bind(void 0,!0);function YD(e,t,i){if(!i||i.length<t.length)return null;let n;return n=e?Tx.ns(i,t):0===i.indexOf(t),n?t.length>0?[{start:0,end:t.length}]:[]:null}function ZD(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]===t[n]){let s=null;return(s=ZD(e,t,i+1,n+1))?rN({start:n,end:n+1},s):null}return ZD(e,t,i,n+1)}function JD(e){return 97<=e&&e<=122}function eN(e){return 65<=e&&e<=90}function tN(e){return 48<=e&&e<=57}function iN(e){return 32===e||9===e||10===e||13===e}const nN=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach((e=>nN.add(e.charCodeAt(0))));new Map;function sN(e){return JD(e)||eN(e)||tN(e)}function rN(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function oN(e,t){for(let i=t;i<e.length;i++){const t=e.charCodeAt(i);if(eN(t)||tN(t)||i>0&&!sN(e.charCodeAt(i-1)))return i}return e.length}function aN(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]!==t[n].toLowerCase())return null;{let s=null,r=n+1;for(s=aN(e,t,i+1,n+1);!s&&(r=oN(t,r))<t.length;)s=aN(e,t,i+1,r),r++;return null===s?null:rN({start:n,end:n+1},s)}}function lN(e,t){if(!t)return null;if(0===(t=t.trim()).length)return null;if(!function(e){let t=0,i=0,n=0,s=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r),eN(n)&&t++,JD(n)&&i++,iN(n)&&s++;return 0!==t&&0!==i||0!==s?t<=5:e.length<=30}(e))return null;t.length>60&&(t=t.substring(0,60));const i=function(e){let t=0,i=0,n=0,s=0,r=0;for(let o=0;o<e.length;o++)r=e.charCodeAt(o),eN(r)&&t++,JD(r)&&i++,sN(r)&&n++,tN(r)&&s++;return{upperPercent:t/e.length,lowerPercent:i/e.length,alphaPercent:n/e.length,numericPercent:s/e.length}}(t);if(!function(e){const{upperPercent:t,lowerPercent:i,alphaPercent:n,numericPercent:s}=e;return i>.2&&t<.8&&n>.6&&s<.2}(i)){if(!function(e){const{upperPercent:t,lowerPercent:i}=e;return 0===i&&t>.6}(i))return null;t=t.toLowerCase()}let n=null,s=0;for(e=e.toLowerCase();s<t.length&&null===(n=aN(e,t,0,s));)s=oN(t,s+1);return n}const hN=QD(XD,lN,(function(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return-1===i?null:[{start:i,end:i+e.length}]})),cN=QD(XD,lN,(function(e,t){return ZD(e.toLowerCase(),t.toLowerCase(),0,0)})),dN=new qD.qK(1e4);function uN(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e||"string"!==typeof t)return null;let n=dN.get(e);n||(n=new RegExp(Tx.Bm(e),"i"),dN.set(e,n));const s=n.exec(t);return s?[{start:s.index,end:s.index+s[0].length}]:i?cN(e,t):hN(e,t)}function gN(e,t){const i=TN(e,e.toLowerCase(),0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?function(e){if("undefined"===typeof e)return[];const t=[],i=e[1];for(let n=e.length-1;n>1;n--){const s=e[n]+i,r=t[t.length-1];r&&r.end===s?r.end=s+1:t.push({start:s,end:s+1})}return t}(i):null}const pN=128;function fN(){const e=[],t=[];for(let i=0;i<=pN;i++)t[i]=0;for(let i=0;i<=pN;i++)e.push(t.slice(0));return e}function mN(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}const _N=mN(2*pN),vN=mN(2*pN),bN=fN(),yN=fN(),wN=fN(),CN=!1;function SN(e,t,i,n,s){function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";for(;e.length<t;)e=i+e;return e}let o=` |   |${n.split("").map((e=>r(e,3))).join("|")}\n`;for(let a=0;a<=i;a++)o+=0===a?" |":`${t[a-1]}|`,o+=e[a].slice(0,s+1).map((e=>r(e.toString(),3))).join("|")+"\n";return o}function xN(e,t){if(t<0||t>=e.length)return!1;const i=e.codePointAt(t);switch(i){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Tx.Ss(i)}}function kN(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case 32:case 9:return!0;default:return!1}}function LN(e,t,i){return t[e]!==i[e]}var EN;!function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(EN||(EN={}));class MN{static#e=(()=>this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1})();constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}function TN(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:MN.default;const a=e.length>pN?pN:e.length,l=n.length>pN?pN:n.length;if(i>=a||r>=l||a-i>l-r)return;if(!function(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];for(;t<i&&s<r;)e[t]===n[s]&&(o&&(_N[t]=s),t+=1),s+=1;return t===i}(t,i,a,s,r,l,!0))return;!function(e,t,i,n,s,r){let o=e-1,a=t-1;for(;o>=i&&a>=n;)s[o]===r[a]&&(vN[o]=a,o--),a--}(a,l,i,r,t,s);let h=1,c=1,d=i,u=r;const g=[!1];for(h=1,d=i;d<a;h++,d++){const o=_N[d],p=vN[d],f=d+1<a?vN[d+1]:l;for(c=o-r+1,u=o;u<f;c++,u++){let a=Number.MIN_SAFE_INTEGER,f=!1;u<=p&&(a=DN(e,t,d,i,n,s,u,l,r,0===bN[h-1][c-1],g));let m=0;a!==Number.MAX_SAFE_INTEGER&&(f=!0,m=a+yN[h-1][c-1]);const _=u>o,v=_?yN[h][c-1]+(bN[h][c-1]>0?-5:0):0,b=u>o+1&&bN[h][c-1]>0,y=b?yN[h][c-2]+(bN[h][c-2]>0?-5:0):0;if(b&&(!_||y>=v)&&(!f||y>=m))yN[h][c]=y,wN[h][c]=3,bN[h][c]=0;else if(_&&(!f||v>=m))yN[h][c]=v,wN[h][c]=2,bN[h][c]=0;else{if(!f)throw new Error("not possible");yN[h][c]=m,wN[h][c]=1,bN[h][c]=bN[h-1][c-1]+1}}}if(CN&&function(e,t,i,n){e=e.substr(t),i=i.substr(n),console.log(SN(yN,e,e.length,i,i.length)),console.log(SN(wN,e,e.length,i,i.length)),console.log(SN(bN,e,e.length,i,i.length))}(e,i,n,r),!g[0]&&!o.firstMatchCanBeWeak)return;h--,c--;const p=[yN[h][c],r];let f=0,m=0;for(;h>=1;){let e=c;do{const t=wN[h][e];if(3===t)e-=2;else{if(2!==t)break;e-=1}}while(e>=1);f>1&&t[i+h-1]===s[r+c-1]&&!LN(e+r-1,n,s)&&f+1>bN[h][e]&&(e=c),e===c?f++:f=1,m||(m=e),h--,c=e-1,p.push(c)}l-r===a&&o.boostFullMatch&&(p[0]+=2);const _=m-a;return p[0]-=_,p}function DN(e,t,i,n,s,r,o,a,l,h,c){if(t[i]!==r[o])return Number.MIN_SAFE_INTEGER;let d=1,u=!1;return o===i-n?d=e[i]===s[o]?7:5:!LN(o,s,r)||0!==o&&LN(o-1,s,r)?!xN(r,o)||0!==o&&xN(r,o-1)?(xN(r,o-1)||kN(r,o-1))&&(d=5,u=!0):d=5:(d=e[i]===s[o]?7:5,u=!0),d>1&&i===n&&(c[0]=!0),u||(u=LN(o,s,r)||xN(r,o-1)||kN(r,o-1)),i===n?o>l&&(d-=u?3:5):d+=h?u?2:0:u?0:1,o+1===a&&(d-=u?3:5),d}const NN=new RegExp(`\\$\\(${cM.L.iconNameExpression}(?:${cM.L.iconModifierExpression})?\\)`,"g"),IN=new RegExp(`(\\\\)?${NN.source}`,"g");const AN=new RegExp(`\\\\${NN.source}`,"g");const RN=new RegExp(`(\\s)?(\\\\)?${NN.source}(\\s)?`,"g");function PN(e){return-1===e.indexOf("$(")?e:e.replace(RN,((e,t,i,n)=>i?e:t||n||""))}const ON=new RegExp(`\\$\\(${cM.L.iconNameCharacter}+\\)`,"g");function FN(e){ON.lastIndex=0;let t="";const i=[];let n=0;for(;;){const s=ON.lastIndex,r=ON.exec(e),o=e.substring(s,r?.index);if(o.length>0){t+=o;for(let e=0;e<o.length;e++)i.push(n)}if(!r)break;n+=r[0].length}return{text:t,iconOffsets:i}}function BN(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{text:n,iconOffsets:s}=t;if(!s||0===s.length)return uN(e,n,i);const r=(0,Tx.NB)(n," "),o=n.length-r.length,a=uN(e,r,i);if(a)for(const l of a){const e=s[l.start+o]+o;l.start+=e,l.end+=e}return a}var zN=i(6474);class VN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.value=e,"string"!==typeof this.value)throw(0,Ux.Qg)("value");"boolean"===typeof t?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var i;return this.value+=function(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?(i=e,i.replace(IN,((e,t)=>t?e:`\\${e}`))):e).replace(/([ \t]+)/g,((e,t)=>"&nbsp;".repeat(t.length))).replace(/\>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`\n${function(e,t){const i=e.match(/^`+/gm)?.reduce(((e,t)=>e.length>t.length?e:t)).length??0,n=i>=3?i+1:3;return[`${"`".repeat(n)}${t}`,e,`${"`".repeat(n)}`].join("\n")}(t,e)}\n`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp((0,Tx.bm)(t),"g");return e.replace(i,((t,i)=>"\\"!==e.charAt(i-1)?`\\${t}`:t))}}function WN(e){return e instanceof VN||!(!e||"object"!==typeof e)&&("string"===typeof e.value&&("boolean"===typeof e.isTrusted||"object"===typeof e.isTrusted||void 0===e.isTrusted)&&("boolean"===typeof e.supportThemeIcons||void 0===e.supportThemeIcons))}function HN(e){return e.replace(/"/g,"&quot;")}function UN(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1"):e}class jN{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const GN=new jN("id#");var KN=i(5177);let $N={};!function(){function e(e,t){t($N)}var t,i;e.amd=!0,t=this,i=function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function i(t){e.defaults=t}e.defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};const n=/[&<>"']/,s=new RegExp(n.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,o=new RegExp(r.source,"g"),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=e=>a[e];function h(e,t){if(t){if(n.test(e))return e.replace(s,l)}else if(r.test(e))return e.replace(o,l);return e}const c=/(^|[^\[])\^/g;function d(e,t){let i="string"===typeof e?e:e.source;t=t||"";const n={replace:(e,t)=>{let s="string"===typeof t?t:t.source;return s=s.replace(c,"$1"),i=i.replace(e,s),n},getRegex:()=>new RegExp(i,t)};return n}function u(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const g={exec:()=>null};function p(e,t){const i=e.replace(/\|/g,((e,t,i)=>{let n=!1,s=t;for(;--s>=0&&"\\"===i[s];)n=!n;return n?"|":" |"})).split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function f(e,t,i){const n=e.length;if(0===n)return"";let s=0;for(;s<n;){const r=e.charAt(n-s-1);if(r!==t||i){if(r===t||!i)break;s++}else s++}return e.slice(0,n-s)}function m(e,t,i,n){const s=t.href,r=t.title?h(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;const e={type:"link",raw:i,href:s,title:r,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,e}return{type:"image",raw:i,href:s,title:r,text:h(o)}}class _{options;rules;lexer;constructor(t){this.options=t||e.defaults}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:f(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],i=function(e,t){const i=e.match(/^(\s+)(?:```)/);if(null===i)return t;const n=i[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[i]=t;return i.length>=n.length?e.slice(n.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=f(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:f(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=f(t[0],"\n").split("\n"),i="",n="";const s=[];for(;e.length>0;){let t=!1;const r=[];let o;for(o=0;o<e.length;o++)if(/^ {0,3}>/.test(e[o]))r.push(e[o]),t=!0;else{if(t)break;r.push(e[o])}e=e.slice(o);const a=r.join("\n"),l=a.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}\n${a}`:a,n=n?`${n}\n${l}`:l;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,s,!0),this.lexer.state.top=h,0===e.length)break;const c=s[s.length-1];if("code"===c?.type)break;if("blockquote"===c?.type){const t=c,r=t.raw+"\n"+e.join("\n"),o=this.blockquote(r);s[s.length-1]=o,i=i.substring(0,i.length-t.raw.length)+o.raw,n=n.substring(0,n.length-t.text.length)+o.text;break}if("list"!==c?.type);else{const t=c,r=t.raw+"\n"+e.join("\n"),o=this.list(r);s[s.length-1]=o,i=i.substring(0,i.length-c.raw.length)+o.raw,n=n.substring(0,n.length-t.raw.length)+o.raw,e=r.substring(s[s.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:i,tokens:s,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const n=i.length>1,s={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");const r=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let i=!1,n="",a="";if(!(t=r.exec(e)))break;if(this.rules.block.hr.test(e))break;n=t[0],e=e.substring(n.length);let l=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),h=e.split("\n",1)[0],c=!l.trim(),d=0;if(this.options.pedantic?(d=2,a=l.trimStart()):c?d=t[1].length+1:(d=t[2].search(/[^ ]/),d=d>4?1:d,a=l.slice(d),d+=t[1].length),c&&/^ *$/.test(h)&&(n+=h+"\n",e=e.substring(h.length+1),i=!0),!i){const t=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),i=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),s=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),r=new RegExp(`^ {0,${Math.min(3,d-1)}}#`);for(;e;){const o=e.split("\n",1)[0];if(h=o,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),s.test(h))break;if(r.test(h))break;if(t.test(h))break;if(i.test(e))break;if(h.search(/[^ ]/)>=d||!h.trim())a+="\n"+h.slice(d);else{if(c)break;if(l.search(/[^ ]/)>=4)break;if(s.test(l))break;if(r.test(l))break;if(i.test(l))break;a+="\n"+h}c||h.trim()||(c=!0),n+=o+"\n",e=e.substring(o.length+1),l=h.slice(d)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(n)&&(o=!0));let u,g=null;this.options.gfm&&(g=/^\[[ xX]\] /.exec(a),g&&(u="[ ] "!==g[0],a=a.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:n,task:!!g,checked:u,loose:!1,text:a,tokens:[]}),s.raw+=n}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let e=0;e<s.items.length;e++)if(this.lexer.state.top=!1,s.items[e].tokens=this.lexer.blockTokens(s.items[e].text,[]),!s.loose){const t=s.items[e].tokens.filter((e=>"space"===e.type)),i=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));s.loose=i}if(s.loose)for(let e=0;e<s.items.length;e++)s.items[e].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:n}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const i=p(t[1]),n=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===n.length){for(const e of n)/^ *-+: *$/.test(e)?r.align.push("right"):/^ *:-+: *$/.test(e)?r.align.push("center"):/^ *:-+ *$/.test(e)?r.align.push("left"):r.align.push(null);for(let e=0;e<i.length;e++)r.header.push({text:i[e],tokens:this.lexer.inline(i[e]),header:!0,align:r.align[e]});for(const e of s)r.rows.push(p(e,r.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:r.align[t]}))));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:h(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=f(e.slice(0,-1),"\\");if((e.length-t.length)%2===0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let i=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])i++;else if(e[n]===t[1]&&(i--,i<0))return n;return-1}(t[2],"()");if(e>-1){const i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);e&&(i=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(e)?i.slice(1):i.slice(1,-1)),m(t,{href:i?i.replace(this.rules.inline.anyPunctuation,"$1"):i,title:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const e=t[(i[2]||i[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return m(i,e,i[0],this.lexer)}}emStrong(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this.rules.inline.emStrongLDelim.exec(e);if(n&&(!n[3]||!i.match(/[\p{L}\p{N}]/u))&&(!n[1]&&!n[2]||!i||this.rules.inline.punctuation.exec(i))){const i=[...n[0]].length-1;let s,r,o=i,a=0;const l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+i);null!=(n=l.exec(t));){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(r=[...s].length,n[3]||n[4]){o+=r;continue}if((n[5]||n[6])&&i%3&&!((i+r)%3)){a+=r;continue}if(o-=r,o>0)continue;r=Math.min(r,r+o+a);const t=[...n[0]][0].length,l=e.slice(0,i+n.index+t+r);if(Math.min(i,r)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const h=l.slice(2,-2);return{type:"strong",raw:l,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const i=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return i&&n&&(e=e.substring(1,e.length-1)),e=h(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,i;return"@"===t[2]?(e=h(t[1]),i="mailto:"+e):(e=h(t[1]),i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,i;if("@"===t[2])e=h(t[0]),i="mailto:"+e;else{let n;do{n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(n!==t[0]);e=h(t[0]),i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:h(t[0]),{type:"text",raw:t[0],text:e}}}}const v=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,b=/(?:[*+-]|\d{1,9}[.)])/,y=d(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,b).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),w=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,C=/(?!\s*\])(?:\\.|[^\[\]\\])+/,S=d(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",C).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),x=d(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,b).getRegex(),k="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",L=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,E=d("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",L).replace("tag",k).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),M=d(w).replace("hr",v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",k).getRegex(),T={blockquote:d(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",M).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:S,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:v,html:E,lheading:y,list:x,newline:/^(?: *(?:\n|$))+/,paragraph:M,table:g,text:/^[^\n]+/},D=d("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",k).getRegex(),N={...T,table:D,paragraph:d(w).replace("hr",v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",D).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",k).getRegex()},I={...T,html:d("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",L).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:d(w).replace("hr",v).replace("heading"," *#{1,6} *[^\n]").replace("lheading",y).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},A=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,R=/^( {2,}|\\)\n(?!\s*$)/,P="\\p{P}\\p{S}",O=d(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,P).getRegex(),F=d(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,P).getRegex(),B=d("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,P).getRegex(),z=d("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,P).getRegex(),V=d(/\\([punct])/,"gu").replace(/punct/g,P).getRegex(),W=d(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),H=d(L).replace("(?:--\x3e|$)","--\x3e").getRegex(),U=d("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",H).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),j=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,G=d(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",j).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),K=d(/^!?\[(label)\]\[(ref)\]/).replace("label",j).replace("ref",C).getRegex(),$=d(/^!?\[(ref)\](?:\[\])?/).replace("ref",C).getRegex(),q={_backpedal:g,anyPunctuation:V,autolink:W,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:R,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:g,emStrongLDelim:F,emStrongRDelimAst:B,emStrongRDelimUnd:z,escape:A,link:G,nolink:$,punctuation:O,reflink:K,reflinkSearch:d("reflink|nolink(?!\\()","g").replace("reflink",K).replace("nolink",$).getRegex(),tag:U,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:g},Q={...q,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",j).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",j).getRegex()},X={...q,escape:d(A).replace("])","~|])").getRegex(),url:d(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Y={...X,br:d(R).replace("{2,}","*").getRegex(),text:d(X.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Z={normal:T,gfm:N,pedantic:I},J={normal:q,gfm:X,breaks:Y,pedantic:Q};class ee{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new _,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:Z.normal,inline:J.normal};this.options.pedantic?(i.block=Z.pedantic,i.inline=J.pedantic):this.options.gfm&&(i.block=Z.gfm,this.options.breaks?i.inline=J.breaks:i.inline=J.gfm),this.tokenizer.rules=i}static get rules(){return{block:Z,inline:J}}static lex(e,t){return new ee(t).lex(e)}static lexInline(e,t){return new ee(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e){let t,i,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,i)=>t+"    ".repeat(i.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((i=>!!(t=i.call({lexer:this},e,s))&&(e=e.substring(t.raw.length),s.push(t),!0)))))if(t=this.tokenizer.space(e))e=e.substring(t.raw.length),1===t.raw.length&&s.length>0?s[s.length-1].raw+="\n":s.push(t);else if(t=this.tokenizer.code(e))e=e.substring(t.raw.length),i=s[s.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?s.push(t):(i.raw+="\n"+t.raw,i.text+="\n"+t.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(t=this.tokenizer.fences(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.heading(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.hr(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.blockquote(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.list(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.html(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.def(e))e=e.substring(t.raw.length),i=s[s.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title}):(i.raw+="\n"+t.raw,i.text+="\n"+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(t=this.tokenizer.table(e))e=e.substring(t.raw.length),s.push(t);else if(t=this.tokenizer.lheading(e))e=e.substring(t.raw.length),s.push(t);else{if(n=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const i=e.slice(1);let s;this.options.extensions.startBlock.forEach((e=>{s=e.call({lexer:this},i),"number"===typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}if(this.state.top&&(t=this.tokenizer.paragraph(n)))i=s[s.length-1],r&&"paragraph"===i?.type?(i.raw+="\n"+t.raw,i.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t),r=n.length!==e.length,e=e.substring(t.raw.length);else if(t=this.tokenizer.text(e))e=e.substring(t.raw.length),i=s[s.length-1],i&&"text"===i.type?(i.raw+="\n"+t.raw,i.text+="\n"+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,s}inline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e){let t,i,n,s,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,s.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(r||(o=""),r=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((i=>!!(t=i.call({lexer:this},e,a))&&(e=e.substring(t.raw.length),a.push(t),!0)))))if(t=this.tokenizer.escape(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.tag(e))e=e.substring(t.raw.length),i=a[a.length-1],i&&"text"===t.type&&"text"===i.type?(i.raw+=t.raw,i.text+=t.text):a.push(t);else if(t=this.tokenizer.link(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(t.raw.length),i=a[a.length-1],i&&"text"===t.type&&"text"===i.type?(i.raw+=t.raw,i.text+=t.text):a.push(t);else if(t=this.tokenizer.emStrong(e,l,o))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.codespan(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.br(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.del(e))e=e.substring(t.raw.length),a.push(t);else if(t=this.tokenizer.autolink(e))e=e.substring(t.raw.length),a.push(t);else if(this.state.inLink||!(t=this.tokenizer.url(e))){if(n=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const i=e.slice(1);let s;this.options.extensions.startInline.forEach((e=>{s=e.call({lexer:this},i),"number"===typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(n=e.substring(0,t+1))}if(t=this.tokenizer.inlineText(n))e=e.substring(t.raw.length),"_"!==t.raw.slice(-1)&&(o=t.raw.slice(-1)),r=!0,i=a[a.length-1],i&&"text"===i.type?(i.raw+=t.raw,i.text+=t.text):a.push(t);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(t.raw.length),a.push(t);return a}}class te{options;parser;constructor(t){this.options=t||e.defaults}space(e){return""}code(e){let{text:t,lang:i,escaped:n}=e;const s=(i||"").match(/^\S*/)?.[0],r=t.replace(/\n$/,"")+"\n";return s?'<pre><code class="language-'+h(s)+'">'+(n?r:h(r,!0))+"</code></pre>\n":"<pre><code>"+(n?r:h(r,!0))+"</code></pre>\n"}blockquote(e){let{tokens:t}=e;return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html(e){let{text:t}=e;return t}heading(e){let{tokens:t,depth:i}=e;return`<h${i}>${this.parser.parseInline(t)}</h${i}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,i=e.start;let n="";for(let r=0;r<e.items.length;r++){const t=e.items[r];n+=this.listitem(t)}const s=t?"ol":"ul";return"<"+s+(t&&1!==i?' start="'+i+'"':"")+">\n"+n+"</"+s+">\n"}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox(e){let{checked:t}=e;return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){let{tokens:t}=e;return`<p>${this.parser.parseInline(t)}</p>\n`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let n="";for(let s=0;s<e.rows.length;s++){const t=e.rows[s];i="";for(let e=0;e<t.length;e++)i+=this.tablecell(t[e]);n+=this.tablerow({text:i})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow(e){let{text:t}=e;return`<tr>\n${t}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>\n`}strong(e){let{tokens:t}=e;return`<strong>${this.parser.parseInline(t)}</strong>`}em(e){let{tokens:t}=e;return`<em>${this.parser.parseInline(t)}</em>`}codespan(e){let{text:t}=e;return`<code>${t}</code>`}br(e){return"<br>"}del(e){let{tokens:t}=e;return`<del>${this.parser.parseInline(t)}</del>`}link(e){let{href:t,title:i,tokens:n}=e;const s=this.parser.parseInline(n),r=u(t);if(null===r)return s;t=r;let o='<a href="'+t+'"';return i&&(o+=' title="'+i+'"'),o+=">"+s+"</a>",o}image(e){let{href:t,title:i,text:n}=e;const s=u(t);if(null===s)return n;t=s;let r=`<img src="${t}" alt="${n}"`;return i&&(r+=` title="${i}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class ie{strong(e){let{text:t}=e;return t}em(e){let{text:t}=e;return t}codespan(e){let{text:t}=e;return t}del(e){let{text:t}=e;return t}html(e){let{text:t}=e;return t}text(e){let{text:t}=e;return t}link(e){let{text:t}=e;return""+t}image(e){let{text:t}=e;return""+t}br(){return""}}class ne{options;renderer;textRenderer;constructor(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new te,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ie}static parse(e,t){return new ne(t).parse(e)}static parseInline(e,t){return new ne(t).parseInline(e)}parse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i="";for(let n=0;n<e.length;n++){const s=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const e=s,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){i+=t||"";continue}}const r=s;switch(r.type){case"space":i+=this.renderer.space(r);continue;case"hr":i+=this.renderer.hr(r);continue;case"heading":i+=this.renderer.heading(r);continue;case"code":i+=this.renderer.code(r);continue;case"table":i+=this.renderer.table(r);continue;case"blockquote":i+=this.renderer.blockquote(r);continue;case"list":i+=this.renderer.list(r);continue;case"html":i+=this.renderer.html(r);continue;case"paragraph":i+=this.renderer.paragraph(r);continue;case"text":{let s=r,o=this.renderer.text(s);for(;n+1<e.length&&"text"===e[n+1].type;)s=e[++n],o+="\n"+this.renderer.text(s);i+=t?this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o}]}):o;continue}default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let n=0;n<e.length;n++){const s=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const e=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=e||"";continue}}const r=s;switch(r.type){case"escape":case"text":i+=t.text(r);break;case"html":i+=t.html(r);break;case"link":i+=t.link(r);break;case"image":i+=t.image(r);break;case"strong":i+=t.strong(r);break;case"em":i+=t.em(r);break;case"codespan":i+=t.codespan(r);break;case"br":i+=t.br(r);break;case"del":i+=t.del(r);break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}}class se{options;constructor(t){this.options=t||e.defaults}static passThroughHooks=(()=>new Set(["preprocess","postprocess","processAllTokens"]))();preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}class re{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=(()=>this.parseMarkdown(ee.lex,ne.parse))();parseInline=(()=>this.parseMarkdown(ee.lexInline,ne.parseInline))();Parser=(()=>ne)();Renderer=(()=>te)();TextRenderer=(()=>ie)();Lexer=(()=>ee)();Tokenizer=(()=>_)();Hooks=(()=>se)();constructor(){this.use(...arguments)}walkTokens(e,t){let i=[];for(const n of e)switch(i=i.concat(t.call(this,n)),n.type){case"table":{const e=n;for(const n of e.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of e.rows)for(const e of n)i=i.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=n;i=i.concat(this.walkTokens(e.items,t));break}default:{const e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((n=>{const s=e[n].flat(1/0);i=i.concat(this.walkTokens(s,t))})):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(){const e=this.defaults.extensions||{renderers:{},childTokens:{}};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((t=>{const i={...t};if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){const i=e.renderers[t.name];e.renderers[t.name]=i?function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];let r=t.renderer.apply(this,n);return!1===r&&(r=i.apply(this,n)),r}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");const i=e[t.level];i?i.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),i.extensions=e),t.renderer){const e=this.defaults.renderer||new te(this.defaults);for(const i in t.renderer){if(!(i in e))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const n=i,s=t.renderer[n],r=e[n];e[n]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];let o=s.apply(e,i);return!1===o&&(o=r.apply(e,i)),o||""}}i.renderer=e}if(t.tokenizer){const e=this.defaults.tokenizer||new _(this.defaults);for(const i in t.tokenizer){if(!(i in e))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const n=i,s=t.tokenizer[n],r=e[n];e[n]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];let o=s.apply(e,i);return!1===o&&(o=r.apply(e,i)),o}}i.tokenizer=e}if(t.hooks){const e=this.defaults.hooks||new se;for(const i in t.hooks){if(!(i in e))throw new Error(`hook '${i}' does not exist`);if("options"===i)continue;const n=i,s=t.hooks[n],r=e[n];se.passThroughHooks.has(i)?e[n]=t=>{if(this.defaults.async)return Promise.resolve(s.call(e,t)).then((t=>r.call(e,t)));const i=s.call(e,t);return r.call(e,i)}:e[n]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];let o=s.apply(e,i);return!1===o&&(o=r.apply(e,i)),o}}i.hooks=e}if(t.walkTokens){const e=this.defaults.walkTokens,n=t.walkTokens;i.walkTokens=function(t){let i=[];return i.push(n.call(this,t)),e&&(i=i.concat(e.call(this,t))),i}}this.defaults={...this.defaults,...i}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ee.lex(e,t??this.defaults)}parser(e,t){return ne.parse(e,t??this.defaults)}parseMarkdown(e,t){return(i,n)=>{const s={...n},r={...this.defaults,...s},o=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===s.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if("undefined"===typeof i||null===i)return o(new Error("marked(): input parameter is undefined or null"));if("string"!==typeof i)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(i):i).then((t=>e(t,r))).then((e=>r.hooks?r.hooks.processAllTokens(e):e)).then((e=>r.walkTokens?Promise.all(this.walkTokens(e,r.walkTokens)).then((()=>e)):e)).then((e=>t(e,r))).then((e=>r.hooks?r.hooks.postprocess(e):e)).catch(o);try{r.hooks&&(i=r.hooks.preprocess(i));let n=e(i,r);r.hooks&&(n=r.hooks.processAllTokens(n)),r.walkTokens&&this.walkTokens(n,r.walkTokens);let s=t(n,r);return r.hooks&&(s=r.hooks.postprocess(s)),s}catch(O2){return o(O2)}}}onError(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+h(i.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(i);throw i}}}const oe=new re;function ae(e,t){return oe.parse(e,t)}ae.options=ae.setOptions=function(e){return oe.setOptions(e),ae.defaults=oe.defaults,i(ae.defaults),ae},ae.getDefaults=t,ae.defaults=e.defaults,ae.use=function(){return oe.use(...arguments),ae.defaults=oe.defaults,i(ae.defaults),ae},ae.walkTokens=function(e,t){return oe.walkTokens(e,t)},ae.parseInline=oe.parseInline,ae.Parser=ne,ae.parser=ne.parse,ae.Renderer=te,ae.TextRenderer=ie,ae.Lexer=ee,ae.lexer=ee.lex,ae.Tokenizer=_,ae.Hooks=se,ae.parse=ae;const le=ae.options,he=ae.setOptions,ce=ae.use,de=ae.walkTokens,ue=ae.parseInline,ge=ae,pe=ne.parse,fe=ee.lex;e.Hooks=se,e.Lexer=ee,e.Marked=re,e.Parser=ne,e.Renderer=te,e.TextRenderer=ie,e.Tokenizer=_,e.getDefaults=t,e.lexer=fe,e.marked=ae,e.options=le,e.parse=ge,e.parseInline=ue,e.parser=pe,e.setOptions=he,e.use=ce,e.walkTokens=de},e.amd?e(0,i):"object"===typeof exports?i(exports):i((t="undefined"!==typeof globalThis?globalThis:t||self).marked={})}();$N.Hooks||exports.Hooks,$N.Lexer||exports.Lexer,$N.Marked||exports.Marked,$N.Parser||exports.Parser;var qN=$N.Renderer||exports.Renderer,QN=($N.TextRenderer||exports.TextRenderer,$N.Tokenizer||exports.Tokenizer,$N.defaults||exports.defaults),XN=($N.getDefaults||exports.getDefaults,$N.lexer||exports.lexer),YN=($N.marked||exports.marked,$N.options||exports.options,$N.parse||exports.parse),ZN=($N.parseInline||exports.parseInline,$N.parser||exports.parser),JN=($N.setOptions||exports.setOptions,$N.use||exports.use,$N.walkTokens||exports.walkTokens,i(1137));function eI(e){let t=JSON.parse(e);return t=iI(t),t}function tI(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function iI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||t>200)return e;if("object"===typeof e){switch(e.$mid){case 1:return Dx.r.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof JN.MB||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=iI(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=iI(e[i],t+1))}return e}const nI=Object.freeze({image:e=>{let{href:t,title:i,text:n}=e,s=[],r=[];return t&&(({href:t,dimensions:s}=function(e){const t=[],i=e.split("|").map((e=>e.trim()));e=i[0];const n=i[1];if(n){const e=/height=(\d+)/.exec(n),i=/width=(\d+)/.exec(n),s=e?e[1]:"",r=i?i[1]:"",o=isFinite(parseInt(r)),a=isFinite(parseInt(s));o&&t.push(`width="${r}"`),a&&t.push(`height="${s}"`)}return{href:e,dimensions:t}}(t)),r.push(`src="${HN(t)}"`)),n&&r.push(`alt="${HN(n)}"`),i&&r.push(`title="${HN(i)}"`),s.length&&(r=r.concat(s)),"<img "+r.join(" ")+">"},paragraph(e){let{tokens:t}=e;return`<p>${this.parser.parseInline(t)}</p>`},link(e){let{href:t,title:i,tokens:n}=e,s=this.parser.parseInline(n);return"string"!==typeof t?"":(t===s&&(s=UN(s)),i="string"===typeof i?HN(UN(i)):"",t=UN(t),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${t}" title="${i||t}" draggable="false">${s}</a>`)}});function sI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new Mx.Cm;let s=!1;const r=VD(t),o=function(t){let i;try{i=eI(decodeURIComponent(t))}catch(O2){}return i?(i=(0,FS.PI)(i,(t=>e.uris&&e.uris[t]?Dx.r.revive(e.uris[t]):void 0)),encodeURIComponent(JSON.stringify(i))):t},a=function(t,i){const n=e.uris&&e.uris[t];let s=Dx.r.revive(n);return i?t.startsWith(uL.ny.data+":")?t:(s||(s=Dx.r.parse(t)),uL.zl.uriToBrowserUri(s).toString(!0)):s?Dx.r.parse(t).toString()===s.toString()?t:(s.query&&(s=s.with({query:o(s.query)})),s.toString()):t},l=new qN;l.image=nI.image,l.link=nI.link,l.paragraph=nI.paragraph;const h=[],c=[];if(t.codeBlockRendererSync?l.code=e=>{let{text:i,lang:n}=e;const s=GN.nextId(),r=t.codeBlockRendererSync(rI(n),i);return c.push([s,r]),`<div class="code" data-code="${s}">${(0,Tx.ih)(i)}</div>`}:t.codeBlockRenderer&&(l.code=e=>{let{text:i,lang:n}=e;const s=GN.nextId(),r=t.codeBlockRenderer(rI(n),i);return h.push(r.then((e=>[s,e]))),`<div class="code" data-code="${s}">${(0,Tx.ih)(i)}</div>`}),t.actionHandler){const i=function(i){let n=i.target;if("A"===n.tagName||(n=n.parentElement,n&&"A"===n.tagName))try{let s=n.dataset.href;s&&(e.baseUri&&(s=oI(Dx.r.from(e.baseUri),s)),t.actionHandler.callback(s,i))}catch(s){(0,Ux.dz)(s)}finally{i.preventDefault()}},n=t.actionHandler.disposables.add(new BD(r,"click")),s=t.actionHandler.disposables.add(new BD(r,"auxclick"));t.actionHandler.disposables.add(rk.Jh.any(n.event,s.event)((e=>{const t=new ik(fL(r),e);(t.leftButton||t.middleButton)&&i(t)}))),t.actionHandler.disposables.add(EL(r,"keydown",(e=>{const t=new Zx(e);(t.equals(10)||t.equals(3))&&i(t)})))}e.supportHtml||(l.html=i=>{let{text:n}=i;if(t.sanitizerOptions?.replaceWithPlaintext)return(0,Tx.ih)(n);return(e.isTrusted?n.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?n:""}),i.renderer=l;let d=e.value??"";let u;if(d.length>1e5&&(d=`${d.substr(0,1e5)}\u2026`),e.supportThemeIcons&&(d=d.replace(AN,(e=>`\\${e}`))),t.fillInIncompleteTokens){const e={...QN,...i},t=function(e){for(let t=0;t<bI;t++){const t=yI(e);if(!t)break;e=t}return e}(XN(d,e));u=ZN(t,e)}else u=YN(d,{...i,async:!1});if(e.supportThemeIcons){u=KD(u).map((e=>"string"===typeof e?e:e.outerHTML)).join("")}const g=(new DOMParser).parseFromString(lI({isTrusted:e.isTrusted,...t.sanitizerOptions},u),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach((i=>{const n=i.getAttribute("src");if(n){let r=n;try{e.baseUri&&(r=oI(Dx.r.from(e.baseUri),r))}catch(s){}if(i.setAttribute("src",a(r,!0)),t.remoteImageIsAllowed){const e=Dx.r.parse(r);e.scheme===uL.ny.file||e.scheme===uL.ny.data||t.remoteImageIsAllowed(e)||i.replaceWith(xE("",void 0,i.outerHTML))}}})),g.body.querySelectorAll("a").forEach((t=>{const i=t.getAttribute("href");if(t.setAttribute("href",""),!i||/^data:|javascript:/i.test(i)||/^command:/i.test(i)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(i))t.replaceWith(...t.childNodes);else{let n=a(i,!1);e.baseUri&&(n=oI(Dx.r.from(e.baseUri),i)),t.dataset.href=n}})),r.innerHTML=lI({isTrusted:e.isTrusted,...t.sanitizerOptions},g.body.innerHTML),h.length>0)Promise.all(h).then((e=>{if(s)return;const i=new Map(e),n=r.querySelectorAll("div[data-code]");for(const t of n){const e=i.get(t.dataset.code??"");e&&yE(t,e)}t.asyncRenderCallback?.()}));else if(c.length>0){const e=new Map(c),t=r.querySelectorAll("div[data-code]");for(const i of t){const t=e.get(i.dataset.code??"");t&&yE(i,t)}}if(t.asyncRenderCallback)for(const p of r.getElementsByTagName("img")){const e=n.add(EL(p,"load",(()=>{e.dispose(),t.asyncRenderCallback()})))}return{element:r,dispose:()=>{s=!0,n.dispose()}}}function rI(e){if(!e)return"";const t=e.split(/[\s+|:|,|\{|\?]/,1);return t.length?t[0]:e}function oI(e,t){return/^\w[\w\d+.-]*:/.test(t)?t:e.path.endsWith("/")?(0,zN.o1)(e,t).toString():(0,zN.o1)((0,zN.pD)(e),t).toString()}const aI=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function lI(e,t){const{config:i,allowedSchemes:n}=function(e){const t=[uL.ny.http,uL.ny.https,uL.ny.mailto,uL.ny.data,uL.ny.file,uL.ny.vscodeFileResource,uL.ny.vscodeRemote,uL.ny.vscodeRemoteResource];e.isTrusted&&t.push(uL.ny.command);return{config:{ALLOWED_TAGS:e.allowedTags??[...IE],ALLOWED_ATTR:hI,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:t}}(e),s=new Mx.Cm;s.add(DI("uponSanitizeAttribute",((e,t)=>{if("style"!==t.attrName&&"class"!==t.attrName){if("INPUT"===e.tagName&&"checkbox"===e.attributes.getNamedItem("type")?.value){if("type"===t.attrName&&"checkbox"===t.attrValue||"disabled"===t.attrName||"checked"===t.attrName)return void(t.keepAttr=!0);t.keepAttr=!1}}else{if("SPAN"===e.tagName){if("style"===t.attrName)return void(t.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(t.attrValue));if("class"===t.attrName)return void(t.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(t.attrValue))}t.keepAttr=!1}}))),s.add(DI("uponSanitizeElement",((t,i)=>{if("input"===i.tagName&&("checkbox"===t.attributes.getNamedItem("type")?.value?t.setAttribute("disabled",""):e.replaceWithPlaintext||t.remove()),e.replaceWithPlaintext&&!i.allowedTags[i.tagName]&&"body"!==i.tagName&&t.parentElement){let e,n;if("#comment"===i.tagName)e=`\x3c!--${t.textContent}--\x3e`;else{const s=aI.includes(i.tagName),r=t.attributes.length?" "+Array.from(t.attributes).map((e=>`${e.name}="${e.value}"`)).join(" "):"";e=`<${i.tagName}${r}>`,s||(n=`</${i.tagName}>`)}const s=document.createDocumentFragment(),r=t.parentElement.ownerDocument.createTextNode(e);s.appendChild(r);const o=n?t.parentElement.ownerDocument.createTextNode(n):void 0;for(;t.firstChild;)s.appendChild(t.firstChild);o&&s.appendChild(o),t.nodeType===Node.COMMENT_NODE?t.parentElement.insertBefore(s,t):t.parentElement.replaceChild(s,t)}}))),s.add(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=document.createElement("a");return cL("afterSanitizeAttributes",(n=>{for(const s of["href","src"])if(n.hasAttribute(s)){const r=n.getAttribute(s);if("href"===s&&r.startsWith("#"))continue;if(i.href=r,!e.includes(i.protocol.replace(/:$/,""))){if(t&&"src"===s&&i.href.startsWith("data:"))continue;n.removeAttribute(s)}}})),(0,Mx.s)((()=>{dL("afterSanitizeAttributes")}))}(n));try{return hL(t,{...i,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const hI=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function cI(e){return"string"===typeof e?e:function(e,t){let i=e.value??"";i.length>1e5&&(i=`${i.substr(0,1e5)}\u2026`);const n=YN(i,{async:!1,renderer:t?pI.value:gI.value}).replace(/&(#\d+|[a-zA-Z]+);/g,(e=>dI.get(e)??e));return lI({isTrusted:!1},n).toString()}(e)}const dI=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function uI(){const e=new qN;return e.code=e=>{let{text:t}=e;return t},e.blockquote=e=>{let{text:t}=e;return t+"\n"},e.html=e=>"",e.heading=function(e){let{tokens:t}=e;return this.parser.parseInline(t)+"\n"},e.hr=()=>"",e.list=function(e){let{items:t}=e;return t.map((e=>this.listitem(e))).join("\n")+"\n"},e.listitem=e=>{let{text:t}=e;return t+"\n"},e.paragraph=function(e){let{tokens:t}=e;return this.parser.parseInline(t)+"\n"},e.table=function(e){let{header:t,rows:i}=e;return t.map((e=>this.tablecell(e))).join(" ")+"\n"+i.map((e=>e.map((e=>this.tablecell(e))).join(" "))).join("\n")+"\n"},e.tablerow=e=>{let{text:t}=e;return t},e.tablecell=function(e){let{tokens:t}=e;return this.parser.parseInline(t)},e.strong=e=>{let{text:t}=e;return t},e.em=e=>{let{text:t}=e;return t},e.codespan=e=>{let{text:t}=e;return t},e.br=e=>"\n",e.del=e=>{let{text:t}=e;return t},e.image=e=>"",e.text=e=>{let{text:t}=e;return t},e.link=e=>{let{text:t}=e;return t},e}const gI=new KN.d((e=>uI())),pI=new KN.d((()=>{const e=uI();return e.code=e=>{let{text:t}=e;return`\n\`\`\`\n${t}\n\`\`\`\n`},e}));function fI(e){let t="";return e.forEach((e=>{t+=e.raw})),t}function mI(e){if(e.tokens)for(let t=e.tokens.length-1;t>=0;t--){const i=e.tokens[t];if("text"===i.type){const n=i.raw.split("\n"),s=n[n.length-1];if(s.includes("`"))return wI(e);if(s.includes("**"))return MI(e,"**");if(s.match(/\*\w/))return CI(e);if(s.match(/(^|\s)__\w/))return EI(e);if(s.match(/(^|\s)_\w/))return SI(e);if(s.match(/(^|\s)\[.*\]\(\w*/)||_I(s)&&e.tokens.slice(0,t).some((e=>"text"===e.type&&e.raw.match(/\[[^\]]*$/)))){const i=e.tokens.slice(t+1);return"link"===i[0]?.type&&"text"===i[1]?.type&&i[1].raw.match(/^ *"[^"]*$/)||s.match(/^[^"]* +"[^"]*$/)?kI(e):xI(e)}if(s.match(/(^|\s)\[\w*/))return LI(e)}}}function _I(e){return!!e.match(/^[^\[]*\]\([^\)]*$/)}function vI(e){const t=e.items[e.items.length-1],i=t.tokens?t.tokens[t.tokens.length-1]:void 0;let n;if("text"!==i?.type||"inRawBlock"in t||(n=mI(i)),!n||"paragraph"!==n.type)return;const s=fI(e.items.slice(0,-1)),r=t.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!r)return;const o=r+fI(t.tokens.slice(0,-1))+n.raw,a=XN(s+o)[0];return"list"===a.type?a:void 0}const bI=3;function yI(e){let t,i;for(t=0;t<e.length;t++){const n=e[t];if("paragraph"===n.type&&n.raw.match(/(\n|^)\|/)){i=TI(e.slice(t));break}if(t===e.length-1&&"list"===n.type){const e=vI(n);if(e){i=[e];break}}if(t===e.length-1&&"paragraph"===n.type){const e=mI(n);if(e){i=[e];break}}}if(i){const n=[...e.slice(0,t),...i];return n.links=e.links,n}return null}function wI(e){return MI(e,"`")}function CI(e){return MI(e,"*")}function SI(e){return MI(e,"_")}function xI(e){return MI(e,")")}function kI(e){return MI(e,'")')}function LI(e){return MI(e,"](https://microsoft.com)")}function EI(e){return MI(e,"__")}function MI(e,t){const i=fI(Array.isArray(e)?e:[e]);return XN(i+t)[0]}function TI(e){const t=fI(e),i=t.split("\n");let n,s=!1;for(let r=0;r<i.length;r++){const e=i[r].trim();if("undefined"===typeof n&&e.match(/^\s*\|/)){const t=e.match(/(\|[^\|]+)(?=\||$)/g);t&&(n=t.length)}else if("number"===typeof n){if(!e.match(/^\s*\|/))return;if(r!==i.length-1)return;s=!0}}if("number"===typeof n&&n>0){const e=s?i.slice(0,-1).join("\n"):t,r=!!e.match(/\|\s*$/),o=e+(r?"":"|")+`\n|${" --- |".repeat(n)}`;return XN(o)}}function DI(e,t){return cL(e,t),(0,Mx.s)((()=>dL(e)))}var NI=i(5937),II=i(6696),AI=i(5512),RI=i(4470),PI=i(4959);const OI={getInitialState:()=>PI.r3,tokenizeEncoded:(e,t,i)=>(0,PI.Lh)(0,i)};function FI(e,t,i,n,s,r,o){let a="<div>",l=n,h=0,c=!0;for(let d=0,u=t.getCount();d<u;d++){const u=t.getEndOffset(d);if(u<=n)continue;let g="";for(;l<u&&l<s;l++){const t=e.charCodeAt(l);switch(t){case 9:{let e=r-(l+h)%r;for(h+=e-1;e>0;)o&&c?(g+="&#160;",c=!1):(g+=" ",c=!0),e--;break}case 60:g+="&lt;",c=!1;break;case 62:g+="&gt;",c=!1;break;case 38:g+="&amp;",c=!1;break;case 0:g+="&#00;",c=!1;break;case 65279:case 8232:case 8233:case 133:g+="\ufffd",c=!1;break;case 13:g+="&#8203",c=!1;break;case 32:o&&c?(g+="&#160;",c=!1):(g+=" ",c=!0);break;default:g+=String.fromCharCode(t),c=!1}}if(a+=`<span style="${t.getInlineStyle(d,i)}">${g}</span>`,u>s||l>=s)break}return a+="</div>",a}function BI(e,t,i){let n='<div class="monaco-tokenized-source">';const s=Tx.uz(e);let r=i.getInitialState();for(let o=0,a=s.length;o<a;o++){const e=s[o];o>0&&(n+="<br/>");const a=i.tokenizeEncoded(e,!0,r);AI.f.convertToEndOffset(a.tokens,e.length);const l=new AI.f(a.tokens,e,t).inflate();let h=0;for(let t=0,i=l.getCount();t<i;t++){const i=l.getClassName(t),s=l.getEndOffset(t);n+=`<span class="${i}">${Tx.ih(e.substring(h,s))}</span>`,h=s}r=a.endState}return n+="</div>",n}var zI,VI=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},WI=function(e,t){return function(i,n){t(i,n,e)}};let HI=class{static#e=(()=>zI=this)();static#t=(()=>this._ttpTokenizer=KM("tokenizeToString",{createHTML:e=>e}))();constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new rk.vl,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){return{element:document.createElement("span"),dispose:()=>{}}}const n=new Mx.Cm,s=n.add(sI(e,{...this._getRenderOptions(e,n),...t},i));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(e,t)=>{let i;e?i=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(i=this._options.editor.getModel()?.getLanguageId()),i||(i=II.vH);const n=await async function(e,t,i){if(!i)return BI(t,e.languageIdCodec,OI);const n=await RI.dG.getOrCreate(i);return BI(t,e.languageIdCodec,n||OI)}(this._languageService,t,i),s=document.createElement("span");if(s.innerHTML=zI._ttpTokenizer?.createHTML(n)??n,this._options.editor){jE(s,this._options.editor.getOption(50))}else this._options.codeBlockFontFamily&&(s.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(s.style.fontSize=this._options.codeBlockFontSize),s},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:t=>UI(this._openerService,t,e.isTrusted),disposables:t}}}};async function UI(e,t,i){try{return await e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:jI(i)})}catch(O2){return(0,Ux.dz)(O2),!1}}function jI(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}HI=zI=VI([WI(1,NI.L),WI(2,FD)],HI);const GI=(0,eM.u1)("accessibilityService"),KI=new mM.N1("accessibilityModeEnabled",!1),$I=2e4;let qI,QI,XI,YI,ZI;function JI(e){qI&&(QI.textContent!==e?(kL(XI),tA(QI,e)):(kL(QI),tA(XI,e)))}function eA(e){qI&&(YI.textContent!==e?(kL(ZI),tA(YI,e)):(kL(YI),tA(ZI,e)))}function tA(e,t){kL(e),t.length>$I&&(t=t.substr(0,$I)),e.textContent=t,e.style.visibility="hidden",e.style.visibility="visible"}var iA=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},nA=function(e,t){return function(i,n){t(i,n,e)}};const sA=xE;let rA=class extends uD{get _targetWindow(){return fL(this._target.targetElements[0])}get _targetDocumentElement(){return fL(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return 2===this._hoverPosition?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,s,r){super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=s,this._accessibilityService=r,this._messageListeners=new Mx.Cm,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new rk.vl),this._onRequestLayout=this._register(new rk.vl),this._linkHandler=e.linkHandler||(t=>UI(this._openerService,t,WN(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new aA(e.target),this._hoverPointer=e.appearance?.showPointer?sA("div.workbench-hover-pointer"):void 0,this._hover=this._register(new AD),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),e.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.appearance?.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=e.position?.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,(e=>e.stopPropagation())),this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9)&&this.dispose()})),this._register(EL(this._targetWindow,"blur",(()=>this.dispose())));const o=sA("div.hover-row.markdown-hover"),a=sA("div.hover-contents");if("string"===typeof e.content)a.textContent=e.content,a.style.whiteSpace="pre-wrap";else if(hE(e.content))a.appendChild(e.content),a.classList.add("html-hover-contents");else{const t=e.content,i=this._instantiationService.createInstance(HI,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Cx.fontFamily}),{element:n}=i.render(t,{actionHandler:{callback:e=>this._linkHandler(e),disposables:this._messageListeners},asyncRenderCallback:()=>{a.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});a.appendChild(n)}if(o.appendChild(a),this._hover.contentsDomNode.appendChild(o),e.actions&&e.actions.length>0){const t=sA("div.hover-row.status-bar"),i=sA("div.actions");e.actions.forEach((e=>{const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;RD.render(i,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},n)})),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}let l;if(this._hoverContainer=sA("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),l=!(e.actions&&e.actions.length>0)&&(void 0===e.persistence?.hideOnHover?"string"===typeof e.content||WN(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover),e.appearance?.showHoverHint){const e=sA("div.hover-row.status-bar"),t=sA("div.info");t.textContent=(0,WS.kg)("hoverhint","Hold {0} key to mouse over",BS.zx?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}const h=[...this._target.targetElements];l||h.push(this._hoverContainer);const c=this._register(new oA(h));if(this._register(c.onMouseOut((()=>{this._isLocked||this.dispose()}))),l){const e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new oA(e)),this._register(this._lockMouseTracker.onMouseOut((()=>{this._isLocked||this.dispose()})))}else this._lockMouseTracker=c}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=bE(this._hoverContainer,sA("div")),n=vE(this._hoverContainer,sA("div"));i.tabIndex=0,n.tabIndex=0,this._register(EL(n,"focus",(t=>{e.focus(),t.preventDefault()}))),this._register(EL(i,"focus",(e=>{t.focus(),e.preventDefault()})))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const e=i;if("number"===typeof e.tabIndex&&e.tabIndex>=0)return e}const n=this.findLastFocusableChild(i);if(n)return n}}render(e){e.appendChild(this._hoverContainer);const t=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&(i=!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),n=this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel(),i&&n?(0,WS.kg)("acessibleViewHint","Inspect this in the accessible view with {0}.",n):i?(0,WS.kg)("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):"");var i,n;t&&eA(t),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=this._target.targetElements.map((e=>(e=>{const t=VL(e),i=e.getBoundingClientRect();return{top:i.top*t,bottom:i.bottom*t,right:i.right*t,left:i.left*t}})(e))),{top:t,right:i,bottom:n,left:s}=e[0],r=i-s,o=n-t,a={top:t,right:i,bottom:n,left:s,width:r,height:o,center:{x:s+r/2,y:t+o/2}};if(this.adjustHorizontalHoverPosition(a),this.adjustVerticalHoverPosition(a),this.adjustHoverMaxHeight(a),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:a.left+=3,a.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:a.left-=3,a.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:a.top+=3,a.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:a.top-=3,a.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}a.center.x=a.left+r/2,a.center.y=a.top+o/2}this.computeXCordinate(a),this.computeYCordinate(a),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(a)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0!==this._target.x)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth=this._targetDocumentElement.clientWidth-e.right-i+"px":0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth=e.left-i+"px")}else if(1===this._hoverPosition){if(this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t){e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2}}else if(0===this._hoverPosition){if(e.left<this._hover.containerDomNode.clientWidth+t){this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2}e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1)}}adjustVerticalHoverPosition(e){if(void 0!==this._target.y||this._forcePosition)return;const t=this._hoverPointer?3:0;3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=2+(this._hoverPointer?3:0);3===this._hoverPosition?t=Math.min(t,e.top-i):2===this._hoverPosition&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const e=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=e.center.y-(this._y-t)-3+"px":this._hoverPointer.style.top=Math.round(t/2)-3+"px";break}case 3:case 2:{this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};rA=iA([nA(1,oD),nA(2,JT.pG),nA(3,FD),nA(4,eM._Y),nA(5,GI)],rA);class oA extends uD{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new rk.vl),this._elements.forEach((e=>this.onmouseover(e,(()=>this._onTargetMouseOver(e))))),this._elements.forEach((e=>this.onmouseleave(e,(()=>this._onTargetMouseLeave(e)))))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=fL(e).setTimeout((()=>this._fireIfMouseOutside()),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(fL(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class aA{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var lA,hA;function cA(e,t,i){const n=i.mode===hA.ALIGN?i.offset:i.offset+i.size,s=i.mode===hA.ALIGN?i.offset+i.size:i.offset;return 0===i.position?t<=e-n?n:t<=s?s-t:Math.max(e-t,0):t<=s?s-t:t<=e-n?n:0}!function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};const i=Math.max(e.start,t.start),n=Math.min(e.end,t.end);return n-i<=0?{start:0,end:0}:{start:i,end:n}}function i(e){return e.end-e.start<=0}e.intersect=t,e.isEmpty=i,e.intersects=function(e,n){return!i(t(e,n))},e.relativeComplement=function(e,t){const n=[],s={start:e.start,end:Math.min(t.start,e.end)},r={start:Math.max(t.end,e.start),end:e.end};return i(s)||n.push(s),i(r)||n.push(r),n}}(lA||(lA={})),function(e){e[e.AVOID=0]="AVOID",e[e.ALIGN=1]="ALIGN"}(hA||(hA={}));class dA extends Mx.jG{static#e=(()=>this.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"])();static#t=(()=>this.BUBBLE_DOWN_EVENTS=["click"])();constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=Mx.jG.None,this.toDisposeOnSetContainer=Mx.jG.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=xE(".context-view"),LE(this.view),this.setContainer(e,t),this._register((0,Mx.s)((()=>this.setContainer(null,1))))}setContainer(e,t){this.useFixedPosition=1!==t;const i=this.useShadowDOM;if(this.useShadowDOM=3===t,(e!==this.container||i!==this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=xE(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent=uA,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(xE("slot"))}else this.container.appendChild(this.view);const t=new Mx.Cm;dA.BUBBLE_UP_EVENTS.forEach((e=>{t.add(TL(this.container,e,(e=>{this.onDOMEvent(e,!1)})))})),dA.BUBBLE_DOWN_EVENTS.forEach((e=>{t.add(TL(this.container,e,(e=>{this.onDOMEvent(e,!0)}),!0))})),this.toDisposeOnSetContainer=t}}show(e){this.isVisible()&&this.hide(),kL(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",kE(this.view),this.toDisposeOnClean=e.render(this.view)||Mx.jG.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){this.isVisible()&&(!1!==this.delegate.canRelayout||BS.un&&Wx?(this.delegate?.layout?.(),this.doLayout()):this.hide())}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(hE(e)){const i=zL(e),n=VL(e);t={top:i.top*n,left:i.left*n,width:i.width*n,height:i.height*n}}else t=function(e){const t=e;return!!t&&"number"===typeof t.x&&"number"===typeof t.y}(e)?{top:e.y,left:e.x,width:e.width||1,height:e.height||2}:{top:e.posy,left:e.posx,width:2,height:2};const i=WL(this.view),n=jL(this.view),s=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,o=this.delegate.anchorAxisAlignment||0;let a,l;const h=eE();if(0===o){const e={offset:t.top-h.pageYOffset,size:t.height,position:0===s?0:1},o={offset:t.left,size:t.width,position:0===r?0:1,mode:hA.ALIGN};a=cA(h.innerHeight,n,e)+h.pageYOffset,lA.intersects({start:a,end:a+n},{start:e.offset,end:e.offset+e.size})&&(o.mode=hA.AVOID),l=cA(h.innerWidth,i,o)}else{const e={offset:t.left,size:t.width,position:0===r?0:1},o={offset:t.top,size:t.height,position:0===s?0:1,mode:hA.ALIGN};l=cA(h.innerWidth,i,e),lA.intersects({start:l,end:l+i},{start:e.offset,end:e.offset+e.size})&&(o.mode=hA.AVOID),a=cA(h.innerHeight,n,o)+h.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(0===s?"bottom":"top"),this.view.classList.add(0===r?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const c=zL(this.container);this.view.style.top=a-(this.useFixedPosition?zL(this.view).top:c.top)+"px",this.view.style.left=l-(this.useFixedPosition?zL(this.view).left:c.left)+"px",this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),LE(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,fL(e).document.activeElement):t&&!GL(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}const uA='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n';var gA=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},pA=function(e,t){return function(i,n){t(i,n,e)}};let fA=class extends Mx.jG{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new dA(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer((()=>this.layout())))}showContextView(e,t,i){let n;n=t?t===this.layoutService.getContainer(fL(t))?1:i?3:2:1,this.contextView.setContainer(t??this.layoutService.activeContainer,n),this.contextView.show(e);const s={close:()=>{this.openContextView===s&&this.hideContextView()}};return this.openContextView=s,s}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};fA=gA([pA(0,ET)],fA);class mA extends fA{getContextViewElement(){return this.contextView.getViewElement()}}var _A=i(1900);class vA{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let n;if(void 0===e||(0,gM.Kg)(e)||hE(e))n=e;else if((0,gM.Tn)(e.markdown)){this._hoverWidget||this.show((0,WS.kg)("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new _A.Qi;const s=this._cancellationTokenSource.token;if(n=await e.markdown(s),void 0===n&&(n=e.markdownNotSupportedFallback),this.isDisposed||s.isCancellationRequested)return}else n=e.markdown??e.markdownNotSupportedFallback;this.show(n,t,i)}show(e,t,i){const n=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,actions:i?.actions,linkHandler:i?.linkHandler,trapFocus:i?.trapFocus,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!n,showHoverHint:i?.appearance?.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(s,t)}n?.dispose()}hasContent(e){return!!e&&(!WN(e)||!!e.value)}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}var bA=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},yA=function(e,t){return function(i,n){t(i,n,e)}};let wA=class extends Mx.jG{constructor(e,t,i,n,s){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=n,this._accessibilityService=s,this._managedHovers=new Map,t.onDidShowContextMenu((()=>this.hideHover())),this._contextViewHandler=this._register(new fA(this._layoutService))}showHover(e,t,i){if(CA(this._currentHoverOptions)===CA(e))return;if(this._currentHover&&this._currentHoverOptions?.persistence?.sticky)return;this._currentHoverOptions=e,this._lastHoverOptions=e;const n=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),s=XL();i||(n&&s?s.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=s):this._lastFocusedElementBeforeOpen=void 0);const r=new Mx.Cm,o=this._instantiationService.createInstance(rA,e);if(e.persistence?.sticky&&(o.isLocked=!0),o.onDispose((()=>{this._currentHover?.domNode&&ZL(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),r.dispose()}),void 0,r),!e.container){const t=hE(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(fL(t))}if(this._contextViewHandler.showContextView(new SA(o,t),e.container),o.onRequestLayout((()=>this._contextViewHandler.layout()),void 0,r),e.persistence?.sticky)r.add(EL(fL(e.container).document,gE.MOUSE_DOWN,(e=>{GL(e.target,o.domNode)||this.doHideHover()})));else{if("targetElements"in e.target)for(const i of e.target.targetElements)r.add(EL(i,gE.CLICK,(()=>this.hideHover())));else r.add(EL(e.target,gE.CLICK,(()=>this.hideHover())));const t=XL();if(t){const i=fL(t).document;r.add(EL(t,gE.KEY_DOWN,(t=>this._keyDown(t,o,!!e.persistence?.hideOnKeyDown)))),r.add(EL(i,gE.KEY_DOWN,(t=>this._keyDown(t,o,!!e.persistence?.hideOnKeyDown)))),r.add(EL(t,gE.KEY_UP,(e=>this._keyUp(e,o)))),r.add(EL(i,gE.KEY_UP,(e=>this._keyUp(e,o))))}}if("IntersectionObserver"in Ex){const t=new IntersectionObserver((e=>this._intersectionChange(e,o)),{threshold:0}),i="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(i),r.add((0,Mx.s)((()=>t.disconnect())))}return this._currentHover=o,o}hideHover(){!this._currentHover?.isLocked&&this._currentHoverOptions&&this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){if("Alt"===e.key)return void(t.isLocked=!0);const n=new Zx(e);this._keybindingService.resolveKeyboardEvent(n).getSingleModifierDispatchChords().some((e=>!!e))||0!==this._keybindingService.softDispatch(n,n.target).kind||!i||this._currentHoverOptions?.trapFocus&&"Tab"===e.key||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){"Alt"===e.key&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(e,t,i,n){let s,r;t.setAttribute("custom-hover","true"),""!==t.title&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");const o=(t,i)=>{const n=void 0!==r;t&&(r?.dispose(),r=void 0),i&&(s?.dispose(),s=void 0),n&&(e.onDidHideHover?.(),r=void 0)},a=(s,o,a,l)=>new sk.pc((async()=>{r&&!r.isDisposed||(r=new vA(e,a||t,s>0),await r.update("function"===typeof i?i():i,o,{...n,trapFocus:l}))}),s);let l=!1;const h=EL(t,gE.MOUSE_DOWN,(()=>{l=!0,o(!0,!0)}),!0),c=EL(t,gE.MOUSE_UP,(()=>{l=!1}),!0),d=EL(t,gE.MOUSE_LEAVE,(e=>{l=!1,o(!1,e.fromElement===t)}),!0),u=EL(t,gE.MOUSE_OVER,(i=>{if(s)return;const n=new Mx.Cm,r={targetElements:[t],dispose:()=>{}};if(void 0===e.placement||"mouse"===e.placement){const e=e=>{r.x=e.x+10,hE(e.target)&&xA(e.target,t)!==t&&o(!0,!0)};n.add(EL(t,gE.MOUSE_MOVE,e,!0))}s=n,hE(i.target)&&xA(i.target,t)!==t||n.add(a(e.delay,!1,r))}),!0),g=()=>{if(l||s)return;const i={targetElements:[t],dispose:()=>{}},n=new Mx.Cm;n.add(EL(t,gE.BLUR,(()=>o(!0,!0)),!0)),n.add(a(e.delay,!1,i)),s=n};let p;const f=t.tagName.toLowerCase();"input"!==f&&"textarea"!==f&&(p=EL(t,gE.FOCUS,g,!0));const m={show:e=>{o(!1,!0),a(0,e,void 0,e)},hide:()=>{o(!0,!0)},update:async(e,t)=>{i=e,await(r?.update(i,void 0,t))},dispose:()=>{this._managedHovers.delete(t),u.dispose(),d.dispose(),h.dispose(),c.dispose(),p?.dispose(),o(!0,!0)}};return this._managedHovers.set(t,m),m}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach((e=>e.dispose())),super.dispose()}};function CA(e){if(void 0!==e)return e?.id??e}wA=bA([yA(0,eM._Y),yA(1,rD),yA(2,oD),yA(3,ET),yA(4,GI)],wA);class SA{get anchorPosition(){return this._hover.anchor}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function xA(e,t){for(t=t??fL(e).document.body;!e.hasAttribute("custom-hover")&&e!==t;)e=e.parentElement;return e}(0,ST.v)(iD,wA,1),(0,bT.zy)(((e,t)=>{const i=e.getColor(ZT.oZ8);i&&(t.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`))}));const kA=(0,eM.u1)("IWorkspaceEditService");class LA{constructor(e){this.metadata=e}static convert(e){return e.edits.map((e=>{if(EA.is(e))return EA.lift(e);if(MA.is(e))return MA.lift(e);throw new Error("Unsupported edit")}))}}class EA extends LA{static is(e){return e instanceof EA||(0,gM.Gv)(e)&&Dx.r.isUri(e.resource)&&(0,gM.Gv)(e.textEdit)}static lift(e){return e instanceof EA?e:new EA(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(arguments.length>3?arguments[3]:void 0),this.resource=e,this.textEdit=t,this.versionId=i}}class MA extends LA{static is(e){return e instanceof MA||(0,gM.Gv)(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof MA?e:new MA(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(arguments.length>3?arguments[3]:void 0),this.oldResource=e,this.newResource=t,this.options=i}}const TA={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1};var DA=i(3515);const NA={...Object.freeze({id:"editor",order:5,type:"object",title:WS.kg("editorConfigurationTitle","Editor"),scope:5}),properties:{"editor.tabSize":{type:"number",default:zS.R.tabSize,minimum:1,markdownDescription:WS.kg("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:WS.kg("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:zS.R.insertSpaces,markdownDescription:WS.kg("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:zS.R.detectIndentation,markdownDescription:WS.kg("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:zS.R.trimAutoWhitespace,description:WS.kg("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:zS.R.largeFileOptimizations,description:WS.kg("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[WS.kg("wordBasedSuggestions.off","Turn off Word Based Suggestions."),WS.kg("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),WS.kg("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),WS.kg("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:WS.kg("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[WS.kg("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),WS.kg("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),WS.kg("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:WS.kg("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:WS.kg("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:WS.kg("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:WS.kg("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:WS.kg("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:WS.kg("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:WS.kg("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:WS.kg("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:WS.kg("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:WS.kg("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:WS.kg("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:WS.kg("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:WS.kg("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:TA.maxComputationTime,description:WS.kg("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:TA.maxFileSize,description:WS.kg("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:TA.renderSideBySide,description:WS.kg("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:TA.renderSideBySideInlineBreakpoint,description:WS.kg("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:TA.useInlineViewWhenSpaceIsLimited,description:WS.kg("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:TA.renderMarginRevertIcon,description:WS.kg("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:TA.renderGutterMenu,description:WS.kg("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:TA.ignoreTrimWhitespace,description:WS.kg("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:TA.renderIndicators,description:WS.kg("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:TA.diffCodeLens,description:WS.kg("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:TA.diffWordWrap,markdownEnumDescriptions:[WS.kg("wordWrap.off","Lines will never wrap."),WS.kg("wordWrap.on","Lines will wrap at the viewport width."),WS.kg("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:TA.diffAlgorithm,markdownEnumDescriptions:[WS.kg("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),WS.kg("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:TA.hideUnchangedRegions.enabled,markdownDescription:WS.kg("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:TA.hideUnchangedRegions.revealLineCount,markdownDescription:WS.kg("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:TA.hideUnchangedRegions.minimumLineCount,markdownDescription:WS.kg("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:TA.hideUnchangedRegions.contextLineCount,markdownDescription:WS.kg("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:TA.experimental.showMoves,markdownDescription:WS.kg("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:TA.experimental.showEmptyDecorations,description:WS.kg("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:TA.experimental.useTrueInlineView,description:WS.kg("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};for(const i of Sx){const e=i.schema;if("undefined"!==typeof e)if("undefined"!==typeof(IA=e).type||"undefined"!==typeof IA.anyOf)NA.properties[`editor.${i.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(NA.properties[t]=e[t])}var IA;let AA=null;function RA(){return null===AA&&(AA=Object.create(null),Object.keys(NA.properties).forEach((e=>{AA[e]=!0}))),AA}_M.O.as(DA.Fd.Configuration).registerConfiguration(NA);class PA{static insert(e,t){return{range:new JM.Q(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}var OA=i(2464);function FA(e){return Object.isFrozen(e)?e:FS.ol(e)}class BA{static createEmptyModel(e){return new BA({},[],[],void 0,e)}constructor(e,t,i,n,s){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.logService=s,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const e=this.raw.map((e=>{if(e instanceof BA)return e;const t=new zA("",this.logService);return t.parseRaw(e),t.configurationModel}));this._rawConfiguration=e.reduce(((e,t)=>t===e?t:e.merge(t)),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?(0,JT.gD)(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return FA(i.rawConfiguration.getValue(e))},get override(){return t?FA(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return FA(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const t=[];for(const{contents:n,identifiers:s,keys:r}of i.rawConfiguration.overrides){const o=new BA(n,r,[],void 0,i.logService).getValue(e);void 0!==o&&t.push({identifiers:s,value:o})}return t.length?FA(t):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?(0,JT.gD)(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(){const e=FS.Go(this.contents),t=FS.Go(this.overrides),i=[...this.keys],n=this.raw?.length?[...this.raw]:[this];for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];for(const a of r)if(n.push(...a.raw?.length?a.raw:[a]),!a.isEmpty()){this.mergeContents(e,a.contents);for(const e of a.overrides){const[i]=t.filter((t=>OS.aI(t.identifiers,e.identifiers)));i?(this.mergeContents(i.contents,e.contents),i.keys.push(...e.keys),i.keys=OS.dM(i.keys)):t.push(FS.Go(e))}for(const e of a.keys)-1===i.indexOf(e)&&i.push(e)}return new BA(e,i,t,n.every((e=>e instanceof BA))?void 0:n,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!==typeof t||!Object.keys(t).length)return this;const i={};for(const n of OS.dM([...Object.keys(this.contents),...Object.keys(t)])){let e=this.contents[n];const s=t[n];s&&("object"===typeof e&&"object"===typeof s?(e=FS.Go(e),this.mergeContents(e,s)):e=s),i[n]=e}return new BA(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t))i in e&&gM.Gv(e[i])&&gM.Gv(t[i])?this.mergeContents(e[i],t[i]):e[i]=FS.Go(t[i])}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=e=>{e&&(i?this.mergeContents(i,e):i=FS.Go(e))};for(const s of this.overrides)1===s.identifiers.length&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&n(s.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),(0,JT.iB)(this.contents,e),DA.rC.test(e)&&this.overrides.splice(this.overrides.findIndex((t=>OS.aI(t.identifiers,(0,DA.Gv)(e)))),1))}updateValue(e,t,i){if((0,JT.kW)(this.contents,e,t,(e=>this.logService.error(e))),(i=i||-1===this.keys.indexOf(e))&&this.keys.push(e),DA.rC.test(e)){const t=(0,DA.Gv)(e),i={identifiers:t,keys:Object.keys(this.contents[e]),contents:(0,JT.ad)(this.contents[e],(e=>this.logService.error(e)))},n=this.overrides.findIndex((e=>OS.aI(e.identifiers,t)));-1!==n?this.overrides[n]=i:this.overrides.push(i)}}}class zA{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||BA.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:n,overrides:s,restricted:r,hasExcludedProperties:o}=this.doParseRaw(e,t);this._configurationModel=new BA(i,n,s,o?[e]:void 0,this.logService),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const i=_M.O.as(DA.Fd.Configuration).getConfigurationProperties(),n=this.filter(e,i,!0,t);e=n.raw;return{contents:(0,JT.ad)(e,(e=>this.logService.error(`Conflict in settings file ${this._name}: ${e}`))),keys:Object.keys(e),overrides:this.toOverrides(e,(e=>this.logService.error(`Conflict in settings file ${this._name}: ${e}`))),restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}filter(e,t,i,n){let s=!1;if(!n?.scopes&&!n?.skipRestricted&&!n?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const r={},o=[];for(const a in e)if(DA.rC.test(a)&&i){const i=this.filter(e[a],t,!1,n);r[a]=i.raw,s=s||i.hasExcludedProperties,o.push(...i.restricted)}else{const i=t[a],l=i?"undefined"!==typeof i.scope?i.scope:3:void 0;i?.restricted&&o.push(a),n.exclude?.includes(a)||!n.include?.includes(a)&&(void 0!==l&&void 0!==n.scopes&&!n.scopes.includes(l)||n.skipRestricted&&i?.restricted)?s=!0:r[a]=e[a]}return{raw:r,restricted:o,hasExcludedProperties:s}}toOverrides(e,t){const i=[];for(const n of Object.keys(e))if(DA.rC.test(n)){const s={};for(const t in e[n])s[t]=e[n][t];i.push({identifiers:(0,DA.Gv)(n),keys:Object.keys(s),contents:(0,JT.ad)(s,t)})}return i}}class VA{constructor(e,t,i,n,s,r,o,a,l,h,c,d,u){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=s,this.policyConfiguration=r,this.applicationConfiguration=o,this.userConfiguration=a,this.localUserConfiguration=l,this.remoteUserConfiguration=h,this.workspaceConfiguration=c,this.folderConfigurationModel=d,this.memoryConfigurationModel=u}toInspectValue(e){return void 0!==e?.value||void 0!==e?.override||void 0!==e?.overrides?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class WA{constructor(e,t,i,n,s,r,o,a,l,h){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=o,this._memoryConfiguration=a,this._memoryConfigurationByResource=l,this.logService=h,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new qD.fT,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=BA.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,void 0===t?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,o=new Set;for(const a of n.overrides)for(const t of a.identifiers)void 0!==n.getOverrideValue(e,t)&&o.add(t);return new VA(e,t,n.getValue(e),o.size?[...o]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),this._policyConfiguration.isEmpty()||void 0===this._policyConfiguration.getValue(e)||(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource(e,t){let{resource:i}=e,n=this.getWorkspaceConsolidatedConfiguration();if(t&&i){const e=t.getFolder(i);e&&(n=this.getFolderConsolidatedConfiguration(e.uri)||n);const s=this._memoryConfigurationByResource.get(i);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce(((e,t)=>{const{contents:i,overrides:n,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:s}]),e}),[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),n=this.parseConfigurationModel(e.policy,t),s=this.parseConfigurationModel(e.application,t),r=this.parseConfigurationModel(e.user,t),o=this.parseConfigurationModel(e.workspace,t),a=e.folders.reduce(((e,i)=>(e.set(Dx.r.revive(i[0]),this.parseConfigurationModel(i[1],t)),e)),new qD.fT);return new WA(i,n,s,r,BA.createEmptyModel(t),o,a,BA.createEmptyModel(t),new qD.fT,t)}static parseConfigurationModel(e,t){return new BA(e.contents,e.keys,e.overrides,void 0,t)}}class HA{constructor(e,t,i,n,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this.logService=s,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const r of e.keys)this.affectedKeys.add(r);for(const[,r]of e.overrides)for(const e of r)this.affectedKeys.add(e);this._affectsConfigStr=this._marker;for(const r of this.affectedKeys)this._affectsConfigStr+=r+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=WA.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){const i=this._marker+e,n=this._affectsConfigStr.indexOf(i);if(n<0)return!1;const s=n+i.length;if(s>=this._affectsConfigStr.length)return!1;const r=this._affectsConfigStr.charCodeAt(s);if(r!==this._markerCode1&&r!==this._markerCode2)return!1;if(t){const i=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,n=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!FS.aI(i,n)}return!0}}const UA=new class{constructor(){this._onDidChange=new rk.vl,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}},jA={kind:0},GA={kind:1};class KA{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const n of e){const e=n.command;e&&"-"!==e.charAt(0)&&this._defaultBoundCommands.set(e,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=KA.handleRemovals([].concat(e).concat(t));for(let n=0,s=this._keybindings.length;n<s;n++){const e=this._keybindings[n];if(0===e.chords.length)continue;const t=e.when?.substituteConstants();t&&0===t.type||this._addKeyPress(e.chords[0],e)}}static _isTargetedForRemoval(e,t,i){if(t)for(let n=0;n<t.length;n++)if(t[n]!==e.chords[n])return!1;if(i&&1!==i.type){if(!e.when)return!1;if(!(0,mM.jQ)(i,e.when))return!1}return!0}static handleRemovals(e){const t=new Map;for(let n=0,s=e.length;n<s;n++){const i=e[n];if(i.command&&"-"===i.command.charAt(0)){const e=i.command.substring(1);t.has(e)?t.get(e).push(i):t.set(e,[i])}}if(0===t.size)return e;const i=[];for(let n=0,s=e.length;n<s;n++){const s=e[n];if(!s.command||0===s.command.length){i.push(s);continue}if("-"===s.command.charAt(0))continue;const r=t.get(s.command);if(!r||!s.isDefault){i.push(s);continue}let o=!1;for(const e of r){const t=e.when;if(this._isTargetedForRemoval(s,e.chords,t)){o=!0;break}}o||i.push(s)}return i}_addKeyPress(e,t){const i=this._map.get(e);if("undefined"===typeof i)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let n=i.length-1;n>=0;n--){const e=i[n];if(e.command===t.command)continue;let s=!0;for(let i=1;i<e.chords.length&&i<t.chords.length;i++)if(e.chords[i]!==t.chords[i]){s=!1;break}s&&(KA.whenIsEntirelyIncluded(e.when,t.when)&&this._removeFromLookupMap(e))}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);"undefined"===typeof t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if("undefined"!==typeof t)for(let i=0,n=t.length;i<n;i++)if(t[i]===e)return void t.splice(i,1)}static whenIsEntirelyIncluded(e,t){return!t||1===t.type||!(!e||1===e.type)&&(0,mM.M0)(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if("undefined"===typeof i||0===i.length)return null;if(1===i.length)return i[0];for(let n=i.length-1;n>=0;n--){const e=i[n];if(t.contextMatchesRules(e.when))return e}return i[i.length-1]}resolve(e,t,i){const n=[...t,i];this._log(`| Resolving ${n}`);const s=this._map.get(n[0]);if(void 0===s)return this._log("\\ No keybinding entries."),jA;let r=null;if(n.length<2)r=s;else{r=[];for(let e=0,t=s.length;e<t;e++){const t=s[e];if(n.length>t.chords.length)continue;let i=!0;for(let e=1;e<n.length;e++)if(t.chords[e]!==n[e]){i=!1;break}i&&r.push(t)}}const o=this._findCommand(e,r);return o?n.length<o.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${o.chords.length-n.length} more chord(s), when: ${$A(o.when)}, source: ${qA(o)}.`),GA):(this._log(`\\ From ${r.length} keybinding entries, matched ${o.command}, when: ${$A(o.when)}, source: ${qA(o)}.`),a=o.command,l=o.commandArgs,h=o.bubble,{kind:2,commandId:a,commandArgs:l,isBubble:h}):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),jA);var a,l,h}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const n=t[i];if(KA._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return!t||t.evaluate(e)}}function $A(e){return e?`${e.serialize()}`:"no when condition"}function qA(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?"built-in":"user"}const QA=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class XA extends Mx.jG{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:rk.Jh.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=s,this._onDidUpdateKeybindings=this._register(new rk.vl),this._currentChords=[],this._currentChordChecker=new sk.vb,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=YA.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new sk.pc,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),jA;const[n]=i.getDispatchChords();if(null===n)return this._log("\\ Keyboard event cannot be dispatched"),jA;const s=this._contextKeyService.getContext(t),r=this._currentChords.map((e=>{let{keypress:t}=e;return t}));return this._getResolver().resolve(s,r,n)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet((()=>{this._documentHasFocus()?Date.now()-e>5e3&&this._leaveChordMode():this._leaveChordMode()}),500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw(0,Ux.iH)("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(WS.kg("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const e=this._currentChords.map((e=>{let{label:t}=e;return t})).join(", ");this._currentChordStatusMessage=this._notificationService.status(WS.kg("next.chord","({0}) was pressed. Waiting for next key of chord...",e))}}this._scheduleLeaveChordMode(),UA.enabled&&UA.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],UA.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=YA.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=YA.EMPTY,null===this._currentSingleModifier?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null}),300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=i.getChords();return this._ignoreSingleModifiers=new YA(s),null!==this._currentSingleModifier&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let s=null,r=null;if(i){const[t]=e.getSingleModifierDispatchChords();s=t,r=t?[t]:[]}else[s]=e.getDispatchChords(),r=this._currentChords.map((e=>{let{keypress:t}=e;return t}));if(null===s)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const o=this._contextKeyService.getContext(t),a=e.getLabel(),l=this._getResolver().resolve(o,r,s);switch(l.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",a,"[ No matching keybinding ]"),this.inChordMode){const e=this._currentChords.map((e=>{let{label:t}=e;return t})).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${e}, ${a}".`),this._notificationService.status(WS.kg("missing.chord","The key combination ({0}, {1}) is not a command.",e,a),{hideAfter:1e4}),this._leaveChordMode(),n=!0}return n;case 1:return this._logService.trace("KeybindingService#dispatch",a,"[ Several keybindings match - more chords needed ]"),n=!0,this._expectAnotherChord(s,a),this._log(1===this._currentChords.length?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),n;case 2:if(this._logService.trace("KeybindingService#dispatch",a,`[ Will dispatch command ${l.commandId} ]`),null===l.commandId||""===l.commandId){if(this.inChordMode){const e=this._currentChords.map((e=>{let{label:t}=e;return t})).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${e}, ${a}".`),this._notificationService.status(WS.kg("missing.chord","The key combination ({0}, {1}) is not a command.",e,a),{hideAfter:1e4}),this._leaveChordMode(),n=!0}}else{this.inChordMode&&this._leaveChordMode(),l.isBubble||(n=!0),this._log(`+ Invoking command ${l.commandId}.`),this._currentlyDispatchingCommandId=l.commandId;try{"undefined"===typeof l.commandArgs?this._commandService.executeCommand(l.commandId).then(void 0,(e=>this._notificationService.warn(e))):this._commandService.executeCommand(l.commandId,l.commandArgs).then(void 0,(e=>this._notificationService.warn(e)))}finally{this._currentlyDispatchingCommandId=null}QA.test(l.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:l.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return n}}mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30)}}class YA{static#e=(()=>this.EMPTY=new YA(null))();constructor(e){this._ctrlKey=!!e&&e.ctrlKey,this._shiftKey=!!e&&e.shiftKey,this._altKey=!!e&&e.altKey,this._metaKey=!!e&&e.metaKey}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}class ZA{constructor(e,t,i,n,s,r,o){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?JA(e.getDispatchChords()):[],e&&0===this.chords.length&&(this.chords=JA(e.getSingleModifierDispatchChords())),this.bubble=!!t&&94===t.charCodeAt(0),this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=o}}function JA(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n)return[];t.push(n)}return t}class eR{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(0===t.length)return null;const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=i(r);if(null===o)return null;n[s]=rR(r,o,this.modifierLabels[e])}return n.join(" ")}}const tR=new eR({ctrlKey:"\u2303",shiftKey:"\u21e7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:WS.kg({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:WS.kg({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:WS.kg({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:WS.kg({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:WS.kg({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:WS.kg({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:WS.kg({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:WS.kg({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),iR=new eR({ctrlKey:WS.kg({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:WS.kg({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:WS.kg({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:WS.kg({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:WS.kg({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:WS.kg({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:WS.kg({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:WS.kg({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:WS.kg({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:WS.kg({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:WS.kg({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:WS.kg({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),nR=new eR({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),sR=new eR({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function rR(e,t,i){if(null===t)return"";const n=[];return e.ctrlKey&&n.push(i.ctrlKey),e.shiftKey&&n.push(i.shiftKey),e.altKey&&n.push(i.altKey),e.metaKey&&n.push(i.metaKey),""!==t&&n.push(t),n.join(i.separator)}class oR extends Qx{constructor(e,t){if(super(),0===t.length)throw(0,Ux.Qg)("chords");this._os=e,this._chords=t}getLabel(){return tR.toLabel(this._os,this._chords,(e=>this._getLabel(e)))}getAriaLabel(){return iR.toLabel(this._os,this._chords,(e=>this._getAriaLabel(e)))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:nR.toLabel(this._os,this._chords,(e=>this._getElectronAccelerator(e)))}getUserSettingsLabel(){return sR.toLabel(this._os,this._chords,(e=>this._getUserSettingsLabel(e)))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map((e=>this._getChord(e)))}_getChord(e){return new qx(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map((e=>this._getChordDispatch(e)))}getSingleModifierDispatchChords(){return this._chords.map((e=>this._getSingleModifierChordDispatch(e)))}}class aR extends oR{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return Hx.YM.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Hx.YM.toString(e.keyCode)}_getElectronAccelerator(e){return Hx.YM.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Hx.YM.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}_getChordDispatch(e){return aR.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Hx.YM.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(e){const t=Hx.Fo[e];if(-1!==t)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Kx)return e;const t=this._scanCodeToKeyCode(e.scanCode);return 0===t?null:new Kx(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=JA(e.chords.map((e=>this._toKeyCodeChord(e))));return i.length>0?[new aR(i,t)]:[]}}const lR=(0,eM.u1)("labelService"),hR=(0,eM.u1)("progressService");Object.freeze({total(){},worked(){},done(){}});class cR{static#e=(()=>this.None=Object.freeze({report(){}}))();constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}const dR=(0,eM.u1)("editorProgressService");i(6744);class uR{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class gR{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?(0,Tx.lF)(e,this._value,0,e.length,this._from,this._to):(0,Tx.zd)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class pR{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const e=this._value.charCodeAt(t);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?(0,Tx.lF)(e,this._value,0,e.length,this._from,this._to):(0,Tx.zd)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class fR{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new pR(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return(0,Tx.W1)(e,this._value.scheme);if(2===this._states[this._stateIdx])return(0,Tx.W1)(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return(0,Tx.UD)(e,this._value.query);if(5===this._states[this._stateIdx])return(0,Tx.UD)(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}class mR{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class _R{static forUris(){return new _R(new fR(arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!1))}static forStrings(){return new _R(new uR)}static forConfigKeys(){return new _R(new gR)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new mR,this._root.segment=i.value());const s=[];for(n=this._root;;){const e=i.cmp(n.segment);if(e>0)n.left||(n.left=new mR,n.left.segment=i.value()),s.push([-1,n]),n=n.left;else if(e<0)n.right||(n.right=new mR,n.right.segment=i.value()),s.push([1,n]),n=n.right;else{if(!i.hasNext())break;i.next(),n.mid||(n.mid=new mR,n.mid.segment=i.value()),s.push([0,n]),n=n.mid}}const r=n.value;n.value=t,n.key=e;for(let o=s.length-1;o>=0;o--){const e=s[o][1];e.updateHeight();const t=e.balanceFactor();if(t<-1||t>1){const t=s[o][0],i=s[o+1][0];if(1===t&&1===i)s[o][1]=e.rotateLeft();else if(-1===t&&-1===i)s[o][1]=e.rotateRight();else if(1===t&&-1===i)e.right=s[o+1][1]=s[o+1][1].rotateRight(),s[o][1]=e.rotateLeft();else{if(-1!==t||1!==i)throw new Error;e.left=s[o+1][1]=s[o+1][1].rotateLeft(),s[o][1]=e.rotateRight()}if(o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1]}else this._root=s[0][1]}}return r}get(e){return this._getNode(e)?.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),i=i.mid}}return i}has(e){const t=this._getNode(e);return!(void 0===t?.value&&void 0===t?.mid)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),n=[];let s=this._root;for(;s;){const e=i.cmp(s.segment);if(e>0)n.push([-1,s]),s=s.left;else if(e<0)n.push([1,s]),s=s.right;else{if(!i.hasNext())break;i.next(),n.push([0,s]),s=s.mid}}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const e=this._min(s.right);if(e.key){const{key:t,value:i,segment:n}=e;this._delete(e.key,!1),s.key=t,s.value=i,s.segment=n}}else{const e=s.left??s.right;if(n.length>0){const[t,i]=n[n.length-1];switch(t){case-1:i.left=e;break;case 0:i.mid=e;break;case 1:i.right=e}}else this._root=e}for(let e=n.length-1;e>=0;e--){const t=n[e][1];t.updateHeight();const i=t.balanceFactor();if(i>1?(t.right.balanceFactor()>=0||(t.right=t.right.rotateRight()),n[e][1]=t.rotateLeft()):i<-1&&(t.left.balanceFactor()<=0||(t.left=t.left.rotateLeft()),n[e][1]=t.rotateRight()),e>0)switch(n[e-1][0]){case-1:n[e-1][1].left=n[e][1];break;case 1:n[e-1][1].right=n[e][1];break;case 0:n[e-1][1].mid=n[e][1]}else this._root=n[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i,n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),i=n.value||i,n=n.mid}}return n&&n.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let n=this._root;for(;n;){const e=i.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!i.hasNext())return n.mid?this._entries(n.mid):t?n.value:void 0;i.next(),n=n.mid}}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const vR=(0,eM.u1)("contextService");class bR{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}(0,WS.kg)("codeWorkspace","Code Workspace");const yR="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var wR,CR,SR,xR,kR,LR,ER,MR;!function(e){e.inspectTokensAction=WS.kg("inspectTokens","Developer: Inspect Tokens")}(wR||(wR={})),function(e){e.gotoLineActionLabel=WS.kg("gotoLineActionLabel","Go to Line/Column...")}(CR||(CR={})),function(e){e.helpQuickAccessActionLabel=WS.kg("helpQuickAccess","Show all Quick Access Providers")}(SR||(SR={})),function(e){e.quickCommandActionLabel=WS.kg("quickCommandActionLabel","Command Palette"),e.quickCommandHelp=WS.kg("quickCommandActionHelp","Show And Run Commands")}(xR||(xR={})),function(e){e.quickOutlineActionLabel=WS.kg("quickOutlineActionLabel","Go to Symbol..."),e.quickOutlineByCategoryActionLabel=WS.kg("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")}(kR||(kR={})),function(e){e.editorViewAccessibleLabel=WS.kg("editorViewAccessibleLabel","Editor content")}(LR||(LR={})),function(e){e.toggleHighContrast=WS.kg("toggleHighContrast","Toggle High Contrast Theme")}(ER||(ER={})),function(e){e.bulkEditServiceSummary=WS.kg("bulkEditServiceSummary","Made {0} edits in {1} files")}(MR||(MR={}));const TR=(0,eM.u1)("workspaceTrustManagementService");var DR=i(5297),NR=i(6531);const IR={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:NR.K.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};let AR=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});const RR=new KN.d((()=>AR("mouse",!1))),PR=new KN.d((()=>AR("element",!1)));function OR(e){return"element"===e?PR.value:RR.value}function FR(){return AR("element",!0)}let BR={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function zR(){return BR}class VR{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach((n=>n.splice(e,t,i)))}}var WR=i(3800),HR=i(6053);class UR extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function jR(e,t){const i=[];for(const n of t){if(e.start>=n.range.end)continue;if(e.end<n.range.start)break;const t=lA.intersect(e,n.range);lA.isEmpty(t)||i.push({range:t,size:n.size})}return i}function GR(e,t){let{start:i,end:n}=e;return{start:i+t,end:n+t}}class KR{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=i.length-t,s=jR({start:0,end:e},this.groups),r=jR({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map((e=>({range:GR(e.range,n),size:e.size}))),o=i.map(((t,i)=>({range:{start:e+i,end:e+i+1},size:t.size})));this.groups=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){const t=[];let i=null;for(const n of e){const e=n.range.start,s=n.range.end,r=n.size;i&&r===i.size?i.range.end=s:(i={range:{start:e,end:s},size:r},t.push(i))}return t}(t.reduce(((e,t)=>e.concat(t)),[]))}(s,o,r),this._size=this._paddingTop+this.groups.reduce(((e,t)=>e+t.size*(t.range.end-t.range.start)),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const n of this.groups){const s=n.range.end-n.range.start,r=i+s*n.size;if(e<r)return t+Math.floor((e-i)/n.size);t+=s,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const s=n.range.end-n.range.start,r=i+s;if(e<r)return this._paddingTop+t+(e-i)*n.size;t+=s*n.size,i=r}return-1}}class $R{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const i=xE(".monaco-list-row");t={domNode:i,templateId:e,templateData:this.getRenderer(e).renderTemplate(i)}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const e of this.transactionNodesPendingRemoval)this.doRemoveNode(e);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t));this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach(((e,t)=>{for(const i of e){this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}})),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var qR=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const QR={CurrentDragAndDropData:void 0},XR={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:e=>[e],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class YR{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class ZR{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class JR{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}class eP{constructor(e){this.getSetSize=e?.getSetSize?e.getSetSize.bind(e):(e,t,i)=>i,this.getPosInSet=e?.getPosInSet?e.getPosInSet.bind(e):(e,t)=>t+1,this.getRole=e?.getRole?e.getRole.bind(e):e=>"listitem",this.isChecked=e?.isChecked?e.isChecked.bind(e):e=>{}}}class tP{static#e=(()=>this.InstanceCount=0)();get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:HL(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:XR;if(this.virtualDelegate=t,this.domId="list_id_"+ ++tP.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new sk.ve(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Mx.jG.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Mx.jG.None,this.onDragLeaveTimeout=Mx.jG.None,this.disposables=new Mx.Cm,this._onDidChangeContentHeight=new rk.vl,this._onDidChangeContentWidth=new rk.vl,this.onDidChangeContentHeight=rk.Jh.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(n.paddingTop??0);for(const s of i)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new $R(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!==typeof n.mouseSupport||n.mouseSupport),this._horizontalScrolling=n.horizontalScrolling??XR.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom="undefined"===typeof n.paddingBottom?0:n.paddingBottom,this.accessibilityProvider=new eP(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows";(n.transformOptimization??XR.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(dD.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new CD({forceIntegerValues:!0,smoothScrollDuration:n.smoothScrolling?125:0,scheduleAtNextAnimationFrame:e=>IL(fL(this.domNode),e)})),this.scrollableElement=this.disposables.add(new DD(this.rowsContainer,{alwaysConsumeMouseWheel:n.alwaysConsumeMouseWheel??XR.alwaysConsumeMouseWheel,horizontal:1,vertical:n.verticalScrollMode??XR.verticalScrollMode,useShadows:n.useShadows??XR.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity,scrollByPage:n.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(EL(this.rowsContainer,hD.Change,(e=>this.onTouchChange(e)))),this.disposables.add(EL(this.scrollableElement.getDomNode(),"scroll",(e=>e.target.scrollTop=0))),this.disposables.add(EL(this.domNode,"dragover",(e=>this.onDragOver(this.toDragEvent(e))))),this.disposables.add(EL(this.domNode,"drop",(e=>this.onDrop(this.toDragEvent(e))))),this.disposables.add(EL(this.domNode,"dragleave",(e=>this.onDragLeave(this.toDragEvent(e))))),this.disposables.add(EL(this.domNode,"dragend",(e=>this.onDragEnd(e)))),this.setRowLineHeight=n.setRowLineHeight??XR.setRowLineHeight,this.setRowHeight=n.setRowHeight??XR.setRowHeight,this.supportDynamicHeights=n.supportDynamicHeights??XR.supportDynamicHeights,this.dnd=n.dnd??this.disposables.add(XR.dnd),this.layout(n.initialSize?.height,n.initialSize?.width)}updateOptions(e){let t;if(void 0!==e.paddingBottom&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.scrollByPage&&(t={...t??{},scrollByPage:e.scrollByPage}),void 0!==e.mouseWheelScrollSensitivity&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),void 0!==e.fastScrollSensitivity&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),void 0!==e.paddingTop&&e.paddingTop!==this.rangeMap.paddingTop){const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(t,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new KR(e)}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=lA.intersect(n,s),o=new Map;for(let b=r.end-1;b>=r.start;b--){const e=this.items[b];if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=o.get(e.templateId);t||(t=[],o.set(e.templateId,t));const i=this.renderers.get(e.templateId);i&&i.disposeElement&&i.disposeElement(e.element,b,e.row.templateData,e.size),t.unshift(e.row)}e.row=null,e.stale=!0}const a={start:e+t,end:this.items.length},l=lA.intersect(a,n),h=lA.relativeComplement(a,n),c=i.map((e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Mx.jG.None,checkedDisposable:Mx.jG.None,stale:!1})));let d;0===e&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,c),d=this.items,this.items=c):(this.rangeMap.splice(e,t,c),d=this.items.splice(e,t,...c));const u=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=GR(l,u),f=lA.intersect(g,p);for(let b=f.start;b<f.end;b++)this.updateItemInDOM(this.items[b],b);const m=lA.relativeComplement(p,g);for(const b of m)for(let e=b.start;e<b.end;e++)this.removeItemFromDOM(e);const _=h.map((e=>GR(e,u))),v=[{start:e,end:e+i.length},..._].map((e=>lA.intersect(g,e))).reverse();for(const b of v)for(let e=b.end-1;e>=b.start;e--){const t=this.items[e],i=o.get(t.templateId),n=i?.pop();this.insertItemInDOM(e,n)}for(const b of o.values())for(const e of b)this.cache.release(e);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map((e=>e.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=IL(fL(this.domNode),(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)"undefined"!==typeof t.width&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex((t=>t.element===e))}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:"number"===typeof e?e:UL(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),"undefined"!==typeof t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"===typeof t?t:HL(this.domNode)})}render(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=this.getRenderRange(t,i),a=lA.relativeComplement(o,e).reverse(),l=lA.relativeComplement(e,o);if(r){const t=lA.intersect(e,o);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}this.cache.transact((()=>{for(const e of l)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);for(const e of a)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t)})),void 0!==n&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&void 0!==s&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const e=this.cache.alloc(i.templateId);i.row=e.row,i.stale||=e.isReusingConnectedDomNode}const n=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",n);const s=this.accessibilityProvider.isChecked(i.element);if("boolean"===typeof s)i.row.domNode.setAttribute("aria-checked",String(!!s));else if(s){const e=e=>i.row.domNode.setAttribute("aria-checked",String(!!e));e(s.value),i.checkedDisposable=s.onDidChange((()=>e(s.value)))}if(i.stale||!i.row.domNode.parentElement){const t=this.items.at(e+1)?.row?.domNode??null;i.row.domNode.parentElement===this.rowsContainer&&i.row.domNode.nextElementSibling===t||this.rowsContainer.insertBefore(i.row.domNode,t),i.stale=!1}this.updateItemInDOM(i,e);const r=this.renderers.get(i.templateId);if(!r)throw new Error(`No renderer found for template id ${i.templateId}`);r?.renderElement(i.element,e,i.row.templateData,i.size);const o=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!o,o&&(i.dragStartDisposable=EL(i.row.domNode,"dragstart",(e=>this.onDragStart(i.element,o,e)))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=HL(e.row.domNode);const t=fL(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return rk.Jh.map(this.disposables.add(new BD(this.domNode,"click")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseDblClick(){return rk.Jh.map(this.disposables.add(new BD(this.domNode,"dblclick")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseMiddleClick(){return rk.Jh.filter(rk.Jh.map(this.disposables.add(new BD(this.domNode,"auxclick")).event,(e=>this.toMouseEvent(e)),this.disposables),(e=>1===e.browserEvent.button),this.disposables)}get onMouseDown(){return rk.Jh.map(this.disposables.add(new BD(this.domNode,"mousedown")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseOver(){return rk.Jh.map(this.disposables.add(new BD(this.domNode,"mouseover")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseOut(){return rk.Jh.map(this.disposables.add(new BD(this.domNode,"mouseout")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onContextMenu(){return rk.Jh.any(rk.Jh.map(this.disposables.add(new BD(this.domNode,"contextmenu")).event,(e=>this.toMouseEvent(e)),this.disposables),rk.Jh.map(this.disposables.add(new BD(this.domNode,hD.Contextmenu)).event,(e=>this.toGestureEvent(e)),this.disposables))}get onTouchStart(){return rk.Jh.map(this.disposables.add(new BD(this.domNode,"touchstart")).event,(e=>this.toTouchEvent(e)),this.disposables)}get onTap(){return rk.Jh.map(this.disposables.add(new BD(this.rowsContainer,hD.Tap)).event,(e=>this.toGestureEvent(e)),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element,sector:this.getTargetSector(e,t)}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;const n=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(IR.TEXT,t),i.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(n,i)),"undefined"===typeof e&&(e=String(n.length));const t=xE(".monaco-drag-image");t.textContent=e;(e=>{for(;e&&!e.classList.contains("monaco-workbench");)e=e.parentElement;return e||this.domNode.ownerDocument})(this.domNode).appendChild(t),i.dataTransfer.setDragImage(t,-10,-10),setTimeout((()=>t.remove()),0)}this.domNode.classList.add("dragging"),this.currentDragData=new YR(n),QR.CurrentDragAndDropData=new ZR(n),this.dnd.onDragStart?.(this.currentDragData,i)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),QR.CurrentDragAndDropData&&"vscode-ui"===QR.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(QR.CurrentDragAndDropData)this.currentDragData=QR.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new JR}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop="boolean"===typeof t?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let i;e.browserEvent.dataTransfer.dropEffect="boolean"!==typeof t&&0===t.effect?.type?"copy":"move",i="boolean"!==typeof t&&t.feedback?t.feedback:"undefined"===typeof e.index?[-1]:[e.index],i=(0,OS.dM)(i).filter((e=>e>=-1&&e<this.length)).sort(((e,t)=>e-t)),i=-1===i[0]?[-1]:i;let n="boolean"!==typeof t&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(s=this.currentDragFeedback,r=i,(Array.isArray(s)&&Array.isArray(r)?(0,OS.aI)(s,r):s===r)&&this.currentDragFeedbackPosition===n)return!0;var s,r;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=n,this.currentDragFeedbackDisposable.dispose(),-1===i[0])this.domNode.classList.add(n),this.rowsContainer.classList.add(n),this.currentDragFeedbackDisposable=(0,Mx.s)((()=>{this.domNode.classList.remove(n),this.rowsContainer.classList.remove(n)}));else{if(i.length>1&&"drop-target"!==n)throw new Error("Can't use multiple feedbacks with position different than 'over'");"drop-target-after"===n&&i[0]<this.length-1&&(i[0]+=1,n="drop-target-before");for(const e of i){const t=this.items[e];t.dropTarget=!0,t.row?.domNode.classList.add(n)}this.currentDragFeedbackDisposable=(0,Mx.s)((()=>{for(const e of i){const t=this.items[e];t.dropTarget=!1,t.row?.domNode.classList.remove(n)}}))}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,sk.EQ)((()=>this.clearDragOverFeedback()),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,QR.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,QR.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Mx.jG.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const e=function(e){let t=e.offsetParent,i=e.offsetTop,n=e.offsetLeft;for(;null!==(e=e.parentNode)&&e!==e.ownerDocument.body&&e!==e.ownerDocument.documentElement;){i-=e.scrollTop;const s=$L(e)?null:PL(e);s&&(n-="rtl"!==s.direction?e.scrollLeft:-e.scrollLeft),e===t&&(n+=FL.getBorderLeftWidth(e),i+=FL.getBorderTopWidth(e),i+=e.offsetTop,n+=e.offsetLeft,t=e.offsetParent)}return{left:n,top:i}}(this.domNode).top;this.dragOverAnimationDisposable=function(e,t){const i=()=>{t(),n=IL(e,i)};let n=IL(e,i);return(0,Mx.s)((()=>n.dispose()))}(fL(this.domNode),this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,sk.EQ)((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(void 0===t)return;const i=e.offsetY/this.items[t].size,n=Math.floor(i/.25);return(0,HR.qE)(n,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(hE(i)||((n=i)instanceof SVGElement||n instanceof fL(n).SVGElement))&&i!==this.rowsContainer&&t.contains(i);){const e=i.getAttribute("data-index");if(e){const t=Number(e);if(!isNaN(t))return t}i=i.parentElement}var n}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const n=this.getRenderRange(e,t);let s,r;e===this.elementTop(n.start)?(s=n.start,r=0):n.end-n.start>1&&(s=n.start+1,r=this.elementTop(s)-e);let o=0;for(;;){const a=this.getRenderRange(e,t);let l=!1;for(let e=a.start;e<a.end;e++){const t=this.probeDynamicHeight(e);0!==t&&this.rangeMap.splice(e,1,[this.items[e]]),o+=t,l=l||0!==t}if(!l){0!==o&&this.eventuallyUpdateScrollDimensions();const t=lA.relativeComplement(n,a);for(const e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);const l=lA.relativeComplement(a,n).reverse();for(const e of l)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t);for(let e=a.start;e<a.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"===typeof s){const t=this.scrollable.getFutureScrollPosition().scrollTop-e,n=this.elementTop(s)-r+t;this.setScrollTop(n,i)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const e=this.virtualDelegate.getDynamicHeight(t.element);if(null!==e){const i=t.size;return t.size=e,t.lastDynamicHeightWidth=this.renderWidth,e-i}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,0!==t.size||GL(t.row.domNode,fL(t.row.domNode).document.body)||console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",(new Error).stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:n}=this.cache.alloc(t.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);const s=this.renderers.get(t.templateId);if(!s)throw new Ux.D7("Missing renderer for templateId: "+t.templateId);return s.renderElement(t.element,e,n.templateData,void 0),t.size=n.domNode.offsetHeight,s.disposeElement?.(t.element,e,n.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,n.domNode.remove(),this.cache.release(n),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(const e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}}qR([lD],tP.prototype,"onMouseClick",null),qR([lD],tP.prototype,"onMouseDblClick",null),qR([lD],tP.prototype,"onMouseMiddleClick",null),qR([lD],tP.prototype,"onMouseDown",null),qR([lD],tP.prototype,"onMouseOver",null),qR([lD],tP.prototype,"onMouseOut",null),qR([lD],tP.prototype,"onContextMenu",null),qR([lD],tP.prototype,"onTouchStart",null),qR([lD],tP.prototype,"onTap",null);var iP,nP,sP=i(8207),rP=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};class oP{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex((e=>e.templateData===i));if(n>=0){const e=this.renderedElements[n];this.trait.unrender(i),e.index=t}else{const e={index:t,templateData:i};this.renderedElements.push(e)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const s of this.renderedElements)s.index<e?n.push(s):s.index>=e+t&&n.push({index:s.index+i-t,templateData:s.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex((t=>t.templateData===e));t<0||this.renderedElements.splice(t,1)}}class aP{get name(){return this._trait}get renderer(){return new oP(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new rk.vl,this.onChange=this._onChange.event}splice(e,t,i){const n=i.length-t,s=e+t,r=[];let o=0;for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]<e;)r.push(this.sortedIndexes[o++]);for(let a=0;a<i.length;a++)i[a]&&r.push(a+e);for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]>=s;)r.push(this.sortedIndexes[o++]+n);this.renderer.splice(e,t,i.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(MP),t)}_set(e,t,i){const n=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=EP(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return(0,OS.El)(this.sortedIndexes,e,MP)>=0}dispose(){(0,Mx.AS)(this._onChange)}}rP([lD],aP.prototype,"renderer",null);class lP extends aP{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class hP{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const n=this.trait.get().map((e=>this.identityProvider.getId(this.view.element(e)).toString()));if(0===n.length)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=new Set(n),r=i.map((e=>s.has(this.identityProvider.getId(e).toString())));this.trait.splice(e,t,r)}}function cP(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function dP(e,t){return!!e.classList.contains(t)||!e.classList.contains("monaco-list")&&(!!e.parentElement&&dP(e.parentElement,t))}function uP(e){return dP(e,"monaco-editor")}function gP(e){return dP(e,"monaco-tree-sticky-row")}function pP(e){return e.classList.contains("monaco-tree-sticky-container")}function fP(e){return!!("A"===e.tagName&&e.classList.contains("monaco-button")||"DIV"===e.tagName&&e.classList.contains("monaco-button-dropdown"))||!e.classList.contains("monaco-list")&&(!!e.parentElement&&fP(e.parentElement))}class mP{get onKeyDown(){return rk.Jh.chain(this.disposables.add(new BD(this.view.domNode,"keydown")).event,(e=>e.filter((e=>!cP(e.target))).map((e=>new Zx(e)))))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new Mx.Cm,this.multipleSelectionDisposables=new Mx.Cm,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown((e=>{switch(e.keyCode){case 3:return this.onEnter(e);case 16:return this.onUpArrow(e);case 18:return this.onDownArrow(e);case 11:return this.onPageUpArrow(e);case 12:return this.onPageDownArrow(e);case 9:return this.onEscape(e);case 31:this.multipleSelectionSupport&&(BS.zx?e.metaKey:e.ctrlKey)&&this.onCtrlA(e)}})))}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection((0,OS.y1)(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}rP([lD],mP.prototype,"onKeyDown",null),function(e){e[e.Automatic=0]="Automatic",e[e.Trigger=1]="Trigger"}(iP||(iP={})),function(e){e[e.Idle=0]="Idle",e[e.Typing=1]="Typing"}(nP||(nP={}));const _P=new class{mightProducePrintableCharacter(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=98&&e.keyCode<=107||e.keyCode>=85&&e.keyCode<=95)}};class vP{constructor(e,t,i,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=s,this.enabled=!1,this.state=nP.Idle,this.mode=iP.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Mx.Cm,this.disposables=new Mx.Cm,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??1?this.enable():this.disable(),this.mode=e.typeNavigationMode??iP.Automatic}enable(){if(this.enabled)return;let e=!1;const t=rk.Jh.chain(this.enabledDisposables.add(new BD(this.view.domNode,"keydown")).event,(t=>t.filter((e=>!cP(e.target))).filter((()=>this.mode===iP.Automatic||this.triggered)).map((e=>new Zx(e))).filter((t=>e||this.keyboardNavigationEventFilter(t))).filter((e=>this.delegate.mightProducePrintableCharacter(e))).forEach((e=>fE(e,!0))).map((e=>e.browserEvent.key)))),i=rk.Jh.debounce(t,(()=>null),800,void 0,void 0,void 0,this.enabledDisposables),n=rk.Jh.reduce(rk.Jh.any(t,i),((e,t)=>null===t?null:(e||"")+t),void 0,this.enabledDisposables);n(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t((()=>e=!0),void 0,this.enabledDisposables),i((()=>e=!1),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));"string"===typeof t?JI(t):t&&JI(t.get())}this.previouslyFocused=-1}onInput(e){if(!e)return this.state=nP.Idle,void(this.triggered=!1);const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===nP.Idle?1:0;this.state=nP.Typing;for(let s=0;s<this.list.length;s++){const t=(i+s+n)%this.list.length,r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(t)),o=r&&r.toString();if(this.list.options.typeNavigationEnabled){if("undefined"!==typeof o){if(XD(e,o))return this.previouslyFocused=i,this.list.setFocus([t]),void this.list.reveal(t);const n=gN(e,o);if(n){if(n[0].end-n[0].start>1&&1===n.length)return this.previouslyFocused=i,this.list.setFocus([t]),void this.list.reveal(t)}}}else if("undefined"===typeof o||XD(e,o))return this.previouslyFocused=i,this.list.setFocus([t]),void this.list.reveal(t)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class bP{constructor(e,t){this.list=e,this.view=t,this.disposables=new Mx.Cm;const i=rk.Jh.chain(this.disposables.add(new BD(t.domNode,"keydown")).event,(e=>e.filter((e=>!cP(e.target))).map((e=>new Zx(e))))),n=rk.Jh.chain(i,(e=>e.filter((e=>2===e.keyCode&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey))));n(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(0===t.length)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!n||!hE(n)||-1===n.tabIndex)return;const s=fL(n).getComputedStyle(n);"hidden"!==s.visibility&&"none"!==s.display&&(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function yP(e){return BS.zx?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function wP(e){return e.browserEvent.shiftKey}const CP={isSelectionSingleChangeEvent:yP,isSelectionRangeChangeEvent:wP};class SP{constructor(e){this.list=e,this.disposables=new Mx.Cm,this._onPointer=new rk.vl,this.onPointer=this._onPointer.event,!1!==e.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||CP),this.mouseSupport="undefined"===typeof e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(dD.addTarget(e.getHTMLElement()))),rk.Jh.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||CP))}isSelectionSingleChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){uP(e.browserEvent.target)||XL()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(cP(e.browserEvent.target)||uP(e.browserEvent.target))return;const t="undefined"===typeof e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport)return;if(cP(e.browserEvent.target)||uP(e.browserEvent.target))return;if(e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;return"undefined"===typeof t?(this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionChangeEvent(e)?this.changeSelection(e):(this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),dE(i=e.browserEvent)&&2===i.button||this.list.setSelection([t],e.browserEvent),void this._onPointer.fire(e));var i}onDoubleClick(e){if(cP(e.browserEvent.target)||uP(e.browserEvent.target))return;if(this.isSelectionChangeEvent(e))return;if(e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if("undefined"===typeof i){i=this.list.getFocus()[0]??t,this.list.setAnchor(i)}const n=Math.min(i,t),s=Math.max(i,t),r=(0,OS.y1)(n,s+1),o=this.list.getSelection(),a=function(e,t){const i=e.indexOf(t);if(-1===i)return[];const n=[];let s=i-1;for(;s>=0&&e[s]===t-(i-s);)n.push(e[s--]);n.reverse(),s=i;for(;s<e.length&&e[s]===t+(s-i);)n.push(e[s++]);return n}(EP(o,[i]),i);if(0===a.length)return;const l=EP(r,function(e,t){const i=[];let n=0,s=0;for(;n<e.length||s<t.length;)if(n>=e.length)i.push(t[s++]);else if(s>=t.length)i.push(e[n++]);else{if(e[n]===t[s]){n++,s++;continue}e[n]<t[s]?i.push(e[n++]):s++}return i}(o,a));this.list.setSelection(l,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),n=i.filter((e=>e!==t));this.list.setFocus([t]),this.list.setAnchor(t),i.length===n.length?this.list.setSelection([...n,t],e.browserEvent):this.list.setSelection(n,e.browserEvent)}}dispose(){this.disposables.dispose()}}class xP{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }\n\t\t\t`),e.listFocusAndSelectionForeground&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }\n\t\t\t`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const n=NE(e.listFocusAndSelectionOutline,NE(e.listSelectionOutline,e.listFocusOutline??""));n&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${n}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);const s=NE(e.listSelectionOutline,e.listInactiveFocusOutline??"");s&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${s}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`\n\t\t\t\t.monaco-list${t}.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }\n\t\t\t`),e.listDropBetweenBackground&&(i.push(`\n\t\t\t.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list${t} .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${e.listDropBetweenBackground};\n\t\t\t}`),i.push(`\n\t\t\t.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list${t} .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${e.listDropBetweenBackground};\n\t\t\t}`)),e.tableColumnsBorder&&i.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${e.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`),e.tableOddRowsBackgroundColor&&i.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${e.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`),this.styleElement.textContent=i.join("\n")}}const kP={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:WR.Q1.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:WR.Q1.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:WR.Q1.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},LP={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}}};function EP(e,t){const i=[];let n=0,s=0;for(;n<e.length||s<t.length;)if(n>=e.length)i.push(t[s++]);else if(s>=t.length)i.push(e[n++]);else{if(e[n]===t[s]){i.push(e[n]),n++,s++;continue}e[n]<t[s]?i.push(e[n++]):i.push(t[s++])}return i}const MP=(e,t)=>e-t;class TP{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map((t=>t.renderTemplate(e)))}renderElement(e,t,i,n){let s=0;for(const r of this.renderers)r.renderElement(e,t,i[s++],n)}disposeElement(e,t,i,n){let s=0;for(const r of this.renderers)r.disposeElement?.(e,t,i[s],n),s+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class DP{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new Mx.Cm}}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e),s=n&&"string"!==typeof n?n:(0,sP.lk)(n);i.disposables.add((0,sP.fm)((e=>{this.setAriaLabel(e.readObservable(s),i.container)})));const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"===typeof r?i.container.setAttribute("aria-level",`${r}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,n){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class NP{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,i,n,s){return this.dnd.onDragOver(e,t,i,n,s)}onDragLeave(e,t,i,n){this.dnd.onDragLeave?.(e,t,i,n)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,i,n,s){this.dnd.drop(e,t,i,n,s)}dispose(){this.dnd.dispose()}}class IP{get onDidChangeFocus(){return rk.Jh.map(this.eventBufferer.wrapEvent(this.focus.onChange),(e=>this.toListEvent(e)),this.disposables)}get onDidChangeSelection(){return rk.Jh.map(this.eventBufferer.wrapEvent(this.selection.onChange),(e=>this.toListEvent(e)),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=rk.Jh.chain(this.disposables.add(new BD(this.view.domNode,"keydown")).event,(t=>t.map((e=>new Zx(e))).filter((t=>e=58===t.keyCode||t.shiftKey&&68===t.keyCode)).map((e=>fE(e,!0))).filter((()=>!1)))),i=rk.Jh.chain(this.disposables.add(new BD(this.view.domNode,"keyup")).event,(t=>t.forEach((()=>e=!1)).map((e=>new Zx(e))).filter((e=>58===e.keyCode||e.shiftKey&&68===e.keyCode)).map((e=>fE(e,!0))).map((e=>{let{browserEvent:t}=e;const i=this.getFocus(),n=i.length?i[0]:void 0;return{index:n,element:"undefined"!==typeof n?this.view.element(n):void 0,anchor:"undefined"!==typeof n?this.view.domElement(n):this.view.domNode,browserEvent:t}})))),n=rk.Jh.chain(this.view.onContextMenu,(t=>t.filter((t=>!e)).map((e=>{let{element:t,index:i,browserEvent:n}=e;return{element:t,index:i,anchor:new ik(fL(this.view.domNode),n),browserEvent:n}}))));return rk.Jh.any(t,i,n)}get onKeyDown(){return this.disposables.add(new BD(this.view.domNode,"keydown")).event}get onDidFocus(){return rk.Jh.signal(this.disposables.add(new BD(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return rk.Jh.signal(this.disposables.add(new BD(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LP;this.user=e,this._options=s,this.focus=new aP("focused"),this.anchor=new aP("anchor"),this.eventBufferer=new rk.at,this._ariaLabel="",this.disposables=new Mx.Cm,this._onDidDispose=new rk.vl,this.onDidDispose=this._onDidDispose.event;const r=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new lP("listbox"!==r);const o=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(o.push(new DP(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map((e=>new TP(e.templateId,[...o,e])));const a={...s,dnd:s.dnd&&new NP(this,s.dnd)};if(this.view=this.createListView(t,i,n,a),this.view.domNode.setAttribute("role",r),s.styleController)this.styleController=s.styleController(this.view.domId);else{const e=iE(this.view.domNode);this.styleController=new xP(e,this.view.domId)}if(this.spliceable=new VR([new hP(this.focus,this.view,s.identityProvider),new hP(this.selection,this.view,s.identityProvider),new hP(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new bP(this,this.view)),("boolean"!==typeof s.keyboardSupport||s.keyboardSupport)&&(this.keyboardController=new mP(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const e=s.keyboardNavigationDelegate||_P;this.typeNavigationController=new vP(this,this.view,s.keyboardNavigationLabelProvider,s.keyboardNavigationEventFilter??(()=>!0),e),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new tP(e,t,i,n)}createMouseController(e){return new SP(this)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<0||e>this.view.length)throw new UR(this.user,`Invalid start index: ${e}`);if(t<0)throw new UR(this.user,`Invalid delete count: ${t}`);0===t&&0===i.length||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(e,t,i)))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new UR(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((e=>this.view.element(e)))}setAnchor(e){if("undefined"!==typeof e){if(e<0||e>=this.length)throw new UR(this.user,`Invalid index ${e}`);this.anchor.set([e])}else this.anchor.set([])}getAnchor(){return(0,OS.Fy)(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return"undefined"===typeof e?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new UR(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(0===this.length)return;const s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,n);r>-1&&this.setFocus([r],i)}focusPrevious(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(0===this.length)return;const s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,n);r>-1&&this.setFocus([r],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=0===i?0:i-1;const n=this.getFocus()[0];if(n!==i&&(void 0===n||i>n)){const s=this.findPreviousIndex(i,!1,t);s>-1&&n!==s?this.setFocus([s],e):this.setFocus([i],e)}else{const s=this.view.getScrollTop();let r=s+this.view.renderHeight;i>n&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),await(0,sk.wR)(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>0;const s=n(),r=this.view.getScrollTop()+s;i=0===r?this.view.indexAt(r):this.view.indexAfter(r-1);const o=this.getFocus()[0];if(o!==i&&(void 0===o||o>=i)){const n=this.findNextIndex(i,!1,t);n>-1&&o!==n?this.setFocus([n],e):this.setFocus([i],e)}else{const i=r;this.view.setScrollTop(r-this.view.renderHeight-s),this.view.getScrollTop()+n()!==i&&(this.setFocus([]),await(0,sk.wR)(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(0===this.length)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(0===this.length)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e%=this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((e=>this.view.element(e)))}reveal(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e<0||e>=this.length)throw new UR(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if((0,gM.Et)(t)){const e=r-this.view.renderHeight+i;this.view.setScrollTop(e*(0,HR.qE)(t,0,1)+s-i)}else{const e=s+r,t=n+this.view.renderHeight;s<n+i&&e>=t||(s<n+i||e>=t&&r>=this.view.renderHeight?this.view.setScrollTop(s-i):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<0||e>=this.length)throw new UR(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<i+t||n+s>i+this.view.renderHeight)return null;const r=s-this.view.renderHeight+t;return Math.abs((i+t-n)/r)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent(e){let{indexes:t,browserEvent:i}=e;return{indexes:t,elements:t.map((e=>this.view.element(e))),browserEvent:i}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}rP([lD],IP.prototype,"onDidChangeFocus",null),rP([lD],IP.prototype,"onDidChangeSelection",null),rP([lD],IP.prototype,"onContextMenu",null),rP([lD],IP.prototype,"onKeyDown",null),rP([lD],IP.prototype,"onDidFocus",null),rP([lD],IP.prototype,"onDidBlur",null);const AP=xE,RP="selectOption.entry.template";class PP{get templateId(){return RP}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=vE(e,AP(".option-text")),t.detail=vE(e,AP(".option-detail")),t.decoratorRight=vE(e,AP(".option-decorator-right")),t}renderElement(e,t,i){const n=i,s=e.text,r=e.detail,o=e.decoratorRight,a=e.isDisabled;n.text.textContent=s,n.detail.textContent=r||"",n.decoratorRight.innerText=o||"",a?n.root.classList.add("option-disabled"):n.root.classList.remove("option-disabled")}disposeTemplate(e){}}class OP extends Mx.jG{static#e=(()=>this.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32)();static#t=(()=>this.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2)();static#i=(()=>this.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3)();constructor(e,t,i,n,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=n,this.selectBoxOptions=s||Object.create(null),"number"!==typeof this.selectBoxOptions.minBottomMargin?this.selectBoxOptions.minBottomMargin=OP.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding","string"===typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"===typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new rk.vl,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(zR().setupManagedHover(OR("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return RP}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=xE(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=vE(this.selectDropDownContainer,AP(".select-box-details-pane"));const t=vE(this.selectDropDownContainer,AP(".select-box-dropdown-container-width-control")),i=vE(t,AP(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",vE(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=iE(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(EL(this.selectDropDownContainer,gE.DRAG_START,(e=>{fE(e,!0)})))}registerListeners(){let e;this._register(TL(this.selectElement,"change",(e=>{this.selected=e.target.selectedIndex,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}))),this._register(EL(this.selectElement,gE.CLICK,(e=>{fE(e),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(EL(this.selectElement,gE.MOUSE_DOWN,(e=>{fE(e)}))),this._register(EL(this.selectElement,"touchstart",(t=>{e=this._isVisible}))),this._register(EL(this.selectElement,"touchend",(t=>{fE(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(EL(this.selectElement,gE.KEY_DOWN,(e=>{const t=new Zx(e);let i=!1;BS.zx?18!==t.keyCode&&16!==t.keyCode&&10!==t.keyCode&&3!==t.keyCode||(i=!0):(18===t.keyCode&&t.altKey||16===t.keyCode&&t.altKey||10===t.keyCode||3===t.keyCode)&&(i=!0),i&&(this.showSelectDropDown(),fE(e,!0))})))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){OS.aI(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach(((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled)),"string"===typeof e.description&&(this._hasDetails=!0)}))),void 0!==t&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join("\n")}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=NE(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach(((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)})),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=fL(this.selectElement),i=zL(this.selectElement),n=fL(this.selectElement).getComputedStyle(this.selectElement),s=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),o=i.top-OP.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,l=this.setWidthControlElement(this.widthControlElement),h=Math.max(l,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=h,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let c=this.selectList.contentHeight;this._hasDetails&&void 0===this._cachedMaxDetailsHeight&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const d=this._hasDetails?this._cachedMaxDetailsHeight:0,u=c+s+d,g=Math.floor((r-s-d)/this.getHeight()),p=Math.floor((o-s-d)/this.getHeight());if(e)return!(i.top+i.height>t.innerHeight-22||i.top<OP.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&p<1)&&(g<OP.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<OP.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||0===this._dropDownPosition&&g<1||1===this._dropDownPosition&&p<1)return this.hideSelectDropDown(!0),!1;if(0===this._dropDownPosition){if(this._isVisible&&g+p<1)return this.hideSelectDropDown(!0),!1;u>r&&(c=g*this.getHeight())}else u>o&&(c=p*this.getHeight());return this.selectList.layout(c),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=c+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=c+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=h,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}return!1}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach(((e,t)=>{const s=e.detail?e.detail.length:0,r=e.decoratorRight?e.decoratorRight.length:0,o=e.text.length+s+r;o>n&&(i=t,n=o)})),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=WL(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=vE(e,AP(".select-box-dropdown-list-container")),this.listRenderer=new PP,this.selectList=this._register(new IP("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:e=>{let t=e.text;return e.detail&&(t+=`. ${e.detail}`),e.decoratorRight&&(t+=`. ${e.decoratorRight}`),e.description&&(t+=`. ${e.description}`),t},getWidgetAriaLabel:()=>(0,WS.kg)({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>BS.zx?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new BD(this.selectDropDownListContainer,"keydown")),i=rk.Jh.chain(t.event,(e=>e.filter((()=>this.selectList.length>0)).map((e=>new Zx(e)))));this._register(rk.Jh.chain(i,(e=>e.filter((e=>3===e.keyCode))))(this.onEnter,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>2===e.keyCode))))(this.onEnter,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>9===e.keyCode))))(this.onEscape,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>16===e.keyCode))))(this.onUpArrow,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>18===e.keyCode))))(this.onDownArrow,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>12===e.keyCode))))(this.onPageDown,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>11===e.keyCode))))(this.onPageUp,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>14===e.keyCode))))(this.onHome,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>13===e.keyCode))))(this.onEnd,this)),this._register(rk.Jh.chain(i,(e=>e.filter((e=>e.keyCode>=21&&e.keyCode<=56||e.keyCode>=85&&e.keyCode<=113))))(this.onCharacter,this)),this._register(EL(this.selectList.getHTMLElement(),gE.POINTER_UP,(e=>this.onPointerUp(e)))),this._register(this.selectList.onMouseOver((e=>"undefined"!==typeof e.index&&this.selectList.setFocus([e.index])))),this._register(this.selectList.onDidChangeFocus((e=>this.onListFocus(e)))),this._register(EL(this.selectDropDownContainer,gE.FOCUS_OUT,(e=>{this._isVisible&&!GL(e.relatedTarget,this.selectDropDownContainer)&&this.onListBlur()}))),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;fE(e);const t=e.target;if(!t)return;if(t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const n=Number(i.getAttribute("data-index")),s=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!s&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=e=>{for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes.item(t);"img"===(n.tagName&&n.tagName.toLowerCase())?n.remove():i(n)}},n=sI({value:e,supportThemeIcons:!0},{actionHandler:t});return n.element.classList.add("select-box-description-markdown"),i(n.element),n.element}onListFocus(e){this._isVisible&&this._hasDetails&&this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=t?.description??"";if(i){if(t?.descriptionIsMarkdown??!1){const e=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,e))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){fE(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){fE(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){fE(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){if(this.selected>0){fE(e,!0);this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onPageUp(e){fE(e),this.selectList.focusPreviousPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onPageDown(e){fE(e),this.selectList.focusNextPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onHome(e){fE(e),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){fE(e),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Hx.YM.toString(e.keyCode);let i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),fE(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}class FP extends Mx.jG{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box","string"===typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"===typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new rk.vl),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(dD.addTarget(this.selectElement)),[hD.Tap].forEach((e=>{this._register(EL(this.selectElement,e,(e=>{this.selectElement.focus()})))})),this._register(TL(this.selectElement,"click",(e=>{fE(e,!0)}))),this._register(TL(this.selectElement,"change",(e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})}))),this._register(TL(this.selectElement,"keydown",(e=>{let t=!1;BS.zx?18!==e.keyCode&&16!==e.keyCode&&10!==e.keyCode||(t=!0):(18===e.keyCode&&e.altKey||10===e.keyCode||3===e.keyCode)&&(t=!0),t&&e.stopPropagation()})))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){this.options&&OS.aI(this.options,e)||(this.options=e,this.selectElement.options.length=0,this.options.forEach(((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled))}))),void 0!==t&&this.select(t)}select(e){0===this.options.length?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&"string"===typeof this.options[this.selected].text?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}}class BP extends uD{constructor(e,t,i,n,s){super(),BS.zx&&!s?.useCustomDrawn?this.selectBoxDelegate=new FP(e,t,n,s):this.selectBoxDelegate=new OP(e,t,i,n,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class zP extends Mx.jG{get action(){return this._action}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.options=i,this._context=e||this,this._action=t,t instanceof sM&&this._register(t.onDidChange((e=>{this.element&&this.handleActionChangeEvent(e)})))}handleActionChangeEvent(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new rM)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(dD.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Rx&&this._register(EL(e,gE.DRAG_START,(e=>e.dataTransfer?.setData(IR.TEXT,this._action.label))))),this._register(EL(t,hD.Tap,(e=>this.onClick(e,!0)))),this._register(EL(t,gE.MOUSE_DOWN,(e=>{i||fE(e,!0),this._action.enabled&&0===e.button&&t.classList.add("active")}))),BS.zx&&this._register(EL(t,gE.CONTEXT_MENU,(e=>{0===e.button&&!0===e.ctrlKey&&this.onClick(e)}))),this._register(EL(t,gE.CLICK,(e=>{fE(e,!0),this.options&&this.options.isMenu||this.onClick(e)}))),this._register(EL(t,gE.DBLCLICK,(e=>{fE(e,!0)}))),[gE.MOUSE_UP,gE.MOUSE_OUT].forEach((e=>{this._register(EL(t,e,(e=>{fE(e),t.classList.remove("active")})))}))}onClick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fE(e,!0);const i=gM.z(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=e;else if(this.customHover||""===e)this.customHover&&this.customHover.update(e);else{const t=this.options.hoverDelegate??OR("element");this.customHover=this._store.add(zR().setupManagedHover(t,this.element,e))}}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class VP extends zP{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass=""}render(e){super.render(e),gM.j(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const e=document.createElement("span");e.classList.add("keybinding"),e.textContent=this.options.keybinding,this.element.appendChild(e)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===oM.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=WS.kg({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(void 0!==this.action.checked?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class WP extends zP{constructor(e,t,i,n,s,r,o){super(e,t),this.selectBox=new BP(i,n,s,r,o),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect((e=>this.runAction(e.selected,e.index))))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}}class HP extends rM{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new rk.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=vE(e,xE(".monaco-dropdown")),this._label=vE(this._element,xE(".dropdown-label"));let i=t.labelRenderer;i||(i=e=>(e.textContent=t.label||"",null));for(const s of[gE.CLICK,gE.MOUSE_DOWN,hD.Tap])this._register(EL(this.element,s,(e=>fE(e,!0))));for(const s of[gE.MOUSE_DOWN,hD.Tap])this._register(EL(this._label,s,(e=>{dE(e)&&(e.detail>1||0!==e.button)||(this.visible?this.hide():this.show())})));this._register(EL(this._label,gE.KEY_UP,(e=>{const t=new Zx(e);(t.equals(3)||t.equals(10))&&(fE(e,!0),this.visible?this.hide():this.show())})));const n=i(this._label);n&&this._register(n),this._register(dD.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class UP extends HP{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class jP extends zP{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object.create(null);super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new rk.vl),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:e=>{this.element=vE(e,xE("a.action-label"));let t=[];return"string"===typeof this.options.classNames?t=this.options.classNames.split(/\s+/g).filter((e=>!!e)):this.options.classNames&&(t=this.options.classNames),t.find((e=>"icon"===e))||t.push("codicon"),this.element.classList.add(...t),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(zR().setupManagedHover(this.options.hoverDelegate??OR("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:t?this.menuActionsOrProvider:void 0,actionProvider:t?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new UP(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility((e=>{this.element?.setAttribute("aria-expanded",`${e}`),this._onDidChangeVisibility.fire(e)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const e=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return e.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){const e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}}var GP,KP;!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"}(GP||(GP={})),function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(KP||(KP={}));class $P extends Mx.jG{static#e=(()=>this.DEFAULT_FLUSH_DELAY=100)();constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null);super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new rk.fV),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=KP.None,this.cache=new Map,this.flushDelayer=this._register(new sk.Th($P.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal((e=>this.onDidChangeItemsExternal(e))))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach(((e,t)=>this.acceptExternal(t,e))),e.deleted?.forEach((e=>this.acceptExternal(e,void 0)))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===KP.Closed)return;let i=!1;if((0,gM.z)(t))i=this.cache.delete(e);else{this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0)}i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return(0,gM.z)(i)?t:i}getBoolean(e,t){const i=this.get(e);return(0,gM.z)(i)?t:"true"===i}getNumber(e,t){const i=this.get(e);return(0,gM.z)(i)?t:parseInt(i,10)}async set(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.state===KP.Closed)return;if((0,gM.z)(t))return this.delete(e,i);const n=(0,gM.Gv)(t)||Array.isArray(t)?(s=t,JSON.stringify(s,tI)):String(t);var s;return this.cache.get(e)!==n?(this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()):void 0}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.state===KP.Closed)return;return this.cache.delete(e)?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()):void 0}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally((()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()}))}async doFlush(e){return this.options.hint===GP.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger((()=>this.flushPending()),e)}}class qP{constructor(){this.onDidChangeItemsExternal=rk.Jh.None,this.items=new Map}async updateItems(e){e.insert?.forEach(((e,t)=>this.items.set(t,e))),e.delete?.forEach((e=>this.items.delete(e)))}}const QP="__$__targetStorageMarker",XP=(0,eM.u1)("storageService");var YP;!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(YP||(YP={}));class ZP extends Mx.jG{static#e=(()=>this.DEFAULT_FLUSH_INTERVAL=6e4)();constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flushInterval:ZP.DEFAULT_FLUSH_INTERVAL};super(),this.options=e,this._onDidChangeValue=this._register(new rk.fV),this._onDidChangeTarget=this._register(new rk.fV),this._onWillSaveState=this._register(new rk.vl),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return rk.Jh.filter(this._onDidChangeValue.event,(i=>i.scope===e&&(void 0===t||i.key===t)),i)}emitDidChangeValue(e,t){const{key:i,external:n}=t;if(i===QP){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}get(e,t,i){return this.getStorage(t)?.get(e,i)}getBoolean(e,t,i){return this.getStorage(t)?.getBoolean(e,i)}getNumber(e,t,i){return this.getStorage(t)?.getNumber(e,i)}store(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,gM.z)(t)?this.remove(e,i,s):this.withPausedEmitters((()=>{this.updateKeyTarget(e,i,n),this.getStorage(i)?.set(e,t,s)}))}remove(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.withPausedEmitters((()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,i)}))}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=this.getKeyTargets(t);"number"===typeof i?s[e]!==i&&(s[e]=i,this.getStorage(t)?.set(QP,JSON.stringify(s),n)):"number"===typeof s[e]&&(delete s[e],this.getStorage(t)?.set(QP,JSON.stringify(s),n))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?function(e){const t=e.get(QP);if(t)try{return JSON.parse(t)}catch(i){}return Object.create(null)}(t):Object.create(null)}}var JP=i(9734);const eO={keybindingLabelBackground:(0,ZT.GuP)(ZT.HDX),keybindingLabelForeground:(0,ZT.GuP)(ZT.eUu),keybindingLabelBorder:(0,ZT.GuP)(ZT.zUX),keybindingLabelBottomBorder:(0,ZT.GuP)(ZT.Qfh),keybindingLabelShadow:(0,ZT.GuP)(ZT.f9l)},tO={buttonForeground:(0,ZT.GuP)(ZT.G_h),buttonSeparator:(0,ZT.GuP)(ZT.Q1$),buttonBackground:(0,ZT.GuP)(ZT.XJc),buttonHoverBackground:(0,ZT.GuP)(ZT.T9h),buttonSecondaryForeground:(0,ZT.GuP)(ZT.Inn),buttonSecondaryBackground:(0,ZT.GuP)(ZT.xOA),buttonSecondaryHoverBackground:(0,ZT.GuP)(ZT.nZG),buttonBorder:(0,ZT.GuP)(ZT.raQ)},iO={progressBarBackground:(0,ZT.GuP)(ZT.BTi)},nO={inputActiveOptionBorder:(0,ZT.GuP)(ZT.uNK),inputActiveOptionForeground:(0,ZT.GuP)(ZT.$$0),inputActiveOptionBackground:(0,ZT.GuP)(ZT.c1f)},sO=((0,ZT.GuP)(ZT.jOE),(0,ZT.GuP)(ZT.Ukx),(0,ZT.GuP)(ZT.Ips),(0,ZT.GuP)(ZT.kPT),(0,ZT.GuP)(ZT.xWN),(0,ZT.GuP)(ZT.ZBU),(0,ZT.GuP)(ZT.jr9),(0,ZT.GuP)(ZT.OcU),(0,ZT.GuP)(ZT.C5U),(0,ZT.GuP)(ZT.t0B),(0,ZT.GuP)(ZT.CgL),(0,ZT.GuP)(ZT.FiB),(0,ZT.GuP)(ZT.f9l),(0,ZT.GuP)(ZT.b1q),(0,ZT.GuP)(ZT.tYX),(0,ZT.GuP)(ZT.JPj),(0,ZT.GuP)(ZT.bNw),(0,ZT.GuP)(ZT.vwp),{inputBackground:(0,ZT.GuP)(ZT.L4c),inputForeground:(0,ZT.GuP)(ZT.cws),inputBorder:(0,ZT.GuP)(ZT.Zgs),inputValidationInfoBorder:(0,ZT.GuP)(ZT.YSW),inputValidationInfoBackground:(0,ZT.GuP)(ZT.I$A),inputValidationInfoForeground:(0,ZT.GuP)(ZT.L9Z),inputValidationWarningBorder:(0,ZT.GuP)(ZT.C1n),inputValidationWarningBackground:(0,ZT.GuP)(ZT.ULt),inputValidationWarningForeground:(0,ZT.GuP)(ZT.T5N),inputValidationErrorBorder:(0,ZT.GuP)(ZT.eYZ),inputValidationErrorBackground:(0,ZT.GuP)(ZT._$n),inputValidationErrorForeground:(0,ZT.GuP)(ZT.h9z)}),rO={listFilterWidgetBackground:(0,ZT.GuP)(ZT.pnl),listFilterWidgetOutline:(0,ZT.GuP)(ZT.fiM),listFilterWidgetNoMatchesOutline:(0,ZT.GuP)(ZT.P9Z),listFilterWidgetShadow:(0,ZT.GuP)(ZT.H8q),inputBoxStyles:sO,toggleStyles:nO},oO={badgeBackground:(0,ZT.GuP)(ZT.WMx),badgeForeground:(0,ZT.GuP)(ZT.zRE),badgeBorder:(0,ZT.GuP)(ZT.b1q)},aO=((0,ZT.GuP)(ZT.vV$),(0,ZT.GuP)(ZT.mc0),(0,ZT.GuP)(ZT.etE),(0,ZT.GuP)(ZT.etE),(0,ZT.GuP)(ZT.sAS),{listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:(0,ZT.GuP)(ZT.VFX),listFocusForeground:(0,ZT.GuP)(ZT.efJ),listFocusOutline:(0,ZT.GuP)(ZT.p7Y),listActiveSelectionBackground:(0,ZT.GuP)(ZT.Rjz),listActiveSelectionForeground:(0,ZT.GuP)(ZT.GVV),listActiveSelectionIconForeground:(0,ZT.GuP)(ZT.fED),listFocusAndSelectionOutline:(0,ZT.GuP)(ZT.gtq),listFocusAndSelectionBackground:(0,ZT.GuP)(ZT.Rjz),listFocusAndSelectionForeground:(0,ZT.GuP)(ZT.GVV),listInactiveSelectionBackground:(0,ZT.GuP)(ZT.uNx),listInactiveSelectionIconForeground:(0,ZT.GuP)(ZT.C9U),listInactiveSelectionForeground:(0,ZT.GuP)(ZT.f4y),listInactiveFocusBackground:(0,ZT.GuP)(ZT.CQ3),listInactiveFocusOutline:(0,ZT.GuP)(ZT.ijf),listHoverBackground:(0,ZT.GuP)(ZT.lO1),listHoverForeground:(0,ZT.GuP)(ZT.QRv),listDropOverBackground:(0,ZT.GuP)(ZT.Yoe),listDropBetweenBackground:(0,ZT.GuP)(ZT.yIp),listSelectionOutline:(0,ZT.GuP)(ZT.buw),listHoverOutline:(0,ZT.GuP)(ZT.buw),treeIndentGuidesStroke:(0,ZT.GuP)(ZT.U4U),treeInactiveIndentGuidesStroke:(0,ZT.GuP)(ZT.pft),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:(0,ZT.GuP)(ZT.bXl),tableColumnsBorder:(0,ZT.GuP)(ZT.k5u),tableOddRowsBackgroundColor:(0,ZT.GuP)(ZT.sbQ)});function lO(e){return function(e,t){const i={...t};for(const n in e){const t=e[n];i[n]=void 0!==t?(0,ZT.GuP)(t):void 0}return i}(e,aO)}const hO={selectBackground:(0,ZT.GuP)(ZT.rvE),selectListBackground:(0,ZT.GuP)(ZT.lWP),selectForeground:(0,ZT.GuP)(ZT.yqq),decoratorRightForeground:(0,ZT.GuP)(ZT.NBf),selectBorder:(0,ZT.GuP)(ZT.HcB),focusBorder:(0,ZT.GuP)(ZT.tAP),listFocusBackground:(0,ZT.GuP)(ZT.AlL),listInactiveSelectionIconForeground:(0,ZT.GuP)(ZT.c7i),listFocusForeground:(0,ZT.GuP)(ZT.nH),listFocusOutline:(0,ZT.HP_)(ZT.buw,WR.Q1.transparent.toString()),listHoverBackground:(0,ZT.GuP)(ZT.lO1),listHoverForeground:(0,ZT.GuP)(ZT.QRv),listHoverOutline:(0,ZT.GuP)(ZT.buw),selectListBorder:(0,ZT.GuP)(ZT.sIe),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},cO={shadowColor:(0,ZT.GuP)(ZT.f9l),borderColor:(0,ZT.GuP)(ZT.g$2),foregroundColor:(0,ZT.GuP)(ZT.dd_),backgroundColor:(0,ZT.GuP)(ZT.c6Y),selectionForegroundColor:(0,ZT.GuP)(ZT.pmr),selectionBackgroundColor:(0,ZT.GuP)(ZT.Ux$),selectionBorderColor:(0,ZT.GuP)(ZT.SNb),separatorColor:(0,ZT.GuP)(ZT.D7X),scrollbarShadow:(0,ZT.GuP)(ZT.bXl),scrollbarSliderBackground:(0,ZT.GuP)(ZT.gnV),scrollbarSliderHoverBackground:(0,ZT.GuP)(ZT.cI_),scrollbarSliderActiveBackground:(0,ZT.GuP)(ZT.mhZ)};var dO=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},uO=function(e,t){return function(i,n){t(i,n,e)}};function gO(e,t,i){let n,s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>"navigation"===e,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Array.isArray(t)?(n=t,s=t):(n=t.primary,s=t.secondary);const l=new Set;for(const[h,c]of e){let e;r(h)?(e=n,e.length>0&&a&&e.push(new oM)):(e=s,e.length>0&&e.push(new oM));for(let t of c){i&&(t=t instanceof DM&&t.alt?t.alt:t);const n=e.push(t);t instanceof aM&&l.add({group:h,action:t,index:n-1})}}for(const{group:h,action:c,index:d}of l){const e=r(h)?n:s,t=c.actions;o(c,h,e.length)&&e.splice(d,1,...t)}}let pO=class extends VP{constructor(e,t,i,n,s,r,o,a){super(void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=n,this._contextKeyService=s,this._themeService=r,this._contextMenuService=o,this._accessibilityService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Mx.HE),this._altKey=AE.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{const e=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);e!==this._wantsAltCommand&&(this._wantsAltCommand=e,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(EL(e,"mouseleave",(e=>{t=!1,i()}))),this._register(EL(e,"mouseenter",(e=>{t=!0,i()}))),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let n=t?(0,WS.kg)("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,t=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),i=t&&t.getLabel(),s=i?(0,WS.kg)("titleAndKb","{0} ({1})",e,i):e;n=(0,WS.kg)("titleAndKbAndAlt","{0}\n[{1}] {2}",n,tR.modifierLabels[BS.OS].altKey,s)}return n}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const n=this._commandAction.checked&&((s=e.toggled)&&void 0!==s.condition)&&e.toggled.icon?e.toggled.icon:e.icon;var s;if(n)if(cM.L.isThemeIcon(n)){const e=cM.L.asClassNameArray(n);i.classList.add(...e),this._itemClassDispose.value=(0,Mx.s)((()=>{i.classList.remove(...e)}))}else i.style.backgroundImage=(0,JP.HD)(this._themeService.getColorTheme().type)?TE(n.dark):TE(n.light),i.classList.add("icon"),this._itemClassDispose.value=(0,Mx.qE)((0,Mx.s)((()=>{i.style.backgroundImage="",i.classList.remove("icon")})),this._themeService.onDidColorThemeChange((()=>{this.updateClass()})))}};pO=dO([uO(2,oD),uO(3,PT),uO(4,mM.fN),uO(5,bT.Gy),uO(6,rD),uO(7,GI)],pO);let fO=class extends jP{constructor(e,t,i,n,s){const r={...t,menuAsChild:t?.menuAsChild??!1,classNames:t?.classNames??(cM.L.isThemeIcon(e.item.icon)?cM.L.asClassName(e.item.icon):void 0),keybindingProvider:t?.keybindingProvider??(e=>i.lookupKeybinding(e.id))};super(e,{getActions:()=>e.actions},n,r),this._keybindingService=i,this._contextMenuService=n,this._themeService=s}render(e){super.render(e),(0,gM.j)(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!cM.L.isThemeIcon(i)){this.element.classList.add("icon");const e=()=>{this.element&&(this.element.style.backgroundImage=(0,JP.HD)(this._themeService.getColorTheme().type)?TE(i.dark):TE(i.light))};e(),this._register(this._themeService.onDidColorThemeChange((()=>{e()})))}}};fO=dO([uO(2,oD),uO(3,rD),uO(4,bT.Gy)],fO);let mO=class extends zP{constructor(e,t,i,n,s,r,o,a){let l;super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=s,this._menuService=r,this._instaService=o,this._storageService=a,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;const h=t?.persistLastActionId?a.get(this._storageKey,1):void 0;h&&(l=e.actions.find((e=>h===e.id))),l||(l=e.actions[0]),this._defaultAction=this._instaService.createInstance(pO,l,{keybinding:this._getDefaultActionKeybindingLabel(l)});const c={keybindingProvider:e=>this._keybindingService.lookupKeybinding(e.id),...t,menuAsChild:t?.menuAsChild??!0,classNames:t?.classNames??["codicon","codicon-chevron-down"],actionRunner:t?.actionRunner??new rM};this._dropdown=new jP(e,e.actions,this._contextMenuService,c),this._register(this._dropdown.actionRunner.onDidRun((e=>{e.action instanceof DM&&this.update(e.action)})))}update(e){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(pO,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends rM{async runAction(e,t){await e.run(void 0)}},this._container&&this._defaultAction.render(bE(this._container,xE(".action-container")))}_getDefaultActionKeybindingLabel(e){let t;if(this._options?.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(t=`(${i.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=xE(".action-container");this._defaultAction.render(vE(this._container,t)),this._register(EL(t,gE.KEY_DOWN,(e=>{const t=new Zx(e);t.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),t.stopPropagation())})));const i=xE(".dropdown-action-container");this._dropdown.render(vE(this._container,i)),this._register(EL(i,gE.KEY_DOWN,(e=>{const t=new Zx(e);t.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),t.stopPropagation())})))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};mO=dO([uO(2,oD),uO(3,PT),uO(4,rD),uO(5,LM),uO(6,eM._Y),uO(7,XP)],mO);let _O=class extends WP{constructor(e,t){super(null,e,e.actions.map((e=>({text:e.id===oM.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":e.label,isDisabled:!e.enabled}))),0,t,hO,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex((e=>e.checked))))}render(e){super.render(e),e.style.borderColor=(0,ZT.GuP)(ZT.HcB)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};_O=dO([uO(1,sD)],_O);class vO extends Mx.jG{constructor(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(super(),this._actionRunnerDisposables=this._register(new Mx.Cm),this.viewItemDisposables=this._register(new Mx.$w),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new rk.vl),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new rk.vl({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new rk.vl),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new rk.vl),this.onWillRun=this._onWillRun.event,this.options=n,this._context=n.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=n.hoverDelegate??this._register(FR()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new rM,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((e=>this._onWillRun.fire(e)))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",this._orientation){case 0:t=[15],i=[17];break;case 1:t=[16],i=[18],this.domNode.className+=" vertical"}this._register(EL(this.domNode,gE.KEY_DOWN,(e=>{const n=new Zx(e);let s=!0;const r="number"===typeof this.focusedItem?this.viewItems[this.focusedItem]:void 0;t&&(n.equals(t[0])||n.equals(t[1]))?s=this.focusPrevious():i&&(n.equals(i[0])||n.equals(i[1]))?s=this.focusNext():n.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():n.equals(14)?s=this.focusFirst():n.equals(13)?s=this.focusLast():n.equals(2)&&r instanceof zP&&r.trapsArrowNavigation?s=this.focusNext(void 0,!0):this.isTriggerKeyEvent(n)?this._triggerKeys.keyDown?this.doTrigger(n):this.triggerKeyDown=!0:s=!1,s&&(n.preventDefault(),n.stopPropagation())}))),this._register(EL(this.domNode,gE.KEY_UP,(e=>{const t=new Zx(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026)||t.equals(16)||t.equals(18)||t.equals(15)||t.equals(17))&&this.updateFocusedItem()}))),this.focusTracker=this._register(_E(this.domNode)),this._register(this.focusTracker.onDidBlur((()=>{XL()!==this.domNode&&GL(XL(),this.domNode)||(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)}))),this._register(this.focusTracker.onDidFocus((()=>this.updateFocusedItem()))),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const e=this.viewItems.find((e=>e instanceof zP&&e.isEnabled()));e instanceof zP&&e.setFocusable(!0)}else this.viewItems.forEach((e=>{e instanceof zP&&e.setFocusable(!1)}))}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach((i=>{t=t||e.equals(i)})),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(GL(XL(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach((t=>t.setActionContext(e)))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((e=>this._onWillRun.fire(e)))),this.viewItems.forEach((t=>t.actionRunner=e))}getContainer(){return this.domNode}getAction(e){if("number"===typeof e)return this.viewItems[e]?.action;if(hE(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Array.isArray(e)?e:[e];let n=gM.Et(t.index)?t.index:null;i.forEach((e=>{const i=document.createElement("li");let s;i.className="action-item",i.setAttribute("role","presentation");const r={hoverDelegate:this._hoverDelegate,...t,isTabList:"tablist"===this.options.ariaRole};this.options.actionViewItemProvider&&(s=this.options.actionViewItemProvider(e,r)),s||(s=new VP(this.context,e,r)),this.options.allowContextMenu||this.viewItemDisposables.set(s,EL(i,gE.CONTEXT_MENU,(e=>{fE(e,!0)}))),s.actionRunner=this._actionRunner,s.setActionContext(this.context),s.render(i),this.focusable&&s instanceof zP&&0===this.viewItems.length&&s.setFocusable(!0),null===n||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(i),this.viewItems.push(s)):(this.actionsList.insertBefore(i,this.actionsList.children[n]),this.viewItems.splice(n,0,s),n++)})),"number"===typeof this.focusedItem&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=(0,Mx.AS)(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),kL(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return 0===this.viewItems.length}focus(e){let t,i=!1;if(void 0===e?i=!0:"number"===typeof e?t=e:"boolean"===typeof e&&(i=e),i&&"undefined"===typeof this.focusedItem){const e=this.viewItems.findIndex((e=>e.isEnabled()));this.focusedItem=-1===e?void 0:e,this.updateFocus(void 0,void 0,!0)}else void 0!==t&&(this.focusedItem=t),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if("undefined"===typeof this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===oM.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if("undefined"===typeof this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===oM.ID));return this.updateFocus(!0),!0}updateFocus(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"undefined"===typeof this.focusedItem&&this.actionsList.focus({preventScroll:t}),void 0!==this.previouslyFocusedItem&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const n=void 0!==this.focusedItem?this.viewItems[this.focusedItem]:void 0;if(n){let s=!0;gM.Tn(n.focus)||(s=!1),this.options.focusOnlyEnabledItems&&gM.Tn(n.isEnabled)&&!n.isEnabled()&&(s=!1),n.action.id===oM.ID&&(s=!1),s?(i||this.previouslyFocusedItem!==this.focusedItem)&&(n.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),s&&n.showHover?.()}}doTrigger(e){if("undefined"===typeof this.focusedItem)return;const t=this.viewItems[this.focusedItem];if(t instanceof zP){const i=null===t._context||void 0===t._context?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=(0,Mx.AS)(this.viewItems),this.getContainer().remove(),super.dispose()}}var bO=i(2683);const yO=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,wO=/(&amp;)?(&amp;)([^\s&])/g;var CO,SO;!function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(CO||(CO={})),function(e){e[e.Above=0]="Above",e[e.Below=1]="Below"}(SO||(SO={}));class xO extends vO{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:e=>this.doGetActionViewItem(e,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...BS.zx||BS.j9?[10]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(dD.addTarget(s)),this._register(EL(s,gE.KEY_DOWN,(e=>{new Zx(e).equals(2)&&e.preventDefault()}))),i.enableMnemonics&&this._register(EL(s,gE.KEY_DOWN,(e=>{const t=e.key.toLocaleLowerCase();if(this.mnemonics.has(t)){fE(e,!0);const i=this.mnemonics.get(t);if(1===i.length&&(i[0]instanceof LO&&i[0].container&&this.focusItemByElement(i[0].container),i[0].onClick(e)),i.length>1){const e=i.shift();e&&e.container&&(this.focusItemByElement(e.container),i.push(e)),this.mnemonics.set(t,i)}}}))),BS.j9&&this._register(EL(s,gE.KEY_DOWN,(e=>{const t=new Zx(e);t.equals(14)||t.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),fE(e,!0)):(t.equals(13)||t.equals(12))&&(this.focusedItem=0,this.focusPrevious(),fE(e,!0))}))),this._register(EL(this.domNode,gE.MOUSE_OUT,(e=>{GL(e.relatedTarget,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())}))),this._register(EL(this.actionsList,gE.MOUSE_OVER,(e=>{let t=e.target;if(t&&GL(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}))),this._register(dD.addTarget(this.actionsList)),this._register(EL(this.actionsList,hD.Tap,(e=>{let t=e.initialTarget;if(t&&GL(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new ND(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this.styleScrollElement(o,n),this._register(EL(s,hD.Change,(e=>{fE(e,!0);const t=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})}))),this._register(EL(o,gE.MOUSE_UP,(e=>{e.preventDefault()})));const a=fL(e);s.style.maxHeight=`${Math.max(10,a.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(((e,n)=>{if(i.submenuIds?.has(e.id))return console.warn(`Found submenu cycle: ${e.id}`),!1;if(e instanceof oM){if(n===t.length-1||0===n)return!1;if(t[n-1]instanceof oM)return!1}return!0})),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((e=>!(e instanceof EO))).forEach(((e,t,i)=>{e.updatePositionInSet(t+1,i.length)}))}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(qL(e)?this.styleSheet=iE(e):(xO.globalStyleSheet||(xO.globalStyleSheet=iE()),this.styleSheet=xO.globalStyleSheet)),this.styleSheet.textContent=function(e,t){let i=`\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${MO(vD.W.menuSelection)}\n${MO(vD.W.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;if(t){i+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";const t=e.scrollbarShadow;t&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${t} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${t} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${t} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`);const n=e.scrollbarSliderBackground;n&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${n};\n\t\t\t\t}\n\t\t\t`);const s=e.scrollbarSliderHoverBackground;s&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${s};\n\t\t\t\t}\n\t\t\t`);const r=e.scrollbarSliderActiveBackground;r&&(i+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${r};\n\t\t\t\t}\n\t\t\t`)}return i}(t,qL(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",n=t.backgroundColor??"",s=t.borderColor?`1px solid ${t.borderColor}`:"",r=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=s,e.style.borderRadius="5px",e.style.color=i,e.style.backgroundColor=n,e.style.boxShadow=r}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){if(e===this.actionsList.children[t]){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),"undefined"!==typeof this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof oM)return new EO(t.context,e,{icon:!0},this.menuStyles);if(e instanceof aM){const n=new LO(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const n=t.getKeyBinding(e);if(n){const e=n.getLabel();e&&(i.keybinding=e)}}const n=new kO(t.context,e,i,this.menuStyles);if(t.enableMnemonics){const e=n.getMnemonic();if(e&&n.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(n),this.mnemonics.set(e,t)}}return n}}}class kO extends zP{constructor(e,t,i,n){if(i.isMenu=!0,super(t,t,i),this.menuStyle=n,this.options=i,this.options.icon=void 0!==i.icon&&i.icon,this.options.label=void 0===i.label||i.label,this.cssClass="",this.options.label&&i.enableMnemonics){const e=this.action.label;if(e){const t=yO.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new sk.uC((()=>{this.element&&(this._register(EL(this.element,gE.MOUSE_UP,(e=>{if(fE(e,!0),Rx){if(new ik(fL(this.element),e).rightButton)return;this.onClick(e)}else setTimeout((()=>{this.onClick(e)}),0)}))),this._register(EL(this.element,gE.CONTEXT_MENU,(e=>{fE(e,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=vE(this.element,xE("a.action-menu-item")),this._action.id===oM.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=vE(this.item,xE("span.menu-item-check"+cM.L.asCSSSelector(vD.W.menuSelection))),this.check.setAttribute("role","none"),this.label=vE(this.item,xE("span.action-label")),this.options.label&&this.options.keybinding&&(vE(this.item,xE("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){kL(this.label);let e=PN(this.action.label);if(e){const t=function(e){const t=yO,i=t.exec(e);if(!i)return e;const n=!i[1];return e.replace(t,n?"$2$3":"").trim()}(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const i=yO.exec(e);if(i){e=Tx.ih(e),wO.lastIndex=0;let t=wO.exec(e);for(;t&&t[1];)t=wO.exec(e);const n=e=>e.replace(/&amp;&amp;/g,"&amp;");t?this.label.append(Tx.NB(n(e.substr(0,t.index))," "),xE("u",{"aria-hidden":"true"},t[3]),Tx.BO(n(e.substr(t.index+t[0].length))," ")):this.label.innerText=n(e).trim(),this.item?.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),void 0!==e?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=n,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}class LO extends kO{constructor(e,t,i,n,s){super(e,e,n,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new Mx.Cm),this.mouseOver=!1,this.expandDirection=n&&void 0!==n.expandDirection?n.expandDirection:{horizontal:CO.Right,vertical:SO.Below},this.showScheduler=new sk.uC((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new sk.uC((()=>{this.element&&!GL(XL(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=vE(this.item,xE("span.submenu-indicator"+cM.L.asCSSSelector(vD.W.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(EL(this.element,gE.KEY_UP,(e=>{const t=new Zx(e);(t.equals(17)||t.equals(3))&&(fE(e,!0),this.createSubmenu(!0))}))),this._register(EL(this.element,gE.KEY_DOWN,(e=>{const t=new Zx(e);XL()===this.item&&(t.equals(17)||t.equals(3))&&fE(e,!0)}))),this._register(EL(this.element,gE.MOUSE_OVER,(e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(EL(this.element,gE.MOUSE_LEAVE,(e=>{this.mouseOver=!1}))),this._register(EL(this.element,gE.FOCUS_OUT,(e=>{this.element&&!GL(XL(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}))))}updateEnabled(){}onClick(e){fE(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const s={top:0,left:0};return s.left=cA(e.width,t.width,{position:n.horizontal===CO.Right?0:1,offset:i.left,size:i.width}),s.left>=i.left&&s.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(s.left=i.left+10),i.top+=10,i.height=0),s.top=cA(e.height,t.height,{position:0,offset:i.top,size:0}),s.top+t.height===i.top&&s.top+i.height+t.height<=e.height&&(s.top+=i.height),s}createSubmenu(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=vE(this.element,xE("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=fL(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new xO(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new lM],this.submenuOptions,this.menuStyle);const n=this.element.getBoundingClientRect(),s={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},r=this.submenuContainer.getBoundingClientRect(),o=fL(this.element),{top:a,left:l}=this.calculateSubmenuMenuLayout(new BL(o.innerWidth,o.innerHeight),BL.lift(r),s,this.expandDirection);this.submenuContainer.style.left=l-r.left+"px",this.submenuContainer.style.top=a-r.top+"px",this.submenuDisposables.add(EL(this.submenuContainer,gE.KEY_UP,(e=>{new Zx(e).equals(15)&&(fE(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(EL(this.submenuContainer,gE.KEY_DOWN,(e=>{new Zx(e).equals(15)&&fE(e,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute("aria-expanded",e)}applyStyle(){super.applyStyle();const e=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=e??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class EO extends VP{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function MO(e){const t=(0,bO.J)()[e.id];return`.codicon-${e.id}:before { content: '\\${t.toString(16)}'; }`}class TO{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;let i;this.focusToReturn=XL();const n=hE(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:n=>{this.lastContainer=n;const s=e.getMenuClassName?e.getMenuClassName():"";s&&(n.className+=" "+s),this.options.blockMouse&&(this.block=n.appendChild(xE(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=EL(this.block,gE.MOUSE_DOWN,(e=>e.stopPropagation())));const r=new Mx.Cm,o=e.actionRunner||new rM;o.onWillRun((t=>this.onActionRun(t,!e.skipTelemetry)),this,r),o.onDidRun(this.onDidActionRun,this,r),i=new xO(n,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:o,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)},cO),i.onDidCancel((()=>this.contextViewService.hideContextView(!0)),null,r),i.onDidBlur((()=>this.contextViewService.hideContextView(!0)),null,r);const a=fL(n);return r.add(EL(a,gE.BLUR,(()=>this.contextViewService.hideContextView(!0)))),r.add(EL(a,gE.MOUSE_DOWN,(e=>{if(e.defaultPrevented)return;const t=new ik(a,e);let i=t.target;if(!t.rightButton){for(;i;){if(i===n)return;i=i.parentElement}this.contextViewService.hideContextView(!0)}}))),(0,Mx.qE)(r,i)},focus:()=>{i?.focus(!!e.autoSelectFirstItem)},onHide:t=>{e.onHide?.(!!t),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&(XL()===this.lastContainer||GL(XL(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!(0,Ux.MB)(e.error)&&this.notificationService.error(e.error)}}var DO=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},NO=function(e,t){return function(i,n){t(i,n,e)}};let IO=class extends Mx.jG{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new TO(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,s,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=s,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new rk.vl),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new rk.vl)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=AO.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{e.onHide?.(t),this._onDidHideContextMenu.fire()}}),AE.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};var AO,RO;IO=DO([NO(0,NM),NO(1,PT),NO(2,sD),NO(3,oD),NO(4,LM),NO(5,mM.fN)],IO),function(e){e.transform=function(e,t,i){if(!((n=e)&&n.menuId instanceof kM))return e;var n;const{menuId:s,menuActionOptions:r,contextKeyService:o}=e;return{...e,getActions:()=>{const n=[];if(s){!function(e,t,i,n){let s,r,o;if(Array.isArray(e))o=e,s=t,r=i;else{const a=t;o=e.getActions(a),s=i,r=n}const a=AE.getInstance();gO(o,s,a.keyStatus.altKey||(BS.uF||BS.j9)&&a.keyStatus.shiftKey,r?e=>e===r:e=>"navigation"===e)}(t.getMenuActions(s,o??i,r),n)}return e.getActions?oM.join(e.getActions(),n):n}}}}(AO||(AO={})),function(e){e[e.API=0]="API",e[e.USER=1]="USER"}(RO||(RO={}));var PO=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},OO=function(e,t){return function(i,n){t(i,n,e)}};let FO=class{constructor(e){this._commandService=e}async open(e,t){if(!(0,uL.v$)(e,uL.ny.command))return!1;if(!t?.allowCommands)return!0;if("string"===typeof e&&(e=Dx.r.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path))return!0;let i=[];try{i=eI(decodeURIComponent(e.query))}catch{try{i=eI(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};FO=PO([OO(0,pM)],FO);let BO=class{constructor(e){this._editorService=e}async open(e,t){"string"===typeof e&&(e=Dx.r.parse(e));const{selection:i,uri:n}=function(e){let t;const i=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return i&&(t={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1,endLineNumber:i[4]?parseInt(i[4]):void 0,endColumn:i[4]?i[5]?parseInt(i[5]):1:void 0},e=e.with({fragment:""})),{selection:t,uri:e}}(e);return(e=n).scheme===uL.ny.file&&(e=(0,zN.Fd)(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t?.fromUserGesture?RO.USER:RO.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};BO=PO([OO(0,tM)],BO);let zO=class{constructor(e,t){this._openers=new dM.w,this._validators=new dM.w,this._resolvers=new dM.w,this._resolvedUriTargets=new qD.fT((e=>e.with({path:null,fragment:null,query:null}).toString())),this._externalOpeners=new dM.w,this._defaultExternalOpener={openExternal:async e=>((0,uL.fV)(e,uL.ny.http,uL.ny.https)?ME(e):Ex.location.href=e,!0)},this._openers.push({open:async(e,t)=>!(!t?.openExternal&&!(0,uL.fV)(e,uL.ny.mailto,uL.ny.http,uL.ny.https,uL.ny.vsls))&&(await this._doOpenExternal(e,t),!0)}),this._openers.push(new FO(t)),this._openers.push(new BO(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i="string"===typeof e?Dx.r.parse(e):e,n=this._resolvedUriTargets.get(i)??e;for(const s of this._validators)if(!await s.shouldOpen(n,t))return!1;for(const s of this._openers){if(await s.open(e,t))return!0}return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i="string"===typeof e?Dx.r.parse(e):e;let n,s;try{n=(await this.resolveExternalUri(i,t)).resolved}catch{n=i}if(s="string"===typeof e&&i.toString()===n.toString()?e:encodeURI(n.toString(!0)),t?.allowContributedOpeners){const e="string"===typeof t?.allowContributedOpeners?t?.allowContributedOpeners:void 0;for(const t of this._externalOpeners){if(await t.openExternal(s,{sourceUri:i,preferredOpenerId:e},_A.XO.None))return!0}}return this._defaultExternalOpener.openExternal(s,{sourceUri:i},_A.XO.None)}dispose(){this._validators.clear()}};zO=PO([OO(0,tM),OO(1,pM)],zO);var VO,WO=i(4225),HO=i(4286),UO=i(3473),jO=i(3538);!function(e){e[e.PRESERVE=0]="PRESERVE",e[e.LAST=1]="LAST"}(VO||(VO={}));const GO="workbench.contributions.quickaccess";_M.O.add(GO,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort(((e,t)=>t.prefix.length-e.prefix.length)),(0,Mx.s)((()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)}))}getQuickAccessProviders(){return(0,OS.Yc)([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find((t=>e.startsWith(t.prefix)))||void 0||this.defaultProvider}});const KO={ctrlCmd:!1,alt:!1};var $O,qO,QO,XO;!function(e){e[e.Blur=1]="Blur",e[e.Gesture=2]="Gesture",e[e.Other=3]="Other"}($O||($O={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.LAST=3]="LAST"}(qO||(qO={})),function(e){e[e.First=1]="First",e[e.Second=2]="Second",e[e.Last=3]="Last",e[e.Next=4]="Next",e[e.Previous=5]="Previous",e[e.NextPage=6]="NextPage",e[e.PreviousPage=7]="PreviousPage",e[e.NextSeparator=8]="NextSeparator",e[e.PreviousSeparator=9]="PreviousSeparator"}(QO||(QO={})),function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"}(XO||(XO={}));new class{constructor(e){this.options=e}};const YO=(0,eM.u1)("quickInputService");var ZO=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},JO=function(e,t){return function(i,n){t(i,n,e)}};let eF=class extends Mx.jG{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=_M.O.as(GO),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){const[n,s]=this.getOrInstantiateProvider(e,i?.enabledProviderPrefixes),r=this.visibleQuickAccess,o=r?.descriptor;if(r&&s&&o===s)return e===s.prefix||i?.preserveValue||(r.picker.value=e),void this.adjustValueSelection(r.picker,s,i);if(s&&!i?.preserveValue){let t;if(r&&o&&o!==s){const e=r.value.substr(o.prefix.length);e&&(t=`${s.prefix}${e}`)}if(!t){const e=n?.defaultFilterValue;e===VO.LAST?t=this.lastAcceptedPickerValues.get(s):"string"===typeof e&&(t=`${s.prefix}${e}`)}"string"===typeof t&&(e=t)}const a=r?.picker?.valueSelection,l=r?.picker?.value,h=new Mx.Cm,c=h.add(this.quickInputService.createQuickPick({useSeparators:!0}));let d;c.value=e,this.adjustValueSelection(c,s,i),c.placeholder=i?.placeholder??s?.placeholder,c.quickNavigate=i?.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!r,("number"===typeof i?.itemActivation||i?.quickNavigateConfiguration)&&(c.itemActivation=i?.itemActivation??qO.SECOND),c.contextKey=s?.contextKey,c.filterValue=e=>e.substring(s?s.prefix.length:0),t&&(d=new sk.Zv,h.add(rk.Jh.once(c.onWillAccept)((e=>{e.veto(),c.hide()})))),h.add(this.registerPickerListeners(c,n,s,e,i));const u=h.add(new _A.Qi);return n&&h.add(n.provide(c,u.token,i?.providerOptions)),rk.Jh.once(c.onDidHide)((()=>{0===c.selectedItems.length&&u.cancel(),h.dispose(),d?.complete(c.selectedItems.slice(0))})),c.show(),a&&l===e&&(c.valueSelection=a),t?d?.p:void 0}adjustValueSelection(e,t,i){let n;n=i?.preserveValue?[e.value.length,e.value.length]:[t?.prefix.length??0,e.value.length],e.valueSelection=n}registerPickerListeners(e,t,i,n,s){const r=new Mx.Cm,o=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return r.add((0,Mx.s)((()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)}))),r.add(e.onDidChangeValue((e=>{const[i]=this.getOrInstantiateProvider(e,s?.enabledProviderPrefixes);i!==t?this.show(e,{enabledProviderPrefixes:s?.enabledProviderPrefixes,preserveValue:!0,providerOptions:s?.providerOptions}):o.value=e}))),i&&r.add(e.onDidAccept((()=>{this.lastAcceptedPickerValues.set(i,e.value)}))),r}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!t?.includes(i.prefix))return[void 0,void 0];let n=this.mapProviderToDescriptor.get(i);return n||(n=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,n)),[n,i]}};eF=ZO([JO(0,YO),JO(1,eM._Y)],eF);class tF extends uD{constructor(e){super(),this._onChange=this._register(new rk.vl),this.onChange=this._onChange.event,this._onKeyDown=this._register(new rk.vl),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...cM.L.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(zR().setupManagedHover(e.hoverDelegate??OR("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())})),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,(e=>{if(10===e.keyCode||3===e.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),void e.stopPropagation();this._onKeyDown.fire(e)}))}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var iF=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};class nF{constructor(e){this.nodes=e}toString(){return this.nodes.map((e=>"string"===typeof e?e:e.label)).join("")}}iF([lD],nF.prototype,"toString",null);const sF=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;const rF={},oF=new jN("quick-input-button-icon-");function aF(e,t,i){let n=e.iconClass||function(e){if(!e)return;let t;const i=e.dark.toString();return rF[i]?t=rF[i]:(t=oF.nextId(),lE(`.${t}, .hc-light .${t}`,`background-image: ${TE(e.light||e.dark)}`),lE(`.vs-dark .${t}, .hc-black .${t}`,`background-image: ${TE(e.dark)}`),rF[i]=t),t}(e.iconPath);return e.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible"),{id:t,label:"",tooltip:e.tooltip||"",class:n,enabled:!0,run:i}}function lF(e,t,i){yE(t);const n=function(e){const t=[];let i,n=0;for(;i=sF.exec(e);){i.index-n>0&&t.push(e.substring(n,i.index));const[,s,r,,o]=i;o?t.push({label:s,href:r,title:o}):t.push({label:s,href:r}),n=i.index+i[0].length}return n<e.length&&t.push(e.substring(n)),new nF(t)}(e);let s=0;for(const r of n.nodes)if("string"===typeof r)t.append(...KD(r));else{let e=r.title;!e&&r.href.startsWith("command:")?e=(0,WS.kg)("executeCommand","Click to execute command '{0}'",r.href.substring(8)):e||(e=r.href);const n=xE("a",{href:r.href,title:e,tabIndex:s++},r.label);n.style.textDecoration="underline";const o=e=>{pE(e)&&fE(e,!0),i.callback(r.href)},a=i.disposables.add(new BD(n,gE.CLICK)).event,l=i.disposables.add(new BD(n,gE.KEY_DOWN)).event,h=rk.Jh.chain(l,(e=>e.filter((e=>{const t=new Zx(e);return t.equals(10)||t.equals(3)}))));i.disposables.add(dD.addTarget(n));const c=i.disposables.add(new BD(n,hD.Tap)).event;rk.Jh.any(a,c,h)(o,null,i.disposables),t.appendChild(n)}}var hF=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},cF=function(e,t){return function(i,n){t(i,n,e)}};const dF="inQuickInput",uF=new mM.N1(dF,!1,(0,WS.kg)("inQuickInput","Whether keyboard focus is inside the quick input control")),gF=mM.M$.has(dF),pF="quickInputType",fF=new mM.N1(pF,void 0,(0,WS.kg)("quickInputType","The type of the currently visible quick input")),mF="cursorAtEndOfQuickInputBox",_F=new mM.N1(mF,!1,(0,WS.kg)("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),vF=mM.M$.has(mF),bF={iconClass:cM.L.asClassName(vD.W.quickInputBack),tooltip:(0,WS.kg)("quickInput.back","Back"),handle:-1};class yF extends Mx.jG{static#e=(()=>this.noPromptMessage=(0,WS.kg)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel"))();constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=yF.noPromptMessage,this._severity=IT.A.Ignore,this.onDidTriggerButtonEmitter=this._register(new rk.vl),this.onDidHideEmitter=this._register(new rk.vl),this.onWillHideEmitter=this._register(new rk.vl),this.onDisposeEmitter=this._register(new rk.vl),this.visibleDisposables=this._register(new Mx.Cm),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!BS.un;this._ignoreFocusOut=e&&!BS.un,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter((e=>e===bF)),this._rightButtons=e.filter((e=>e!==bF&&e.location!==XO.Inline)),this._inlineButtons=e.filter((e=>e.location===XO.Inline)),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$O.Other;this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$O.Other;this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:e||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText="\xa0");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?yE(this.ui.widget,this._widget):yE(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new sk.pc,this.busyDelay.setIfNotSet((()=>{this.visible&&this.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const e=this._leftButtons.map(((e,t)=>aF(e,`id-${t}`,(async()=>this.onDidTriggerButtonEmitter.fire(e)))));this.ui.leftActionBar.push(e,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const t=this._rightButtons.map(((e,t)=>aF(e,`id-${t}`,(async()=>this.onDidTriggerButtonEmitter.fire(e)))));this.ui.rightActionBar.push(t,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const i=this._inlineButtons.map(((e,t)=>aF(e,`id-${t}`,(async()=>this.onDidTriggerButtonEmitter.fire(e)))));this.ui.inlineActionBar.push(i,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const e=this.toggles?.filter((e=>e instanceof tF))??[];this.ui.inputBox.toggles=e}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,yE(this.ui.message),lF(i,this.ui.message,{callback:e=>{this.ui.linkOpenerDelegate(e)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,WS.kg)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==IT.A.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}class wF extends yF{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new rk.vl),this.onWillAcceptEmitter=this._register(new rk.vl),this.onDidAcceptEmitter=this._register(new rk.vl),this.onDidCustomEmitter=this._register(new rk.vl),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=qO.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new rk.vl),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new rk.vl),this.onDidTriggerItemButtonEmitter=this._register(new rk.vl),this.onDidTriggerSeparatorButtonEmitter=this._register(new rk.vl),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new rk.at,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}static#e=(()=>this.DEFAULT_ARIA_LABEL=(0,WS.kg)("quickInputBox.ariaLabel","Type to narrow down results."))();get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){if(this._value!==e){if(this._value=e,t||this.update(),this.visible){this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst()}this.onDidChangeValueEmitter.fire(this._value)}}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?KO:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(QO.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{this.doSetValue(e,!0)}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((()=>{this.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,((e,t)=>t))((e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,OS.aI)(e,this._activeItems,((e,t)=>e===t))||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((e=>{let{items:t,event:i}=e;this.canSelectMany?t.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&(0,OS.aI)(t,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=t,this.onDidChangeSelectionEmitter.fire(t),t.length&&this.handleAccept(dE(i)&&1===i.button))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((e=>{this.canSelectMany&&this.visible&&(this.selectedItemsToConfirm!==this._selectedItems&&(0,OS.aI)(e,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((e=>this.onDidTriggerItemButtonEmitter.fire(e)))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered((e=>this.onDidTriggerSeparatorButtonEmitter.fire(e)))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return EL(this.ui.container,gE.KEY_UP,(e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Zx(e),i=t.keyCode;this._quickNavigate.keybindings.some((e=>{const n=e.getChords();return!(n.length>1)&&(n[0].shiftKey&&4===i?!(t.ctrlKey||t.altKey||t.metaKey):!(!n[0].altKey||6!==i)||(!(!n[0].ctrlKey||5!==i)||!(!n[0].metaKey||57!==i)))}))&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)}))}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;!n&&i.inputBox&&(n=this.placeholder||wF.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=n??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents((()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case qO.NONE:this._itemActivation=qO.FIRST;break;case qO.SECOND:this.ui.list.focus(QO.Second),this._itemActivation=qO.FIRST;break;case qO.LAST:this.ui.list.focus(QO.Last),this._itemActivation=qO.FIRST;break;default:this.trySelectFirst()}}))),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(QO.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}}class CF extends yF{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new rk.vl),this.onDidAcceptEmitter=this._register(new rk.vl),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>this.onDidAcceptEmitter.fire()))),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}let SF=class extends nD{constructor(e,t){super("element",!1,(e=>this.getOverrideOptions(e)),e,t)}getOverrideOptions(e){return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(hE(e.content)?e.content.textContent??"":"string"===typeof e.content?e.content:e.content.value).includes("\n"),skipFadeInAnimation:!0}}}};SF=hF([cF(0,JT.pG),cF(1,iD)],SF);WR.Q1.white.toString(),WR.Q1.white.toString();class xF extends Mx.jG{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new rk.vl),this._onDidEscape=this._register(new rk.vl),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,n=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=n||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),"string"===typeof t.title&&this.setTitle(t.title),"string"===typeof t.ariaLabel&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(dD.addTarget(this._element)),[gE.CLICK,hD.Tap].forEach((e=>{this._register(EL(this._element,e,(e=>{this.enabled?this._onDidClick.fire(e):fE(e)})))})),this._register(EL(this._element,gE.KEY_DOWN,(e=>{const t=new Zx(e);let i=!1;this.enabled&&(t.equals(3)||t.equals(10))?(this._onDidClick.fire(e),i=!0):t.equals(9)&&(this._onDidEscape.fire(e),this._element.blur(),i=!0),i&&fE(t,!0)}))),this._register(EL(this._element,gE.MOUSE_OVER,(e=>{this._element.classList.contains("disabled")||this.updateBackground(!0)}))),this._register(EL(this._element,gE.MOUSE_OUT,(e=>{this.updateBackground(!1)}))),this.focusTracker=this._register(_E(this._element)),this._register(this.focusTracker.onDidFocus((()=>{this.enabled&&this.updateBackground(!0)}))),this._register(this.focusTracker.onDidBlur((()=>{this.enabled&&this.updateBackground(!1)})))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of KD(e))if("string"===typeof i){if(i=i.trim(),""===i)continue;const e=document.createElement("span");e.textContent=i,t.push(e)}else t.push(i);return t}updateBackground(e){let t;t=this.options.secondary?e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e)return;if(WN(this._label)&&WN(e)&&((t=this._label)===(i=e)||t&&i&&t.value===i.value&&t.isTrusted===i.isTrusted&&t.supportThemeIcons===i.supportThemeIcons&&t.supportHtml===i.supportHtml&&(t.baseUri===i.baseUri||t.baseUri&&i.baseUri&&(0,zN.n4)(Dx.r.from(t.baseUri),Dx.r.from(i.baseUri)))))return;var t,i;this._element.classList.add("monaco-text-button");const n=this.options.supportShortLabel?this._labelElement:this._element;if(WN(e)){const t=sI(e,{inline:!0});t.dispose();const i=t.element.querySelector("p")?.innerHTML;if(i){const e=hL(i,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});n.innerHTML=e}else yE(n)}else this.options.supportIcons?yE(n,...this.getContentElements(e)):n.textContent=e;let s="";"string"===typeof this.options.title?s=this.options.title:this.options.title&&(s=cI(e)),this.setTitle(s),"string"===typeof this.options.ariaLabel?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",s),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...cM.L.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){this._hover||""===e?this._hover&&this._hover.update(e):this._hover=this._register(zR().setupManagedHover(this.options.hoverDelegate??OR("mouse"),this._element,e))}}class kF{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=vE(e,xE(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=(0,Tx.GP)(this.countFormat,this.count),this.element.title=(0,Tx.GP)(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const LF="done",EF="active",MF="infinite",TF="infinite-long-running",DF="discrete";class NF extends Mx.jG{static#e=(()=>this.LONG_RUNNING_INFINITE_THRESHOLD=1e4)();constructor(e,t){super(),this.progressSignal=this._register(new Mx.HE),this.workedVal=0,this.showDelayedScheduler=this._register(new sk.uC((()=>kE(this.element)),0)),this.longRunningScheduler=this._register(new sk.uC((()=>this.infiniteLongRunning()),NF.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(EF,MF,TF,DF),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(LF),this.element.classList.contains(MF)?(this.bit.style.opacity="0",e?setTimeout((()=>this.off()),200):this.off()):(this.bit.style.width="inherit",e?setTimeout((()=>this.off()),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(DF,LF,TF),this.element.classList.add(EF,MF),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(TF)}getContainer(){return this.element}}const IF=WS.kg("caseDescription","Match Case"),AF=WS.kg("wordsDescription","Match Whole Word"),RF=WS.kg("regexDescription","Use Regular Expression");class PF extends tF{constructor(e){super({icon:vD.W.caseSensitive,title:IF+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??OR("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class OF extends tF{constructor(e){super({icon:vD.W.wholeWord,title:AF+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??OR("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class FF extends tF{constructor(e){super({icon:vD.W.regex,title:RF+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??OR("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class BF{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t-1;this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class zF{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return 0!==this._currentPosition()?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return null===this._navigator.current()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new BF(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach((t=>e.push(t))),e}}const VF=xE;class WF extends uD{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new rk.vl),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new rk.vl),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=vE(e,VF(".monaco-inputbox.idle"));const n=this.options.flexibleHeight?"textarea":"input",s=vE(this.element,VF(".ibwrapper"));if(this.input=vE(s,VF(n+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,(()=>this.element.classList.add("synthetic-focus"))),this.onblur(this.input,(()=>this.element.classList.remove("synthetic-focus"))),this.options.flexibleHeight){this.maxHeight="number"===typeof this.options.flexibleMaxHeight?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=vE(s,VF("div.mirror")),this.mirror.innerText="\xa0",this.scrollableElement=new TD(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),vE(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll((e=>this.input.scrollTop=e.scrollTop)));const t=this._register(new BD(e.ownerDocument,"selectionchange")),i=rk.Jh.filter(t.event,(()=>{const t=e.ownerDocument.getSelection();return t?.anchorNode===s}));this._register(i(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,(()=>this.onValueChange())),this.onblur(this.input,(()=>this.onBlur())),this.onfocus(this.input,(()=>this.onFocus())),this._register(this.ignoreGesture(this.input)),setTimeout((()=>this.updateMirror()),0),this.options.actions&&(this.actionbar=this._register(new vO(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(zR().setupManagedHover(OR("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return"number"===typeof this.cachedHeight?this.cachedHeight:jL(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return YL(this.input)}select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(null===e)return null;return{start:e,end:this.input.selectionEnd??e}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if("number"!==typeof this.cachedContentHeight||"number"!==typeof this.cachedHeight||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if("open"===this.state&&(0,FS.aI)(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${NE(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=WL(this.element)+"px";let i;this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=vE(i,VF(".monaco-inputbox-container")),t();const n={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?zD(this.message.content,n):function(e){const t=VD(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return t.textContent=e,t}(this.message.content,n);s.classList.add(this.classForType(this.message.type));const r=this.stylesForType(this.message.type);return s.style.backgroundColor=r.background??"",s.style.color=r.foreground??"",s.style.border=r.border?`1px solid ${r.border}`:"",vE(e,s),null},onHide:()=>{this.state="closed"},layout:t}),i=3===this.message.type?WS.kg("alertErrorMessage","Error: {0}",this.message.content):2===this.message.type?WS.kg("alertWarningMessage","Warning: {0}",this.message.content):WS.kg("alertInfoMessage","Info: {0}",this.message.content),JI(i),this.state="open"}_hideMessage(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,t=10===e.charCodeAt(e.length-1)?" ":"";(e+t).replace(/\u000c/g,"")?this.mirror.textContent=e+t:this.mirror.innerText="\xa0",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",n=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${NE(n,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=jL(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,s=t.value;null!==i&&null!==n&&(this.value=s.substr(0,i)+e+s.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class HF extends WF{constructor(e,t,i){const n=WS.kg({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is \u21c5 to represent the up and down arrow keys.']}," or {0} for history","\u21c5"),s=WS.kg({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is \u21c5 to represent the up and down arrow keys.']}," ({0} for history)","\u21c5");super(e,t,i),this._onDidFocus=this._register(new rk.vl),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new rk.vl),this.onDidBlur=this._onDidBlur.event,this.history=new zF(i.history,100);const r=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(n)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const e=this.placeholder.endsWith(")")?n:s,t=this.placeholder+e;i.showPlaceholderOnFocus&&!YL(this.input)?this.placeholder=t:this.setPlaceHolder(t)}};this.observer=new MutationObserver(((e,t)=>{e.forEach((e=>{e.target.textContent||r()}))})),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,(()=>r())),this.onblur(this.input,(()=>{const e=e=>{if(this.placeholder.endsWith(e)){const t=this.placeholder.slice(0,this.placeholder.length-e.length);return i.showPlaceholderOnFocus?this.placeholder=t:this.setPlaceHolder(t),!0}return!1};e(s)||e(n)}))}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",eA(this.value?this.value:WS.kg("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,eA(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const UF=WS.kg("defaultLabel","input");class jF extends uD{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Mx.HE),this.additionalToggles=[],this._onDidOptionChange=this._register(new rk.vl),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new rk.vl),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new rk.vl),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new rk.vl),this._onKeyUp=this._register(new rk.vl),this._onCaseSensitiveKeyDown=this._register(new rk.vl),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new rk.vl),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||UF,this.showCommonFindToggles=!!i.showCommonFindToggles;const n=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",r=i.appendRegexLabel||"",o=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,h=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new HF(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:o,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:h,inputBoxStyles:i.inputBoxStyles}));const c=this._register(FR());if(this.showCommonFindToggles){this.regex=this._register(new FF({appendTitle:r,isChecked:!1,hoverDelegate:c,...i.toggleStyles})),this._register(this.regex.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.regex.onKeyDown((e=>{this._onRegexKeyDown.fire(e)}))),this.wholeWords=this._register(new OF({appendTitle:s,isChecked:!1,hoverDelegate:c,...i.toggleStyles})),this._register(this.wholeWords.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this.caseSensitive=this._register(new PF({appendTitle:n,isChecked:!1,hoverDelegate:c,...i.toggleStyles})),this._register(this.caseSensitive.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.caseSensitive.onKeyDown((e=>{this._onCaseSensitiveKeyDown.fire(e)})));const e=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,(t=>{if(t.equals(15)||t.equals(17)||t.equals(9)){const i=e.indexOf(this.domNode.ownerDocument.activeElement);if(i>=0){let n=-1;t.equals(17)?n=(i+1)%e.length:t.equals(15)&&(n=0===i?e.length-1:i-1),t.equals(9)?(e[i].blur(),this.inputBox.focus()):n>=0&&e[n].focus(),fE(t,!0)}}}))}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(EL(this.inputBox.inputElement,"compositionstart",(e=>{this.imeSessionInProgress=!0}))),this._register(EL(this.inputBox.inputElement,"compositionend",(e=>{this.imeSessionInProgress=!1,this._onInput.fire()}))),this.onkeydown(this.inputBox.inputElement,(e=>this._onKeyDown.fire(e))),this.onkeyup(this.inputBox.inputElement,(e=>this._onKeyUp.fire(e))),this.oninput(this.inputBox.inputElement,(e=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(e=>this._onMouseDown.fire(e)))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Mx.Cm;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()}))),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inputBox.paddingRight=e?0:(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce(((e,t)=>e+t.width()),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const GF=xE;class KF extends Mx.jG{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=e=>TL(this.findInput.inputBox.inputElement,gE.KEY_DOWN,e),this.onDidChange=e=>this.findInput.onDidChange(e),this.container=vE(this.parent,GF(".quick-input-box")),this.findInput=this._register(new jF(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const n=this.findInput.inputBox.inputElement;n.role="combobox",n.ariaHasPopup="menu",n.ariaAutoComplete="list",n.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return"password"===this.findInput.inputBox.inputElement.type}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===IT.A.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===IT.A.Info?1:e===IT.A.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===IT.A.Info?1:e===IT.A.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class $F{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Mx.jG.None}}renderElement(e,t,i,n){if(i.disposable?.dispose(),!i.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,i.data,n);const r=new _A.Qi,o=s.resolve(e,r.token);i.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,i.data),o.then((t=>this.renderer.renderElement(t,e,i.data,n)))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class qF{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}class QF{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const r=()=>this.model,o=n.map((e=>new $F(e,r)));this.list=new IP(e,t,i,o,function(e,t){return{...t,accessibilityProvider:t.accessibilityProvider&&new qF(e,t.accessibilityProvider)}}(r,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return rk.Jh.map(this.list.onMouseDblClick,(e=>{let{element:t,index:i,browserEvent:n}=e;return{element:void 0===t?void 0:this._model.get(t),index:i,browserEvent:n}}))}get onPointer(){return rk.Jh.map(this.list.onPointer,(e=>{let{element:t,index:i,browserEvent:n}=e;return{element:void 0===t?void 0:this._model.get(t),index:i,browserEvent:n}}))}get onDidChangeSelection(){return rk.Jh.map(this.list.onDidChangeSelection,(e=>{let{elements:t,indexes:i,browserEvent:n}=e;return{elements:t.map((e=>this._model.get(e))),indexes:i,browserEvent:n}}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,(0,OS.y1)(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((e=>this.model.get(e)))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var XF=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};var YF;!function(e){e.North="north",e.South="south",e.East="east",e.West="west"}(YF||(YF={}));const ZF=new rk.vl;const JF=new rk.vl;class eB{constructor(e){this.el=e,this.disposables=new Mx.Cm}get onPointerMove(){return this.disposables.add(new BD(fL(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new BD(fL(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}XF([lD],eB.prototype,"onPointerMove",null),XF([lD],eB.prototype,"onPointerUp",null);class tB{get onPointerMove(){return this.disposables.add(new BD(this.el,hD.Change)).event}get onPointerUp(){return this.disposables.add(new BD(this.el,hD.End)).event}constructor(e){this.el=e,this.disposables=new Mx.Cm}dispose(){this.disposables.dispose()}}XF([lD],tB.prototype,"onPointerMove",null),XF([lD],tB.prototype,"onPointerUp",null);class iB{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}XF([lD],iB.prototype,"onPointerMove",null),XF([lD],iB.prototype,"onPointerUp",null);const nB="pointer-events-disabled";class sB extends Mx.jG{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",0===e),this.el.classList.toggle("minimum",1===e),this.el.classList.toggle("maximum",2===e),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=t=>{this.orthogonalStartDragHandleDisposables.clear(),0!==t&&(this._orthogonalStartDragHandle=vE(this.el,xE(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add((0,Mx.s)((()=>this._orthogonalStartDragHandle.remove()))),this.orthogonalStartDragHandleDisposables.add(new BD(this._orthogonalStartDragHandle,"mouseenter")).event((()=>sB.onMouseEnter(e)),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new BD(this._orthogonalStartDragHandle,"mouseleave")).event((()=>sB.onMouseLeave(e)),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=t=>{this.orthogonalEndDragHandleDisposables.clear(),0!==t&&(this._orthogonalEndDragHandle=vE(this.el,xE(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add((0,Mx.s)((()=>this._orthogonalEndDragHandle.remove()))),this.orthogonalEndDragHandleDisposables.add(new BD(this._orthogonalEndDragHandle,"mouseenter")).event((()=>sB.onMouseEnter(e)),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new BD(this._orthogonalEndDragHandle,"mouseleave")).event((()=>sB.onMouseLeave(e)),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=300,this.hoverDelayer=this._register(new sk.ve(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new rk.vl),this._onDidStart=this._register(new rk.vl),this._onDidChange=this._register(new rk.vl),this._onDidReset=this._register(new rk.vl),this._onDidEnd=this._register(new rk.vl),this.orthogonalStartSashDisposables=this._register(new Mx.Cm),this.orthogonalStartDragHandleDisposables=this._register(new Mx.Cm),this.orthogonalEndSashDisposables=this._register(new Mx.Cm),this.orthogonalEndDragHandleDisposables=this._register(new Mx.Cm),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=vE(e,xE(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),BS.zx&&this.el.classList.add("mac");const n=this._register(new BD(this.el,"mousedown")).event;this._register(n((t=>this.onPointerStart(t,new eB(e))),this));const s=this._register(new BD(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const r=this._register(new BD(this.el,"mouseenter")).event;this._register(r((()=>sB.onMouseEnter(this))));const o=this._register(new BD(this.el,"mouseleave")).event;this._register(o((()=>sB.onMouseLeave(this)))),this._register(dD.addTarget(this.el));const a=this._register(new BD(this.el,hD.Start)).event;this._register(a((e=>this.onPointerStart(e,new tB(this.el))),this));const l=this._register(new BD(this.el,hD.Tap)).event;let h;this._register(l((e=>{if(h)return clearTimeout(h),h=void 0,void this.onPointerDoublePress(e);clearTimeout(h),h=setTimeout((()=>h=void 0),250)}),this)),"number"===typeof i.size?(this.size=i.size,0===i.orientation?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=4,this._register(ZF.event((e=>{this.size=e,this.layout()})))),this._register(JF.event((e=>this.hoverDelay=e))),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,1===this.orientation?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",false),this.layout()}onPointerStart(e,t){fE(e);let i=!1;if(!e.__orthogonalSashEvent){const n=this.getOrthogonalSash(e);n&&(i=!0,e.__orthogonalSashEvent=!0,n.onPointerStart(e,new iB(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new iB(t))),!this.state)return;const n=this.el.ownerDocument.getElementsByTagName("iframe");for(const d of n)d.classList.add(nB);const s=e.pageX,r=e.pageY,o=e.altKey,a={startX:s,currentX:s,startY:r,currentY:r,altKey:o};this.el.classList.add("active"),this._onDidStart.fire(a);const l=iE(this.el),h=()=>{let e="";e=i?"all-scroll":1===this.orientation?1===this.state?"s-resize":2===this.state?"n-resize":BS.zx?"row-resize":"ns-resize":1===this.state?"e-resize":2===this.state?"w-resize":BS.zx?"col-resize":"ew-resize",l.textContent=`* { cursor: ${e} !important; }`},c=new Mx.Cm;h(),i||this.onDidEnablementChange.event(h,null,c);t.onPointerMove((e=>{fE(e,!1);const t={startX:s,currentX:e.pageX,startY:r,currentY:e.pageY,altKey:o};this._onDidChange.fire(t)}),null,c),t.onPointerUp((e=>{fE(e,!1),l.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),c.dispose();for(const t of n)t.classList.remove(nB)}),null,c),c.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger((()=>e.el.classList.add("hover")),e.hoverDelay).then(void 0,(()=>{})),!t&&e.linkedSash&&sB.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&sB.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){sB.onMouseLeave(this)}layout(){if(0===this.orientation){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(t&&hE(t))return t.classList.contains("orthogonal-drag-handle")?t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}dispose(){super.dispose(),this.el.remove()}}const rB={separatorBorder:WR.Q1.transparent};class oB{set size(e){this._size=e}get size(){return this._size}get visible(){return"undefined"===typeof this._cachedVisibleSize}setVisible(e,t){if(e!==this.visible){e?(this.size=(0,HR.qE)(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"===typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(O2){console.error("Splitview: Failed to set visible view"),console.error(O2)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,"number"===typeof i?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(O2){console.error("Splitview: Failed to layout view"),console.error(O2)}}dispose(){this.disposable.dispose()}}class aB extends oB{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class lB extends oB{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var hB,cB,dB,uB;!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(hB||(hB={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}},e.Auto=function(e){return{type:"auto",index:e}},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(cB||(cB={}));class gB extends Mx.jG{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=hB.Idle,this._onDidSashChange=this._register(new rk.vl),this._onDidSashReset=this._register(new rk.vl),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(0===this.orientation?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=vE(this.el,xE(".sash-container")),this.viewContainer=xE(".split-view-container"),this.scrollable=this._register(new CD({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:e=>IL(fL(this.el),e)})),this.scrollableElement=this._register(new DD(this.viewContainer,{vertical:0===this.orientation?t.scrollbarVisibility??1:2,horizontal:1===this.orientation?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new BD(this.viewContainer,"scroll")).event;this._register(i((e=>{const t=this.scrollableElement.getScrollPosition(),i=Math.abs(this.viewContainer.scrollLeft-t.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,n=Math.abs(this.viewContainer.scrollTop-t.scrollTop)<=1?void 0:this.viewContainer.scrollTop;void 0===i&&void 0===n||this.scrollableElement.setScrollPosition({scrollLeft:i,scrollTop:n})}))),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll((e=>{e.scrollTopChanged&&(this.viewContainer.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this.viewContainer.scrollLeft=e.scrollLeft)}))),vE(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||rB),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach(((e,t)=>{const i=gM.b0(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},n=e.view;this.doAddView(n,i,t,!0)})),this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,n=arguments.length>3?arguments[3]:void 0;this.doAddView(e,t,i,n)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let t=0;for(let i=0;i<this.viewItems.length;i++){const n=this.viewItems[i],s=this.proportions[i];"number"===typeof s?t+=s:e-=n.size}for(let i=0;i<this.viewItems.length;i++){const n=this.viewItems[i],s=this.proportions[i];"number"===typeof s&&t>0&&(n.size=(0,HR.qE)(Math.round(s*e/t),n.minimumSize,n.maximumSize))}}else{const t=(0,OS.y1)(this.viewItems.length),n=t.filter((e=>1===this.viewItems[e].priority)),s=t.filter((e=>2===this.viewItems[e].priority));this.resize(this.viewItems.length-1,e-i,void 0,n,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map((e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0)))}onSashStart(e){let{sash:t,start:i,alt:n}=e;for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex((e=>e.sash===t)),r=(0,Mx.qE)(EL(this.el.ownerDocument.body,"keydown",(e=>o(this.sashDragState.current,e.altKey))),EL(this.el.ownerDocument.body,"keyup",(()=>o(this.sashDragState.current,!1)))),o=(e,t)=>{const i=this.viewItems.map((e=>e.size));let n,o,a=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(t=!t),t){if(s===this.sashItems.length-1){const e=this.viewItems[s];a=(e.minimumSize-e.size)/2,l=(e.maximumSize-e.size)/2}else{const e=this.viewItems[s+1];a=(e.size-e.maximumSize)/2,l=(e.size-e.minimumSize)/2}}if(!t){const e=(0,OS.y1)(s,-1),t=(0,OS.y1)(s+1,this.viewItems.length),r=e.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-i[t])),0),a=e.reduce(((e,t)=>e+(this.viewItems[t].viewMaximumSize-i[t])),0),l=0===t.length?Number.POSITIVE_INFINITY:t.reduce(((e,t)=>e+(i[t]-this.viewItems[t].minimumSize)),0),h=0===t.length?Number.NEGATIVE_INFINITY:t.reduce(((e,t)=>e+(i[t]-this.viewItems[t].viewMaximumSize)),0),c=Math.max(r,h),d=Math.min(l,a),u=this.findFirstSnapIndex(e),g=this.findFirstSnapIndex(t);if("number"===typeof u){const e=this.viewItems[u],t=Math.floor(e.viewMinimumSize/2);n={index:u,limitDelta:e.visible?c-t:c+t,size:e.size}}if("number"===typeof g){const e=this.viewItems[g],t=Math.floor(e.viewMinimumSize/2);o={index:g,limitDelta:e.visible?d+t:d-t,size:e.size}}}this.sashDragState={start:e,current:e,index:s,sizes:i,minDelta:a,maxDelta:l,alt:t,snapBefore:n,snapAfter:o,disposable:r}};o(i,n)}onSashChange(e){let{current:t}=e;const{index:i,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:h}=this.sashDragState;this.sashDragState.current=t;const c=t-n,d=this.resize(i,c,s,void 0,void 0,o,a,l,h);if(r){const e=i===this.sashItems.length-1,t=this.viewItems.map((e=>e.size)),n=e?i:i+1,s=this.viewItems[n],r=s.size-s.maximumSize,o=s.size-s.minimumSize,a=e?i-1:i+1;this.resize(a,-d,t,void 0,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t="number"===typeof t?t:e.size,t=(0,HR.qE)(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==hB.Idle)throw new Error("Cant modify splitview");this.state=hB.Busy;try{const i=(0,OS.y1)(this.viewItems.length).filter((t=>t!==e)),n=[...i.filter((e=>1===this.viewItems[e].priority)),e],s=i.filter((e=>2===this.viewItems[e].priority)),r=this.viewItems[e];t=Math.round(t),t=(0,HR.qE)(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(n,s)}finally{this.state=hB.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const o of this.viewItems)o.maximumSize-o.minimumSize>0&&(e.push(o),t+=o.size);const i=Math.floor(t/e.length);for(const o of e)o.size=(0,HR.qE)(i,o.minimumSize,o.maximumSize);const n=(0,OS.y1)(this.viewItems.length),s=n.filter((e=>1===this.viewItems[e].priority)),r=n.filter((e=>2===this.viewItems[e].priority));this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,n=arguments.length>3?arguments[3]:void 0;if(this.state!==hB.Idle)throw new Error("Cant modify splitview");this.state=hB.Busy;try{const s=xE(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i));const r=e.onDidChange((e=>this.onViewChange(h,e))),o=(0,Mx.s)((()=>s.remove())),a=(0,Mx.qE)(r,o);let l;"number"===typeof t?l=t:("auto"===t.type&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index}),l="split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize);const h=0===this.orientation?new aB(s,e,l,a):new lB(s,e,l,a);if(this.viewItems.splice(i,0,h),this.viewItems.length>1){const e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},t=0===this.orientation?new sB(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},{...e,orientation:1}):new sB(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},{...e,orientation:0}),n=0===this.orientation?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),s=rk.Jh.map(t.onDidStart,n)(this.onSashStart,this),r=rk.Jh.map(t.onDidChange,n)(this.onSashChange,this),o=rk.Jh.map(t.onDidEnd,(()=>this.sashItems.findIndex((e=>e.sash===t)))),a=o(this.onSashEnd,this),l=t.onDidReset((()=>{const e=this.sashItems.findIndex((e=>e.sash===t)),i=(0,OS.y1)(e,-1),n=(0,OS.y1)(e+1,this.viewItems.length),s=this.findFirstSnapIndex(i),r=this.findFirstSnapIndex(n);("number"!==typeof s||this.viewItems[s].visible)&&("number"!==typeof r||this.viewItems[r].visible)&&this._onDidSashReset.fire(e)})),h=(0,Mx.qE)(s,r,a,l,t),c={sash:t,disposable:h};this.sashItems.splice(i-1,0,c)}let c;s.appendChild(e.element),"number"!==typeof t&&"split"===t.type&&(c=[t.index]),n||this.relayout([i],c),n||"number"===typeof t||"distribute"!==t.type||this.distributeViewSizes()}finally{this.state=hB.Idle}}relayout(e,t){const i=this.viewItems.reduce(((e,t)=>e+t.size),0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.map((e=>e.size)),n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.NEGATIVE_INFINITY,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Number.POSITIVE_INFINITY,a=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;if(e<0||e>=this.viewItems.length)return 0;const h=(0,OS.y1)(e,-1),c=(0,OS.y1)(e+1,this.viewItems.length);if(s)for(const C of s)(0,OS._A)(h,C),(0,OS._A)(c,C);if(n)for(const C of n)(0,OS.r7)(h,C),(0,OS.r7)(c,C);const d=h.map((e=>this.viewItems[e])),u=h.map((e=>i[e])),g=c.map((e=>this.viewItems[e])),p=c.map((e=>i[e])),f=h.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-i[t])),0),m=h.reduce(((e,t)=>e+(this.viewItems[t].maximumSize-i[t])),0),_=0===c.length?Number.POSITIVE_INFINITY:c.reduce(((e,t)=>e+(i[t]-this.viewItems[t].minimumSize)),0),v=0===c.length?Number.NEGATIVE_INFINITY:c.reduce(((e,t)=>e+(i[t]-this.viewItems[t].maximumSize)),0),b=Math.max(f,v,r),y=Math.min(_,m,o);let w=!1;if(a){const e=this.viewItems[a.index],i=t>=a.limitDelta;w=i!==e.visible,e.setVisible(i,a.size)}if(!w&&l){const e=this.viewItems[l.index],i=t<l.limitDelta;w=i!==e.visible,e.setVisible(i,l.size)}if(w)return this.resize(e,t,i,n,s,r,o);for(let C=0,S=t=(0,HR.qE)(t,b,y);C<d.length;C++){const e=d[C],t=(0,HR.qE)(u[C]+S,e.minimumSize,e.maximumSize);S-=t-u[C],e.size=t}for(let C=0,S=t;C<g.length;C++){const e=g[C],t=(0,HR.qE)(p[C]-S,e.minimumSize,e.maximumSize);S+=t-p[C],e.size=t}return t}distributeEmptySpace(e){const t=this.viewItems.reduce(((e,t)=>e+t.size),0);let i=this.size-t;const n=(0,OS.y1)(this.viewItems.length-1,-1),s=n.filter((e=>1===this.viewItems[e].priority)),r=n.filter((e=>2===this.viewItems[e].priority));for(const o of r)(0,OS._A)(n,o);for(const o of s)(0,OS.r7)(n,o);"number"===typeof e&&(0,OS.r7)(n,e);for(let o=0;0!==i&&o<n.length;o++){const e=this.viewItems[n[o]],t=(0,HR.qE)(e.size+i,e.minimumSize,e.maximumSize);i-=t-e.size,e.size=t}}layoutViews(){this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach((e=>e.sash.layout())),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){0===this.orientation?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map((t=>e=t.size-t.minimumSize>0||e));e=!1;const i=this.viewItems.map((t=>e=t.maximumSize-t.size>0||e)),n=[...this.viewItems].reverse();e=!1;const s=n.map((t=>e=t.size-t.minimumSize>0||e)).reverse();e=!1;const r=n.map((t=>e=t.maximumSize-t.size>0||e)).reverse();let o=0;for(let a=0;a<this.sashItems.length;a++){const{sash:e}=this.sashItems[a];o+=this.viewItems[a].size;const n=!(t[a]&&r[a+1]),l=!(i[a]&&s[a+1]);if(n&&l){const i=(0,OS.y1)(a,-1),n=(0,OS.y1)(a+1,this.viewItems.length),r=this.findFirstSnapIndex(i),l=this.findFirstSnapIndex(n),h="number"===typeof r&&!this.viewItems[r].visible,c="number"===typeof l&&!this.viewItems[l].visible;h&&s[a]&&(o>0||this.startSnappingEnabled)?e.state=1:c&&t[a]&&(o<this._contentSize||this.endSnappingEnabled)?e.state=2:e.state=0}else e.state=n&&!l?1:!n&&l?2:3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const e=this.viewItems[t];if(e.visible&&e.snap)return t}for(const t of e){const e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=void 0===e?i.size:Math.min(e,i.size),t=void 0===t?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),(0,Mx.AS)(this.viewItems),this.viewItems=[],this.sashItems.forEach((e=>e.disposable.dispose())),this.sashItems=[],super.dispose()}}class pB{static#e=(()=>this.TemplateId="row")();constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=pB.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map((e=>[e.templateId,e])));this.renderers=[];for(const s of e){const e=n.get(s.templateId);if(!e)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(e)}}renderTemplate(e){const t=vE(e,xE(".monaco-table-tr")),i=[],n=[];for(let r=0;r<this.columns.length;r++){const e=this.renderers[r],s=vE(t,xE(".monaco-table-td",{"data-col-index":r}));s.style.width=`${this.getColumnSize(r)}px`,i.push(s),n.push(e.renderTemplate(s))}const s={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(s),s}renderElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const r=this.columns[s].project(e);this.renderers[s].renderElement(r,t,i.cellTemplateData[s],n)}}disposeElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const r=this.renderers[s];if(r.disposeElement){const o=this.columns[s].project(e);r.disposeElement(o,t,i.cellTemplateData[s],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++){this.renderers[t].disposeTemplate(e.cellTemplateData[t])}kL(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}class fB extends Mx.jG{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??rk.Jh.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new rk.vl,this.onDidLayout=this._onDidLayout.event,this.element=xE(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(zR().setupManagedHover(OR("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}class mB{static#e=(()=>this.InstanceCount=0)();get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,n,s,r){this.virtualDelegate=i,this.columns=n,this.domId="table_id_"+ ++mB.InstanceCount,this.disposables=new Mx.Cm,this.cachedWidth=0,this.cachedHeight=0,this.domNode=vE(t,xE(`.monaco-table.${this.domId}`));const o=n.map(((e,t)=>this.disposables.add(new fB(e,t)))),a={size:o.reduce(((e,t)=>e+t.column.weight),0),views:o.map((e=>({size:e.column.weight,view:e})))};this.splitview=this.disposables.add(new gB(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:a})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const l=new pB(n,s,(e=>this.splitview.getViewSize(e)));var h;this.list=this.disposables.add(new IP(e,this.domNode,(h=i,{getHeight:e=>h.getHeight(e),getTemplateId:()=>pB.TemplateId}),[l],r)),rk.Jh.any(...o.map((e=>e.onDidLayout)))((e=>{let[t,i]=e;return l.layoutColumn(t,i)}),null,this.disposables),this.splitview.onDidSashReset((e=>{const t=n.reduce(((e,t)=>e+t.weight),0),i=n[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,i)}),null,this.disposables),this.styleElement=iE(this.domNode),this.style(kP)}updateOptions(e){this.list.updateOptions(e)}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight+1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`),this.styleElement.textContent=t.join("\n"),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}!function(e){e[e.Expanded=0]="Expanded",e[e.Collapsed=1]="Collapsed",e[e.PreserveOrExpanded=2]="PreserveOrExpanded",e[e.PreserveOrCollapsed=3]="PreserveOrCollapsed"}(dB||(dB={})),function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element",e[e.Filter=3]="Filter"}(uB||(uB={}));class _B extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class vB{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}var bB,yB=i(1546),wB=i(2395);function CB(e){return"object"===typeof e&&"visibility"in e&&"data"in e}function SB(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function xB(e){return"boolean"===typeof e.collapsible}class kB{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new rk.at,this._onDidChangeCollapseState=new rk.vl,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new rk.vl,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new rk.vl,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new sk.ve(yB.h),this.collapseByDefault="undefined"!==typeof n.collapseByDefault&&n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren="undefined"!==typeof n.autoExpandSingleChildren&&n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uM.f.empty(),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(0===e.length)throw new _B(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uM.f.empty(),s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s.diffDepth??0;const{parentNode:o}=this.getParentNodeWithListIndex(t);if(!o.lastDiffIds)return this.spliceSimple(t,i,n,s);const a=[...n],l=t[t.length-1],h=new wB.uP({getElements:()=>o.lastDiffIds},{getElements:()=>[...o.children.slice(0,l),...a,...o.children.slice(l+i)].map((t=>e.getId(t.element).toString()))}).ComputeDiff(!1);if(h.quitEarly)return o.lastDiffIds=void 0,this.spliceSimple(t,i,a,s);const c=t.slice(0,-1),d=(t,i,n)=>{if(r>0)for(let o=0;o<n;o++)t--,i--,this.spliceSmart(e,[...c,t,0],Number.MAX_SAFE_INTEGER,a[i].children,s,r-1)};let u=Math.min(o.children.length,l+i),g=a.length;for(const p of h.changes.sort(((e,t)=>t.originalStart-e.originalStart)))d(u,g,u-(p.originalStart+p.originalLength)),u=p.originalStart,g=p.modifiedStart-l,this.spliceSimple([...c,u],p.originalLength,uM.f.slice(a,g,g+p.modifiedLength),s);d(u,g,u)}spliceSimple(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uM.f.empty(),{onDidCreateNode:n,onDidDeleteNode:s,diffIdentityProvider:r}=arguments.length>3?arguments[3]:void 0;const{parentNode:o,listIndex:a,revealed:l,visible:h}=this.getParentNodeWithListIndex(e),c=[],d=uM.f.map(i,(e=>this.createTreeNode(e,o,o.visible?1:0,l,c,n))),u=e[e.length-1];let g=0;for(let y=u;y>=0&&y<o.children.length;y--){const e=o.children[y];if(e.visible){g=e.visibleChildIndex;break}}const p=[];let f=0,m=0;for(const y of d)p.push(y),m+=y.renderNodeCount,y.visible&&(y.visibleChildIndex=g+f++);const _=(0,OS.V4)(o.children,u,t,p);r?o.lastDiffIds?(0,OS.V4)(o.lastDiffIds,u,t,p.map((e=>r.getId(e.element).toString()))):o.lastDiffIds=o.children.map((e=>r.getId(e.element).toString())):o.lastDiffIds=void 0;let v=0;for(const y of _)y.visible&&v++;if(0!==v)for(let y=u+p.length;y<o.children.length;y++){const e=o.children[y];e.visible&&(e.visibleChildIndex-=v)}if(o.visibleChildrenCount+=f-v,l&&h){const e=_.reduce(((e,t)=>e+(t.visible?t.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(o,m-e),this.list.splice(a,e,c)}if(_.length>0&&s){const e=t=>{s(t),t.children.forEach(e)};_.forEach(e)}this._onDidSplice.fire({insertedNodes:p,deletedNodes:_});let b=o;for(;b;){if(2===b.visibility){this.refilterDelayer.trigger((()=>this.refilter()));break}b=b.parent}}rerender(e){if(0===e.length)throw new _B(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);"undefined"===typeof t&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,n)))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);"undefined"===typeof t&&(t=!n.collapsed);const s={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,s)))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,n,s,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!xB(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let n=-1;for(let e=0;e<i.children.length;e++){if(i.children[e].visible){if(n>-1){n=-1;break}n=e}}n>-1&&this._setCollapseState([...e,n],t)}return r}_setListNodeCollapseState(e,t,i,n){const s=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!s)return s;const r=e.renderNodeCount,o=this.updateNodeAfterCollapseChange(e),a=r-(-1===t?0:1);return this.list.splice(t+1,a,o.slice(1)),s}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(xB(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!xB(t)&&t.recursive)for(const s of e.children)n=this._setNodeCollapseState(s,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents((()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})}))}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,s,r){const o={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"===typeof e.collapsible?e.collapsible:"undefined"!==typeof e.collapsed,collapsed:"undefined"===typeof e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},a=this._filterNode(o,i);o.visibility=a,n&&s.push(o);const l=e.children||uM.f.empty(),h=n&&0!==a&&!o.collapsed;let c=0,d=1;for(const u of l){const e=this.createTreeNode(u,o,a,h,s,r);o.children.push(e),d+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=c++)}return this.allowNonCollapsibleParents||(o.collapsible=o.collapsible||o.children.length>0),o.visibleChildrenCount=c,o.visible=2===a?c>0:1===a,o.visible?o.collapsed||(o.renderNodeCount=d):(o.renderNodeCount=0,n&&s.pop()),r?.(o),o}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i){let n,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e!==this.root){if(n=this._filterNode(e,t),0===n)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const r=i.length;e.renderNodeCount=e===this.root?0:1;let o=!1;if(e.collapsed&&0===n)e.visibleChildrenCount=0;else{let t=0;for(const r of e.children)o=this._updateNodeAfterFilterChange(r,n,i,s&&!e.collapsed)||o,r.visible&&(r.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=2===n?o:1===n,e.visibility=n),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return"boolean"===typeof i?(e.filterData=void 0,i?1:0):CB(i)?(e.filterData=i.data,SB(i.visibility)):(e.filterData=void 0,SB(i))}hasTreeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return!0;const[i,...n]=e;return!(i<0||i>t.children.length)&&this.hasTreeNode(n,t.children[i])}getTreeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new _B(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new _B(this.user,"Invalid tree location");const o=t.children[r];return{node:o,listIndex:i,revealed:n,visible:s&&o.visible}}getParentNodeWithListIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const[r,...o]=e;if(r<0||r>t.children.length)throw new _B(this.user,"Invalid tree location");for(let a=0;a<r;a++)i+=t.children[a].renderNodeCount;return n=n&&!t.collapsed,s=s&&t.visible,0===o.length?{parentNode:t,listIndex:i,revealed:n,visible:s}:this.getParentNodeWithListIndex(o,t.children[r],i+1,n,s)}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:(0,OS.bS)(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}}class LB extends YR{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function EB(e){return e instanceof YR?new LB(e):e}class MB{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Mx.jG.None,this.disposables=new Mx.Cm}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){this.dnd.onDragStart?.(EB(e),t)}onDragOver(e,t,i,n,s){let r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const o=this.dnd.onDragOver(EB(e),t&&t.element,i,n,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),"undefined"===typeof t)return o;if(a&&"boolean"!==typeof o&&o.autoExpand&&(this.autoExpandDisposable=(0,sk.EQ)((()=>{const e=this.modelProvider(),i=e.getNodeLocation(t);e.isCollapsed(i)&&e.setCollapsed(i,!1),this.autoExpandNode=void 0}),500,this.disposables)),"boolean"===typeof o||!o.accept||"undefined"===typeof o.bubble||o.feedback){if(!r){return{accept:"boolean"===typeof o?o:o.accept,effect:"boolean"===typeof o?void 0:o.effect,feedback:[i]}}return o}if(1===o.bubble){const i=this.modelProvider(),r=i.getNodeLocation(t),o=i.getParentNodeLocation(r),a=i.getNode(o),l=o&&i.getListIndex(o);return this.onDragOver(e,a,l,n,s,!1)}const l=this.modelProvider(),h=l.getNodeLocation(t),c=l.getListIndex(h),d=l.getListRenderCount(h);return{...o,feedback:(0,OS.y1)(c,c+d)}}drop(e,t,i,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(EB(e),t&&t.element,i,n,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function TB(e,t){return t&&{...t,identityProvider:t.identityProvider&&{getId:e=>t.identityProvider.getId(e.element)},dnd:t.dnd&&new MB(e,t.dnd),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent:e=>t.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element}),isSelectionRangeChangeEvent:e=>t.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})},accessibilityProvider:t.accessibilityProvider&&{...t.accessibilityProvider,getSetSize(t){const i=e(),n=i.getNodeLocation(t),s=i.getParentNodeLocation(n);return i.getNode(s).visibleChildrenCount},getPosInSet:e=>e.visibleChildIndex+1,isChecked:t.accessibilityProvider&&t.accessibilityProvider.isChecked?e=>t.accessibilityProvider.isChecked(e.element):void 0,getRole:t.accessibilityProvider&&t.accessibilityProvider.getRole?e=>t.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel:e=>t.accessibilityProvider.getAriaLabel(e.element),getWidgetAriaLabel:()=>t.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:t.accessibilityProvider&&t.accessibilityProvider.getWidgetRole?()=>t.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:t.accessibilityProvider&&t.accessibilityProvider.getAriaLevel?e=>t.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&(e=>t.accessibilityProvider.getActiveDescendantId(e.element))},keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:e=>t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}}class DB{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}}!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(bB||(bB={}));class NB{get elements(){return this._elements}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._elements=t,this.disposables=new Mx.Cm,this.onDidChange=rk.Jh.forEach(e,(e=>this._elements=e),this.disposables)}dispose(){this.disposables.dispose()}}class IB{static#e=(()=>this.DefaultIndent=8)();constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=IB.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Mx.jG.None,this.disposables=new Mx.Cm,this.templateId=e.templateId,this.updateOptions(r),rk.Jh.map(i,(e=>e.node))(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof e.indent){const t=(0,HR.qE)(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[e,t]of this.renderedNodes)this.renderTreeElement(e,t)}}if("undefined"!==typeof e.renderIndentGuides){const t=e.renderIndentGuides!==bB.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[e,t]of this.renderedNodes)this._renderIndentGuides(e,t);if(this.indentGuidesDisposable.dispose(),t){const e=new Mx.Cm;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}"undefined"!==typeof e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=vE(e,xE(".monaco-tl-row")),i=vE(t,xE(".monaco-tl-indent")),n=vE(t,xE(".monaco-tl-twistie")),s=vE(t,xE(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:i,twistie:n,indentGuidesDisposable:Mx.jG.None,templateData:r}}renderElement(e,t,i,n){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,i.templateData,n),"number"===typeof n&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=IB.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=i+this.indent-16+"px",e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...cM.L.asClassNameArray(vD.W.treeItemExpanded));let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...cM.L.asClassNameArray(vD.W.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(kL(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new Mx.Cm,n=this.modelProvider();for(;;){const s=n.getNodeLocation(e),r=n.getParentNodeLocation(s);if(!r)break;const o=n.getNode(r),a=xE(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(o)&&a.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(o,a),i.add((0,Mx.s)((()=>this.renderedIndentGuides.delete(o,a)))),e=o}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach((e=>{const n=i.getNodeLocation(e);try{const s=i.getParentNodeLocation(n);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):s&&t.add(i.getNode(s))}catch{}})),this.activeIndentNodes.forEach((e=>{t.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.remove("active")))})),t.forEach((e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.add("active")))})),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,Mx.AS)(this.disposables)}}class AB{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Mx.Cm,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const n=this._filter.filter(e,t);if(i="boolean"===typeof n?n?1:0:CB(n)?SB(n.visibility):n,0===i)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:EN.Default,visibility:i};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(const r of s){const e=r&&r.toString();if("undefined"===typeof e)return{data:EN.Default,visibility:i};let t;if(this.tree.findMatchType===PB.Contiguous){const i=e.toLowerCase().indexOf(this._lowercasePattern);if(i>-1){t=[Number.MAX_SAFE_INTEGER,0];for(let e=this._lowercasePattern.length;e>0;e--)t.push(i+e-1)}}else t=TN(this._pattern,this._lowercasePattern,0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(t)return this._matchCount++,1===s.length?{data:t,visibility:i}:{data:{label:e,score:t},visibility:i}}return this.tree.findMode===RB.Filter?"number"===typeof this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:EN.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,Mx.AS)(this.disposables)}}var RB,PB;!function(e){e[e.Highlight=0]="Highlight",e[e.Filter=1]="Filter"}(RB||(RB={})),function(e){e[e.Fuzzy=0]="Fuzzy",e[e.Contiguous=1]="Contiguous"}(PB||(PB={}));Mx.jG;class OB{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.tree=e,this.view=i,this.filter=n,this.contextViewProvider=s,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new rk.vl,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new rk.vl,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new rk.vl,this._onDidChangeOpenState=new rk.vl,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Mx.Cm,this.disposables=new Mx.Cm,this._mode=e.options.defaultFindMode??RB.Highlight,this._matchType=e.options.defaultFindMatchType??PB.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0!==e.defaultFindMode&&(this.mode=e.defaultFindMode),void 0!==e.defaultFindMatchType&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){this.widget&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}render(){const e=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&e?(JI((0,WS.kg)("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??1?this.widget?.showMessage({type:2,content:(0,WS.kg)("not found","No elements found.")}):this.widget?.showMessage({type:2})):(this.widget?.clearMessage(),this.pattern&&JI((0,WS.kg)("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||(this.filter.totalCount>0&&this.filter.matchCount<=1||!EN.isDefault(e.filterData))}layout(e){this.width=e,this.widget?.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function FB(e,t){return e.position===t.position&&BB(e,t)}function BB(e,t){return e.node.element===t.node.element&&e.startIndex===t.startIndex&&e.height===t.height&&e.endIndex===t.endIndex}class zB{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return(0,OS.aI)(this.stickyNodes,e.stickyNodes,FB)}lastNodePartiallyVisible(){if(0===this.count)return!1;const e=this.stickyNodes[this.count-1];if(1===this.count)return 0!==e.position;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!(0,OS.aI)(this.stickyNodes,e.stickyNodes,BB))return!1;if(0===this.count)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class VB{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){const s=e[n];if(s.position+s.height>i||n>=t)return e.slice(0,n)}return e}}class WB extends Mx.jG{constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=s,this.maxWidgetViewRatio=.4;const o=this.validateStickySettings(r);this.stickyScrollMaxItemCount=o.stickyScrollMaxItemCount,this.stickyScrollDelegate=r.stickyScrollDelegate??new VB,this._widget=this._register(new HB(i.getScrollableElement(),i,e,n,s,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll((()=>this.update()))),this._register(i.onDidChangeContentHeight((()=>this.update()))),this._register(e.onDidChangeCollapseState((()=>this.update()))),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(t=0===e?this.view.firstVisibleIndex:this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||0===this.tree.scrollTop)return void this._widget.setState(void 0);const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,n=0,s=this.getNextStickyNode(i,void 0,n);for(;s&&(t.push(s),n+=s.height,!(t.length<=this.stickyScrollMaxItemCount)||(i=this.getNextVisibleNode(s),i));)s=this.getNextStickyNode(i,s.node,n);const r=this.constrainStickyNodes(t);return r.length?new zB(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const n=this.getAncestorUnderPrevious(e,t);if(n){if(n===e){if(!this.nodeIsUncollapsedParent(e))return;if(this.nodeTopAlignsWithStickyNodesBottom(e,i))return}return this.createStickyScrollNode(n,i)}}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),n=this.view.getElementTop(i),s=t;return this.view.scrollTop===n-s}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:s}=this.getNodeRange(e);return{node:e,position:this.calculateStickyNodePosition(s,t,i),height:i,startIndex:n,endIndex:s}}getAncestorUnderPrevious(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(void 0===t)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(null===n&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const t=this.treeDelegate.getHeight(this.view.element(e)),i=this.view.getRelativeTop(e+1);n=i?i-t/this.view.renderHeight:null}if(null===n)return t;const s=this.view.element(e),r=this.treeDelegate.getHeight(s),o=n*this.view.renderHeight+r;return t+i>o&&t<=o?o-i:t}constrainStickyNodes(e){if(0===e.length)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];const s=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw new Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");return{startIndex:i,endIndex:i+this.model.getListRenderCount(t)-1}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let s=0;s<t.length&&s<this.stickyScrollMaxItemCount;s++)n+=this.treeDelegate.getHeight(t[s]);return n}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return"number"===typeof e.stickyScrollMaxItemCount&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class HB{constructor(e,t,i,n,s,r){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=s,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new Mx.Cm,this._rootDomNode=xE(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const o=xE(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(o),this.stickyScrollFocus=new UB(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i)return this._previousState=void 0,this._previousElements=[],void this._previousStateDisposables.clear();const n=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${n.position}px`;else{this._previousStateDisposables.clear();const t=Array(e.count);for(let i=e.count-1;i>=0;i--){const n=e.stickyNodes[i],{element:s,disposable:r}=this.createElement(n,i,e.count);t[i]=s,this._rootDomNode.appendChild(s),this._previousStateDisposables.add(r)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}this._previousState=e,this._rootDomNode.style.height=`${n.position+n.height}px`}createElement(e,t,i){const n=e.startIndex,s=document.createElement("div");s.style.top=`${e.position}px`,!1!==this.tree.options.setRowHeight&&(s.style.height=`${e.height}px`),!1!==this.tree.options.setRowLineHeight&&(s.style.lineHeight=`${e.height}px`),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index",`${n}`),s.setAttribute("data-parity",n%2===0?"even":"odd"),s.setAttribute("id",this.view.getElementID(n));const r=this.setAccessibilityAttributes(s,e.node.element,t,i),o=this.treeDelegate.getTemplateId(e.node),a=this.treeRenderers.find((e=>e.templateId===o));if(!a)throw new Error(`No renderer found for template id ${o}`);let l=e.node;l===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(l=new Proxy(e.node,{}));const h=a.renderTemplate(s);a.renderElement(l,e.startIndex,h,e.height);const c=(0,Mx.s)((()=>{r.dispose(),a.disposeElement(l,e.startIndex,h,e.height),a.disposeTemplate(h),s.remove()}));return{element:s,disposable:c}}setAccessibilityAttributes(e,t,i,n){if(!this.accessibilityProvider)return Mx.jG.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const s=this.accessibilityProvider.getAriaLabel(t),r=s&&"string"!==typeof s?s:(0,sP.lk)(s),o=(0,sP.fm)((t=>{const i=t.readObservable(r);i?e.setAttribute("aria-label",i):e.removeAttribute("aria-label")}));"string"===typeof s||s&&e.setAttribute("aria-label",s.get());const a=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return"number"===typeof a&&e.setAttribute("aria-level",`${a}`),e.setAttribute("aria-selected",String(!1)),o}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class UB extends Mx.jG{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new rk.vl,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new rk.vl,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(EL(this.container,"focus",(()=>this.onFocus()))),this._register(EL(this.container,"blur",(()=>this.onBlur()))),this._register(this.view.onDidFocus((()=>this.toggleStickyScrollFocused(!1)))),this._register(this.view.onKeyDown((e=>this.onKeyDown(e)))),this._register(this.view.onMouseDown((e=>this.onMouseDown(e)))),this._register(this.view.onContextMenu((e=>this.handleContextMenu(e))))}handleContextMenu(e){const t=e.browserEvent.target;if(!pP(t)&&!gP(t))return void(this.focusedLast()&&this.view.domFocus());if(!uE(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const t=this.state.stickyNodes.findIndex((t=>t.node.element===e.element?.element));if(-1===t)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");return this.container.focus(),void this.setFocus(t)}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const i=this.state.stickyNodes[this.focusedIndex].node.element,n=this.elements[this.focusedIndex];this._onContextMenu.fire({element:i,anchor:n,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state)if("ArrowUp"===e.key)this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if("ArrowDown"===e.key||"ArrowRight"===e.key){if(this.focusedIndex>=this.state.count-1){const e=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([e]),this.scrollNodeUnderWidget(e,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}onMouseDown(e){const t=e.browserEvent.target;(pP(t)||gP(t))&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&0===t.count)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const e=(0,HR.qE)(i,0,t.count-1);this.setFocus(e)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),r=n?n.position+n.height+i.height:i.height;this.view.scrollTop=s-r}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}removeFocus(){-1!==this.focusedIndex&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){-1!==this.focusedIndex&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||0===this.elements.length)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),-1===this.focusedIndex&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function jB(e){let t=uB.Unknown;return KL(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=uB.Twistie:KL(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=uB.Element:KL(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=uB.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function GB(e){const t=pP(e.browserEvent.target);return{element:e.element?e.element.element:null,browserEvent:e.browserEvent,anchor:e.anchor,isStickyScroll:t}}function KB(e,t){t(e),e.children.forEach((e=>KB(e,t)))}class $B{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new rk.vl,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&(0,OS.aI)(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map((e=>e.element))),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice(e){let{insertedNodes:t,deletedNodes:i}=e;if(!this.identityProvider){const e=this.createNodeSet(),t=t=>e.delete(t);return i.forEach((e=>KB(e,t))),void this.set([...e.values()])}const n=new Set,s=e=>n.add(this.identityProvider.getId(e.element).toString());i.forEach((e=>KB(e,s)));const r=new Map,o=e=>r.set(this.identityProvider.getId(e.element).toString(),e);t.forEach((e=>KB(e,o)));const a=[];for(const l of this.nodes){const e=this.identityProvider.getId(l.element).toString();if(n.has(e)){const t=r.get(e);t&&t.visible&&a.push(t)}else a.push(l)}if(this.nodes.length>0&&0===a.length){const e=this.getFirstViewElementWithTrait();e&&a.push(e)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class qB extends SP{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(fP(e.browserEvent.target)||cP(e.browserEvent.target)||uP(e.browserEvent.target))return;if(e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=gP(e.browserEvent.target);let r=!1;if(r=!!s||("function"===typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick),s)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!n&&2!==e.browserEvent.detail)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e)}if(t.collapsible&&(!s||n)){const i=this.tree.getNodeLocation(t),s=e.browserEvent.altKey;if(this.tree.setFocus([i]),this.tree.toggleCollapsed(i,s),n)return void(e.browserEvent.isHandledByList=!0)}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(function(e){return dP(e,"monaco-custom-toggle")}(e.browserEvent.target)||function(e){return dP(e,"action-item")}(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const n=this.list.indexOf(t),s=this.list.getElementTop(n),r=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-r,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){!e.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&(e.browserEvent.isHandledByList||super.onDoubleClick(e))}onMouseDown(e){const t=e.browserEvent.target;pP(t)||gP(t)||super.onMouseDown(e)}onContextMenu(e){const t=e.browserEvent.target;pP(t)||gP(t)||super.onContextMenu(e)}}class QB extends IP{constructor(e,t,i,n,s,r,o,a){super(e,t,i,n,a),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=o}createMouseController(e){return new qB(this,e.tree,e.stickyScrollProvider)}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(super.splice(e,t,i),0===i.length)return;const n=[],s=[];let r;i.forEach(((t,i)=>{this.focusTrait.has(t)&&n.push(e+i),this.selectionTrait.has(t)&&s.push(e+i),this.anchorTrait.has(t)&&(r=e+i)})),n.length>0&&super.setFocus((0,OS.dM)([...super.getFocus(),...n])),s.length>0&&super.setSelection((0,OS.dM)([...super.getSelection(),...s])),"number"===typeof r&&super.setAnchor(r)}setFocus(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super.setFocus(e,t),i||this.focusTrait.set(e.map((e=>this.element(e))),t)}setSelection(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super.setSelection(e,t),i||this.selectionTrait.set(e.map((e=>this.element(e))),t)}setAnchor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setAnchor(e),t||("undefined"===typeof e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class XB{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return rk.Jh.filter(rk.Jh.map(this.view.onMouseDblClick,jB),(e=>e.target!==uB.Filter))}get onMouseOver(){return rk.Jh.map(this.view.onMouseOver,jB)}get onMouseOut(){return rk.Jh.map(this.view.onMouseOut,jB)}get onContextMenu(){return rk.Jh.any(rk.Jh.filter(rk.Jh.map(this.view.onContextMenu,GB),(e=>!e.isStickyScroll)),this.stickyScrollController?.onContextMenu??rk.Jh.None)}get onPointer(){return rk.Jh.map(this.view.onPointer,jB)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return rk.Jh.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){return this.findController?.mode??RB.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){return this.findController?.matchType??PB.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return"undefined"===typeof this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return"undefined"===typeof this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this._user=e,this._options=s,this.eventBufferer=new rk.at,this.onDidChangeFindOpenState=rk.Jh.None,this.onDidChangeStickyScrollFocused=rk.Jh.None,this.disposables=new Mx.Cm,this._onWillRefilter=new rk.vl,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new rk.vl,this.treeDelegate=new DB(i);const r=new rk.Wj,o=new rk.Wj,a=this.disposables.add(new NB(o.event)),l=new qD.db;this.renderers=n.map((e=>new IB(e,(()=>this.model),r.event,a,l,s)));for(const g of this.renderers)this.disposables.add(g);let h;s.keyboardNavigationLabelProvider&&(h=new AB(this,s.keyboardNavigationLabelProvider,s.filter),s={...s,filter:h},this.disposables.add(h)),this.focus=new $B((()=>this.view.getFocusedElements()[0]),s.identityProvider),this.selection=new $B((()=>this.view.getSelectedElements()[0]),s.identityProvider),this.anchor=new $B((()=>this.view.getAnchorElement()),s.identityProvider),this.view=new QB(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...TB((()=>this.model),s),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,s),r.input=this.model.onDidChangeCollapseState;const c=rk.Jh.forEach(this.model.onDidSplice,(e=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)}))}),this.disposables);c((()=>null),null,this.disposables);const d=this.disposables.add(new rk.vl),u=this.disposables.add(new sk.ve(0));if(this.disposables.add(rk.Jh.any(c,this.focus.onDidChange,this.selection.onDidChange)((()=>{u.trigger((()=>{const e=new Set;for(const t of this.focus.getNodes())e.add(t);for(const t of this.selection.getNodes())e.add(t);d.fire([...e.values()])}))}))),o.input=d.event,!1!==s.keyboardSupport){const e=rk.Jh.chain(this.view.onKeyDown,(e=>e.filter((e=>!cP(e.target))).map((e=>new Zx(e)))));rk.Jh.chain(e,(e=>e.filter((e=>15===e.keyCode))))(this.onLeftArrow,this,this.disposables),rk.Jh.chain(e,(e=>e.filter((e=>17===e.keyCode))))(this.onRightArrow,this,this.disposables),rk.Jh.chain(e,(e=>e.filter((e=>10===e.keyCode))))(this.onSpace,this,this.disposables)}if((s.findWidgetEnabled??1)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const e=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new OB(this,this.model,this.view,h,s.contextViewProvider,e),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=rk.Jh.None,this.onDidChangeFindMatchType=rk.Jh.None;s.enableStickyScroll&&(this.stickyScrollController=new WB(this,this.model,this.view,this.renderers,this.treeDelegate,s),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=iE(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===bB.Always)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={...this._options,...e};for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===bB.Always)}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new WB(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=rk.Jh.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){this.view.layout(e,t),(0,gM.Et)(t)&&this.findController?.layout(t)}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const n=e.treeStickyScrollBackground??e.listBackground;n&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${n}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${n}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const s=NE(e.listFocusAndSelectionOutline,NE(e.listSelectionOutline,e.listFocusOutline??""));s&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join("\n"),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!0,t)}expand(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents((()=>{const i=e.map((e=>this.model.getNode(e)));this.selection.set(i,t);const n=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setSelection(n,t,!0)}))}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents((()=>{const i=e.map((e=>this.model.getNode(e)));this.focus.set(i,t);const n=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setFocus(n,t,!0)}))}focusNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uE(i)&&i.altKey?void 0:this.focusNavigationFilter;this.view.focusNext(e,t,i,n)}focusPrevious(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uE(i)&&i.altKey?void 0:this.focusNavigationFilter;this.view.focusPrevious(e,t,i,n)}focusNextPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uE(e)&&e.altKey?void 0:this.focusNavigationFilter;return this.view.focusNextPage(e,t)}focusPreviousPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uE(e)&&e.altKey?void 0:this.focusNavigationFilter;return this.view.focusPreviousPage(e,t,(()=>this.stickyScrollController?.height??0))}focusLast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uE(e)&&e.altKey?void 0:this.focusNavigationFilter;this.view.focusLast(e,t)}focusFirst(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uE(e)&&e.altKey?void 0:this.focusNavigationFilter;this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(-1!==i)if(this.stickyScrollController){const n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}else this.view.reveal(i,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const e=this.model.getParentNodeLocation(n);if(!e)return;const t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some((e=>e.visible)))return;const[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],n=this.model.getNodeLocation(i),s=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,s)}dispose(){(0,Mx.AS)(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose()}}class YB{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new kB(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare:(e,t)=>i.sorter.compare(e.element,t.element)}),this.identityProvider=i.identityProvider}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uM.f.empty(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uM.f.empty(),i=arguments.length>2?arguments[2]:void 0;const n=new Set,s=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:e=>{if(null===e.element)return;const t=e;if(n.add(t.element),this.nodes.set(t.element,t),this.identityProvider){const e=this.identityProvider.getId(t.element).toString();s.add(e),this.nodesByIdentity.set(e,t)}i.onDidCreateNode?.(t)},onDidDeleteNode:e=>{if(null===e.element)return;const t=e;if(n.has(t.element)||this.nodes.delete(t.element),this.identityProvider){const e=this.identityProvider.getId(t.element).toString();s.has(e)||this.nodesByIdentity.delete(e)}i.onDidDeleteNode?.(t)}})}preserveCollapseState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uM.f.empty();return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),uM.f.map(e,(e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){const i=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(i)}if(!t){let t;return t="undefined"===typeof e.collapsed?void 0:e.collapsed===dB.Collapsed||e.collapsed===dB.PreserveOrCollapsed||e.collapsed!==dB.Expanded&&e.collapsed!==dB.PreserveOrExpanded&&Boolean(e.collapsed),{...e,children:this.preserveCollapseState(e.children),collapsed:t}}const i="boolean"===typeof e.collapsible?e.collapsible:t.collapsible;let n;return n="undefined"===typeof e.collapsed||e.collapsed===dB.PreserveOrCollapsed||e.collapsed===dB.PreserveOrExpanded?t.collapsed:e.collapsed===dB.Collapsed||e.collapsed!==dB.Expanded&&Boolean(e.collapsed),{...e,collapsible:i,collapsed:n,children:this.preserveCollapseState(e.children)}}))}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new _B(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new _B(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new _B(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(null===e)return[];const t=this.nodes.get(e);if(!t)throw new _B(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function ZB(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:uM.f.map(uM.f.from(e.children),ZB),collapsible:e.collapsible,collapsed:e.collapsed}}function JB(e){const t=[e.element],i=e.incompressible||!1;let n,s;for(;[s,n]=uM.f.consume(uM.f.from(e.children),2),1===s.length&&!s[0].incompressible;)e=s[0],t.push(e.element);return{element:{elements:t,incompressible:i},children:uM.f.map(uM.f.concat(s,n),JB),collapsible:e.collapsible,collapsed:e.collapsed}}function ez(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=i<e.element.elements.length-1?[ez(e,i+1)]:uM.f.map(uM.f.from(e.children),(e=>ez(e,0))),0===i&&e.element.incompressible?{element:e.element.elements[i],children:t,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[i],children:t,collapsible:e.collapsible,collapsed:e.collapsed}}function tz(e){return ez(e,0)}function iz(e,t,i){return e.element===t?{...e,children:i}:{...e,children:uM.f.map(uM.f.from(e.children),(e=>iz(e,t,i)))}}class nz{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new YB(e,t,i),this.enabled="undefined"===typeof i.compressionEnabled||i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uM.f.empty(),i=arguments.length>2?arguments[2]:void 0;const n=i.diffIdentityProvider&&(e=>({getId:t=>t.elements.map((t=>e.getId(t).toString())).join("\0")}))(i.diffIdentityProvider);if(null===e){const e=uM.f.map(t,this.enabled?JB:ZB);return void this._setChildren(null,e,{diffIdentityProvider:n,diffDepth:1/0})}const s=this.nodes.get(e);if(!s)throw new _B(this.user,"Unknown compressed tree node");const r=this.model.getNode(s),o=this.model.getParentNodeLocation(s),a=this.model.getNode(o),l=iz(tz(r),e,t),h=(this.enabled?JB:ZB)(l),c=i.diffIdentityProvider?(e,t)=>i.diffIdentityProvider.getId(e)===i.diffIdentityProvider.getId(t):void 0;if((0,OS.aI)(h.element.elements,r.element.elements,c))return void this._setChildren(s,h.children||uM.f.empty(),{diffIdentityProvider:n,diffDepth:1});const d=a.children.map((e=>e===r?h:e));this._setChildren(a.element,d,{diffIdentityProvider:n,diffDepth:r.depth-a.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const t=this.model.getNode().children,i=uM.f.map(t,tz),n=uM.f.map(i,e?JB:ZB);this._setChildren(null,n,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set;this.model.setChildren(e,t,{...i,onDidCreateNode:e=>{for(const t of e.element.elements)n.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(const t of e.element.elements)n.has(t)||this.nodes.delete(t)}})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if("undefined"===typeof e)return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return null===i?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(null===e)return null;const t=this.nodes.get(e);if(!t)throw new _B(this.user,`Tree element not found: ${e}`);return t}}const sz=e=>e[e.length-1];class rz{get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((e=>new rz(this.unwrapper,e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}class oz{get onDidSplice(){return rk.Jh.map(this.model.onDidSplice,(e=>{let{insertedNodes:t,deletedNodes:i}=e;return{insertedNodes:t.map((e=>this.nodeMapper.map(e))),deletedNodes:i.map((e=>this.nodeMapper.map(e)))}}))}get onDidChangeCollapseState(){return rk.Jh.map(this.model.onDidChangeCollapseState,(e=>{let{node:t,deep:i}=e;return{node:this.nodeMapper.map(t),deep:i}}))}get onDidChangeRenderNodeCount(){return rk.Jh.map(this.model.onDidChangeRenderNodeCount,(e=>this.nodeMapper.map(e)))}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.rootRef=null,this.elementMapper=i.elementMapper||sz;const n=e=>this.elementMapper(e.elements);this.nodeMapper=new vB((e=>new rz(n,e))),this.model=new nz(e,function(e,t){return{splice(i,n,s){t.splice(i,n,s.map((t=>e.map(t))))},updateElementHeight(e,i){t.updateElementHeight(e,i)}}}(this.nodeMapper,t),function(e,t){return{...t,identityProvider:t.identityProvider&&{getId:i=>t.identityProvider.getId(e(i))},sorter:t.sorter&&{compare:(e,i)=>t.sorter.compare(e.elements[0],i.elements[0])},filter:t.filter&&{filter:(i,n)=>t.filter.filter(e(i),n)}}}(n,i))}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uM.f.empty(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return null===t||"undefined"===typeof t?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getNode(e)}}var az=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};class lz extends XB{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n){super(e,t,i,n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}),this.user=e}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uM.f.empty(),i=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,i)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new YB(e,t,i)}}class hz{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),1===s.element.elements.length?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,i.data,n))}disposeElement(e,t,i,n){i.compressedTreeNode?this.renderer.disposeCompressedElements?.(i.compressedTreeNode,t,i.data,n):this.renderer.disposeElement?.(e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}}az([lD],hz.prototype,"compressedTreeNodeProvider",null);class cz{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),0===e.length)return[];for(let n=0;n<e.length;n++){const s=e[n],r=s.position+s.height;if(n+1<e.length&&r+e[n+1].height>i||n>=t-1&&t<e.length){const t=e.slice(0,n),i=e.slice(n);return[...t,this.compressStickyNodes(i)]}}return e}compressStickyNodes(e){if(0===e.length)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let l=0;l<e.length;l++){const n=e[l],s=t.getCompressedTreeNode(n.node.element);if(s.element){if(0!==l&&s.element.incompressible)break;i.push(...s.element.elements)}}if(i.length<2)return e[0];const n=e[e.length-1],s={elements:i,incompressible:!1},r={...n.node,children:[],element:s},o=new Proxy(e[0].node,{}),a={node:o,startIndex:e[0].startIndex,endIndex:n.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(o,r),a}}function dz(e,t){return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let n;try{n=e().getCompressedTreeNode(i)}catch{return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return 1===n.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}class uz extends lz{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const r=()=>this,o=new cz((()=>this.model)),a=n.map((e=>new hz(r,o,e)));super(e,t,i,a,{...dz(r,s),stickyScrollDelegate:o})}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uM.f.empty(),i=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,i)}createModel(e,t,i){return new oz(e,t,i)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),"undefined"!==typeof e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getCompressedTreeNode(e)}}function gz(e){return{...e,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function pz(e,t){return!!t.parent&&(t.parent===e||pz(e,t.parent))}class fz{get element(){return this.node.element.element}get children(){return this.node.children.map((e=>new fz(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class mz{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...cM.L.asClassNameArray(vD.W.treeItemLoading)),!0):(t.classList.remove(...cM.L.asClassNameArray(vD.W.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function _z(e){return{browserEvent:e.browserEvent,elements:e.elements.map((e=>e.element))}}function vz(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}class bz extends YR{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function yz(e){return e instanceof YR?new bz(e):e}class wz{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){this.dnd.onDragStart?.(yz(e),t)}onDragOver(e,t,i,n,s){return this.dnd.onDragOver(yz(e),t&&t.element,i,n,s)}drop(e,t,i,n,s){this.dnd.drop(yz(e),t&&t.element,i,n,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}}function Cz(e){return e&&{...e,collapseByDefault:!0,identityProvider:e.identityProvider&&{getId:t=>e.identityProvider.getId(t.element)},dnd:e.dnd&&new wz(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent:t=>e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element}),isSelectionRangeChangeEvent:t=>e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>!!e.accessibilityProvider?.isChecked(t.element):void 0,getAriaLabel:t=>e.accessibilityProvider.getAriaLabel(t.element),getWidgetAriaLabel:()=>e.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},filter:e.filter&&{filter:(t,i)=>e.filter.filter(t.element,i)},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)},sorter:void 0,expandOnlyOnTwistieClick:"undefined"===typeof e.expandOnlyOnTwistieClick?void 0:"function"!==typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:t=>e.expandOnlyOnTwistieClick(t.element),defaultFindVisibility:t=>t.hasChildren&&t.stale?1:"number"===typeof e.defaultFindVisibility?e.defaultFindVisibility:"undefined"===typeof e.defaultFindVisibility?2:e.defaultFindVisibility(t.element)}}function Sz(e,t){t(e),e.children.forEach((e=>Sz(e,t)))}class xz{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return rk.Jh.map(this.tree.onDidChangeFocus,_z)}get onDidChangeSelection(){return rk.Jh.map(this.tree.onDidChangeSelection,_z)}get onMouseDblClick(){return rk.Jh.map(this.tree.onMouseDblClick,vz)}get onPointer(){return rk.Jh.map(this.tree.onPointer,vz)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new rk.vl,this._onDidChangeNodeSlowState=new rk.vl,this.nodeMapper=new vB((e=>new fz(e))),this.disposables=new Mx.Cm,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren="undefined"!==typeof r.autoExpandSingleChildren&&r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=e=>r.collapseByDefault?r.collapseByDefault(e)?dB.PreserveOrCollapsed:dB.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,n,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=gz({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,n,s){const r=new DB(i),o=n.map((e=>new mz(e,this.nodeMapper,this._onDidChangeNodeSlowState.event))),a=Cz(s)||{};return new lz(e,t,r,o,a)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach((e=>e.cancel())),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&"number"===typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}async _updateChildren(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if("undefined"===typeof this.root.element)throw new _B(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await rk.Jh.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,n,s),i)try{this.tree.rerender(r)}catch{}}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();const t=this.getDataNode(e);this.tree.rerender(t)}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element;const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"===typeof this.root.element)throw new _B(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await rk.Jh.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i))return!1;if(i.refreshPromise&&(await this.root.refreshPromise,await rk.Jh.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await rk.Jh.toPromise(this._onDidRender.event)),n}setSelection(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map((e=>e.element))}setFocus(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map((e=>e.element))}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element;const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new _B(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,n){await this.refreshNode(e,t,i),this.disposables.isDisposed||this.render(e,i,n)}async refreshNode(e,t,i){let n;if(this.subTreeRefreshPromises.forEach(((s,r)=>{!n&&function(e,t){return e===t||pz(e,t)||pz(t,e)}(r,e)&&(n=s.then((()=>this.refreshNode(e,t,i))))})),n)return n;if(e!==this.root){if(this.tree.getNode(e).collapsed)return e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,void this.setChildren(e,[],t,i)}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let n;e.refreshPromise=new Promise((e=>n=e)),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}));try{const n=await this.doRefreshNode(e,t,i);e.stale=!1,await sk.HC.settled(n.map((e=>this.doRefreshSubTree(e,t,i))))}finally{n()}}async doRefreshNode(e,t,i){let n;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){const t=this.doGetChildren(e);if((0,gM.xZ)(t))n=Promise.resolve(t);else{const i=(0,sk.wR)(800);i.then((()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)}),(e=>null)),n=t.finally((()=>i.cancel()))}}else n=Promise.resolve(uM.f.empty());try{const s=await n;return this.setChildren(e,s,t,i)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),(0,Ux.MB)(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return(0,gM.xZ)(i)?this.processChildren(i):(t=(0,sk.SS)((async()=>this.processChildren(await i))),this.refreshPromises.set(e,t),t.finally((()=>{this.refreshPromises.delete(e)})))}_onDidChangeCollapseState(e){let{node:t,deep:i}=e;null!==t.element&&!t.collapsed&&t.element.stale&&(i?this.collapse(t.element.element):this.refreshAndRenderNode(t.element,!1).catch(Ux.dz))}setChildren(e,t,i,n){const s=[...t];if(0===e.children.length&&0===s.length)return[];const r=new Map,o=new Map;for(const h of e.children)r.set(h.element,h),this.identityProvider&&o.set(h.id,{node:h,collapsed:this.tree.hasElement(h)&&this.tree.isCollapsed(h)});const a=[],l=s.map((t=>{const s=!!this.dataSource.hasChildren(t);if(!this.identityProvider){const i=gz({element:t,parent:e,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return s&&i.defaultCollapseState===dB.PreserveOrExpanded&&a.push(i),i}const l=this.identityProvider.getId(t).toString(),h=o.get(l);if(h){const e=h.node;return r.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=s,i?h.collapsed?(e.children.forEach((e=>Sz(e,(e=>this.nodes.delete(e.element))))),e.children.splice(0,e.children.length),e.stale=!0):a.push(e):s&&!h.collapsed&&a.push(e),e}const c=gz({element:t,parent:e,id:l,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(l)>-1&&n.focus.push(c),n&&n.viewState.selection&&n.viewState.selection.indexOf(l)>-1&&n.selection.push(c),(n&&n.viewState.expanded&&n.viewState.expanded.indexOf(l)>-1||s&&c.defaultCollapseState===dB.PreserveOrExpanded)&&a.push(c),c}));for(const h of r.values())Sz(h,(e=>this.nodes.delete(e.element)));for(const h of l)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...l),e!==this.root&&this.autoExpandSingleChildren&&1===l.length&&0===a.length&&(l[0].forceExpanded=!0,a.push(l[0])),a}render(e,t,i){const n=e.children.map((e=>this.asTreeElement(e,t))),s=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId:e=>i.diffIdentityProvider.getId(e.element)}};this.tree.setChildren(e===this.root?null:e,n,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?uM.f.map(e.children,(e=>this.asTreeElement(e,t))):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class kz{get element(){return{elements:this.node.element.elements.map((e=>e.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((e=>new kz(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class Lz{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...cM.L.asClassNameArray(vD.W.treeItemLoading)),!0):(t.classList.remove(...cM.L.asClassNameArray(vD.W.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,Mx.AS)(this.disposables)}}class Ez extends xz{constructor(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};super(e,t,i,s,r,o),this.compressionDelegate=n,this.compressibleNodeMapper=new vB((e=>new kz(e))),this.filter=o.filter}createTree(e,t,i,n,s){const r=new DB(i),o=n.map((e=>new Lz(e,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),a=function(e){const t=e&&Cz(e);return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map((e=>e.element)))}}}(s)||{};return new uz(e,t,r,o,a)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const n=e=>this.identityProvider.getId(e).toString(),s=e=>{const t=new Set;for(const i of e){const e=this.tree.getCompressedTreeNode(i===this.root?null:i);if(e.element)for(const i of e.element.elements)t.add(n(i.element))}return t},r=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t,i);const a=this.getSelection();let l=!1;const h=this.getFocus();let c=!1;const d=e=>{const t=e.element;if(t)for(let i=0;i<t.elements.length;i++){const e=n(t.elements[i].element),s=t.elements[t.elements.length-1].element;r.has(e)&&-1===a.indexOf(s)&&(a.push(s),l=!0),o.has(e)&&-1===h.indexOf(s)&&(h.push(s),c=!0)}e.children.forEach(d)};d(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),c&&this.setFocus(h)}processChildren(e){return this.filter&&(e=uM.f.filter(e,(e=>{const t=this.filter.filter(e,1),i="boolean"===typeof(n=t)?n?1:0:CB(n)?SB(n.visibility):SB(n);var n;if(2===i)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===i}))),super.processChildren(e)}}class Mz extends XB{constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};super(e,t,i,n,r),this.user=e,this.dataSource=s,this.identityProvider=r.identityProvider}createModel(e,t,i){return new YB(e,t,i)}}new mM.N1("isMac",BS.zx,(0,WS.kg)("isMac","Whether the operating system is macOS")),new mM.N1("isLinux",BS.j9,(0,WS.kg)("isLinux","Whether the operating system is Linux")),new mM.N1("isWindows",BS.uF,(0,WS.kg)("isWindows","Whether the operating system is Windows")),new mM.N1("isWeb",BS.HZ,(0,WS.kg)("isWeb","Whether the platform is a web browser")),new mM.N1("isMacNative",BS.zx&&!BS.HZ,(0,WS.kg)("isMacNative","Whether the operating system is macOS on a non-browser platform")),new mM.N1("isIOS",BS.un,(0,WS.kg)("isIOS","Whether the operating system is iOS")),new mM.N1("isMobile",BS.Fr,(0,WS.kg)("isMobile","Whether the platform is a mobile web browser")),new mM.N1("isDevelopment",!1,!0),new mM.N1("productQualityType","",(0,WS.kg)("productQualityType","Quality type of VS Code"));const Tz="inputFocus",Dz=new mM.N1(Tz,!1,(0,WS.kg)("inputFocus","Whether keyboard focus is inside an input box"));var Nz=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},Iz=function(e,t){return function(i,n){t(i,n,e)}};const Az=(0,eM.u1)("listService");const Rz=new mM.N1("listScrollAtBoundary","none"),Pz=(mM.M$.or(Rz.isEqualTo("top"),Rz.isEqualTo("both")),mM.M$.or(Rz.isEqualTo("bottom"),Rz.isEqualTo("both")),new mM.N1("listFocus",!0)),Oz=new mM.N1("treestickyScrollFocused",!1),Fz=new mM.N1("listSupportsMultiselect",!0),Bz=(mM.M$.and(Pz,mM.M$.not(Tz),Oz.negate()),new mM.N1("listHasSelectionOrFocus",!1)),zz=new mM.N1("listDoubleSelection",!1),Vz=new mM.N1("listMultiSelection",!1),Wz=new mM.N1("listSelectionNavigation",!1),Hz=new mM.N1("listSupportsFind",!0),Uz=new mM.N1("treeElementCanCollapse",!1),jz=new mM.N1("treeElementHasParent",!1),Gz=new mM.N1("treeElementCanExpand",!1),Kz=new mM.N1("treeElementHasChild",!1),$z=new mM.N1("treeFindOpen",!1),qz="listTypeNavigationMode",Qz="listAutomaticKeyboardNavigation";function Xz(e,t){const i=e.createScoped(t.getHTMLElement());return Pz.bindTo(i),i}function Yz(e,t){const i=Rz.bindTo(e),n=()=>{const e=0===t.scrollTop,n=t.scrollHeight-t.renderHeight-t.scrollTop<1;e&&n?i.set("both"):e?i.set("top"):n?i.set("bottom"):i.set("none")};return n(),t.onDidScroll(n)}const Zz="workbench.list.multiSelectModifier",Jz="workbench.list.openMode",eV="workbench.list.horizontalScrolling",tV="workbench.list.defaultFindMode",iV="workbench.list.typeNavigationMode",nV="workbench.list.keyboardNavigation",sV="workbench.list.scrollByPage",rV="workbench.list.defaultFindMatchType",oV="workbench.tree.indent",aV="workbench.tree.renderIndentGuides",lV="workbench.list.smoothScrolling",hV="workbench.list.mouseWheelScrollSensitivity",cV="workbench.list.fastScrollSensitivity",dV="workbench.tree.expandMode",uV="workbench.tree.enableStickyScroll",gV="workbench.tree.stickyScrollMaxItemCount";function pV(e){return"alt"===e.getValue(Zz)}class fV extends Mx.jG{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=pV(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(Zz)&&(this.useAltAsMultipleSelectionModifier=pV(this.configurationService))})))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:yP(e)}isSelectionRangeChangeEvent(e){return wP(e)}}function mV(e,t){const i=e.get(JT.pG),n=e.get(oD),s=new Mx.Cm;return[{...t,keyboardNavigationDelegate:{mightProducePrintableCharacter:e=>n.mightProducePrintableCharacter(e)},smoothScrolling:Boolean(i.getValue(lV)),mouseWheelScrollSensitivity:i.getValue(hV),fastScrollSensitivity:i.getValue(cV),multipleSelectionController:t.multipleSelectionController??s.add(new fV(i)),keyboardNavigationEventFilter:xV(n),scrollByPage:Boolean(i.getValue(sV))},s]}let _V=class extends IP{constructor(e,t,i,n,s,r,o,a,l){const h="undefined"!==typeof s.horizontalScrolling?s.horizontalScrolling:Boolean(a.getValue(eV)),[c,d]=l.invokeFunction(mV,s);super(e,t,i,n,{keyboardSupport:!1,...c,horizontalScrolling:h}),this.disposables.add(d),this.contextKeyService=Xz(r,this),this.disposables.add(Yz(this.contextKeyService,this)),this.listSupportsMultiSelect=Fz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport);Wz.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=Bz.bindTo(this.contextKeyService),this.listDoubleSelection=zz.bindTo(this.contextKeyService),this.listMultiSelection=Vz.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=pV(a),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(a.onDidChangeConfiguration((e=>{e.affectsConfiguration(Zz)&&(this._useAltAsMultipleSelectionModifier=pV(a));let t={};if(e.affectsConfiguration(eV)&&void 0===this.horizontalScrolling){const e=Boolean(a.getValue(eV));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(sV)){const e=Boolean(a.getValue(sV));t={...t,scrollByPage:e}}if(e.affectsConfiguration(lV)){const e=Boolean(a.getValue(lV));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(hV)){const e=a.getValue(hV);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(cV)){const e=a.getValue(cV);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new wV(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?lO(e):aO)}};_V=Nz([Iz(5,mM.fN),Iz(6,Az),Iz(7,JT.pG),Iz(8,eM._Y)],_V);let vV=class extends QF{constructor(e,t,i,n,s,r,o,a,l){const h="undefined"!==typeof s.horizontalScrolling?s.horizontalScrolling:Boolean(a.getValue(eV)),[c,d]=l.invokeFunction(mV,s);super(e,t,i,n,{keyboardSupport:!1,...c,horizontalScrolling:h}),this.disposables=new Mx.Cm,this.disposables.add(d),this.contextKeyService=Xz(r,this),this.disposables.add(Yz(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=Fz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport);Wz.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this._useAltAsMultipleSelectionModifier=pV(a),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(a.onDidChangeConfiguration((e=>{e.affectsConfiguration(Zz)&&(this._useAltAsMultipleSelectionModifier=pV(a));let t={};if(e.affectsConfiguration(eV)&&void 0===this.horizontalScrolling){const e=Boolean(a.getValue(eV));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(sV)){const e=Boolean(a.getValue(sV));t={...t,scrollByPage:e}}if(e.affectsConfiguration(lV)){const e=Boolean(a.getValue(lV));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(hV)){const e=a.getValue(hV);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(cV)){const e=a.getValue(cV);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new wV(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?lO(e):aO)}dispose(){this.disposables.dispose(),super.dispose()}};vV=Nz([Iz(5,mM.fN),Iz(6,Az),Iz(7,JT.pG),Iz(8,eM._Y)],vV);let bV=class extends mB{constructor(e,t,i,n,s,r,o,a,l,h){const c="undefined"!==typeof r.horizontalScrolling?r.horizontalScrolling:Boolean(l.getValue(eV)),[d,u]=h.invokeFunction(mV,r);super(e,t,i,n,s,{keyboardSupport:!1,...d,horizontalScrolling:c}),this.disposables.add(u),this.contextKeyService=Xz(o,this),this.disposables.add(Yz(this.contextKeyService,this)),this.listSupportsMultiSelect=Fz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==r.multipleSelectionSupport);Wz.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this.listHasSelectionOrFocus=Bz.bindTo(this.contextKeyService),this.listDoubleSelection=zz.bindTo(this.contextKeyService),this.listMultiSelection=Vz.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=pV(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(l.onDidChangeConfiguration((e=>{e.affectsConfiguration(Zz)&&(this._useAltAsMultipleSelectionModifier=pV(l));let t={};if(e.affectsConfiguration(eV)&&void 0===this.horizontalScrolling){const e=Boolean(l.getValue(eV));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(sV)){const e=Boolean(l.getValue(sV));t={...t,scrollByPage:e}}if(e.affectsConfiguration(lV)){const e=Boolean(l.getValue(lV));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(hV)){const e=l.getValue(hV);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(cV)){const e=l.getValue(cV);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new CV(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?lO(e):aO)}dispose(){this.disposables.dispose(),super.dispose()}};bV=Nz([Iz(6,mM.fN),Iz(7,Az),Iz(8,JT.pG),Iz(9,eM._Y)],bV);class yV extends Mx.jG{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new rk.vl),this.onDidOpen=this._onDidOpen.event,this._register(rk.Jh.filter(this.widget.onDidChangeSelection,(e=>uE(e.browserEvent)))((e=>this.onSelectionFromKeyboard(e)))),this._register(this.widget.onPointer((e=>this.onPointer(e.element,e.browserEvent)))),this._register(this.widget.onMouseDblClick((e=>this.onMouseDblClick(e.element,e.browserEvent)))),"boolean"!==typeof t?.openOnSingleClick&&t?.configurationService?(this.openOnSingleClick="doubleClick"!==t?.configurationService.getValue(Jz),this._register(t?.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(Jz)&&(this.openOnSingleClick="doubleClick"!==t?.configurationService.getValue(Jz))})))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(1!==e.elements.length)return;const t=e.browserEvent,i="boolean"!==typeof t.preserveFocus||t.preserveFocus,n="boolean"===typeof t.pinned?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick)return;if(2===t.detail)return;const i=1===t.button,n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,i,n,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,n,t)}_open(e,t,i,n,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:s})}}class wV extends yV{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class CV extends yV{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class SV extends yV{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function xV(e){let t=!1;return i=>{if(i.toKeyCodeChord().isModifierKey())return!1;if(t)return t=!1,!1;const n=e.softDispatch(i,i.target);return 1===n.kind?(t=!0,!1):(t=!1,0===n.kind)}}let kV=class extends lz{constructor(e,t,i,n,s,r,o,a,l){const{options:h,getTypeNavigationMode:c,disposable:d}=r.invokeFunction(IV,s);super(e,t,i,n,h),this.disposables.add(d),this.internals=new AV(this,s,c,s.overrideStyles,o,a,l),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};kV=Nz([Iz(5,eM._Y),Iz(6,mM.fN),Iz(7,Az),Iz(8,JT.pG)],kV);let LV=class extends uz{constructor(e,t,i,n,s,r,o,a,l){const{options:h,getTypeNavigationMode:c,disposable:d}=r.invokeFunction(IV,s);super(e,t,i,n,h),this.disposables.add(d),this.internals=new AV(this,s,c,s.overrideStyles,o,a,l),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};LV=Nz([Iz(5,eM._Y),Iz(6,mM.fN),Iz(7,Az),Iz(8,JT.pG)],LV);let EV=class extends Mz{constructor(e,t,i,n,s,r,o,a,l,h){const{options:c,getTypeNavigationMode:d,disposable:u}=o.invokeFunction(IV,r);super(e,t,i,n,s,c),this.disposables.add(u),this.internals=new AV(this,r,d,r.overrideStyles,a,l,h),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),void 0!==e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};EV=Nz([Iz(6,eM._Y),Iz(7,mM.fN),Iz(8,Az),Iz(9,JT.pG)],EV);let MV=class extends xz{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,o,a,l,h){const{options:c,getTypeNavigationMode:d,disposable:u}=o.invokeFunction(IV,r);super(e,t,i,n,s,c),this.disposables.add(u),this.internals=new AV(this,r,d,r.overrideStyles,a,l,h),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};MV=Nz([Iz(6,eM._Y),Iz(7,mM.fN),Iz(8,Az),Iz(9,JT.pG)],MV);let TV=class extends Ez{constructor(e,t,i,n,s,r,o,a,l,h,c){const{options:d,getTypeNavigationMode:u,disposable:g}=a.invokeFunction(IV,o);super(e,t,i,n,s,r,d),this.disposables.add(g),this.internals=new AV(this,o,u,o.overrideStyles,l,h,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};function DV(e){const t=e.getValue(tV);if("highlight"===t)return RB.Highlight;if("filter"===t)return RB.Filter;const i=e.getValue(nV);return"simple"===i||"highlight"===i?RB.Highlight:"filter"===i?RB.Filter:void 0}function NV(e){const t=e.getValue(rV);return"fuzzy"===t?PB.Fuzzy:"contiguous"===t?PB.Contiguous:void 0}function IV(e,t){const i=e.get(JT.pG),n=e.get(sD),s=e.get(mM.fN),r=e.get(eM._Y),o=void 0!==t.horizontalScrolling?t.horizontalScrolling:Boolean(i.getValue(eV)),[a,l]=r.invokeFunction(mV,t),h=t.paddingBottom,c=void 0!==t.renderIndentGuides?t.renderIndentGuides:i.getValue(aV);return{getTypeNavigationMode:()=>{const e=s.getContextKeyValue(qz);if("automatic"===e)return iP.Automatic;if("trigger"===e)return iP.Trigger;if(!1===s.getContextKeyValue(Qz))return iP.Trigger;const t=i.getValue(iV);return"automatic"===t?iP.Automatic:"trigger"===t?iP.Trigger:void 0},disposable:l,options:{keyboardSupport:!1,...a,indent:"number"===typeof i.getValue(oV)?i.getValue(oV):void 0,renderIndentGuides:c,smoothScrolling:Boolean(i.getValue(lV)),defaultFindMode:DV(i),defaultFindMatchType:NV(i),horizontalScrolling:o,scrollByPage:Boolean(i.getValue(sV)),paddingBottom:h,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:t.expandOnlyOnTwistieClick??"doubleClick"===i.getValue(dV),contextViewProvider:n,findWidgetStyles:rO,enableStickyScroll:Boolean(i.getValue(uV)),stickyScrollMaxItemCount:Number(i.getValue(gV))}}}TV=Nz([Iz(7,eM._Y),Iz(8,mM.fN),Iz(9,Az),Iz(10,JT.pG)],TV);let AV=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,r,o){this.tree=e,this.disposables=[],this.contextKeyService=Xz(s,e),this.disposables.push(Yz(this.contextKeyService,e)),this.listSupportsMultiSelect=Fz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==t.multipleSelectionSupport);Wz.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.listSupportFindWidget=Hz.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=Bz.bindTo(this.contextKeyService),this.hasDoubleSelection=zz.bindTo(this.contextKeyService),this.hasMultiSelection=Vz.bindTo(this.contextKeyService),this.treeElementCanCollapse=Uz.bindTo(this.contextKeyService),this.treeElementHasParent=jz.bindTo(this.contextKeyService),this.treeElementCanExpand=Gz.bindTo(this.contextKeyService),this.treeElementHasChild=Kz.bindTo(this.contextKeyService),this.treeFindOpen=$z.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Oz.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=pV(o),this.updateStyleOverrides(n);const a=()=>{const t=e.getFocus()[0];if(!t)return;const i=e.getNode(t);this.treeElementCanCollapse.set(i.collapsible&&!i.collapsed),this.treeElementHasParent.set(!!e.getParentElement(t)),this.treeElementCanExpand.set(i.collapsible&&i.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(t))},l=new Set;l.add(qz),l.add(Qz),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection((()=>{const t=e.getSelection(),i=e.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.hasSelectionOrFocus.set(t.length>0||i.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(2===t.length)}))})),e.onDidChangeFocus((()=>{const t=e.getSelection(),i=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||i.length>0),a()})),e.onDidChangeCollapseState(a),e.onDidChangeModel(a),e.onDidChangeFindOpenState((e=>this.treeFindOpen.set(e))),e.onDidChangeStickyScrollFocused((e=>this.treeStickyScrollFocused.set(e))),o.onDidChangeConfiguration((n=>{let s={};if(n.affectsConfiguration(Zz)&&(this._useAltAsMultipleSelectionModifier=pV(o)),n.affectsConfiguration(oV)){const e=o.getValue(oV);s={...s,indent:e}}if(n.affectsConfiguration(aV)&&void 0===t.renderIndentGuides){const e=o.getValue(aV);s={...s,renderIndentGuides:e}}if(n.affectsConfiguration(lV)){const e=Boolean(o.getValue(lV));s={...s,smoothScrolling:e}}if(n.affectsConfiguration(tV)||n.affectsConfiguration(nV)){const e=DV(o);s={...s,defaultFindMode:e}}if(n.affectsConfiguration(iV)||n.affectsConfiguration(nV)){const e=i();s={...s,typeNavigationMode:e}}if(n.affectsConfiguration(rV)){const e=NV(o);s={...s,defaultFindMatchType:e}}if(n.affectsConfiguration(eV)&&void 0===t.horizontalScrolling){const e=Boolean(o.getValue(eV));s={...s,horizontalScrolling:e}}if(n.affectsConfiguration(sV)){const e=Boolean(o.getValue(sV));s={...s,scrollByPage:e}}if(n.affectsConfiguration(dV)&&void 0===t.expandOnlyOnTwistieClick&&(s={...s,expandOnlyOnTwistieClick:"doubleClick"===o.getValue(dV)}),n.affectsConfiguration(uV)){const e=o.getValue(uV);s={...s,enableStickyScroll:e}}if(n.affectsConfiguration(gV)){const e=Math.max(1,o.getValue(gV));s={...s,stickyScrollMaxItemCount:e}}if(n.affectsConfiguration(hV)){const e=o.getValue(hV);s={...s,mouseWheelScrollSensitivity:e}}if(n.affectsConfiguration(cV)){const e=o.getValue(cV);s={...s,fastScrollSensitivity:e}}Object.keys(s).length>0&&e.updateOptions(s)})),this.contextKeyService.onDidChangeContext((t=>{t.affectsSome(l)&&e.updateOptions({typeNavigationMode:i()})}))),this.navigator=new SV(e,{configurationService:o,...t}),this.disposables.push(this.navigator)}updateOptions(e){void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?lO(e):aO)}dispose(){this.disposables=(0,Mx.AS)(this.disposables)}};AV=Nz([Iz(4,mM.fN),Iz(5,Az),Iz(6,JT.pG)],AV);_M.O.as(DA.Fd.Configuration).registerConfiguration({id:"workbench",order:7,title:(0,WS.kg)("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Zz]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[(0,WS.kg)("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),(0,WS.kg)("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:(0,WS.kg)({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Jz]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,WS.kg)({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[eV]:{type:"boolean",default:!1,description:(0,WS.kg)("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[sV]:{type:"boolean",default:!1,description:(0,WS.kg)("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[oV]:{type:"number",default:8,minimum:4,maximum:40,description:(0,WS.kg)("tree indent setting","Controls tree indentation in pixels.")},[aV]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:(0,WS.kg)("render tree indent guides","Controls whether the tree should render indent guides.")},[lV]:{type:"boolean",default:!1,description:(0,WS.kg)("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[hV]:{type:"number",default:1,markdownDescription:(0,WS.kg)("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[cV]:{type:"number",default:5,markdownDescription:(0,WS.kg)("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[tV]:{type:"string",enum:["highlight","filter"],enumDescriptions:[(0,WS.kg)("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),(0,WS.kg)("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:(0,WS.kg)("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[nV]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[(0,WS.kg)("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),(0,WS.kg)("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),(0,WS.kg)("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:(0,WS.kg)("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:(0,WS.kg)("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")},[rV]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[(0,WS.kg)("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),(0,WS.kg)("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:(0,WS.kg)("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[dV]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,WS.kg)("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[uV]:{type:"boolean",default:!0,description:(0,WS.kg)("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[gV]:{type:"number",minimum:1,default:7,markdownDescription:(0,WS.kg)("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[iV]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:(0,WS.kg)("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class RV extends Mx.jG{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=t?.supportIcons??!1,this.domNode=vE(e,xE("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e||(e=""),(arguments.length>3?arguments[3]:void 0)&&(e=RV.escapeNewLines(e,t)),this.didEverRender&&this.text===e&&this.title===i&&FS.aI(this.highlights,t)||(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const n=this.text.substring(t,i.start);this.supportIcons?e.push(...KD(n)):e.push(n),t=i.start}const n=this.text.substring(t,i.end),s=xE("span.highlight",void 0,...this.supportIcons?KD(n):[n]);i.extraClasses&&s.classList.add(...i.extraClasses),e.push(s),t=i.end}if(t<this.text.length){const i=this.text.substring(t);this.supportIcons?e.push(...KD(i)):e.push(i)}if(yE(this.domNode,...e),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(this.customHover||""===this.title)this.customHover&&this.customHover.update(this.title);else{const e=this.options?.hoverDelegate??OR("mouse");this.customHover=this._register(zR().setupManagedHover(e,this.domNode,this.title))}this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,((e,s)=>{n="\r\n"===e?-1:0,s+=i;for(const i of t)i.end<=s||(i.start>=s&&(i.start+=n),i.end>=s&&(i.end+=n));return i+=n,"\u23ce"}))}}class PV{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||(0,FS.aI)(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class OV extends Mx.jG{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new PV(vE(e,xE(".monaco-icon-label")))),this.labelContainer=vE(this.domNode.element,xE(".monaco-icon-label-container")),this.nameContainer=vE(this.labelContainer,xE("span.monaco-icon-name-container")),this.nameNode=t?.supportHighlights||t?.supportIcons?this._register(new BV(this.nameContainer,!!t.supportIcons)):new FV(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??OR("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const n=["monaco-icon-label"],s=["monaco-icon-label-container"];let r="";i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough"),i.disabledCommand&&s.push("disabled"),i.title&&("string"===typeof i.title?r+=i.title:r+=e));const o=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i?.iconPath){let e;o&&hE(o)?e=o:(e=xE(".monaco-icon-label-iconpath"),this.domNode.element.prepend(e)),e.style.backgroundImage=TE(i?.iconPath)}else o&&o.remove();if(this.domNode.classNames=n,this.domNode.element.setAttribute("aria-label",r),this.labelContainer.classList.value="",this.labelContainer.classList.add(...s),this.setupHover(i?.descriptionTitle?this.labelContainer:this.element,i?.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const e=this.getOrCreateDescriptionNode();e instanceof RV?(e.set(t||"",i?i.descriptionMatches:void 0,void 0,i?.labelEscapeNewLines),this.setupHover(e.element,i?.descriptionTitle)):(e.textContent=t&&i?.labelEscapeNewLines?RV.escapeNewLines(t,[]):t||"",this.setupHover(e.element,i?.descriptionTitle||""),e.empty=!t)}if(i?.suffix||this.suffixNode){this.getOrCreateSuffixNode().textContent=i?.suffix??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),t)if(this.hoverDelegate.showNativeHover){function n(e,t){(0,gM.Kg)(t)?e.title=PN(t):t?.markdownNotSupportedFallback?e.title=t.markdownNotSupportedFallback:e.removeAttribute("title")}n(e,t)}else{const s=zR().setupManagedHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}else e.removeAttribute("title")}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const i=this._register(new PV((e=this.nameContainer,t=xE("span.monaco-icon-suffix-container"),e.after(t),t)));this.suffixNode=this._register(new PV(vE(i.element,xE("span.label-suffix"))))}var e,t;return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const e=this._register(new PV(vE(this.labelContainer,xE("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new RV(vE(e.element,xE("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new PV(vE(e.element,xE("span.label-description"))))}return this.descriptionNode}}class FV{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!(0,FS.aI)(this.options,t))if(this.label=e,this.options=t,"string"===typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=vE(this.container,xE("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],s=t?.domId&&`${t?.domId}_${i}`;vE(this.container,xE("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&vE(this.container,xE("span.label-separator",void 0,t?.separator||"/"))}}}}class BV extends Mx.jG{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!(0,FS.aI)(this.options,t))if(this.label=e,this.options=t,"string"===typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new RV(vE(this.container,xE("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=t?.separator||"/",n=function(e,t,i){if(!i)return;let n=0;return e.map((e=>{const s={start:n,end:n+e.length},r=i.map((e=>lA.intersect(s,e))).filter((e=>!lA.isEmpty(e))).map((e=>{let{start:t,end:i}=e;return{start:t-n,end:i-n}}));return n=s.end+t.length,r}))}(e,i,t?.matches);for(let s=0;s<e.length;s++){const r=e[s],o=n?n[s]:void 0,a=xE("a.label-name",{id:t?.domId&&`${t?.domId}_${s}`,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});this._register(new RV(vE(this.container,a),{supportIcons:this.supportIcons})).set(r,o,void 0,t?.labelEscapeNewLines),s<e.length-1&&vE(a,xE("span.label-separator",void 0,i))}}}}const zV=xE;class VV extends Mx.jG{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const n=this.options.keybindingLabelForeground;this.domNode=vE(e,zV(".monaco-keybinding")),n&&(this.domNode.style.color=n),this.hover=this._register(zR().setupManagedHover(OR("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&VV.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)vE(this.domNode,zV("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){kL(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const n=tR.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,Boolean(i?.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,Boolean(i?.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,Boolean(i?.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,Boolean(i?.metaKey),n.separator);const s=t.keyLabel;s&&this.renderKey(e,s,Boolean(i?.keyCode),"")}renderKey(e,t,i,n){vE(e,this.createKeyElement(t,i?".highlight":"")),n&&vE(e,zV("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){vE(e,this.createKeyElement((0,WS.kg)("unbound","Unbound")))}createKeyElement(e){const t=zV("span.monaco-keybinding-key"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),void 0,e);return this.keyElements.add(t),this.options.keybindingLabelBackground&&(t.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(t.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(t.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),t}static areSame(e,t){return e===t||!e&&!t||!!e&&!!t&&(0,FS.aI)(e.firstPart,t.firstPart)&&(0,FS.aI)(e.chordPart,t.chordPart)}}const WV=new KN.d((()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}));new KN.d((()=>({collator:new Intl.Collator(void 0,{numeric:!0})}))),new KN.d((()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})})));function HV(e,t,i){const n=e.toLowerCase(),s=t.toLowerCase(),r=function(e,t,i){const n=e.toLowerCase(),s=t.toLowerCase(),r=n.startsWith(i),o=s.startsWith(i);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}(e,t,i);if(r)return r;const o=n.endsWith(i);if(o!==s.endsWith(i))return o?-1:1;const a=function(e,t){const i=e||"",n=t||"",s=WV.value.collator.compare(i,n);return WV.value.collatorIsNumeric&&0===s&&i!==n?i<n?-1:1:s}(n,s);return 0!==a?a:n.localeCompare(s)}var UV,jV=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},GV=function(e,t){return function(i,n){t(i,n,e)}};const KV=xE;class $V{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new KN.d((()=>{const e=i.label??"",t=FN(e).text.trim(),n=i.ariaLabel||[e,this.saneDescription,this.saneDetail].map((e=>{return(t=e)?t.replace(/\$\((.*?)\)/g,((e,t)=>` ${t} `)).trim():"";var t})).filter((e=>!!e)).join(", ");return{saneLabel:e,saneSortLabel:t,saneAriaLabel:n}})),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class qV extends $V{constructor(e,t,i,n,s,r){super(e,t,s),this.fireButtonTriggered=i,this._onChecked=n,this.item=s,this._separator=r,this._checked=!1,this.onChecked=t?rk.Jh.map(rk.Jh.filter(this._onChecked.event,(e=>e.element===this)),(e=>e.checked)):rk.Jh.None,this._saneDetail=s.detail,this._labelHighlights=s.highlights?.label,this._descriptionHighlights=s.highlights?.description,this._detailHighlights=s.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var QV;!function(e){e[e.NONE=0]="NONE",e[e.MOUSE_HOVER=1]="MOUSE_HOVER",e[e.ACTIVE_ITEM=2]="ACTIVE_ITEM"}(QV||(QV={}));class XV extends $V{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=QV.NONE}}class YV{getHeight(e){return e instanceof XV?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof qV?eW.ID:tW.ID}}class ZV{getWidgetAriaLabel(){return(0,WS.kg)("quickInput","Quick Input")}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox&&e instanceof qV)return{get value(){return e.checked},onDidChange:t=>e.onChecked((()=>t()))}}}class JV{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new Mx.Cm,t.toDisposeTemplate=new Mx.Cm,t.entry=vE(e,KV(".quick-input-list-entry"));const i=vE(t.entry,KV("label.quick-input-list-label"));t.toDisposeTemplate.add(TL(i,gE.CLICK,(e=>{t.checkbox.offsetParent||e.preventDefault()}))),t.checkbox=vE(i,KV("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const n=vE(i,KV(".quick-input-list-rows")),s=vE(n,KV(".quick-input-list-row")),r=vE(n,KV(".quick-input-list-row"));t.label=new OV(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=bE(t.label.element,KV(".quick-input-list-icon"));const o=vE(s,KV(".quick-input-list-entry-keybinding"));t.keybinding=new VV(o,BS.OS),t.toDisposeTemplate.add(t.keybinding);const a=vE(r,KV(".quick-input-list-label-meta"));return t.detail=new OV(a,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=vE(t.entry,KV(".quick-input-list-separator")),t.actionBar=new vO(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}let eW=class extends JV{static#e=(()=>UV=this)();static#t=(()=>this.ID="quickpickitem")();constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return UV.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(TL(t.checkbox,gE.CHANGE,(e=>{t.element.checked=t.checkbox.checked}))),t}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0;const s=n.item;i.checkbox.checked=n.checked,i.toDisposeElement.add(n.onChecked((e=>i.checkbox.checked=e))),i.checkbox.disabled=n.checkboxDisabled;const{labelHighlights:r,descriptionHighlights:o,detailHighlights:a}=n;if(s.iconPath){const e=(0,JP.HD)(this.themeService.getColorTheme().type)?s.iconPath.dark:s.iconPath.light??s.iconPath.dark,t=Dx.r.revive(e);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=TE(t)}else i.icon.style.backgroundImage="",i.icon.className=s.iconClass?`quick-input-list-icon ${s.iconClass}`:"";let l;!n.saneTooltip&&n.saneDescription&&(l={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const h={matches:r||[],descriptionTitle:l,descriptionMatches:o||[],labelEscapeNewLines:!0};if(h.extraClasses=s.iconClasses,h.italic=s.italic,h.strikethrough=s.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,h),i.keybinding.set(s.keybinding),n.saneDetail){let e;n.saneTooltip||(e={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:a,title:e,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";n.separator?.label?(i.separator.textContent=n.separator.label,i.separator.style.display="",this.addItemWithSeparator(n)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!n.separator);const c=s.buttons;c&&c.length?(i.actionBar.push(c.map(((e,t)=>aF(e,`id-${t}`,(()=>n.fireButtonTriggered({button:e,item:n.item}))))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}};eW=UV=jV([GV(1,bT.Gy)],eW);class tW extends JV{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}static#e=(()=>this.ID="quickpickseparator")();get templateId(){return tW.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0,n.element.classList.toggle("focus-inside",!!n.focusInsideSeparator);const s=n.separator,{labelHighlights:r,descriptionHighlights:o,detailHighlights:a}=n;let l;i.icon.style.backgroundImage="",i.icon.className="",!n.saneTooltip&&n.saneDescription&&(l={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const h={matches:r||[],descriptionTitle:l,descriptionMatches:o||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,h),n.saneDetail){let e;n.saneTooltip||(e={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:a,title:e,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const c=s.buttons;c&&c.length?(i.actionBar.push(c.map(((e,t)=>aF(e,`id-${t}`,(()=>n.fireSeparatorButtonTriggered({button:e,separator:n.separator}))))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(n)}disposeElement(e,t,i){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}}let iW=class extends Mx.jG{constructor(e,t,i,n,s,r){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=r,this._onKeyDown=new rk.vl,this._onLeave=new rk.vl,this.onLeave=this._onLeave.event,this._visibleCountObservable=(0,sP.FY)("VisibleCount",0),this.onChangedVisibleCount=rk.Jh.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=(0,sP.FY)("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=rk.Jh.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=(0,sP.FY)("CheckedCount",0),this.onChangedCheckedCount=rk.Jh.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=(0,sP.Zh)({equalsFn:OS.aI},new Array),this.onChangedCheckedElements=rk.Jh.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new rk.vl,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new rk.vl,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new rk.vl,this._elementCheckedEventBufferer=new rk.at,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Mx.Cm),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=vE(this.parent,KV(".quick-input-list")),this._separatorRenderer=new tW(t),this._itemRenderer=s.createInstance(eW,t),this._tree=this._register(s.createInstance(kV,"QuickInput",this._container,new YV,[this._itemRenderer,this._separatorRenderer],{filter:{filter:e=>e.hidden?0:e instanceof XV?2:1},sorter:{compare:(e,t)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;return function(e,t,i){const n=e.labelHighlights||[],s=t.labelHighlights||[];if(n.length&&!s.length)return-1;if(!n.length&&s.length)return 1;if(0===n.length&&0===s.length)return 0;return HV(e.saneSortLabel,t.saneSortLabel,i)}(e,t,this._lastQueryString.toLowerCase())}},accessibilityProvider:new ZV,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:bB.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=n,this._registerListeners()}get onDidChangeFocus(){return rk.Jh.map(this._tree.onDidChangeFocus,(e=>e.elements.filter((e=>e instanceof qV)).map((e=>e.item))),this._store)}get onDidChangeSelection(){return rk.Jh.map(this._tree.onDidChangeSelection,(e=>({items:e.elements.filter((e=>e instanceof qV)).map((e=>e.item)),event:e.browserEvent})),this._store)}get displayed(){return"none"!==this._container.style.display}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown((e=>{const t=new Zx(e);if(10===t.keyCode)this.toggleCheckbox();this._onKeyDown.fire(t)})))}_registerOnContainerClick(){this._register(EL(this._container,gE.CLICK,(e=>{(e.x||e.y)&&this._onLeave.fire()})))}_registerOnMouseMiddleClick(){this._register(EL(this._container,gE.AUXCLICK,(e=>{1===e.button&&this._onLeave.fire()})))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel((()=>{const e=this._itemElements.filter((e=>!e.hidden)).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()})))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,((e,t)=>t))((e=>this._updateCheckedObservables())))}_registerOnContextMenu(){this._register(this._tree.onContextMenu((e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))})))}_registerHoverListeners(){const e=this._register(new sk.Th(this.hoverDelegate.delay));this._register(this._tree.onMouseOver((async t=>{if(cE(t.browserEvent.target))e.cancel();else if(cE(t.browserEvent.relatedTarget)||!GL(t.browserEvent.relatedTarget,t.element?.element))try{await e.trigger((async()=>{t.element instanceof qV&&this.showHover(t.element)}))}catch(t){if(!(0,Ux.MB)(t))throw t}}))),this._register(this._tree.onMouseOut((t=>{GL(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()})))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus((e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const e=i===t;!!(i.focusInsideSeparator&QV.ACTIVE_ITEM)!==e&&(e?i.focusInsideSeparator|=QV.ACTIVE_ITEM:i.focusInsideSeparator&=~QV.ACTIVE_ITEM,this._tree.rerender(i))}}))),this._register(this._tree.onMouseOver((e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&QV.MOUSE_HOVER)||(i.focusInsideSeparator|=QV.MOUSE_HOVER,this._tree.rerender(i))}}))),this._register(this._tree.onMouseOut((e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&QV.MOUSE_HOVER)&&(i.focusInsideSeparator&=~QV.MOUSE_HOVER,this._tree.rerender(i))}})))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection((e=>{const t=e.elements.filter((e=>e instanceof qV));t.length!==e.elements.length&&(1===e.elements.length&&e.elements[0]instanceof XV&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))})))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents((()=>{this._itemElements.forEach((t=>{t.hidden||t.checkboxDisabled||(t.checked=e)}))}))}setElements(e){let t;this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes"),this._itemElements=new Array,this._elementTree=e.reduce(((i,n,s)=>{let r;if("separator"===n.type){if(!n.buttons)return i;t=new XV(s,(e=>this._onSeparatorButtonTriggered.fire(e)),n),r=t}else{const o=s>0?e[s-1]:void 0;let a;o&&"separator"===o.type&&!o.buttons&&(t=void 0,a=o);const l=new qV(s,this._hasCheckboxes,(e=>this._onButtonTriggered.fire(e)),this._elementChecked,n,a);if(this._itemElements.push(l),t)return t.children.push(l),i;r=l}return i.push(r),i}),new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout((()=>{const e=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),t=e?.parentNode;if(e&&t){const i=e.nextSibling;e.remove(),t.insertBefore(e,i)}}),0)}setFocusedElements(e){const t=e.map((e=>this._itemElements.find((t=>t.item===e)))).filter((e=>!!e)).filter((e=>!e.hidden));if(this._tree.setFocus(t),e.length>0){const e=this._tree.getFocus()[0];e&&this._tree.reveal(e)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map((e=>this._itemElements.find((t=>t.item===e)))).filter((e=>!!e));this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter((e=>e.checked)).map((e=>e.item))}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents((()=>{const t=new Set;for(const i of e)t.add(i);for(const e of this._itemElements)e.checked=t.has(e.item)}))}focus(e){if(this._itemElements.length)switch(e===QO.Second&&this._itemElements.length<2&&(e=QO.First),e){case QO.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,(e=>e.element instanceof qV));break;case QO.Second:{this._tree.scrollTop=0;let e=!1;this._tree.focusFirst(void 0,(t=>t.element instanceof qV&&(!!e||(e=!e,!1))));break}case QO.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,(e=>e.element instanceof qV));break;case QO.Next:{const e=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,(e=>e.element instanceof qV&&(this._tree.reveal(e.element),!0)));const t=this._tree.getFocus();e.length&&e[0]===t[0]&&e[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case QO.Previous:{const e=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,(e=>{if(!(e.element instanceof qV))return!1;const t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0}));const t=this._tree.getFocus();e.length&&e[0]===t[0]&&e[0]===this._itemElements[0]&&this._onLeave.fire();break}case QO.NextPage:this._tree.focusNextPage(void 0,(e=>e.element instanceof qV&&(this._tree.reveal(e.element),!0)));break;case QO.PreviousPage:this._tree.focusPreviousPage(void 0,(e=>{if(!(e.element instanceof qV))return!1;const t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0}));break;case QO.NextSeparator:{let e=!1;const t=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,(t=>{if(e)return!0;if(t.element instanceof XV)e=!0,this._separatorRenderer.isSeparatorVisible(t.element)?this._tree.reveal(t.element.children[0]):this._tree.reveal(t.element,0);else if(t.element instanceof qV){if(t.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(t.element)?this._tree.reveal(t.element):this._tree.reveal(t.element,0),!0;if(t.element===this._elementTree[0])return this._tree.reveal(t.element,0),!0}return!1}));t===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,(e=>e.element instanceof qV)));break}case QO.PreviousSeparator:{let e,t=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,(i=>{if(i.element instanceof XV)t?e||(this._separatorRenderer.isSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),e=i.element.children[0]):t=!0;else if(i.element instanceof qV&&!e)if(i.element.separator)this._itemRenderer.isItemWithSeparatorVisible(i.element)?this._tree.reveal(i.element):this._tree.reveal(i.element,0),e=i.element;else if(i.element===this._elementTree[0])return this._tree.reveal(i.element,0),!0;return!1})),e&&this._tree.setFocus([e]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?44*Math.floor(e/44)+6+"px":"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if((e=e.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let i;this._itemElements.forEach((n=>{let s;s="fuzzy"===this.matchOnLabelMode?this.matchOnLabel?BN(e,FN(n.saneLabel))??void 0:void 0:this.matchOnLabel?function(e,t){const{text:i,iconOffsets:n}=t;if(!n||0===n.length)return nW(e,i);const s=(0,Tx.NB)(i," "),r=i.length-s.length,o=nW(e,s);if(o)for(const a of o){const e=n[a.start+r]+r;a.start+=e,a.end+=e}return o}(t,FN(n.saneLabel))??void 0:void 0;const r=this.matchOnDescription?BN(e,FN(n.saneDescription||""))??void 0:void 0,o=this.matchOnDetail?BN(e,FN(n.saneDetail||""))??void 0:void 0;if(s||r||o?(n.labelHighlights=s,n.descriptionHighlights=r,n.detailHighlights=o,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!n.item||!n.item.alwaysShow),n.item?n.separator=void 0:n.separator&&(n.hidden=!0),!this.sortByLabel){const e=n.index&&this._inputElements[n.index-1]||void 0;"separator"!==e?.type||e.buttons||(i=e),i&&!n.hidden&&(n.separator=i,i=void 0)}}))}else this._itemElements.forEach((e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;const t=e.index&&this._inputElements[e.index-1];e.item&&(e.separator=t&&"separator"===t.type&&!t.buttons?t:void 0)}));return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents((()=>{const e=this._tree.getFocus().filter((e=>e instanceof qV)),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)}))}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!e?.saneTooltip||!(e instanceof qV))return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();this.showHover(e);const t=new Mx.Cm;t.add(this._tree.onDidChangeFocus((e=>{e.elements[0]instanceof qV&&this.showHover(e.elements[0])}))),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof XV?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map((e=>({element:e,collapsible:!1,collapsed:!1})))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n.hidden){if(!n.checked)return!1;t=!0}}return t}_updateCheckedObservables(){(0,sP.Rn)((e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter((e=>e.checked)).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)}))}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),e.element&&e.saneTooltip&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:e=>{this.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};function nW(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return-1!==i?[{start:i,end:i+e.length}]:null}jV([lD],iW.prototype,"onDidChangeFocus",null),jV([lD],iW.prototype,"onDidChangeSelection",null),iW=jV([GV(4,eM._Y),GV(5,GI)],iW);const sW={weight:200,when:mM.M$.and(mM.M$.equals(pF,"quickPick"),gF),metadata:{description:(0,WS.kg)("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function rW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bM.registerCommandAndKeybindingRule({...sW,...e,secondary:aW(e.primary,e.secondary??[],t)})}const oW=BS.zx?256:2048;function aW(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.withAltMod&&t.push(512+e),i.withCtrlMod&&(t.push(oW+e),i.withAltMod&&t.push(512+oW+e)),i.withCmdMod&&BS.zx&&(t.push(2048+e),i.withCtrlMod&&t.push(2304+e),i.withAltMod&&(t.push(2560+e),i.withCtrlMod&&t.push(2816+e))),t}function lW(e,t){return i=>{const n=i.get(YO).currentQuickInput;if(n)return t&&n.quickNavigate?n.focus(t):n.focus(e)}}rW({id:"quickInput.pageNext",primary:12,handler:lW(QO.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),rW({id:"quickInput.pagePrevious",primary:11,handler:lW(QO.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),rW({id:"quickInput.first",primary:oW+14,handler:lW(QO.First)},{withAltMod:!0,withCmdMod:!0}),rW({id:"quickInput.last",primary:oW+13,handler:lW(QO.Last)},{withAltMod:!0,withCmdMod:!0}),rW({id:"quickInput.next",primary:18,handler:lW(QO.Next)},{withCtrlMod:!0}),rW({id:"quickInput.previous",primary:16,handler:lW(QO.Previous)},{withCtrlMod:!0});const hW=(0,WS.kg)("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),cW=(0,WS.kg)("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");BS.zx?(rW({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:lW(QO.NextSeparator,QO.Next),metadata:{description:hW}}),rW({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:lW(QO.NextSeparator)},{withCtrlMod:!0}),rW({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:lW(QO.PreviousSeparator,QO.Previous),metadata:{description:cW}}),rW({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:lW(QO.PreviousSeparator)},{withCtrlMod:!0})):(rW({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:lW(QO.NextSeparator,QO.Next),metadata:{description:hW}}),rW({id:"quickInput.nextSeparator",primary:2578,handler:lW(QO.NextSeparator)}),rW({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:lW(QO.PreviousSeparator,QO.Previous),metadata:{description:cW}}),rW({id:"quickInput.previousSeparator",primary:2576,handler:lW(QO.PreviousSeparator)})),rW({id:"quickInput.acceptInBackground",when:mM.M$.and(sW.when,mM.M$.or(Dz.negate(),vF)),primary:17,weight:250,handler:e=>{const t=e.get(YO).currentQuickInput;t?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var dW,uW=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},gW=function(e,t){return function(i,n){t(i,n,e)}};const pW=xE;let fW=class extends Mx.jG{static#e=(()=>dW=this)();static#t=(()=>this.MAX_WIDTH=600)();get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,n){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=n,this.enabled=!0,this.onDidAcceptEmitter=this._register(new rk.vl),this.onDidCustomEmitter=this._register(new rk.vl),this.onDidTriggerButtonEmitter=this._register(new rk.vl),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new rk.vl),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new rk.vl),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=uF.bindTo(this.contextKeyService),this.quickInputTypeContext=fF.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=_F.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(rk.Jh.runAndSubscribe(CL,(e=>{let{window:t,disposables:i}=e;return this.registerKeyModsListeners(t,i)}),{window:Ex,disposables:this._store})),this._register(SL((e=>{this.ui&&fL(this.ui.container)===e&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))})))}registerKeyModsListeners(e,t){const i=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};for(const n of[gE.KEY_DOWN,gE.KEY_UP,gE.MOUSE_DOWN])t.add(EL(e,n,i,!0))}getUI(e){if(this.ui)return e&&fL(this._container)!==fL(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=vE(this._container,pW(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=iE(t),n=vE(t,pW(".quick-input-titlebar")),s=this._register(new vO(n,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");const r=vE(n,pW(".quick-input-title")),o=this._register(new vO(n,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-right-action-bar");const a=vE(t,pW(".quick-input-header")),l=vE(a,pW("input.quick-input-check-all"));l.type="checkbox",l.setAttribute("aria-label",(0,WS.kg)("quickInput.checkAll","Toggle all checkboxes")),this._register(TL(l,gE.CHANGE,(e=>{const t=l.checked;E.setAllVisibleChecked(t)}))),this._register(EL(l,gE.CLICK,(e=>{(e.x||e.y)&&u.setFocus()})));const h=vE(a,pW(".quick-input-description")),c=vE(a,pW(".quick-input-and-message")),d=vE(c,pW(".quick-input-filter")),u=this._register(new KF(d,this.styles.inputBox,this.styles.toggle));u.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=vE(d,pW(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new kF(g,{countFormat:(0,WS.kg)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),f=vE(d,pW(".quick-input-count"));f.setAttribute("aria-live","polite");const m=new kF(f,{countFormat:(0,WS.kg)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),_=this._register(new vO(a,{hoverDelegate:this.options.hoverDelegate}));_.domNode.classList.add("quick-input-inline-action-bar");const v=vE(a,pW(".quick-input-action")),b=this._register(new xF(v,this.styles.button));b.label=(0,WS.kg)("ok","OK"),this._register(b.onDidClick((e=>{this.onDidAcceptEmitter.fire()})));const y=vE(a,pW(".quick-input-action")),w=this._register(new xF(y,{...this.styles.button,supportIcons:!0}));w.label=(0,WS.kg)("custom","Custom"),this._register(w.onDidClick((e=>{this.onDidCustomEmitter.fire()})));const C=vE(c,pW(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new NF(t,this.styles.progressBar));S.getContainer().classList.add("quick-input-progress");const x=vE(t,pW(".quick-input-html-widget"));x.tabIndex=-1;const k=vE(t,pW(".quick-input-description")),L=this.idPrefix+"list",E=this._register(this.instantiationService.createInstance(iW,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,L));u.setAttribute("aria-controls",L),this._register(E.onDidChangeFocus((()=>{u.setAttribute("aria-activedescendant",E.getActiveDescendant()??"")}))),this._register(E.onChangedAllVisibleChecked((e=>{l.checked=e}))),this._register(E.onChangedVisibleCount((e=>{p.setCount(e)}))),this._register(E.onChangedCheckedCount((e=>{m.setCount(e)}))),this._register(E.onLeave((()=>{setTimeout((()=>{this.controller&&(u.setFocus(),this.controller instanceof wF&&this.controller.canSelectMany&&E.clearFocus())}),0)})));const M=_E(t);return this._register(M),this._register(EL(t,gE.FOCUS,(e=>{const t=this.getUI();if(GL(e.relatedTarget,t.inputContainer)){const e=t.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==e&&this.endOfQuickInputBoxContext.set(e)}GL(e.relatedTarget,t.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=hE(e.relatedTarget)?e.relatedTarget:void 0)}),!0)),this._register(M.onDidBlur((()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide($O.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0}))),this._register(u.onKeyDown((e=>{const t=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==t&&this.endOfQuickInputBoxContext.set(t)}))),this._register(EL(t,gE.FOCUS,(e=>{u.setFocus()}))),this._register(TL(t,gE.KEY_DOWN,(e=>{if(!GL(e.target,x))switch(e.keyCode){case 3:fE(e,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:fE(e,!0),this.hide($O.Gesture);break;case 2:if(!e.altKey&&!e.ctrlKey&&!e.metaKey){const i=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?i.push("input"):i.push("input[type=text]"),this.getUI().list.displayed&&i.push(".monaco-list"),this.getUI().message&&i.push(".quick-input-message a"),this.getUI().widget){if(GL(e.target,this.getUI().widget))break;i.push(".quick-input-html-widget")}const n=t.querySelectorAll(i.join(", "));e.shiftKey&&e.target===n[0]?(fE(e,!0),E.clearFocus()):!e.shiftKey&&GL(e.target,n[n.length-1])&&(fE(e,!0),n[0].focus())}break;case 10:e.ctrlKey&&(fE(e,!0),this.getUI().list.toggleHover())}}))),this.ui={container:t,styleSheet:i,leftActionBar:s,titleBar:n,title:r,description1:k,description2:h,widget:x,rightActionBar:o,inlineActionBar:_,checkAll:l,inputContainer:c,filterContainer:d,inputBox:u,visibleCountContainer:g,visibleCount:p,countContainer:f,count:m,okContainer:v,ok:b,message:C,customButtonContainer:y,customButton:w,list:E,progressBar:S,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e),linkOpenerDelegate:e=>this.options.linkOpenerDelegate(e)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,vE(this._container,this.ui.container))}pick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_A.XO.None;return new Promise(((n,s)=>{let r=e=>{r=n,t.onKeyMods?.(o.keyMods),n(e)};if(i.isCancellationRequested)return void r(void 0);const o=this.createQuickPick({useSeparators:!0});let a;const l=[o,o.onDidAccept((()=>{if(o.canSelectMany)r(o.selectedItems.slice()),o.hide();else{const e=o.activeItems[0];e&&(r(e),o.hide())}})),o.onDidChangeActive((e=>{const i=e[0];i&&t.onDidFocus&&t.onDidFocus(i)})),o.onDidChangeSelection((e=>{if(!o.canSelectMany){const t=e[0];t&&(r(t),o.hide())}})),o.onDidTriggerItemButton((e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...e,removeItem:()=>{const t=o.items.indexOf(e.item);if(-1!==t){const e=o.items.slice(),i=e.splice(t,1),n=o.activeItems.filter((e=>e!==i[0])),s=o.keepScrollPosition;o.keepScrollPosition=!0,o.items=e,n&&(o.activeItems=n),o.keepScrollPosition=s}}}))),o.onDidTriggerSeparatorButton((e=>t.onDidTriggerSeparatorButton?.(e))),o.onDidChangeValue((e=>{!a||e||1===o.activeItems.length&&o.activeItems[0]===a||(o.activeItems=[a])})),i.onCancellationRequested((()=>{o.hide()})),o.onDidHide((()=>{(0,Mx.AS)(l),r(void 0)}))];o.title=t.title,t.value&&(o.value=t.value),o.canSelectMany=!!t.canPickMany,o.placeholder=t.placeHolder,o.ignoreFocusOut=!!t.ignoreFocusLost,o.matchOnDescription=!!t.matchOnDescription,o.matchOnDetail=!!t.matchOnDetail,o.matchOnLabel=void 0===t.matchOnLabel||t.matchOnLabel,o.quickNavigate=t.quickNavigate,o.hideInput=!!t.hideInput,o.contextKey=t.contextKey,o.busy=!0,Promise.all([e,t.activeItem]).then((e=>{let[t,i]=e;a=i,o.busy=!1,o.items=t,o.canSelectMany&&(o.selectedItems=t.filter((e=>"separator"!==e.type&&e.picked))),a&&(o.activeItems=[a])})),o.show(),Promise.resolve(e).then(void 0,(e=>{s(e),o.hide()}))}))}createQuickPick(){const e=this.getUI(!0);return new wF(e)}createInputBox(){const e=this.getUI(!0);return new CF(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",yE(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(IT.A.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),yE(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const n=this.options.backKeybindingLabel();bF.tooltip=n?(0,WS.kg)("quickInput.backWithKeybinding","Back ({0})",n):(0,WS.kg)("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&"none"!==this.ui.container.style.display}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){const t=this.controller;if(!t)return;t.willHide(e);const i=this.ui?.container,n=i&&!ZL(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!n){let e=this.previousFocusElement;for(;e&&!e.offsetParent;)e=e.parentElement??void 0;e?.offsetParent?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(.62*this.dimension.width,dW.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const o=r.join("\n");o!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=o)}}};fW=dW=uW([gW(1,ET),gW(2,eM._Y),gW(3,mM.fN)],fW);var mW=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},_W=function(e,t){return function(i,n){t(i,n,e)}};let vW=class extends bT.lR{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(eF))),this._quickAccess}constructor(e,t,i,n,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=s,this._onShow=this._register(new rk.vl),this._onHide=this._register(new rk.vl),this.contexts=new Map}createController(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layoutService,t=arguments.length>1?arguments[1]:void 0;const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:e=>this.setContextKey(e),linkOpenerDelegate:e=>{this.instantiationService.invokeFunction((t=>{t.get(FD).open(e,{allowCommands:!0,fromUserGesture:!0})}))},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(SF))},n=this._register(this.instantiationService.createInstance(fW,{...i,...t}));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer((t=>{fL(e.activeContainer)===fL(n.container)&&n.layout(t,e.activeContainerOffset.quickPickTop)}))),this._register(e.onDidChangeActiveContainer((()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)}))),this._register(n.onShow((()=>{this.resetContextKeys(),this._onShow.fire()}))),this._register(n.onHide((()=>{this.resetContextKeys(),this._onHide.fire()}))),n}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new mM.N1(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),t&&t.get()||(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach((e=>{e.get()&&e.reset()}))}pick(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_A.XO.None;return this.controller.pick(e,t,i)}createQuickPick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useSeparators:!1};return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:(0,ZT.GuP)(ZT.ELA),quickInputForeground:(0,ZT.GuP)(ZT.HJZ),quickInputTitleBackground:(0,ZT.GuP)(ZT.er1),widgetBorder:(0,ZT.GuP)(ZT.DSL),widgetShadow:(0,ZT.GuP)(ZT.f9l)},inputBox:sO,toggle:nO,countBadge:oO,button:tO,progressBar:iO,keybindingLabel:eO,list:lO({listBackground:ZT.ELA,listFocusBackground:ZT.AlL,listFocusForeground:ZT.nH,listInactiveFocusForeground:ZT.nH,listInactiveSelectionIconForeground:ZT.c7i,listInactiveFocusBackground:ZT.AlL,listFocusOutline:ZT.buw,listInactiveFocusOutline:ZT.buw}),pickerGroup:{pickerGroupBorder:(0,ZT.GuP)(ZT.iwL),pickerGroupForeground:(0,ZT.GuP)(ZT.NBf)}}}};vW=mW([_W(0,eM._Y),_W(1,mM.fN),_W(2,bT.Gy),_W(3,ET),_W(4,JT.pG)],vW);var bW=i(954),yW=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},wW=function(e,t){return function(i,n){t(i,n,e)}};let CW=class extends vW{constructor(e,t,i,n,s,r){super(t,i,n,new NT(e.getContainerDomNode(),s),r),this.host=void 0;const o=xW.get(e);if(o){const t=o.widget;this.host={_serviceBrand:void 0,get mainContainer(){return t.getDomNode()},getContainer:()=>t.getDomNode(),whenContainerStylesLoaded(){},get containers(){return[t.getDomNode()]},get activeContainer(){return t.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return rk.Jh.map(e.onDidLayoutChange,(e=>({container:t.getDomNode(),dimension:e})))},get onDidChangeActiveContainer(){return rk.Jh.None},get onDidAddContainer(){return rk.Jh.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};CW=yW([wW(1,eM._Y),wW(2,mM.fN),wW(3,bT.Gy),wW(4,tM),wW(5,JT.pG)],CW);let SW=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(CW,e);this.mapEditorToService.set(e,t),(0,bW.P)(e.onDidDispose)((()=>{i.dispose(),this.mapEditorToService.delete(e)}))}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_A.XO.None;return this.activeService.pick(e,t,i)}createQuickPick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useSeparators:!1};return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};SW=yW([wW(0,eM._Y),wW(1,tM)],SW);class xW{static#e=(()=>this.ID="editor.controller.quickInput")();static get(e){return e.getContribution(xW.ID)}constructor(e){this.editor=e,this.widget=new kW(this.editor)}dispose(){this.widget.dispose()}}class kW{static#e=(()=>this.ID="editor.contrib.quickInputWidget")();constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return kW.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}zM(xW.ID,xW,4);var LW=i(5477);class EW{constructor(e,t,i,n,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=s}}const MW=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class TW{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(null===e)return 0;const t=e.match(MW);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=WR.Q1.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class DW{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(function(e){if(!e||!Array.isArray(e))return[];const t=[];let i=0;for(let n=0,s=e.length;n<s;n++){const s=e[n];let r=-1;if("string"===typeof s.fontStyle){r=0;const e=s.fontStyle.split(" ");for(let t=0,i=e.length;t<i;t++)switch(e[t]){case"italic":r|=1;break;case"bold":r|=2;break;case"underline":r|=4;break;case"strikethrough":r|=8}}let o=null;"string"===typeof s.foreground&&(o=s.foreground);let a=null;"string"===typeof s.background&&(a=s.background),t[i++]=new EW(s.token||"",n,r,o,a)}return t}(e),t)}static createFromParsedTokenTheme(e,t){return function(e,t){e.sort(((e,t)=>{const i=function(e,t){return e<t?-1:e>t?1:0}(e.token,t.token);return 0!==i?i:e.index-t.index}));let i=0,n="000000",s="ffffff";for(;e.length>=1&&""===e[0].token;){const t=e.shift();-1!==t.fontStyle&&(i=t.fontStyle),null!==t.foreground&&(n=t.foreground),null!==t.background&&(s=t.background)}const r=new TW;for(const c of t)r.getId(c);const o=r.getId(n),a=r.getId(s),l=new IW(i,o,a),h=new AW(l);for(let c=0,d=e.length;c<d;c++){const t=e[c];h.insert(t.token,t.fontStyle,r.getId(t.foreground),r.getId(t.background))}return new DW(r,h)}(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if("undefined"===typeof i){const e=this._match(t),n=function(e){const t=e.match(NW);if(!t)return 0;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}(t);i=(e.metadata|n<<8)>>>0,this._cache.set(t,i)}return(i|e)>>>0}}const NW=/\b(comment|string|regex|regexp)\b/;class IW{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new IW(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){-1!==e&&(this._fontStyle=e),0!==t&&(this._foreground=t),0!==i&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class AW{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(""===e)return this._mainRule;const t=e.indexOf(".");let i,n;-1===t?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));const s=this._children.get(i);return"undefined"!==typeof s?s.match(n):this._mainRule}insert(e,t,i,n){if(""===e)return void this._mainRule.acceptOverwrite(t,i,n);const s=e.indexOf(".");let r,o;-1===s?(r=e,o=""):(r=e.substring(0,s),o=e.substring(s+1));let a=this._children.get(r);"undefined"===typeof a&&(a=new AW(this._mainRule.clone()),this._children.set(r,a)),a.insert(o,t,i,n)}}var RW=i(4960);const PW={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[ZT.YtV]:"#FFFFFE",[ZT.By2]:"#000000",[ZT.tan]:"#E5EBF1",[RW.vV]:"#D3D3D3",[RW.H0]:"#939393",[ZT.QwA]:"#ADD6FF4D"}},OW={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[ZT.YtV]:"#1E1E1E",[ZT.By2]:"#D4D4D4",[ZT.tan]:"#3A3D41",[RW.vV]:"#404040",[RW.H0]:"#707070",[ZT.QwA]:"#ADD6FF26"}},FW={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[ZT.YtV]:"#000000",[ZT.By2]:"#FFFFFF",[RW.vV]:"#FFFFFF",[RW.H0]:"#FFFFFF"}},BW={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[ZT.YtV]:"#FFFFFF",[ZT.By2]:"#292929",[RW.vV]:"#292929",[RW.H0]:"#292929"}};var zW=i(5403);var VW,WW;!function(e){e.getDefinition=function(e,t){let i=e.defaults;for(;cM.L.isThemeIcon(i);){const e=HW.getIcon(i.id);if(!e)return;i=e.defaults}return i}}(VW||(VW={})),function(e){e.toJSONObject=function(e){return{weight:e.weight,style:e.style,src:e.src.map((e=>({format:e.format,location:e.location.toString()})))}},e.fromJSONObject=function(e){const t=e=>(0,gM.Kg)(e)?e:void 0;if(e&&Array.isArray(e.src)&&e.src.every((e=>(0,gM.Kg)(e.format)&&(0,gM.Kg)(e.location))))return{weight:t(e.weight),style:t(e.style),src:e.src.map((e=>({format:e.format,location:Dx.r.parse(e.location)})))}}}(WW||(WW={}));const HW=new class{constructor(){this._onDidChange=new rk.vl,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:(0,WS.kg)("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:(0,WS.kg)("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${cM.L.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enumDescriptions[t]=i),this._onDidChange.fire()}return s}const r={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=r;const o={$ref:"#/definitions/icons"};return n&&(o.deprecationMessage=n),i&&(o.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=o,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map((e=>this.iconsById[e]))}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;cM.L.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return`codicon codicon-${e?e.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map((e=>this.iconsById[e]));for(const s of n.filter((e=>!!e.description)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${cM.L.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of n.filter((e=>!cM.L.isThemeIcon(e.defaults))).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join("\n")}};function UW(e,t,i,n){return HW.registerIcon(e,t,i,n)}function jW(){return HW}_M.O.add("base.contributions.icons",HW),function(){const e=(0,bO.J)();for(const t in e){const i="\\"+e[t].toString(16);HW.registerIcon(t,{fontCharacter:i})}}();const GW="vscode://schemas/icons",KW=_M.O.as(zW.F.JSONContribution);KW.registerSchema(GW,HW.getIconSchema());const $W=new sk.uC((()=>KW.notifySchemaChanged(GW)),200);HW.onDidChange((()=>{$W.isScheduled()||$W.schedule()}));UW("widget-close",vD.W.close,(0,WS.kg)("widgetClose","Icon for the close action in widgets.")),UW("goto-previous-location",vD.W.arrowUp,(0,WS.kg)("previousChangeIcon","Icon for goto previous editor location.")),UW("goto-next-location",vD.W.arrowDown,(0,WS.kg)("nextChangeIcon","Icon for goto next editor location.")),cM.L.modify(vD.W.sync,"spin"),cM.L.modify(vD.W.loading,"spin");class qW{getIcon(e){const t=jW();let i=e.defaults;for(;cM.L.isThemeIcon(i);){const e=t.getIcon(i.id);if(!e)return;i=e.defaults}return i}}const QW="vs",XW="vs-dark",YW="hc-black",ZW="hc-light",JW=_M.O.as(ZT.FdG.ColorContribution),eH=_M.O.as(bT.Fd.ThemingContribution);class tH{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(iH(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,WR.Q1.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=nH(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,WR.Q1.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);return i||(!1!==t?this.getDefault(e):void 0)}getDefault(e){let t=this.defaultColors[e];return t||(t=JW.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case QW:return JP.zM.LIGHT;case YW:return JP.zM.HIGH_CONTRAST_DARK;case ZW:return JP.zM.HIGH_CONTRAST_LIGHT;default:return JP.zM.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const i=nH(this.themeData.base);e=i.rules,i.encodedTokensColors&&(t=i.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){const t={token:""};i&&(t.foreground=i),n&&(t.background=n),e.push(t)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=DW.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const n=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=LW.x.getForeground(n),r=LW.x.getFontStyle(n);return{foreground:s,italic:Boolean(1&r),bold:Boolean(2&r),underline:Boolean(4&r),strikethrough:Boolean(8&r)}}}function iH(e){return e===QW||e===XW||e===YW||e===ZW}function nH(e){switch(e){case QW:return PW;case XW:return OW;case YW:return FW;case ZW:return BW}}function sH(e){const t=nH(e);return new tH(e,t)}class rH extends Mx.jG{constructor(){super(),this._onColorThemeChange=this._register(new rk.vl),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new rk.vl),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new qW,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(QW,sH(QW)),this._knownThemes.set(XW,sH(XW)),this._knownThemes.set(YW,sH(YW)),this._knownThemes.set(ZW,sH(ZW));const e=this._register(function(e){const t=new Mx.Cm,i=t.add(new rk.vl),n=jW();return t.add(n.onDidChange((()=>i.fire()))),e&&t.add(e.onDidProductIconThemeChange((()=>i.fire()))),{dispose:()=>t.dispose(),onDidChange:i.event,getCSS(){const t=e?e.getProductIconTheme():new qW,i={},s=[],r=[];for(const e of n.getIcons()){const n=t.getIcon(e);if(!n)continue;const o=n.font,a=`--vscode-icon-${e.id}-font-family`,l=`--vscode-icon-${e.id}-content`;o?(i[o.id]=o.definition,r.push(`${a}: ${DE(o.id)};`,`${l}: '${n.fontCharacter}';`),s.push(`.codicon-${e.id}:before { content: '${n.fontCharacter}'; font-family: ${DE(o.id)}; }`)):(r.push(`${l}: '${n.fontCharacter}'; ${a}: 'codicon';`),s.push(`.codicon-${e.id}:before { content: '${n.fontCharacter}'; }`))}for(const e in i){const t=i[e],n=t.weight?`font-weight: ${t.weight};`:"",r=t.style?`font-style: ${t.style};`:"",o=t.src.map((e=>`${TE(e.location)} format('${e.format}')`)).join(", ");s.push(`@font-face { src: ${o}; font-family: ${DE(e)};${n}${r} font-display: block; }`)}return s.push(`:root { ${r.join(" ")} }`),s.join("\n")}}}(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(QW),this._onOSSchemeChanged(),this._register(e.onDidChange((()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}))),Ix(Ex,"(forced-colors: active)",(()=>{this._onOSSchemeChanged()}))}registerEditorContainer(e){return qL(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=iE(void 0,(e=>{e.className="monaco-colors",e.textContent=this._allCSS})),this._styleElements.push(this._globalStyleElement)),Mx.jG.None}_registerShadowDomContainer(e){const t=iE(e,(e=>{e.className="monaco-colors",e.textContent=this._allCSS}));return this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t)return void this._styleElements.splice(e,1)}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!iH(t.base)&&!iH(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new tH(e,t)),iH(e)&&this._knownThemes.forEach((t=>{t.base===e&&t.notifyBaseUpdated()})),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(QW),this._updateActualTheme(t)}_updateActualTheme(e){e&&this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Ex.matchMedia("(forced-colors: active)").matches;if(e!==(0,JP.Bb)(this._theme.type)){let t;t=(0,JP.HD)(this._theme.type)?e?YW:XW:e?ZW:QW,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:i=>{t[i]||(e.push(i),t[i]=!0)}};eH.getThemingParticipants().forEach((e=>e(this._theme,i,this._environment)));const n=[];for(const r of JW.getColors()){const e=this._theme.getColor(r.id,!0);e&&n.push(`${(0,ZT.Bbc)(r.id)}: ${e.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${n.join("\n")} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(function(e){const t=[];for(let i=1,n=e.length;i<n;i++){const n=e[i];t[i]=`.mtk${i} { color: ${n}; }`}return t.push(".mtki { font-style: italic; }"),t.push(".mtkb { font-weight: bold; }"),t.push(".mtku { text-decoration: underline; text-underline-position: under; }"),t.push(".mtks { text-decoration: line-through; }"),t.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),t.join("\n")}(s)),this._themeCSS=e.join("\n"),this._updateCSS(),RI.dG.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}\n${this._themeCSS}`,this._styleElements.forEach((e=>e.textContent=this._allCSS))}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const oH=(0,eM.u1)("themeService");var aH=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},lH=function(e,t){return function(i,n){t(i,n,e)}};let hH=class extends Mx.jG{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new rk.vl,this._onDidChangeReducedMotion=new rk.vl,this._onDidChangeLinkUnderline=new rk.vl,this._accessibilityModeEnabledContext=KI.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),e.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())}))),n(),this._register(this.onDidChangeScreenReaderOptimized((()=>n())));const s=Ex.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(s),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(EL(e,"change",(()=>{this._systemMotionReduced=e.matches,"auto"===this._configMotionReduced&&this._onDidChangeReducedMotion.fire()})));const t=()=>{const e=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",e),this._layoutService.mainContainer.classList.toggle("enable-motion",!e)};t(),this._register(this.onDidChangeReducedMotion((()=>t())))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("accessibility.underlineLinks")){const e=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=e,this._onDidChangeLinkUnderline.fire()}})));const e=()=>{const e=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",e)};e(),this._register(this.onDidChangeLinkUnderlines((()=>e())))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&2===this._accessibilitySupport}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return"on"===e||"auto"===e&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};hH=aH([lH(0,mM.fN),lH(1,ET),lH(2,JT.pG)],hH);var cH,dH,uH=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},gH=function(e,t){return function(i,n){t(i,n,e)}};let pH=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new fH(i)}createMenu(e,t,i){return new vH(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const n=new vH(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),s=n.getActions(i);return n.dispose(),s}resetHiddenStates(e){this._hiddenStates.reset(e)}};pH=uH([gH(0,pM),gH(1,oD),gH(2,XP)],pH);let fH=class{static#e=(()=>cH=this)();static#t=(()=>this._key="menu.hiddenCommands")();constructor(e){this._storageService=e,this._disposables=new Mx.Cm,this._onDidChange=new rk.vl,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(cH._key,0,"{}");this._data=JSON.parse(t)}catch(t){this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,cH._key,this._disposables)((()=>{if(!this._ignoreChangeEvent)try{const t=e.get(cH._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()})))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){const i=this._isHiddenByDefault(e,t),n=this._data[e.id]?.includes(t)??!1;return i?!n:n}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const n=this._data[e.id];if(i)if(n){n.indexOf(t)<0&&n.push(t)}else this._data[e.id]=[t];else if(n){const i=n.indexOf(t);i>=0&&(0,OS.UH)(n,i),0===n.length&&delete this._data[e.id]}this._persist()}reset(e){if(void 0===e)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(cH._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};fH=cH=uH([gH(0,XP)],fH);class mH{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(MM.getMenuItems(this._id));let t;for(const i of e){const e=i.group||"";t&&t[0]===e||(t=[e,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(mH._fillInKbExprKeys(e.when,this._structureContextKeys),xM(e)){if(e.command.precondition&&mH._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;mH._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(MM.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let _H=dH=class extends mH{constructor(e,t,i,n,s,r){super(e,i),this._hiddenStates=t,this._commandService=n,this._keybindingService=s,this._contextKeyService=r,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[n,s]=i;let r;for(const t of s)if(this._contextKeyService.contextMatchesRules(t.when)){const i=xM(t);i&&this._hiddenStates.setDefaultState(this._id,t.command.id,!!t.isHiddenByDefault);const n=bH(this._id,i?t.command:t,this._hiddenStates);if(i){const i=yH(this._commandService,this._keybindingService,t.command.id,t.when);(r??=[]).push(new DM(t.command,t.alt,e,n,i,this._contextKeyService,this._commandService))}else{const i=new dH(t.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),s=oM.join(...i.map((e=>e[1])));s.length>0&&(r??=[]).push(new TM(t,n,s))}}r&&r.length>0&&t.push([n,r])}return t}_sort(e){return e.sort(dH._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,n=t.group;if(i!==n){if(!i)return 1;if(!n)return-1;if("navigation"===i)return-1;if("navigation"===n)return 1;const e=i.localeCompare(n);if(0!==e)return e}const s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:dH._compareTitles(xM(e)?e.command.title:e.title,xM(t)?t.command.title:t.title)}static _compareTitles(e,t){const i="string"===typeof e?e:e.original,n="string"===typeof t?t:t.original;return i.localeCompare(n)}};_H=dH=uH([gH(3,pM),gH(4,oD),gH(5,mM.fN)],_H);let vH=class{constructor(e,t,i,n,s,r){this._disposables=new Mx.Cm,this._menuInfo=new _H(e,t,i.emitEventsForSubmenuChanges,n,s,r);const o=new sk.uC((()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})}),i.eventDebounceDelay);this._disposables.add(o),this._disposables.add(MM.onDidChangeMenu((e=>{for(const t of this._menuInfo.allMenuIds)if(e.has(t)){o.schedule();break}})));const a=this._disposables.add(new Mx.Cm);this._onDidChange=new rk.uI({onWillAddFirstListener:()=>{a.add(r.onDidChangeContext((e=>{const t=e.affectsSome(this._menuInfo.structureContextKeys),i=e.affectsSome(this._menuInfo.preconditionContextKeys),n=e.affectsSome(this._menuInfo.toggledContextKeys);(t||i||n)&&this._onDidChange.fire({menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n})}))),a.add(t.onDidChange((e=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})})))},onDidRemoveLastListener:a.clear.bind(a),delay:i.eventDebounceDelay,merge:e=>{let t=!1,i=!1,n=!1;for(const s of e)if(t=t||s.isStructuralChange,i=i||s.isEnablementChange,n=n||s.isToggleChange,t&&i&&n)break;return{menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n}}}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};function bH(e,t,i){const n=void 0!==t.submenu?t.submenu.id:t.id;const s="string"===typeof t.title?t.title:t.title.value,r=hM({id:`hide/${e.id}/${n}`,label:(0,WS.kg)("hide.label","Hide '{0}'",s),run(){i.updateHidden(e,n,!0)}}),o=hM({id:`toggle/${e.id}/${n}`,label:s,get checked(){return!i.isHidden(e,n)},run(){i.updateHidden(e,n,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function yH(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return hM({id:`configureKeybinding/${i}`,label:(0,WS.kg)("configure keybinding","Configure Keybinding"),enabled:s,run(){const s=!!!t.lookupKeybinding(i)&&n?n.serialize():void 0;e.executeCommand("workbench.action.openGlobalKeybindings",`@command:${i}`+(s?` +when:${s}`:""))}})}vH=uH([gH(3,pM),gH(4,oD),gH(5,mM.fN)],vH);var wH,CH=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},SH=function(e,t){return function(i,n){t(i,n,e)}};const xH="application/vnd.code.resources";let kH=class extends Mx.jG{static#e=(()=>wH=this)();constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Fx||Bx)&&this.installWebKitWriteTextWorkaround(),this._register(rk.Jh.runAndSubscribe(CL,(e=>{let{window:t,disposables:i}=e;i.add(EL(t.document,"copy",(()=>this.clearResourcesState())))}),{window:Ex,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const e=new sk.Zv;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,eE().navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch((async t=>{t instanceof Error&&"NotAllowedError"===t.name&&e.isRejected||this.logService.error(t)}))};this._register(rk.Jh.runAndSubscribe(this.layoutService.onDidAddContainer,(t=>{let{container:i,disposables:n}=t;n.add(EL(i,"click",e)),n.add(EL(i,"keydown",e))}),{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t)this.mapTextToType.set(t,e);else{if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await eE().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}}fallbackWriteText(e){const t=JL(),i=t.activeElement,n=t.body.appendChild(xE("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),hE(i)&&i.focus(),n.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await eE().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}static#t=(()=>this.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3)();async readResources(){try{const e=await eE().navigator.clipboard.read();for(const t of e)if(t.types.includes(`web ${xH}`)){const e=await t.getType(`web ${xH}`),i=JSON.parse(await e.text()).map((e=>Dx.r.from(e)));return i}}catch(t){}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(0===this.resources.length)return;const e=await this.readText();return(0,gL.tW)(e.substring(0,wH.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}};kH=wH=CH([SH(0,ET),SH(1,AM.rr)],kH);const LH=(0,eM.u1)("clipboardService");var EH=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},MH=function(e,t){return function(i,n){t(i,n,e)}};const TH="data-keybinding-context";class DH{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return"undefined"===typeof t&&this._parent?this._parent.getValue(e):t}}class NH extends DH{static#e=(()=>this.INSTANCE=new NH)();constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}class IH extends DH{static#e=(()=>this._keyPrefix="config.")();constructor(e,t,i){super(e,null),this._configurationService=t,this._values=_R.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration((e=>{if(7===e.source){const e=Array.from(this._values,(e=>{let[t]=e;return t}));this._values.clear(),i.fire(new PH(e))}else{const t=[];for(const i of e.affectedKeys){const e=`config.${i}`,n=this._values.findSuperstr(e);void 0!==n&&(t.push(...uM.f.map(n,(e=>{let[t]=e;return t}))),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}i.fire(new PH(t))}}))}dispose(){this._listener.dispose()}getValue(e){if(0!==e.indexOf(IH._keyPrefix))return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(IH._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:n=Array.isArray(i)?JSON.stringify(i):i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}class AH{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){"undefined"===typeof this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class RH{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class PH{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every((t=>e.has(t)))}}class OH{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every((t=>t.allKeysContainedIn(e)))}}class FH extends Mx.jG{constructor(e){super(),this._onDidChangeContext=this._register(new rk.fV({merge:e=>new OH(e)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new AH(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new zH(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return!e||e.evaluate(t)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new RH(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new RH(e))}getContext(e){return this._isDisposed?NH.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute(TH)){const t=e.getAttribute(TH);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}dispose(){super.dispose(),this._isDisposed=!0}}let BH=class extends FH{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new IH(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?NH.INSTANCE:this._contexts.get(e)||NH.INSTANCE}createChildContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new DH(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};BH=EH([MH(0,JT.pG)],BH);class zH extends FH{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Mx.HE),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(TH)){let e="";this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(e?": "+e:""))}this._domNode.setAttribute(TH,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext((e=>{const t=this._parent.getContextValuesContainer(this._myContextId).value;var i;i=t,e.allKeysContainedIn(new Set(Object.keys(i)))||this._onDidChangeContext.fire(e)}))}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(TH),super.dispose())}getContextValuesContainer(e){return this._isDisposed?NH.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}fM.registerCommand("_setContext",(function(e,t,i){e.get(mM.fN).createKey(String(t),function(e){return(0,FS.PI)(e,(e=>"object"===typeof e&&1===e.$mid?Dx.r.revive(e).toString():e instanceof Dx.r?e.toString():void 0))}(i))})),fM.registerCommand({id:"getContextKeyInfo",handler:()=>[...mM.N1.all()].sort(((e,t)=>e.key.localeCompare(t.key))),metadata:{description:(0,WS.kg)("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),fM.registerCommand("_generateContextKeyInfo",(function(){const e=[],t=new Set;for(const i of mM.N1.all())t.has(i.key)||(t.add(i.key),e.push(i));e.sort(((e,t)=>e.key.localeCompare(t.key))),console.log(JSON.stringify(e,void 0,2))}));var VH=i(3601);class WH{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}}class HH{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new WH(t,e),this._nodes.set(t,i)),i}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}\n\t(-> incoming)[${[...i.incoming.keys()].join(", ")}]\n\t(outgoing ->)[${[...i.outgoing.keys()].join(",")}]\n`);return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const e=this._findCycle(n,t);if(e)return e;t.delete(i)}}}class UH{constructor(){this._entries=new Map;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const[n,s]of t)this.set(n,s)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}class jH extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: \n${e.toString()}`}}class GH{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new UH,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(eM._Y,this),this._globalGraph=n?i?._globalGraph??new HH((e=>e)):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,(0,Mx.AS)(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)(0,Mx.Xm)(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,n=new class extends GH{dispose(){i._children.delete(n),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(n),t?.add(n),n}invokeFunction(e){this._throwIfDisposed();const t=KH.traceInvocation(this._enableTracing,e);let i=!1;try{const o={get:e=>{if(i)throw(0,Ux.iH)("service accessor is only valid during the invocation of its target method");const n=this._getOrCreateServiceInstance(e,t);if(!n)throw new Error(`[invokeFunction] unknown service '${e}'`);return n}};for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return e(o,...s)}finally{i=!0,t.stop()}}createInstance(e){let t,i;this._throwIfDisposed();for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return e instanceof VH.d?(t=KH.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(s),t)):(t=KH.traceCreation(this._enableTracing,e),i=this._createInstance(e,s,t)),t.stop(),i}_createInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;const n=eM._$.getServiceDependencies(e).sort(((e,t)=>e.index-t.index)),s=[];for(const o of n){const t=this._getOrCreateServiceInstance(o.id,i);t||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${o.id}.`,!1),s.push(t)}const r=n.length>0?n[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const i=r-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,r)}return Reflect.construct(e,t.concat(s))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof VH.d)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setCreatedServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof VH.d?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const n=new HH((e=>e.id.toString()));let s=0;const r=[{id:e,desc:t,_trace:i}],o=new Set;for(;r.length;){const t=r.pop();if(!o.has(String(t.id))){if(o.add(String(t.id)),n.lookupOrInsertNode(t),s++>1e3)throw new jH(n);for(const i of eM._$.getServiceDependencies(t.desc.ctor)){const s=this._getServiceInstanceOrDescriptor(i.id);if(s||this._throwIfStrict(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(t.id),String(i.id)),s instanceof VH.d){const e={id:i.id,desc:s,_trace:t._trace.branch(i.id,!0)};n.insertEdge(t,e),r.push(e)}}}}for(;;){const e=n.roots();if(0===e.length){if(!n.isEmpty())throw new jH(n);break}for(const{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof VH.d){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setCreatedServiceInstance(t.id,e)}n.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(this._services.get(e)instanceof VH.d)return this._createServiceInstance(e,t,i,n,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(arguments.length>3?arguments[3]:void 0){const r=new GH(void 0,this._strict,this,this._enableTracing);r._globalGraphImplicitDependency=String(e);const o=new Map,a=new sk.F6((()=>{const e=r._createInstance(t,i,n);for(const[t,i]of o){const n=e[t];if("function"===typeof n)for(const t of i)t.disposable=n.apply(e,t.listener)}return o.clear(),s.add(e),e}));return new Proxy(Object.create(null),{get(e,t){if(!a.isInitialized&&"string"===typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){let e=o.get(t);e||(e=new dM.w,o.set(t,e));return(i,n,s)=>{if(a.isInitialized)return a.value[t](i,n,s);{const t={listener:[i,n,s],disposable:void 0},r=e.push(t);return(0,Mx.s)((()=>{r(),t.disposable?.dispose()}))}}}if(t in e)return e[t];const i=a.value;let n=i[t];return"function"!==typeof n||(n=n.bind(i),e[t]=n),n},set:(e,t,i)=>(a.value[t]=i,!0),getPrototypeOf:e=>t.prototype})}{const e=this._createInstance(t,i,n);return s.add(e),e}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class KH{static#e=(()=>this.all=new Set)();static#t=(()=>this._None=new class extends KH{constructor(){super(0,null)}stop(){}branch(){return this}})();static traceInvocation(e,t){return e?new KH(2,t.name||(new Error).stack.split("\n").slice(3,4).join("\n")):KH._None}static traceCreation(e,t){return e?new KH(1,t.name):KH._None}static#i=(()=>this._totals=0)();constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new KH(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;KH._totals+=e;let t=!1;const i=[`${1===this.type?"CREATE":"CALL"} ${this.name}`,`${function e(i,n){const s=[],r=new Array(i+1).join("\t");for(const[o,a,l]of n._dep)if(a&&l){t=!0,s.push(`${r}CREATES -> ${o}`);const n=e(i+1,l);n&&s.push(n)}else s.push(`${r}uses -> ${o}`);return s.join("\n")}(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${KH._totals.toFixed(2)}ms)`];(e>2||t)&&KH.all.add(i.join("\n"))}}var $H=i(7854);const qH=new Set([uL.ny.inMemory,uL.ny.vscodeSourceControl,uL.ny.walkThrough,uL.ny.walkThroughSnippet,uL.ny.vscodeChatCodeBlock]);class QH{constructor(){this._byResource=new qD.fT,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let s=this._byOwner.get(t);s||(s=new qD.fT,this._byOwner.set(t,s)),s.set(e,i)}get(e,t){const i=this._byResource.get(e);return i?.get(t)}delete(e,t){let i=!1,n=!1;const s=this._byResource.get(e);s&&(i=s.delete(t));const r=this._byOwner.get(t);if(r&&(n=r.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){return"string"===typeof e?this._byOwner.get(e)?.values()??uM.f.empty():Dx.r.isUri(e)?this._byResource.get(e)?.values()??uM.f.empty():uM.f.map(uM.f.concat(...this._byOwner.values()),(e=>e[1]))}}class XH{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new qD.fT,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const e=this._data.get(t);e&&this._substract(e);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(qH.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===$H.cj.Error?t.errors+=1:i===$H.cj.Warning?t.warnings+=1:i===$H.cj.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class YH{constructor(){this._onMarkerChanged=new rk.uI({delay:0,merge:YH._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new QH,this._stats=new XH(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if((0,OS.Ct)(i)){this._data.delete(t,e)&&this._onMarkerChanged.fire([t])}else{const n=[];for(const s of i){const i=YH._toMarker(e,t,s);i&&n.push(i)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:s,message:r,source:o,startLineNumber:a,startColumn:l,endLineNumber:h,endColumn:c,relatedInformation:d,tags:u}=i;if(r)return a=a>0?a:1,l=l>0?l:1,h=h>=a?h:a,c=c>0?c:l,{resource:t,owner:e,code:n,severity:s,message:r,source:o,startLineNumber:a,startColumn:l,endLineNumber:h,endColumn:c,relatedInformation:d,tags:u}}changeAll(e,t){const i=[],n=this._data.values(e);if(n)for(const s of n){const t=uM.f.first(s);t&&(i.push(t.resource),this._data.delete(t.resource,e))}if((0,OS.EI)(t)){const n=new qD.fT;for(const{resource:s,marker:r}of t){const t=YH._toMarker(e,s,r);if(!t)continue;const o=n.get(s);o?o.push(t):(n.set(s,[t]),i.push(s))}for(const[t,i]of n)this._data.set(t,e,i)}i.length>0&&this._onMarkerChanged.fire(i)}read(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.create(null),{owner:t,resource:i,severities:n,take:s}=e;if((!s||s<0)&&(s=-1),t&&i){const e=this._data.get(i,t);if(e){const t=[];for(const i of e)if(YH._accept(i,n)){const e=t.push(i);if(s>0&&e===s)break}return t}return[]}if(t||i){const e=this._data.values(i??t),r=[];for(const t of e)for(const e of t)if(YH._accept(e,n)){const t=r.push(e);if(s>0&&t===s)return r}return r}{const e=[];for(const t of this._data.values())for(const i of t)if(YH._accept(i,n)){const t=e.push(i);if(s>0&&t===s)return e}return e}}static _accept(e,t){return void 0===t||(t&e.severity)===e.severity}static _merge(e){const t=new qD.fT;for(const i of e)for(const e of i)t.set(e,!0);return Array.from(t.keys())}}class ZH extends Mx.jG{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=BA.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=BA.createEmptyModel(this.logService);const e=_M.O.as(DA.Fd.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const n of e){const e=i[n],s=t[n];void 0!==e?this._configurationModel.setValue(n,e):s?this._configurationModel.setValue(n,s.default):this._configurationModel.removeValue(n)}}}const JH=(0,eM.u1)("accessibilitySignalService");Symbol("AcknowledgeDocCommentsToken");class eU{static register(e){return new eU(e.fileName)}static#e=(()=>this.error=eU.register({fileName:"error.mp3"}))();static#t=(()=>this.warning=eU.register({fileName:"warning.mp3"}))();static#i=(()=>this.success=eU.register({fileName:"success.mp3"}))();static#n=(()=>this.foldedArea=eU.register({fileName:"foldedAreas.mp3"}))();static#s=(()=>this.break=eU.register({fileName:"break.mp3"}))();static#r=(()=>this.quickFixes=eU.register({fileName:"quickFixes.mp3"}))();static#o=(()=>this.taskCompleted=eU.register({fileName:"taskCompleted.mp3"}))();static#a=(()=>this.taskFailed=eU.register({fileName:"taskFailed.mp3"}))();static#l=(()=>this.terminalBell=eU.register({fileName:"terminalBell.mp3"}))();static#h=(()=>this.diffLineInserted=eU.register({fileName:"diffLineInserted.mp3"}))();static#c=(()=>this.diffLineDeleted=eU.register({fileName:"diffLineDeleted.mp3"}))();static#d=(()=>this.diffLineModified=eU.register({fileName:"diffLineModified.mp3"}))();static#u=(()=>this.chatRequestSent=eU.register({fileName:"chatRequestSent.mp3"}))();static#g=(()=>this.chatResponseReceived1=eU.register({fileName:"chatResponseReceived1.mp3"}))();static#p=(()=>this.chatResponseReceived2=eU.register({fileName:"chatResponseReceived2.mp3"}))();static#f=(()=>this.chatResponseReceived3=eU.register({fileName:"chatResponseReceived3.mp3"}))();static#m=(()=>this.chatResponseReceived4=eU.register({fileName:"chatResponseReceived4.mp3"}))();static#_=(()=>this.clear=eU.register({fileName:"clear.mp3"}))();static#v=(()=>this.save=eU.register({fileName:"save.mp3"}))();static#b=(()=>this.format=eU.register({fileName:"format.mp3"}))();static#y=(()=>this.voiceRecordingStarted=eU.register({fileName:"voiceRecordingStarted.mp3"}))();static#w=(()=>this.voiceRecordingStopped=eU.register({fileName:"voiceRecordingStopped.mp3"}))();static#C=(()=>this.progress=eU.register({fileName:"progress.mp3"}))();constructor(e){this.fileName=e}}class tU{constructor(e){this.randomOneOf=e}}class iU{constructor(e,t,i,n,s,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=n,this.legacyAnnouncementSettingsKey=s,this.announcementMessage=r}static#e=(()=>this._signals=new Set)();static register(e){const t=new tU("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new iU(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return iU._signals.add(i),i}static#t=(()=>this.errorAtPosition=iU.register({name:(0,WS.kg)("accessibilitySignals.positionHasError.name","Error at Position"),sound:eU.error,announcementMessage:(0,WS.kg)("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}))();static#i=(()=>this.warningAtPosition=iU.register({name:(0,WS.kg)("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:eU.warning,announcementMessage:(0,WS.kg)("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}))();static#n=(()=>this.errorOnLine=iU.register({name:(0,WS.kg)("accessibilitySignals.lineHasError.name","Error on Line"),sound:eU.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:(0,WS.kg)("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}))();static#s=(()=>this.warningOnLine=iU.register({name:(0,WS.kg)("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:eU.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:(0,WS.kg)("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}))();static#r=(()=>this.foldedArea=iU.register({name:(0,WS.kg)("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:eU.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:(0,WS.kg)("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}))();static#o=(()=>this.break=iU.register({name:(0,WS.kg)("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:eU.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:(0,WS.kg)("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}))();static#a=(()=>this.inlineSuggestion=iU.register({name:(0,WS.kg)("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:eU.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}))();static#l=(()=>this.terminalQuickFix=iU.register({name:(0,WS.kg)("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:eU.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:(0,WS.kg)("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}))();static#h=(()=>this.onDebugBreak=iU.register({name:(0,WS.kg)("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:eU.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:(0,WS.kg)("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}))();static#c=(()=>this.noInlayHints=iU.register({name:(0,WS.kg)("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:eU.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:(0,WS.kg)("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}))();static#d=(()=>this.taskCompleted=iU.register({name:(0,WS.kg)("accessibilitySignals.taskCompleted","Task Completed"),sound:eU.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:(0,WS.kg)("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}))();static#u=(()=>this.taskFailed=iU.register({name:(0,WS.kg)("accessibilitySignals.taskFailed","Task Failed"),sound:eU.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:(0,WS.kg)("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}))();static#g=(()=>this.terminalCommandFailed=iU.register({name:(0,WS.kg)("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:eU.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:(0,WS.kg)("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}))();static#p=(()=>this.terminalCommandSucceeded=iU.register({name:(0,WS.kg)("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:eU.success,announcementMessage:(0,WS.kg)("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}))();static#f=(()=>this.terminalBell=iU.register({name:(0,WS.kg)("accessibilitySignals.terminalBell","Terminal Bell"),sound:eU.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:(0,WS.kg)("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}))();static#m=(()=>this.notebookCellCompleted=iU.register({name:(0,WS.kg)("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:eU.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:(0,WS.kg)("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}))();static#_=(()=>this.notebookCellFailed=iU.register({name:(0,WS.kg)("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:eU.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:(0,WS.kg)("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}))();static#v=(()=>this.diffLineInserted=iU.register({name:(0,WS.kg)("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:eU.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}))();static#b=(()=>this.diffLineDeleted=iU.register({name:(0,WS.kg)("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:eU.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}))();static#y=(()=>this.diffLineModified=iU.register({name:(0,WS.kg)("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:eU.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}))();static#w=(()=>this.chatRequestSent=iU.register({name:(0,WS.kg)("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:eU.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:(0,WS.kg)("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}))();static#C=(()=>this.chatResponseReceived=iU.register({name:(0,WS.kg)("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[eU.chatResponseReceived1,eU.chatResponseReceived2,eU.chatResponseReceived3,eU.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}))();static#S=(()=>this.progress=iU.register({name:(0,WS.kg)("accessibilitySignals.progress","Progress"),sound:eU.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:(0,WS.kg)("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}))();static#x=(()=>this.clear=iU.register({name:(0,WS.kg)("accessibilitySignals.clear","Clear"),sound:eU.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:(0,WS.kg)("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}))();static#k=(()=>this.save=iU.register({name:(0,WS.kg)("accessibilitySignals.save","Save"),sound:eU.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:(0,WS.kg)("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}))();static#L=(()=>this.format=iU.register({name:(0,WS.kg)("accessibilitySignals.format","Format"),sound:eU.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:(0,WS.kg)("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}))();static#E=(()=>this.voiceRecordingStarted=iU.register({name:(0,WS.kg)("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:eU.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}))();static#M=(()=>this.voiceRecordingStopped=iU.register({name:(0,WS.kg)("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:eU.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"}))()}class nU extends Mx.jG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];super(),this.logger=new AM.Dk([e,...t]),this._register(e.onDidChangeLogLevel((e=>this.setLevel(e))))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.trace(e,...i)}debug(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.debug(e,...i)}info(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.info(e,...i)}warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.warn(e,...i)}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.error(e,...i)}}const sU=[];function rU(){return sU.slice(0)}var oU=i(7974),aU=i(4051);var lU=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},hU=function(e,t){return function(i,n){t(i,n,e)}};class cU{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new rk.vl}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let dU=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new Mx.BO(new cU(t))):Promise.reject(new Error("Model not found"))}};dU=lU([hU(0,iM.IModelService)],dU);class uU{static#e=(()=>this.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}})();show(){return uU.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}}class gU{static#e=(()=>this.NO_OP=new OT)();info(e){return this.notify({severity:IT.A.Info,message:e})}warn(e){return this.notify({severity:IT.A.Warning,message:e})}error(e){return this.notify({severity:IT.A.Error,message:e})}notify(e){switch(e.severity){case IT.A.Error:console.error(e.message);break;case IT.A.Warning:console.warn(e.message);break;default:console.log(e.message)}return gU.NO_OP}prompt(e,t,i,n){return gU.NO_OP}status(e,t){return Mx.jG.None}}let pU=class{constructor(e){this._onWillExecuteCommand=new rk.vl,this._onDidExecuteCommand=new rk.vl,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e){const t=fM.getCommand(e);if(!t)return Promise.reject(new Error(`command '${e}' not found`));try{for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];this._onWillExecuteCommand.fire({commandId:e,args:n});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[t.handler,...n]);return this._onDidExecuteCommand.fire({commandId:e,args:n}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}};pU=lU([hU(0,eM._Y)],pU);let fU=class extends XA{constructor(e,t,i,n,s,r){super(e,t,i,n,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const o=e=>{const t=new Mx.Cm;t.add(EL(e,gE.KEY_DOWN,(e=>{const t=new Zx(e);this._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())}))),t.add(EL(e,gE.KEY_UP,(e=>{const t=new Zx(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()}))),this._domNodeListeners.push(new mU(e,t))},a=e=>{for(let t=0;t<this._domNodeListeners.length;t++){const i=this._domNodeListeners[t];i.domNode===e&&(this._domNodeListeners.splice(t,1),i.dispose())}},l=e=>{e.getOption(61)||o(e.getContainerDomNode())};this._register(r.onCodeEditorAdd(l)),this._register(r.onCodeEditorRemove((e=>{e.getOption(61)||a(e.getContainerDomNode())}))),r.listCodeEditors().forEach(l);const h=e=>{o(e.getContainerDomNode())};this._register(r.onDiffEditorAdd(h)),this._register(r.onDiffEditorRemove((e=>{a(e.getContainerDomNode())}))),r.listDiffEditors().forEach(h)}addDynamicKeybinding(e,t,i,n){return(0,Mx.qE)(fM.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){const t=e.map((e=>({keybinding:jx(e.keybinding,BS.OS),command:e.command??null,commandArgs:e.commandArgs,when:e.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1})));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),(0,Mx.s)((()=>{for(let e=0;e<this._dynamicKeybindings.length;e++)if(this._dynamicKeybindings[e]===t[0])return this._dynamicKeybindings.splice(e,t.length),void this.updateResolver()}))}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(bM.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new KA(e,t,(e=>this._log(e)))}return this._cachedResolver}_documentHasFocus(){return Ex.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let n=0;for(const s of e){const e=s.when||void 0,r=s.keybinding;if(r){const o=aR.resolveKeybinding(r,BS.OS);for(const r of o)i[n++]=new ZA(r,s.command,s.commandArgs,e,t,null,!1)}else i[n++]=new ZA(void 0,s.command,s.commandArgs,e,t,null,!1)}return i}resolveKeyboardEvent(e){const t=new Kx(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new aR([t],BS.OS)}};fU=lU([hU(0,mM.fN),hU(1,pM),hU(2,NM),hU(3,PT),hU(4,AM.rr),hU(5,tM)],fU);class mU extends Mx.jG{constructor(e,t){super(),this.domNode=e,this._register(t)}}function _U(e){return e&&"object"===typeof e&&(!e.overrideIdentifier||"string"===typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof Dx.r)}let vU=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new rk.vl,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new ZH(e);this._configuration=new WA(t.reload(),BA.createEmptyModel(e),BA.createEmptyModel(e),BA.createEmptyModel(e),BA.createEmptyModel(e),BA.createEmptyModel(e),new qD.fT,BA.createEmptyModel(e),new qD.fT,e),t.dispose()}getValue(e,t){const i="string"===typeof e?e:void 0,n=_U(e)?e:_U(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const n of e){const[e,t]=n;this.getValue(e)!==t&&(this._configuration.updateValue(e,t),i.push(e))}if(i.length>0){const e=new HA({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);e.source=8,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._configuration.inspect(e,t,void 0)}};vU=lU([hU(0,AM.rr)],vU);let bU=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new rk.vl,this.configurationService.onDidChangeConfiguration((e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,i)=>e.affectsConfiguration(i)})}))}getValue(e,t,i){const n=OA.y.isIPosition(t)?t:null,s=n?"string"===typeof i?i:void 0:"string"===typeof t?t:void 0,r=e?this.getLanguage(e,n):void 0;return"undefined"===typeof s?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};bU=lU([hU(0,JT.pG),hU(1,iM.IModelService),hU(2,NI.L)],bU);let yU=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&"string"===typeof i&&"auto"!==i?i:BS.j9||BS.zx?"\n":"\r\n"}};yU=lU([hU(0,JT.pG)],yU);class wU{static#e=(()=>this.SCHEME="inmemory")();constructor(){const e=Dx.r.from({scheme:wU.SCHEME,authority:"model",path:"/"});this.workspace={id:yR,folders:[new bR({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===wU.SCHEME?this.workspace.folders[0]:null}}function CU(e,t,i){if(!t)return;if(!(e instanceof vU))return;const n=[];Object.keys(t).forEach((e=>{(function(e){return RA()[`editor.${e}`]||!1})(e)&&n.push([`editor.${e}`,t[e]]),i&&function(e){return RA()[`diffEditor.${e}`]||!1}(e)&&n.push([`diffEditor.${e}`,t[e]])})),n.length>0&&e.updateValues(n)}let SU=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:LA.convert(e),n=new Map;for(const o of i){if(!(o instanceof EA))throw new Error("bad edit - only text edits are supported");const e=this._modelService.getModel(o.resource);if(!e)throw new Error("bad edit - model not found");if("number"===typeof o.versionId&&e.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let t=n.get(e);t||(t=[],n.set(e,t)),t.push(PA.replaceMove(JM.Q.lift(o.textEdit.range),o.textEdit.text))}let s=0,r=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,(()=>[])),o.pushStackElement(),r+=1,s+=a.length;return{ariaSummary:Tx.GP(MR.bulkEditServiceSummary,s,r),isApplied:s>0}}};SU=lU([hU(0,iM.IModelService)],SU);let xU=class extends mA{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(t=e.getContainerDomNode())}return super.showContextView(e,t,i)}};xU=lU([hU(0,ET),hU(1,tM)],xU);class kU extends DR.LanguageService{constructor(){super()}}let LU=class extends IO{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r),this.configure({blockMouse:!1})}};LU=lU([hU(0,NM),hU(1,PT),hU(2,sD),hU(3,oD),hU(4,LM),hU(5,mM.fN)],LU);const EU={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let MU=class extends pT{constructor(e,t,i,n,s){super(EU,e,t,i,n,s)}};MU=lU([hU(0,iM.IModelService),hU(1,iT.ITextResourceConfigurationService),hU(2,AM.rr),hU(3,eT.JZ),hU(4,sT.ILanguageFeaturesService)],MU);var TU;(0,ST.v)(AM.rr,class extends nU{constructor(){super(new AM.Cr)}},0),(0,ST.v)(JT.pG,vU,0),(0,ST.v)(iT.ITextResourceConfigurationService,bU,0),(0,ST.v)(iT.ITextResourcePropertiesService,yU,0),(0,ST.v)(vR,wU,0),(0,ST.v)(lR,class{getUriLabel(e,t){return"file"===e.scheme?e.fsPath:e.path}getUriBasenameLabel(e){return(0,zN.P8)(e)}},0),(0,ST.v)(NM,class{publicLog2(){}},0),(0,ST.v)(AT,class{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+"\n\n"+t),Ex.confirm(i)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){const i=[...e.buttons??[]];e.cancelButton&&"string"!==typeof e.cancelButton&&"boolean"!==typeof e.cancelButton&&i.push(e.cancelButton),t=await(i[0]?.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:IT.A.Error,message:e,detail:t})}},0),(0,ST.v)(oU.k,class{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}},0),(0,ST.v)(PT,gU,0),(0,ST.v)($H.DR,YH,0),(0,ST.v)(NI.L,kU,0),(0,ST.v)(oH,rH,0),(0,ST.v)(iM.IModelService,jO.ModelService,0),(0,ST.v)(UO.IMarkerDecorationsService,HO.MarkerDecorationsService,0),(0,ST.v)(mM.fN,BH,0),(0,ST.v)(hR,class{withProgress(e,t,i){return t({report:()=>{}})}},0),(0,ST.v)(dR,uU,0),(0,ST.v)(XP,class extends ZP{constructor(){super(),this.applicationStorage=this._register(new $P(new qP,{hint:GP.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new $P(new qP,{hint:GP.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new $P(new qP,{hint:GP.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage((e=>this.emitDidChangeValue(1,e)))),this._register(this.profileStorage.onDidChangeStorage((e=>this.emitDidChangeValue(0,e)))),this._register(this.applicationStorage.onDidChangeStorage((e=>this.emitDidChangeValue(-1,e))))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}},0),(0,ST.v)(WO.IEditorWorkerService,MU,0),(0,ST.v)(kA,SU,0),(0,ST.v)(TR,class{constructor(){this._neverEmitter=new rk.vl,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}},0),(0,ST.v)(nM.ITextModelService,dU,0),(0,ST.v)(GI,hH,0),(0,ST.v)(Az,class{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Mx.Cm,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;new xP(iE(),"").style(aO)}if(this.lists.some((t=>t.widget===e)))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),YL(e.getHTMLElement())&&this.setLastFocusedList(e),(0,Mx.qE)(e.onDidFocus((()=>this.setLastFocusedList(e))),(0,Mx.s)((()=>this.lists.splice(this.lists.indexOf(i),1))),e.onDidDispose((()=>{this.lists=this.lists.filter((e=>e!==i)),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)})))}dispose(){this.disposables.dispose()}},0),(0,ST.v)(pM,pU,0),(0,ST.v)(oD,fU,0),(0,ST.v)(YO,SW,0),(0,ST.v)(sD,xU,0),(0,ST.v)(FD,zO,0),(0,ST.v)(LH,kH,0),(0,ST.v)(rD,LU,0),(0,ST.v)(LM,pH,0),(0,ST.v)(JH,class{async playSignal(e,t){}},0),(0,ST.v)(aU.ITreeSitterParserService,class{getParseResult(e){}},0),function(e){const t=new UH;for(const[o,a]of(0,ST.N)())t.set(o,a);const i=new GH(t,!0);t.set(eM._Y,i),e.get=function(e){n||r({});const s=t.get(e);if(!s)throw new Error("Missing service "+e);return s instanceof VH.d?i.invokeFunction((t=>t.get(e))):s};let n=!1;const s=new rk.vl;function r(e){if(n)return i;n=!0;for(const[i,n]of(0,ST.N)())t.get(i)||t.set(i,n);for(const i in e)if(e.hasOwnProperty(i)){const n=(0,eM.u1)(i);t.get(n)instanceof VH.d&&t.set(n,e[i])}const r=rU();for(const t of r)try{i.createInstance(t)}catch(o){(0,Ux.dz)(o)}return s.fire(),i}e.initialize=r,e.withServices=function(e){if(n)return e();const t=new Mx.Cm,i=t.add(s.event((()=>{i.dispose(),t.add(e())})));return t}}(TU||(TU={}));class DU extends vT{constructor(e,t){super({amdModuleId:EU.amdModuleId,esmModuleLocation:EU.esmModuleLocation,label:t.label},t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||"function"!==typeof this._foreignModuleHost[e])return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(O2){return Promise.reject(O2)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then((e=>{const t=this._foreignModuleHost?(0,FS.V0)(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then((t=>{this._foreignModuleCreateData=null;const i=(t,i)=>e.$fmr(t,i),n=(e,t)=>function(){const i=Array.prototype.slice.call(arguments,0);return t(e,i)},s={};for(const e of t)s[e]=n(e,i);return s}))}))),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then((e=>this.getProxy()))}}const NU={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var IU=i(2726),AU=i(5372),RU=i(587);class PU{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(!PU._equals(e[n],t[n]))return!1;return!0}static extractWrapped(e,t,i){if(0===e.length)return e;const n=t+1,s=i+1,r=i-t,o=[];let a=0;for(const l of e)l.endColumn<=n||l.startColumn>=s||(o[a++]=new PU(Math.max(1,l.startColumn-n+1),Math.min(r+1,l.endColumn-n+1),l.className,l.type));return o}static filter(e,t,i,n){if(0===e.length)return[];const s=[];let r=0;for(let o=0,a=e.length;o<a;o++){const a=e[o],l=a.range;if(l.endLineNumber<t||l.startLineNumber>t)continue;if(l.isEmpty()&&(0===a.type||3===a.type))continue;const h=l.startLineNumber===t?l.startColumn:i,c=l.endLineNumber===t?l.endColumn:n;s[r++]=new PU(h,c,a.inlineClassName,a.type)}return s}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=PU._typeCompare(e.type,t.type);return 0!==i?i:e.className!==t.className?e.className<t.className?-1:1:0}}class OU{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}}class FU{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let e=0;for(;e+1<this.count&&this.stopOffsets[e]===this.stopOffsets[e+1];)e++;i.push(new OU(t,this.stopOffsets[e],this.classNames.join(" "),FU._metadata(this.metadata))),t=this.stopOffsets[e]+1,this.stopOffsets.splice(0,e+1),this.classNames.splice(0,e+1),this.metadata.splice(0,e+1),this.count-=e+1}return this.count>0&&t<e&&(i.push(new OU(t,e-1,this.classNames.join(" "),FU._metadata(this.metadata))),t=e),t}insert(e,t,i){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}}class BU{static normalize(e,t){if(0===t.length)return[];const i=[],n=new FU;let s=0;for(let r=0,o=t.length;r<o;r++){const o=t[r];let a=o.startColumn,l=o.endColumn;const h=o.className,c=1===o.type?2:2===o.type?4:0;if(a>1){const t=e.charCodeAt(a-2);Tx.pc(t)&&a--}if(l>1){const t=e.charCodeAt(l-2);Tx.pc(t)&&l--}const d=a-1,u=l-2;s=n.consumeLowerThan(d,s,i),0===n.count&&(s=d),n.insert(u,h,c)}return n.consumeLowerThan(1073741824,s,i),i}}class zU{constructor(e,t,i,n){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=n,this._linePartBrand=void 0}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}}class VU{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class WU{constructor(e,t,i,n,s,r,o,a,l,h,c,d,u,g,p,f,m,_,v){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=s,this.containsRTL=r,this.fauxIndentLength=o,this.lineTokens=a,this.lineDecorations=l.sort(PU.compare),this.tabSize=h,this.startVisibleColumn=c,this.spaceWidth=d,this.stopRenderingLineAfter=p,this.renderWhitespace="all"===f?4:"boundary"===f?1:"selection"===f?2:"trailing"===f?3:0,this.renderControlCharacters=m,this.fontLigatures=_,this.selectionsOnLine=v&&v.sort(((e,t)=>e.startOffset<t.startOffset?-1:1));Math.abs(g-d)<Math.abs(u-d)?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=u,this.renderSpaceCharCode=183)}sameSelection(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&PU.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class HU{constructor(e,t){this.partIndex=e,this.charIndex=t}}class UU{static getPartIndex(e){return(4294901760&e)>>>16}static getCharIndex(e){return(65535&e)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,n){const s=(t<<16|i)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=n}getHorizontalOffset(e){return 0===this._horizontalOffset.length?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=UU.getPartIndex(t),n=UU.getCharIndex(t);return new HU(i,n)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(0===this.length)return 0;const n=(e<<16|i)>>>0;let s=0,r=this.length-1;for(;s+1<r;){const e=s+r>>>1,t=this._data[e];if(t===n)return e;t>n?r=e:s=e}if(s===r)return s;const o=this._data[s],a=this._data[r];if(o===n)return s;if(a===n)return r;const l=UU.getPartIndex(o),h=UU.getCharIndex(o);let c;c=l!==UU.getPartIndex(a)?t:UU.getCharIndex(a);return i-h<=c-i?s:r}}class jU{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function GU(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendString("<span>");let i=0,n=0,s=0;for(const o of e.lineDecorations)1!==o.type&&2!==o.type||(t.appendString('<span class="'),t.appendString(o.className),t.appendString('"></span>'),1===o.type&&(s|=1,i++),2===o.type&&(s|=2,n++));t.appendString("</span>");const r=new UU(1,i+n);return r.setColumnInfo(1,i,0,0),new jU(r,!1,s)}return t.appendString("<span><span></span></span>"),new jU(new UU(0,0),!1,0)}return function(e,t){const i=e.fontIsMonospace,n=e.canUseHalfwidthRightwardsArrow,s=e.containsForeignElements,r=e.lineContent,o=e.len,a=e.isOverflowing,l=e.overflowingCharCount,h=e.parts,c=e.fauxIndentLength,d=e.tabSize,u=e.startVisibleColumn,g=e.containsRTL,p=e.spaceWidth,f=e.renderSpaceCharCode,m=e.renderWhitespace,_=e.renderControlCharacters,v=new UU(o+1,h.length);let b=!1,y=0,w=u,C=0,S=0,x=0;g?t.appendString('<span dir="ltr">'):t.appendString("<span>");for(let k=0,L=h.length;k<L;k++){const e=h[k],a=e.endIndex,l=e.type,u=e.containsRTL,g=0!==m&&e.isWhitespace(),L=g&&!i&&("mtkw"===l||!s),E=y===a&&e.isPseudoAfter();if(C=0,t.appendString("<span "),u&&t.appendString('style="unicode-bidi:isolate" '),t.appendString('class="'),t.appendString(L?"mtkz":l),t.appendASCIICharCode(34),g){let e=0;{let t=y,i=w;for(;t<a;t++){const n=0|(9===r.charCodeAt(t)?d-i%d:1);e+=n,t>=c&&(i+=n)}}for(L&&(t.appendString(' style="width:'),t.appendString(String(p*e)),t.appendString('px"')),t.appendASCIICharCode(62);y<a;y++){v.setColumnInfo(y+1,k-x,C,S),x=0;let e,i;if(9===r.charCodeAt(y)){e=d-w%d|0,i=e,!n||i>1?t.appendCharCode(8594):t.appendCharCode(65515);for(let e=2;e<=i;e++)t.appendCharCode(160)}else e=2,i=1,t.appendCharCode(f),t.appendCharCode(8204);C+=e,S+=i,y>=c&&(w+=i)}}else for(t.appendASCIICharCode(62);y<a;y++){v.setColumnInfo(y+1,k-x,C,S),x=0;const e=r.charCodeAt(y);let i=1,n=1;switch(e){case 9:i=d-w%d,n=i;for(let e=1;e<=i;e++)t.appendCharCode(160);break;case 32:t.appendCharCode(160);break;case 60:t.appendString("&lt;");break;case 62:t.appendString("&gt;");break;case 38:t.appendString("&amp;");break;case 0:_?t.appendCharCode(9216):t.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.appendCharCode(65533);break;default:Tx.ne(e)&&n++,_&&e<32?t.appendCharCode(9216+e):_&&127===e?t.appendCharCode(9249):_&&QU(e)?(t.appendString("[U+"),t.appendString(XU(e)),t.appendString("]"),i=8,n=i):t.appendCharCode(e)}C+=i,S+=n,y>=c&&(w+=n)}E?x++:x=0,y>=o&&!b&&e.isPseudoAfter()&&(b=!0,v.setColumnInfo(y+1,k,C,S)),t.appendString("</span>")}b||v.setColumnInfo(o+1,h.length-1,C,S);a&&(t.appendString('<span class="mtkoverflow">'),t.appendString(WS.kg("showMore","Show more ({0})",function(e){if(e<1024)return WS.kg("overflow.chars","{0} chars",e);if(e<1048576)return`${(e/1024).toFixed(1)} KB`;return`${(e/1024/1024).toFixed(1)} MB`}(l))),t.appendString("</span>"));return t.appendString("</span>"),new jU(v,g,s)}(function(e){const t=e.lineContent;let i,n,s;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<t.length?(i=!0,n=t.length-e.stopRenderingLineAfter,s=e.stopRenderingLineAfter):(i=!1,n=0,s=t.length);let r=function(e,t,i,n,s){const r=[];let o=0;n>0&&(r[o++]=new zU(n,"",0,!1));let a=n;for(let l=0,h=i.getCount();l<h;l++){const h=i.getEndOffset(l);if(h<=n)continue;const c=i.getClassName(l);if(h>=s){const i=!!t&&Tx.E_(e.substring(a,s));r[o++]=new zU(s,c,0,i);break}const d=!!t&&Tx.E_(e.substring(a,h));r[o++]=new zU(h,c,0,d),a=h}return r}(t,e.containsRTL,e.lineTokens,e.fauxIndentLength,s);e.renderControlCharacters&&!e.isBasicASCII&&(r=function(e,t){const i=[];let n=new zU(0,"",0,!1),s=0;for(const r of t){const t=r.endIndex;for(;s<t;s++){QU(e.charCodeAt(s))&&(s>n.endIndex&&(n=new zU(s,r.type,r.metadata,r.containsRTL),i.push(n)),n=new zU(s+1,"mtkcontrol",r.metadata,!1),i.push(n))}s>n.endIndex&&(n=new zU(t,r.type,r.metadata,r.containsRTL),i.push(n))}return i}(t,r));(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace&&!e.continuesWithWrappedLine)&&(r=function(e,t,i,n){const s=e.continuesWithWrappedLine,r=e.fauxIndentLength,o=e.tabSize,a=e.startVisibleColumn,l=e.useMonospaceOptimizations,h=e.selectionsOnLine,c=1===e.renderWhitespace,d=3===e.renderWhitespace,u=e.renderSpaceWidth!==e.spaceWidth,g=[];let p=0,f=0,m=n[f].type,_=n[f].containsRTL,v=n[f].endIndex;const b=n.length;let y,w=!1,C=Tx.HG(t);-1===C?(w=!0,C=i,y=i):y=Tx.lT(t);let S=!1,x=0,k=h&&h[x],L=a%o;for(let M=r;M<i;M++){const e=t.charCodeAt(M);let s;if(k&&M>=k.endOffset&&(x++,k=h&&h[x]),M<C||M>y)s=!0;else if(9===e)s=!0;else if(32===e)if(c)if(S)s=!0;else{const e=M+1<i?t.charCodeAt(M+1):0;s=32===e||9===e}else s=!0;else s=!1;if(s&&h&&(s=!!k&&k.startOffset<=M&&k.endOffset>M),s&&d&&(s=w||M>y),s&&_&&M>=C&&M<=y&&(s=!1),S){if(!s||!l&&L>=o){if(u){for(let e=(p>0?g[p-1].endIndex:r)+1;e<=M;e++)g[p++]=new zU(e,"mtkw",1,!1)}else g[p++]=new zU(M,"mtkw",1,!1);L%=o}}else(M===v||s&&M>r)&&(g[p++]=new zU(M,m,0,_),L%=o);for(9===e?L=o:Tx.ne(e)?L+=2:L++,S=s;M===v&&(f++,f<b);)m=n[f].type,_=n[f].containsRTL,v=n[f].endIndex}let E=!1;if(S)if(s&&c){const e=i>0?t.charCodeAt(i-1):0,n=i>1?t.charCodeAt(i-2):0;32===e&&32!==n&&9!==n||(E=!0)}else E=!0;if(E)if(u){for(let e=(p>0?g[p-1].endIndex:r)+1;e<=i;e++)g[p++]=new zU(e,"mtkw",1,!1)}else g[p++]=new zU(i,"mtkw",1,!1);else g[p++]=new zU(i,m,0,_);return g}(e,t,s,r));let o=0;if(e.lineDecorations.length>0){for(let t=0,i=e.lineDecorations.length;t<i;t++){const i=e.lineDecorations[t];3===i.type||1===i.type?o|=1:2===i.type&&(o|=2)}r=function(e,t,i,n){n.sort(PU.compare);const s=BU.normalize(e,n),r=s.length;let o=0;const a=[];let l=0,h=0;for(let d=0,u=i.length;d<u;d++){const e=i[d],t=e.endIndex,n=e.type,c=e.metadata,u=e.containsRTL;for(;o<r&&s[o].startOffset<t;){const e=s[o];if(e.startOffset>h&&(h=e.startOffset,a[l++]=new zU(h,n,c,u)),!(e.endOffset+1<=t)){h=t,a[l++]=new zU(h,n+" "+e.className,c|e.metadata,u);break}h=e.endOffset+1,a[l++]=new zU(h,n+" "+e.className,c|e.metadata,u),o++}t>h&&(h=t,a[l++]=new zU(h,n,c,u))}const c=i[i.length-1].endIndex;if(o<r&&s[o].startOffset===c)for(;o<r&&s[o].startOffset===c;){const e=s[o];a[l++]=new zU(h,e.className,e.metadata,!1),o++}return a}(t,0,r,e.lineDecorations)}e.containsRTL||(r=function(e,t,i){let n=0;const s=[];let r=0;if(i)for(let o=0,a=t.length;o<a;o++){const i=t[o],a=i.endIndex;if(n+50<a){const t=i.type,o=i.metadata,l=i.containsRTL;let h=-1,c=n;for(let i=n;i<a;i++)32===e.charCodeAt(i)&&(h=i),-1!==h&&i-c>=50&&(s[r++]=new zU(h+1,t,o,l),c=h+1,h=-1);c!==a&&(s[r++]=new zU(a,t,o,l))}else s[r++]=i;n=a}else for(let o=0,a=t.length;o<a;o++){const e=t[o],i=e.endIndex,a=i-n;if(a>50){const t=e.type,o=e.metadata,l=e.containsRTL,h=Math.ceil(a/50);for(let e=1;e<h;e++){const i=n+50*e;s[r++]=new zU(i,t,o,l)}s[r++]=new zU(i,t,o,l)}else s[r++]=e;n=i}return s}(t,r,!e.isBasicASCII||e.fontLigatures));return new qU(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,t,s,i,n,r,o,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}(e),t)}class KU{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}}function $U(e){const t=new RU.fe(1e4),i=GU(e,t);return new KU(i.characterMapping,t.build(),i.containsRTL,i.containsForeignElements)}class qU{constructor(e,t,i,n,s,r,o,a,l,h,c,d,u,g,p,f){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=s,this.overflowingCharCount=r,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=h,this.startVisibleColumn=c,this.containsRTL=d,this.spaceWidth=u,this.renderSpaceCharCode=g,this.renderWhitespace=p,this.renderControlCharacters=f}}function QU(e){return e<32?9!==e:127===e||(e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e)}function XU(e){return e.toString(16).toUpperCase().padStart(4,"0")}class YU{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=0|e,this.left=0|t,this.width=0|i,this.height=0|n}}class ZU{constructor(e,t){this.tabSize=e,this.data=t}}class JU{constructor(e,t,i,n,s,r,o){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=s,this.tokens=r,this.inlineDecorations=o}}class ej{constructor(e,t,i,n,s,r,o,a,l,h){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=ej.isBasicASCII(i,r),this.containsRTL=ej.containsRTL(i,this.isBasicASCII,s),this.tokens=o,this.inlineDecorations=a,this.tabSize=l,this.startVisibleColumn=h}static isBasicASCII(e,t){return!t||Tx.aC(e)}static containsRTL(e,t,i){return!(t||!i)&&Tx.E_(e)}}class tj{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class ij{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new tj(new JM.Q(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class nj{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class sj{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&OS.aI(e.data,t.data)}static equalsArr(e,t){return OS.aI(e,t,sj.equals)}}function rj(e){return!function(e){return Array.isArray(e)}(e)}function oj(e){return"string"===typeof e}function aj(e){return!oj(e)}function lj(e){return!e}function hj(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function cj(e){return e.replace(/[&<>'"_]/g,"-")}function dj(e,t){console.log(`${e.languageId}: ${t}`)}function uj(e,t){return new Error(`${e.languageId}: ${t}`)}function gj(e,t,i,n,s){let r=null;return t.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,(function(t,o,a,l,h,c,d,u,g){return lj(a)?lj(l)?!lj(h)&&h<n.length?hj(e,n[h]):!lj(d)&&e&&"string"===typeof e[d]?e[d]:(null===r&&(r=s.split("."),r.unshift(s)),!lj(c)&&c<r.length?hj(e,r[c]):""):hj(e,i):"$"}))}function pj(e,t){let i=t;for(;i&&i.length>0;){const t=e.tokenizer[i];if(t)return t;const n=i.lastIndexOf(".");i=n<0?null:i.substr(0,n)}return null}var fj,mj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},_j=function(e,t){return function(i,n){t(i,n,e)}};class vj{static#e=(()=>this._INSTANCE=new vj(5))();static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(null!==e&&e.depth>=this._maxCacheDepth)return new bj(e,t);let i=bj.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new bj(e,t),this._entries[i]=n,n)}}class bj{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;null!==e;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;null!==e&&null!==t;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return null===e&&null===t}equals(e){return bj._equals(this,e)}push(e){return vj.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return vj.create(this.parent,e)}}class yj{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new yj(this.languageId,this.state)}}class wj{static#e=(()=>this._INSTANCE=new wj(5))();static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(null!==t)return new Cj(e,t);if(null!==e&&e.depth>=this._maxCacheDepth)return new Cj(e,t);const i=bj.getStackElementId(e);let n=this._entries[i];return n||(n=new Cj(e,null),this._entries[i]=n,n)}}class Cj{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:wj.create(this.stack,this.embeddedLanguageData)}equals(e){return e instanceof Cj&&(!!this.stack.equals(e.stack)&&(null===this.embeddedLanguageData&&null===e.embeddedLanguageData||null!==this.embeddedLanguageData&&null!==e.embeddedLanguageData&&this.embeddedLanguageData.equals(e.embeddedLanguageData)))}}class Sj{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new RI.ou(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,n){const s=i.languageId,r=i.state,o=RI.dG.get(s);if(!o)return this.enterLanguage(s),this.emit(n,""),r;const a=o.tokenize(e,t,r);if(0!==n)for(const l of a.tokens)this._tokens.push(new RI.ou(l.offset+n,l.type,l.language));else this._tokens=this._tokens.concat(a.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,a.endState}finalize(e){return new RI.$M(this._tokens,e)}}class xj{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=1024|this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const n=null!==e?e.length:0,s=t.length,r=null!==i?i.length:0;if(0===n&&0===s&&0===r)return new Uint32Array(0);if(0===n&&0===s)return i;if(0===s&&0===r)return e;const o=new Uint32Array(n+s+r);null!==e&&o.set(e);for(let a=0;a<s;a++)o[n+a]=t[a];return null!==i&&o.set(i,n+s),o}nestedLanguageTokenize(e,t,i,n){const s=i.languageId,r=i.state,o=RI.dG.get(s);if(!o)return this.enterLanguage(s),this.emit(n,""),r;const a=o.tokenizeEncoded(e,t,r);if(0!==n)for(let l=0,h=a.tokens.length;l<h;l+=2)a.tokens[l]+=n;return this._prependTokens=xj._merge(this._prependTokens,this._tokens,a.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,a.endState}finalize(e){return new RI.rY(xj._merge(this._prependTokens,this._tokens,null),e)}}let kj=fj=class extends Mx.jG{constructor(e,t,i,n,s){super(),this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(RI.dG.onDidChange((e=>{if(r)return;let t=!1;for(let i=0,n=e.changedLanguages.length;i<n;i++){const n=e.changedLanguages[i];if(this._embeddedLanguages[n]){t=!0;break}}t&&(r=!0,RI.dG.handleChange([this._languageId]),r=!1)}))),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=RI.dG.get(t);if(i){if(i instanceof fj){const t=i.getLoadStatus();!1===t.loaded&&e.push(t.promise)}}else RI.dG.isResolved(t)||e.push(RI.dG.getOrCreate(t))}return 0===e.length?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then((e=>{}))}}getInitialState(){const e=vj.create(null,this._lexer.start);return wj.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return(0,PI.$H)(this._languageId,i);const n=new Sj,s=this._tokenize(e,t,i,n);return n.finalize(s)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return(0,PI.Lh)(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const n=new xj(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,i,n);return n.finalize(s)}_tokenize(e,t,i,n){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,n):this._myTokenize(e,t,i,0,n)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=pj(this._lexer,t.stack.state),!i))throw uj(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,s=!1;for(const r of i){if(!aj(r.action)||"@pop"!==r.action.nextEmbedded)continue;s=!0;let i=r.resolveRegex(t.stack.state);const o=i.source;if("^(?:"===o.substr(0,4)&&")"===o.substr(o.length-1,1)){const e=(i.ignoreCase?"i":"")+(i.unicode?"u":"");i=new RegExp(o.substr(4,o.length-5),e)}const a=e.search(i);-1===a||0!==a&&r.matchOnlyAtLineStart||(-1===n||a<n)&&(n=a)}if(!s)throw uj(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,s){const r=this._findLeavingNestedLanguageOffset(e,i);if(-1===r){const r=s.nestedLanguageTokenize(e,t,i.embeddedLanguageData,n);return wj.create(i.stack,new yj(i.embeddedLanguageData.languageId,r))}const o=e.substring(0,r);o.length>0&&s.nestedLanguageTokenize(o,!1,i.embeddedLanguageData,n);const a=e.substring(r);return this._myTokenize(a,t,i,n+r,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,s){s.enterLanguage(this._languageId);const r=e.length,o=t&&this._lexer.includeLF?e+"\n":e,a=o.length;let l=i.embeddedLanguageData,h=i.stack,c=0,d=null,u=!0;for(;u||c<a;){const i=c,g=h.depth,p=d?d.groups.length:0,f=h.state;let m=null,_=null,v=null,b=null,y=null;if(d){m=d.matches;const e=d.groups.shift();_=e.matched,v=e.action,b=d.rule,0===d.groups.length&&(d=null)}else{if(!u&&c>=a)break;u=!1;let e=this._lexer.tokenizer[f];if(!e&&(e=pj(this._lexer,f),!e))throw uj(this._lexer,"tokenizer state is not defined: "+f);const t=o.substr(c);for(const i of e)if((0===c||!i.matchOnlyAtLineStart)&&(m=t.match(i.resolveRegex(f)),m)){_=m[0],v=i.action;break}}if(m||(m=[""],_=""),v||(c<a&&(m=[o.charAt(c)],_=m[0]),v=this._lexer.defaultToken),null===_)break;for(c+=_.length;rj(v)&&aj(v)&&v.test;)v=v.test(_,m,f,c===a);let w=null;if("string"===typeof v||Array.isArray(v))w=v;else if(v.group)w=v.group;else if(null!==v.token&&void 0!==v.token){if(w=v.tokenSubst?gj(this._lexer,v.token,_,m,f):v.token,v.nextEmbedded)if("@pop"===v.nextEmbedded){if(!l)throw uj(this._lexer,"cannot pop embedded language if not inside one");l=null}else{if(l)throw uj(this._lexer,"cannot enter embedded language from within an embedded language");y=gj(this._lexer,v.nextEmbedded,_,m,f)}if(v.goBack&&(c=Math.max(0,c-v.goBack)),v.switchTo&&"string"===typeof v.switchTo){let e=gj(this._lexer,v.switchTo,_,m,f);if("@"===e[0]&&(e=e.substr(1)),!pj(this._lexer,e))throw uj(this._lexer,"trying to switch to a state '"+e+"' that is undefined in rule: "+this._safeRuleName(b));h=h.switchTo(e)}else{if(v.transform&&"function"===typeof v.transform)throw uj(this._lexer,"action.transform not supported");if(v.next)if("@push"===v.next){if(h.depth>=this._lexer.maxStack)throw uj(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(f)}else if("@pop"===v.next){if(h.depth<=1)throw uj(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(b));h=h.pop()}else if("@popall"===v.next)h=h.popall();else{let e=gj(this._lexer,v.next,_,m,f);if("@"===e[0]&&(e=e.substr(1)),!pj(this._lexer,e))throw uj(this._lexer,"trying to set a next state '"+e+"' that is undefined in rule: "+this._safeRuleName(b));h=h.push(e)}}v.log&&"string"===typeof v.log&&dj(this._lexer,this._lexer.languageId+": "+gj(this._lexer,v.log,_,m,f))}if(null===w)throw uj(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(b));const C=i=>{const r=this._languageService.getLanguageIdByLanguageName(i)||this._languageService.getLanguageIdByMimeType(i)||i,o=this._getNestedEmbeddedLanguageData(r);if(c<a){const i=e.substr(c);return this._nestedTokenize(i,t,wj.create(h,o),n+c,s)}return wj.create(h,o)};if(Array.isArray(w)){if(d&&d.groups.length>0)throw uj(this._lexer,"groups cannot be nested: "+this._safeRuleName(b));if(m.length!==w.length+1)throw uj(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(b));let e=0;for(let t=1;t<m.length;t++)e+=m[t].length;if(e!==_.length)throw uj(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(b));d={rule:b,matches:m,groups:[]};for(let t=0;t<w.length;t++)d.groups[t]={action:w[t],matched:m[t+1]};c-=_.length}else{{if("@rematch"===w&&(c-=_.length,_="",m=null,w="",null!==y))return C(y);if(0===_.length){if(0===a||g!==h.depth||f!==h.state||(d?d.groups.length:0)!==p)continue;throw uj(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(b))}let e=null;if(oj(w)&&0===w.indexOf("@brackets")){const t=w.substr(9),i=Lj(this._lexer,_);if(!i)throw uj(this._lexer,"@brackets token returned but no bracket defined as: "+_);e=cj(i.token+t)}else{e=cj(""===w?"":w+this._lexer.tokenPostfix)}i<r&&s.emit(i+n,e)}if(null!==y)return C(y)}}return wj.create(h,l)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new yj(e,PI.r3);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),RI.dG.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=RI.dG.get(e);return new yj(e,t?t.getInitialState():PI.r3)}};function Lj(e,t){if(!t)return null;t=hj(e,t);const i=e.brackets;for(const n of i){if(n.open===t)return{token:n.token,bracketType:1};if(n.close===t)return{token:n.token,bracketType:-1}}return null}kj=fj=mj([_j(4,JT.pG)],kj);const Ej=KM("standaloneColorizer",{createHTML:e=>e});class Mj{static colorizeElement(e,t,i,n){const s=(n=n||{}).theme||"vs",r=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const o=t.getLanguageIdByMimeType(r)||r;e.setTheme(s);const a=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+s;return this.colorize(t,a||"",o,n).then((e=>{const t=Ej?.createHTML(e)??e;i.innerHTML=t}),(e=>console.error(e)))}static async colorize(e,t,i,n){const s=e.languageIdCodec;let r=4;n&&"number"===typeof n.tabSize&&(r=n.tabSize),Tx.LU(t)&&(t=t.substr(1));const o=Tx.uz(t);if(!e.isRegisteredLanguageId(i))return Tj(o,r,s);const a=await RI.dG.getOrCreate(i);return a?function(e,t,i,n){return new Promise(((s,r)=>{const o=()=>{const a=function(e,t,i,n){let s=[],r=i.getInitialState();for(let o=0,a=e.length;o<a;o++){const a=e[o],l=i.tokenizeEncoded(a,!0,r);AI.f.convertToEndOffset(l.tokens,a.length);const h=new AI.f(l.tokens,a,n),c=ej.isBasicASCII(a,!0),d=ej.containsRTL(a,c,!0),u=$U(new WU(!1,!0,a,!1,c,d,0,h.inflate(),[],t,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(u.html),s.push("<br/>"),r=l.endState}return s.join("")}(e,t,i,n);if(i instanceof kj){const e=i.getLoadStatus();if(!1===e.loaded)return void e.promise.then(o,r)}s(a)};o()}))}(o,r,a,s):Tj(o,r,s)}static colorizeLine(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;const r=ej.isBasicASCII(e,t),o=ej.containsRTL(e,r,i);return $U(new WU(!1,!0,e,!1,r,o,0,n,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const n=e.getLineContent(t);e.tokenization.forceTokenization(t);const s=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),s,i)}}function Tj(e,t,i){let n=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let r=0,o=e.length;r<o;r++){const o=e[r];s[0]=o.length;const a=new AI.f(s,o,i),l=ej.isBasicASCII(o,!0),h=ej.containsRTL(o,l,!0),c=$U(new WU(!1,!0,o,!1,l,h,0,a,[],t,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(c.html),n.push("<br/>")}return n.join("")}var Dj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},Nj=function(e,t){return function(i,n){t(i,n,e)}};let Ij=class{static#e=(()=>this.ID="editor.contrib.markerDecorations")();constructor(e,t){}dispose(){}};Ij=Dj([Nj(1,UO.IMarkerDecorationsService)],Ij),zM(Ij.ID,Ij,0);class Aj extends Mx.jG{constructor(e,t){super(),this._onDidChange=this._register(new rk.vl),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,n=!1;const s=()=>{if(i&&!n)try{i=!1,n=!0,t()}finally{IL(fL(this._referenceDomElement),(()=>{n=!1,s()}))}};this._resizeObserver=new ResizeObserver((t=>{e=t&&t[0]&&t[0].contentRect?{width:t[0].contentRect.width,height:t[0].contentRect.height}:null,i=!0,s()})),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,n=this._referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),this._width===i&&this._height===n||(this._width=i,this._height=n,e&&this._onDidChange.fire())}}class Rj{static#e=(()=>this.items=[])();constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Rj._read(e,this.key);this.migrate(t,(t=>Rj._read(e,t)),((t,i)=>Rj._write(e,t,i)))}static _read(e,t){if("undefined"===typeof e)return;const i=t.indexOf(".");if(i>=0){const n=t.substring(0,i);return this._read(e[n],t.substring(i+1))}return e[t]}static _write(e,t,i){const n=t.indexOf(".");if(n>=0){const s=t.substring(0,n);return e[s]=e[s]||{},void this._write(e[s],t.substring(n+1),i)}e[t]=i}}function Pj(e,t){Rj.items.push(new Rj(e,t))}function Oj(e,t){Pj(e,((i,n,s)=>{if("undefined"!==typeof i)for(const[r,o]of t)if(i===r)return void s(e,o)}))}Oj("wordWrap",[[!0,"on"],[!1,"off"]]),Oj("lineNumbers",[[!0,"on"],[!1,"off"]]),Oj("cursorBlinking",[["visible","solid"]]),Oj("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),Oj("renderLineHighlight",[[!0,"line"],[!1,"none"]]),Oj("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),Oj("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),Oj("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),Oj("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),Oj("autoIndent",[[!1,"advanced"],[!0,"full"]]),Oj("matchBrackets",[[!0,"always"],[!1,"never"]]),Oj("renderFinalNewline",[[!0,"on"],[!1,"off"]]),Oj("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),Oj("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),Oj("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),Pj("autoClosingBrackets",((e,t,i)=>{!1===e&&(i("autoClosingBrackets","never"),"undefined"===typeof t("autoClosingQuotes")&&i("autoClosingQuotes","never"),"undefined"===typeof t("autoSurround")&&i("autoSurround","never"))})),Pj("renderIndentGuides",((e,t,i)=>{"undefined"!==typeof e&&(i("renderIndentGuides",void 0),"undefined"===typeof t("guides.indentation")&&i("guides.indentation",!!e))})),Pj("highlightActiveIndentGuide",((e,t,i)=>{"undefined"!==typeof e&&(i("highlightActiveIndentGuide",void 0),"undefined"===typeof t("guides.highlightActiveIndentation")&&i("guides.highlightActiveIndentation",!!e))}));const Fj={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Pj("suggest.filteredTypes",((e,t,i)=>{if(e&&"object"===typeof e){for(const n of Object.entries(Fj)){!1===e[n[0]]&&"undefined"===typeof t(`suggest.${n[1]}`)&&i(`suggest.${n[1]}`,!1)}i("suggest.filteredTypes",void 0)}})),Pj("quickSuggestions",((e,t,i)=>{if("boolean"===typeof e){const t=e?"on":"off";i("quickSuggestions",{comments:t,strings:t,other:t})}})),Pj("experimental.stickyScroll.enabled",((e,t,i)=>{"boolean"===typeof e&&(i("experimental.stickyScroll.enabled",void 0),"undefined"===typeof t("stickyScroll.enabled")&&i("stickyScroll.enabled",e))})),Pj("experimental.stickyScroll.maxLineCount",((e,t,i)=>{"number"===typeof e&&(i("experimental.stickyScroll.maxLineCount",void 0),"undefined"===typeof t("stickyScroll.maxLineCount")&&i("stickyScroll.maxLineCount",e))})),Pj("codeActionsOnSave",((e,t,i)=>{if(e&&"object"===typeof e){let t=!1;const n={};for(const i of Object.entries(e))"boolean"===typeof i[1]?(t=!0,n[i[0]]=i[1]?"explicit":"never"):n[i[0]]=i[1];t&&i("codeActionsOnSave",n)}})),Pj("codeActionWidget.includeNearbyQuickfixes",((e,t,i)=>{"boolean"===typeof e&&(i("codeActionWidget.includeNearbyQuickfixes",void 0),"undefined"===typeof t("codeActionWidget.includeNearbyQuickFixes")&&i("codeActionWidget.includeNearbyQuickFixes",e))})),Pj("lightbulb.enabled",((e,t,i)=>{"boolean"===typeof e&&i("lightbulb.enabled",e?void 0:"off")}));const Bj=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new rk.vl,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}};var zj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},Vj=function(e,t){return function(i,n){t(i,n,e)}};let Wj=class extends Mx.jG{constructor(e,t,i,n,s){super(),this._accessibilityService=s,this._onDidChange=this._register(new rk.vl),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new rk.vl),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new US,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new Aj(n,i.dimension)),this._targetWindowId=fL(n).vscodeWindowId,this._rawOptions=Kj(i),this._validatedOptions=Gj.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register($E.onDidChangeZoomLevel((()=>this._recomputeOptions()))),this._register(Bj.onDidChangeTabFocus((()=>this._recomputeOptions()))),this._register(this._containerObserver.onDidChange((()=>this._recomputeOptions()))),this._register(JE.onDidChange((()=>this._recomputeOptions()))),this._register(VE.getInstance(fL(n)).onDidChange((()=>this._recomputeOptions()))),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized((()=>this._recomputeOptions())))}_recomputeOptions(){const e=this._computeOptions(),t=Gj.checkEquals(this.options,e);null!==t&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=QE.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Bj.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Gj.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:Hj(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Px||Rx,pixelRatio:VE.getInstance(yL(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return JE.readFontInfo(yL(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=Kj(e);Gj.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Gj.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=function(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};function Hj(){let e="";return Fx||Bx||(e+="no-user-select "),Fx&&(e+="no-minimap-shadow ",e+="enable-user-select "),BS.zx&&(e+="mac "),e}Wj=zj([Vj(4,GI)],Wj);class Uj{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class jj{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Gj{static validateOptions(e){const t=new Uj;for(const i of Sx){const n="_never_"===i.name?void 0:e[i.name];t._write(i.id,i.validate(n))}return t}static computeOptions(e,t){const i=new jj;for(const n of Sx)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if("object"!==typeof e||"object"!==typeof t||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return!(!Array.isArray(e)||!Array.isArray(t))&&OS.aI(e,t);if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Gj._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let n=!1;for(const s of Sx){const r=!Gj._deepEquals(e._read(s.id),t._read(s.id));i[s.id]=r,r&&(n=!0)}return n?new HS(i):null}static applyUpdate(e,t){let i=!1;for(const n of Sx)if(t.hasOwnProperty(n.name)){const s=n.applyUpdate(e[n.name],t[n.name]);e[n.name]=s.newValue,i=i||s.didChange}return i}}function Kj(e){const t=FS.Go(e);return function(e){Rj.items.forEach((t=>t.apply(e)))}(t),t}var $j;!function(e){const t={total:0,min:Number.MAX_VALUE,max:0},i={...t},n={...t},s={...t};let r=0;const o={keydown:0,input:0,render:0};function a(){1===o.keydown&&(performance.mark("keydown/end"),o.keydown=2)}function l(){performance.mark("input/start"),o.input=1,d()}function h(){1===o.input&&(performance.mark("input/end"),o.input=2)}function c(){1===o.render&&(performance.mark("render/end"),o.render=2)}function d(){setTimeout(u)}function u(){2===o.keydown&&2===o.input&&2===o.render&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),g("keydown",t),g("input",i),g("render",n),g("inputlatency",s),r++,performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0)}function g(e,t){const i=performance.getEntriesByName(e)[0].duration;t.total+=i,t.min=Math.min(t.min,i),t.max=Math.max(t.max,i)}function p(e){return{average:e.total/r,max:e.max,min:e.min}}function f(e){e.total=0,e.min=Number.MAX_VALUE,e.max=0}e.onKeyDown=function(){u(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(a)},e.onBeforeInput=l,e.onInput=function(){0===o.input&&l(),queueMicrotask(h)},e.onKeyUp=function(){u()},e.onSelectionChange=function(){u()},e.onRenderStart=function(){2===o.keydown&&2===o.input&&0===o.render&&(performance.mark("render/start"),o.render=1,queueMicrotask(c),d())},e.getAndClearMeasurements=function(){if(0===r)return;const e={keydown:p(t),input:p(i),render:p(n),total:p(s),sampleCount:r};return f(t),f(i),f(n),f(s),r=0,e}}($j||($j={}));class qj{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new Qj(this.x-e.scrollX,this.y-e.scrollY)}}class Qj{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new qj(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class Xj{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}}class Yj{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function Zj(e){const t=zL(e);return new Xj(t.left,t.top,t.width,t.height)}function Jj(e,t,i){const n=t.width/e.offsetWidth,s=t.height/e.offsetHeight,r=(i.x-t.x)/n,o=(i.y-t.y)/s;return new Yj(r,o)}class eG extends ik{constructor(e,t,i){super(fL(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new qj(this.posx,this.posy),this.editorPos=Zj(i),this.relativePos=Jj(i,this.editorPos,this.pos)}}class tG{constructor(e){this._editorViewDomNode=e}_create(e){return new eG(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return EL(e,"contextmenu",(e=>{t(this._create(e))}))}onMouseUp(e,t){return EL(e,"mouseup",(e=>{t(this._create(e))}))}onMouseDown(e,t){return EL(e,gE.MOUSE_DOWN,(e=>{t(this._create(e))}))}onPointerDown(e,t){return EL(e,gE.POINTER_DOWN,(e=>{t(this._create(e),e.pointerId)}))}onMouseLeave(e,t){return EL(e,gE.MOUSE_LEAVE,(e=>{t(this._create(e))}))}onMouseMove(e,t){return EL(e,"mousemove",(e=>t(this._create(e))))}}class iG{constructor(e){this._editorViewDomNode=e}_create(e){return new eG(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return EL(e,"pointerup",(e=>{t(this._create(e))}))}onPointerDown(e,t){return EL(e,gE.POINTER_DOWN,(e=>{t(this._create(e),e.pointerId)}))}onPointerLeave(e,t){return EL(e,gE.POINTER_LEAVE,(e=>{t(this._create(e))}))}onPointerMove(e,t){return EL(e,"pointermove",(e=>t(this._create(e))))}}class nG extends Mx.jG{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new aD),this._keydownListener=null}startMonitoring(e,t,i,n,s){this._keydownListener=TL(e.ownerDocument,"keydown",(e=>{e.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,e.browserEvent)}),!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,(e=>{n(new eG(e,!0,this._editorViewDomNode))}),(e=>{this._keydownListener.dispose(),s(e)}))}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class sG{static#e=(()=>this._idPool=0)();constructor(e){this._editor=e,this._instanceId=++sG._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new sk.uC((()=>this.garbageCollect()),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const n=this._counter++;i=new rG(t,`dyn-rule-${this._instanceId}-${n}`,qL(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class rG{constructor(e,t,i,n){this.key=e,this.className=t,this.properties=n,this._referenceCount=0,this._styleElementDisposables=new Mx.Cm,this._styleElement=iE(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const n in t){const e=t[n];let s;s="object"===typeof e?(0,ZT.GuP)(e.id):e;i+=`\n\t${oG(n)}: ${s};`}return i+="\n}",i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function oG(e){return e.replace(/(^[A-Z])/,(e=>{let[t]=e;return t.toLowerCase()})).replace(/([A-Z])/g,(e=>{let[t]=e;return`-${t.toLowerCase()}`}))}class aG extends Mx.jG{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){const n=e[i];switch(n.type){case 0:this.onCompositionStart(n)&&(t=!0);break;case 1:this.onCompositionEnd(n)&&(t=!0);break;case 2:this.onConfigurationChanged(n)&&(t=!0);break;case 3:this.onCursorStateChanged(n)&&(t=!0);break;case 4:this.onDecorationsChanged(n)&&(t=!0);break;case 5:this.onFlushed(n)&&(t=!0);break;case 6:this.onFocusChanged(n)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(n)&&(t=!0);break;case 8:this.onLineMappingChanged(n)&&(t=!0);break;case 9:this.onLinesChanged(n)&&(t=!0);break;case 10:this.onLinesDeleted(n)&&(t=!0);break;case 11:this.onLinesInserted(n)&&(t=!0);break;case 12:this.onRevealRangeRequest(n)&&(t=!0);break;case 13:this.onScrollChanged(n)&&(t=!0);break;case 15:this.onTokensChanged(n)&&(t=!0);break;case 14:this.onThemeChanged(n)&&(t=!0);break;case 16:this.onTokensColorsChanged(n)&&(t=!0);break;case 17:this.onZonesChanged(n)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(n)}}t&&(this._shouldRender=!0)}}class lG extends aG{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class hG{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}static collect(e,t){const i=[];let n=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=i[n-r-1];return s}}class cG{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class dG extends cG{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class uG{constructor(e,t,i,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=n}}class gG{static from(e){const t=new Array(e.length);for(let i=0,n=e.length;i<n;i++){const n=e[i];t[i]=new gG(n.left,n.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class pG{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class fG{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class mG{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class _G{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,s){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,n),r.getClientRects()}catch(O2){return null}finally{this._detachRange(r,s)}}static _mergeAdjacentRanges(e){if(1===e.length)return e;e.sort(pG.compare);const t=[];let i=0,n=e[0];for(let s=1,r=e.length;s<r;s++){const r=e[s];n.left+n.width+.9>=r.left?n.width=Math.max(n.width,r.left+r.width-n.left):(t[i++]=n,n=r)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||0===e.length)return null;const n=[];for(let s=0,r=e.length;s<r;s++){const r=e[s];n[s]=new pG(Math.max(0,(r.left-t)/i),r.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,s,r){const o=e.children.length-1;if(0>o)return null;if((t=Math.min(o,Math.max(0,t)))===(n=Math.min(o,Math.max(0,n)))&&i===s&&0===i&&!e.children[t].firstChild){const i=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(i,r.clientRectDeltaLeft,r.clientRectScale)}t!==n&&n>0&&0===s&&(n--,s=1073741824);let a=e.children[t].firstChild,l=e.children[n].firstChild;if(a&&l||(!a&&0===i&&t>0&&(a=e.children[t-1].firstChild,i=1073741824),!l&&0===s&&n>0&&(l=e.children[n-1].firstChild,s=1073741824)),!a||!l)return null;i=Math.min(a.textContent.length,Math.max(0,i)),s=Math.min(l.textContent.length,Math.max(0,s));const h=this._readClientRects(a,i,l,s,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}}const vG=!!BS.ib||!(BS.j9||Rx||Fx);let bG=!0;class yG{constructor(e,t){this.themeType=t;const i=e.options,n=i.get(50),s=i.get(38);this.renderWhitespace="off"===s?i.get(100):"none",this.renderControlCharacters=i.get(95),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class wG{static#e=(()=>this.CLASS_NAME="view-line")();constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=UE(e)}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return!(!(0,JP.Bb)(this._options.themeType)&&"selection"!==this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}renderLine(e,t,i,n,s){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;const r=n.getViewLineRenderingData(e),o=this._options,a=PU.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let l=null;if((0,JP.Bb)(o.themeType)||"selection"===this._options.renderWhitespace){const t=n.selections;for(const i of t){if(i.endLineNumber<e||i.startLineNumber>e)continue;const t=i.startLineNumber===e?i.startColumn:r.minColumn,n=i.endLineNumber===e?i.endColumn:r.maxColumn;t<n&&((0,JP.Bb)(o.themeType)&&a.push(new PU(t,n,"inline-selected-text",0)),"selection"===this._options.renderWhitespace&&(l||(l=[]),l.push(new VU(t-1,n-1))))}}const h=new WU(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,a,r.tabSize,r.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==ax.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(h))return!1;s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;" class="'),s.appendString(wG.CLASS_NAME),s.appendString('">');const c=GU(h,s);s.appendString("</div>");let d=null;return bG&&vG&&r.isBasicASCII&&o.useMonospaceOptimizations&&0===c.containsForeignElements&&(d=new CG(this._renderedViewLine?this._renderedViewLine.domNode:null,h,c.characterMapping)),d||(d=kG(this._renderedViewLine?this._renderedViewLine.domNode:null,h,c.characterMapping,c.containsRTL,c.containsForeignElements)),this._renderedViewLine=d,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof CG}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof CG?this._renderedViewLine.monospaceAssumptionsAreValid():bG}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof CG&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(-1!==s&&t>s+1&&i>s+1)return new mG(!0,[new pG(this.getWidth(n),0)]);-1!==s&&t>s+1&&(t=s+1),-1!==s&&i>s+1&&(i=s+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return r&&r.length>0?new mG(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}class CG{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const n=Math.floor(t.lineContent.length/300);if(n>0){this._keyColumnPixelOffsetCache=new Float32Array(n);for(let e=0;e<n;e++)this._keyColumnPixelOffsetCache[e]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const e=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*e)}return-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||-1!==this._cachedWidth}monospaceAssumptionsAreValid(){if(!this.domNode)return bG;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),bG=!1)}return bG}toSlowRenderedLine(){return kG(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){const s=this._getColumnPixelOffset(e,t,n),r=this._getColumnPixelOffset(e,i,n);return[new pG(s,r-s)]}_getColumnPixelOffset(e,t,i){if(t<=300){const e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}const n=Math.floor((t-1)/300)-1,s=300*(n+1)+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[n],-1===r&&(r=this._actualReadPixelOffset(e,s,i),this._keyColumnPixelOffsetCache[n]=r)),-1===r){const e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}const o=this._characterMapping.getHorizontalOffset(s),a=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(a-o)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const n=this._characterMapping.getDomPosition(t),s=_G.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return s&&0!==s.length?s[0].left:-1}getColumnOfNodeOffset(e,t){return MG(this._characterMapping,e,t)}}class SG{constructor(e,t,i,n,s){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let e=0,t=this._characterMapping.length;e<=t;e++)this._pixelOffsetCache[e]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return-1!==this._cachedWidth}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){const s=this._readPixelOffset(this.domNode,e,t,n);if(-1===s)return null;const r=this._readPixelOffset(this.domNode,e,i,n);return-1===r?null:[new pG(s,r-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,s){if(i===n){const n=this._readPixelOffset(e,t,i,s);return-1===n?null:[new pG(n,0)]}return this._readRawVisibleRangesForRange(e,i,n,s)}_readPixelOffset(e,t,i,n){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth(n);const t=this._getReadingTarget(e);return t.firstChild?(n.markDidDomLayout(),t.firstChild.offsetWidth):0}if(null!==this._pixelOffsetCache){const s=this._pixelOffsetCache[i];if(-1!==s)return s;const r=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(0===this._characterMapping.length){const t=_G.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return t&&0!==t.length?t[0].left:-1}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth(n);const s=this._characterMapping.getDomPosition(i),r=_G.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,n);if(!r||0===r.length)return-1;const o=r[0].left;if(this.input.isBasicASCII){const e=this._characterMapping.getHorizontalOffset(i),t=Math.round(this.input.spaceWidth*e);if(Math.abs(t-o)<=1)return t}return o}_readRawVisibleRangesForRange(e,t,i,n){if(1===t&&i===this._characterMapping.length)return[new pG(0,this.getWidth(n))];const s=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return _G.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,r.partIndex,r.charIndex,n)}getColumnOfNodeOffset(e,t){return MG(this._characterMapping,e,t)}}class xG extends SG{_readVisibleRangesForRange(e,t,i,n,s){const r=super._readVisibleRangesForRange(e,t,i,n,s);if(!r||0===r.length||i===n||1===i&&n===this._characterMapping.length)return r;if(!this.input.containsRTL){const i=this._readPixelOffset(e,t,n,s);if(-1!==i){const e=r[r.length-1];e.left<i&&(e.width=i-e.left)}}return r}}const kG=Px?LG:EG;function LG(e,t,i,n,s){return new xG(e,t,i,n,s)}function EG(e,t,i,n,s){return new SG(e,t,i,n,s)}function MG(e,t,i){const n=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return e.getColumn(new HU(s,i),n)}var TG,DG=i(5242);class NG{static whitespaceVisibleColumn(e,t,i){const n=e.length;let s=0,r=-1,o=-1;for(let a=0;a<n;a++){if(a===t)return[r,o,s];s%i===0&&(r=a,o=s);switch(e.charCodeAt(a)){case 32:s+=1;break;case 9:s=DG.A.nextRenderTabStop(s,i);break;default:return[-1,-1,-1]}}return t===n?[r,o,s]:[-1,-1,-1]}static atomicPosition(e,t,i,n){const s=e.length,[r,o,a]=NG.whitespaceVisibleColumn(e,t,i);if(-1===a)return-1;let l;switch(n){case 0:l=!0;break;case 1:l=!1;break;case 2:if(a%i===0)return t;l=a%i<=i/2}if(l){if(-1===r)return-1;let t=o;for(let n=r;n<s;++n){if(t===o+i)return r;switch(e.charCodeAt(n)){case 32:t+=1;break;case 9:t=DG.A.nextRenderTabStop(t,i);break;default:return-1}}return t===o+i?r:-1}const h=DG.A.nextRenderTabStop(a,i);let c=a;for(let d=t;d<s;d++){if(c===h)return d;switch(e.charCodeAt(d)){case 32:c+=1;break;case 9:c=DG.A.nextRenderTabStop(c,i);break;default:return-1}}return c===h?s:-1}}class IG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.hitTarget=e,this.type=0}}class AG{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}!function(e){e.createFromDOMInfo=function(e,t,i){const n=e.getPositionFromDOMInfo(t,i);return n?new AG(n,t,null):new IG(t)}}(TG||(TG={}));class RG{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class PG{static _deduceRage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!t&&e?new JM.Q(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,n,s,r){return{type:e,element:t,mouseColumn:i,position:n,range:s,detail:r}}static createViewZone(e,t,i,n,s){return{type:e,element:t,mouseColumn:i,position:n,range:this._deduceRage(n),detail:s}}static createContentText(e,t,i,n,s){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,n),detail:s}}static createContentEmpty(e,t,i,n){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:n}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,n){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:n}}static _typeToString(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class OG{static isTextArea(e){return 2===e.length&&3===e[0]&&7===e[1]}static isChildOfViewLines(e){return e.length>=4&&3===e[0]&&8===e[3]}static isStrictChildOfViewLines(e){return e.length>4&&3===e[0]&&8===e[3]}static isChildOfScrollableElement(e){return e.length>=2&&3===e[0]&&6===e[1]}static isChildOfMinimap(e){return e.length>=2&&3===e[0]&&9===e[1]}static isChildOfContentWidgets(e){return e.length>=4&&3===e[0]&&1===e[3]}static isChildOfOverflowGuard(e){return e.length>=1&&3===e[0]}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&2===e[0]}static isChildOfOverlayWidgets(e){return e.length>=2&&3===e[0]&&4===e[1]}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&5===e[0]}}class FG{constructor(e,t,i){this.viewModel=e.viewModel;const n=e.configuration.options;this.layoutInfo=n.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(67),this.stickyTabStops=n.get(117),this.typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return FG.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const n=i.verticalOffset+i.height/2,s=e.viewModel.getLineCount();let r,o=null,a=null;return i.afterLineNumber!==s&&(a=new OA.y(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new OA.y(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),r=null===a?o:null===o?a:t<n?o:a,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:a,position:r}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const e=this._context.viewModel.getLineCount(),t=this._context.viewModel.getLineMaxColumn(e);return{range:new JM.Q(e,t,e,t),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new JM.Q(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return FG._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class BG{constructor(e,t,i,n){this.editorPos=t,this.pos=i,this.relativePos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,HG._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class zG extends BG{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=hG.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,n,s){super(e,t,i,n),this.hitTestResult=new KN.d((()=>HG.doHitTest(this._ctx,this))),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=s;const r=Boolean(this._eventTarget);this._useHitTestTarget=!r}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\n\ttarget: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&null!==this.hitTestResult.value.hitTarget&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?DG.A.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return PG.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return PG.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,n){return PG.createMargin(e,this.target,this._getMouseColumn(t),t,i,n)}fulfillViewZone(e,t,i){return PG.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return PG.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return PG.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return PG.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return PG.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return PG.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const VG={isAfterLines:!0};function WG(e){return{isAfterLines:!1,horizontalDistanceToText:e}}class HG{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=hG.collect(t,this._viewHelper.viewDomNode);return!(!OG.isChildOfContentWidgets(i)&&!OG.isChildOfOverflowingContentWidgets(i))||!(!OG.isChildOfOverlayWidgets(i)&&!OG.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,n,s){const r=new FG(this._context,this._viewHelper,e),o=new zG(r,t,i,n,s);try{const e=HG._createMouseTarget(r,o);if(6===e.type&&r.stickyTabStops&&null!==e.position){const t=HG._snapToSoftTabBoundary(e.position,r.viewModel),i=JM.Q.fromPositions(t,t).plusRange(e.range);return o.fulfillContentText(t,i,e.detail)}return e}catch(a){return o.fulfillUnknown()}}static _createMouseTarget(e,t){if(null===t.target)return t.fulfillUnknown();const i=t;let n=null;return OG.isChildOfOverflowGuard(t.targetPath)||OG.isChildOfOverflowingContentWidgets(t.targetPath)||OG.isChildOfOverflowingOverlayWidgets(t.targetPath)||(n=n||t.fulfillUnknown()),n=n||HG._hitTestContentWidget(e,i),n=n||HG._hitTestOverlayWidget(e,i),n=n||HG._hitTestMinimap(e,i),n=n||HG._hitTestScrollbarSlider(e,i),n=n||HG._hitTestViewZone(e,i),n=n||HG._hitTestMargin(e,i),n=n||HG._hitTestViewCursor(e,i),n=n||HG._hitTestTextArea(e,i),n=n||HG._hitTestViewLines(e,i),n=n||HG._hitTestScrollbar(e,i),n||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(OG.isChildOfContentWidgets(t.targetPath)||OG.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(OG.isChildOfOverlayWidgets(t.targetPath)||OG.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const e of i)if(t.target===e.domNode)return t.fulfillContentText(e.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const r of i){if(n<r.contentLeft)continue;if(n>r.contentLeft+r.width)continue;const i=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(i<=s&&s<=i+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const e=t.isInContentArea?8:5;return t.fulfillViewZone(e,i.position,i)}return null}static _hitTestTextArea(e,t){return OG.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition();let s=Math.abs(t.relativePos.x);const r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};if(s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth){const o=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),a=e.viewModel.glyphLanes.getLanesAtLine(o.lineNumber);return r.glyphMarginLane=a[Math.floor(s/e.lineHeight)],t.fulfillMargin(2,n,i.range,r)}return s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,n,i.range,r):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,n,i.range,r))}return null}static _hitTestViewLines(e,t){if(!OG.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new OA.y(1,1),VG);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const i=e.viewModel.getLineCount(),n=e.viewModel.getLineMaxColumn(i);return t.fulfillContentEmpty(new OA.y(i,n),VG)}if(OG.isStrictChildOfViewLines(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(0===e.viewModel.getLineLength(i)){const n=e.getLineWidth(i),s=WG(t.mouseContentHorizontalOffset-n);return t.fulfillContentEmpty(new OA.y(i,1),s)}const n=e.getLineWidth(i);if(t.mouseContentHorizontalOffset>=n){const s=WG(t.mouseContentHorizontalOffset-n),r=new OA.y(i,e.viewModel.getLineMaxColumn(i));return t.fulfillContentEmpty(r,s)}}const i=t.hitTestResult.value;return 1===i.type?HG.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(OG.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new OA.y(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(OG.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new OA.y(i,n))}}return null}static _hitTestScrollbar(e,t){if(OG.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new OA.y(i,n))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),n=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return HG._getMouseColumn(n,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){if(e<0)return 1;return Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,s){const r=n.lineNumber,o=n.column,a=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>a){const e=WG(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(n,e)}const l=e.visibleRangeForPosition(r,o);if(!l)return t.fulfillUnknown(n);const h=l.left;if(Math.abs(t.mouseContentHorizontalOffset-h)<1)return t.fulfillContentText(n,null,{mightBeForeignElement:!!s,injectedText:s});const c=[];if(c.push({offset:l.left,column:o}),o>1){const t=e.visibleRangeForPosition(r,o-1);t&&c.push({offset:t.left,column:o-1})}if(o<e.viewModel.getLineMaxColumn(r)){const t=e.visibleRangeForPosition(r,o+1);t&&c.push({offset:t.left,column:o+1})}c.sort(((e,t)=>e.offset-t.offset));const d=t.pos.toClientCoordinates(fL(e.viewDomNode)),u=i.getBoundingClientRect(),g=u.left<=d.clientX&&d.clientX<=u.right;let p=null;for(let f=1;f<c.length;f++){const e=c[f-1],i=c[f];if(e.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=i.offset){p=new JM.Q(r,e.column,r,i.column);n=Math.abs(e.offset-t.mouseContentHorizontalOffset)<Math.abs(i.offset-t.mouseContentHorizontalOffset)?new OA.y(r,e.column):new OA.y(r,i.column);break}}return t.fulfillContentText(n,p,{mightBeForeignElement:!g||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.getVerticalOffsetForLineNumber(i),s=n+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const i=Math.floor((n+s)/2);let r=t.pos.y+(i-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+t.editorPos.height&&(r=t.editorPos.y+t.editorPos.height-1);const o=new qj(t.pos.x,r),a=this._actualDoHitTestWithCaretRangeFromPoint(e,o.toClientCoordinates(fL(e.viewDomNode)));if(1===a.type)return a}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(fL(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=QL(e.viewDomNode);let n;if(n=i?"undefined"===typeof i.caretRangeFromPoint?function(e,t,i){const n=document.createRange();let s=e.elementFromPoint(t,i);if(null!==s){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const e=s.getBoundingClientRect(),i=fL(s),r=`${i.getComputedStyle(s,null).getPropertyValue("font-style")} ${i.getComputedStyle(s,null).getPropertyValue("font-variant")} ${i.getComputedStyle(s,null).getPropertyValue("font-weight")} ${i.getComputedStyle(s,null).getPropertyValue("font-size")}/${i.getComputedStyle(s,null).getPropertyValue("line-height")} ${i.getComputedStyle(s,null).getPropertyValue("font-family")}`,o=s.innerText;let a,l=e.left,h=0;if(t>e.left+e.width)h=o.length;else{const e=UG.getInstance();for(let i=0;i<o.length+1;i++){if(a=e.getCharWidth(o.charAt(i),r)/2,l+=a,t<l){h=i;break}l+=a}}n.setStart(s.firstChild,h),n.setEnd(s.firstChild,h)}return n}(i,t.clientX,t.clientY):i.caretRangeFromPoint(t.clientX,t.clientY):e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new IG;const s=n.startContainer;if(s.nodeType===s.TEXT_NODE){const t=s.parentNode,i=t?t.parentNode:null,r=i?i.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===wG.CLASS_NAME?TG.createFromDOMInfo(e,t,n.startOffset):new IG(s.parentNode)}if(s.nodeType===s.ELEMENT_NODE){const t=s.parentNode,i=t?t.parentNode:null;return(i&&i.nodeType===i.ELEMENT_NODE?i.className:null)===wG.CLASS_NAME?TG.createFromDOMInfo(e,s,s.textContent.length):new IG(s)}return new IG}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const t=i.offsetNode.parentNode,n=t?t.parentNode:null,s=n?n.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===wG.CLASS_NAME?TG.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new IG(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const t=i.offsetNode.parentNode,n=t&&t.nodeType===t.ELEMENT_NODE?t.className:null,s=t?t.parentNode:null,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(n===wG.CLASS_NAME){const t=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(t)return TG.createFromDOMInfo(e,t,0)}else if(r===wG.CLASS_NAME)return TG.createFromDOMInfo(e,i.offsetNode,0)}return new IG(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:n}=t.model.getOptions(),s=NG.atomicPosition(i,e.column-1,n,2);return-1!==s?new OA.y(e.lineNumber,s+1):e}static doHitTest(e,t){let i=new IG;if("function"===typeof e.viewDomNode.ownerDocument.caretRangeFromPoint?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(fL(e.viewDomNode)))),1===i.type){const t=e.viewModel.getInjectedTextAt(i.position),n=e.viewModel.normalizePosition(i.position,2);!t&&n.equals(i.position)||(i=new AG(n,i.spanNode,t))}return i}}class UG{static#e=(()=>this._INSTANCE=null)();static getInstance(){return UG._INSTANCE||(UG._INSTANCE=new UG),UG._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const n=this._canvas.getContext("2d");n.font=t;const s=n.measureText(e).width;return this._cache[i]=s,s}}var jG=i(7817);class GG extends aG{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new HG(this._context,i),this._mouseDownOperation=this._register(new KG(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,((e,t)=>this._createMouseTarget(e,t)),(e=>this._getMouseColumn(e)))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const n=new tG(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,(e=>this._onContextMenu(e,!0)))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,(e=>{this._onMouseMove(e),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=EL(this.viewHelper.viewDomNode.ownerDocument,"mousemove",(e=>{this.viewHelper.viewDomNode.contains(e.target)||this._onMouseLeave(new eG(e,!1,this.viewHelper.viewDomNode))})))}))),this._register(n.onMouseUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e))));let s=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,((e,t)=>{s=t}))),this._register(EL(this.viewHelper.viewDomNode,gE.POINTER_UP,(e=>{this._mouseDownOperation.onPointerUp()}))),this._register(n.onMouseDown(this.viewHelper.viewDomNode,(e=>this._onMouseDown(e,s)))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=ED.INSTANCE;let t=0,i=$E.getZoomLevel(),n=!1,s=0;function r(e){return BS.zx?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey}this._register(EL(this.viewHelper.viewDomNode,gE.MOUSE_WHEEL,(o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(76))return;const a=new nk(o);if(e.acceptStandardWheelEvent(a),e.isPhysicalMouseWheel()){if(r(o)){const e=$E.getZoomLevel(),t=a.deltaY>0?1:-1;$E.setZoomLevel(e+t),a.preventDefault(),a.stopPropagation()}}else Date.now()-t>50&&(i=$E.getZoomLevel(),n=r(o),s=0),t=Date.now(),s+=a.deltaY,n&&($E.setZoomLevel(i+s/5),a.preventDefault(),a.stopPropagation())}),{capture:!0,passive:!1}))}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const e=this._context.configuration.options.get(146).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const i=new Qj(e,t).toPageCoordinates(fL(this.viewHelper.viewDomNode)),n=Zj(this.viewHelper.viewDomNode);if(i.y<n.y||i.y>n.y+n.height||i.x<n.x||i.x>n.x+n.width)return null;const s=Jj(this.viewHelper.viewDomNode,n,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),n,i,s,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const t=QL(this.viewHelper.viewDomNode);t&&(i=t.elementsFromPoint(e.posx,e.posy).find((e=>this.viewHelper.viewDomNode.contains(e))))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){if(this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),this._mouseDownOperation.isActive())return;e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),n=6===i.type||7===i.type,s=2===i.type||3===i.type||4===i.type,r=3===i.type,o=this._context.configuration.options.get(110),a=8===i.type||5===i.type,l=9===i.type;let h=e.leftButton||e.middleButton;BS.zx&&e.leftButton&&e.ctrlKey&&(h=!1);const c=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(h&&(n||r&&o))c(),this._mouseDownOperation.start(i.type,e,t);else if(s)e.preventDefault();else if(a){const n=i.detail;h&&this.viewHelper.shouldSuppressMouseDownOnViewZone(n.viewZoneId)&&(c(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(c(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class KG extends Mx.jG{constructor(e,t,i,n,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=n,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new nG(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new $G(this._context,this._viewHelper,this._mouseTargetFactory,((e,t,i)=>this._dispatchMouse(e,t,i)))),this._mouseState=new QG,this._currentSelection=new jG.L(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):13!==t.type||"above"!==t.outsidePosition&&"below"!==t.outsidePosition?(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)):this._topBottomDragScrolling.start(t,e))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(92)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===n.type&&n.position&&this._currentSelection.containsPosition(n.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,(e=>this._onMouseDownThenMove(e)),(e=>{const t=this._findMousePosition(this._lastMouseEvent,!1);uE(e)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:t?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,(e=>this._onMouseDownThenMove(e)),(()=>this._stop())))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,n=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const i=t.y-e.posy,r=Math.max(n.getCurrentScrollTop()-i,0),o=FG.getZoneAtCoord(this._context,r);if(o){const e=this._helpPositionJumpOverViewZone(o);if(e)return PG.createOutsideEditor(s,e,"above",i)}const a=n.getLineNumberAtVerticalOffset(r);return PG.createOutsideEditor(s,new OA.y(a,1),"above",i)}if(e.posy>t.y+t.height){const r=e.posy-t.y-t.height,o=n.getCurrentScrollTop()+e.relativePos.y,a=FG.getZoneAtCoord(this._context,o);if(a){const e=this._helpPositionJumpOverViewZone(a);if(e)return PG.createOutsideEditor(s,e,"below",r)}const l=n.getLineNumberAtVerticalOffset(o);return PG.createOutsideEditor(s,new OA.y(l,i.getLineMaxColumn(l)),"below",r)}const r=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const i=t.x-e.posx;return PG.createOutsideEditor(s,new OA.y(r,1),"left",i)}if(e.posx>t.x+t.width){const n=e.posx-t.x-t.width;return PG.createOutsideEditor(s,new OA.y(r,i.getLineMaxColumn(r)),"right",n)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const n=this._createMouseTarget(e,t);if(!n.position)return null;if(8===n.type||5===n.type){const e=this._helpPositionJumpOverViewZone(n.detail);if(e)return PG.createViewZone(n.type,n.element,n.mouseColumn,e,n.detail)}return n}_helpPositionJumpOverViewZone(e){const t=new OA.y(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===e.type&&null!==e.detail.injectedText})}}class $G extends Mx.jG{constructor(e,t,i,n){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new qG(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class qG extends Mx.jG{constructor(e,t,i,n,s,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=IL(fL(r.browserEvent),(()=>this._execute()))}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed()*(this._tick()/1e3)*e,i="above"===this._position.outsidePosition?-t:t;this._context.viewModel.viewLayout.deltaScrollNow(0,i),this._viewHelper.renderNow();const n=this._context.viewLayout.getLinesViewportData(),s="above"===this._position.outsidePosition?n.startLineNumber:n.endLineNumber;let r;{const e=Zj(this._viewHelper.viewDomNode),t=this._context.configuration.options.get(146).horizontalScrollbarHeight,i=new qj(this._mouseEvent.pos.x,e.y+e.height-t-.1),n=Jj(this._viewHelper.viewDomNode,e,i);r=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),e,i,n,null)}r.position&&r.position.lineNumber===s||(r="above"===this._position.outsidePosition?PG.createOutsideEditor(this._position.mouseColumn,new OA.y(s,1),"above",this._position.outsideDistance):PG.createOutsideEditor(this._position.mouseColumn,new OA.y(s,this._context.viewModel.getLineMaxColumn(s)),"below",this._position.outsideDistance)),this._dispatchMouse(r,!0,2),this._animationFrameDisposable=IL(fL(r.element),(()=>this._execute()))}}class QG{static#e=(()=>this.CLEAR_MOUSE_DOWN_COUNT_TIME=400)();get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=(new Date).getTime();i-this._lastSetMouseDownCountTime>QG.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}class XG{static#e=(()=>this.EMPTY=new XG("",0,0,null,void 0))();constructor(e,t,i,n,s){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=n,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),n=e.getSelectionStart(),s=e.getSelectionEnd();let r;if(t){i.substring(0,n)===t.value.substring(0,t.selectionStart)&&(r=t.newlineCountBeforeSelection)}return new XG(i,n,s,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new XG(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const t=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,-1)}if(e>=this.selectionEnd){const t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,t,1)}const t=this.value.substring(this.selectionStart,e);if(-1===t.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,s=-1;for(;-1!==(s=t.indexOf("\n",s+1));)n++;return[e,i*t.length,n]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const n=Math.min(Tx.Qp(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(Tx.Vi(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd),r=(e.value.substring(n,e.value.length-s),t.value.substring(n,t.value.length-s)),o=e.selectionStart-n,a=e.selectionEnd-n,l=t.selectionStart-n,h=t.selectionEnd-n;if(l===h){const t=e.selectionStart-n;return{text:r,replacePrevCharCnt:t,replaceNextCharCnt:0,positionDelta:0}}return{text:r,replacePrevCharCnt:a-o,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(Tx.Qp(e.value,t.value),e.selectionEnd),n=Math.min(Tx.Vi(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(i,e.value.length-n),r=t.value.substring(i,t.value.length-n),o=(e.selectionStart,e.selectionEnd-i),a=(t.selectionStart,t.selectionEnd-i);return{text:r,replacePrevCharCnt:o,replaceNextCharCnt:s.length-o,positionDelta:a-r.length}}}class YG{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,n=i+1,s=i+t;return new JM.Q(n,1,s+1,1)}static fromEditorSelection(e,t,i,n){const s=500,r=YG._getPageOfLine(t.startLineNumber,i),o=YG._getRangeForPage(r,i),a=YG._getPageOfLine(t.endLineNumber,i),l=YG._getRangeForPage(a,i);let h=o.intersectRanges(new JM.Q(1,1,t.startLineNumber,t.startColumn));if(n&&e.getValueLengthInRange(h,1)>s){const t=e.modifyPosition(h.getEndPosition(),-500);h=JM.Q.fromPositions(t,h.getEndPosition())}const c=e.getValueInRange(h,1),d=e.getLineCount(),u=e.getLineMaxColumn(d);let g=l.intersectRanges(new JM.Q(t.endLineNumber,t.endColumn,d,u));if(n&&e.getValueLengthInRange(g,1)>s){const t=e.modifyPosition(g.getStartPosition(),s);g=JM.Q.fromPositions(g.getStartPosition(),t)}const p=e.getValueInRange(g,1);let f;if(r===a||r+1===a)f=e.getValueInRange(t,1);else{const i=o.intersectRanges(t),n=l.intersectRanges(t);f=e.getValueInRange(i,1)+String.fromCharCode(8230)+e.getValueInRange(n,1)}return n&&f.length>1e3&&(f=f.substring(0,s)+String.fromCharCode(8230)+f.substring(f.length-s,f.length)),new XG(c+f+p,c.length,c.length+f.length,t,h.endLineNumber-h.startLineNumber)}}var ZG,JG=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},eK=function(e,t){return function(i,n){t(i,n,e)}};!function(e){e.Tap="-monaco-textarea-synthetic-tap"}(ZG||(ZG={}));const tK=!1;class iK{static#e=(()=>this.INSTANCE=new iK)();constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}class nK{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){const t={text:e=e||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let sK=class extends Mx.jG{get textAreaState(){return this._textAreaState}constructor(e,t,i,n,s,r){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=n,this._accessibilityService=s,this._logService=r,this._onFocus=this._register(new rk.vl),this.onFocus=this._onFocus.event,this._onBlur=this._register(new rk.vl),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new rk.vl),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new rk.vl),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new rk.vl),this.onCut=this._onCut.event,this._onPaste=this._register(new rk.vl),this.onPaste=this._onPaste.event,this._onType=this._register(new rk.vl),this.onType=this._onType.event,this._onCompositionStart=this._register(new rk.vl),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new rk.vl),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new rk.vl),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new rk.vl),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new Mx.HE),this._asyncTriggerCut=this._register(new sk.uC((()=>this._onCut.fire()),0)),this._textAreaState=XG.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(rk.Jh.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new sk.uC((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)):this._asyncFocusGainWriteScreenReaderContent.clear()}))),this._hasFocus=!1,this._currentComposition=null;let o=null;this._register(this._textArea.onKeyDown((e=>{const t=new Zx(e);(114===t.keyCode||this._currentComposition&&1===t.keyCode)&&t.stopPropagation(),t.equals(9)&&t.preventDefault(),o=t,this._onKeyDown.fire(t)}))),this._register(this._textArea.onKeyUp((e=>{const t=new Zx(e);this._onKeyUp.fire(t)}))),this._register(this._textArea.onCompositionStart((e=>{const t=new nK;if(this._currentComposition)this._currentComposition=t;else{if(this._currentComposition=t,2===this._OS&&o&&o.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===o.code||"ArrowLeft"===o.code))return t.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:e.data});this._browser.isAndroid,this._onCompositionStart.fire({data:e.data})}}))),this._register(this._textArea.onCompositionUpdate((e=>{const t=this._currentComposition;if(!t)return;if(this._browser.isAndroid){const t=XG.readFromTextArea(this._textArea,this._textAreaState),i=XG.deduceAndroidCompositionInput(this._textAreaState,t);return this._textAreaState=t,this._onType.fire(i),void this._onCompositionUpdate.fire(e)}const i=t.handleCompositionUpdate(e.data);this._textAreaState=XG.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionUpdate.fire(e)}))),this._register(this._textArea.onCompositionEnd((e=>{const t=this._currentComposition;if(!t)return;if(this._currentComposition=null,this._browser.isAndroid){const e=XG.readFromTextArea(this._textArea,this._textAreaState),t=XG.deduceAndroidCompositionInput(this._textAreaState,e);return this._textAreaState=e,this._onType.fire(t),void this._onCompositionEnd.fire()}const i=t.handleCompositionUpdate(e.data);this._textAreaState=XG.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((e=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const t=XG.readFromTextArea(this._textArea,this._textAreaState),i=XG.deduceInput(this._textAreaState,t,2===this._OS);(0!==i.replacePrevCharCnt||1!==i.text.length||!Tx.pc(i.text.charCodeAt(0))&&127!==i.text.charCodeAt(0))&&(this._textAreaState=t,""===i.text&&0===i.replacePrevCharCnt&&0===i.replaceNextCharCnt&&0===i.positionDelta||this._onType.fire(i))}))),this._register(this._textArea.onCut((e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((e=>{this._ensureClipboardGetsEditorSelection(e)}))),this._register(this._textArea.onPaste((e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),!e.clipboardData)return;let[t,i]=rK.getTextData(e.clipboardData);t&&(i=i||iK.INSTANCE.get(t),this._onPaste.fire({text:t,metadata:i}))}))),this._register(this._textArea.onFocus((()=>{const e=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!e&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new sk.uC((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let e=0;return EL(this._textArea.ownerDocument,"selectionchange",(t=>{if($j.onSelectionChange(),!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;const i=Date.now(),n=i-e;if(e=i,n<5)return;const s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100)return;if(!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const o=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===o&&this._textAreaState.selectionEnd===a)return;const l=this._textAreaState.deduceEditorPosition(o),h=this._host.deduceModelPosition(l[0],l[1],l[2]),c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=new jG.L(h.lineNumber,h.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(u)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&"render"===e||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};iK.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,"\n"):t.text,i),e.preventDefault(),e.clipboardData&&rK.setTextData(e.clipboardData,t.text,t.html,i)}};sK=JG([eK(4,GI),eK(5,AM.rr)],sK);const rK={getTextData(e){const t=e.getData(NR.K.text);let i=null;const n=e.getData("vscode-editor-data");if("string"===typeof n)try{i=JSON.parse(n),1!==i.version&&(i=null)}catch(s){}if(0===t.length&&null===i&&e.files.length>0){return[Array.prototype.slice.call(e.files,0).map((e=>e.name)).join("\n"),null]}return[t,i]},setTextData(e,t,i,n){e.setData(NR.K.text,t),"string"===typeof i&&e.setData("text/html",i),e.setData("vscode-editor-data",JSON.stringify(n))}};class oK extends Mx.jG{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new BD(this._actual,"keydown")).event,this.onKeyUp=this._register(new BD(this._actual,"keyup")).event,this.onCompositionStart=this._register(new BD(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new BD(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new BD(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new BD(this._actual,"beforeinput")).event,this.onInput=this._register(new BD(this._actual,"input")).event,this.onCut=this._register(new BD(this._actual,"cut")).event,this.onCopy=this._register(new BD(this._actual,"copy")).event,this.onPaste=this._register(new BD(this._actual,"paste")).event,this.onFocus=this._register(new BD(this._actual,"focus")).event,this.onBlur=this._register(new BD(this._actual,"blur")).event,this._onSyntheticTap=this._register(new rk.vl),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown((()=>$j.onKeyDown()))),this._register(this.onBeforeInput((()=>$j.onBeforeInput()))),this._register(this.onInput((()=>$j.onInput()))),this._register(this.onKeyUp((()=>$j.onKeyUp()))),this._register(EL(this._actual,ZG.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const e=QL(this._actual);return e?e.activeElement===this._actual:!!this._actual.isConnected&&XL()===this._actual}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const n=this._actual;let s=null;const r=QL(n);s=r?r.activeElement:XL();const o=fL(s),a=s===n,l=n.selectionStart,h=n.selectionEnd;if(a&&l===t&&h===i)Rx&&o.parent!==o&&n.focus();else{if(a)return this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),void(Rx&&o.parent!==o&&n.focus());try{const e=function(e){const t=[];for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)t[i]=e.scrollTop,e=e.parentNode;return t}(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),function(e,t){for(let i=0;e&&e.nodeType===e.ELEMENT_NODE;i++)e.scrollTop!==t[i]&&(e.scrollTop=t[i]),e=e.parentNode}(n,e)}catch(O2){}}}}class aK extends GG{constructor(e,t,i){super(e,t,i),this._register(dD.addTarget(this.viewHelper.linesContentDomNode)),this._register(EL(this.viewHelper.linesContentDomNode,hD.Tap,(e=>this.onTap(e)))),this._register(EL(this.viewHelper.linesContentDomNode,hD.Change,(e=>this.onChange(e)))),this._register(EL(this.viewHelper.linesContentDomNode,hD.Contextmenu,(e=>this._onContextMenu(new eG(e,!1,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(EL(this.viewHelper.linesContentDomNode,"pointerdown",(e=>{const t=e.pointerType;this._lastPointerType="mouse"!==t?"touch"===t?"touch":"pen":"mouse"})));const n=new iG(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,(e=>this._onMouseMove(e)))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e)))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,((e,t)=>this._onMouseDown(e,t))))}onTap(e){e.initialTarget&&this.viewHelper.linesContentDomNode.contains(e.initialTarget)&&(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),"pen"===this._lastPointerType&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new eG(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===i.type&&null!==i.detail.injectedText})}_onMouseDown(e,t){"touch"!==e.browserEvent.pointerType&&super._onMouseDown(e,t)}}class lK extends GG{constructor(e,t,i){super(e,t,i),this._register(dD.addTarget(this.viewHelper.linesContentDomNode)),this._register(EL(this.viewHelper.linesContentDomNode,hD.Tap,(e=>this.onTap(e)))),this._register(EL(this.viewHelper.linesContentDomNode,hD.Change,(e=>this.onChange(e)))),this._register(EL(this.viewHelper.linesContentDomNode,hD.Contextmenu,(e=>this._onContextMenu(new eG(e,!1,this.viewHelper.viewDomNode),!1))))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new eG(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const e=document.createEvent("CustomEvent");e.initEvent(ZG.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class hK extends Mx.jG{constructor(e,t,i){super();(BS.un||BS.m0&&BS.Fr)&&Wx?this.handler=this._register(new aK(e,t,i)):Ex.TouchEvent?this.handler=this._register(new lK(e,t,i)):this.handler=this._register(new GG(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class cK extends aG{}class dK extends cK{static#e=(()=>this.CLASS_NAME="line-numbers")();constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new OA.y(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new OA.y(e,1));if(1!==t.column)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(2===this._renderLineNumbers){const e=Math.abs(this._lastCursorModelPosition.lineNumber-i);return 0===e?'<span class="relative-current-line-number">'+i+"</span>":String(e)}if(3===this._renderLineNumbers){if(this._lastCursorModelPosition.lineNumber===i)return String(i);if(i%10===0)return String(i);return i===this._context.viewModel.getLineCount()?String(i):""}return String(i)}prepareRender(e){if(0===this._renderLineNumbers)return void(this._renderResult=null);const t=BS.j9?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter((e=>!!e.options.lineNumberClassName));s.sort(((e,t)=>JM.Q.compareRangesUsingEnds(e.range,t.range)));let r=0;const o=this._context.viewModel.getLineCount(),a=[];for(let l=i;l<=n;l++){const e=l-i;let n=this._getLineRenderLineNumber(l),h="";for(;r<s.length&&s[r].range.endLineNumber<l;)r++;for(let t=r;t<s.length;t++){const{range:e,options:i}=s[t];e.startLineNumber<=l&&(h+=" "+i.lineNumberClassName)}n||h?(l===o&&0===this._context.viewModel.getLineLength(l)&&("off"===this._renderFinalNewline&&(n=""),"dimmed"===this._renderFinalNewline&&(h+=" dimmed-line-number")),l===this._activeLineNumber&&(h+=" active-line-number"),a[e]=`<div class="${dK.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${n}</div>`):a[e]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}(0,bT.zy)(((e,t)=>{const i=e.getColor(RW.Qt),n=e.getColor(RW.JB);n?t.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):i&&t.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i.transparent(.4)}; }`)}));class uK extends lG{static#e=(()=>this.CLASS_NAME="glyph-margin")();static#t=(()=>this.OUTER_CLASS_NAME="margin")();constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=UE(document.createElement("div")),this._domNode.setClassName(uK.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=UE(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(uK.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}var gK=i(9285);const pK="monaco-mouse-cursor-text";var fK=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},mK=function(e,t){return function(i,n){t(i,n,e)}};class _K{constructor(e,t,i,n,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=n,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new OA.y(this.modelLineNumber,this.distanceToModelLineStart+1),i=new OA.y(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const vK=Rx;let bK=class extends lG{constructor(e,t,i,n,s){super(e),this._keybindingService=n,this._instantiationService=s,this._primaryCursorPosition=new OA.y(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,o=r.get(146);this._setAccessibilityOptions(r),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=r.get(50),this._lineHeight=r.get(67),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new jG.L(1,1,1,1)],this._modelSelections=[new jG.L(1,1,1,1)],this._lastRenderPosition=null,this.textArea=UE(document.createElement("textarea")),hG.write(this.textArea,7),this.textArea.setClassName(`inputarea ${pK}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:a}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=a*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",WS.kg("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=UE(document.createElement("div")),this.textAreaCover.setPosition("absolute");const l={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:e=>this._context.viewModel.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.viewModel.getValueInRange(e,t),getValueLengthInRange:(e,t)=>this._context.viewModel.getValueLengthInRange(e,t),modifyPosition:(e,t)=>this._context.viewModel.modifyPosition(e,t)},h={getDataToCopy:()=>{const e=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,BS.uF),t=this._context.viewModel.model.getEOL(),i=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),n=Array.isArray(e)?e:null,s=Array.isArray(e)?e.join(t):e;let r,o=null;if(tK||this._copyWithSyntaxHighlighting&&s.length<65536){const e=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(r=e.html,o=e.mode)}return{isFromEmptySelection:i,multicursorText:n,text:s,html:r,mode:o}},getScreenReaderContent:()=>{if(1===this._accessibilitySupport){const e=this._selections[0];if(BS.zx&&e.isEmpty()){const t=e.getStartPosition();let i=this._getWordBeforePosition(t);if(0===i.length&&(i=this._getCharacterBeforePosition(t)),i.length>0)return new XG(i,i.length,i.length,JM.Q.fromPositions(t),0)}const t=500;if(BS.zx&&!e.isEmpty()&&l.getValueLengthInRange(e,0)<t){const t=l.getValueInRange(e,0);return new XG(t,0,t.length,e,0)}if(Fx&&!e.isEmpty()){const e="vscode-placeholder";return new XG(e,0,e.length,null,void 0)}return XG.EMPTY}if(zx){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition(),[i,n]=this._getAndroidWordAtPosition(t);if(i.length>0)return new XG(i,n,n,JM.Q.fromPositions(t),0)}return XG.EMPTY}return YG.fromEditorSelection(l,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,t,i)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(e,t,i)},c=this._register(new oK(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(sK,h,c,BS.OS,{isAndroid:zx,isChrome:Ox,isFirefox:Rx,isSafari:Fx})),this._register(this._textAreaInput.onKeyDown((e=>{this._viewController.emitKeyDown(e)}))),this._register(this._textAreaInput.onKeyUp((e=>{this._viewController.emitKeyUp(e)}))),this._register(this._textAreaInput.onPaste((e=>{let t=!1,i=null,n=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,i="undefined"!==typeof e.metadata.multicursorText?e.metadata.multicursorText:null,n=e.metadata.mode),this._viewController.paste(e.text,t,i,n)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta):this._viewController.type(e.text)}))),this._register(this._textAreaInput.onSelectionChangeRequest((e=>{this._viewController.setSelection(e)}))),this._register(this._textAreaInput.onCompositionStart((e=>{const t=this.textArea.domNode,i=this._modelSelections[0],{distanceToModelLineStart:n,widthOfHiddenTextBefore:s}=(()=>{const e=t.value.substring(0,Math.min(t.selectionStart,t.selectionEnd)),n=e.lastIndexOf("\n"),s=e.substring(n+1),r=s.lastIndexOf("\t"),o=s.length-r-1,a=i.getStartPosition(),l=Math.min(a.column-1,o),h=a.column-1-l,c=s.substring(0,s.length-l),{tabSize:d}=this._context.viewModel.model.getOptions(),u=function(e,t,i,n){if(0===t.length)return 0;const s=e.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const r=e.createElement("span");jE(r,i),r.style.whiteSpace="pre",r.style.tabSize=n*i.spaceWidth+"px",r.append(t),s.appendChild(r),e.body.appendChild(s);const o=r.offsetWidth;return s.remove(),o}(this.textArea.domNode.ownerDocument,c,this._fontInfo,d);return{distanceToModelLineStart:h,widthOfHiddenTextBefore:u}})(),{distanceToModelLineEnd:r}=(()=>{const e=t.value.substring(Math.max(t.selectionStart,t.selectionEnd)),n=e.indexOf("\n"),s=-1===n?e:e.substring(0,n),r=s.indexOf("\t"),o=-1===r?s.length:s.length-r-1,a=i.getEndPosition(),l=Math.min(this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column,o);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column-l}})();this._context.viewModel.revealRange("keyboard",!0,JM.Q.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new _K(this._context,i.startLineNumber,n,s,r),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${pK} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((e=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${pK}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.viewModel.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.viewModel.setHasFocus(!1)}))),this._register(UA.onDidChange((()=>{this._ensureReadOnlyAttribute()})))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,gK.i)('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',[]);let n=!0,s=e.column,r=!0,o=e.column,a=0;for(;a<50&&(n||r);){if(n&&s<=1&&(n=!1),n){const e=t.charCodeAt(s-2);0!==i.get(e)?n=!1:s--}if(r&&o>t.length&&(r=!1),r){const e=t.charCodeAt(o-1);0!==i.get(e)?r=!1:o++}a++}return[t.substring(s-1,o-1),e.column-s]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,gK.i)(this._context.configuration.options.get(132),[]);let n=e.column,s=0;for(;n>1;){const r=t.charCodeAt(n-2);if(0!==i.get(r)||s>50)return t.substring(n-1,e.column-1);s++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const t=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Tx.pc(t.charCodeAt(0)))return t}return""}_getAriaLabel(e){if(1===e.get(2)){const e=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),t=this._keybindingService.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),i=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),n=WS.kg("accessibilityModeOff","The editor is not accessible at this time.");return e?WS.kg("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",n,e):t?WS.kg("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",n,t):i?WS.kg("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",n,i):n}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);2===this._accessibilitySupport&&t===kx.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const i=e.get(146).wrappingColumn;if(-1!==i&&1!==this._accessibilitySupport){const t=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*t.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=vK?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:n}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=n*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!UA.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){this._primaryCursorPosition=new OA.y(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const e=this._visibleTextArea.visibleTextareaStart,t=this._visibleTextArea.visibleTextareaEnd,i=this._visibleTextArea.startPosition,n=this._visibleTextArea.endPosition;if(i&&n&&e&&t&&t.left>=this._scrollLeft&&e.left<=this._scrollLeft+this._contentWidth){const s=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,r=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let o=this._visibleTextArea.widthOfHiddenLineTextBefore,a=this._contentLeft+e.left-this._scrollLeft,l=t.left-e.left+1;if(a<this._contentLeft){const e=this._contentLeft-a;a+=e,o+=e,l-=e}l>this._contentWidth&&(l=this._contentWidth);const h=this._context.viewModel.getViewLineData(i.lineNumber),c=h.tokens.findTokenIndexAtOffset(i.column-1),d=c===h.tokens.findTokenIndexAtOffset(n.column-1),u=this._visibleTextArea.definePresentation(d?h.tokens.getPresentation(c):null);this.textArea.domNode.scrollTop=r*this._lineHeight,this.textArea.domNode.scrollLeft=o,this._doRender({lastRenderPosition:null,top:s,left:a,width:l,height:this._lineHeight,useCover:!1,color:(RI.dG.getColorMap()||[])[u.foreground],italic:u.italic,bold:u.bold,underline:u.underline,strikethrough:u.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight)this._renderAtTopLeft();else if(BS.zx||2===this._accessibilitySupport){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:vK?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;for(;;){if(i=e.indexOf("\n",i+1),-1===i)break;t++}return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:vK?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;jE(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?WR.Q1.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const n=this._context.configuration.options;n.get(57)?i.setClassName("monaco-editor-background textAreaCover "+uK.OUTER_CLASS_NAME):0!==n.get(68).renderType?i.setClassName("monaco-editor-background textAreaCover "+dK.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};bK=fK([mK(3,oD),mK(4,eM._Y)],bK);var yK=i(8151),wK=i(4788);const CK=()=>!0,SK=()=>!1,xK=e=>" "===e||"\t"===e;class kK{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,n){this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=i.options,r=s.get(146),o=s.get(50);this.readOnly=s.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(117),this.lineHeight=o.lineHeight,this.typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(129),this.wordSeparators=s.get(132),this.emptySelectionClipboard=s.get(37),this.copyWithSyntaxHighlighting=s.get(25),this.multiCursorMergeOverlapping=s.get(77),this.multiCursorPaste=s.get(79),this.multiCursorLimit=s.get(80),this.autoClosingBrackets=s.get(6),this.autoClosingComments=s.get(7),this.autoClosingQuotes=s.get(11),this.autoClosingDelete=s.get(9),this.autoClosingOvertype=s.get(10),this.autoSurround=s.get(14),this.autoIndent=s.get(12),this.wordSegmenterLocales=s.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(const h of a)this.surroundingPairs[h.open]=h.close;const l=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=l?.blockCommentStartToken??null}get electricChars(){if(!this._electricChars){this._electricChars={};const e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}onElectricCharacter(e,t,i){const n=(0,yK.BQ)(t,i-1),s=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return s?s.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return(0,wK.P)(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return xK;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return CK;case"never":return SK}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return e=>-1!==i.indexOf(e)}visibleColumnFromColumn(e,t){return DG.A.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const n=DG.A.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),s=e.getLineMinColumn(t);if(n<s)return s;const r=e.getLineMaxColumn(t);return n>r?r:n}}class LK{static fromModelState(e){return new EK(e)}static fromViewState(e){return new MK(e)}static fromModelSelection(e){const t=jG.L.liftSelection(e),i=new TK(JM.Q.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return LK.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class EK{constructor(e){this.modelState=e,this.viewState=null}}class MK{constructor(e){this.modelState=null,this.viewState=e}}class TK{constructor(e,t,i,n,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=n,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=TK._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new TK(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new OA.y(t,i),n):new TK(new JM.Q(t,i,t,i),0,n,new OA.y(t,i),n)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?jG.L.fromPositions(e.getStartPosition(),t):jG.L.fromPositions(e.getEndPosition(),t)}}class DK{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function NK(e){return"'"===e||'"'===e||"`"===e}class IK{static columnSelect(e,t,i,n,s,r){const o=Math.abs(s-i)+1,a=i>s,l=n>r,h=n<r,c=[];for(let d=0;d<o;d++){const s=i+(a?-d:d),o=e.columnFromVisibleColumn(t,s,n),u=e.columnFromVisibleColumn(t,s,r),g=e.visibleColumnFromColumn(t,new OA.y(s,o)),p=e.visibleColumnFromColumn(t,new OA.y(s,u));if(h){if(g>r)continue;if(p<n)continue}if(l){if(p>n)continue;if(g<r)continue}c.push(new TK(new JM.Q(s,o,s,o),0,0,new OA.y(s,u),0))}if(0===c.length)for(let d=0;d<o;d++){const e=i+(a?-d:d),n=t.getLineMaxColumn(e);c.push(new TK(new JM.Q(e,n,e,n),0,0,new OA.y(e,n),0))}return{viewStates:c,reversed:a,fromLineNumber:i,fromVisualColumn:n,toLineNumber:s,toVisualColumn:r}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,IK.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0;const s=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let a=s;a<=r;a++){const i=t.getLineMaxColumn(a),s=e.visibleColumnFromColumn(t,new OA.y(a,i));n=Math.max(n,s)}let o=i.toViewVisualColumn;return o<n&&o++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,o)}static columnSelectUp(e,t,i,n){const s=n?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){const s=n?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}}class AK{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return jG.L.fromPositions(i.getEndPosition())}}class RK{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return jG.L.fromPositions(i.getStartPosition())}}class PK{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return jG.L.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class OK{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class FK{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class BK{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-Tx.MV(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new OA.y(i,e.getLineMaxColumn(i))}return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const n=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),r=NG.atomicPosition(s,t.column-1,i,0);if(-1!==r&&r+1>=n)return new OA.y(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){const n=e.stickyTabStops?BK.leftPositionAtomicSoftTabs(t,i,e.tabSize):BK.leftPosition(t,i);return new FK(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,s){let r,o;if(i.hasSelection()&&!n)r=i.selection.startLineNumber,o=i.selection.startColumn;else{const n=i.position.delta(void 0,-(s-1)),a=t.normalizePosition(BK.clipPositionColumn(n,t),0),l=BK.left(e,t,a);r=l.lineNumber,o=l.column}return i.move(n,r,o,0)}static clipPositionColumn(e,t){return new OA.y(e.lineNumber,BK.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i+=Tx.iy(e.getLineContent(t),i-1):t<e.getLineCount()&&(t+=1,i=e.getLineMinColumn(t)),new OA.y(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,s){if(i<e.getLineIndentColumn(t)){const s=e.getLineContent(t),r=NG.atomicPosition(s,i-1,n,1);if(-1!==r)return new OA.y(t,r+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const n=e.stickyTabStops?BK.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):BK.rightPosition(t,i.lineNumber,i.column);return new FK(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,s){let r,o;if(i.hasSelection()&&!n)r=i.selection.endLineNumber,o=i.selection.endColumn;else{const n=i.position.delta(void 0,s-1),a=t.normalizePosition(BK.clipPositionColumn(n,t),1),l=BK.right(e,t,a);r=l.lineNumber,o=l.column}return i.move(n,r,o,0)}static vertical(e,t,i,n,s,r,o,a){const l=DG.A.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+s,h=t.getLineCount(),c=1===i&&1===n,d=i===h&&n===t.getLineMaxColumn(i),u=r<i?c:d;if((i=r)<1?(i=1,n=o?t.getLineMinColumn(i):Math.min(t.getLineMaxColumn(i),n)):i>h?(i=h,n=o?t.getLineMaxColumn(i):Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,l),s=u?0:l-DG.A.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),void 0!==a){const e=new OA.y(i,n),r=t.normalizePosition(e,a);s+=n-r.column,i=r.lineNumber,n=r.column}return new FK(i,n,s)}static down(e,t,i,n,s,r,o){return this.vertical(e,t,i,n,s,i+r,o,4)}static moveDown(e,t,i,n,s){let r,o;i.hasSelection()&&!n?(r=i.selection.endLineNumber,o=i.selection.endColumn):(r=i.position.lineNumber,o=i.position.column);let a,l=0;do{a=BK.down(e,t,r+l,o,i.leftoverVisibleColumns,s,!0);if(t.normalizePosition(new OA.y(a.lineNumber,a.column),2).lineNumber>r)break}while(l++<10&&r+l<t.getLineCount());return i.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateDown(e,t,i){const n=i.selection,s=BK.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=BK.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new TK(new JM.Q(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new OA.y(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,i,n,s,r,o){return this.vertical(e,t,i,n,s,i-r,o,3)}static moveUp(e,t,i,n,s){let r,o;i.hasSelection()&&!n?(r=i.selection.startLineNumber,o=i.selection.startColumn):(r=i.position.lineNumber,o=i.position.column);const a=BK.up(e,t,r,o,i.leftoverVisibleColumns,s,!0);return i.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateUp(e,t,i){const n=i.selection,s=BK.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=BK.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new TK(new JM.Q(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new OA.y(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,i,n){let s=i.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return i.move(n,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,i,n){const s=t.getLineCount();let r=i.position.lineNumber;for(;r<s&&this._isBlankLine(t,r);)r++;for(;r<s&&!this._isBlankLine(t,r);)r++;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,n){const s=i.position.lineNumber,r=t.getLineMinColumn(s),o=t.getLineFirstNonWhitespaceColumn(s)||r;let a;return a=i.position.column===o?r:o,i.move(n,s,a,0)}static moveToEndOfLine(e,t,i,n,s){const r=i.position.lineNumber,o=t.getLineMaxColumn(r);return i.move(n,r,o,s?1073741824-o:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){const s=t.getLineCount(),r=t.getLineMaxColumn(s);return i.move(n,s,r,0)}}class zK{static deleteRight(e,t,i,n){const s=[];let r=3!==e;for(let o=0,a=n.length;o<a;o++){const e=n[o];let a=e;if(a.isEmpty()){const n=e.getPosition(),s=BK.right(t,i,n);a=new JM.Q(s.lineNumber,s.column,n.lineNumber,n.column)}a.isEmpty()?s[o]=null:(a.startLineNumber!==a.endLineNumber&&(r=!0),s[o]=new AK(a,""))}return[r,s]}static isAutoClosingPairDelete(e,t,i,n,s,r,o){if("never"===t&&"never"===i)return!1;if("never"===e)return!1;for(let a=0,l=r.length;a<l;a++){const l=r[a],h=l.getPosition();if(!l.isEmpty())return!1;const c=s.getLineContent(h.lineNumber);if(h.column<2||h.column>=c.length+1)return!1;const d=c.charAt(h.column-2),u=n.get(d);if(!u)return!1;if(NK(d)){if("never"===i)return!1}else if("never"===t)return!1;const g=c.charAt(h.column-1);let p=!1;for(const e of u)e.open===d&&e.close===g&&(p=!0);if(!p)return!1;if("auto"===e){let e=!1;for(let t=0,i=o.length;t<i;t++){const i=o[t];if(h.lineNumber===i.startLineNumber&&h.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++){const e=i[s].getPosition(),t=new JM.Q(e.lineNumber,e.column-1,e.lineNumber,e.column+1);n[s]=new AK(t,"")}return[!0,n]}static deleteLeft(e,t,i,n,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,s))return this._runAutoClosingPairDelete(t,i,n);const r=[];let o=2!==e;for(let a=0,l=n.length;a<l;a++){const e=zK.getDeleteRange(n[a],i,t);e.isEmpty()?r[a]=null:(e.startLineNumber!==e.endLineNumber&&(o=!0),r[a]=new AK(e,""))}return[o,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition();if(i.useTabStops&&n.column>1){const e=t.getLineContent(n.lineNumber),s=Tx.HG(e),r=-1===s?e.length+1:s+1;if(n.column<=r){const e=i.visibleColumnFromColumn(t,n),s=DG.A.prevIndentTabStop(e,i.indentSize),r=i.columnFromVisibleColumn(t,n.lineNumber,s);return new JM.Q(n.lineNumber,r,n.lineNumber,n.column)}}return JM.Q.fromPositions(zK.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=Tx.Wd(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}if(e.lineNumber>1){const i=e.lineNumber-1;return new OA.y(i,t.getLineMaxColumn(i))}return e}static cut(e,t,i){const n=[];let s=null;i.sort(((e,t)=>OA.y.compare(e.getStartPosition(),t.getEndPosition())));for(let r=0,o=i.length;r<o;r++){const o=i[r];if(o.isEmpty())if(e.emptySelectionClipboard){const e=o.getPosition();let i,a,l,h;e.lineNumber<t.getLineCount()?(i=e.lineNumber,a=1,l=e.lineNumber+1,h=1):e.lineNumber>1&&s?.endLineNumber!==e.lineNumber?(i=e.lineNumber-1,a=t.getLineMaxColumn(e.lineNumber-1),l=e.lineNumber,h=t.getLineMaxColumn(e.lineNumber)):(i=e.lineNumber,a=1,l=e.lineNumber,h=t.getLineMaxColumn(e.lineNumber));const c=new JM.Q(i,a,l,h);s=c,c.isEmpty()?n[r]=null:n[r]=new AK(c,"")}else n[r]=null;else n[r]=new AK(o,"")}return new DK(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class VK{static _createWord(e,t,i,n,s){return{start:n,end:s,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;const s=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let r=i.column-2;r>=0;r--){const i=e.charCodeAt(r),o=t.get(i);if(s&&r===s.index)return this._createIntlWord(s,o);if(0===o){if(2===n)return this._createWord(e,n,o,r+1,this._findEndOfWord(e,t,n,r+1));n=1}else if(2===o){if(1===n)return this._createWord(e,n,o,r+1,this._findEndOfWord(e,t,n,r+1));n=2}else if(1===o&&0!==n)return this._createWord(e,n,o,r+1,this._findEndOfWord(e,t,n,r+1))}return 0!==n?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){const s=t.findNextIntlWordAtOrAfterOffset(e,n),r=e.length;for(let o=n;o<r;o++){const n=e.charCodeAt(o),r=t.get(n);if(s&&o===s.index+s.segment.length)return o;if(1===r)return o;if(1===i&&2===r)return o;if(2===i&&0===r)return o}return r}static _findNextWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0;const s=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let o=i.column-1;o<s;o++){const i=e.charCodeAt(o),s=t.get(i);if(r&&o===r.index)return this._createIntlWord(r,s);if(0===s){if(2===n)return this._createWord(e,n,s,this._findStartOfWord(e,t,n,o-1),o);n=1}else if(2===s){if(1===n)return this._createWord(e,n,s,this._findStartOfWord(e,t,n,o-1),o);n=2}else if(1===s&&0!==n)return this._createWord(e,n,s,this._findStartOfWord(e,t,n,o-1),o)}return 0!==n?this._createWord(e,n,1,this._findStartOfWord(e,t,n,s-1),s):null}static _findStartOfWord(e,t,i,n){const s=t.findPrevIntlWordBeforeOrAtOffset(e,n);for(let r=n;r>=0;r--){const n=e.charCodeAt(r),o=t.get(n);if(s&&r===s.index)return r;if(1===o)return r+1;if(1===i&&2===o)return r+1;if(2===i&&0===o)return r+1}return 0}static moveWordLeft(e,t,i,n,s){let r=i.lineNumber,o=i.column;1===o&&r>1&&(r-=1,o=t.getLineMaxColumn(r));let a=VK._findPreviousWordOnLine(e,t,new OA.y(r,o));if(0===n)return new OA.y(r,a?a.start+1:1);if(1===n)return!s&&a&&2===a.wordType&&a.end-a.start===1&&0===a.nextCharClass&&(a=VK._findPreviousWordOnLine(e,t,new OA.y(r,a.start+1))),new OA.y(r,a?a.start+1:1);if(3===n){for(;a&&2===a.wordType;)a=VK._findPreviousWordOnLine(e,t,new OA.y(r,a.start+1));return new OA.y(r,a?a.start+1:1)}return a&&o<=a.end+1&&(a=VK._findPreviousWordOnLine(e,t,new OA.y(r,a.start+1))),new OA.y(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(1===t.column)return i>1?new OA.y(i-1,e.getLineMaxColumn(i-1)):t;const s=e.getLineContent(i);for(let r=t.column-1;r>1;r--){const e=s.charCodeAt(r-2),t=s.charCodeAt(r-1);if(95===e&&95!==t)return new OA.y(i,r);if(45===e&&45!==t)return new OA.y(i,r);if((Tx.Lv(e)||Tx.DB(e))&&Tx.Wv(t))return new OA.y(i,r);if(Tx.Wv(e)&&Tx.Wv(t)&&r+1<n){const e=s.charCodeAt(r);if(Tx.Lv(e)||Tx.DB(e))return new OA.y(i,r)}}return new OA.y(i,1)}static moveWordRight(e,t,i,n){let s=i.lineNumber,r=i.column,o=!1;r===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(o=!0,s+=1,r=1);let a=VK._findNextWordOnLine(e,t,new OA.y(s,r));if(2===n)a&&2===a.wordType&&a.end-a.start===1&&0===a.nextCharClass&&(a=VK._findNextWordOnLine(e,t,new OA.y(s,a.end+1))),r=a?a.end+1:t.getLineMaxColumn(s);else if(3===n){for(o&&(r=0);a&&(2===a.wordType||a.start+1<=r);)a=VK._findNextWordOnLine(e,t,new OA.y(s,a.end+1));r=a?a.start+1:t.getLineMaxColumn(s)}else a&&!o&&r>=a.start+1&&(a=VK._findNextWordOnLine(e,t,new OA.y(s,a.end+1))),r=a?a.start+1:t.getLineMaxColumn(s);return new OA.y(s,r)}static _moveWordPartRight(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new OA.y(i+1,1):t;const s=e.getLineContent(i);for(let r=t.column+1;r<n;r++){const e=s.charCodeAt(r-2),t=s.charCodeAt(r-1);if(95!==e&&95===t)return new OA.y(i,r);if(45!==e&&45===t)return new OA.y(i,r);if((Tx.Lv(e)||Tx.DB(e))&&Tx.Wv(t))return new OA.y(i,r);if(Tx.Wv(e)&&Tx.Wv(t)&&r+1<n){const e=s.charCodeAt(r);if(Tx.Lv(e)||Tx.DB(e))return new OA.y(i,r)}}return new OA.y(i,n)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-2,s=Tx.lT(i,n);return s+1<n?new JM.Q(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,n=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(zK.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const t=e.selection.getPosition();return new JM.Q(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}const o=new OA.y(s.positionLineNumber,s.positionColumn);let a=o.lineNumber,l=o.column;if(1===a&&1===l)return null;if(r){const e=this._deleteWordLeftWhitespace(n,o);if(e)return e}let h=VK._findPreviousWordOnLine(i,n,o);return 0===t?h?l=h.start+1:l>1?l=1:(a--,l=n.getLineMaxColumn(a)):(h&&l<=h.end+1&&(h=VK._findPreviousWordOnLine(i,n,new OA.y(a,h.start+1))),h?l=h.end+1:l>1?l=1:(a--,l=n.getLineMaxColumn(a))),new JM.Q(a,l,o.lineNumber,o.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const n=new OA.y(i.positionLineNumber,i.positionColumn),s=this._deleteInsideWordWhitespace(t,n);return s||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return 32===i||9===i}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=i.length;if(0===n)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,s))return null;let r=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,r))return null;for(;s>0&&this._charAtIsWhitespace(i,s-1);)s--;for(;r+1<n&&this._charAtIsWhitespace(i,r+1);)r++;return new JM.Q(t.lineNumber,s+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const n=t.getLineContent(i.lineNumber),s=n.length;if(0===s)return i.lineNumber>1?new JM.Q(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new JM.Q(i.lineNumber,1,i.lineNumber+1,1):new JM.Q(i.lineNumber,1,i.lineNumber,1);const r=e=>e.start+1<=i.column&&i.column<=e.end+1,o=(e,t)=>(e=Math.min(e,i.column),t=Math.max(t,i.column),new JM.Q(i.lineNumber,e,i.lineNumber,t)),a=e=>{let t=e.start+1,i=e.end+1,r=!1;for(;i-1<s&&this._charAtIsWhitespace(n,i-1);)r=!0,i++;if(!r)for(;t>1&&this._charAtIsWhitespace(n,t-2);)t--;return o(t,i)},l=VK._findPreviousWordOnLine(e,t,i);if(l&&r(l))return a(l);const h=VK._findNextWordOnLine(e,t,i);return h&&r(h)?a(h):l&&h?o(l.end+1,h.start+1):l?o(l.start+1,l.end+1):h?o(h.start+1,h.end+1):o(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=VK._moveWordPartLeft(e,i);return new JM.Q(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let n=t;n<i;n++){const t=e.charAt(n);if(" "!==t&&"\t"!==t)return n}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-1,s=this._findFirstNonWhitespaceChar(i,n);return n+1<s?new JM.Q(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,n=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;const o=new OA.y(s.positionLineNumber,s.positionColumn);let a=o.lineNumber,l=o.column;const h=n.getLineCount(),c=n.getLineMaxColumn(a);if(a===h&&l===c)return null;if(r){const e=this._deleteWordRightWhitespace(n,o);if(e)return e}let d=VK._findNextWordOnLine(i,n,o);return 2===t?d?l=d.end+1:l<c||a===h?l=c:(a++,d=VK._findNextWordOnLine(i,n,new OA.y(a,1)),l=d?d.start+1:n.getLineMaxColumn(a)):(d&&l>=d.start+1&&(d=VK._findNextWordOnLine(i,n,new OA.y(a,d.end+1))),d?l=d.start+1:l<c||a===h?l=c:(a++,d=VK._findNextWordOnLine(i,n,new OA.y(a,1)),l=d?d.start+1:n.getLineMaxColumn(a))),new JM.Q(a,l,o.lineNumber,o.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=VK._moveWordPartRight(e,i);return new JM.Q(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){const n=new JM.Q(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i,n){const s=(0,gK.i)(t,i),r=VK._findPreviousWordOnLine(s,e,n);if(r&&1===r.wordType&&r.start<=n.column-1&&n.column-1<=r.end)return VK._createWordAtPosition(e,n.lineNumber,r);const o=VK._findNextWordOnLine(s,e,n);return o&&1===o.wordType&&o.start<=n.column-1&&n.column-1<=o.end?VK._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,i,n,s){const r=(0,gK.i)(e.wordSeparators,e.wordSegmenterLocales),o=VK._findPreviousWordOnLine(r,t,s),a=VK._findNextWordOnLine(r,t,s);if(!n){let e,i;return o&&1===o.wordType&&o.start<=s.column-1&&s.column-1<=o.end?(e=o.start+1,i=o.end+1):a&&1===a.wordType&&a.start<=s.column-1&&s.column-1<=a.end?(e=a.start+1,i=a.end+1):(e=o?o.end+1:1,i=a?a.start+1:t.getLineMaxColumn(s.lineNumber)),new TK(new JM.Q(s.lineNumber,e,s.lineNumber,i),1,0,new OA.y(s.lineNumber,i),0)}let l,h;o&&1===o.wordType&&o.start<s.column-1&&s.column-1<o.end?(l=o.start+1,h=o.end+1):a&&1===a.wordType&&a.start<s.column-1&&s.column-1<a.end?(l=a.start+1,h=a.end+1):(l=s.column,h=s.column);const c=s.lineNumber;let d;if(i.selectionStart.containsPosition(s))d=i.selectionStart.endColumn;else if(s.isBeforeOrEqual(i.selectionStart.getStartPosition())){d=l;const e=new OA.y(c,d);i.selectionStart.containsPosition(e)&&(d=i.selectionStart.endColumn)}else{d=h;const e=new OA.y(c,d);i.selectionStart.containsPosition(e)&&(d=i.selectionStart.startColumn)}return i.move(!0,c,d,0)}}class WK{static addCursorDown(e,t,i){const n=[];let s=0;for(let r=0,o=t.length;r<o;r++){const o=t[r];n[s++]=new LK(o.modelState,o.viewState),n[s++]=i?LK.fromModelState(BK.translateDown(e.cursorConfig,e.model,o.modelState)):LK.fromViewState(BK.translateDown(e.cursorConfig,e,o.viewState))}return n}static addCursorUp(e,t,i){const n=[];let s=0;for(let r=0,o=t.length;r<o;r++){const o=t[r];n[s++]=new LK(o.modelState,o.viewState),n[s++]=i?LK.fromModelState(BK.translateUp(e.cursorConfig,e.model,o.modelState)):LK.fromViewState(BK.translateUp(e.cursorConfig,e,o.viewState))}return n}static moveToBeginningOfLine(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];n[s]=this._moveToLineStart(e,r,i)}return n}static _moveToLineStart(e,t,i){const n=t.viewState.position.column,s=n===t.modelState.position.column,r=t.viewState.position.lineNumber,o=e.getLineFirstNonWhitespaceColumn(r);return s||n===o?this._moveToLineStartByModel(e,t,i):this._moveToLineStartByView(e,t,i)}static _moveToLineStartByView(e,t,i){return LK.fromViewState(BK.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return LK.fromModelState(BK.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=this._moveToLineEnd(e,o,i,n)}return s}static _moveToLineEnd(e,t,i,n){const s=t.viewState.position,r=e.getLineMaxColumn(s.lineNumber),o=s.column===r,a=t.modelState.position,l=e.model.getLineMaxColumn(a.lineNumber),h=r-s.column===l-a.column;return o||h?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return LK.fromViewState(BK.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return LK.fromModelState(BK.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){const i=[];for(let n=0,s=t.length;n<s;n++){const s=t[n],r=s.modelState.selection.startLineNumber,o=e.model.getLineCount();let a,l=s.modelState.selection.endLineNumber;l===o?a=e.model.getLineMaxColumn(o):(l++,a=1),i[n]=LK.fromModelState(new TK(new JM.Q(r,1,r,1),0,0,new OA.y(l,a),0))}return i}static moveToBeginningOfBuffer(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];n[s]=LK.fromModelState(BK.moveToBeginningOfBuffer(e.cursorConfig,e.model,r.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];n[s]=LK.fromModelState(BK.moveToEndOfBuffer(e.cursorConfig,e.model,r.modelState,i))}return n}static selectAll(e,t){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return LK.fromModelState(new TK(new JM.Q(1,1,1,1),0,0,new OA.y(i,n),0))}static line(e,t,i,n,s){const r=e.model.validatePosition(n),o=s?e.coordinatesConverter.validateViewPosition(new OA.y(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!i){const t=e.model.getLineCount();let i=r.lineNumber+1,n=1;return i>t&&(i=t,n=e.model.getLineMaxColumn(i)),LK.fromModelState(new TK(new JM.Q(r.lineNumber,1,i,n),2,0,new OA.y(i,n),0))}const a=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<a)return LK.fromViewState(t.viewState.move(!0,o.lineNumber,1,0));if(r.lineNumber>a){const i=e.getLineCount();let n=o.lineNumber+1,s=1;return n>i&&(n=i,s=e.getLineMaxColumn(n)),LK.fromViewState(t.viewState.move(!0,n,s,0))}{const e=t.modelState.selectionStart.getEndPosition();return LK.fromModelState(t.modelState.move(!0,e.lineNumber,e.column,0))}}static word(e,t,i,n){const s=e.model.validatePosition(n);return LK.fromModelState(VK.word(e.cursorConfig,e.model,t.modelState,i,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new LK(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,n=t.viewState.position.column;return LK.fromViewState(new TK(new JM.Q(i,n,i,n),0,0,new OA.y(i,n),0))}static moveTo(e,t,i,n,s){if(i){if(1===t.modelState.selectionStartKind)return this.word(e,t,i,n);if(2===t.modelState.selectionStartKind)return this.line(e,t,i,n,s)}const r=e.model.validatePosition(n),o=s?e.coordinatesConverter.validateViewPosition(new OA.y(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return LK.fromViewState(t.viewState.move(i,o.lineNumber,o.column,0))}static simpleMove(e,t,i,n,s,r){switch(i){case 0:return 4===r?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,s);case 1:return 4===r?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,s);case 2:return 2===r?this._moveUpByViewLines(e,t,n,s):this._moveUpByModelLines(e,t,n,s);case 3:return 2===r?this._moveDownByViewLines(e,t,n,s):this._moveDownByModelLines(e,t,n,s);case 4:return 2===r?t.map((t=>LK.fromViewState(BK.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,n)))):t.map((t=>LK.fromModelState(BK.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,n))));case 5:return 2===r?t.map((t=>LK.fromViewState(BK.moveToNextBlankLine(e.cursorConfig,e,t.viewState,n)))):t.map((t=>LK.fromModelState(BK.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,n))));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,s){const r=e.getCompletelyVisibleViewRange(),o=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{const i=this._firstLineNumberInRange(e.model,o,s),r=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,r)]}case 13:{const i=this._lastLineNumberInRange(e.model,o,s),r=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,r)]}case 12:{const i=Math.round((o.startLineNumber+o.endLineNumber)/2),s=e.model.getLineFirstNonWhitespaceColumn(i);return[this._moveToModelPosition(e,t[0],n,i,s)]}case 14:{const i=[];for(let s=0,o=t.length;s<o;s++){const o=t[s];i[s]=this.findPositionInViewportIfOutside(e,o,r,n)}return i}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){const s=t.viewState.position.lineNumber;if(i.startLineNumber<=s&&s<=i.endLineNumber-1)return new LK(t.modelState,t.viewState);{let r;r=s>i.endLineNumber-1?i.endLineNumber-1:s<i.startLineNumber?i.startLineNumber:s;const o=BK.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return LK.fromViewState(t.viewState.move(n,o.lineNumber,o.column,o.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map((t=>LK.fromViewState(BK.moveLeft(e.cursorConfig,e,t.viewState,i,n))))}static _moveHalfLineLeft(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=Math.round(e.getLineLength(o)/2);n[s]=LK.fromViewState(BK.moveLeft(e.cursorConfig,e,r.viewState,i,a))}return n}static _moveRight(e,t,i,n){return t.map((t=>LK.fromViewState(BK.moveRight(e.cursorConfig,e,t.viewState,i,n))))}static _moveHalfLineRight(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=Math.round(e.getLineLength(o)/2);n[s]=LK.fromViewState(BK.moveRight(e.cursorConfig,e,r.viewState,i,a))}return n}static _moveDownByViewLines(e,t,i,n){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=LK.fromViewState(BK.moveDown(e.cursorConfig,e,o.viewState,i,n))}return s}static _moveDownByModelLines(e,t,i,n){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=LK.fromModelState(BK.moveDown(e.cursorConfig,e.model,o.modelState,i,n))}return s}static _moveUpByViewLines(e,t,i,n){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=LK.fromViewState(BK.moveUp(e.cursorConfig,e,o.viewState,i,n))}return s}static _moveUpByModelLines(e,t,i,n){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=LK.fromModelState(BK.moveUp(e.cursorConfig,e.model,o.modelState,i,n))}return s}static _moveToViewPosition(e,t,i,n,s){return LK.fromViewState(t.viewState.move(i,n,s,0))}static _moveToModelPosition(e,t,i,n,s){return LK.fromModelState(t.modelState.move(i,n,s,0))}static _moveToViewMinColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineMinColumn(o);n[s]=this._moveToViewPosition(e,r,i,o,a)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineFirstNonWhitespaceColumn(o);n[s]=this._moveToViewPosition(e,r,i,o,a)}return n}static _moveToViewCenterColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=Math.round((e.getLineMaxColumn(o)+e.getLineMinColumn(o))/2);n[s]=this._moveToViewPosition(e,r,i,o,a)}return n}static _moveToViewMaxColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineMaxColumn(o);n[s]=this._moveToViewPosition(e,r,i,o,a)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineLastNonWhitespaceColumn(o);n[s]=this._moveToViewPosition(e,r,i,o,a)}return n}}var HK;!function(e){e.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:function(e){if(!gM.Gv(e))return!1;const t=e;return!!gM.Kg(t.to)&&(!(!gM.b0(t.select)&&!gM.Lm(t.select))&&(!(!gM.b0(t.by)&&!gM.Kg(t.by))&&!(!gM.b0(t.value)&&!gM.Et(t.value))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=function(t){if(!t.to)return null;let i;switch(t.to){case e.RawDirection.Left:i=0;break;case e.RawDirection.Right:i=1;break;case e.RawDirection.Up:i=2;break;case e.RawDirection.Down:i=3;break;case e.RawDirection.PrevBlankLine:i=4;break;case e.RawDirection.NextBlankLine:i=5;break;case e.RawDirection.WrappedLineStart:i=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case e.RawDirection.WrappedLineColumnCenter:i=8;break;case e.RawDirection.WrappedLineEnd:i=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case e.RawDirection.ViewPortTop:i=11;break;case e.RawDirection.ViewPortBottom:i=13;break;case e.RawDirection.ViewPortCenter:i=12;break;case e.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let n=0;switch(t.by){case e.RawUnit.Line:n=1;break;case e.RawUnit.WrappedLine:n=2;break;case e.RawUnit.Character:n=3;break;case e.RawUnit.HalfLine:n=4}return{direction:i,unit:n,select:!!t.select,value:t.value||1}}}(HK||(HK={}));var UK=i(7739);class jK{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new KK(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class GK{constructor(e,t){this.model=e,this.indentationLineProcessor=new KK(e,t)}getProcessedTokenContextAroundRange(e){return{beforeRangeProcessedTokens:this._getProcessedTokensBeforeRange(e),afterRangeProcessedTokens:this._getProcessedTokensAfterRange(e),previousLineProcessedTokens:this._getProcessedPreviousLineTokens(e)}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=(0,yK.BQ)(t,e.startColumn-1);let n;if($K(this.model,e.getStartPosition())){const s=e.startColumn-1-i.firstCharOffset,r=i.firstCharOffset,o=r+s;n=t.sliceAndInflate(r,o,0)}else{const i=e.startColumn-1;n=t.sliceAndInflate(0,i,0)}return this.indentationLineProcessor.getProcessedTokens(n)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),n=(0,yK.BQ)(i,t.column-1),s=t.column-1-n.firstCharOffset,r=n.firstCharOffset+s,o=n.firstCharOffset+n.getLineLength(),a=i.sliceAndInflate(r,o,0);return this.indentationLineProcessor.getProcessedTokens(a)}_getProcessedPreviousLineTokens(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=(0,yK.BQ)(t,e.startColumn-1),n=AI.f.createEmpty("",i.languageIdCodec),s=e.startLineNumber-1;if(0===s)return n;if(!(0===i.firstCharOffset))return n;const r=(e=>{this.model.tokenization.forceTokenization(e);const t=this.model.tokenization.getLineTokens(e),i=this.model.getLineMaxColumn(e)-1;return(0,yK.BQ)(t,i)})(s);if(!(i.languageId===r.languageId))return n;const o=r.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(o)}}class KK{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){this.model.tokenization.forceTokenization?.(e);const i=this.model.tokenization.getLineTokens(e);let n=this.getProcessedTokens(i).getLineContent();return void 0!==t&&(n=((e,t)=>{const i=Tx.UU(e);return t+e.substring(i.length)})(n,t)),n}getProcessedTokens(e){const t=e.getLanguageId(0),i=this.languageConfigurationService.getLanguageConfiguration(t).bracketsNew.getBracketRegExp({global:!0}),n=[];e.forEach((t=>{const s=e.getStandardTokenType(t);let r=e.getTokenText(t);(e=>2===e||3===e||1===e)(s)&&(r=r.replace(i,""));const o=e.getMetadata(t);n.push({text:r,metadata:o})}));return AI.f.createFromTextAndMetadata(n,e.languageIdCodec)}}function $K(e,t){e.tokenization.forceTokenization(t.lineNumber);const i=e.tokenization.getLineTokens(t.lineNumber),n=(0,yK.BQ)(i,t.column-1),s=0===n.firstCharOffset,r=i.getLanguageId(0)===n.languageId;return!s&&!r}function qK(e,t,i,n){t.tokenization.forceTokenization(i.startLineNumber);const s=t.getLanguageIdAtPosition(i.startLineNumber,i.startColumn),r=n.getLanguageConfiguration(s);if(!r)return null;const o=new GK(t,n).getProcessedTokenContextAroundRange(i),a=o.previousLineProcessedTokens.getLineContent(),l=o.beforeRangeProcessedTokens.getLineContent(),h=o.afterRangeProcessedTokens.getLineContent(),c=r.onEnter(e,a,l,h);if(!c)return null;const d=c.indentAction;let u=c.appendText;const g=c.removeText||0;u?d===UK.l.Indent&&(u="\t"+u):u=d===UK.l.Indent||d===UK.l.IndentOutdent?"\t":"";let p=(0,eT.Cw)(t,i.startLineNumber,i.startColumn);return g&&(p=p.substring(0,p.length-g)),{indentAction:d,appendText:u,removeText:g,indentation:p}}var QK,XK=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},YK=function(e,t){return function(i,n){t(i,n,e)}};const ZK=Object.create(null);function JK(e,t){if(t<=0)return"";ZK[e]||(ZK[e]=["",e]);const i=ZK[e];for(let n=i.length;n<=t;n++)i[n]=i[n-1]+e;return i[t]}let e$=QK=class{static unshiftIndent(e,t,i,n,s){const r=DG.A.visibleColumnFromColumn(e,t,i);if(s){const e=JK(" ",n);return JK(e,DG.A.prevIndentTabStop(r,n)/n)}return JK("\t",DG.A.prevRenderTabStop(r,i)/i)}static shiftIndent(e,t,i,n,s){const r=DG.A.visibleColumnFromColumn(e,t,i);if(s){const e=JK(" ",n);return JK(e,DG.A.nextIndentTabStop(r,n)/n)}return JK("\t",DG.A.nextRenderTabStop(r,i)/i)}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let n=this._selection.endLineNumber;1===this._selection.endColumn&&i!==n&&(n-=1);const{tabSize:s,indentSize:r,insertSpaces:o}=this._opts,a=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let l=0,h=0;for(let c=i;c<=n;c++,l=h){h=0;const n=e.getLineContent(c);let d,u=Tx.HG(n);if((!this._opts.isUnshift||0!==n.length&&0!==u)&&(a||this._opts.isUnshift||0!==n.length)){if(-1===u&&(u=n.length),c>1){if(DG.A.visibleColumnFromColumn(n,u+1,s)%r!==0&&e.tokenization.isCheapToTokenize(c-1)){const t=qK(this._opts.autoIndent,e,new JM.Q(c-1,e.getLineMaxColumn(c-1),c-1,e.getLineMaxColumn(c-1)),this._languageConfigurationService);if(t){if(h=l,t.appendText)for(let e=0,i=t.appendText.length;e<i&&h<r&&32===t.appendText.charCodeAt(e);e++)h++;t.removeText&&(h=Math.max(0,h-t.removeText));for(let e=0;e<h&&(0!==u&&32===n.charCodeAt(u-1));e++)u--}}}this._opts.isUnshift&&0===u||(d=this._opts.isUnshift?QK.unshiftIndent(n,u+1,s,r,o):QK.shiftIndent(n,u+1,s,r,o),this._addEditOperation(t,new JM.Q(c,1,c,u+1),d),c!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=u+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(i)&&(this._useLastEditRangeForCursorEndPosition=!0);const s=o?JK(" ",r):"\t";for(let o=i;o<=n;o++){const n=e.getLineContent(o);let l=Tx.HG(n);if((!this._opts.isUnshift||0!==n.length&&0!==l)&&((a||this._opts.isUnshift||0!==n.length)&&(-1===l&&(l=n.length),!this._opts.isUnshift||0!==l)))if(this._opts.isUnshift){l=Math.min(l,r);for(let e=0;e<l;e++){if(9===n.charCodeAt(e)){l=e+1;break}}this._addEditOperation(t,new JM.Q(o,1,o,l+1),"")}else this._addEditOperation(t,new JM.Q(o,1,o,1),s),o!==i||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const e=t.getInverseEditOperations()[0];return new jG.L(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const e=this._selection.startColumn;return i.startColumn<=e?i:0===i.getDirection()?new jG.L(i.startLineNumber,e,i.endLineNumber,i.endColumn):new jG.L(i.endLineNumber,i.endColumn,i.startLineNumber,e)}return i}};e$=QK=XK([YK(2,eT.JZ)],e$);class t${constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new JM.Q(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new JM.Q(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),n=i[0].range,s=i[1].range;return new jG.L(n.endLineNumber,n.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class i${constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new JM.Q(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return new jG.L(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}}function n$(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;if(e<4)return null;const r=s.getLanguageConfiguration(t.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;const o=new jK(t,r,s);if(i<=1)return{indentation:"",action:null};for(let l=i-1;l>0&&""===t.getLineContent(l);l--)if(1===l)return{indentation:"",action:null};const a=function(e,t,i){const n=e.tokenization.getLanguageIdAtPosition(t,0);if(t>1){let s,r=-1;for(s=t-1;s>=1;s--){if(e.tokenization.getLanguageIdAtPosition(s,0)!==n)return r;const t=e.getLineContent(s);if(!i.shouldIgnore(s)&&!/^\s+$/.test(t)&&""!==t)return s;r=s}}return-1}(t,i,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const e=t.getLineContent(a);return{indentation:Tx.UU(e),action:UK.l.Indent,line:a}}if(o.shouldDecrease(a)){const e=t.getLineContent(a);return{indentation:Tx.UU(e),action:null,line:a}}{if(1===a)return{indentation:Tx.UU(t.getLineContent(a)),action:null,line:a};const e=a-1,i=r.getIndentMetadata(t.getLineContent(e));if(!(3&i)&&4&i){let i=0;for(let t=e-1;t>0;t--)if(!o.shouldIndentNextLine(t)){i=t;break}return{indentation:Tx.UU(t.getLineContent(i+1)),action:null,line:i+1}}if(n)return{indentation:Tx.UU(t.getLineContent(a)),action:null,line:a};for(let n=a;n>0;n--){if(o.shouldIncrease(n))return{indentation:Tx.UU(t.getLineContent(n)),action:UK.l.Indent,line:n};if(o.shouldIndentNextLine(n)){let e=0;for(let t=n-1;t>0;t--)if(!o.shouldIndentNextLine(n)){e=t;break}return{indentation:Tx.UU(t.getLineContent(e+1)),action:null,line:e+1}}if(o.shouldDecrease(n))return{indentation:Tx.UU(t.getLineContent(n)),action:null,line:n}}return{indentation:Tx.UU(t.getLineContent(1)),action:null,line:1}}}class s${static getEdits(e,t,i,n,s){if(!s&&this._isAutoIndentType(e,t,i)){const s=[];for(const o of i){const i=this._findActualIndentationForSelection(e,t,o,n);if(null===i)return;s.push({selection:o,indentation:i})}const r=a$.getAutoClosingPairClose(e,t,i,n,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,s,n,r)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let n=0,s=i.length;n<s;n++)if(!t.tokenization.isCheapToTokenize(i[n].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,n){const s=function(e,t,i,n,s,r){const o=e.autoIndent;if(o<4)return null;if($K(t,i.getStartPosition()))return null;const a=t.getLanguageIdAtPosition(i.startLineNumber,i.startColumn),l=r.getLanguageConfiguration(a).indentRulesSupport;if(!l)return null;const h=new GK(t,r).getProcessedTokenContextAroundRange(i),c=h.beforeRangeProcessedTokens.getLineContent(),d=h.afterRangeProcessedTokens.getLineContent(),u=c+d,g=c+n+d;if(!l.shouldDecrease(u)&&l.shouldDecrease(g)){const e=n$(o,t,i.startLineNumber,!1,r);if(!e)return null;let n=e.indentation;return e.action!==UK.l.Indent&&(n=s.unshiftIndent(n)),n}const p=i.startLineNumber-1;if(p>0){const a=t.getLineContent(p);if(l.shouldIndentNextLine(a)&&l.shouldIncrease(g)){const a=n$(o,t,i.startLineNumber,!1,r),l=a?.indentation;if(void 0!==l){const r=t.getLineContent(i.startLineNumber),o=Tx.UU(r),a=s.shiftIndent(l)===o,h=/^\s*$/.test(u),c=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n),d=c&&c.length>0;if(a&&d&&h)return l}}}return null}(e,t,i,n,{shiftIndent:t=>k$(e,t),unshiftIndent:t=>L$(e,t)},e.languageConfigurationService);if(null===s)return null;const r=(0,eT.Cw)(t,i.startLineNumber,i.startColumn);return s===e.normalizeIndentation(r)?null:s}static _getIndentationAndAutoClosingPairEdits(e,t,i,n,s){const r=i.map((i=>{let{selection:r,indentation:o}=i;if(null!==s){const i=this._getEditFromIndentationAndSelection(e,t,o,r,n,!1);return new v$(i,r,n,s)}{const i=this._getEditFromIndentationAndSelection(e,t,o,r,n,!0);return x$(i.range,i.text,!1)}}));return new DK(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _getEditFromIndentationAndSelection(e,t,i,n,s){let r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const o=n.startLineNumber,a=t.getLineFirstNonWhitespaceColumn(o);let l=e.normalizeIndentation(i);if(0!==a){l+=t.getLineContent(o).substring(a-1,n.startColumn-1)}l+=r?s:"";return{range:new JM.Q(o,1,n.endLineNumber,n.endColumn),text:l}}}class r${static getEdits(e,t,i,n,s,r){if(S$(t,i,n,s,r))return this._runAutoClosingOvertype(e,n,r)}static _runAutoClosingOvertype(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const e=t[s].getPosition(),r=new JM.Q(e.lineNumber,e.column,e.lineNumber,e.column+1);n[s]=new AK(r,i)}return new DK(4,n,{shouldPushStackElementBefore:y$(e,4),shouldPushStackElementAfter:!1})}}class o${static getEdits(e,t,i,n,s){if(S$(e,t,i,n,s)){const e=i.map((e=>new AK(new JM.Q(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1)));return new DK(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class a${static getEdits(e,t,i,n,s,r){if(!r){const r=this.getAutoClosingPairClose(e,t,i,n,s);if(null!==r)return this._runAutoClosingOpenCharType(i,n,s,r)}}static _runAutoClosingOpenCharType(e,t,i,n){const s=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];s[r]=new _$(o,t,!i,n)}return new DK(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,n,s){for(const u of i)if(!u.isEmpty())return null;const r=i.map((e=>{const t=e.getPosition();return s?{lineNumber:t.lineNumber,beforeColumn:t.column-n.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}})),o=this._findAutoClosingPairOpen(e,t,r.map((e=>new OA.y(e.lineNumber,e.beforeColumn))),n);if(!o)return null;let a,l;if(NK(n))a=e.autoClosingQuotes,l=e.shouldAutoCloseBefore.quote;else{!!e.blockCommentStartToken&&o.open.includes(e.blockCommentStartToken)?(a=e.autoClosingComments,l=e.shouldAutoCloseBefore.comment):(a=e.autoClosingBrackets,l=e.shouldAutoCloseBefore.bracket)}if("never"===a)return null;const h=this._findContainedAutoClosingPair(e,o),c=h?h.close:"";let d=!0;for(const u of r){const{lineNumber:i,beforeColumn:s,afterColumn:r}=u,h=t.getLineContent(i),g=h.substring(0,s-1),p=h.substring(r-1);if(p.startsWith(c)||(d=!1),p.length>0){const t=p.charAt(0);if(!this._isBeforeClosingBrace(e,p)&&!l(t))return null}if(1===o.open.length&&("'"===n||'"'===n)&&"always"!==a){const t=(0,gK.i)(e.wordSeparators,[]);if(g.length>0){const e=g.charCodeAt(g.length-1);if(0===t.get(e))return null}}if(!t.tokenization.isCheapToTokenize(i))return null;t.tokenization.forceTokenization(i);const f=t.tokenization.getLineTokens(i),m=(0,yK.BQ)(f,s-1);if(!o.shouldAutoClose(m,s-m.firstCharOffset))return null;const _=o.findNeutralCharacter();if(_){const e=t.tokenization.getTokenTypeIfInsertingCharacter(i,s,_);if(!o.isOK(e))return null}}return d?o.close.substring(0,o.close.length-c.length):o.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let s=null;for(const r of n)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!s||r.open.length>s.open.length)&&(s=r);return s}static _findAutoClosingPairOpen(e,t,i,n){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!s)return null;let r=null;for(const o of s)if(null===r||o.open.length>r.open.length){let e=!0;for(const s of i){if(t.getValueInRange(new JM.Q(s.lineNumber,s.column-o.open.length+1,s.lineNumber,s.column))+n!==o.open){e=!1;break}}e&&(r=o)}return r}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=n.some((e=>t.startsWith(e.open))),o=s.some((e=>t.startsWith(e.close)));return!r&&o}}class l${static getEdits(e,t,i,n,s){if(!s&&this._isSurroundSelectionType(e,t,i,n))return this._runSurroundSelectionType(e,i,n)}static _runSurroundSelectionType(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=e.surroundingPairs[i];n[s]=new t$(r,i,o)}return new DK(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,n){if(!E$(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;const s=NK(n);for(const r of i){if(r.isEmpty())return!1;let e=!0;for(let i=r.startLineNumber;i<=r.endLineNumber;i++){const n=t.getLineContent(i),s=i===r.startLineNumber?r.startColumn-1:0,o=i===r.endLineNumber?r.endColumn-1:n.length,a=n.substring(s,o);if(/[^ \t]/.test(a)){e=!1;break}}if(e)return!1;if(s&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){if(NK(t.getValueInRange(r)))return!1}}return!0}}class h${static getEdits(e,t,i,n,s,r){if(!r&&this._isTypeInterceptorElectricChar(t,i,n)){const r=this._typeInterceptorElectricChar(e,t,i,n[0],s);if(r)return r}}static _isTypeInterceptorElectricChar(e,t,i){return!(1!==i.length||!t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,s){if(!t.electricChars.hasOwnProperty(s)||!n.isEmpty())return null;const r=n.getPosition();i.tokenization.forceTokenization(r.lineNumber);const o=i.tokenization.getLineTokens(r.lineNumber);let a;try{a=t.onElectricCharacter(s,o,r.column)}catch(O2){return(0,Ux.dz)(O2),null}if(!a)return null;if(a.matchOpenBracket){const n=(o.getLineContent()+s).lastIndexOf(a.matchOpenBracket)+1,l=i.bracketPairs.findMatchingBracketUp(a.matchOpenBracket,{lineNumber:r.lineNumber,column:n},500);if(l){if(l.startLineNumber===r.lineNumber)return null;const n=i.getLineContent(l.startLineNumber),o=Tx.UU(n),a=t.normalizeIndentation(o),h=i.getLineContent(r.lineNumber),c=i.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,d=a+h.substring(c-1,r.column-1)+s,u=new JM.Q(r.lineNumber,1,r.lineNumber,r.column),g=new AK(u,d);return new DK(b$(d,e),[g],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class c${static getEdits(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++)n[r]=new AK(t[r],i);const s=b$(i,e);return new DK(s,n,{shouldPushStackElementBefore:y$(e,s),shouldPushStackElementAfter:!1})}}class d${static getEdits(e,t,i,n,s){if(!s&&"\n"===n){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=this._enter(e,t,!1,i[s]);return new DK(4,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,n){if(0===e.autoIndent)return x$(n,"\n",i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||1===e.autoIndent){const s=t.getLineContent(n.startLineNumber),r=Tx.UU(s).substring(0,n.startColumn-1);return x$(n,"\n"+e.normalizeIndentation(r),i)}const s=qK(e.autoIndent,t,n,e.languageConfigurationService);if(s){if(s.indentAction===UK.l.None)return x$(n,"\n"+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===UK.l.Indent)return x$(n,"\n"+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===UK.l.IndentOutdent){const t=e.normalizeIndentation(s.indentation),r=e.normalizeIndentation(s.indentation+s.appendText),o="\n"+r+"\n"+t;return i?new RK(n,o,!0):new PK(n,o,-1,r.length-t.length,!0)}if(s.indentAction===UK.l.Outdent){const t=L$(e,s.indentation);return x$(n,"\n"+e.normalizeIndentation(t+s.appendText),i)}}const r=t.getLineContent(n.startLineNumber),o=Tx.UU(r).substring(0,n.startColumn-1);if(e.autoIndent>=4){const s=function(e,t,i,n,s){if(e<4)return null;const r=t.getLanguageIdAtPosition(i.startLineNumber,i.startColumn),o=s.getLanguageConfiguration(r).indentRulesSupport;if(!o)return null;t.tokenization.forceTokenization(i.startLineNumber);const a=new GK(t,s).getProcessedTokenContextAroundRange(i),l=a.afterRangeProcessedTokens,h=a.beforeRangeProcessedTokens,c=Tx.UU(h.getLineContent()),d=function(e,t,i){const n={tokenization:{getLineTokens:n=>n===t?i:e.tokenization.getLineTokens(n),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i)},getLineContent:n=>n===t?i.getLineContent():e.getLineContent(n)};return n}(t,i.startLineNumber,h),u=$K(t,i.getStartPosition()),g=t.getLineContent(i.startLineNumber),p=Tx.UU(g),f=n$(e,d,i.startLineNumber+1,void 0,s);if(!f){const e=u?p:c;return{beforeEnter:e,afterEnter:e}}let m=u?p:f.indentation;return f.action===UK.l.Indent&&(m=n.shiftIndent(m)),o.shouldDecrease(l.getLineContent())&&(m=n.unshiftIndent(m)),{beforeEnter:u?p:c,afterEnter:m}}(e.autoIndent,t,n,{unshiftIndent:t=>L$(e,t),shiftIndent:t=>k$(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)},e.languageConfigurationService);if(s){let r=e.visibleColumnFromColumn(t,n.getEndPosition());const o=n.endColumn,a=t.getLineContent(n.endLineNumber),l=Tx.HG(a);if(n=l>=0?n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,l+1)):n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new RK(n,"\n"+e.normalizeIndentation(s.afterEnter),!0);{let t=0;return o<=l+1&&(e.insertSpaces||(r=Math.ceil(r/e.indentSize)),t=Math.min(r+1-e.normalizeIndentation(s.afterEnter).length-1,0)),new PK(n,"\n"+e.normalizeIndentation(s.afterEnter),0,t,!0)}}}return x$(n,"\n"+e.normalizeIndentation(o),i)}static lineInsertBefore(e,t,i){if(null===t||null===i)return[];const n=[];for(let s=0,r=i.length;s<r;s++){let r=i[s].positionLineNumber;if(1===r)n[s]=new RK(new JM.Q(1,1,1,1),"\n");else{r--;const i=t.getLineMaxColumn(r);n[s]=this._enter(e,t,!1,new JM.Q(r,i,r,i))}}return n}static lineInsertAfter(e,t,i){if(null===t||null===i)return[];const n=[];for(let s=0,r=i.length;s<r;s++){const r=i[s].positionLineNumber,o=t.getLineMaxColumn(r);n[s]=this._enter(e,t,!1,new JM.Q(r,o,r,o))}return n}static lineBreakInsert(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=this._enter(e,t,!0,i[s]);return n}}class u${static getEdits(e,t,i,n,s,r){const o=this._distributePasteToCursors(e,i,n,s,r);return o?(i=i.sort(JM.Q.compareRangesUsingStarts),this._distributedPaste(e,t,i,o)):this._simplePaste(e,t,i,n,s)}static _distributePasteToCursors(e,t,i,n,s){if(n)return null;if(1===t.length)return null;if(s&&s.length===t.length)return s;if("spread"===e.multiCursorPaste){10===i.charCodeAt(i.length-1)&&(i=i.substring(0,i.length-1)),13===i.charCodeAt(i.length-1)&&(i=i.substring(0,i.length-1));const e=Tx.uz(i);if(e.length===t.length)return e}return null}static _distributedPaste(e,t,i,n){const s=[];for(let r=0,o=i.length;r<o;r++)s[r]=new AK(i[r],n[r]);return new DK(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,s){const r=[];for(let o=0,a=i.length;o<a;o++){const e=i[o],t=e.getPosition();if(s&&!e.isEmpty()&&(s=!1),s&&n.indexOf("\n")!==n.length-1&&(s=!1),s){const i=new JM.Q(t.lineNumber,1,t.lineNumber,1);r[o]=new OK(i,n,e,!0)}else r[o]=new AK(e,n)}return new DK(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class g${static getEdits(e,t,i,n,s,r,o,a){const l=n.map((e=>this._compositionType(i,e,s,r,o,a)));return new DK(4,l,{shouldPushStackElementBefore:y$(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,s,r){if(!t.isEmpty())return null;const o=t.getPosition(),a=Math.max(1,o.column-n),l=Math.min(e.getLineMaxColumn(o.lineNumber),o.column+s),h=new JM.Q(o.lineNumber,a,o.lineNumber,l);return e.getValueInRange(h)===i&&0===r?null:new PK(h,i,0,r)}}class p${static getEdits(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++)n[r]=new AK(t[r],i);const s=b$(i,e);return new DK(s,n,{shouldPushStackElementBefore:y$(e,s),shouldPushStackElementAfter:!1})}}class f${static getCommands(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++){const r=i[s];if(r.isEmpty()){const i=t.getLineContent(r.startLineNumber);if(/^\s*$/.test(i)&&t.tokenization.isCheapToTokenize(r.startLineNumber)){let o=this._goodIndentForLine(e,t,r.startLineNumber);o=o||"\t";const a=e.normalizeIndentation(o);if(!i.startsWith(a)){n[s]=new AK(new JM.Q(r.startLineNumber,1,r.startLineNumber,i.length+1),a,!0);continue}}n[s]=this._replaceJumpToNextIndent(e,t,r,!0)}else{if(r.startLineNumber===r.endLineNumber){const i=t.getLineMaxColumn(r.startLineNumber);if(1!==r.startColumn||r.endColumn!==i){n[s]=this._replaceJumpToNextIndent(e,t,r,!1);continue}}n[s]=new e$(r,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static _goodIndentForLine(e,t,i){let n=null,s="";const r=n$(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)n=r.action,s=r.indentation;else if(i>1){let n;for(n=i-1;n>=1;n--){const e=t.getLineContent(n);if(Tx.lT(e)>=0)break}if(n<1)return null;const r=t.getLineMaxColumn(n),o=qK(e.autoIndent,t,new JM.Q(n,r,n,r),e.languageConfigurationService);o&&(s=o.indentation+o.appendText)}return n&&(n===UK.l.Indent&&(s=k$(e,s)),n===UK.l.Outdent&&(s=L$(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,i,n){let s="";const r=i.getStartPosition();if(e.insertSpaces){const i=e.visibleColumnFromColumn(t,r),n=e.indentSize,o=n-i%n;for(let e=0;e<o;e++)s+=" "}else s="\t";return new AK(i,s,n)}}class m$ extends PK{constructor(e,t,i,n,s,r){super(e,t,i,n),this._openCharacter=s,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new JM.Q(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new JM.Q(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class _$ extends m${constructor(e,t,i,n){super(e,(i?t:"")+n,0,-n.length,t,n)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,i,t)}}class v$ extends m${constructor(e,t,i,n){const s=i+n;super(t,s,0,i.length,i,n),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:s}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(2!==i.length)throw new Error("There should be two inverse edit operations!");const n=i[0].range,s=i[1].range,r=n.plusRange(s);return this._computeCursorStateWithRange(e,r,t)}}function b$(e,t){return" "===e?5===t||6===t?6:5:4}function y$(e,t){return!(!C$(e)||C$(t))||5!==e&&w$(e)!==w$(t)}function w$(e){return 6===e||5===e?"space":e}function C$(e){return 4===e||5===e||6===e}function S$(e,t,i,n,s){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,o=i.length;r<o;r++){const o=i[r];if(!o.isEmpty())return!1;const a=o.getPosition(),l=t.getLineContent(a.lineNumber);if(l.charAt(a.column-1)!==s)return!1;const h=NK(s);if(92===(a.column>2?l.charCodeAt(a.column-2):0)&&h)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,i=n.length;t<i;t++){const i=n[t];if(a.lineNumber===i.startLineNumber&&a.column===i.startColumn){e=!0;break}}if(!e)return!1}}return!0}function x$(e,t,i){return i?new RK(e,t,!0):new AK(e,t,!0)}function k$(e,t,i){return i=i||1,e$.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}function L$(e,t,i){return i=i||1,e$.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}function E$(e,t){return NK(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}class M${static indent(e,t,i){if(null===t||null===i)return[];const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=new e$(i[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static outdent(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=new e$(i[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static paste(e,t,i,n,s,r){return u$.getEdits(e,t,i,n,s,r)}static tab(e,t,i){return f$.getCommands(e,t,i)}static compositionType(e,t,i,n,s,r,o,a){return g$.getEdits(e,t,i,n,s,r,o,a)}static compositionEndWithInterceptors(e,t,i,n,s,r){if(!n)return null;let o=null;for(const d of n)if(null===o)o=d.insertedText;else if(o!==d.insertedText)return null;if(!o||1!==o.length)return null;const a=o;let l=!1;for(const d of n)if(0!==d.deletedText.length){l=!0;break}if(l){if(!E$(t,a)||!t.surroundingPairs.hasOwnProperty(a))return null;const e=NK(a);for(const t of n){if(0!==t.deletedSelectionStart||t.deletedSelectionEnd!==t.deletedText.length)return null;if(/^[ \t]+$/.test(t.deletedText))return null;if(e&&NK(t.deletedText))return null}const i=[];for(const t of s){if(!t.isEmpty())return null;i.push(t.getPosition())}if(i.length!==n.length)return null;const r=[];for(let s=0,o=i.length;s<o;s++)r.push(new i$(i[s],n[s].deletedText,t.surroundingPairs[a]));return new DK(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const h=o$.getEdits(t,i,s,r,a);if(void 0!==h)return h;const c=a$.getEdits(t,i,s,a,!0,!1);return void 0!==c?c:null}static typeWithInterceptors(e,t,i,n,s,r,o){const a=d$.getEdits(i,n,s,o,e);if(void 0!==a)return a;const l=s$.getEdits(i,n,s,o,e);if(void 0!==l)return l;const h=r$.getEdits(t,i,n,s,r,o);if(void 0!==h)return h;const c=a$.getEdits(i,n,s,o,!1,e);if(void 0!==c)return c;const d=l$.getEdits(i,n,s,o,e);if(void 0!==d)return d;const u=h$.getEdits(t,i,n,s,o,e);return void 0!==u?u:c$.getEdits(t,s,o)}static typeWithoutInterceptors(e,t,i,n,s){return p$.getEdits(e,n,s)}}class T${constructor(e,t,i,n,s,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=s,this.insertedSelectionEnd=r}}var D$;!function(e){e.editorSimpleInput=new mM.N1("editorSimpleInput",!1,!0),e.editorTextFocus=new mM.N1("editorTextFocus",!1,WS.kg("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),e.focus=new mM.N1("editorFocus",!1,WS.kg("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),e.textInputFocus=new mM.N1("textInputFocus",!1,WS.kg("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),e.readOnly=new mM.N1("editorReadonly",!1,WS.kg("editorReadonly","Whether the editor is read-only")),e.inDiffEditor=new mM.N1("inDiffEditor",!1,WS.kg("inDiffEditor","Whether the context is a diff editor")),e.isEmbeddedDiffEditor=new mM.N1("isEmbeddedDiffEditor",!1,WS.kg("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),e.inMultiDiffEditor=new mM.N1("inMultiDiffEditor",!1,WS.kg("inMultiDiffEditor","Whether the context is a multi diff editor")),e.multiDiffEditorAllCollapsed=new mM.N1("multiDiffEditorAllCollapsed",void 0,WS.kg("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),e.hasChanges=new mM.N1("diffEditorHasChanges",!1,WS.kg("diffEditorHasChanges","Whether the diff editor has changes")),e.comparingMovedCode=new mM.N1("comparingMovedCode",!1,WS.kg("comparingMovedCode","Whether a moved code block is selected for comparison")),e.accessibleDiffViewerVisible=new mM.N1("accessibleDiffViewerVisible",!1,WS.kg("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),e.diffEditorRenderSideBySideInlineBreakpointReached=new mM.N1("diffEditorRenderSideBySideInlineBreakpointReached",!1,WS.kg("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),e.diffEditorInlineMode=new mM.N1("diffEditorInlineMode",!1,WS.kg("diffEditorInlineMode","Whether inline mode is active")),e.diffEditorOriginalWritable=new mM.N1("diffEditorOriginalWritable",!1,WS.kg("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),e.diffEditorModifiedWritable=new mM.N1("diffEditorModifiedWritable",!1,WS.kg("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),e.diffEditorOriginalUri=new mM.N1("diffEditorOriginalUri","",WS.kg("diffEditorOriginalUri","The uri of the original document")),e.diffEditorModifiedUri=new mM.N1("diffEditorModifiedUri","",WS.kg("diffEditorModifiedUri","The uri of the modified document")),e.columnSelection=new mM.N1("editorColumnSelection",!1,WS.kg("editorColumnSelection","Whether `editor.columnSelection` is enabled")),e.writable=e.readOnly.toNegated(),e.hasNonEmptySelection=new mM.N1("editorHasSelection",!1,WS.kg("editorHasSelection","Whether the editor has text selected")),e.hasOnlyEmptySelection=e.hasNonEmptySelection.toNegated(),e.hasMultipleSelections=new mM.N1("editorHasMultipleSelections",!1,WS.kg("editorHasMultipleSelections","Whether the editor has multiple selections")),e.hasSingleSelection=e.hasMultipleSelections.toNegated(),e.tabMovesFocus=new mM.N1("editorTabMovesFocus",!1,WS.kg("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),e.tabDoesNotMoveFocus=e.tabMovesFocus.toNegated(),e.isInEmbeddedEditor=new mM.N1("isInEmbeddedEditor",!1,!0),e.canUndo=new mM.N1("canUndo",!1,!0),e.canRedo=new mM.N1("canRedo",!1,!0),e.hoverVisible=new mM.N1("editorHoverVisible",!1,WS.kg("editorHoverVisible","Whether the editor hover is visible")),e.hoverFocused=new mM.N1("editorHoverFocused",!1,WS.kg("editorHoverFocused","Whether the editor hover is focused")),e.stickyScrollFocused=new mM.N1("stickyScrollFocused",!1,WS.kg("stickyScrollFocused","Whether the sticky scroll is focused")),e.stickyScrollVisible=new mM.N1("stickyScrollVisible",!1,WS.kg("stickyScrollVisible","Whether the sticky scroll is visible")),e.standaloneColorPickerVisible=new mM.N1("standaloneColorPickerVisible",!1,WS.kg("standaloneColorPickerVisible","Whether the standalone color picker is visible")),e.standaloneColorPickerFocused=new mM.N1("standaloneColorPickerFocused",!1,WS.kg("standaloneColorPickerFocused","Whether the standalone color picker is focused")),e.inCompositeEditor=new mM.N1("inCompositeEditor",void 0,WS.kg("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),e.notInCompositeEditor=e.inCompositeEditor.toNegated(),e.languageId=new mM.N1("editorLangId","",WS.kg("editorLangId","The language identifier of the editor")),e.hasCompletionItemProvider=new mM.N1("editorHasCompletionItemProvider",!1,WS.kg("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),e.hasCodeActionsProvider=new mM.N1("editorHasCodeActionsProvider",!1,WS.kg("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),e.hasCodeLensProvider=new mM.N1("editorHasCodeLensProvider",!1,WS.kg("editorHasCodeLensProvider","Whether the editor has a code lens provider")),e.hasDefinitionProvider=new mM.N1("editorHasDefinitionProvider",!1,WS.kg("editorHasDefinitionProvider","Whether the editor has a definition provider")),e.hasDeclarationProvider=new mM.N1("editorHasDeclarationProvider",!1,WS.kg("editorHasDeclarationProvider","Whether the editor has a declaration provider")),e.hasImplementationProvider=new mM.N1("editorHasImplementationProvider",!1,WS.kg("editorHasImplementationProvider","Whether the editor has an implementation provider")),e.hasTypeDefinitionProvider=new mM.N1("editorHasTypeDefinitionProvider",!1,WS.kg("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),e.hasHoverProvider=new mM.N1("editorHasHoverProvider",!1,WS.kg("editorHasHoverProvider","Whether the editor has a hover provider")),e.hasDocumentHighlightProvider=new mM.N1("editorHasDocumentHighlightProvider",!1,WS.kg("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),e.hasDocumentSymbolProvider=new mM.N1("editorHasDocumentSymbolProvider",!1,WS.kg("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),e.hasReferenceProvider=new mM.N1("editorHasReferenceProvider",!1,WS.kg("editorHasReferenceProvider","Whether the editor has a reference provider")),e.hasRenameProvider=new mM.N1("editorHasRenameProvider",!1,WS.kg("editorHasRenameProvider","Whether the editor has a rename provider")),e.hasSignatureHelpProvider=new mM.N1("editorHasSignatureHelpProvider",!1,WS.kg("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),e.hasInlayHintsProvider=new mM.N1("editorHasInlayHintsProvider",!1,WS.kg("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),e.hasDocumentFormattingProvider=new mM.N1("editorHasDocumentFormattingProvider",!1,WS.kg("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),e.hasDocumentSelectionFormattingProvider=new mM.N1("editorHasDocumentSelectionFormattingProvider",!1,WS.kg("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),e.hasMultipleDocumentFormattingProvider=new mM.N1("editorHasMultipleDocumentFormattingProvider",!1,WS.kg("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),e.hasMultipleDocumentSelectionFormattingProvider=new mM.N1("editorHasMultipleDocumentSelectionFormattingProvider",!1,WS.kg("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))}(D$||(D$={}));class N$ extends FM{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i||{})}}var I$,A$,R$;!function(e){e.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!gM.Gv(e))return!1;const t=e;return!!gM.Kg(t.to)&&(!(!gM.b0(t.by)&&!gM.Kg(t.by))&&(!(!gM.b0(t.value)&&!gM.Et(t.value))&&!(!gM.b0(t.revealCursor)&&!gM.Lm(t.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},e.parse=function(t){let i,n;switch(t.to){case e.RawDirection.Up:i=1;break;case e.RawDirection.Right:i=2;break;case e.RawDirection.Down:i=3;break;case e.RawDirection.Left:i=4;break;default:return null}switch(t.by){case e.RawUnit.Line:n=1;break;case e.RawUnit.WrappedLine:n=2;break;case e.RawUnit.Page:n=3;break;case e.RawUnit.HalfPage:n=4;break;case e.RawUnit.Editor:n=5;break;case e.RawUnit.Column:n=6;break;default:n=2}return{direction:i,unit:n,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(I$||(I$={})),function(e){e.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!gM.Gv(e))return!1;const t=e;return!(!gM.Et(t.lineNumber)&&!gM.Kg(t.lineNumber))&&!(!gM.b0(t.at)&&!gM.Kg(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(A$||(A$={}));class P${constructor(e){e.addImplementation(1e4,"code-editor",((e,t)=>{const i=e.get(tM).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&this._runEditorCommand(e,i,t)})),e.addImplementation(1e3,"generic-dom-input-textarea",((e,t)=>{const i=XL();return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(this.runDOMCommand(i),!0)})),e.addImplementation(0,"generic-dom",((e,t)=>{const i=e.get(tM).getActiveCodeEditor();return!!i&&(i.focus(),this._runEditorCommand(e,i,t))}))}_runEditorCommand(e,t,i){const n=this.runEditorCommand(e,t,i);return n||!0}}!function(e){class t extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;e.model.pushStackElement();e.setCursorStates(t.source,3,[WK.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)])&&2!==t.revealType&&e.revealAllCursors(t.source,!0,!0)}}e.MoveTo=BM(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=BM(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class i extends N${runCoreEditorCommand(e,t){e.model.pushStackElement();const i=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);null!==i&&(e.setCursorStates(t.source,3,i.viewStates.map((e=>LK.fromViewState(e)))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source))}}e.ColumnSelect=BM(new class extends i{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,i,n){if("undefined"===typeof n.position||"undefined"===typeof n.viewPosition||"undefined"===typeof n.mouseColumn)return null;const s=e.model.validatePosition(n.position),r=e.coordinatesConverter.validateViewPosition(new OA.y(n.viewPosition.lineNumber,n.viewPosition.column),s),o=n.doColumnSelect?i.fromViewLineNumber:r.lineNumber,a=n.doColumnSelect?i.fromViewVisualColumn:n.mouseColumn-1;return IK.columnSelect(e.cursorConfig,e,o,a,r.lineNumber,n.mouseColumn-1)}}),e.CursorColumnSelectLeft=BM(new class extends i{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,n){return IK.columnSelectLeft(e.cursorConfig,e,i)}}),e.CursorColumnSelectRight=BM(new class extends i{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,n){return IK.columnSelectRight(e.cursorConfig,e,i)}});class n extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,n){return IK.columnSelectUp(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectUp=BM(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=BM(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,n){return IK.columnSelectDown(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectDown=BM(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=BM(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends N${constructor(){super({id:"cursorMove",precondition:void 0,metadata:HK.metadata})}runCoreEditorCommand(e,t){const i=HK.parse(t);i&&this._runCursorMove(e,t.source,i)}_runCursorMove(e,t,i){e.model.pushStackElement(),e.setCursorStates(t,3,r._move(e,e.getCursorStates(),i)),e.revealAllCursors(t,!0)}static _move(e,t,i){const n=i.select,s=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return WK.simpleMove(e,t,i.direction,n,s,i.unit);case 11:case 13:case 12:case 14:return WK.viewportMove(e,t,i.direction,n,s);default:return null}}}e.CursorMoveImpl=r,e.CursorMove=BM(new r);class o extends N${constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let i=this._staticArgs;-1===this._staticArgs.value&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,WK.simpleMove(e,e.getCursorStates(),i.direction,i.select,i.value,i.unit)),e.revealAllCursors(t.source,!0)}}e.CursorLeft=BM(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=BM(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1039}})),e.CursorRight=BM(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=BM(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1041}})),e.CursorUp=BM(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=BM(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=BM(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:11}})),e.CursorPageUpSelect=BM(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1035}})),e.CursorDown=BM(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=BM(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=BM(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:12}})),e.CursorPageDownSelect=BM(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1036}})),e.CreateCursor=BM(new class extends N${constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;let i;i=t.wholeLine?WK.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):WK.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);const n=e.getCursorStates();if(n.length>1){const s=i.modelState?i.modelState.position:null,r=i.viewState?i.viewState.position:null;for(let i=0,o=n.length;i<o;i++){const o=n[i];if((!s||o.modelState.selection.containsPosition(s))&&(!r||o.viewState.selection.containsPosition(r)))return n.splice(i,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,n)}}n.push(i),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}}),e.LastCursorMoveToSelect=BM(new class extends N${constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),s=n.slice(0);s[i]=WK.moveTo(e,n[i],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,s)}});class a extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,WK.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}e.CursorHome=BM(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=BM(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealAllCursors(t.source,!0)}_exec(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],s=n.modelState.position.lineNumber;t[i]=LK.fromModelState(n.modelState.move(this._inSelectionMode,s,1,0))}return t}}e.CursorLineStart=BM(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=BM(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:0,mac:{primary:1311}}}));class h extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,WK.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealAllCursors(t.source,!0)}}e.CursorEnd=BM(new h({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:D$.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:WS.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=BM(new h({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:D$.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:WS.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class c extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealAllCursors(t.source,!0)}_exec(e,t){const i=[];for(let n=0,s=t.length;n<s;n++){const s=t[n],r=s.modelState.position.lineNumber,o=e.model.getLineMaxColumn(r);i[n]=LK.fromModelState(s.modelState.move(this._inSelectionMode,r,o,0))}return i}}e.CursorLineEnd=BM(new c({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=BM(new c({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:0,mac:{primary:1315}}}));class d extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,WK.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}e.CursorTop=BM(new d({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=BM(new d({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3086,mac:{primary:3088}}}));class u extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,WK.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealAllCursors(t.source,!0)}}e.CursorBottom=BM(new u({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=BM(new u({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:3085,mac:{primary:3090}}}));class g extends N${constructor(){super({id:"editorScroll",precondition:void 0,metadata:I$.metadata})}determineScrollMethod(e){return[6].includes(e.unit)&&[4,2].includes(e.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(e.unit)&&[1,3].includes(e.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(e,t){const i=I$.parse(t);if(!i)return;const n=this.determineScrollMethod(i);n&&n(e,t.source,i)}_runVerticalEditorScroll(e,t,i){const n=this._computeDesiredScrollTop(e,i);if(i.revealCursor){const s=e.getCompletelyVisibleViewRangeAtScrollTop(n);e.setCursorStates(t,3,[WK.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),s,i.select)])}e.viewLayout.setScrollPosition({scrollTop:n},0)}_computeDesiredScrollTop(e,t){if(1===t.unit){const i=e.viewLayout.getFutureViewport(),n=e.getCompletelyVisibleViewRangeAtScrollTop(i.top),s=e.coordinatesConverter.convertViewRangeToModelRange(n);let r;r=1===t.direction?Math.max(1,s.startLineNumber-t.value):Math.min(e.model.getLineCount(),s.startLineNumber+t.value);const o=e.coordinatesConverter.convertModelPositionToViewPosition(new OA.y(r,1));return e.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}if(5===t.unit){let i=0;return 3===t.direction&&(i=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(i)}let i;i=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;const n=(1===t.direction?-1:1)*i;return e.viewLayout.getCurrentScrollTop()+n*e.cursorConfig.lineHeight}_runHorizontalEditorScroll(e,t,i){const n=this._computeDesiredScrollLeft(e,i);e.viewLayout.setScrollPosition({scrollLeft:n},0)}_computeDesiredScrollLeft(e,t){const i=(4===t.direction?-1:1)*t.value;return e.viewLayout.getCurrentScrollLeft()+i*e.cursorConfig.typicalHalfwidthCharacterWidth}}e.EditorScrollImpl=g,e.EditorScroll=BM(new g),e.ScrollLineUp=BM(new class extends N${constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Up,by:I$.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageUp=BM(new class extends N${constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Up,by:I$.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorTop=BM(new class extends N${constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Up,by:I$.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLineDown=BM(new class extends N${constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Down,by:I$.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageDown=BM(new class extends N${constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Down,by:I$.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorBottom=BM(new class extends N${constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Down,by:I$.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLeft=BM(new class extends N${constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Left,by:I$.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollRight=BM(new class extends N${constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:I$.RawDirection.Right,by:I$.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}});class p extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[WK.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),2!==t.revealType&&e.revealAllCursors(t.source,!0,!0))}}e.WordSelect=BM(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=BM(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=BM(new class extends N${constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),s=n.slice(0),r=n[i];s[i]=WK.word(e,r,r.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,s)}});class f extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[WK.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),2!==t.revealType&&e.revealAllCursors(t.source,!1,!0))}}e.LineSelect=BM(new f({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=BM(new f({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class m extends N${constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),n=e.getCursorStates(),s=n.slice(0);s[i]=WK.line(e,n[i],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,s)}}e.LastCursorLineSelect=BM(new m({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=BM(new m({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=BM(new class extends N${constructor(){super({id:"cancelSelection",precondition:D$.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[WK.cancelSelection(e,e.getPrimaryCursorState())]),e.revealAllCursors(t.source,!0)}}),e.RemoveSecondaryCursors=BM(new class extends N${constructor(){super({id:"removeSecondaryCursors",precondition:D$.hasMultipleSelections,kbOpts:{weight:1,kbExpr:D$.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealAllCursors(t.source,!0),eA(WS.kg("removedCursor","Removed secondary cursors"))}}),e.RevealLine=BM(new class extends N${constructor(){super({id:"revealLine",precondition:void 0,metadata:A$.metadata})}runCoreEditorCommand(e,t){const i=t,n=i.lineNumber||0;let s="number"===typeof n?n+1:parseInt(n)+1;s<1&&(s=1);const r=e.model.getLineCount();s>r&&(s=r);const o=new JM.Q(s,1,s,e.model.getLineMaxColumn(s));let a=0;if(i.at)switch(i.at){case A$.RawAtArgument.Top:a=3;break;case A$.RawAtArgument.Center:a=1;break;case A$.RawAtArgument.Bottom:a=4}const l=e.coordinatesConverter.convertModelRangeToViewRange(o);e.revealRange(t.source,!1,l,a,0)}}),e.SelectAll=new class extends P${constructor(){super(jM)}runDOMCommand(e){Rx&&(e.focus(),e.select()),e.ownerDocument.execCommand("selectAll")}runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[WK.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=BM(new class extends N${constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){t.selection&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[LK.fromModelSelection(t.selection)]))}})}(R$||(R$={}));const O$=mM.M$.and(D$.textInputFocus,D$.columnSelection);function F$(e,t){bM.registerKeybindingRule({id:e,primary:t,when:O$,weight:1})}function B$(e){return e.register(),e}var z$;F$(R$.CursorColumnSelectLeft.id,1039),F$(R$.CursorColumnSelectRight.id,1041),F$(R$.CursorColumnSelectUp.id,1040),F$(R$.CursorColumnSelectPageUp.id,1035),F$(R$.CursorColumnSelectDown.id,1042),F$(R$.CursorColumnSelectPageDown.id,1036),function(e){class t extends FM{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditingCommand(t,n,i||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=BM(new class extends t{constructor(){super({id:"lineBreakInsert",precondition:D$.writable,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,d$.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection))))}}),e.Outdent=BM(new class extends t{constructor(){super({id:"outdent",precondition:D$.writable,kbOpts:{weight:0,kbExpr:mM.M$.and(D$.editorTextFocus,D$.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,M$.outdent(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.Tab=BM(new class extends t{constructor(){super({id:"tab",precondition:D$.writable,kbOpts:{weight:0,kbExpr:mM.M$.and(D$.editorTextFocus,D$.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,M$.tab(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.DeleteLeft=BM(new class extends t{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,i){const[n,s]=zK.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)),t.getCursorAutoClosedCharacters());n&&e.pushUndoStop(),e.executeCommands(this.id,s),t.setPrevEditOperationType(2)}}),e.DeleteRight=BM(new class extends t{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:D$.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,i){const[n,s]=zK.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)));n&&e.pushUndoStop(),e.executeCommands(this.id,s),t.setPrevEditOperationType(3)}}),e.Undo=new class extends P${constructor(){super(HM)}runDOMCommand(e){e.ownerDocument.execCommand("undo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(92))return t.getModel().undo()}},e.Redo=new class extends P${constructor(){super(UM)}runDOMCommand(e){e.ownerDocument.execCommand("redo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(92))return t.getModel().redo()}}}(z$||(z$={}));class V$ extends RM{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(tM).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function W$(e,t){B$(new V$("default:"+e,e)),B$(new V$(e,e,t))}W$("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),W$("replacePreviousChar"),W$("compositionType"),W$("compositionStart"),W$("compositionEnd"),W$("paste"),W$("cut");class H${constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){R$.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new OA.y(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=BS.j9&&t.get(108),n=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){R$.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){R$.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),R$.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),R$.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){R$.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){R$.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){R$.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){R$.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){R$.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){R$.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){R$.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){R$.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){R$.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class U${constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Ux.D7("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(0===this.getCount())return null;const i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){const i=t-e+1;return this._rendLineNumberStart-=i,null}if(e>n)return null;let s=0,r=0;for(let o=i;o<=n;o++){const i=o-this._rendLineNumberStart;e<=o&&o<=t&&(0===r?(s=i,r=1):r++)}if(e<i){let n=0;n=t<i?t-e+1:i-e,this._rendLineNumberStart-=n}return this._lines.splice(s,r)}onLinesChanged(e,t){const i=e+t-1;if(0===this.getCount())return!1;const n=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let o=e;o<=i;o++)o>=n&&o<=s&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(0===this.getCount())return null;const i=t-e+1,n=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>s)return null;if(i+e>s){return this._lines.splice(e-this._rendLineNumberStart,s-e+1)}const r=[];for(let c=0;c<i;c++)r[c]=this._lineFactory.createLine();const o=e-this._rendLineNumberStart,a=this._lines.slice(0,o),l=this._lines.slice(o,this._lines.length-i),h=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=a.concat(r).concat(l),h}onTokensChanged(e){if(0===this.getCount())return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let n=!1;for(let s=0,r=e.length;s<r;s++){const r=e[s];if(r.toLineNumber<t||r.fromLineNumber>i)continue;const o=Math.max(t,r.fromLineNumber),a=Math.min(i,r.toLineNumber);for(let e=o;e<=a;e++){const t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),n=!0}}return n}}class j${constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new U$(this._lineFactory)}_createDomNode(){const e=UE(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const e=t[i].getDomNode();e?.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const e=t[i].getDomNode();e?.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new G$(this.domNode.domNode,this._lineFactory,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class G${static#e=(()=>this._ttPolicy=KM("editorViewLayer",{createHTML:e=>e}))();constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,n){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||i<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=i-t+1,s.lines=[];for(let e=t;e<=i;e++)s.lines[e-t]=this._lineFactory.createLine();return this._finishRendering(s,!0,n),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(i-s.rendLineNumberStart,s.linesLength-1),n,t),s.rendLineNumberStart>t){const e=t,r=Math.min(i,s.rendLineNumberStart-1);e<=r&&(this._insertLinesBefore(s,e,r,n,t),s.linesLength+=r-e+1)}else if(s.rendLineNumberStart<t){const e=Math.min(s.linesLength,t-s.rendLineNumberStart);e>0&&(this._removeLinesBefore(s,e),s.linesLength-=e)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<i){const e=s.rendLineNumberStart+s.linesLength,r=i;e<=r&&(this._insertLinesAfter(s,e,r,n,t),s.linesLength+=r-e+1)}else if(s.rendLineNumberStart+s.linesLength-1>i){const e=Math.max(0,i-s.rendLineNumberStart+1),t=s.linesLength-1-e+1;t>0&&(this._removeLinesAfter(s,t),s.linesLength-=t)}return this._finishRendering(s,!1,n),s}_renderUntouchedLines(e,t,i,n,s){const r=e.rendLineNumberStart,o=e.lines;for(let a=t;a<=i;a++){const e=r+a;o[a].layoutLine(e,n[e-s],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,n,s){const r=[];let o=0;for(let a=t;a<=i;a++)r[o++]=this._lineFactory.createLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const t=e.lines[i].getDomNode();t?.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,s){const r=[];let o=0;for(let a=t;a<=i;a++)r[o++]=this._lineFactory.createLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let n=0;n<t;n++){const t=e.lines[i+n].getDomNode();t?.remove()}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){G$._ttPolicy&&(i=G$._ttPolicy.createHTML(i));const s=this._domNode.lastChild;t||!s?this._domNode.innerHTML=i:s.insertAdjacentHTML("afterend",i);let r=this._domNode.lastChild;for(let o=e.linesLength-1;o>=0;o--){const t=e.lines[o];n[o]&&(t.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const n=document.createElement("div");G$._ttPolicy&&(t=G$._ttPolicy.createHTML(t)),n.innerHTML=t;for(let s=0;s<e.linesLength;s++){const t=e.lines[s];if(i[s]){const e=n.firstChild,i=t.getDomNode();i.parentNode.replaceChild(e,i),t.setDomNode(e)}}}static#t=(()=>this._sb=new RU.fe(1e5))();_finishRendering(e,t,i){const n=G$._sb,s=e.linesLength,r=e.lines,o=e.rendLineNumberStart,a=[];{n.reset();let l=!1;for(let e=0;e<s;e++){const t=r[e];a[e]=!1;if(t.getDomNode())continue;t.renderLine(e+o,i[e],this._viewportData.lineHeight,this._viewportData,n)&&(a[e]=!0,l=!0)}l&&this._finishRenderingNewLines(e,t,n.build(),a)}{n.reset();let t=!1;const l=[];for(let e=0;e<s;e++){const s=r[e];if(l[e]=!1,a[e])continue;s.renderLine(e+o,i[e],this._viewportData.lineHeight,this._viewportData,n)&&(l[e]=!0,t=!0)}t&&this._finishRenderingInvalidLines(e,n.build(),l)}}}class K$ extends lG{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new j$({createLine:()=>new $$(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const t=this._context.configuration.options.get(50);jE(this.domNode,t),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._context.configuration.options.get(50);return jE(this.domNode,t),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter((e=>e.shouldRender()));for(let i=0,n=t.length;i<n;i++){const n=t[i];n.prepareRender(e),n.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class $${constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=UE(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,n,s){let r="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){r+=this._dynamicOverlays[o].render(n.startLineNumber,e)}return this._renderedContent!==r&&(this._renderedContent=r,s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;">'),s.appendString(r),s.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class q$ extends K${constructor(e){super(e);const t=this._context.configuration.options.get(146);this._contentWidth=t.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const t=this._context.configuration.options.get(146);return this._contentWidth=t.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class Q$ extends K${constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),jE(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;jE(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class X${constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown?.(e)}emitKeyUp(e){this.onKeyUp?.(e)}emitContextMenu(e){this.onContextMenu?.(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove?.(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave?.(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown?.(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp?.(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag?.(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop?.(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(e){this.onMouseWheel?.(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return X$.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),5!==i.type&&8!==i.type||(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new OA.y(e.afterLineNumber,1)).lineNumber}}}class Y$ extends lG{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=UE(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const t=this._context.configuration.options.get(146),i=t.contentWidth-t.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,e=!0);const n=t.contentLeft;return this.contentLeft!==n&&(this.contentLeft=n,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const n of i){if(!n.options.blockClassName)continue;let i,s,r=this.blocks[t];r||(r=this.blocks[t]=UE(document.createElement("div")),this.domNode.appendChild(r)),n.options.blockIsAfterEnd?(i=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!1),s=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0)):(i=e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!0),s=n.range.isEmpty()&&!n.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0));const[o,a,l,h]=n.options.blockPadding??[0,0,0,0];r.setClassName("blockDecorations-block "+n.options.blockClassName),r.setLeft(this.contentLeft-h),r.setWidth(this.contentWidth+h+a),r.setTop(i-e.scrollTop-o),r.setHeight(s-i+o+l),t++}for(let n=t;n<this.blocks.length;n++)this.blocks[n].domNode.remove();this.blocks.length=t}}class Z$ extends lG{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=UE(document.createElement("div")),hG.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=UE(document.createElement("div")),hG.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new J$(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n,s){this._widgets[e.getId()].setPosition(t,i,n,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t];delete this._widgets[t];const i=e.domNode.domNode;i.remove(),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class J${constructor(e,t,i){this._primaryAnchor=new eq(null,null),this._secondaryAnchor=new eq(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=UE(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const n=this._context.configuration.options,s=n.get(146);this._fixedOverflowWidgets=n.get(42),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=n.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const e=t.get(146);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){function n(e,t,i){if(!e)return new eq(null,null);const n=t.model.validatePosition(e);if(t.coordinatesConverter.modelPositionIsVisible(n)){const s=t.coordinatesConverter.convertModelPositionToViewPosition(n,i??void 0);return new eq(e,s)}return new eq(e,null)}this._affinity=e,this._primaryAnchor=n(t,this._context.viewModel,this._affinity),this._secondaryAnchor=n(i,this._context.viewModel,this._affinity)}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?t?.innerWidth||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n){const s=e.top,r=s,o=e.top+e.height,a=s-i,l=r>=i,h=o,c=n.viewportHeight-o>=i;let d=e.left;return d+t>n.scrollLeft+n.viewportWidth&&(d=n.scrollLeft+n.viewportWidth-t),d<n.scrollLeft&&(d=n.scrollLeft),{fitsAbove:l,aboveTop:a,fitsBelow:c,belowTop:h,left:d}}_layoutHorizontalSegmentInPage(e,t,i,n){const s=Math.max(15,t.left-n),r=Math.min(t.left+t.width+n,e.width-15),o=this._viewDomNode.domNode.ownerDocument.defaultView;let a=t.left+i-(o?.scrollX??0);if(a+n>r){const e=a-(r-n);a-=e,i-=e}if(a<s){const e=a-s;a-=e,i-=e}return[i,a]}_layoutBoxInPage(e,t,i,n){const s=e.top-i,r=e.top+e.height,o=zL(this._viewDomNode.domNode),a=this._viewDomNode.domNode.ownerDocument,l=a.defaultView,h=o.top+s-(l?.scrollY??0),c=o.top+r-(l?.scrollY??0),d=OL(a.body),[u,g]=this._layoutHorizontalSegmentInPage(d,o,e.left-n.scrollLeft+this._contentLeft,t),p=h>=22,f=c+i<=d.height-22;return this._fixedOverflowWidgets?{fitsAbove:p,aboveTop:Math.max(h,22),fitsBelow:f,belowTop:c,left:g}:{fitsAbove:p,aboveTop:s,fitsBelow:f,belowTop:r,left:u}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new tq(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){return{primary:t(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:t(this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function t(t,i,n){if(!t)return null;const s=e.visibleRangeForPosition(t);if(!s)return null;const r=1===t.column&&3===i?0:s.left,o=e.getVerticalOffsetForLineNumber(t.lineNumber)-e.scrollTop;return new iq(o,r,n)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const n=this._context.configuration.options.get(50);let s=t.left;return s=s<e.left?Math.max(s,e.left-i+n.typicalFullwidthCharacterWidth):Math.min(s,e.left+i-n.typicalFullwidthCharacterWidth),new iq(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||0===this._preference.length)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){let e=null;if("function"===typeof this._actual.beforeRender&&(e=nq(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeOffsetWidth=e.width,this._cachedDomNodeOffsetHeight=e.height;else{const e=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(e.width),this._cachedDomNodeOffsetHeight=Math.round(e.height)}}const n=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let s;s=this.allowEditorOverflow?this._layoutBoxInPage(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const e of this._preference)if(1===e){if(!s)return null;if(2===r||s.fitsAbove)return{kind:"inViewport",coordinate:new tq(s.aboveTop,s.left),position:1}}else{if(2!==e)return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new tq(n.top,n.left)),position:0}:{kind:"inViewport",coordinate:new tq(n.top,n.left),position:0};if(!s)return null;if(2===r||s.fitsBelow)return{kind:"inViewport",coordinate:new tq(s.belowTop,s.left),position:2}}return null}onBeforeRender(e){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData||"offViewport"===this._renderData.kind)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,"offViewport"===this._renderData?.kind&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),void("function"===typeof this._actual.afterRender&&nq(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"===typeof this._actual.afterRender&&nq(this._actual.afterRender,this._actual,this._renderData.position)}}class eq{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class tq{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class iq{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function nq(e,t){try{for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return e.call(t,...n)}catch{return null}}class sq extends cK{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new jG.L(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const s of this._selections)t.add(s.positionLineNumber);const i=Array.from(t);i.sort(((e,t)=>e-t)),OS.aI(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const n=this._selections.every((e=>e.isEmpty()));return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}prepareRender(e){if(!this._shouldRenderThis())return void(this._renderData=null);const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=[];for(let r=t;r<=i;r++){n[r-t]=""}if(this._wordWrap){const s=this._renderOne(e,!1);for(const e of this._cursorLineNumbers){const r=this._context.viewModel.coordinatesConverter,o=r.convertViewPositionToModelPosition(new OA.y(e,1)).lineNumber,a=r.convertModelPositionToViewPosition(new OA.y(o,1)).lineNumber,l=r.convertModelPositionToViewPosition(new OA.y(o,this._context.viewModel.model.getLineMaxColumn(o))).lineNumber,h=Math.max(a,t),c=Math.min(l,i);for(let e=h;e<=c;e++){n[e-t]=s}}}const s=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>i)continue;n[r-t]=s}this._renderData=n}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class rq extends sq{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class oq extends sq{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}(0,bT.zy)(((e,t)=>{const i=e.getColor(RW.kG);if(i&&(t.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${i}; border: none; }`)),!i||i.isTransparent()||e.defines(RW.Mf)){const i=e.getColor(RW.Mf);i&&(t.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),(0,JP.Bb)(e.type)&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}}));class aq extends cK{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let a=0,l=t.length;a<l;a++){const e=t[a];e.options.className&&(i[n++]=e)}i=i.sort(((e,t)=>{if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;const i=e.options.className,n=t.options.className;return i<n?-1:i>n?1:JM.Q.compareRangesUsingStarts(e.range,t.range)}));const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o=[];for(let a=s;a<=r;a++){o[a-s]=""}this._renderWholeLineDecorations(e,i,o),this._renderNormalDecorations(e,i,o),this._renderResult=o}_renderWholeLineDecorations(e,t,i){const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let r=0,o=t.length;r<o;r++){const e=t[r];if(!e.options.isWholeLine)continue;const o='<div class="cdr '+e.options.className+'" style="left:0;width:100%;"></div>',a=Math.max(e.range.startLineNumber,n),l=Math.min(e.range.endLineNumber,s);for(let t=a;t<=l;t++){i[t-n]+=o}}}_renderNormalDecorations(e,t,i){const n=e.visibleRange.startLineNumber;let s=null,r=!1,o=null,a=!1;for(let l=0,h=t.length;l<h;l++){const h=t[l];if(h.options.isWholeLine)continue;const c=h.options.className,d=Boolean(h.options.showIfCollapsed);let u=h.range;d&&1===u.endColumn&&u.endLineNumber!==u.startLineNumber&&(u=new JM.Q(u.startLineNumber,u.startColumn,u.endLineNumber-1,this._context.viewModel.getLineMaxColumn(u.endLineNumber-1))),s===c&&r===d&&JM.Q.areIntersectingOrTouching(o,u)?o=JM.Q.plusRange(o,u):(null!==s&&this._renderNormalDecoration(e,o,s,a,r,n,i),s=c,r=d,o=u,a=h.options.shouldFillLineOnLineBreak??!1)}null!==s&&this._renderNormalDecoration(e,o,s,a,r,n,i)}_renderNormalDecoration(e,t,i,n,s,r,o){const a=e.linesVisibleRangesForRange(t,"findMatch"===i);if(a)for(let l=0,h=a.length;l<h;l++){const e=a[l];if(e.outsideRenderedLine)continue;const t=e.lineNumber-r;if(s&&1===e.ranges.length){const t=e.ranges[0];if(t.width<this._typicalHalfwidthCharacterWidth){const i=Math.round(t.left+t.width/2),n=Math.max(0,Math.round(i-this._typicalHalfwidthCharacterWidth/2));e.ranges[0]=new gG(n,this._typicalHalfwidthCharacterWidth)}}for(let s=0,r=e.ranges.length;s<r;s++){const a=n&&e.continuesOnNextLine&&1===r,l=e.ranges[s],h='<div class="cdr '+i+'" style="left:'+String(l.left)+"px;width:"+(a?"100%;":String(l.width)+"px;")+'"></div>';o[t]+=h}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class lq extends lG{constructor(e,t,i,n){super(e);const s=this._context.configuration.options,r=s.get(104),o=s.get(75),a=s.get(40),l=s.get(107),h={listenOnDomNode:i.domNode,className:"editor-scrollable "+(0,bT.Pz)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:o,fastScrollSensitivity:a,scrollPredominantAxis:l,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new DD(t.domNode,h,this._context.viewLayout.getScrollable())),hG.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=UE(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const c=(e,t,i)=>{const n={};if(t){const t=e.scrollTop;t&&(n.scrollTop=this._context.viewLayout.getCurrentScrollTop()+t,e.scrollTop=0)}if(i){const t=e.scrollLeft;t&&(n.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+t,e.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(n,1)};this._register(EL(i.domNode,"scroll",(e=>c(i.domNode,!0,!0)))),this._register(EL(t.domNode,"scroll",(e=>c(t.domNode,!0,!1)))),this._register(EL(n.domNode,"scroll",(e=>c(n.domNode,!0,!1)))),this._register(EL(this.scrollbarDomNode.domNode,"scroll",(e=>c(this.scrollbarDomNode.domNode,!0,!1))))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft);"right"===e.get(73).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const e=this._context.configuration.options,t=e.get(104),i=e.get(75),n=e.get(40),s=e.get(107),r={vertical:t.vertical,horizontal:t.horizontal,verticalScrollbarSize:t.verticalScrollbarSize,horizontalScrollbarSize:t.horizontalScrollbarSize,scrollByPage:t.scrollByPage,handleMouseWheel:t.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:n,scrollPredominantAxis:s};this.scrollbar.updateOptions(r)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,bT.Pz)(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class hq{constructor(e,t,i,n,s){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=n,this._decorationToRenderBrand=void 0,this.zIndex=s??0}}class cq{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class dq{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class uq extends cK{_render(e,t,i){const n=[];for(let o=e;o<=t;o++){n[o-e]=new dq}if(0===i.length)return n;i.sort(((e,t)=>e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1));let s=null,r=0;for(let o=0,a=i.length;o<a;o++){const a=i[o],l=a.className,h=a.zIndex;let c=Math.max(a.startLineNumber,e)-e;const d=Math.min(a.endLineNumber,t)-e;s===l?(c=Math.max(r+1,c),r=Math.max(r,d)):(s=l,r=d);for(let e=c;e<=r;e++)n[e].add(new cq(l,h,a.tooltip))}return n}}class gq extends lG{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=UE(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=UE(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return(i.preference.lane!==t.lane||i.preference.zIndex!==t.zIndex||!JM.Q.equalsRange(i.preference.range,t.range))&&(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=e.getDecorationsInViewport();for(const r of s){const e=r.options.glyphMarginClassName;if(!e)continue;const s=Math.max(r.range.startLineNumber,i),o=Math.min(r.range.endLineNumber,n),a=r.options.glyphMargin?.position??IU.ZS.Center,l=r.options.zIndex??0;for(let i=s;i<=o;i++){const n=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new OA.y(i,0)),s=this._context.viewModel.glyphLanes.getLanesAtLine(n.lineNumber).indexOf(a);t.push(new pq(i,s,l,e))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const e=s.preference.range,{startLineNumber:r,endLineNumber:o}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(JM.Q.lift(e));if(!r||!o||o<i||r>n)continue;const a=Math.max(r,i),l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new OA.y(a,0)),h=this._context.viewModel.glyphLanes.getLanesAtLine(l.lineNumber).indexOf(s.preference.lane);t.push(new fq(a,h,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.laneIndex===t.laneIndex?e.zIndex===t.zIndex?t.type===e.type?0===e.type&&0===t.type?e.className<t.className?-1:1:0:t.type-e.type:t.zIndex-e.zIndex:e.laneIndex-t.laneIndex:e.lineNumber-t.lineNumber)),t}prepareRender(e){if(!this._glyphMargin)return void(this._decorationGlyphsToRender=[]);for(const n of Object.values(this._widgets))n.renderInfo=null;const t=new OS.j3(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const e=t.peek();if(!e)break;const n=t.takeWhile((t=>t.lineNumber===e.lineNumber&&t.laneIndex===e.laneIndex));if(!n||0===n.length)break;const s=n[0];if(0===s.type){const e=[];for(const t of n){if(t.zIndex!==s.zIndex||t.type!==s.type)break;0!==e.length&&e[e.length-1]===t.className||e.push(t.className)}i.push(s.accept(e.join(" ")))}else s.widget.renderInfo={lineNumber:s.lineNumber,laneIndex:s.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const e of Object.values(this._widgets))e.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const e=this._managedDomNodes.pop();e?.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(i.renderInfo){const n=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(n),i.domNode.setLeft(s),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}else i.domNode.setDisplay("none");for(let i=0;i<this._decorationGlyphsToRender.length;i++){const n=this._decorationGlyphsToRender[i],s=e.viewportData.relativeVerticalOffset[n.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+n.laneIndex*this._lineHeight;let o;i<this._managedDomNodes.length?o=this._managedDomNodes[i]:(o=UE(document.createElement("div")),this._managedDomNodes.push(o),this.domNode.appendChild(o)),o.setClassName("cgmr codicon "+n.combinedClassName),o.setPosition("absolute"),o.setTop(s),o.setLeft(r),o.setWidth(t),o.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const e=this._managedDomNodes.pop();e?.domNode.remove()}}}class pq{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=n,this.type=0}accept(e){return new mq(this.lineNumber,this.laneIndex,e)}}class fq{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=n,this.type=1}}class mq{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}var _q=i(1707),vq=i(1926);class bq extends cK{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),n=t.get(50);this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),n=t.get(50);return this._spaceWidth=n.spaceWidth,this._maxIndentLeft=-1===i.wrappingColumn?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();return!this._primaryPosition?.equals(t)&&(this._primaryPosition=t,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&!1===this._bracketPairGuideOptions.bracketPairs)return void(this._renderResult=null);const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=e.scrollWidth,s=this._primaryPosition,r=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),s),o=[];for(let a=t;a<=i;a++){const i=a-t,s=r[i];let l="";const h=e.visibleRangeForPosition(new OA.y(a,1))?.left??0;for(const t of s){const i=-1===t.column?h+(t.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new OA.y(a,t.column)).left;if(i>n||this._maxIndentLeft>0&&i>this._maxIndentLeft)break;const s=t.horizontalLine?t.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",r=t.horizontalLine?(e.visibleRangeForPosition(new OA.y(a,t.horizontalLine.endColumn))?.left??i+this._spaceWidth)-i:this._spaceWidth;l+=`<div class="core-guide ${t.className} ${s}" style="left:${i}px;width:${r}px"></div>`}o[i]=l}this._renderResult=o}getGuidesByLine(e,t,i){const n=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?vq.N6.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?vq.N6.EnabledForActive:vq.N6.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,o=0,a=0;if(!1!==this._bracketPairGuideOptions.highlightActiveIndentation&&i){const n=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=n.startLineNumber,o=n.endLineNumber,a=n.indent}const{indentSize:l}=this._context.viewModel.model.getOptions(),h=[];for(let c=e;c<=t;c++){const t=new Array;h.push(t);const i=n?n[c-e]:[],d=new OS.j3(i),u=s?s[c-e]:0;for(let e=1;e<=u;e++){const n=(e-1)*l+1,s=("always"===this._bracketPairGuideOptions.highlightActiveIndentation||0===i.length)&&r<=c&&c<=o&&e===a;t.push(...d.takeWhile((e=>e.visibleColumn<n))||[]);const h=d.peek();h&&h.visibleColumn===n&&!h.horizontalLine||t.push(new vq.TH(n,-1,"core-guide-indent lvl-"+(e-1)%30+(s?" indent-active":""),null,-1,-1))}t.push(...d.takeWhile((e=>!0))||[])}return h}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function yq(e){if(!e||!e.isTransparent())return e}(0,bT.zy)(((e,t)=>{const i=[{bracketColor:RW.sN,guideColor:RW.n4,guideColorActive:RW.bB},{bracketColor:RW.lQ,guideColor:RW.I2,guideColorActive:RW.WS},{bracketColor:RW.ss,guideColor:RW.Bo,guideColorActive:RW.Pe},{bracketColor:RW.l5,guideColor:RW.If,guideColorActive:RW.WD},{bracketColor:RW.sH,guideColor:RW.BD,guideColorActive:RW.P1},{bracketColor:RW.zp,guideColor:RW.IW,guideColorActive:RW.WY}],n=new _q.k,s=[{indentColor:RW.vV,indentColorActive:RW.H0},{indentColor:RW.ob,indentColorActive:RW.Am},{indentColor:RW.hz,indentColorActive:RW.tK},{indentColor:RW.ow,indentColorActive:RW.A3},{indentColor:RW.vP,indentColorActive:RW.tp},{indentColor:RW.CM,indentColorActive:RW.As}],r=i.map((t=>{const i=e.getColor(t.bracketColor),n=e.getColor(t.guideColor),s=e.getColor(t.guideColorActive),r=yq(yq(n)??i?.transparent(.3)),o=yq(yq(s)??i);if(r&&o)return{guideColor:r,guideColorActive:o}})).filter(gM.O9),o=s.map((t=>{const i=e.getColor(t.indentColor),n=e.getColor(t.indentColorActive),s=yq(i),r=yq(n);if(s&&r)return{indentColor:s,indentColorActive:r}})).filter(gM.O9);if(r.length>0){for(let e=0;e<30;e++){const i=r[e%r.length];t.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(e).replace(/ /g,".")} { --guide-color: ${i.guideColor}; --guide-color-active: ${i.guideColorActive}; }`)}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),t.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),t.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let e=0;e<30;e++){const i=o[e%o.length];t.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${e} { --indent-color: ${i.indentColor}; --indent-color-active: ${i.indentColorActive}; }`)}t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),t.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}}));class wq{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class Cq{constructor(){this._currentVisibleRange=new JM.Q(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Sq{constructor(e,t,i,n,s,r,o){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=o,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class xq{constructor(e,t,i,n,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=s,this.type="selections";let r=t[0].startLineNumber,o=t[0].endLineNumber;for(let a=1,l=t.length;a<l;a++){const e=t[a];r=Math.min(r,e.startLineNumber),o=Math.max(o,e.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=o}}class kq extends lG{static#e=(()=>this.HORIZONTAL_EXTRA_PX=30)();constructor(e,t){super(e);const i=this._context.configuration,n=this._context.configuration.options,s=n.get(50),r=n.get(147);this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=n.get(101),this._cursorSurroundingLines=n.get(29),this._cursorSurroundingLinesStyle=n.get(30),this._canUseLayerHinting=!n.get(32),this._viewLineOptions=new yG(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new j$({createLine:()=>new wG(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,hG.write(this.domNode,8),this.domNode.setClassName(`view-lines ${pK}`),jE(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new sk.uC((()=>{this._updateLineWidthsSlow()}),200),this._asyncCheckMonospaceFontAssumptions=new sk.uC((()=>{this._checkMonospaceFontAssumptions()}),2e3),this._lastRenderedData=new Cq,this._horizontalRevealRequest=null,this._stickyScrollEnabled=n.get(116).enabled,this._maxNumberStickyLines=n.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),n=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,jE(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new yG(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const e=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let t=e;t<=i;t++){this._visibleLines.getVisibleLine(t).onOptionsChanged(this._viewLineOptions)}return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=!1;for(let s=t;s<=i;s++)n=this._visibleLines.getVisibleLine(s).onSelectionChanged()||n;return n}onDecorationsChanged(e){{const e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Sq(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new xq(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const n=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,n),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(null===i)return null;const n=this._getLineNumberFor(i);if(-1===n)return null;if(n<1||n>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(n))return new OA.y(n,1);const s=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(n<s||n>r)return null;let o=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(e,t);const a=this._context.viewModel.getLineMinColumn(n);return o<a&&(o=a),new OA.y(n,o)}_getViewLineDomNode(e){for(;e&&1===e.nodeType;){if(e.className===wG.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){if(e===this._visibleLines.getVisibleLine(n).getDomNode())return n}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const n=new wq(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,n=JM.Q.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;const s=[];let r=0;const o=new wq(this.domNode.domNode,this._textRangeRestingSpot);let a=0;t&&(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new OA.y(n.startLineNumber,1)).lineNumber);const l=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let c=n.startLineNumber;c<=n.endLineNumber;c++){if(c<l||c>h)continue;const e=c===n.startLineNumber?n.startColumn:1,d=c!==n.endLineNumber,u=d?this._context.viewModel.getLineMaxColumn(c):n.endColumn,g=this._visibleLines.getVisibleLine(c).getVisibleRangesForRange(c,e,u,o);if(g){if(t&&c<i){const e=a;a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new OA.y(c+1,1)).lineNumber,e!==a&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[r++]=new uG(g.outsideRenderedLine,c,gG.from(g.ranges),d)}}return this._updateLineWidthsSlowIfDomDidLayout(o),0===r?null:s}_visibleRangesForLineRange(e,t,i){if(this.shouldRender())return null;if(e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const n=new wq(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new fG(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=1,s=!0;for(let r=t;r<=i;r++){const t=this._visibleLines.getVisibleLine(r);!e||t.getWidthIsFast()?n=Math.max(n,t.getWidth(null)):s=!1}return s&&1===t&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=i;s<=n;s++){const i=this._visibleLines.getVisibleLine(s);if(i.needsMonospaceFontCheck()){const n=i.getWidth(null);n>t&&(t=n,e=s)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=i;s<=n;s++){this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const e=this._computeScrollLeftToReveal(t);e&&(this._isViewportWrapping||this._ensureMaxLineWidth(e.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),BS.j9&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let i=e;i<=t;i++){if(this._visibleLines.getVisibleLine(i).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,s,r){const o=e.top,a=e.height,l=o+a;let h,c,d;if(s&&s.length>0){let e=s[0].startLineNumber,t=s[0].endLineNumber;for(let i=1,n=s.length;i<n;i++){const n=s[i];e=Math.min(e,n.startLineNumber),t=Math.max(t,n.endLineNumber)}h=!1,c=this._context.viewLayout.getVerticalOffsetForLineNumber(e),d=this._context.viewLayout.getVerticalOffsetForLineNumber(t)+this._lineHeight}else{if(!n)return-1;h=!0,c=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),d=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight}let u,g=0,p=0;if(("mouse"===t||i)&&"default"===this._cursorSurroundingLinesStyle)i||(g=this._lineHeight);else{const e=a/this._lineHeight,t=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),i=Math.min(e/2,t);g=i*this._lineHeight,p=Math.max(0,i-1)*this._lineHeight}if(i||0!==r&&4!==r||(p+=this._lineHeight),c-=g,d+=p,d-c>a){if(!h)return-1;u=c}else if(5===r||6===r)if(6===r&&o<=c&&d<=l)u=o;else{const e=c-Math.max(5*this._lineHeight,.2*a),t=d-a;u=Math.max(t,e)}else if(1===r||2===r)if(2===r&&o<=c&&d<=l)u=o;else{const e=(c+d)/2;u=Math.max(0,e-a/2)}else u=this._computeMinimumScrolling(o,l,c,d,3===r,4===r);return u}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),n=t.left,s=n+t.width-i.verticalScrollbarWidth;let r=1073741824,o=0;if("range"===e.type){const t=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!t)return null;for(const e of t.ranges)r=Math.min(r,Math.round(e.left)),o=Math.max(o,Math.round(e.left+e.width))}else for(const a of e.selections){if(a.startLineNumber!==a.endLineNumber)return null;const e=this._visibleRangesForLineRange(a.startLineNumber,a.startColumn,a.endColumn);if(!e)return null;for(const t of e.ranges)r=Math.min(r,Math.round(t.left)),o=Math.max(o,Math.round(t.left+t.width))}if(e.minimalReveal||(r=Math.max(0,r-kq.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding),"selections"===e.type&&o-r>t.width)return null;return{scrollLeft:this._computeMinimumScrolling(n,s,r,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,i,n,s,r){s=!!s,r=!!r;const o=(t|=0)-(e|=0);return(n|=0)-(i|=0)<o?s?i:r?Math.max(0,n-o):i<e?i:n>t?Math.max(0,n-o):e:i}}class Lq extends uq{constructor(e){super(),this._context=e;const t=this._context.configuration.options.get(146);this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options.get(146);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let s=0,r=t.length;s<r;s++){const e=t[s],r=e.options.linesDecorationsClassName,o=e.options.zIndex;r&&(i[n++]=new hq(e.range.startLineNumber,e.range.endLineNumber,r,e.options.linesDecorationsTooltip??null,o));const a=e.options.firstLineDecorationClassName;a&&(i[n++]=new hq(e.range.startLineNumber,e.range.startLineNumber,a,e.options.linesDecorationsTooltip??null,o))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),s='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',r=[];for(let o=t;o<=i;o++){const e=o-t,i=n[e].getDecorations();let a="";for(const t of i){let e='<div class="cldr '+t.className;null!==t.tooltip&&(e+='" title="'+t.tooltip),e+=s,a+=e}r[e]=a}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Eq extends uq{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let s=0,r=t.length;s<r;s++){const e=t[s],r=e.options.marginClassName,o=e.options.zIndex;r&&(i[n++]=new hq(e.range.startLineNumber,e.range.endLineNumber,r,null,o))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),s=[];for(let r=t;r<=i;r++){const e=r-t,i=n[e].getDecorations();let o="";for(const t of i)o+='<div class="cmdr '+t.className+'" style=""></div>';s[e]=o}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Mq{static#e=(()=>this.Empty=new Mq(0,0,0,0))();constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=Mq._clamp(e),this.g=Mq._clamp(t),this.b=Mq._clamp(i),this.a=Mq._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}}class Tq extends Mx.jG{static#e=(()=>this._INSTANCE=null)();static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,Mx.lC)(new Tq)),this._INSTANCE}constructor(){super(),this._onDidChange=new rk.vl,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(RI.dG.onDidChange((e=>{e.changedColorMap&&this._updateColorMap()})))}_updateColorMap(){const e=RI.dG.getColorMap();if(!e)return this._colors=[Mq.Empty],void(this._backgroundIsLight=!0);this._colors=[Mq.Empty];for(let i=1;i<e.length;i++){const t=e[i].rgba;this._colors[i]=new Mq(t.r,t.g,t.b,Math.round(255*t.a))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}const Dq=(()=>{const e=[];for(let t=32;t<=126;t++)e.push(t);return e.push(65533),e})();var Nq=i(7459);class Iq{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Iq.soften(e,.8),this.charDataLight=Iq.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let n=0,s=e.length;n<s;n++)i[n]=(0,Nq.W)(e[n]*t);return i}renderChar(e,t,i,n,s,r,o,a,l,h,c){const d=1*this.scale,u=2*this.scale,g=c?1:u;if(t+d>e.width||i+g>e.height)return void console.warn("bad render request outside image data");const p=h?this.charDataLight:this.charDataNormal,f=((e,t)=>(e-=32)<0||e>96?t<=2?(e+96)%96:95:e)(n,l),m=4*e.width,_=o.r,v=o.g,b=o.b,y=s.r-_,w=s.g-v,C=s.b-b,S=Math.max(r,a),x=e.data;let k=f*d*u,L=i*m+4*t;for(let E=0;E<g;E++){let e=L;for(let t=0;t<d;t++){const t=p[k++]/255*(r/255);x[e++]=_+y*t,x[e++]=v+w*t,x[e++]=b+C*t,x[e++]=S}L+=m}}blockRenderChar(e,t,i,n,s,r,o,a){const l=1*this.scale,h=2*this.scale,c=a?1:h;if(t+l>e.width||i+c>e.height)return void console.warn("bad render request outside image data");const d=4*e.width,u=s/255*.5,g=r.r,p=r.g,f=r.b,m=g+(n.r-g)*u,_=p+(n.g-p)*u,v=f+(n.b-f)*u,b=Math.max(s,o),y=e.data;let w=i*d+4*t;for(let C=0;C<c;C++){let e=w;for(let t=0;t<l;t++)y[e++]=m,y[e++]=_,y[e++]=v,y[e++]=b;w+=d}}}const Aq={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},Rq=e=>{const t=new Uint8ClampedArray(e.length/2);for(let i=0;i<e.length;i+=2)t[i>>1]=Aq[e[i]]<<4|15&Aq[e[i+1]];return t},Pq={1:(0,bW.P)((()=>Rq("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792"))),2:(0,bW.P)((()=>Rq("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")))};class Oq{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return i=Pq[e]?new Iq(Pq[e](),e):Oq.createFromSampleData(Oq.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(const s of Dq)i.fillText(String.fromCharCode(s),n,8),n+=10;return i.getImageData(0,0,960,16)}static createFromSampleData(e,t){if(61440!==e.length)throw new Error("Unexpected source in MinimapCharRenderer");const i=Oq._downsample(e,t);return new Iq(i,t)}static _downsampleChar(e,t,i,n,s){const r=1*s,o=2*s;let a=n,l=0;for(let h=0;h<o;h++){const n=h/o*16,s=(h+1)/o*16;for(let o=0;o<r;o++){const h=o/r*10,c=(o+1)/r*10;let d=0,u=0;for(let i=n;i<s;i++){const n=t+3840*Math.floor(i),s=1-(i-Math.floor(i));for(let t=h;t<c;t++){const i=1-(t-Math.floor(t)),r=n+4*Math.floor(t),o=i*s;u+=o,d+=e[r]*e[r+3]/255*o}}const g=d/u;l=Math.max(l,g),i[a++]=(0,Nq.W)(g)}}return l}static _downsample(e,t){const i=2*t*1*t,n=96*i,s=new Uint8ClampedArray(n);let r=0,o=0,a=0;for(let l=0;l<96;l++)a=Math.max(a,this._downsampleChar(e,o,s,r,t)),r+=i,o+=40;if(a>0){const e=255/a;for(let t=0;t<n;t++)s[t]*=e}return s}}const Fq=BS.uF?'"Segoe WPC", "Segoe UI", sans-serif':BS.zx?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif';class Bq{constructor(e,t,i){const n=e.options,s=n.get(144),r=n.get(146),o=r.minimap,a=n.get(50),l=n.get(73);this.renderMinimap=o.renderMinimap,this.size=l.size,this.minimapHeightIsEditorHeight=o.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(106),this.paddingTop=n.get(84).top,this.paddingBottom=n.get(84).bottom,this.showSlider=l.showSlider,this.autohide=l.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(67),this.minimapLeft=o.minimapLeft,this.minimapWidth=o.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=o.minimapCanvasInnerWidth,this.canvasInnerHeight=o.minimapCanvasInnerHeight,this.canvasOuterWidth=o.minimapCanvasOuterWidth,this.canvasOuterHeight=o.minimapCanvasOuterHeight,this.isSampling=o.minimapIsSampling,this.editorHeight=r.height,this.fontScale=o.minimapScale,this.minimapLineHeight=o.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=Fq,this.sectionHeaderFontSize=l.sectionHeaderFontSize*s,this.sectionHeaderLetterSpacing=l.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Bq._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=(0,bW.P)((()=>Oq.create(this.fontScale,a.fontFamily))),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=Bq._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Bq._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(ZT.ILr);return i?new Mq(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(ZT.K1Z);return t?Mq._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(ZT.By2);return i?new Mq(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class zq{constructor(e,t,i,n,s,r,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=s,this.sliderHeight=r,this.topPaddingLineCount=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,n,s,r,o,a,l,h,c){const d=e.pixelRatio,u=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/u),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){let t=a*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(t+=Math.max(0,s-e.lineHeight-e.paddingBottom));const i=Math.max(1,Math.floor(s*s/t)),n=Math.max(0,e.minimapHeight-i),r=n/(h-s),c=l*r,d=n>0,u=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),g=Math.floor(e.paddingTop/e.lineHeight);return new zq(l,h,d,r,c,i,g,1,Math.min(o,u))}let f;if(r&&i!==o){const e=i-t+1;f=Math.floor(e*u/d)}else{const e=s/p;f=Math.floor(e*u/d)}const m=Math.floor(e.paddingTop/p);let _,v=Math.floor(e.paddingBottom/p);if(e.scrollBeyondLastLine){const e=s/p;v=Math.max(v,e-1)}if(v>0){_=(m+o+v-s/p-1)*u/d}else _=Math.max(0,(m+o)*u/d-f);_=Math.min(e.minimapHeight-f,_);const b=_/(h-s),y=l*b;if(g>=m+o+v){return new zq(l,h,_>0,b,y,f,m,1,o)}{let i,s;i=t>1?t+m:Math.max(1,l/p);let r=Math.max(1,Math.floor(i-y*d/u));r<m?(s=m-r+1,r=1):(s=0,r=Math.max(1,r-m)),c&&c.scrollHeight===h&&(c.scrollTop>l&&(r=Math.min(r,c.startLineNumber),s=Math.max(s,c.topPaddingLineCount)),c.scrollTop<l&&(r=Math.max(r,c.startLineNumber),s=Math.min(s,c.topPaddingLineCount)));const a=Math.min(o,r-s+g-1),_=(l-n)/p;let v;return v=l>=e.paddingTop?(t-r+s+_)*u/d:l/e.paddingTop*(s+_)*u/d,new zq(l,h,!0,b,v,f,s,r,a)}}}class Vq{static#e=(()=>this.INVALID=new Vq(-1))();constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}class Wq{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new U$({createLine:()=>Vq.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const t=this._renderedLines._get().lines;for(let i=0,n=t.length;i<n;i++)if(-1===t[i].dy)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class Hq{constructor(e,t,i,n){this._backgroundFillData=Hq._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,s=i.g,r=i.b,o=i.a,a=new Uint8ClampedArray(e*t*4);let l=0;for(let h=0;h<t;h++)for(let t=0;t<e;t++)a[l]=n,a[l+1]=s,a[l+2]=r,a[l+3]=o,l+=4;return a}}class Uq{static compute(e,t,i){if(0===e.renderMinimap||!e.isSampling)return[null,[]];const{minimapLineCount:n}=cx.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/n,r=s/2;if(!i||0===i.minimapLines.length){const e=[];if(e[0]=1,n>1){for(let t=0,i=n-1;t<i;t++)e[t]=Math.round(t*s+r);e[n-1]=t}return[new Uq(s,e),[]]}const o=i.minimapLines,a=o.length,l=[];let h=0,c=0,d=1;let u=[],g=null;for(let p=0;p<n;p++){const e=Math.max(d,Math.round(p*s)),i=Math.max(e,Math.round((p+1)*s));for(;h<a&&o[h]<e;){if(u.length<10){const e=h+1+c;g&&"deleted"===g.type&&g._oldIndex===h-1?g.deleteToLineNumber++:(g={type:"deleted",_oldIndex:h,deleteFromLineNumber:e,deleteToLineNumber:e},u.push(g)),c--}h++}let f;if(h<a&&o[h]<=i)f=o[h],h++;else if(f=0===p?1:p+1===n?t:Math.round(p*s+r),u.length<10){const e=h+1+c;g&&"inserted"===g.type&&g._i===p-1?g.insertToLineNumber++:(g={type:"inserted",_i:p,insertFromLineNumber:e,insertToLineNumber:e},u.push(g)),c++}l[p]=f,d=f}if(u.length<10)for(;h<a;){const e=h+1+c;g&&"deleted"===g.type&&g._oldIndex===h-1?g.deleteToLineNumber++:(g={type:"deleted",_oldIndex:h,deleteFromLineNumber:e,deleteToLineNumber:e},u.push(g)),c--,h++}else u=[{type:"flush"}];return[new Uq(s,l),u]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const n=this.minimapLines[i];if(n<e||n>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,s),n=Math.max(n,s)):this.minimapLines[s]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class jq extends lG{constructor(e){super(e),this._sectionHeaderCache=new qD.qK(10,1.5),this.tokensColorTracker=Tq.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Bq(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Uq.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new Gq(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Bq(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!t&&this._actual.onLinesChanged(t[0],t[1]-t[0]+1)}return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const e=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);e&&t.push({fromLineNumber:e[0],toLineNumber:e[1]})}return!!t.length&&this._actual.onTokensChanged(t)}return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,i]=Uq.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const n=[];for(let s=0,r=t-e+1;s<r;s++)i[s]?n[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):n[s]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new jG.L(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter((e=>!e.options.minimap?.sectionHeaderStyle));if(this._samplingState){const e=[];for(const t of i){if(!t.options.minimap)continue;const i=t.range,n=this._samplingState.modelLineToMinimapLine(i.startLineNumber),s=this._samplingState.modelLineToMinimapLine(i.endLineNumber);e.push(new nj(new JM.Q(n,i.startColumn,s,i.endColumn),t.options))}return e}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,n=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-n)),this._getMinimapDecorationsInViewport(e,t).filter((e=>!!e.options.minimap?.sectionHeaderStyle))}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const n=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];i=new JM.Q(n,1,s,this._context.viewModel.getLineMaxColumn(s))}else i=new JM.Q(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){const i=e.options.minimap?.sectionHeaderText;if(!i)return null;const n=this._sectionHeaderCache.get(i);if(n)return n;const s=t(i);return this._sectionHeaderCache.set(i,s),s}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new JM.Q(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class Gq extends Mx.jG{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(ZT.yr0),this._domNode=UE(document.createElement("div")),hG.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=UE(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=UE(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=UE(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=UE(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=UE(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=TL(this._domNode.domNode,gE.POINTER_DOWN,(e=>{e.preventDefault();if(0===this._model.options.renderMinimap)return;if(!this._lastRenderData)return;if("proportional"!==this._model.options.size){if(0===e.button&&this._lastRenderData){const t=zL(this._slider.domNode),i=t.top+t.height/2;this._startSliderDragging(e,i,this._lastRenderData.renderedLayout)}return}const t=this._model.options.minimapLineHeight,i=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.offsetY;let n=Math.floor(i/t)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;n=Math.min(n,this._model.getLineCount()),this._model.revealLineNumber(n)})),this._sliderPointerMoveMonitor=new aD,this._sliderPointerDownListener=TL(this._slider.domNode,gE.POINTER_DOWN,(e=>{e.preventDefault(),e.stopPropagation(),0===e.button&&this._lastRenderData&&this._startSliderDragging(e,e.pageY,this._lastRenderData.renderedLayout)})),this._gestureDisposable=dD.addTarget(this._domNode.domNode),this._sliderTouchStartListener=EL(this._domNode.domNode,hD.Start,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))}),{passive:!1}),this._sliderTouchMoveListener=EL(this._domNode.domNode,hD.Change,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)}),{passive:!1}),this._sliderTouchEndListener=TL(this._domNode.domNode,hD.End,(e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)}))}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const n=e.pageX;this._slider.toggleClassName("active",!0);const s=(e,s)=>{const r=zL(this._domNode.domNode),o=Math.min(Math.abs(s-n),Math.abs(s-r.left),Math.abs(s-r.left-r.width));if(BS.uF&&o>140)return void this._model.setScrollTop(i.scrollTop);const a=e-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(a))};e.pageY!==t&&s(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>s(e.pageY,e.pageX)),(()=>{this._slider.toggleClassName("active",!1)}))}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return"always"===this._model.options.showSlider?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new Hq(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}onLinesDeleted(e,t){return this._lastRenderData?.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData?.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(ZT.yr0),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const t=zq.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(JM.Q.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort(((e,t)=>(e.options.zIndex||0)-(t.options.zIndex||0)));const{canvasInnerWidth:n,canvasInnerHeight:s}=this._model.options,r=this._model.options.minimapLineHeight,o=this._model.options.minimapCharWidth,a=this._model.getOptions().tabSize,l=this._decorationsCanvas.domNode.getContext("2d");l.clearRect(0,0,n,s);const h=new Kq(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(l,t,h,e,r),this._renderDecorationsLineHighlights(l,i,h,e,r);const c=new Kq(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(l,t,c,e,r,a,o,n),this._renderDecorationsHighlights(l,i,c,e,r,a,o,n),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,n,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,o=0;for(const a of t){const t=n.intersectWithViewport(a);if(!t)continue;const[l,h]=t;for(let e=l;e<=h;e++)i.set(e,!0);const c=n.getYForLineNumber(l,s),d=n.getYForLineNumber(h,s);o>=c||(o>r&&e.fillRect(8,r,e.canvas.width,o-r),r=c),o=d}o>r&&e.fillRect(8,r,e.canvas.width,o-r)}_renderDecorationsLineHighlights(e,t,i,n,s){const r=new Map;for(let o=t.length-1;o>=0;o--){const a=t[o],l=a.options.minimap;if(!l||1!==l.position)continue;const h=n.intersectWithViewport(a.range);if(!h)continue;const[c,d]=h,u=l.getColor(this._theme.value);if(!u||u.isTransparent())continue;let g=r.get(u.toString());g||(g=u.transparent(.5).toString(),r.set(u.toString(),g)),e.fillStyle=g;for(let t=c;t<=d;t++){if(i.has(t))continue;i.set(t,!0);const r=n.getYForLineNumber(c,s);e.fillRect(8,r,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,i,n,s,r,o,a){if(this._selectionColor&&!this._selectionColor.isTransparent())for(const l of t){const t=n.intersectWithViewport(l);if(!t)continue;const[h,c]=t;for(let d=h;d<=c;d++)this.renderDecorationOnLine(e,i,l,this._selectionColor,n,d,s,s,r,o,a)}}_renderDecorationsHighlights(e,t,i,n,s,r,o,a){for(const l of t){const t=l.options.minimap;if(!t)continue;const h=n.intersectWithViewport(l.range);if(!h)continue;const[c,d]=h,u=t.getColor(this._theme.value);if(u&&!u.isTransparent())for(let g=c;g<=d;g++)switch(t.position){case 1:this.renderDecorationOnLine(e,i,l.range,u,n,g,s,s,r,o,a);continue;case 2:{const t=n.getYForLineNumber(g,s),i=2;this.renderDecoration(e,u,i,t,2,s);continue}}}}renderDecorationOnLine(e,t,i,n,s,r,o,a,l,h,c){const d=s.getYForLineNumber(r,a);if(d+o<0||d>this._model.options.canvasInnerHeight)return;const{startLineNumber:u,endLineNumber:g}=i,p=u===r?i.startColumn:1,f=g===r?i.endColumn:this._model.getLineMaxColumn(r),m=this.getXOffsetForPosition(t,r,p,l,h,c),_=this.getXOffsetForPosition(t,r,f,l,h,c);this.renderDecoration(e,n,m,d,_-m,o)}getXOffsetForPosition(e,t,i,n,s,r){if(1===i)return 8;if((i-1)*s>=r)return r;let o=e.get(t);if(!o){const i=this._model.getLineContent(t);o=[8];let a=8;for(let e=1;e<i.length+1;e++){const t=i.charCodeAt(e-1),l=a+(9===t?n*s:Tx.ne(t)?2*s:s);if(l>=r){o[e]=r;break}o[e]=l,a=l}e.set(t,o)}return i-1<o.length?o[i-1]:r}renderDecoration(e,t,i,n,s,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,s,r)}_renderSectionHeaders(e){const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,n=this._model.options.sectionHeaderLetterSpacing,s=1.5*i,{canvasInnerWidth:r}=this._model.options,o=this._model.options.backgroundColor,a=`rgb(${o.r} ${o.g} ${o.b} / .7)`,l=this._model.options.sectionHeaderFontColor,h=`rgb(${l.r} ${l.g} ${l.b})`,c=h,d=this._decorationsCanvas.domNode.getContext("2d");d.letterSpacing=n+"px",d.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,d.strokeStyle=c,d.lineWidth=.2;const u=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);u.sort(((e,t)=>e.range.startLineNumber-t.range.startLineNumber));const g=Gq._fitSectionHeader.bind(null,d,r-8);for(const p of u){const n=e.getYForLineNumber(p.range.startLineNumber,t)+i,o=n-i,l=o+2,c=this._model.getSectionHeaderText(p,g);Gq._renderSectionLabel(d,c,2===p.options.minimap?.sectionHeaderStyle,a,h,r,o,s,n,l)}}static _fitSectionHeader(e,t,i){if(!i)return i;const n=e.measureText(i).width,s=e.measureText("\u2026").width;if(n<=t||n<=s)return i;const r=i.length,o=n/i.length,a=Math.floor((t-s)/o)-1;let l=Math.ceil(a/2);for(;l>0&&/\s/.test(i[l-1]);)--l;return i.substring(0,l)+"\u2026"+i.substring(r-(a-l))}static _renderSectionLabel(e,t,i,n,s,r,o,a,l,h){t&&(e.fillStyle=n,e.fillRect(0,o,r,a),e.fillStyle=s,e.fillText(t,8,l)),i&&(e.beginPath(),e.moveTo(0,h),e.lineTo(r,h),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const t=this._lastRenderData._get();return new Wq(e,t.imageData,t.lines)}const s=this._getBuffer();if(!s)return null;const[r,o,a]=Gq._renderUntouchedLines(s,e.topPaddingLineCount,t,i,n,this._lastRenderData),l=this._model.getMinimapLinesRenderingData(t,i,a),h=this._model.getOptions().tabSize,c=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,u=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),f=this._model.options.renderMinimap,m=this._model.options.charRenderer(),_=this._model.options.fontScale,v=this._model.options.minimapCharWidth,b=(1===f?2:3)*_,y=n>b?Math.floor((n-b)/2):0,w=d.a/255,C=new Mq(Math.round((d.r-c.r)*w+c.r),Math.round((d.g-c.g)*w+c.g),Math.round((d.b-c.b)*w+c.b),255);let S=e.topPaddingLineCount*n;const x=[];for(let E=0,M=i-t+1;E<M;E++)a[E]&&Gq._renderLine(s,C,d.a,p,f,v,g,u,m,S,y,h,l[E],_,n),x[E]=new Vq(S),S+=n;const k=-1===r?0:r,L=(-1===o?s.height:o)-k;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,k,s.width,L),new Wq(e,s,x)}static _renderUntouchedLines(e,t,i,n,s,r){const o=[];if(!r){for(let e=0,t=n-i+1;e<t;e++)o[e]=!0;return[-1,-1,o]}const a=r._get(),l=a.imageData.data,h=a.rendLineNumberStart,c=a.lines,d=c.length,u=e.width,g=e.data,p=(n-i+1)*s*u*4;let f=-1,m=-1,_=-1,v=-1,b=-1,y=-1,w=t*s;for(let C=i;C<=n;C++){const e=C-i,t=C-h,n=t>=0&&t<d?c[t].dy:-1;if(-1===n){o[e]=!0,w+=s;continue}const r=n*u*4,a=(n+s)*u*4,S=w*u*4,x=(w+s)*u*4;v===r&&y===S?(v=a,y=x):(-1!==_&&(g.set(l.subarray(_,v),b),-1===f&&0===_&&_===b&&(f=v),-1===m&&v===p&&_===b&&(m=_)),_=r,v=a,b=S,y=x),o[e]=!1,w+=s}-1!==_&&(g.set(l.subarray(_,v),b),-1===f&&0===_&&_===b&&(f=v),-1===m&&v===p&&_===b&&(m=_));return[-1===f?-1:f/(4*u),-1===m?-1:m/(4*u),o]}static _renderLine(e,t,i,n,s,r,o,a,l,h,c,d,u,g,p){const f=u.content,m=u.tokens,_=e.width-r,v=1===p;let b=8,y=0,w=0;for(let C=0,S=m.getCount();C<S;C++){const u=m.getEndOffset(C),p=m.getForeground(C),S=o.getColor(p);for(;y<u;y++){if(b>_)return;const o=f.charCodeAt(y);if(9===o){const e=d-(y+w)%d;w+=e-1,b+=e*r}else if(32===o)b+=r;else{const d=Tx.ne(o)?2:1;for(let u=0;u<d;u++)if(2===s?l.blockRenderChar(e,b,h+c,S,a,t,i,v):l.renderChar(e,b,h+c,o,S,a,t,i,g,n,v),b+=r,b>_)return}}}}}class Kq{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let n=0,s=this._endLineNumber-this._startLineNumber+1;n<s;n++)this._values[n]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class $q extends lG{constructor(e,t){super(e),this._viewDomNode=t;const i=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=UE(document.createElement("div")),hG.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=UE(document.createElement("div")),hG.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){const t=UE(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],n=t?t.preference:null,s=t?.stackOridinal;return i.preference===n&&i.stack===s?(this._updateMaxMinWidth(),!1):(i.preference=n,i.stack=s,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let e=0;const t=Object.keys(this._widgets);for(let i=0,n=t.length;i<n;i++){const n=t[i],s=this._widgets[n],r=s.widget.getMinContentWidthInPx?.();"undefined"!==typeof r&&(e=Math.max(e,r))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(null===e.preference)return void i.setTop("");const n=2*this._verticalScrollbarWidth+this._minimapWidth;if(0===e.preference||1===e.preference){if(1===e.preference){const e=i.domNode.clientHeight;i.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight)}else i.setTop(0);void 0!==e.stack?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(n)}else if(2===e.preference)i.domNode.style.right="50%",void 0!==e.stack?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:t,left:n}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const e=this._viewDomNodeRect;i.setTop(t+e.top),i.setLeft(n+e.left),i.setPosition("fixed")}else i.setTop(t),i.setLeft(n),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=zL(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},(()=>0));t.sort(((e,t)=>(this._widgets[e].stack||0)-(this._widgets[t].stack||0)));for(let n=0,s=t.length;n<s;n++){const e=t[n];this._renderWidget(this._widgets[e],i)}}}class qq{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const n=t.getColor(RW.x9);this.borderColor=n?n.toString():null,this.hideCursor=i.get(59);const s=t.getColor(RW.D0);this.cursorColorSingle=s?s.transparent(.7).toString():null;const r=t.getColor(RW.sC);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const o=t.getColor(RW.we);this.cursorColorSecondary=o?o.transparent(.7).toString():null,this.themeType=t.type;const a=i.get(73),l=a.enabled,h=a.side,c=t.getColor(RW.Xr),d=RI.dG.getDefaultBackground();this.backgroundColor=c||(l&&"right"===h?d:null);const u=i.get(146).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[g,p]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=g,this.w=p}_initLanes(e,t,i){const n=t-e;if(i>=3){const t=Math.floor(n/3),i=Math.floor(n/3),s=n-t-i,r=e+t;return[[0,e,r,e,e+t+s,e,r,e],[0,t,s,t+s,i,t+s+i,s+i,t+s+i]]}if(2===i){const t=Math.floor(n/2),i=n-t;return[[0,e,e,e,e+t,e,e,e],[0,t,t,t,i,t+i,t+i,t+i]]}return[[0,e,e,e,e,e,e,e],[0,n,n,n,n,n,n,n]]}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&WR.Q1.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Qq extends lG{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=UE(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=RI.dG.onDidChange((e=>{e.changedColorMap&&this._updateSettings(!0)})),this._cursorPositions=[{position:new OA.y(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new qq(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let n=this._settings.cursorColorSingle;i>1&&(n=0===t?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:n})}return this._cursorPositions.sort(((e,t)=>OA.y.compare(e.position,t.position))),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return!!e.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return!!e.scrollHeightChanged&&this._markRenderingIsNeeded()}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(e?WR.Q1.Format.CSS.formatHexA(e):""),void this._domNode.setDisplay("none");const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(sj.compareByRenderingProps),1!==this._actualShouldRender||sj.equalsArr(this._renderedDecorations,t)||(this._actualShouldRender=2),1!==this._actualShouldRender||(0,OS.aI)(this._renderedCursorPositions,this._cursorPositions,((e,t)=>e.position.lineNumber===t.position.lineNumber&&e.color===t.color))||(this._actualShouldRender=2),1===this._actualShouldRender)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,n=this._settings.canvasHeight,s=this._settings.lineHeight,r=this._context.viewLayout,o=n/this._context.viewLayout.getScrollHeight(),a=6*this._settings.pixelRatio|0,l=a/2|0,h=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(h.fillStyle=WR.Q1.Format.CSS.formatHexA(e),h.fillRect(0,0,i,n)):(h.clearRect(0,0,i,n),h.fillStyle=WR.Q1.Format.CSS.formatHexA(e),h.fillRect(0,0,i,n)):h.clearRect(0,0,i,n);const c=this._settings.x,d=this._settings.w;for(const u of t){const e=u.color,t=u.data;h.fillStyle=e;let i=0,g=0,p=0;for(let u=0,f=t.length/3;u<f;u++){const e=t[3*u],f=t[3*u+1],m=t[3*u+2];let _=r.getVerticalOffsetForLineNumber(f)*o|0,v=(r.getVerticalOffsetForLineNumber(m)+s)*o|0;if(v-_<a){let e=(_+v)/2|0;e<l?e=l:e+l>n&&(e=n-l),_=e-l,v=e+l}_>p+1||e!==i?(0!==u&&h.fillRect(c[i],g,d[i],p-g),i=e,g=_,p=v):v>p&&(p=v)}h.fillRect(c[i],g,d[i],p-g)}if(!this._settings.hideCursor){const e=2*this._settings.pixelRatio|0,t=e/2|0,i=this._settings.x[7],s=this._settings.w[7];let a=-100,l=-100,c=null;for(let d=0,u=this._cursorPositions.length;d<u;d++){const u=this._cursorPositions[d].color;if(!u)continue;const g=this._cursorPositions[d].position;let p=r.getVerticalOffsetForLineNumber(g.lineNumber)*o|0;p<t?p=t:p+t>n&&(p=n-t);const f=p-t,m=f+e;f>l+1||u!==c?(0!==d&&c&&h.fillRect(i,a,s,l-a),a=f,l=m):m>l&&(l=m),c=u,h.fillStyle=u}c&&h.fillRect(i,a,s,l-a)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,n),h.moveTo(1,0),h.lineTo(i,0),h.stroke())}}class Xq{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=0|e,this.to=0|t,this.colorId=0|i}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Yq{constructor(e,t,i,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class Zq{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Yq.compare)}setLineHeight(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=i/Math.floor(this._outerHeight),s=Math.floor(4*this._pixelRatio/2),r=[];for(let o=0,a=this._zones.length;o<a;o++){const a=this._zones[o];if(!e){const e=a.getColorZones();if(e){r.push(e);continue}}const l=this._getVerticalOffsetForLine(a.startLineNumber),h=0===a.heightInLines?this._getVerticalOffsetForLine(a.endLineNumber)+t:l+a.heightInLines*t,c=Math.floor(n*l),d=Math.floor(n*h);let u=Math.floor((c+d)/2),g=d-u;g<s&&(g=s),u-g<0&&(u=g),u+g>i&&(u=i-g);const p=a.color;let f=this._color2Id[p];f||(f=++this._lastAssignedId,this._color2Id[p]=f,this._id2Color[f]=p);const m=new Xq(u-g,u+g,f);a.setColorZone(m),r.push(m)}return this._colorZonesInvalid=!1,r.sort(Xq.compare),r}}class Jq extends aG{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=UE(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Zq((e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e))),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(s,i,n,e),!0}_renderOneLane(e,t,i,n){let s=0,r=0,o=0;for(const a of t){const t=a.colorId,l=a.from,h=a.to;t!==s?(e.fillRect(0,r,n,o-r),s=t,e.fillStyle=i[s],r=l,o=h):o>=l?o=Math.max(o,h):(e.fillRect(0,r,n,o-r),r=l,o=h)}e.fillRect(0,r,n,o-r)}}class eQ extends lG{constructor(e){super(e),this.domNode=UE(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),n=i;let s=t-e;for(;s>0;){const e=UE(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(n),this.domNode.appendChild(e),this._renderedRulers.push(e),s--}return}let i=e-t;for(;i>0;){const e=this._renderedRulers.pop();this.domNode.removeChild(e),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const i=this._renderedRulers[t],n=this._rulers[t];i.setBoxShadow(n.color?`1px 0 0 0 ${n.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(n.column*this._typicalHalfwidthCharacterWidth)}}}class tQ extends lG{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const t=this._context.configuration.options.get(104);this._useShadows=t.useShadows,this._domNode=UE(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){const e=this._context.configuration.options.get(146);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.verticalScrollbarWidth}onConfigurationChanged(e){const t=this._context.configuration.options.get(104);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class iQ{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class nQ{constructor(e,t){this.lineNumber=e,this.ranges=t}}function sQ(e){return new iQ(e)}function rQ(e){return new nQ(e.lineNumber,e.ranges.map(sQ))}class oQ extends cK{static#e=(()=>this.SELECTION_CLASS_NAME="selected-text")();static#t=(()=>this.SELECTION_TOP_LEFT="top-left-radius")();static#i=(()=>this.SELECTION_BOTTOM_LEFT="bottom-left-radius")();static#n=(()=>this.SELECTION_TOP_RIGHT="top-right-radius")();static#s=(()=>this.SELECTION_BOTTOM_RIGHT="bottom-right-radius")();static#r=(()=>this.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background")();static#o=(()=>this.ROUNDED_PIECE_WIDTH=10)();constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++){if(e[t].ranges.length>1)return!0}return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let s=null,r=null;if(i&&i.length>0&&t.length>0){const n=t[0].lineNumber;if(n===e.startLineNumber)for(let e=0;!s&&e<i.length;e++)i[e].lineNumber===n&&(s=i[e].ranges[0]);const o=t[t.length-1].lineNumber;if(o===e.endLineNumber)for(let e=i.length-1;!r&&e>=0;e--)i[e].lineNumber===o&&(r=i[e].ranges[0]);s&&!s.startStyle&&(s=null),r&&!r.startStyle&&(r=null)}for(let o=0,a=t.length;o<a;o++){const e=t[o].ranges[0],i=e.left,l=e.left+e.width,h={top:0,bottom:0},c={top:0,bottom:0};if(o>0){const e=t[o-1].ranges[0].left,s=t[o-1].ranges[0].left+t[o-1].ranges[0].width;aQ(i-e)<n?h.top=2:i>e&&(h.top=1),aQ(l-s)<n?c.top=2:e<l&&l<s&&(c.top=1)}else s&&(h.top=s.startStyle.top,c.top=s.endStyle.top);if(o+1<a){const e=t[o+1].ranges[0].left,s=t[o+1].ranges[0].left+t[o+1].ranges[0].width;aQ(i-e)<n?h.bottom=2:e<i&&i<s&&(h.bottom=1),aQ(l-s)<n?c.bottom=2:l<s&&(c.bottom=1)}else r&&(h.bottom=r.startStyle.bottom,c.bottom=r.endStyle.bottom);e.startStyle=h,e.endStyle=c}}_getVisibleRangesWithStyle(e,t,i){const n=(t.linesVisibleRangesForRange(e,!0)||[]).map(rQ);return!this._visibleRangesHaveGaps(n)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,n,i),n}_createSelectionPiece(e,t,i,n,s){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+n.toString()+"px;width:"+s.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(0===n.length)return;const s=!!n[0].ranges[0].startStyle,r=n[0].lineNumber,o=n[n.length-1].lineNumber;for(let a=0,l=n.length;a<l;a++){const l=n[a],h=l.lineNumber,c=h-t,d=i&&h===r?1:0,u=i&&h!==r&&h===o?1:0;let g="",p="";for(let e=0,t=l.ranges.length;e<t;e++){const t=l.ranges[e];if(s){const e=t.startStyle,i=t.endStyle;if(1===e.top||1===e.bottom){g+=this._createSelectionPiece(d,u,oQ.SELECTION_CLASS_NAME,t.left-oQ.ROUNDED_PIECE_WIDTH,oQ.ROUNDED_PIECE_WIDTH);let i=oQ.EDITOR_BACKGROUND_CLASS_NAME;1===e.top&&(i+=" "+oQ.SELECTION_TOP_RIGHT),1===e.bottom&&(i+=" "+oQ.SELECTION_BOTTOM_RIGHT),g+=this._createSelectionPiece(d,u,i,t.left-oQ.ROUNDED_PIECE_WIDTH,oQ.ROUNDED_PIECE_WIDTH)}if(1===i.top||1===i.bottom){g+=this._createSelectionPiece(d,u,oQ.SELECTION_CLASS_NAME,t.left+t.width,oQ.ROUNDED_PIECE_WIDTH);let e=oQ.EDITOR_BACKGROUND_CLASS_NAME;1===i.top&&(e+=" "+oQ.SELECTION_TOP_LEFT),1===i.bottom&&(e+=" "+oQ.SELECTION_BOTTOM_LEFT),g+=this._createSelectionPiece(d,u,e,t.left+t.width,oQ.ROUNDED_PIECE_WIDTH)}}let i=oQ.SELECTION_CLASS_NAME;if(s){const e=t.startStyle,n=t.endStyle;0===e.top&&(i+=" "+oQ.SELECTION_TOP_LEFT),0===e.bottom&&(i+=" "+oQ.SELECTION_BOTTOM_LEFT),0===n.top&&(i+=" "+oQ.SELECTION_TOP_RIGHT),0===n.bottom&&(i+=" "+oQ.SELECTION_BOTTOM_RIGHT)}p+=this._createSelectionPiece(d,u,i,t.left,t.width)}e[c][0]+=g,e[c][1]+=p}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let r=i;r<=n;r++){t[r-i]=["",""]}const s=[];for(let r=0,o=this._selections.length;r<o;r++){const n=this._selections[r];if(n.isEmpty()){s[r]=null;continue}const o=this._getVisibleRangesWithStyle(n,e,this._previousFrameVisibleRangesWithStyle[r]);s[r]=o,this._actualRenderOneSelection(t,i,this._selections.length>1,o)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map((e=>{let[t,i]=e;return t+i}))}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function aQ(e){return e<0?-e:e}(0,bT.zy)(((e,t)=>{const i=e.getColor(ZT.rm4);i&&!i.isTransparent()&&t.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)}));class lQ{constructor(e,t,i,n,s,r,o){this.top=e,this.left=t,this.paddingLeft=i,this.width=n,this.height=s,this.textContent=r,this.textContentClassName=o}}var hQ;!function(e){e[e.Single=0]="Single",e[e.MultiPrimary=1]="MultiPrimary",e[e.MultiSecondary=2]="MultiSecondary"}(hQ||(hQ={}));class cQ{constructor(e,t){this._context=e;const i=this._context.configuration.options,n=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=UE(document.createElement("div")),this._domNode.setClassName(`cursor ${pK}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),jE(this._domNode,n),this._domNode.setDisplay("none"),this._position=new OA.y(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case hQ.Single:this._pluralityClass="";break;case hQ.MultiPrimary:this._pluralityClass="cursor-primary";break;case hQ.MultiSecondary:this._pluralityClass="cursor-secondary"}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),jE(this._domNode,i),!0}onCursorPositionChanged(e,t){return this._domNode.domNode.style.transitionProperty=t?"none":"",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,s]=Tx.m(i,t-1);return[new OA.y(e,n+1),i.substring(n,s)]}_prepareRender(e){let t="",i="";const[n,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===rx.Line||this._cursorStyle===rx.LineThin){const r=e.visibleRangeForPosition(n);if(!r||r.outsideRenderedLine)return null;const o=fL(this._domNode.domNode);let a;this._cursorStyle===rx.Line?(a=EE(o,this._lineCursorWidth>0?this._lineCursorWidth:2),a>2&&(t=s,i=this._getTokenClassName(n))):a=EE(o,1);let l=r.left,h=0;a>=2&&l>=1&&(h=1,l-=h);const c=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new lQ(c,l,h,a,this._lineHeight,t,i)}const r=e.linesVisibleRangesForRange(new JM.Q(n.lineNumber,n.column,n.lineNumber,n.column+s.length),!1);if(!r||0===r.length)return null;const o=r[0];if(o.outsideRenderedLine||0===o.ranges.length)return null;const a=o.ranges[0],l="\t"===s||a.width<1?this._typicalHalfwidthCharacterWidth:a.width;this._cursorStyle===rx.Block&&(t=s,i=this._getTokenClassName(n));let h=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,c=this._lineHeight;return this._cursorStyle!==rx.Underline&&this._cursorStyle!==rx.UnderlineThin||(h+=this._lineHeight-2,c=2),new lQ(h,a.left,0,l,c,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${pK} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class dQ extends lG{static#e=(()=>this.BLINK_INTERVAL=500)();constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new cQ(this._context,hQ.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=UE(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new sk.pc,this._cursorFlatBlinkInterval=new AL,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const n=this._secondaryCursors.length!==t.length||"explicit"===this._cursorSmoothCaretAnimation&&3!==i;if(this._primaryCursor.setPlurality(t.length?hQ.MultiPrimary:hQ.Single),this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length){const e=t.length-this._secondaryCursors.length;for(let t=0;t<e;t++){const e=new cQ(this._context,hQ.MultiSecondary);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>t.length){const e=this._secondaryCursors.length-t.length;for(let t=0;t<e;t++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],n)}onCursorStateChanged(e){const t=[];for(let n=0,s=e.selections.length;n<s;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=t=>{for(let i=0,n=e.ranges.length;i<n;i++)if(e.ranges[i].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=0===e,i=5===e;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),t||i||(1===e?this._cursorFlatBlinkInterval.cancelAndSet((()=>{this._isVisible?this._hide():this._show()}),dQ.BLINK_INTERVAL,fL(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet((()=>{this._blinkingEnabled=!0,this._updateDomClassName()}),dQ.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case rx.Line:e+=" cursor-line-style";break;case rx.Block:e+=" cursor-block-style";break;case rx.Underline:e+=" cursor-underline-style";break;case rx.LineThin:e+=" cursor-line-thin-style";break;case rx.BlockOutline:e+=" cursor-block-outline-style";break;case rx.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return"on"!==this._cursorSmoothCaretAnimation&&"explicit"!==this._cursorSmoothCaretAnimation||(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let s=0,r=this._secondaryCursors.length;s<r;s++){const n=this._secondaryCursors[s].render(e);n&&(t[i++]=n)}this._renderData=t}getLastRenderData(){return this._renderData}}(0,bT.zy)(((e,t)=>{const i=[{class:".cursor",foreground:RW.D0,background:RW.kM},{class:".cursor-primary",foreground:RW.sC,background:RW.je},{class:".cursor-secondary",foreground:RW.we,background:RW.L0}];for(const n of i){const i=e.getColor(n.foreground);if(i){let s=e.getColor(n.background);s||(s=i.opposite()),t.addRule(`.monaco-editor .cursors-layer ${n.class} { background-color: ${i}; border-color: ${i}; color: ${s}; }`),(0,JP.Bb)(e.type)&&t.addRule(`.monaco-editor .cursors-layer.has-selection ${n.class} { border-left: 1px solid ${s}; border-right: 1px solid ${s}; }`)}}}));const uQ=()=>{throw new Error("Invalid change accessor")};class gQ extends lG{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=UE(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=UE(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const n of e)t.set(n.id,n);let i=!1;return this._context.viewModel.changeWhitespace((e=>{const n=Object.keys(this._zones);for(let s=0,r=n.length;s<r;s++){const r=n[s],o=this._zones[r],a=this._computeWhitespaceProps(o.delegate);o.isInHiddenArea=a.isInHiddenArea;const l=t.get(r);!l||l.afterLineNumber===a.afterViewLineNumber&&l.height===a.heightInPx||(e.changeOneWhitespace(r,a.afterViewLineNumber,a.heightInPx),this._safeCallOnComputedHeight(o.delegate,a.heightInPx),i=!0)}})),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t,i;if("undefined"!==typeof e.afterColumn)t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const i=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new OA.y(i,this._context.viewModel.model.getLineMaxColumn(i))}i=t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!s,afterViewLineNumber:n.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace((i=>{const n={addZone:e=>(t=!0,this._addZone(i,e)),removeZone:e=>{e&&(t=this._removeZone(i,e)||t)},layoutZone:e=>{e&&(t=this._layoutZone(i,e)||t)}};!function(e,t){try{return e(t)}catch(O2){(0,Ux.dz)(O2)}}(e,n),n.addZone=uQ,n.removeZone=uQ,n.layoutZone=uQ})),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),n={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:UE(t.domNode),marginDomNode:t.marginDomNode?UE(t.marginDomNode):null};return this._safeCallOnComputedHeight(n.delegate,i.heightInPx),n.domNode.setPosition("absolute"),n.domNode.domNode.style.width="100%",n.domNode.setDisplay("none"),n.domNode.setAttribute("monaco-view-zone",n.whitespaceId),this.domNode.appendChild(n.domNode),n.marginDomNode&&(n.marginDomNode.setPosition("absolute"),n.marginDomNode.domNode.style.width="100%",n.marginDomNode.setDisplay("none"),n.marginDomNode.setAttribute("monaco-view-zone",n.whitespaceId),this.marginDomNode.appendChild(n.marginDomNode)),this._zones[n.whitespaceId]=n,this.setShouldRender(),n.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return"number"===typeof e.heightInPx?e.heightInPx:"number"===typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return"number"===typeof e.minWidthInPx?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if("function"===typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(O2){(0,Ux.dz)(O2)}}_safeCallOnDomNodeTop(e,t){if("function"===typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(O2){(0,Ux.dz)(O2)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(i[r.id]=r,n=!0);const s=Object.keys(this._zones);for(let r=0,o=s.length;r<o;r++){const t=s[r],n=this._zones[t];let o=0,a=0,l="none";i.hasOwnProperty(t)?(o=i[t].verticalOffset-e.bigNumbersDelta,a=i[t].height,l="block",n.isVisible||(n.domNode.setAttribute("monaco-visible-view-zone","true"),n.isVisible=!0),this._safeCallOnDomNodeTop(n.delegate,e.getScrolledTopFromAbsoluteTop(i[t].verticalOffset))):(n.isVisible&&(n.domNode.removeAttribute("monaco-visible-view-zone"),n.isVisible=!1),this._safeCallOnDomNodeTop(n.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),n.domNode.setTop(o),n.domNode.setHeight(a),n.domNode.setDisplay(l),n.marginDomNode&&(n.marginDomNode.setTop(o),n.marginDomNode.setHeight(a),n.marginDomNode.setDisplay(l))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}class pQ extends cK{constructor(e){super(),this._context=e,this._options=new fQ(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new fQ(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,"selection"===this._options.renderWhitespace}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if("none"===this._options.renderWhitespace)return void(this._renderResult=null);const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber-t+1,n=new Array(i);for(let r=0;r<i;r++)n[r]=!0;const s=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,n);this._renderResult=[];for(let r=e.viewportData.startLineNumber;r<=e.viewportData.endLineNumber;r++){const t=r-e.viewportData.startLineNumber,i=s.data[t];let n=null;if("selection"===this._options.renderWhitespace){const e=this._selection;for(const t of e){if(t.endLineNumber<r||t.startLineNumber>r)continue;const e=t.startLineNumber===r?t.startColumn:i.minColumn,s=t.endLineNumber===r?t.endColumn:i.maxColumn;e<s&&(n||(n=[]),n.push(new VU(e-1,s-1)))}}this._renderResult[t]=this._applyRenderWhitespace(e,r,n,i)}}_applyRenderWhitespace(e,t,i,n){if("selection"===this._options.renderWhitespace&&!i)return"";if("trailing"===this._options.renderWhitespace&&n.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(RW.w4),r=this._options.renderWithSVG,o=n.content,a=-1===this._options.stopRenderingLineAfter?o.length:Math.min(this._options.stopRenderingLineAfter,o.length),l=n.continuesWithWrappedLine,h=n.minColumn-1,c="boundary"===this._options.renderWhitespace,d="trailing"===this._options.renderWhitespace,u=this._options.lineHeight,g=this._options.middotWidth,p=this._options.wsmiddotWidth,f=this._options.spaceWidth,m=Math.abs(p-f)<Math.abs(g-f)?11825:183,_=this._options.canUseHalfwidthRightwardsArrow;let v,b="",y=!1,w=Tx.HG(o);-1===w?(y=!0,w=a,v=a):v=Tx.lT(o);let C=0,S=i&&i[C],x=0;for(let k=h;k<a;k++){const n=o.charCodeAt(k);if(S&&k>=S.endOffset&&(C++,S=i&&i[C]),9!==n&&32!==n)continue;if(d&&!y&&k<=v)continue;if(c&&k>=w&&k<=v&&32===n){const e=k-1>=0?o.charCodeAt(k-1):0,t=k+1<a?o.charCodeAt(k+1):0;if(32!==e&&32!==t)continue}if(c&&l&&k===a-1){const e=k-1>=0?o.charCodeAt(k-1):0;if(32===n&&32!==e&&9!==e)continue}if(i&&(!S||S.startOffset>k||S.endOffset<=k))continue;const s=e.visibleRangeForPosition(new OA.y(t,k+1));s&&(r?(x=Math.max(x,s.left),b+=9===n?this._renderArrow(u,f,s.left):`<circle cx="${(s.left+f/2).toFixed(2)}" cy="${(u/2).toFixed(2)}" r="${(f/7).toFixed(2)}" />`):b+=9===n?`<div class="mwh" style="left:${s.left}px;height:${u}px;">${_?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:`<div class="mwh" style="left:${s.left}px;height:${u}px;">${String.fromCharCode(m)}</div>`)}return r?(x=Math.round(x+f),`<svg style="bottom:0;position:absolute;width:${x}px;height:${u}px" viewBox="0 0 ${x} ${u}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+b+"</svg>"):b}_renderArrow(e,t,i){const n=e/2,s=i,r={x:0,y:t/7/2},o={x:.8*t,y:r.y},a={x:o.x-.2*o.x,y:o.y+.2*o.x},l={x:a.x+.1*o.x,y:a.y+.1*o.x},h={x:l.x+.35*o.x,y:l.y-.35*o.x};return`<path d="M ${[r,o,a,l,h,{x:h.x,y:-h.y},{x:l.x,y:-l.y},{x:a.x,y:-a.y},{x:o.x,y:-o.y},{x:r.x,y:-r.y}].map((e=>`${(s+e.x).toFixed(2)} ${(n+e.y).toFixed(2)}`)).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class fQ{constructor(e){const t=e.options,i=t.get(50),n=t.get(38);"off"===n?(this.renderWhitespace="none",this.renderWithSVG=!1):"svg"===n?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class mQ{constructor(e,t,i,n){this.selections=e,this.startLineNumber=0|t.startLineNumber,this.endLineNumber=0|t.endLineNumber,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=0|t.bigNumbersDelta,this.lineHeight=0|t.lineHeight,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new JM.Q(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class _Q{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class vQ{constructor(e,t,i){this.configuration=e,this.theme=new _Q(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var bQ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},yQ=function(e,t){return function(i,n){t(i,n,e)}};let wQ=class extends aG{constructor(e,t,i,n,s,r,o){super(),this._instantiationService=o,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new jG.L(1,1,1,1)],this._renderAnimationFrame=null;const a=new H$(t,n,s,e);this._context=new vQ(t,i,n),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(bK,this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=UE(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=UE(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=UE(document.createElement("div")),hG.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new lq(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new kq(this._context,this._linesContent),this._viewZones=new gQ(this._context),this._viewParts.push(this._viewZones);const l=new Qq(this._context);this._viewParts.push(l);const h=new tQ(this._context);this._viewParts.push(h);const c=new q$(this._context);this._viewParts.push(c),c.addDynamicOverlay(new rq(this._context)),c.addDynamicOverlay(new oQ(this._context)),c.addDynamicOverlay(new bq(this._context)),c.addDynamicOverlay(new aq(this._context)),c.addDynamicOverlay(new pQ(this._context));const d=new Q$(this._context);this._viewParts.push(d),d.addDynamicOverlay(new oq(this._context)),d.addDynamicOverlay(new Eq(this._context)),d.addDynamicOverlay(new Lq(this._context)),d.addDynamicOverlay(new dK(this._context)),this._glyphMarginWidgets=new gq(this._context),this._viewParts.push(this._glyphMarginWidgets);const u=new uK(this._context);u.getDomNode().appendChild(this._viewZones.marginDomNode),u.getDomNode().appendChild(d.getDomNode()),u.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(u),this._contentWidgets=new Z$(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new dQ(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new $q(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const g=new eQ(this._context);this._viewParts.push(g);const p=new Y$(this._context);this._viewParts.push(p);const f=new jq(this._context);if(this._viewParts.push(f),l){const e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(l.getDomNode(),e.insertBefore)}this._linesContent.appendChild(c.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(h.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new hK(this._context,a,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],n=0;i=i.concat(e.getAllMarginDecorations().map((e=>{const t=e.options.glyphMargin?.position??IU.ZS.Center;return n=Math.max(n,e.range.endLineNumber),{range:e.range,lane:t,persist:e.options.glyphMargin?.persistLane}}))),i=i.concat(this._glyphMarginWidgets.getWidgets().map((t=>{const i=e.validateRange(t.preference.range);return n=Math.max(n,i.endLineNumber),{range:i,lane:t.preference.lane}}))),i.sort(((e,t)=>JM.Q.compareRangesUsingStarts(e.range,t.range))),t.reset(n);for(const s of i)t.push(s.lane,s.range,s.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new RG(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new OA.y(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const e=this._context.configuration.options.get(146);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+(0,bT.Pz)(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new Ux.D7;if(null===this._renderAnimationFrame){const e=this._createCoordinatedRendering();this._renderAnimationFrame=SQ.INSTANCE.scheduleCoordinatedRendering({window:fL(this.domNode?.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Ux.D7;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Ux.D7;return e.renderText()},prepareRender:(t,i)=>{if(this._store.isDisposed)throw new Ux.D7;return e.prepareRender(t,i)},render:(t,i)=>{if(this._store.isDisposed)throw new Ux.D7;return e.render(t,i)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();CQ((()=>e.prepareRenderText()));const t=CQ((()=>e.renderText()));if(t){const[i,n]=t;CQ((()=>e.prepareRender(i,n))),CQ((()=>e.render(i,n)))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}$j.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new mQ(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new dG(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new OA.y(n.lineNumber,n.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?X$.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new Jq(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const e of this._viewParts)e.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){this._contentWidgets.setWidgetPosition(e.widget,e.position?.position??null,e.position?.secondaryPosition??null,e.position?.preference??null,e.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};function CQ(e){try{return e()}catch(O2){return(0,Ux.dz)(O2),null}}wQ=bQ([yQ(6,eM._Y)],wQ);class SQ{static#e=(()=>this.INSTANCE=new SQ)();constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(-1!==t&&(this._coordinatedRenderings.splice(t,1),0===this._coordinatedRenderings.length)){for(const[e,t]of this._animationFrameRunners)t.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,NL(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)CQ((()=>i.prepareRenderText()));const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t[i]=CQ((()=>n.renderText()))}for(let i=0,n=e.length;i<n;i++){const n=e[i],s=t[i];if(!s)continue;const[r,o]=s;CQ((()=>n.prepareRender(r,o)))}for(let i=0,n=e.length;i<n;i++){const n=e[i],s=t[i];if(!s)continue;const[r,o]=s;CQ((()=>n.render(r,o)))}}}var xQ=i(7289);class kQ{constructor(e,t,i,n,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=n,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=0===e?t:this.breakOffsets[e-1]+t;if(null!==this.injectionOffsets)for(let n=0;n<this.injectionOffsets.length&&i>this.injectionOffsets[n];n++)i<this.injectionOffsets[n]+this.injectionOptions[n].content.length?i=this.injectionOffsets[n]:i-=this.injectionOptions[n].content.length;return i}translateToOutputPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=e;if(null!==this.injectionOffsets)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n])&&(1===t||e!==this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=0,n=this.breakOffsets.length-1,s=0,r=0;for(;i<=n;){s=i+(n-i)/2|0;const o=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,0===t)if(e<=r)n=s-1;else{if(!(e>o))break;i=s+1}else if(e<r)n=s-1;else{if(!(e>=o))break;i=s+1}}let o=e-r;return s>0&&(o+=this.wrappedTextIndentLength),new MQ(s,o)}normalizeOutputPosition(e,t,i){if(null!==this.injectionOffsets){const n=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(n,i);if(s!==n)return this.offsetInInputWithInjectionsToOutputPosition(s,i)}if(0===i){if(e>0&&t===this.getMinOutputOffset(e))return new MQ(e-1,this.getMaxOutputOffset(e-1))}else if(1===i){if(e<this.getOutputLineCount()-1&&t===this.getMaxOutputOffset(e))return new MQ(e+1,this.getMinOutputOffset(e+1))}return new MQ(e,t)}outputPositionToOffsetInInputWithInjections(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));return(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(2===t){if(e===i.offsetInInputWithInjections+i.length&&LQ(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let e=i.offsetInInputWithInjections;if(EQ(this.injectionOptions[i.injectedTextIndex].cursorStops))return e;let t=i.injectedTextIndex-1;for(;t>=0&&this.injectionOffsets[t]===this.injectionOffsets[i.injectedTextIndex]&&!LQ(this.injectionOptions[t].cursorStops)&&(e-=this.injectionOptions[t].content.length,!EQ(this.injectionOptions[t].cursorStops));)t--;return e}}if(1===t||4===t){let e=i.offsetInInputWithInjections+i.length,t=i.injectedTextIndex;for(;t+1<this.injectionOffsets.length&&this.injectionOffsets[t+1]===this.injectionOffsets[t];)e+=this.injectionOptions[t+1].content.length,t++;return e}if(0===t||3===t){let e=i.offsetInInputWithInjections,t=i.injectedTextIndex;for(;t-1>=0&&this.injectionOffsets[t-1]===this.injectionOffsets[t];)e-=this.injectionOptions[t-1].content.length,t--;return e}(0,xQ.xb)(t)}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(null!==t){let n=0;for(let s=0;s<t.length;s++){const r=i[s].content.length,o=t[s]+n,a=t[s]+n+r;if(o>e)break;if(e<=a)return{injectedTextIndex:s,offsetInInputWithInjections:o,length:r};n+=r}}}}function LQ(e){return null===e||void 0===e||(e===IU.VW.Right||e===IU.VW.Both)}function EQ(e){return null===e||void 0===e||(e===IU.VW.Left||e===IU.VW.Both)}class MQ{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new OA.y(e+this.outputLineIndex,this.outputOffset+1)}}var TQ=i(7638);const DQ=KM("domLineBreaksComputer",{createHTML:e=>e});class NQ{static create(e){return new NQ(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,n,s){const r=[],o=[];return{addRequest:(e,t,i)=>{r.push(e),o.push(t)},finalize:()=>function(e,t,i,n,s,r,o,a){function l(e){const i=a[e];if(i){const n=TQ.uK.applyInjectedText(t[e],i),s=i.map((e=>e.options)),r=i.map((e=>e.column-1));return new kQ(r,s,[n.length],[],0)}return null}if(-1===s){const e=[];for(let i=0,n=t.length;i<n;i++)e[i]=l(i);return e}const h=Math.round(s*i.typicalHalfwidthCharacterWidth),c=3===r?2:2===r?1:0,d=Math.round(n*c),u=Math.ceil(i.spaceWidth*d),g=document.createElement("div");jE(g,i);const p=new RU.fe(1e4),f=[],m=[],_=[],v=[],b=[];for(let k=0;k<t.length;k++){const e=TQ.uK.applyInjectedText(t[k],a[k]);let s=0,o=0,l=h;if(0!==r)if(s=Tx.HG(e),-1===s)s=0;else{for(let i=0;i<s;i++){o+=9===e.charCodeAt(i)?n-o%n:1}const t=Math.ceil(i.spaceWidth*o);t+i.typicalFullwidthCharacterWidth>h?(s=0,o=0):l=h-t}const c=e.substr(s),d=IQ(c,o,n,l,p,u);f[k]=s,m[k]=o,_[k]=c,v[k]=d[0],b[k]=d[1]}const y=p.build(),w=DQ?.createHTML(y)??y;g.innerHTML=w,g.style.position="absolute",g.style.top="10000","keepAll"===o?(g.style.wordBreak="keep-all",g.style.overflowWrap="anywhere"):(g.style.wordBreak="inherit",g.style.overflowWrap="break-word");e.document.body.appendChild(g);const C=document.createRange(),S=Array.prototype.slice.call(g.children,0),x=[];for(let k=0;k<t.length;k++){const e=AQ(C,S[k],_[k],v[k]);if(null===e){x[k]=l(k);continue}const t=f[k],i=m[k]+d,n=b[k],s=[];for(let a=0,l=e.length;a<l;a++)s[a]=n[e[a]];if(0!==t)for(let a=0,l=e.length;a<l;a++)e[a]+=t;let r,o;const h=a[k];h?(r=h.map((e=>e.options)),o=h.map((e=>e.column-1))):(r=null,o=null),x[k]=new kQ(o,r,e,s,i)}return g.remove(),x}((0,gM.eU)(this.targetWindow.deref()),r,e,t,i,n,s,o)}}}function IQ(e,t,i,n,s,r){if(0!==r){const e=String(r);s.appendString('<div style="text-indent: -'),s.appendString(e),s.appendString("px; padding-left: "),s.appendString(e),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(n)),s.appendString('px;">');const o=e.length;let a=t,l=0;const h=[],c=[];let d=0<o?e.charCodeAt(0):0;s.appendString("<span>");for(let u=0;u<o;u++){0!==u&&u%16384===0&&s.appendString("</span><span>"),h[u]=l,c[u]=a;const t=d;d=u+1<o?e.charCodeAt(u+1):0;let n=1,r=1;switch(t){case 9:n=i-a%i,r=n;for(let e=1;e<=n;e++)e<n?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:32===d?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:Tx.ne(t)&&r++,t<32?s.appendCharCode(9216+t):s.appendCharCode(t)}l+=n,a+=r}return s.appendString("</span>"),h[e.length]=l,c[e.length]=a,s.appendString("</div>"),[h,c]}function AQ(e,t,i,n){if(i.length<=1)return null;const s=Array.prototype.slice.call(t.children,0),r=[];try{RQ(e,s,n,0,null,i.length-1,null,r)}catch(o){return console.log(o),null}return 0===r.length?null:(r.push(i.length),r)}function RQ(e,t,i,n,s,r,o,a){if(n===r)return;if(s=s||PQ(e,t,i[n],i[n+1]),o=o||PQ(e,t,i[r],i[r+1]),Math.abs(s[0].top-o[0].top)<=.1)return;if(n+1===r)return void a.push(r);const l=n+(r-n)/2|0,h=PQ(e,t,i[l],i[l+1]);RQ(e,t,i,n,s,l,h,a),RQ(e,t,i,l,h,r,o,a)}function PQ(e,t,i,n){return e.setStart(t[i/16384|0].firstChild,i%16384),e.setEnd(t[n/16384|0].firstChild,n%16384),e.getClientRects()}class OQ extends Mx.jG{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new Mx.$w),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const n of t)this._pending.has(n.id)?(0,Ux.dz)(new Error(`Cannot have two contributions with the same id ${n.id}`)):this._pending.set(n.id,n);this._instantiateSome(0),this._register(DL(fL(this._editor.getDomNode()),(()=>{this._instantiateSome(1)}))),this._register(DL(fL(this._editor.getDomNode()),(()=>{this._instantiateSome(2)}))),this._register(DL(fL(this._editor.getDomNode()),(()=>{this._instantiateSome(3)}),5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)"function"===typeof i.saveViewState&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)"function"===typeof i.restoreViewState&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){return DL(fL(this._editor?.getDomNode()),(()=>{this._instantiateSome(1)}),50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const e=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,e),"function"===typeof e.restoreViewState&&0!==t.instantiation&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){(0,Ux.dz)(i)}}}}class FQ{constructor(e,t,i,n,s,r,o){this.id=e,this.label=t,this.alias=i,this.metadata=n,this._precondition=s,this._run=r,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}var BQ=i(6953),zQ=i(6269);class VQ{static create(e){return new VQ(e.get(135),e.get(134))}constructor(e,t){this.classifier=new WQ(e,t)}createLineBreaksComputer(e,t,i,n,s){const r=[],o=[],a=[];return{addRequest:(e,t,i)=>{r.push(e),o.push(t),a.push(i)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,h=[];for(let e=0,c=r.length;e<c;e++){const c=o[e],d=a[e];!d||d.injectionOptions||c?h[e]=GQ(this.classifier,r[e],c,t,i,l,n,s):h[e]=jQ(this.classifier,d,r[e],t,i,l,n,s)}return HQ.length=0,UQ.length=0,h}}}}class WQ extends zQ.V{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let HQ=[],UQ=[];function jQ(e,t,i,n,s,r,o,a){if(-1===s)return null;const l=i.length;if(l<=1)return null;const h="keepAll"===a,c=t.breakOffsets,d=t.breakOffsetsVisibleColumn,u=QQ(i,n,s,r,o),g=s-u,p=HQ,f=UQ;let m=0,_=0,v=0,b=s;const y=c.length;let w=0;if(w>=0){let e=Math.abs(d[w]-b);for(;w+1<y;){const t=Math.abs(d[w+1]-b);if(t>=e)break;e=t,w++}}for(;w<y;){let t=w<0?0:c[w],s=w<0?0:d[w];_>t&&(t=_,s=v);let o=0,a=0,u=0,C=0;if(s<=b){let v=s,y=0===t?0:i.charCodeAt(t-1),w=0===t?0:e.get(y),S=!0;for(let s=t;s<l;s++){const t=s,l=i.charCodeAt(s);let c,d;if(Tx.pc(l)?(s++,c=0,d=2):(c=e.get(l),d=KQ(l,v,n,r)),t>_&&qQ(y,w,l,c,h)&&(o=t,a=v),v+=d,v>b){t>_?(u=t,C=v-d):(u=s+1,C=v),v-a>g&&(o=0),S=!1;break}y=l,w=c}if(S){m>0&&(p[m]=c[c.length-1],f[m]=d[c.length-1],m++);break}}if(0===o){let l=s,c=i.charCodeAt(t),d=e.get(c),p=!1;for(let n=t-1;n>=_;n--){const t=n+1,s=i.charCodeAt(n);if(9===s){p=!0;break}let f,m;if(Tx.LJ(s)?(n--,f=0,m=2):(f=e.get(s),m=Tx.ne(s)?r:1),l<=b){if(0===u&&(u=t,C=l),l<=b-g)break;if(qQ(s,f,c,d,h)){o=t,a=l;break}}l-=m,c=s,d=f}if(0!==o){const e=g-(C-a);if(e<=n){const t=i.charCodeAt(u);let s;s=Tx.pc(t)?2:KQ(t,C,n,r),e-s<0&&(o=0)}}if(p){w--;continue}}if(0===o&&(o=u,a=C),o<=_){const e=i.charCodeAt(_);Tx.pc(e)?(o=_+2,a=v+2):(o=_+1,a=v+KQ(e,v,n,r))}for(_=o,p[m]=o,v=a,f[m]=a,m++,b=a+g;w<0||w<y&&d[w]<a;)w++;let S=Math.abs(d[w]-b);for(;w+1<y;){const e=Math.abs(d[w+1]-b);if(e>=S)break;S=e,w++}}return 0===m?null:(p.length=m,f.length=m,HQ=t.breakOffsets,UQ=t.breakOffsetsVisibleColumn,t.breakOffsets=p,t.breakOffsetsVisibleColumn=f,t.wrappedTextIndentLength=u,t)}function GQ(e,t,i,n,s,r,o,a){const l=TQ.uK.applyInjectedText(t,i);let h,c;if(i&&i.length>0?(h=i.map((e=>e.options)),c=i.map((e=>e.column-1))):(h=null,c=null),-1===s)return h?new kQ(c,h,[l.length],[],0):null;const d=l.length;if(d<=1)return h?new kQ(c,h,[l.length],[],0):null;const u="keepAll"===a,g=QQ(l,n,s,r,o),p=s-g,f=[],m=[];let _=0,v=0,b=0,y=s,w=l.charCodeAt(0),C=e.get(w),S=KQ(w,0,n,r),x=1;Tx.pc(w)&&(S+=1,w=l.charCodeAt(1),C=e.get(w),x++);for(let k=x;k<d;k++){const t=k,i=l.charCodeAt(k);let s,o;Tx.pc(i)?(k++,s=0,o=2):(s=e.get(i),o=KQ(i,S,n,r)),qQ(w,C,i,s,u)&&(v=t,b=S),S+=o,S>y&&((0===v||S-b>p)&&(v=t,b=S-o),f[_]=v,m[_]=b,_++,y=b+p,v=0),w=i,C=s}return 0!==_||i&&0!==i.length?(f[_]=d,m[_]=S,new kQ(c,h,f,m,g)):null}function KQ(e,t,i,n){return 9===e?i-t%i:Tx.ne(e)||e<32?n:1}function $Q(e,t){return t-e%t}function qQ(e,t,i,n,s){return 32!==i&&(2===t&&2!==n||1!==t&&1===n||!s&&3===t&&2!==n||!s&&3===n&&1!==t)}function QQ(e,t,i,n,s){let r=0;if(0!==s){const o=Tx.HG(e);if(-1!==o){for(let i=0;i<o;i++){r+=9===e.charCodeAt(i)?$Q(r,t):1}const a=3===s?2:2===s?1:0;for(let e=0;e<a;e++){r+=$Q(r,t)}r+n>i&&(r=0)}}return r}var XQ=i(194);class YQ{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new TK(new JM.Q(1,1,1,1),0,0,new OA.y(1,1),0),new TK(new JM.Q(1,1,1,1),0,0,new OA.y(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new LK(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?jG.L.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):jG.L.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,n=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),o=this._validatePositionWithCache(e,n,i,r),a=this._validatePositionWithCache(e,s,n,o);return i.equals(r)&&n.equals(o)&&s.equals(a)?t:new TK(JM.Q.fromPositions(o,a),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+n.column-o.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=YQ._validateViewState(e.viewModel,i)),t){const i=e.model.validateRange(t.selectionStart),n=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),r=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new TK(i,t.selectionStartKind,n,s,r)}else{if(!i)return;const n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new TK(n,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,s,i.leftoverVisibleColumns)}if(i){const n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new TK(n,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const n=e.coordinatesConverter.convertModelPositionToViewPosition(new OA.y(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new OA.y(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new JM.Q(n.lineNumber,n.column,s.lineNumber,s.column),o=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new TK(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class ZQ{constructor(e){this.context=e,this.cursors=[new YQ(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map((e=>e.readSelectionFromMarkers(this.context)))}getAll(){return this.cursors.map((e=>e.asCursorState()))}getViewPositions(){return this.cursors.map((e=>e.viewState.position))}getTopMostViewPosition(){return(0,XQ.kh)(this.cursors,(0,OS.VE)((e=>e.viewState.position),OA.y.compare)).viewState.position}getBottomMostViewPosition(){return(0,XQ.ot)(this.cursors,(0,OS.VE)((e=>e.viewState.position),OA.y.compare)).viewState.position}getSelections(){return this.cursors.map((e=>e.modelState.selection))}getViewSelections(){return this.cursors.map((e=>e.viewState.selection))}setSelections(e){this.setStates(LK.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const e=i-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>i){const e=t-i;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.cursors.length-2)}for(let n=0;n<i;n++)this.cursors[n+1].setState(this.context,e[n].modelState,e[n].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new YQ(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(1===this.cursors.length)return;const e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort((0,OS.VE)((e=>e.selection),JM.Q.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const n=t[i],s=t[i+1],r=n.selection,o=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let a;if(a=o.isEmpty()||r.isEmpty()?o.getStartPosition().isBeforeOrEqual(r.getEndPosition()):o.getStartPosition().isBefore(r.getEndPosition()),a){const r=n.index<s.index?i:i+1,o=n.index<s.index?i+1:i,a=t[o].index,l=t[r].index,h=t[o].selection,c=t[r].selection;if(!h.equalsSelection(c)){const i=h.plusRange(c),n=h.selectionStartLineNumber===h.startLineNumber&&h.selectionStartColumn===h.startColumn,s=c.selectionStartLineNumber===c.startLineNumber&&c.selectionStartColumn===c.startColumn;let o,d;a===this.lastAddedCursorIndex?(o=n,this.lastAddedCursorIndex=l):o=s,d=o?new jG.L(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new jG.L(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn),t[r].selection=d;const u=LK.fromModelSelection(d);e[l].setState(this.context,u.modelState,u.viewState)}for(const e of t)e.index>a&&e.index--;e.splice(a,1),t.splice(o,1),this._removeSecondaryCursor(a-1),i--}}}}class JQ{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}}class eX{constructor(){this.type=0}}class tX{constructor(){this.type=1}}class iX{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class nX{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class sX{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class rX{constructor(){this.type=5}}class oX{constructor(e){this.type=6,this.isFocused=e}}class aX{constructor(){this.type=7}}class lX{constructor(){this.type=8}}class hX{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class cX{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class dX{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class uX{constructor(e,t,i,n,s,r,o){this.source=e,this.minimalReveal=t,this.range=i,this.selections=n,this.verticalType=s,this.revealHorizontal=r,this.scrollType=o,this.type=12}}class gX{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class pX{constructor(e){this.theme=e,this.type=14}}class fX{constructor(e){this.type=15,this.ranges=e}}class mX{constructor(){this.type=16}}class _X{constructor(){this.type=17}}class vX extends Mx.jG{constructor(){super(),this._onEvent=this._register(new rk.vl),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i)return void(this._outgoingEvents[t]=i)}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new bX),this._collector}endEmitViewEvents(){if(this._collectorCnt--,0===this._collectorCnt){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class bX{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class yX{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new yX(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class wX{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new wX(this.oldHasFocus,e.hasFocus)}}class CX{constructor(e,t,i,n,s,r,o,a){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=s,this.scrollLeft=r,this.scrollHeight=o,this.scrollTop=a,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new CX(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class SX{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class xX{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class kX{constructor(e,t,i,n,s,r,o){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=s,this.reason=r,this.reachedMaxCursorCount=o}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(!e[n].equalsSelection(t[n]))return!1;return!0}isNoOp(){return kX._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new kX(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class LX{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class EX{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class MX{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class TX{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class DX{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class NX{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class IX{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class AX extends Mx.jG{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new JQ(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new ZQ(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,Mx.AS)(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new JQ(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let s=!1;const r=this.context.cursorConfig.multiCursorLimit;null!==n&&n.length>r&&(n=n.slice(0,r),s=!0);const o=RX.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,o,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,n,s,r){const o=this._cursors.getViewPositions();let a=null,l=null;o.length>1?l=this._cursors.getViewSelections():a=JM.Q.fromPositions(o[0],o[0]),e.emitViewEvent(new uX(t,i,a,l,n,s,r))}revealPrimary(e,t,i,n,s,r){const o=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new uX(t,i,null,o,n,s,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push({inSelectionMode:!n.isEmpty(),selectionStart:{lineNumber:n.selectionStartLineNumber,column:n.selectionStartColumn},position:{lineNumber:n.positionLineNumber,column:n.positionColumn}})}return e}restoreState(e,t){const i=[];for(let n=0,s=t.length;n<s;n++){const e=t[n];let s=1,r=1;e.position&&e.position.lineNumber&&(s=e.position.lineNumber),e.position&&e.position.column&&(r=e.position.column);let o=s,a=r;e.selectionStart&&e.selectionStart.lineNumber&&(o=e.selectionStart.lineNumber),e.selectionStart&&e.selectionStart.column&&(a=e.selectionStart.column),i.push({selectionStartLineNumber:o,selectionStartColumn:a,positionLineNumber:s,positionColumn:r})}this.setStates(e,"restoreState",0,LK.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof TQ.vn){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new ZQ(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const t=LK.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,t)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const t=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,LK.fromModelSelections(t))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,LK.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],n=[];for(let o=0,a=e.length;o<a;o++)i.push({range:e[o],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[o],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],n);this._autoClosedActions.push(new PX(this._model,s,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=OX.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],n=[];for(let t=0;t<e.commands.length;t++){const s=e.commands[t];s instanceof m$&&s.enclosingRange&&s.closeCharacterRange&&(i.push(s.closeCharacterRange),n.push(s.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,s){const r=RX.from(this._model,this);if(r.equals(n))return!1;const o=this._cursors.getSelections(),a=this._cursors.getViewSelections();if(e.emitViewEvent(new nX(a,o,i)),!n||n.cursorState.length!==r.cursorState.length||r.cursorState.some(((e,t)=>!e.modelState.equals(n.cursorState[t].modelState)))){const a=n?n.cursorState.map((e=>e.modelState.selection)):null,l=n?n.modelVersionId:0;e.emitOutgoingEvent(new kX(a,o,l,r.modelVersionId,t||"keyboard",i,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];if(!n.text||n.text.indexOf("\n")>=0)return null;const s=n.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;const r=s[1],o=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(r);if(!o||1!==o.length)return null;const a=o[0].open,l=n.text.length-s[2].length-1,h=n.text.lastIndexOf(a,l-1);if(-1===h)return null;t.push([h,l])}return t}executeEdits(e,t,i,n){let s=null;"snippet"===t&&(s=this._findAutoClosingPairs(i)),s&&(i[0]._isTracked=!0);const r=[],o=[],a=this._model.pushEditOperations(this.getSelections(),i,(e=>{if(s)for(let i=0,n=s.length;i<n;i++){const[t,n]=s[i],a=e[i],l=a.range.startLineNumber,h=a.range.startColumn-1+t,c=a.range.startColumn-1+n;r.push(new JM.Q(l,c+1,l,c+2)),o.push(new JM.Q(l,h+1,l,c+2))}const t=n(e);return t&&(this._isHandling=!0),t}));a&&(this._isHandling=!1,this.setSelections(e,t,a,0)),r.length>0&&this._pushAutoClosedAction(r,o)}_executeEdit(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(this.context.cursorConfig.readOnly)return;const s=RX.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){(0,Ux.dz)(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,s,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return PX.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new BX(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit((()=>{"keyboard"===t&&this._executeEditOperation(M$.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))}),e,t)}type(e,t,i){this._executeEdit((()=>{if("keyboard"===i){const e=t.length;let i=0;for(;i<e;){const e=Tx.iy(t,i),n=t.substr(i,e);this._executeEditOperation(M$.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),n)),i+=e}}else this._executeEditOperation(M$.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))}),e,i)}compositionType(e,t,i,n,s,r){if(0!==t.length||0!==i||0!==n)this._executeEdit((()=>{this._executeEditOperation(M$.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,s))}),e,r);else if(0!==s){const t=this.getSelections().map((e=>{const t=e.getPosition();return new jG.L(t.lineNumber,t.column+s,t.lineNumber,t.column+s)}));this.setSelections(e,r,t,0)}}paste(e,t,i,n,s){this._executeEdit((()=>{this._executeEditOperation(M$.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))}),e,s,4)}cut(e,t){this._executeEdit((()=>{this._executeEditOperation(zK.cut(this.context.cursorConfig,this._model,this.getSelections()))}),e,t)}executeCommand(e,t,i){this._executeEdit((()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new DK(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,i)}executeCommands(e,t,i){this._executeEdit((()=>{this._executeEditOperation(new DK(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,i)}}class RX{static from(e,t){return new RX(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e)return!1;if(this.modelVersionId!==e.modelVersionId)return!1;if(this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class PX{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const e=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(e&&(t.push(e),e.startLineNumber!==e.endLineNumber))return!1}t.sort(JM.Q.compareRangesUsingStarts),e.sort(JM.Q.compareRangesUsingStarts);for(let i=0;i<e.length;i++){if(i>=t.length)return!1;if(!t[i].strictContainsRange(e[i]))return!1}return!0}}class OX{static executeCommands(e,t,i){const n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(n,i);for(let r=0,o=n.trackedRanges.length;r<o;r++)n.model._setTrackedRange(n.trackedRanges[r],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(0===i.operations.length)return null;const n=i.operations,s=this._getLoserCursorMap(n);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let l=0,h=n.length;l<h;l++)s.hasOwnProperty(n[l].identifier.major.toString())||r.push(n[l]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let o=e.model.pushEditOperations(e.selectionsBefore,r,(i=>{const n=[];for(let t=0;t<e.selectionsBefore.length;t++)n[t]=[];for(const e of i)e.identifier&&n[e.identifier.major].push(e);const s=(e,t)=>e.identifier.minor-t.identifier.minor,r=[];for(let o=0;o<e.selectionsBefore.length;o++)n[o].length>0?(n[o].sort(s),r[o]=t[o].computeCursorState(e.model,{getInverseEditOperations:()=>n[o],getTrackedSelection:t=>{const i=parseInt(t,10),n=e.model._getTrackedRange(e.trackedRanges[i]);return 0===e.trackedRangesDirection[i]?new jG.L(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new jG.L(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn)}})):r[o]=e.selectionsBefore[o];return r}));o||(o=e.selectionsBefore);const a=[];for(const l in s)s.hasOwnProperty(l)&&a.push(parseInt(l,10));a.sort(((e,t)=>t-e));for(const l of a)o.splice(l,1);return o}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let s=0,r=t.length;s<r;s++){const r=t[s];if(r){const t=this._getEditOperationsFromCommand(e,s,r);i=i.concat(t.operations),n=n||t.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){const n=[];let s=0;const r=function(e,r){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];JM.Q.isEmpty(e)&&""===r||n.push({identifier:{major:t,minor:s++},range:e,text:r,forceMoveMarkers:o,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let o=!1;const a={addEditOperation:r,addTrackedEditOperation:(e,t,i)=>{o=!0,r(e,t,i)},trackSelection:(t,i)=>{const n=jG.L.liftSelection(t);let s;if(n.isEmpty())if("boolean"===typeof i)s=i?2:3;else{const t=e.model.getLineMaxColumn(n.startLineNumber);s=n.startColumn===t?2:3}else s=1;const r=e.trackedRanges.length,o=e.model._setTrackedRange(null,n,s);return e.trackedRanges[r]=o,e.trackedRangesDirection[r]=n.getDirection(),r.toString()}};try{i.getEditOperations(e.model,a)}catch(O2){return(0,Ux.dz)(O2),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:o}}static _getLoserCursorMap(e){(e=e.slice(0)).sort(((e,t)=>-JM.Q.compareRangesUsingEnds(e.range,t.range)));const t={};for(let i=1;i<e.length;i++){const n=e[i-1],s=e[i];if(JM.Q.getStartPosition(n.range).isBefore(JM.Q.getEndPosition(s.range))){let r;r=n.identifier.major>s.identifier.major?n.identifier.major:s.identifier.major,t[r.toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===r&&(e.splice(t,1),t<i&&i--,t--);i>0&&i--}}return t}}class FX{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class BX{static _capture(e,t){const i=[];for(const n of t){if(n.startLineNumber!==n.endLineNumber)return null;i.push(new FX(e.getLineContent(n.startLineNumber),n.startColumn-1,n.endColumn-1))}return i}constructor(e,t){this._original=BX._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=BX._capture(e,t);if(!i)return null;if(this._original.length!==i.length)return null;const n=[];for(let s=0,r=this._original.length;s<r;s++)n.push(BX._deduceOutcome(this._original[s],i[s]));return n}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,Tx.Qp(e.text,t.text)),n=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,Tx.Vi(e.text,t.text)),s=e.text.substring(i,e.text.length-n),r=t.text.substring(i,t.text.length-n);return new T$(s,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}}class zX{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}}class VX{constructor(e,t,i,n,s){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=s,this.prefixSum=0}}class WX{static#e=(()=>this.INSTANCE_COUNT=0)();constructor(e,t,i,n){this._instanceId=Tx.tk(++WX.INSTANCE_COUNT),this._pendingChanges=new zX,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,s=e.length;for(;n<s;){const r=n+s>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?s=r:n=r+1:t<e[r].afterLineNumber?s=r:n=r+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{const i={insertWhitespace:(e,i,n,s)=>{t=!0,e|=0,i|=0,n|=0,s|=0;const r=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new VX(r,e,i,n,s)),r},changeOneWhitespace:(e,i,n)=>{t=!0,i|=0,n|=0,this._pendingChanges.change({id:e,newAfterLineNumber:i,newHeight:n})},removeWhitespace:e=>{t=!0,this._pendingChanges.remove({id:e})}};e(i)}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const t of e)this._insertWhitespace(t);for(const e of t)this._changeOneWhitespace(e.id,e.newAfterLineNumber,e.newHeight);for(const e of i){const t=this._findWhitespaceIndex(e.id);-1!==t&&this._removeWhitespace(t)}return}const n=new Set;for(const a of i)n.add(a.id);const s=new Map;for(const a of t)s.set(a.id,a);const r=e=>{const t=[];for(const i of e)if(!n.has(i.id)){if(s.has(i.id)){const e=s.get(i.id);i.afterLineNumber=e.newAfterLineNumber,i.height=e.newHeight}t.push(i)}return t},o=r(this._arr).concat(r(e));o.sort(((e,t)=>e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber)),this._arr=o,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=WX.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const n=this._findWhitespaceIndex(e);if(-1!==n&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){const e=this._arr[n];this._removeWhitespace(n),e.afterLineNumber=t,this._insertWhitespace(e)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const n=this._arr[i].afterLineNumber;e<=n&&n<=t?this._arr[i].afterLineNumber=e-1:n>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){e<=this._arr[i].afterLineNumber&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();return this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e|=0;const t=this._arr;let i=0,n=t.length-1;for(;i<=n;){const s=i+((n-i|0)/2|0)|0;if(t[s].afterLineNumber<e){if(s+1>=t.length||t[s+1].afterLineNumber>=e)return s;i=s+1|0}else n=s-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._checkPendingChanges(),t=(e|=0)>1?this._lineHeight*(e-1):0;return t+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(i?1:0))+this._paddingTop}getVerticalOffsetAfterLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._checkPendingChanges(),e|=0;return this._lineHeight*e+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0))+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),-1===this._minWidth){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();return e>this.getLinesTotalHeight()}isInTopPadding(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(0===this._paddingBottom)return!1;this._checkPendingChanges();return e>=this.getLinesTotalHeight()-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;const t=0|this._lineCount,i=this._lineHeight;let n=1,s=t;for(;n<s;){const t=(n+s)/2|0,r=0|this.getVerticalOffsetForLineNumber(t);if(e>=r+i)n=t+1;else{if(e>=r)return t;s=t}}return n>t?t:n}getLinesViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const i=this._lineHeight,n=0|this.getLineNumberAtOrAfterVerticalOffset(e),s=0|this.getVerticalOffsetForLineNumber(n);let r=0|this._lineCount,o=0|this.getFirstWhitespaceIndexAfterLineNumber(n);const a=0|this.getWhitespacesCount();let l,h;-1===o?(o=a,h=r+1,l=0):(h=0|this.getAfterLineNumberForWhitespaceIndex(o),l=0|this.getHeightForWhitespaceIndex(o));let c=s,d=c;const u=5e5;let g=0;s>=u&&(g=Math.floor(s/u)*u,g=Math.floor(g/i)*i,d-=g);const p=[],f=e+(t-e)/2;let m=-1;for(let y=n;y<=r;y++){if(-1===m){(c<=f&&f<c+i||c>f)&&(m=y)}for(c+=i,p[y-n]=d,d+=i;h===y;)d+=l,c+=l,o++,o>=a?h=r+1:(h=0|this.getAfterLineNumberForWhitespaceIndex(o),l=0|this.getHeightForWhitespaceIndex(o));if(c>=t){r=y;break}}-1===m&&(m=r);const _=0|this.getVerticalOffsetForLineNumber(r);let v=n,b=r;return v<b&&s<e&&v++,v<b&&_+i>t&&b--,{bigNumbersDelta:g,startLineNumber:n,endLineNumber:r,relativeVerticalOffset:p,centeredLineNumber:m,completelyVisibleStartLineNumber:v,completelyVisibleEndLineNumber:b,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i,n;return i=t>=1?this._lineHeight*t:0,n=e>0?this.getWhitespacesAccumulatedHeight(e-1):0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(i)+this.getHeightForWhitespaceIndex(i))return-1;for(;t<i;){const n=Math.floor((t+i)/2),s=this.getVerticalOffsetForWhitespaceIndex(n);if(e>=s+this.getHeightForWhitespaceIndex(n))t=n+1;else{if(e>=s)return n;i=n}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const n=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];const s=[];for(let r=i;r<=n;r++){const e=this.getVerticalOffsetForWhitespaceIndex(r),i=this.getHeightForWhitespaceIndex(r);if(e>=t)break;s.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:e,height:i})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}class HX{constructor(e,t,i,n){(e|=0)<0&&(e=0),(t|=0)<0&&(t=0),(i|=0)<0&&(i=0),(n|=0)<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class UX extends Mx.jG{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new rk.vl),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new HX(0,0,0,0),this._scrollable=this._register(new CD({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new yX(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class jX extends Mx.jG{constructor(e,t,i){super(),this._configuration=e;const n=this._configuration.options,s=n.get(146),r=n.get(84);this._linesLayout=new WX(t,n.get(67),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new UX(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new HX(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?125:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const e=t.get(84);this._linesLayout.setPadding(e.top,e.bottom)}if(e.hasChanged(146)){const e=t.get(146),i=e.contentWidth,n=e.height,s=this._scrollable.getScrollDimensions(),r=s.contentWidth;this._scrollable.setScrollDimensions(new HX(i,s.contentWidth,n,this._getContentHeight(i,n,r)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(104);return 2===i.horizontal||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,i){const n=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return n.get(106)?s+=Math.max(0,t-n.get(67)-n.get(84).bottom):n.get(104).ignoreHorizontalScrollbarInContentHeight||(s+=this._getHorizontalScrollbarHeight(e,i)),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new HX(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new YU(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new YU(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),n=e.get(50),s=e.get(146);if(i.isViewportWrapping){const i=e.get(73);return t>s.contentWidth+n.typicalHalfwidthCharacterWidth&&i.enabled&&"right"===i.side?t+s.verticalScrollbarWidth:t}{const i=e.get(105)*n.typicalHalfwidthCharacterWidth,r=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+i+s.verticalScrollbarWidth,r,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new HX(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i),scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class GX{constructor(e,t,i,n,s){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const n=e.range,s=e.options;let r;if(s.isWholeLine){const e=this._coordinatesConverter.convertModelPositionToViewPosition(new OA.y(n.startLineNumber,1),0,!1,!0),t=this._coordinatesConverter.convertModelPositionToViewPosition(new OA.y(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)),1);r=new JM.Q(e.lineNumber,e.column,t.lineNumber,t.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(n,1);i=new nj(r,s),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=null!==this._cachedModelDecorationsResolver;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=new JM.Q(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(n,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const n=this._linesCollection.getDecorationsInRange(e,this.editorId,dx(this.configuration.options),t,i),s=e.startLineNumber,r=e.endLineNumber,o=[];let a=0;const l=[];for(let h=s;h<=r;h++)l[h-s]=[];for(let h=0,c=n.length;h<c;h++){const e=n[h],t=e.options;if(!KX(this.model,e))continue;const i=this._getOrCreateViewModelDecoration(e),c=i.range;if(o[a++]=i,t.inlineClassName){const e=new tj(c,t.inlineClassName,t.inlineClassNameAffectsLetterSpacing?3:0),i=Math.max(s,c.startLineNumber),n=Math.min(r,c.endLineNumber);for(let t=i;t<=n;t++)l[t-s].push(e)}if(t.beforeContentClassName&&s<=c.startLineNumber&&c.startLineNumber<=r){const e=new tj(new JM.Q(c.startLineNumber,c.startColumn,c.startLineNumber,c.startColumn),t.beforeContentClassName,1);l[c.startLineNumber-s].push(e)}if(t.afterContentClassName&&s<=c.endLineNumber&&c.endLineNumber<=r){const e=new tj(new JM.Q(c.endLineNumber,c.endColumn,c.endLineNumber,c.endColumn),t.afterContentClassName,2);l[c.endLineNumber-s].push(e)}}return{decorations:o,inlineDecorations:l}}}function KX(e,t){return(!t.options.hideInCommentTokens||!function(e,t){return $X(e,t.range,(e=>1===e))}(e,t))&&(!t.options.hideInStringTokens||!function(e,t){return $X(e,t.range,(e=>2===e))}(e,t))}function $X(e,t,i){for(let n=t.startLineNumber;n<=t.endLineNumber;n++){const s=e.tokenization.getLineTokens(n),r=n===t.startLineNumber,o=n===t.endLineNumber;let a=r?s.findTokenIndexAtOffset(t.startColumn-1):0;for(;a<s.getCount();){if(o){if(s.getStartOffset(a)>t.endColumn-1)break}if(!i(s.getStandardTokenType(a)))return!1;a++}}return!0}function qX(e,t){return null===e?t?XX.INSTANCE:YX.INSTANCE:new QX(e,t)}class QX{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const n=i>0?this._projectionData.breakOffsets[i-1]:0,s=this._projectionData.breakOffsets[i];let r;if(null!==this._projectionData.injectionOffsets){const i=this._projectionData.injectionOffsets.map(((e,t)=>new TQ.uK(0,0,e+1,this._projectionData.injectionOptions[t],0)));r=TQ.uK.applyInjectedText(e.getLineContent(t),i).substring(n,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:s+1});return i>0&&(r=JX(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const n=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],n),n[0]}getViewLinesData(e,t,i,n,s,r,o){this._assertVisible();const a=this._projectionData,l=a.injectionOffsets,h=a.injectionOptions;let c,d=null;if(l){d=[];let e=0,t=0;for(let i=0;i<a.getOutputLineCount();i++){const n=new Array;d[i]=n;const s=i>0?a.breakOffsets[i-1]:0,r=a.breakOffsets[i];for(;t<l.length;){const o=h[t].content.length,c=l[t]+e,d=c+o;if(c>r)break;if(s<d){const e=h[t];if(e.inlineClassName){const t=i>0?a.wrappedTextIndentLength:0,o=t+Math.max(c-s,0),l=t+Math.min(d-s,r-s);o!==l&&n.push(new ij(o,l,e.inlineClassName,e.inlineClassNameAffectsLetterSpacing))}}if(!(d<=r))break;e+=o,t++}}}c=l?e.tokenization.getLineTokens(t).withInserted(l.map(((e,t)=>({offset:e,text:h[t].content,tokenMetadata:AI.f.defaultTokenMetadata})))):e.tokenization.getLineTokens(t);for(let u=i;u<i+n;u++){const e=s+u-i;r[e]?o[e]=this._getViewLineData(c,d?d[u]:null,u):o[e]=null}}_getViewLineData(e,t,i){this._assertVisible();const n=this._projectionData,s=i>0?n.wrappedTextIndentLength:0,r=i>0?n.breakOffsets[i-1]:0,o=n.breakOffsets[i],a=e.sliceAndInflate(r,o,s);let l=a.getLineContent();i>0&&(l=JX(n.wrappedTextIndentLength)+l);const h=this._projectionData.getMinOutputOffset(i)+1,c=l.length+1,d=i+1<this.getViewLineCount(),u=0===i?0:n.breakOffsetsVisibleColumn[i-1];return new JU(l,d,h,c,u,a,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this._assertVisible();return this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();return e+this._projectionData.translateToOutputPosition(t-1).outputLineIndex}normalizePosition(e,t,i){const n=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(n)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class XX{static#e=(()=>this.INSTANCE=new XX)();constructor(){}isVisible(){return!0}setVisible(e){return e?this:YX.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const n=e.tokenization.getLineTokens(t),s=n.getLineContent();return new JU(s,!1,1,s.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,s,r,o){r[s]?o[s]=this.getViewLineData(e,t,0):o[s]=null}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new OA.y(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}}class YX{static#e=(()=>this.INSTANCE=new YX)();constructor(){}isVisible(){return!1}setVisible(e){return e?XX.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,s,r,o){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}const ZX=[""];function JX(e){if(e>=ZX.length)for(let t=1;t<=e;t++)ZX[t]=eY(t);return ZX[e]}function eY(e){return new Array(e+1).join(" ")}var tY=i(303);class iY{constructor(e,t,i,n,s,r,o,a,l,h){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=s,this.tabSize=r,this.wrappingStrategy=o,this.wrappingColumn=a,this.wrappingIndent=l,this.wordBreak=h,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new rY(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),s=i.length,r=this.createLineBreaksComputer(),o=new OS.j3(TQ.uK.fromDecorations(n));for(let p=0;p<s;p++){const e=o.takeWhile((e=>e.lineNumber===p+1));r.addRequest(i[p],e,t?t[p]:null)}const a=r.finalize(),l=[],h=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(JM.Q.compareRangesUsingStarts);let c=1,d=0,u=-1,g=u+1<h.length?d+1:s+2;for(let p=0;p<s;p++){const e=p+1;e===g&&(u++,c=h[u].startLineNumber,d=h[u].endLineNumber,g=u+1<h.length?d+1:s+2);const t=e>=c&&e<=d,i=qX(a[p],!t);l[p]=i.getViewLineCount(),this.modelLineProjections[p]=i}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new tY.c2(l)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e)))}setHiddenAreas(e){const t=e.map((e=>this.model.validateRange(e))),i=function(e){if(0===e.length)return[];const t=e.slice();t.sort(JM.Q.compareRangesUsingStarts);const i=[];let n=t[0].startLineNumber,s=t[0].endLineNumber;for(let r=1,o=t.length;r<o;r++){const e=t[r];e.startLineNumber>s+1?(i.push(new JM.Q(n,1,s,1)),n=e.startLineNumber,s=e.endLineNumber):e.endLineNumber>s&&(s=e.endLineNumber)}return i.push(new JM.Q(n,1,s,1)),i}(t),n=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(JM.Q.compareRangesUsingStarts);if(i.length===n.length){let e=!1;for(let t=0;t<i.length;t++)if(!i[t].equalsRange(n[t])){e=!0;break}if(!e)return!1}const s=i.map((e=>({range:e,options:BQ.kI.EMPTY})));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const r=i;let o=1,a=0,l=-1,h=l+1<r.length?a+1:this.modelLineProjections.length+2,c=!1;for(let d=0;d<this.modelLineProjections.length;d++){const e=d+1;e===h&&(l++,o=r[l].startLineNumber,a=r[l].endLineNumber,h=l+1<r.length?a+1:this.modelLineProjections.length+2);let t=!1;if(e>=o&&e<=a?this.modelLineProjections[d].isVisible()&&(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!1),t=!0):(c=!0,this.modelLineProjections[d].isVisible()||(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!0),t=!0)),t){const e=this.modelLineProjections[d].getViewLineCount();this.projectedModelLineLineCounts.setValue(d,e)}}return c||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n,s){const r=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===i,l=this.wrappingIndent===n,h=this.wordBreak===s;if(r&&o&&a&&l&&h)return!1;const c=r&&o&&!a&&l&&h;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n,this.wordBreak=s;let d=null;if(c){d=[];for(let e=0,t=this.modelLineProjections.length;e<t;e++)d[e]=this.modelLineProjections[e].getProjectionData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return("advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const n=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new cX(n,s)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),r=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let o=0;const a=[],l=[];for(let h=0,c=n.length;h<c;h++){const e=qX(n[h],!s);a.push(e);const t=e.getViewLineCount();o+=t,l[h]=t}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(a).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,l),new dX(r,r+o-1)}onModelLineChanged(e,t,i){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];const n=t-1,s=this.modelLineProjections[n].getViewLineCount(),r=qX(i,this.modelLineProjections[n].isVisible());this.modelLineProjections[n]=r;const o=this.modelLineProjections[n].getViewLineCount();let a=!1,l=0,h=-1,c=0,d=-1,u=0,g=-1;s>o?(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=l+o-1,u=h+1,g=u+(s-o)-1,a=!0):s<o?(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=l+s-1,c=h+1,d=c+(o-s)-1,a=!0):(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=l+o-1),this.projectedModelLineLineCounts.setValue(n,o);return[a,l<=h?new hX(l,h-l+1):null,c<=d?new dX(c,d):null,u<=g?new cX(u,g):null]}acceptVersionId(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:0|e}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),o=this.model.guides.getActiveIndentGuide(n.lineNumber,s.lineNumber,r.lineNumber),a=this.convertModelPositionToViewPosition(o.startLineNumber,1),l=this.convertModelPositionToViewPosition(o.endLineNumber,this.model.getLineMaxColumn(o.endLineNumber));return{startLineNumber:a.lineNumber,endLineNumber:l.lineNumber,indent:o.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,n=t.remainder;return new nY(i+1,n)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new OA.y(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new OA.y(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),s=new Array;let r=this.getModelStartPositionOfViewLine(i),o=new Array;for(let a=i.modelLineNumber;a<=n.modelLineNumber;a++){const e=this.modelLineProjections[a-1];if(e.isVisible()){const t=a===i.modelLineNumber?i.modelLineWrappedLineIdx:0,s=a===n.modelLineNumber?n.modelLineWrappedLineIdx+1:e.getViewLineCount();for(let e=t;e<s;e++)o.push(new nY(a,e))}if(!e.isVisible()&&r){const e=new OA.y(a-1,this.model.getLineMaxColumn(a-1)+1),t=JM.Q.fromPositions(r,e);s.push(new sY(t,o)),o=[],r=null}else e.isVisible()&&!r&&(r=new OA.y(a,1))}if(r){const e=JM.Q.fromPositions(r,this.getModelEndPositionOfViewLine(n));s.push(new sY(e,o))}return s}getViewLinesBracketGuides(e,t,i,n){const s=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(const o of this.getViewLineInfosGroupedByModelRanges(e,t)){const e=o.modelRange.startLineNumber,t=this.model.guides.getLinesBracketGuides(e,o.modelRange.endLineNumber,s,n);for(const i of o.viewLines){const n=t[i.modelLineNumber-e].map((e=>{if(-1!==e.forWrappedLinesAfterColumn){if(this.modelLineProjections[i.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesAfterColumn).lineNumber>=i.modelLineWrappedLineIdx)return}if(-1!==e.forWrappedLinesBeforeOrAtColumn){if(this.modelLineProjections[i.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesBeforeOrAtColumn).lineNumber<i.modelLineWrappedLineIdx)return}if(!e.horizontalLine)return e;let t=-1;if(-1!==e.column){const n=this.modelLineProjections[i.modelLineNumber-1].getViewPositionOfModelPosition(0,e.column);if(n.lineNumber===i.modelLineWrappedLineIdx)t=n.column;else if(n.lineNumber<i.modelLineWrappedLineIdx)t=this.getMinColumnOfViewLine(i);else if(n.lineNumber>i.modelLineWrappedLineIdx)return}const n=this.convertModelPositionToViewPosition(i.modelLineNumber,e.horizontalLine.endColumn),s=this.modelLineProjections[i.modelLineNumber-1].getViewPositionOfModelPosition(0,e.horizontalLine.endColumn);return s.lineNumber===i.modelLineWrappedLineIdx?new vq.TH(e.visibleColumn,t,e.className,new vq.pv(e.horizontalLine.top,n.column),-1,-1):s.lineNumber<i.modelLineWrappedLineIdx||-1!==e.visibleColumn?void 0:new vq.TH(e.visibleColumn,t,e.className,new vq.pv(e.horizontalLine.top,this.getMaxColumnOfViewLine(i)),-1,-1)}));r.push(n.filter((e=>!!e)))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const r=[],o=[],a=i.lineNumber-1,l=n.lineNumber-1;let h=null;for(let g=a;g<=l;g++){const e=this.modelLineProjections[g];if(e.isVisible()){const t=e.getViewLineNumberOfModelPosition(0,g===a?i.column:1),n=e.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),s=n-t+1;let l=0;s>1&&1===e.getViewLineMinColumn(this.model,g+1,n)&&(l=0===t?1:2),r.push(s),o.push(l),null===h&&(h=new OA.y(g+1,0))}else null!==h&&(s=s.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,g)),h=null)}null!==h&&(s=s.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,n.lineNumber)),h=null);const c=t-e+1,d=new Array(c);let u=0;for(let g=0,p=s.length;g<p;g++){let e=s[g];const t=Math.min(c-u,r[g]),i=o[g];let n;n=2===i?0:1===i?1:t;for(let s=0;s<t;s++)s===n&&(e=0),d[u++]=e}return d}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const r=n.index,o=n.remainder,a=[];for(let l=r,h=this.model.getLineCount();l<h;l++){const n=this.modelLineProjections[l];if(!n.isVisible())continue;const h=l===r?o:0;let c=n.getViewLineCount()-h,d=!1;if(s+c>t&&(d=!0,c=t-s+1),n.getViewLinesData(this.model,l+1,h,c,s-e,i,a),s+=c,d)break}return a}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const n=this.projectedModelLineLineCounts.getIndexOf(e-1),s=n.index,r=n.remainder,o=this.modelLineProjections[s],a=o.getViewLineMinColumn(this.model,s+1,r),l=o.getViewLineMaxColumn(this.model,s+1,r);t<a&&(t=a),t>l&&(t=l);const h=o.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new OA.y(s+1,h)).equals(i)?new OA.y(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new JM.Q(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),n=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new OA.y(i.modelLineNumber,n))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new JM.Q(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this.model.validatePosition(new OA.y(e,t)),o=r.lineNumber,a=r.column;let l=o-1,h=!1;if(s)for(;l<this.modelLineProjections.length&&!this.modelLineProjections[l].isVisible();)l++,h=!0;else for(;l>0&&!this.modelLineProjections[l].isVisible();)l--,h=!0;if(0===l&&!this.modelLineProjections[l].isVisible())return new OA.y(n?0:1,1);const c=1+this.projectedModelLineLineCounts.getPrefixSum(l);let d;return d=h?s?this.modelLineProjections[l].getViewPositionOfModelPosition(c,1,i):this.modelLineProjections[l].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(l+1),i):this.modelLineProjections[o-1].getViewPositionOfModelPosition(c,a,i),d}convertModelRangeToViewRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return JM.Q.fromPositions(i)}{const t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new JM.Q(t.lineNumber,t.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const e=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(e,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(0===i&&!this.modelLineProjections[i].isVisible())return 1;const n=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,n,s){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new JM.Q(r.lineNumber,1,o.lineNumber,o.column),t,i,n,s);let a=[];const l=r.lineNumber-1,h=o.lineNumber-1;let c=null;for(let p=l;p<=h;p++){if(this.modelLineProjections[p].isVisible())null===c&&(c=new OA.y(p+1,p===l?r.column:1));else if(null!==c){const e=this.model.getLineMaxColumn(p);a=a.concat(this.model.getDecorationsInRange(new JM.Q(c.lineNumber,c.column,p,e),t,i,n)),c=null}}null!==c&&(a=a.concat(this.model.getDecorationsInRange(new JM.Q(c.lineNumber,c.column,o.lineNumber,o.column),t,i,n)),c=null),a.sort(((e,t)=>{const i=JM.Q.compareRangesUsingStarts(e.range,t.range);return 0===i?e.id<t.id?-1:e.id>t.id?1:0:i}));const d=[];let u=0,g=null;for(const p of a){const e=p.id;g!==e&&(g=e,d[u++]=p)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return 0===t.modelLineWrappedLineIdx?this.model.getLineIndentColumn(t.modelLineNumber):0}}class nY{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class sY{constructor(e,t){this.modelRange=e,this.viewLines=t}}class rY{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,n){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,n)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class oY{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new aY(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new cX(t,i)}onModelLinesInserted(e,t,i,n){return new dX(t,i)}onModelLineChanged(e,t,i){return[!1,new hX(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,n=new Array(i);for(let s=0;s<i;s++)n[s]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new JU(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);const s=[];for(let r=e;r<=t;r++){const t=r-e;s[t]=i[t]?this.getViewLineData(r):null}return s}getDecorationsInRange(e,t,i,n,s){return this.model.getDecorationsInRange(e,t,i,n,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class aY{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const lY=IU.ZS.Right;class hY{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*lY/8))}reset(e){const t=Math.ceil((e+1)*lY/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let n=t.startLineNumber;n<=t.endLineNumber;n++){const t=lY*n+(e-1);this.lanes[t>>>3]|=1<<t%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(n))}}getLanesAtLine(e){const t=[];let i=lY*e;for(let n=0;n<lY;n++)(this.persist&1<<n||this.lanes[i>>>3]&1<<i%8)&&t.push(n+1),i++;return t.length?t:[IU.ZS.Center]}countAtLine(e){let t=lY*e,i=0;for(let n=0;n<lY;n++)(this.persist&1<<n||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}class cY extends Mx.jG{constructor(e,t,i,n,s,r,o,a,l,h){if(super(),this.languageConfigurationService=o,this._themeService=a,this._attachedView=l,this._transactionalTarget=h,this.hiddenAreasModel=new gY,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new vX,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new kK(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new sk.uC((()=>this._updateConfigurationViewLineCountNow()),0)),this._hasFocus=!1,this._viewportStart=dY.create(this.model),this.glyphLanes=new hY(0),this.model.isTooLargeForTokenization())this._lines=new oY(this.model);else{const e=this._configuration.options,t=e.get(50),i=e.get(140),r=e.get(147),o=e.get(139),a=e.get(130);this._lines=new iY(this._editorId,this.model,n,s,t,this.model.getOptions().tabSize,i,r.wrappingColumn,o,a)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new AX(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new jX(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll((e=>{e.scrollTopChanged&&this._handleVisibleLinesChanged(),e.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new gX(e)),this._eventDispatcher.emitOutgoingEvent(new CX(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),this._register(this.viewLayout.onDidContentSizeChange((e=>{this._eventDispatcher.emitOutgoingEvent(e)}))),this._decorations=new GX(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}}))),this._register(Tq.getInstance().onDidChange((()=>{this._eventDispatcher.emitSingleViewEvent(new mX)}))),this._register(this._themeService.onDidColorThemeChange((e=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new pX(e))}))),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new JM.Q(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new oX(e)),this._eventDispatcher.emitOutgoingEvent(new wX(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new eX)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new tX)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new OA.y(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new fY(t,this._viewportStart.startLineDelta)}return new fY(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),n=this._configuration.options,s=n.get(50),r=n.get(140),o=n.get(147),a=n.get(139),l=n.get(130);this._lines.setWrappingSettings(s,r,o.wrappingColumn,a,l)&&(e.emitViewEvent(new rX),e.emitViewEvent(new lX),e.emitViewEvent(new sX(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new sX(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new sX(null))),e.emitViewEvent(new iX(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),kK.shouldRecreate(t)&&(this.cursorConfig=new kK(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let i=!1,n=!1;const s=e instanceof TQ.Ic?e.rawContentChangedEvent.changes:e.changes,r=e instanceof TQ.Ic?e.rawContentChangedEvent.versionId:null,o=this._lines.createLineBreaksComputer();for(const e of s)switch(e.changeType){case 4:for(let t=0;t<e.detail.length;t++){const i=e.detail[t];let n=e.injectedTexts[t];n&&(n=n.filter((e=>!e.ownerId||e.ownerId===this._editorId))),o.addRequest(i,n,null)}break;case 2:{let t=null;e.injectedText&&(t=e.injectedText.filter((e=>!e.ownerId||e.ownerId===this._editorId))),o.addRequest(e.detail,t,null);break}}const a=o.finalize(),l=new OS.j3(a);for(const e of s)switch(e.changeType){case 1:this._lines.onModelFlushed(),t.emitViewEvent(new rX),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break;case 3:{const n=this._lines.onModelLinesDeleted(r,e.fromLineNumber,e.toLineNumber);null!==n&&(t.emitViewEvent(n),this.viewLayout.onLinesDeleted(n.fromLineNumber,n.toLineNumber)),i=!0;break}case 4:{const n=l.takeCount(e.detail.length),s=this._lines.onModelLinesInserted(r,e.fromLineNumber,e.toLineNumber,n);null!==s&&(t.emitViewEvent(s),this.viewLayout.onLinesInserted(s.fromLineNumber,s.toLineNumber)),i=!0;break}case 2:{const i=l.dequeue(),[s,o,a,h]=this._lines.onModelLineChanged(r,e.lineNumber,i);n=s,o&&t.emitViewEvent(o),a&&(t.emitViewEvent(a),this.viewLayout.onLinesInserted(a.fromLineNumber,a.toLineNumber)),h&&(t.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber));break}}null!==r&&this._lines.acceptVersionId(r),this.viewLayout.onHeightMaybeChanged(),!i&&n&&(t.emitViewEvent(new lX),t.emitViewEvent(new sX(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const e=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(e){const t=this.coordinatesConverter.convertModelPositionToViewPosition(e.getStartPosition()),i=this.viewLayout.getVerticalOffsetForLineNumber(t.lineNumber);this.viewLayout.setScrollPosition({scrollTop:i+this._viewportStart.startLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();e instanceof TQ.Ic&&t.emitOutgoingEvent(new DX(e.contentChangedEvent)),this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()}))),this._register(this.model.onDidChangeTokens((e=>{const t=[];for(let i=0,n=e.ranges.length;i<n;i++){const n=e.ranges[i],s=this.coordinatesConverter.convertModelPositionToViewPosition(new OA.y(n.fromLineNumber,1)).lineNumber,r=this.coordinatesConverter.convertModelPositionToViewPosition(new OA.y(n.toLineNumber,this.model.getLineMaxColumn(n.toLineNumber))).lineNumber;t[i]={fromLineNumber:s,toLineNumber:r}}this._eventDispatcher.emitSingleViewEvent(new fX(t)),this._eventDispatcher.emitOutgoingEvent(new IX(e))}))),this._register(this.model.onDidChangeLanguageConfiguration((e=>{this._eventDispatcher.emitSingleViewEvent(new aX),this.cursorConfig=new kK(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new TX(e))}))),this._register(this.model.onDidChangeLanguage((e=>{this.cursorConfig=new kK(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new MX(e))}))),this._register(this.model.onDidChangeOptions((e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const e=this._eventDispatcher.beginEmitViewEvents();e.emitViewEvent(new rX),e.emitViewEvent(new lX),e.emitViewEvent(new sX(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new kK(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new NX(e))}))),this._register(this.model.onDidChangeDecorations((e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new sX(e)),this._eventDispatcher.emitOutgoingEvent(new EX(e))})))}setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const n=this._captureStableViewport();let s=!1;try{const e=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(i),s&&(e.emitViewEvent(new rX),e.emitViewEvent(new lX),e.emitViewEvent(new sX(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const t=n.viewportStartModelPosition?.lineNumber;t&&i.some((e=>e.startLineNumber<=t&&t<=e.endLineNumber))||n.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new xX)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),s=Math.max(1,n.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new JM.Q(s,this.getLineMinColumn(s),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(0===i.length)return[t];const n=[];let s=0,r=t.startLineNumber,o=t.startColumn;const a=t.endLineNumber,l=t.endColumn;for(let h=0,c=i.length;h<c;h++){const e=i[h].startLineNumber,t=i[h].endLineNumber;t<r||(e>a||(r<e&&(n[s++]=new JM.Q(r,o,e-1,this.model.getLineMaxColumn(e-1))),r=t+1,o=1))}return(r<a||r===a&&o<l)&&(n[s++]=new JM.Q(r,o,a,l)),n}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new JM.Q(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new JM.Q(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new OA.y(i,this.getLineMinColumn(i))),s=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:s}}reduceRestoreState(e){if("undefined"===typeof e.firstPosition)return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Tx.HG(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Tx.lT(this.getLineContent(e));return-1===t?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const i=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,i)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map((t=>t.toInlineDecoration(e)))]),new ej(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,n,r.tokens,t,s,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const n=this._lines.getViewLinesData(e,t,i);return new ZU(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,dx(this._configuration.options)),i=new uY;for(const n of t){const t=n.options,s=t.overviewRuler;if(!s)continue;const r=s.position;if(0===r)continue;const o=s.getColor(e.value),a=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),l=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(o,t.zIndex,a,l,r)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const e=t.options.overviewRuler;e?.invalidateCachedColor();const i=t.options.minimap;i?.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),n=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(n)}deduceModelPositionRelativeToViewPosition(e,t,i){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=i:t+=i);const s=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(s)}getPlainTextToCopy(e,t,i){const n=i?"\r\n":this.model.getEOL();(e=e.slice(0)).sort(JM.Q.compareRangesUsingStarts);let s=!1,r=!1;for(const a of e)a.isEmpty()?s=!0:r=!0;if(!r){if(!t)return"";const i=e.map((e=>e.startLineNumber));let s="";for(let e=0;e<i.length;e++)e>0&&i[e-1]===i[e]||(s+=this.model.getLineContent(i[e])+n);return s}if(s&&t){const t=[];let n=0;for(const s of e){const e=s.startLineNumber;s.isEmpty()?e!==n&&t.push(this.model.getLineContent(e)):t.push(this.model.getValueInRange(s,i?2:0)),n=e}return 1===t.length?t[0]:t}const o=[];for(const a of e)a.isEmpty()||o.push(this.model.getValueInRange(a,i?2:0));return 1===o.length?o[0]:o}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===II.vH)return null;if(1!==e.length)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;const e=n.startLineNumber;n=new JM.Q(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}const s=this._configuration.options.get(50),r=this._getColorMap();let o;if(/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Cx.fontFamily)o=Cx.fontFamily;else{o=s.fontFamily,o=o.replace(/"/g,"'");if(!/[,']/.test(o)){/[+ ]/.test(o)&&(o=`'${o}'`)}o=`${o}, ${Cx.fontFamily}`}return{mode:i,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${o};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,r)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn,o=this.getTabSize();let a="";for(let l=i;l<=s;l++){const e=this.model.tokenization.getLineTokens(l),h=e.getLineContent(),c=l===i?n-1:0,d=l===s?r-1:h.length;a+=""===h?"<br>":FI(h,e.inflate(),t,c,d,o,BS.uF)}return a}_getColorMap(){const e=RI.dG.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=WR.Q1.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector((n=>this._cursor.setStates(n,e,t,i)))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._withViewEventsCollector((n=>this._cursor.setSelections(n,e,t,i)))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector((t=>this._cursor.restoreState(t,e)))}_executeCursorEdit(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new LX):this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit((n=>this._cursor.executeEdits(n,e,t,i)))}startComposition(){this._executeCursorEdit((e=>this._cursor.startComposition(e)))}endComposition(e){this._executeCursorEdit((t=>this._cursor.endComposition(t,e)))}type(e,t){this._executeCursorEdit((i=>this._cursor.type(i,e,t)))}compositionType(e,t,i,n,s){this._executeCursorEdit((r=>this._cursor.compositionType(r,e,t,i,n,s)))}paste(e,t,i,n){this._executeCursorEdit((s=>this._cursor.paste(s,e,t,i,n)))}cut(e){this._executeCursorEdit((t=>this._cursor.cut(t,e)))}executeCommand(e,t){this._executeCursorEdit((i=>this._cursor.executeCommand(i,e,t)))}executeCommands(e,t){this._executeCursorEdit((i=>this._cursor.executeCommands(i,e,t)))}revealAllCursors(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((n=>this._cursor.revealAll(n,e,i,0,t,0)))}revealPrimaryCursor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((n=>this._cursor.revealPrimary(n,e,i,0,t,0)))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new JM.Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new uX(e,!1,i,null,0,!0,0))))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new JM.Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new uX(e,!1,i,null,0,!0,0))))}revealRange(e,t,i,n,s){this._withViewEventsCollector((r=>r.emitViewEvent(new uX(e,!1,i,null,n,t,s))))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new _X),this._eventDispatcher.emitOutgoingEvent(new SX))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges((()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}))}batchEvents(e){this._withViewEventsCollector((()=>{e()}))}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class dY{static create(e){const t=e._setTrackedRange(null,new JM.Q(1,1,1,1),1);return new dY(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,n,s){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=n,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new OA.y(t,e.getLineMinColumn(t))),n=e.model._setTrackedRange(this._modelTrackedRange,new JM.Q(i.lineNumber,i.column,i.lineNumber,i.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=n,this._startLineDelta=r-s}invalidate(){this._isValid=!1}}class uY{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,s){const r=this._asMap[e];if(r){const e=r.data,t=e[e.length-3],o=e[e.length-1];if(t===s&&o+1>=i)return void(n>o&&(e[e.length-1]=n));e.push(s,i,n)}else{const r=new sj(e,t,[s,i,n]);this._asMap[e]=r,this.asArray.push(r)}}}class gY{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&pY(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce(((e,t)=>function(e,t){const i=[];let n=0,s=0;for(;n<e.length&&s<t.length;){const r=e[n],o=t[s];if(r.endLineNumber<o.startLineNumber-1)i.push(e[n++]);else if(o.endLineNumber<r.startLineNumber-1)i.push(t[s++]);else{const e=Math.min(r.startLineNumber,o.startLineNumber),t=Math.max(r.endLineNumber,o.endLineNumber);i.push(new JM.Q(e,1,t,1)),n++,s++}}for(;n<e.length;)i.push(e[n++]);for(;s<t.length;)i.push(t[s++]);return i}(e,t)),[]);return pY(this.ranges,e)||(this.ranges=e),this.ranges}}function pY(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].equalsRange(t[i]))return!1;return!0}class fY{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),n=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:n+this.startLineDelta},1)}}var mY,_Y=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},vY=function(e,t){return function(i,n){t(i,n,e)}};let bY=class extends Mx.jG{static#e=(()=>mY=this)();static#t=(()=>this.dropIntoEditorDecorationOptions=BQ.kI.register({description:"workbench-dnd-target",className:"dnd-target"}))();get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,n,s,r,o,a,l,h,c,d){super(),this.languageConfigurationService=c,this._deliveryQueue=(0,rk.Qy)(),this._contributions=this._register(new OQ),this._onDidDispose=this._register(new rk.vl),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new SY(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new CY({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new CY({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new SY(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new SY(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new SY(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new SY(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new SY(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new SY(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new SY(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new SY(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new SY(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new SY(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new rk.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new rk.vl),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new rk.vl),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const u={...t};let g;this._domElement=e,this._overflowWidgetsDomNode=u.overflowWidgetsDomNode,delete u.overflowWidgetsDomNode,this._id=++yY,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?kM.SimpleEditorContext:kM.EditorContext),u,h)),this._register(this._configuration.onDidChange((e=>{this._onDidChangeConfiguration.fire(e);const t=this._configuration.options;if(e.hasChanged(146)){const e=t.get(146);this._onDidLayoutChange.fire(e)}}))),this._contextKeyService=this._register(o.createScoped(this._domElement)),this._notificationService=l,this._codeEditorService=s,this._commandService=r,this._themeService=a,this._register(new xY(this,this._contextKeyService)),this._register(new kY(this,this._contextKeyService,d)),this._instantiationService=this._register(n.createChild(new UH([mM.fN,this._contextKeyService]))),this._modelData=null,this._focusTracker=new LY(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}))),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={},g=Array.isArray(i.contributions)?i.contributions:IM.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const f of IM.getEditorActions()){if(this._actions.has(f.id)){(0,Ux.dz)(new Error(`Cannot have two actions with the same id ${f.id}`));continue}const e=new FQ(f.id,f.label,f.alias,f.metadata,f.precondition??void 0,(e=>this._instantiationService.invokeFunction((t=>Promise.resolve(f.runEditorCommand(t,this,e))))),this._contextKeyService);this._actions.set(e.id,e)}const p=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new RE(this._domElement,{onDragOver:e=>{if(!p())return;const t=this.getTargetAtClientPoint(e.clientX,e.clientY);t?.position&&this.showDropIndicatorAt(t.position)},onDrop:async e=>{if(!p())return;if(this.removeDropIndicator(),!e.dataTransfer)return;const t=this.getTargetAtClientPoint(e.clientX,e.clientY);t?.position&&this._onDropIntoEditor.fire({position:t.position,event:e})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){this._modelData?.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,n){return new Wj(e,t,i,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return NU.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?VK.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";const t=!(!e||!e.preserveBOM);let i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{this._beginUpdate();const t=e;if(null===this._modelData&&null===t)return;if(this._modelData&&this._modelData.model===t)return;const i={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:t?.uri||null};this._onWillChangeModel.fire(i);const n=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(s),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){const s=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}getTopForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?mY._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?mY._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}getBottomForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return mY._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){this._modelData?.viewModel.setHiddenAreas(e.map((e=>JM.Q.lift(e))),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return DG.A.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!OA.y.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!JM.Q.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",i,r,t,n)}revealLine(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,t)}revealLineInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,t)}revealLineNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,t)}_revealLine(e,t,i){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new JM.Q(e,1,e,1),t,!1,i)}revealPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,t)}revealPositionInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,t)}revealPositionNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!OA.y.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new JM.Q(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=jG.L.isISelection(e),n=JM.Q.isIRange(e);if(!i&&!n)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){const i={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(i,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new jG.L(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,0,i)}revealLinesInCenter(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,2,i)}revealLinesNearTop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if("number"!==typeof e||"number"!==typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new JM.Q(e,1,t,1),i,!1,n)}revealRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,t)}revealRangeNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,t)}revealRangeAtTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!JM.Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(JM.Q.lift(e),t,i,n)}setSelections(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let t=0,i=e.length;t<i;t++)if(!jG.L.isISelection(e[t]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const e=t.cursorState;Array.isArray(e)?e.length>0&&this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]),this._contributions.restoreViewState(t.contributionsState||{});const i=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(i)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter((e=>e.isSupported())),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const t=i;return void this._type(e,t.text||"")}case"replacePreviousChar":{const t=i;return void this._compositionType(e,t.text||"",t.replaceCharCnt||0,0,0)}case"compositionType":{const t=i;return void this._compositionType(e,t.text||"",t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0)}case"paste":{const t=i;return void this._paste(e,t.text||"",t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null,t.clipboardEvent)}case"cut":return void this._cut(e)}const n=this.getAction(t);if(n)return void Promise.resolve(n.run(i)).then(void 0,Ux.dz);if(!this._modelData)return;if(this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}_compositionType(e,t,i,n,s){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,s,e)}_paste(e,t,i,n,s,r){if(!this._modelData)return;const o=this._modelData.viewModel,a=o.getSelection().getStartPosition();o.paste(t,i,n,e);const l=o.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({clipboardEvent:r,range:new JM.Q(a.lineNumber,a.column,l.lineNumber,l.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const n=IM.getEditorCommand(t);return!!n&&((i=i||{}).source=e,this._instantiationService.invokeFunction((e=>{Promise.resolve(n.runEditorCommand(e,this,i)).then(void 0,Ux.dz)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(92)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(92)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,t,i){if(!this._modelData)return!1;if(this._configuration.options.get(92))return!1;let n;return n=i?Array.isArray(i)?()=>i:i:()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new EY(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,dx(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,dx(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((t=>{t.deltaDecorations(e,[])}))}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations((e=>e.deltaDecorations(t,[]))),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._configuration.observeContainer(e),t||this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const e=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(146);return{top:mY._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft(),height:i.get(67)}}getOffsetForColumn(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.viewModel.batchEvents((()=>{this._modelData.view.render(!0,e)}))}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){jE(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),n=new cY(this._id,this._configuration,e,NQ.create(fL(this._domElement)),VQ.create(this._configuration.options),(e=>IL(fL(this._domElement),e)),this.languageConfigurationService,this._themeService,i,{batchChanges:e=>{try{return this._beginUpdate(),e()}finally{this._endUpdate()}}});t.push(e.onWillDispose((()=>this.setModel(null)))),t.push(n.onEvent((t=>{switch(t.kind){case 0:this._onDidContentSizeChange.fire(t);break;case 1:this._editorTextFocus.setValue(t.hasFocus);break;case 2:this._onDidScrollChange.fire(t);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(t.reachedMaxCursorCount){const e=this.getOption(80),t=WS.kg("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",e);this._notificationService.prompt(RT.Warning,t,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:WS.kg("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const e=[];for(let s=0,r=t.selections.length;s<r;s++)e[s]=t.selections[s].getPosition();const i={position:e[0],secondaryPositions:e.slice(1),reason:t.reason,source:t.source};this._onDidChangeCursorPosition.fire(i);const n={selection:t.selections[0],secondarySelections:t.selections.slice(1),modelVersionId:t.modelVersionId,oldSelections:t.oldSelections,oldModelVersionId:t.oldModelVersionId,source:t.source,reason:t.reason};this._onDidChangeCursorSelection.fire(n);break}case 7:this._onDidChangeModelDecorations.fire(t.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(t.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(t.event);break;case 10:this._onDidChangeModelContent.fire(t.event);break;case 11:this._onDidChangeModelOptions.fire(t.event);break;case 12:this._onDidChangeModelTokens.fire(t.event)}})));const[s,r]=this._createView(n);if(r){this._domElement.appendChild(s.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.addContentWidget(this._contentWidgets[i])}t=Object.keys(this._overlayWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.addOverlayWidget(this._overlayWidgets[i])}t=Object.keys(this._glyphMarginWidgets);for(let e=0,i=t.length;e<i;e++){const i=t[e];s.addGlyphMarginWidget(this._glyphMarginWidgets[i])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new wY(e,n,s,r,t,i)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,i,n)=>{this._paste("keyboard",e,t,i,n)},type:e=>{this._type("keyboard",e)},compositionType:(e,t,i,n)=>{this._compositionType("keyboard",e,t,i,n)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,t,i,n)=>{const s={text:e,pasteOnNewLine:t,multicursorText:i,mode:n};this._commandService.executeCommand("paste",s)},type:e=>{const t={text:e};this._commandService.executeCommand("type",t)},compositionType:(e,t,i,n)=>{if(i||n){const s={text:e,replacePrevCharCnt:t,replaceNextCharCnt:i,positionDelta:n};this._commandService.executeCommand("compositionType",s)}else{const i={text:e,replaceCharCnt:t};this._commandService.executeCommand("replacePreviousChar",i)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new X$(e.coordinatesConverter);i.onKeyDown=e=>this._onKeyDown.fire(e),i.onKeyUp=e=>this._onKeyUp.fire(e),i.onContextMenu=e=>this._onContextMenu.fire(e),i.onMouseMove=e=>this._onMouseMove.fire(e),i.onMouseLeave=e=>this._onMouseLeave.fire(e),i.onMouseDown=e=>this._onMouseDown.fire(e),i.onMouseUp=e=>this._onMouseUp.fire(e),i.onMouseDrag=e=>this._onMouseDrag.fire(e),i.onMouseDrop=e=>this._onMouseDrop.fire(e),i.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),i.onMouseWheel=e=>this._onMouseWheel.fire(e);return[new wQ(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}showDropIndicatorAt(e){const t=[{range:new JM.Q(e.lineNumber,e.column,e.lineNumber,e.column),options:mY.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,1===this._updateCounter&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,0===this._updateCounter&&this._onEndUpdate.fire()}};bY=mY=_Y([vY(3,eM._Y),vY(4,tM),vY(5,pM),vY(6,mM.fN),vY(7,bT.Gy),vY(8,PT),vY(9,GI),vY(10,eT.JZ),vY(11,sT.ILanguageFeaturesService)],bY);let yY=0;class wY{constructor(e,t,i,n,s,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=s,this.attachedView=r}dispose(){(0,Mx.AS)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class CY extends Mx.jG{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new rk.vl(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new rk.vl(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class SY extends rk.vl{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class xY extends Mx.jG{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=D$.editorSimpleInput.bindTo(t),this._editorFocus=D$.focus.bindTo(t),this._textInputFocus=D$.textInputFocus.bindTo(t),this._editorTextFocus=D$.editorTextFocus.bindTo(t),this._tabMovesFocus=D$.tabMovesFocus.bindTo(t),this._editorReadonly=D$.readOnly.bindTo(t),this._inDiffEditor=D$.inDiffEditor.bindTo(t),this._editorColumnSelection=D$.columnSelection.bindTo(t),this._hasMultipleSelections=D$.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=D$.hasNonEmptySelection.bindTo(t),this._canUndo=D$.canUndo.bindTo(t),this._canRedo=D$.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._register(Bj.onDidChangeTabFocus((e=>this._tabMovesFocus.set(e)))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(Bj.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((e=>!e.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class kY extends Mx.jG{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=D$.languageId.bindTo(t),this._hasCompletionItemProvider=D$.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=D$.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=D$.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=D$.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=D$.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=D$.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=D$.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=D$.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=D$.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=D$.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=D$.hasReferenceProvider.bindTo(t),this._hasRenameProvider=D$.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=D$.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=D$.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=D$.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=D$.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=D$.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=D$.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=D$.isInEmbeddedEditor.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(i.completionProvider.onDidChange(n)),this._register(i.codeActionProvider.onDidChange(n)),this._register(i.codeLensProvider.onDidChange(n)),this._register(i.definitionProvider.onDidChange(n)),this._register(i.declarationProvider.onDidChange(n)),this._register(i.implementationProvider.onDidChange(n)),this._register(i.typeDefinitionProvider.onDidChange(n)),this._register(i.hoverProvider.onDidChange(n)),this._register(i.documentHighlightProvider.onDidChange(n)),this._register(i.documentSymbolProvider.onDidChange(n)),this._register(i.referenceProvider.onDidChange(n)),this._register(i.renameProvider.onDidChange(n)),this._register(i.documentFormattingEditProvider.onDidChange(n)),this._register(i.documentRangeFormattingEditProvider.onDidChange(n)),this._register(i.signatureHelpProvider.onDidChange(n)),this._register(i.inlayHintsProvider.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()}))}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===uL.ny.walkThroughSnippet||e.uri.scheme===uL.ny.vscodeChatCodeBlock)})):this.reset()}}class LY extends Mx.jG{constructor(e,t){super(),this._onChange=this._register(new rk.vl),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(_E(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus((()=>{this._hasDomElementFocus=!0,this._update()}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasDomElementFocus=!1,this._update()}))),t&&(this._overflowWidgetsDomNode=this._register(_E(t)),this._register(this._overflowWidgetsDomNode.onDidFocus((()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()}))),this._register(this._overflowWidgetsDomNode.onDidBlur((()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()}))))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class EY{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations((i=>{this._isChangingDecorations||e.call(t,i)}),i)}getRange(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){0!==this._decorationIds.length&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations((t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations((i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)}))}finally{this._isChangingDecorations=!1}return t}}const MY=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),TY=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function DY(e){return MY+encodeURIComponent(e.toString())+TY}const NY=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),IY=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,bT.zy)(((e,t)=>{const i=e.getColor(ZT.Rbi);i&&t.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${DY(i)}") repeat-x bottom left; }`);const n=e.getColor(ZT.Hng);n&&t.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${DY(n)}") repeat-x bottom left; }`);const s=e.getColor(ZT.pOz);s&&t.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${DY(s)}") repeat-x bottom left; }`);const r=e.getColor(ZT.i61);r&&t.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${function(e){return NY+encodeURIComponent(e.toString())+IY}(r)}") no-repeat bottom left; }`);const o=e.getColor(RW.yw);o&&t.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)}));var AY=i(8617);class RY{static capture(e){if(0===e.getScrollTop()||e.hasPendingScrollAnimation())return new RY(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-s}return new RY(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,n,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=n,this._cursorPosition=s}restore(e){if((this._initialContentHeight!==e.getContentHeight()||this._initialScrollTop!==e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}var PY=i(3724);function OY(e,t){const i=new Mx.Cm,n=e.createDecorationsCollection();return i.add((0,sP.zL)({debugName:()=>`Apply decorations from ${t.debugName}`},(e=>{const i=t.read(e);n.set(i)}))),i.add({dispose:()=>{n.clear()}}),i}function FY(e,t){return e.appendChild(t),(0,Mx.s)((()=>{t.remove()}))}class BY extends Mx.jG{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new Aj(e,t)),this._width=(0,sP.FY)(this,this.elementSizeObserver.getWidth()),this._height=(0,sP.FY)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange((e=>(0,sP.Rn)((e=>{this._width.set(this.elementSizeObserver.getWidth(),e),this._height.set(this.elementSizeObserver.getHeight(),e)})))))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function zY(e,t,i){let n=t.get(),s=n,r=n;const o=(0,sP.FY)("animatedValue",n);let a=-1;let l;function h(){const t=Date.now()-a;var i,c,d,u;r=Math.floor((c=s,d=n-s,(i=t)===(u=300)?c+d:d*(1-Math.pow(2,-10*i/u))+c)),t<300?l=e.requestAnimationFrame(h):r=n,o.set(r,void 0)}return i.add((0,sP.Y)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(e,i)=>(e.didChange(t)&&(i.animate=i.animate||e.change),!0)},((i,o)=>{void 0!==l&&(e.cancelAnimationFrame(l),l=void 0),s=r,n=t.read(i),a=Date.now()-(o.animate?0:300),h()}))),o}class VY extends Mx.jG{constructor(e,t,i){super(),this._register(new HY(e,i)),this._register(UY(i,{height:t.actualHeight,top:t.actualTop}))}}class WY{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=(0,sP.FY)(this,void 0),this._actualHeight=(0,sP.FY)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=e=>{this._actualTop.set(e,void 0)},this.onComputedHeight=e=>{this._actualHeight.set(e,void 0)}}}class HY{static#e=(()=>this._counter=0)();constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId="managedOverlayWidget-"+HY._counter++,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function UY(e,t){return(0,sP.fm)((i=>{for(let[n,s]of Object.entries(t))s&&"object"===typeof s&&"read"in s&&(s=s.read(i)),"number"===typeof s&&(s=`${s}px`),n=n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),e.style[n]=s}))}function jY(e,t,i,n){const s=new Mx.Cm,r=[];return s.add((0,sP.yC)(((s,o)=>{const a=t.read(s),l=new Map,h=new Map;i&&i(!0),e.changeViewZones((e=>{for(const t of r)e.removeZone(t),n?.delete(t);r.length=0;for(const t of a){const i=e.addZone(t);t.setZoneId&&t.setZoneId(i),r.push(i),n?.add(i),l.set(t,i)}})),i&&i(!1),o.add((0,sP.Y)({createEmptyChangeSummary:()=>({zoneIds:[]}),handleChange(e,t){const i=h.get(e.changedObservable);return void 0!==i&&t.zoneIds.push(i),!0}},((t,n)=>{for(const e of a)e.onChange&&(h.set(e.onChange,l.get(e)),e.onChange.read(t));i&&i(!0),e.changeViewZones((e=>{for(const t of n.zoneIds)e.layoutZone(t)})),i&&i(!1)})))}))),s.add({dispose(){i&&i(!0),e.changeViewZones((e=>{for(const t of r)e.removeZone(t)})),n?.clear(),i&&i(!1)}}),s}function GY(e,t){const i=(0,XQ.Uk)(t,(t=>t.original.startLineNumber<=e.lineNumber));if(!i)return JM.Q.fromPositions(e);if(i.original.endLineNumberExclusive<=e.lineNumber){const t=e.lineNumber-i.original.endLineNumberExclusive+i.modified.endLineNumberExclusive;return JM.Q.fromPositions(new OA.y(t,e.column))}if(!i.innerChanges)return JM.Q.fromPositions(new OA.y(i.modified.startLineNumber,1));const n=(0,XQ.Uk)(i.innerChanges,(t=>t.originalRange.getStartPosition().isBeforeOrEqual(e)));if(!n){const t=e.lineNumber-i.original.startLineNumber+i.modified.startLineNumber;return JM.Q.fromPositions(new OA.y(t,e.column))}if(n.originalRange.containsPosition(e))return n.modifiedRange;{const t=(s=n.originalRange.getEndPosition(),r=e,s.lineNumber===r.lineNumber?new PY.W(0,r.column-s.column):new PY.W(r.lineNumber-s.lineNumber,r.column-1));return JM.Q.fromPositions(t.addToPosition(n.modifiedRange.getEndPosition()))}var s,r}class KY{static create(e){return new $Y(e,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}static createWithDisposable(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n=new Mx.Cm;return n.add(t),n.add(e),new $Y(e,n,i)}}class $Y extends KY{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new qY(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,0===this._refCount&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);-1!==t&&this._owners.splice(t,1)}}}class qY extends KY{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var QY=i(6807),XY=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},YY=function(e,t){return function(i,n){t(i,n,e)}};const ZY=UW("diff-review-insert",vD.W.add,(0,WS.kg)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),JY=UW("diff-review-remove",vD.W.remove,(0,WS.kg)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),eZ=UW("diff-review-close",vD.W.close,(0,WS.kg)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let tZ=class extends Mx.jG{static#e=(()=>this._ttPolicy=KM("diffReview",{createHTML:e=>e}))();constructor(e,t,i,n,s,r,o,a,l){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=n,this._width=s,this._height=r,this._diffs=o,this._models=a,this._instantiationService=l,this._state=(0,sP.rm)(this,((e,t)=>{const i=this._visible.read(e);if(this._parentNode.style.visibility=i?"visible":"hidden",!i)return null;const n=t.add(this._instantiationService.createInstance(iZ,this._diffs,this._models,this._setVisible,this._canClose));return{model:n,view:t.add(this._instantiationService.createInstance(cZ,this._parentNode,n,this._width,this._height,this._models))}})).recomputeInitiallyAndOnChange(this._store)}next(){(0,sP.Rn)((e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)}))}prev(){(0,sP.Rn)((e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)}))}close(){(0,sP.Rn)((e=>{this._setVisible(!1,e)}))}};tZ=XY([YY(8,eM._Y)],tZ);let iZ=class extends Mx.jG{constructor(e,t,i,n,s){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=n,this._accessibilitySignalService=s,this._groups=(0,sP.FY)(this,[]),this._currentGroupIdx=(0,sP.FY)(this,0),this._currentElementIdx=(0,sP.FY)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map(((e,t)=>this._groups.read(t)[e])),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map(((e,t)=>this.currentGroup.read(t)?.lines[e])),this._register((0,sP.fm)((e=>{const t=this._diffs.read(e);if(!t)return void this._groups.set([],void 0);const i=function(e,t,i){const n=[];for(const s of(0,OS.n)(e,((e,t)=>t.modified.startLineNumber-e.modified.endLineNumberExclusive<2*nZ))){const e=[];e.push(new oZ);const r=new aT.M(Math.max(1,s[0].original.startLineNumber-nZ),Math.min(s[s.length-1].original.endLineNumberExclusive+nZ,t+1)),o=new aT.M(Math.max(1,s[0].modified.startLineNumber-nZ),Math.min(s[s.length-1].modified.endLineNumberExclusive+nZ,i+1));(0,OS.pN)(s,((t,i)=>{const n=new aT.M(t?t.original.endLineNumberExclusive:r.startLineNumber,i?i.original.startLineNumber:r.endLineNumberExclusive),s=new aT.M(t?t.modified.endLineNumberExclusive:o.startLineNumber,i?i.modified.startLineNumber:o.endLineNumberExclusive);n.forEach((t=>{e.push(new hZ(t,s.startLineNumber+(t-n.startLineNumber)))})),i&&(i.original.forEach((t=>{e.push(new aZ(i,t))})),i.modified.forEach((t=>{e.push(new lZ(i,t))})))}));const a=s[0].modified.join(s[s.length-1].modified),l=s[0].original.join(s[s.length-1].original);n.push(new rZ(new oT.WL(a,l),e))}return n}(t,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());(0,sP.Rn)((e=>{const t=this._models.getModifiedPosition();if(t){const n=i.findIndex((e=>t?.lineNumber<e.range.modified.endLineNumberExclusive));-1!==n&&this._currentGroupIdx.set(n,e)}this._groups.set(i,e)}))}))),this._register((0,sP.fm)((e=>{const t=this.currentElement.read(e);t?.type===sZ.Deleted?this._accessibilitySignalService.playSignal(iU.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):t?.type===sZ.Added&&this._accessibilitySignalService.playSignal(iU.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),this._register((0,sP.fm)((e=>{const t=this.currentElement.read(e);if(t&&t.type!==sZ.Header){const e=t.modifiedLineNumber??t.diff.modified.startLineNumber;this._models.modifiedSetSelection(JM.Q.fromPositions(new OA.y(e,1)))}})))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||(0,sP.PO)(t,(t=>{this._currentGroupIdx.set(QY.L.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),t),this._currentElementIdx.set(0,t)}))}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||(0,sP.Rn)((i=>{this._currentElementIdx.set(QY.L.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)}))}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);-1!==i&&(0,sP.Rn)((e=>{this._currentElementIdx.set(i,e)}))}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===sZ.Deleted?this._models.originalReveal(JM.Q.fromPositions(new OA.y(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==sZ.Header?JM.Q.fromPositions(new OA.y(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};iZ=XY([YY(4,JH)],iZ);const nZ=3;var sZ;!function(e){e[e.Header=0]="Header",e[e.Unchanged=1]="Unchanged",e[e.Deleted=2]="Deleted",e[e.Added=3]="Added"}(sZ||(sZ={}));class rZ{constructor(e,t){this.range=e,this.lines=t}}class oZ{constructor(){this.type=sZ.Header}}class aZ{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=sZ.Deleted,this.modifiedLineNumber=void 0}}class lZ{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=sZ.Added,this.originalLineNumber=void 0}}class hZ{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=sZ.Unchanged}}let cZ=class extends Mx.jG{constructor(e,t,i,n,s,r){super(),this._element=e,this._model=t,this._width=i,this._height=n,this._models=s,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const o=document.createElement("div");o.className="diff-review-actions",this._actionBar=this._register(new vO(o)),this._register((0,sP.fm)((e=>{this._actionBar.clear(),this._model.canClose.read(e)&&this._actionBar.push(new sM("diffreview.close",(0,WS.kg)("label.close","Close"),"close-diff-review "+cM.L.asClassName(eZ),!0,(async()=>t.close())),{label:!1,icon:!0})}))),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new ND(this._content,{})),yE(this.domNode,this._scrollbar.getDomNode(),o),this._register((0,sP.fm)((e=>{this._height.read(e),this._width.read(e),this._scrollbar.scanDomNode()}))),this._register((0,Mx.s)((()=>{yE(this.domNode)}))),this._register(UY(this.domNode,{width:this._width,height:this._height})),this._register(UY(this._content,{width:this._width,height:this._height})),this._register((0,sP.yC)(((e,t)=>{this._model.currentGroup.read(e),this._render(t)}))),this._register(TL(this.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this._model.revealCurrentElementInEditor())})))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",(0,WS.kg)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),jE(n,i.get(50)),yE(this._content,n);const s=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!s||!r)return;const o=s.getOptions(),a=r.getOptions(),l=i.get(67),h=this._model.currentGroup.get();for(const c of h?.lines||[]){if(!h)break;let d;if(c.type===sZ.Header){const e=document.createElement("div");e.className="diff-review-row",e.setAttribute("role","listitem");const t=h.range,i=this._model.currentGroupIndex.get(),n=this._model.groups.get().length,s=e=>0===e?(0,WS.kg)("no_lines_changed","no lines changed"):1===e?(0,WS.kg)("one_line_changed","1 line changed"):(0,WS.kg)("more_lines_changed","{0} lines changed",e),r=s(t.original.length),o=s(t.modified.length);e.setAttribute("aria-label",(0,WS.kg)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",i+1,n,t.original.startLineNumber,r,t.modified.startLineNumber,o));const a=document.createElement("div");a.className="diff-review-cell diff-review-summary",a.appendChild(document.createTextNode(`${i+1}/${n}: @@ -${t.original.startLineNumber},${t.original.length} +${t.modified.startLineNumber},${t.modified.length} @@`)),e.appendChild(a),d=e}else d=this._createRow(c,l,this._width.get(),t,s,o,i,r,a);n.appendChild(d);const u=(0,sP.un)((e=>this._model.currentElement.read(e)===c));e.add((0,sP.fm)((e=>{const t=u.read(e);d.tabIndex=t?0:-1,t&&d.focus()}))),e.add(EL(d,"focus",(()=>{this._model.goToLine(c)})))}this._scrollbar.scanDomNode()}_createRow(e,t,i,n,s,r,o,a,l){const h=n.get(146),c=h.glyphMarginWidth+h.lineNumbersWidth,d=o.get(146),u=10+d.glyphMarginWidth+d.lineNumbersWidth;let g="diff-review-row",p="";let f=null;switch(e.type){case sZ.Added:g="diff-review-row line-insert",p=" char-insert",f=ZY;break;case sZ.Deleted:g="diff-review-row line-delete",p=" char-delete",f=JY}const m=document.createElement("div");m.style.minWidth=i+"px",m.className=g,m.setAttribute("role","listitem"),m.ariaLevel="";const _=document.createElement("div");_.className="diff-review-cell",_.style.height=`${t}px`,m.appendChild(_);const v=document.createElement("span");v.style.width=c+"px",v.style.minWidth=c+"px",v.className="diff-review-line-number"+p,void 0!==e.originalLineNumber?v.appendChild(document.createTextNode(String(e.originalLineNumber))):v.innerText="\xa0",_.appendChild(v);const b=document.createElement("span");b.style.width=u+"px",b.style.minWidth=u+"px",b.style.paddingRight="10px",b.className="diff-review-line-number"+p,void 0!==e.modifiedLineNumber?b.appendChild(document.createTextNode(String(e.modifiedLineNumber))):b.innerText="\xa0",_.appendChild(b);const y=document.createElement("span");if(y.className="diff-review-spacer",f){const e=document.createElement("span");e.className=cM.L.asClassName(f),e.innerText="\xa0\xa0",y.appendChild(e)}else y.innerText="\xa0\xa0";let w;if(_.appendChild(y),void 0!==e.modifiedLineNumber){let t=this._getLineHtml(a,o,l.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);tZ._ttPolicy&&(t=tZ._ttPolicy.createHTML(t)),_.insertAdjacentHTML("beforeend",t),w=a.getLineContent(e.modifiedLineNumber)}else{let t=this._getLineHtml(s,n,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);tZ._ttPolicy&&(t=tZ._ttPolicy.createHTML(t)),_.insertAdjacentHTML("beforeend",t),w=s.getLineContent(e.originalLineNumber)}0===w.length&&(w=(0,WS.kg)("blankLine","blank"));let C="";switch(e.type){case sZ.Unchanged:C=e.originalLineNumber===e.modifiedLineNumber?(0,WS.kg)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",w,e.originalLineNumber):(0,WS.kg)("equalLine","{0} original line {1} modified line {2}",w,e.originalLineNumber,e.modifiedLineNumber);break;case sZ.Added:C=(0,WS.kg)("insertLine","+ {0} modified line {1}",w,e.modifiedLineNumber);break;case sZ.Deleted:C=(0,WS.kg)("deleteLine","- {0} original line {1}",w,e.originalLineNumber)}return m.setAttribute("aria-label",C),m}_getLineHtml(e,t,i,n,s){const r=e.getLineContent(n),o=t.get(50),a=AI.f.createEmpty(r,s),l=ej.isBasicASCII(r,e.mightContainNonBasicASCII()),h=ej.containsRTL(r,l,e.mightContainRTL());return $U(new WU(o.isMonospace&&!t.get(33),o.canUseHalfwidthRightwardsArrow,r,!1,l,h,0,a,[],i,0,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==ax.OFF,null)).html}};cZ=XY([YY(5,NI.L)],cZ);class dZ{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}(0,ZT.x1A)("diffEditor.move.border","#8b8b8b9c",(0,WS.kg)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),(0,ZT.x1A)("diffEditor.moveActive.border","#FFA500",(0,WS.kg)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),(0,ZT.x1A)("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},(0,WS.kg)("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const uZ=UW("diff-insert",vD.W.add,(0,WS.kg)("diffInsertIcon","Line decoration for inserts in the diff editor.")),gZ=UW("diff-remove",vD.W.remove,(0,WS.kg)("diffRemoveIcon","Line decoration for removals in the diff editor.")),pZ=BQ.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+cM.L.asClassName(uZ),marginClassName:"gutter-insert"}),fZ=BQ.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+cM.L.asClassName(gZ),marginClassName:"gutter-delete"}),mZ=BQ.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),_Z=BQ.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),vZ=BQ.kI.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),bZ=BQ.kI.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),yZ=BQ.kI.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),wZ=BQ.kI.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),CZ=BQ.kI.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),SZ=BQ.kI.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var xZ,kZ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},LZ=function(e,t){return function(i,n){t(i,n,e)}};const EZ=(0,eM.u1)("diffProviderFactoryService");let MZ=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(TZ,e)}};MZ=kZ([LZ(0,eM._Y)],MZ),(0,ST.v)(EZ,MZ,1);let TZ=class{static#e=(()=>xZ=this)();static#t=(()=>this.diffCache=new Map)();constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new rk.vl,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){this.diffAlgorithmOnDidChangeSubscription?.dispose()}async computeDiff(e,t,i,n){if("string"!==typeof this.diffAlgorithm)return this.diffAlgorithm.computeDiff(e,t,i,n);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return 1===t.getLineCount()&&1===t.getLineMaxColumn(1)?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new oT.wm(new aT.M(1,2),new aT.M(1,t.getLineCount()+1),[new oT.q6(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const s=JSON.stringify([e.uri.toString(),t.uri.toString()]),r=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),o=xZ.diffCache.get(s);if(o&&o.context===r)return o.result;const a=nT.W.create(),l=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),h=a.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:l?.quitEarly??!0,detectedMoves:i.computeMoves?l?.moves.length??0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!l)throw new Error("no diff result available");return xZ.diffCache.size>10&&xZ.diffCache.delete(xZ.diffCache.keys().next().value),xZ.diffCache.set(s,{result:l,context:r}),l}setOptions(e){let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription?.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!==typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange((()=>this.onDidChangeEventEmitter.fire()))),t=!0),t&&this.onDidChangeEventEmitter.fire()}};TZ=xZ=kZ([LZ(1,WO.IEditorWorkerService),LZ(2,NM)],TZ);var DZ=i(1138);function NZ(){return DZ._K&&!!DZ._K.VSCODE_DEV}function IZ(e){if(NZ()){const t=function(){AZ||(AZ=new Set);const e=globalThis;e.$hotReload_applyNewExports||(e.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const n of AZ){const e=n(t);e&&i.push(e)}if(i.length>0)return e=>{let t=!1;for(const n of i)n(e)&&(t=!0);return t}});return AZ}();return t.add(e),{dispose(){t.delete(e)}}}return{dispose(){}}}let AZ;function RZ(e,t){return function(e,t){if(NZ()){(0,sP.yQ)("reload",(t=>IZ((i=>{let{oldExports:n}=i;if([...Object.values(n)].some((t=>e.includes(t))))return e=>(t(void 0),!0)})))).read(t)}}([e],t),e}NZ()&&IZ((e=>{let{oldExports:t,newSrc:i,config:n}=e;if("patch-prototype"===n.mode)return e=>{for(const i in e){const n=e[i];if(console.log(`[hot-reload] Patching prototype methods of '${i}'`,{exportedItem:n}),"function"===typeof n&&n.prototype){const s=t[i];if(s){for(const e of Object.getOwnPropertyNames(n.prototype)){const t=Object.getOwnPropertyDescriptor(n.prototype,e),r=Object.getOwnPropertyDescriptor(s.prototype,e);t?.value?.toString()!==r?.value?.toString()&&console.log(`[hot-reload] Patching prototype method '${i}.${e}'`),Object.defineProperty(s.prototype,e,t)}e[i]=s}}}return!0}}));var PZ=i(3144),OZ=i(2739),FZ=i(1617),BZ=i(6061),zZ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},VZ=function(e,t){return function(i,n){t(i,n,e)}};let WZ=class extends Mx.jG{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=(0,sP.FY)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,sP.FY)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,sP.FY)(this,void 0),this.unchangedRegions=(0,sP.un)(this,(e=>this._options.hideUnchangedRegions.read(e)?this._unchangedRegions.read(e)?.regions??[]:((0,sP.Rn)((e=>{for(const t of this._unchangedRegions.get()?.regions||[])t.collapseAll(e)})),[]))),this.movedTextToCompare=(0,sP.FY)(this,void 0),this._activeMovedText=(0,sP.FY)(this,void 0),this._hoveredMovedText=(0,sP.FY)(this,void 0),this.activeMovedText=(0,sP.un)(this,(e=>this.movedTextToCompare.read(e)??this._hoveredMovedText.read(e)??this._activeMovedText.read(e))),this._cancellationTokenSource=new _A.Qi,this._diffProvider=(0,sP.un)(this,(e=>{const t=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(e)});return{diffProvider:t,onChangeSignal:(0,sP.yQ)("onDidChange",t.onDidChange)}})),this._register((0,Mx.s)((()=>this._cancellationTokenSource.cancel())));const n=(0,sP.Yd)("contentChangedSignal"),s=this._register(new sk.uC((()=>n.trigger(void 0)),200));this._register((0,sP.fm)((t=>{const i=this._unchangedRegions.read(t);if(!i||i.regions.some((e=>e.isDragged.read(t))))return;const n=i.originalDecorationIds.map((t=>e.original.getDecorationRange(t))).map((e=>e?aT.M.fromRangeInclusive(e):void 0)),s=i.modifiedDecorationIds.map((t=>e.modified.getDecorationRange(t))).map((e=>e?aT.M.fromRangeInclusive(e):void 0)),r=i.regions.map(((e,i)=>n[i]&&s[i]?new jZ(n[i].startLineNumber,s[i].startLineNumber,n[i].length,e.visibleLineCountTop.read(t),e.visibleLineCountBottom.read(t)):void 0)).filter(gM.O9),o=[];let a=!1;for(const e of(0,OS.n)(r,((e,i)=>e.getHiddenModifiedRange(t).endLineNumberExclusive===i.getHiddenModifiedRange(t).startLineNumber)))if(e.length>1){a=!0;const t=e.reduce(((e,t)=>e+t.lineCount),0),i=new jZ(e[0].originalLineNumber,e[0].modifiedLineNumber,t,e[0].visibleLineCountTop.get(),e[e.length-1].visibleLineCountBottom.get());o.push(i)}else o.push(e[0]);if(a){const t=e.original.deltaDecorations(i.originalDecorationIds,o.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),n=e.modified.deltaDecorations(i.modifiedDecorationIds,o.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));(0,sP.Rn)((e=>{this._unchangedRegions.set({regions:o,originalDecorationIds:t,modifiedDecorationIds:n},e)}))}})));const r=(t,i,n)=>{const s=jZ.fromDiffs(t.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(n),this._options.hideUnchangedRegionsContextLineCount.read(n));let r;const o=this._unchangedRegions.get();if(o){const t=o.originalDecorationIds.map((t=>e.original.getDecorationRange(t))).map((e=>e?aT.M.fromRangeInclusive(e):void 0)),i=o.modifiedDecorationIds.map((t=>e.modified.getDecorationRange(t))).map((e=>e?aT.M.fromRangeInclusive(e):void 0)),s=function(e,t){let i;return e.filter((e=>{const n=t(e,i);return i=e,n}))}(o.regions.map(((e,n)=>{if(!t[n]||!i[n])return;const s=t[n].length;return new jZ(t[n].startLineNumber,i[n].startLineNumber,s,Math.min(e.visibleLineCountTop.get(),s),Math.min(e.visibleLineCountBottom.get(),s-e.visibleLineCountTop.get()))})).filter(gM.O9),((e,t)=>!t||e.modifiedLineNumber>=t.modifiedLineNumber+t.lineCount&&e.originalLineNumber>=t.originalLineNumber+t.lineCount));let a=s.map((e=>new oT.WL(e.getHiddenOriginalRange(n),e.getHiddenModifiedRange(n))));a=oT.WL.clip(a,aT.M.ofLength(1,e.original.getLineCount()),aT.M.ofLength(1,e.modified.getLineCount())),r=oT.WL.inverse(a,e.original.getLineCount(),e.modified.getLineCount())}const a=[];if(r)for(const e of s){const t=r.filter((t=>t.original.intersectsStrict(e.originalUnchangedRange)&&t.modified.intersectsStrict(e.modifiedUnchangedRange)));a.push(...e.setVisibleRanges(t,i))}else a.push(...s);const l=e.original.deltaDecorations(o?.originalDecorationIds||[],a.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),h=e.modified.deltaDecorations(o?.modifiedDecorationIds||[],a.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));this._unchangedRegions.set({regions:a,originalDecorationIds:l,modifiedDecorationIds:h},i)};this._register(e.modified.onDidChangeContent((t=>{if(this._diff.get()){const i=OZ.c.fromModelContentChanges(t.changes),n=KZ(this._lastDiff,i,e.original,e.modified);n&&(this._lastDiff=n,(0,sP.Rn)((e=>{this._diff.set(HZ.fromDiffResult(this._lastDiff),e),r(n,e);const t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),s.schedule()}))),this._register(e.original.onDidChangeContent((t=>{if(this._diff.get()){const i=OZ.c.fromModelContentChanges(t.changes),n=GZ(this._lastDiff,i,e.original,e.modified);n&&(this._lastDiff=n,(0,sP.Rn)((e=>{this._diff.set(HZ.fromDiffResult(this._lastDiff),e),r(n,e);const t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),s.schedule()}))),this._register((0,sP.yC)((async(t,i)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(t),this._options.hideUnchangedRegionsContextLineCount.read(t),s.cancel(),n.read(t);const o=this._diffProvider.read(t);o.onChangeSignal.read(t),RZ(PZ.D8,t),RZ(BZ.NC,t),this._isDiffUpToDate.set(!1,void 0);let a=[];i.add(e.original.onDidChangeContent((e=>{const t=OZ.c.fromModelContentChanges(e.changes);a=(0,FZ.M)(a,t)})));let l=[];i.add(e.modified.onDidChangeContent((e=>{const t=OZ.c.fromModelContentChanges(e.changes);l=(0,FZ.M)(l,t)})));let h=await o.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(t),maxComputationTimeMs:this._options.maxComputationTimeMs.read(t),computeMoves:this._options.showMoves.read(t)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(h=function(e,t,i){return{changes:e.changes.map((e=>new oT.wm(e.original,e.modified,e.innerChanges?e.innerChanges.map((e=>function(e,t,i){let n=e.originalRange,s=e.modifiedRange;1===n.startColumn&&1===s.startColumn&&(1!==n.endColumn||1!==s.endColumn)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&s.endColumn===i.getLineMaxColumn(s.endLineNumber)&&n.endLineNumber<t.getLineCount()&&s.endLineNumber<i.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1));return new oT.q6(n,s)}(e,t,i))):void 0))),moves:e.moves,identical:e.identical,quitEarly:e.quitEarly}}(h,e.original,e.modified),h=GZ(h,a,e.original,e.modified)??h,h=KZ(h,l,e.original,e.modified)??h,(0,sP.Rn)((e=>{r(h,e),this._lastDiff=h;const t=HZ.fromDiffResult(h);this._diff.set(t,e),this._isDiffUpToDate.set(!0,e);const i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified))):void 0,e)})))})))}ensureModifiedLineIsVisible(e,t,i){if(0===this.diff.get()?.mappings.length)return;const n=this._unchangedRegions.get()?.regions||[];for(const s of n)if(s.getHiddenModifiedRange(void 0).contains(e))return void s.showModifiedLine(e,t,i)}ensureOriginalLineIsVisible(e,t,i){if(0===this.diff.get()?.mappings.length)return;const n=this._unchangedRegions.get()?.regions||[];for(const s of n)if(s.getHiddenOriginalRange(void 0).contains(e))return void s.showOriginalLine(e,t,i)}async waitForDiff(){await(0,sP.oJ)(this.isDiffUpToDate,(e=>e))}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e?.regions.map((e=>({range:e.getHiddenModifiedRange(void 0).serialize()})))}}restoreSerializedState(e){const t=e.collapsedRegions?.map((e=>aT.M.deserialize(e.range))),i=this._unchangedRegions.get();i&&t&&(0,sP.Rn)((e=>{for(const n of i.regions)for(const i of t)if(n.modifiedUnchangedRange.intersect(i)){n.setHiddenModifiedRange(i,e);break}}))}};WZ=zZ([VZ(2,EZ)],WZ);class HZ{static fromDiffResult(e){return new HZ(e.changes.map((e=>new UZ(e))),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,n){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=n}}class UZ{constructor(e){this.lineRangeMapping=e}}class jZ{static fromDiffs(e,t,i,n,s){const r=oT.wm.inverse(e,t,i),o=[];for(const a of r){let e=a.original.startLineNumber,r=a.modified.startLineNumber,l=a.original.length;const h=1===e&&1===r,c=e+l===t+1&&r+l===i+1;(h||c)&&l>=s+n?(h&&!c&&(l-=s),c&&!h&&(e+=s,r+=s,l-=s),o.push(new jZ(e,r,l,0,0))):l>=2*s+n&&(e+=s,r+=s,l-=2*s,o.push(new jZ(e,r,l,0,0)))}return o}get originalUnchangedRange(){return aT.M.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return aT.M.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,n,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=(0,sP.FY)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,sP.FY)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,sP.un)(this,(e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e))),this.isDragged=(0,sP.FY)(this,void 0);const r=Math.max(Math.min(n,this.lineCount),0),o=Math.max(Math.min(s,this.lineCount-n),0);(0,xQ.V7)(n===r),(0,xQ.V7)(s===o),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(o,void 0)}setVisibleRanges(e,t){const i=[],n=new aT.S(e.map((e=>e.modified))).subtractFrom(this.modifiedUnchangedRange);let s=this.originalLineNumber,r=this.modifiedLineNumber;const o=this.modifiedLineNumber+this.lineCount;if(0===n.ranges.length)this.showAll(t),i.push(this);else{let e=0;for(const a of n.ranges){const l=e===n.ranges.length-1;e++;const h=(l?o:a.endLineNumberExclusive)-r,c=new jZ(s,r,h,0,0);c.setHiddenModifiedRange(a,t),i.push(c),s=c.originalUnchangedRange.endLineNumberExclusive,r=c.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return aT.M.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return aT.M.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,n,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),s=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;0===t&&n<s||1===t?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+s,i)}showOriginalLine(e,t,i){const n=e-this.originalLineNumber,s=this.originalLineNumber+this.lineCount-e;0===t&&n<s||1===t?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+s-n,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-s,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}function GZ(e,t,i,n){}function KZ(e,t,i,n){}class $Z extends Mx.jG{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,n,s,r,o,a,l){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=n,this._editor=s,this._viewLineCounts=r,this._originalTextModel=o,this._contextMenuService=a,this._clipboardService=l,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=cM.L.asClassName(vD.W.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const h=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${h}px`,this._diffActions.style.lineHeight=`${h}px`,this._marginDomNode.appendChild(this._diffActions);let c=0;const d=i.getOption(128)&&!BS.un,u=(e,t)=>{this._contextMenuService.showContextMenu({domForShadowRoot:d?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:e,y:t}),getActions:()=>{const e=[],t=n.modified.isEmpty;e.push(new sM("diff.clipboard.copyDeletedContent",t?n.original.length>1?(0,WS.kg)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,WS.kg)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?(0,WS.kg)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,WS.kg)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(async()=>{const e=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(e)}))),n.original.length>1&&e.push(new sM("diff.clipboard.copyDeletedLineContent",t?(0,WS.kg)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+c):(0,WS.kg)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+c),void 0,!0,(async()=>{let e=this._originalTextModel.getLineContent(n.original.startLineNumber+c);if(""===e){e=0===this._originalTextModel.getEndOfLineSequence()?"\n":"\r\n"}await this._clipboardService.writeText(e)})));return i.getOption(92)||e.push(new sM("diff.inline.revertChange",(0,WS.kg)("diff.inline.revertChange.label","Revert this change"),void 0,!0,(async()=>{this._editor.revert(this._diff)}))),e},autoSelectFirstItem:!0})};this._register(TL(this._diffActions,"mousedown",(e=>{if(!e.leftButton)return;const{top:t,height:i}=zL(this._diffActions),n=Math.floor(h/3);e.preventDefault(),u(e.posx,t+i+n)}))),this._register(i.onMouseMove((e=>{8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId!==this._getViewZoneId()?this.visibility=!1:(c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,h),this.visibility=!0)}))),this._register(i.onMouseDown((e=>{if(e.event.leftButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._getViewZoneId()&&(e.event.preventDefault(),c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,h),u(e.event.posx,e.event.posy+h))}})))}_updateLightBulbPosition(e,t,i){const{top:n}=zL(e),s=t-n,r=Math.floor(s/i),o=r*i;if(this._diffActions.style.top=`${o}px`,this._viewLineCounts){let e=0;for(let t=0;t<this._viewLineCounts.length;t++)if(e+=this._viewLineCounts[t],r<e)return t}return r}}const qZ=KM("diffEditorWidget",{createHTML:e=>e});function QZ(e,t,i,n){jE(n,t.fontInfo);const s=i.length>0,r=new RU.fe(1e4);let o=0,a=0;const l=[];for(let d=0;d<e.lineTokens.length;d++){const n=d+1,h=e.lineTokens[d],c=e.lineBreakData[d],u=PU.filter(i,n,1,Number.MAX_SAFE_INTEGER);if(c){let i=0;for(const n of c.breakOffsets){const l=h.sliceAndInflate(i,n,0);o=Math.max(o,ZZ(a,l,PU.extractWrapped(u,i,n),s,e.mightContainNonBasicASCII,e.mightContainRTL,t,r)),a++,i=n}l.push(c.breakOffsets.length)}else l.push(1),o=Math.max(o,ZZ(a,h,u,s,e.mightContainNonBasicASCII,e.mightContainRTL,t,r)),a++}o+=t.scrollBeyondLastColumn;const h=r.build(),c=qZ?qZ.createHTML(h):h;n.innerHTML=c;return{heightInLines:a,minWidthInPx:o*t.typicalHalfwidthCharacterWidth,viewLineCounts:l}}class XZ{constructor(e,t,i,n){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=n}}class YZ{static fromEditor(e){const t=e.getOptions(),i=t.get(50),n=t.get(146);return new YZ(e.getModel()?.getOptions().tabSize||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),n.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,n,s,r,o,a,l,h,c){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=s,this.lineHeight=r,this.lineDecorationsWidth=o,this.stopRenderingLineAfter=a,this.renderWhitespace=l,this.renderControlCharacters=h,this.fontLigatures=c}}function ZZ(e,t,i,n,s,r,o,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(e*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=t.getLineContent(),h=ej.isBasicASCII(l,s),c=ej.containsRTL(l,h,r),d=GU(new WU(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,h,c,0,t,i,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==ax.OFF,null),a);return a.appendString("</div>"),d.characterMapping.getHorizontalOffset(d.characterMapping.length)}var JZ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},eJ=function(e,t){return function(i,n){t(i,n,e)}};let tJ=class extends Mx.jG{constructor(e,t,i,n,s,r,o,a,l,h){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=n,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=o,this._modViewZonesToIgnore=a,this._clipboardService=l,this._contextMenuService=h,this._originalTopPadding=(0,sP.FY)(this,0),this._originalScrollOffset=(0,sP.FY)(this,0),this._originalScrollOffsetAnimated=zY(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,sP.FY)(this,0),this._modifiedScrollOffset=(0,sP.FY)(this,0),this._modifiedScrollOffsetAnimated=zY(this._targetWindow,this._modifiedScrollOffset,this._store);const c=(0,sP.FY)("invalidateAlignmentsState",0),d=this._register(new sk.uC((()=>{c.set(c.get()+1,void 0)}),0));this._register(this._editors.original.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||d.schedule()}))),this._register(this._editors.modified.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||d.schedule()}))),this._register(this._editors.original.onDidChangeConfiguration((e=>{(e.hasChanged(147)||e.hasChanged(67))&&d.schedule()}))),this._register(this._editors.modified.onDidChangeConfiguration((e=>{(e.hasChanged(147)||e.hasChanged(67))&&d.schedule()})));const u=this._diffModel.map((e=>e?(0,sP.y0)(this,e.model.original.onDidChangeTokens,(()=>2===e.model.original.tokenization.backgroundTokenizationState)):void 0)).map(((e,t)=>e?.read(t))),g=(0,sP.un)((e=>{const t=this._diffModel.read(e),i=t?.diff.read(e);if(!t||!i)return null;c.read(e);const n=this._options.renderSideBySide.read(e);return iJ(this._editors.original,this._editors.modified,i.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,n)})),p=(0,sP.un)((e=>{const t=this._diffModel.read(e)?.movedTextToCompare.read(e);if(!t)return null;c.read(e);const i=t.changes.map((e=>new UZ(e)));return iJ(this._editors.original,this._editors.modified,i,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)}));function f(){const e=document.createElement("div");return e.className="diagonal-fill",e}const m=this._register(new Mx.Cm);this.viewZones=(0,sP.rm)(this,((e,t)=>{m.clear();const i=g.read(e)||[],n=[],r=[],o=this._modifiedTopPadding.read(e);o>0&&r.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:o,showInHiddenAreas:!0,suppressMouseDown:!0});const a=this._originalTopPadding.read(e);a>0&&n.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:a,showInHiddenAreas:!0,suppressMouseDown:!0});const l=this._options.renderSideBySide.read(e),h=l?void 0:this._editors.modified._getViewModel()?.createLineBreaksComputer();if(h){const C=this._editors.original.getModel();for(const S of i)if(S.diff)for(let x=S.originalRange.startLineNumber;x<S.originalRange.endLineNumberExclusive;x++){if(x>C.getLineCount())return{orig:n,mod:r};h?.addRequest(C.getLineContent(x),null,null)}}const c=h?.finalize()??[];let d=0;const _=this._editors.modified.getOption(67),v=this._diffModel.read(e)?.movedTextToCompare.read(e),b=this._editors.original.getModel()?.mightContainNonBasicASCII()??!1,y=this._editors.original.getModel()?.mightContainRTL()??!1,w=YZ.fromEditor(this._editors.modified);for(const k of i)if(!k.diff||l||this._options.useTrueInlineDiffRendering.read(e)&&sJ(k.diff)){const L=k.modifiedHeightInPx-k.originalHeightInPx;if(L>0){if(v?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(k.originalRange.endLineNumberExclusive-1))continue;n.push({afterLineNumber:k.originalRange.endLineNumberExclusive-1,domNode:f(),heightInPx:L,showInHiddenAreas:!0,suppressMouseDown:!0})}else{if(v?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(k.modifiedRange.endLineNumberExclusive-1))continue;function E(){const e=document.createElement("div");return e.className="arrow-revert-change "+cM.L.asClassName(vD.W.arrowRight),t.add(EL(e,"mousedown",(e=>e.stopPropagation()))),t.add(EL(e,"click",(e=>{e.stopPropagation(),s.revert(k.diff)}))),xE("div",{},e)}let M;k.diff&&k.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(e)&&(M=E()),r.push({afterLineNumber:k.modifiedRange.endLineNumberExclusive-1,domNode:f(),heightInPx:-L,marginDomNode:M,showInHiddenAreas:!0,suppressMouseDown:!0})}}else{if(!k.originalRange.isEmpty){u.read(e);const D=document.createElement("div");D.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const N=this._editors.original.getModel();if(k.originalRange.endLineNumberExclusive-1>N.getLineCount())return{orig:n,mod:r};const I=new XZ(k.originalRange.mapToLineArray((e=>N.tokenization.getLineTokens(e))),k.originalRange.mapToLineArray((e=>c[d++])),b,y),A=[];for(const F of k.diff.innerChanges||[])A.push(new tj(F.originalRange.delta(-(k.diff.original.startLineNumber-1)),wZ.className,0));const R=QZ(I,w,A,D),P=document.createElement("div");if(P.className="inline-deleted-margin-view-zone",jE(P,w.fontInfo),this._options.renderIndicators.read(e))for(let B=0;B<R.heightInLines;B++){const z=document.createElement("div");z.className=`delete-sign ${cM.L.asClassName(gZ)}`,z.setAttribute("style",`position:absolute;top:${B*_}px;width:${w.lineDecorationsWidth}px;height:${_}px;right:0;`),P.appendChild(z)}let O;m.add(new $Z((()=>(0,gM.eU)(O)),P,this._editors.modified,k.diff,this._diffEditorWidget,R.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let V=0;V<R.viewLineCounts.length;V++){const W=R.viewLineCounts[V];W>1&&n.push({afterLineNumber:k.originalRange.startLineNumber+V,domNode:f(),heightInPx:(W-1)*_,showInHiddenAreas:!0,suppressMouseDown:!0})}r.push({afterLineNumber:k.modifiedRange.startLineNumber-1,domNode:D,heightInPx:R.heightInLines*_,minWidthInPx:R.minWidthInPx,marginDomNode:P,setZoneId(e){O=e},showInHiddenAreas:!0,suppressMouseDown:!0})}const T=document.createElement("div");T.className="gutter-delete",n.push({afterLineNumber:k.originalRange.endLineNumberExclusive-1,domNode:f(),heightInPx:k.modifiedHeightInPx,marginDomNode:T,showInHiddenAreas:!0,suppressMouseDown:!0})}for(const H of p.read(e)??[]){if(!v?.lineRangeMapping.original.intersect(H.originalRange)||!v?.lineRangeMapping.modified.intersect(H.modifiedRange))continue;const U=H.modifiedHeightInPx-H.originalHeightInPx;U>0?n.push({afterLineNumber:H.originalRange.endLineNumberExclusive-1,domNode:f(),heightInPx:U,showInHiddenAreas:!0,suppressMouseDown:!0}):r.push({afterLineNumber:H.modifiedRange.endLineNumberExclusive-1,domNode:f(),heightInPx:-U,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:n,mod:r}}));let _=!1;this._register(this._editors.original.onDidScrollChange((e=>{e.scrollLeftChanged&&!_&&(_=!0,this._editors.modified.setScrollLeft(e.scrollLeft),_=!1)}))),this._register(this._editors.modified.onDidScrollChange((e=>{e.scrollLeftChanged&&!_&&(_=!0,this._editors.original.setScrollLeft(e.scrollLeft),_=!1)}))),this._originalScrollTop=(0,sP.y0)(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,sP.y0)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._register((0,sP.fm)((e=>{const t=this._originalScrollTop.read(e)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(e))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(e));t!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(t,1)}))),this._register((0,sP.fm)((e=>{const t=this._modifiedScrollTop.read(e)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(e))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(e));t!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(t,1)}))),this._register((0,sP.fm)((e=>{const t=this._diffModel.read(e)?.movedTextToCompare.read(e);let i=0;if(t){const e=this._editors.original.getTopForLineNumber(t.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();i=this._editors.modified.getTopForLineNumber(t.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-e}i>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(i,void 0)):i<0?(this._modifiedTopPadding.set(-i,void 0),this._originalTopPadding.set(0,void 0)):setTimeout((()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)}),400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-i,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+i,void 0,!0)})))}};function iJ(e,t,i,n,s,r){const o=new OS.j3(nJ(e,n)),a=new OS.j3(nJ(t,s)),l=e.getOption(67),h=t.getOption(67),c=[];let d=0,u=0;function g(e,t){for(;;){let i=o.peek(),n=a.peek();if(i&&i.lineNumber>=e&&(i=void 0),n&&n.lineNumber>=t&&(n=void 0),!i&&!n)break;const s=i?i.lineNumber-d:Number.MAX_VALUE,r=n?n.lineNumber-u:Number.MAX_VALUE;s<r?(o.dequeue(),n={lineNumber:i.lineNumber-d+u,heightInPx:0}):s>r?(a.dequeue(),i={lineNumber:n.lineNumber-u+d,heightInPx:0}):(o.dequeue(),a.dequeue()),c.push({originalRange:aT.M.ofLength(i.lineNumber,1),modifiedRange:aT.M.ofLength(n.lineNumber,1),originalHeightInPx:l+i.heightInPx,modifiedHeightInPx:h+n.heightInPx,diff:void 0})}}for(const p of i){const f=p.lineRangeMapping;g(f.original.startLineNumber,f.modified.startLineNumber);let m=!0,_=f.modified.startLineNumber,v=f.original.startLineNumber;function b(e,t){if(e<v||t<_)return;if(m)m=!1;else if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&(e===v||t===_))return;const i=new aT.M(v,e),n=new aT.M(_,t);if(i.isEmpty&&n.isEmpty)return;const s=o.takeWhile((t=>t.lineNumber<e))?.reduce(((e,t)=>e+t.heightInPx),0)??0,r=a.takeWhile((e=>e.lineNumber<t))?.reduce(((e,t)=>e+t.heightInPx),0)??0;c.push({originalRange:i,modifiedRange:n,originalHeightInPx:i.length*l+s,modifiedHeightInPx:n.length*h+r,diff:p.lineRangeMapping}),v=e,_=t}if(r)for(const y of f.innerChanges||[]){y.originalRange.startColumn>1&&y.modifiedRange.startColumn>1&&b(y.originalRange.startLineNumber,y.modifiedRange.startLineNumber);const w=e.getModel(),C=y.originalRange.endLineNumber<=w.getLineCount()?w.getLineMaxColumn(y.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;y.originalRange.endColumn<C&&b(y.originalRange.endLineNumber,y.modifiedRange.endLineNumber)}b(f.original.endLineNumberExclusive,f.modified.endLineNumberExclusive,!0),d=f.original.endLineNumberExclusive,u=f.modified.endLineNumberExclusive}return g(Number.MAX_VALUE,Number.MAX_VALUE),c}function nJ(e,t){const i=[],n=[],s=-1!==e.getOption(147).wrappingColumn,r=e._getViewModel().coordinatesConverter,o=e.getOption(67);if(s)for(let a=1;a<=e.getModel().getLineCount();a++){const e=r.getModelLineViewLineCount(a);e>1&&n.push({lineNumber:a,heightInPx:o*(e-1)})}for(const a of e.getWhitespaces()){if(t.has(a.id))continue;const e=0===a.afterLineNumber?0:r.convertViewPositionToModelPosition(new OA.y(a.afterLineNumber,1)).lineNumber;i.push({lineNumber:e,heightInPx:a.height})}return function(e,t,i,n){if(0===e.length)return t;if(0===t.length)return e;const s=[];let r=0,o=0;for(;r<e.length&&o<t.length;){const a=e[r],l=t[o],h=i(a),c=i(l);h<c?(s.push(a),r++):h>c?(s.push(l),o++):(s.push(n(a,l)),r++,o++)}for(;r<e.length;)s.push(e[r]),r++;for(;o<t.length;)s.push(t[o]),o++;return s}(i,n,(e=>e.lineNumber),((e,t)=>({lineNumber:e.lineNumber,heightInPx:e.heightInPx+t.heightInPx})))}function sJ(e){return!!e.innerChanges&&e.innerChanges.every((e=>rJ(e.modifiedRange)&&rJ(e.originalRange)||e.originalRange.equalsRange(new JM.Q(1,1,1,1))))}function rJ(e){return e.startLineNumber===e.endLineNumber}tJ=JZ([eJ(8,LH),eJ(9,rD)],tJ);class oJ extends Mx.jG{static#e=(()=>this.movedCodeBlockPadding=4)();constructor(e,t,i,n,s){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=n,this._editors=s,this._originalScrollTop=(0,sP.y0)(this,this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,sP.y0)(this,this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._viewZonesChanged=(0,sP.yQ)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,sP.FY)(this,0),this._modifiedViewZonesChangedSignal=(0,sP.yQ)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,sP.yQ)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,sP.rm)(this,((e,t)=>{this._element.replaceChildren();const i=this._diffModel.read(e),n=i?.diff.read(e)?.movedTexts;if(!n||0===n.length)return void this.width.set(0,void 0);this._viewZonesChanged.read(e);const s=this._originalEditorLayoutInfo.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(!s||!r)return void this.width.set(0,void 0);this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);const o=n.map((t=>{function i(e,t){return(t.getTopForLineNumber(e.startLineNumber,!0)+t.getTopForLineNumber(e.endLineNumberExclusive,!0))/2}const n=i(t.lineRangeMapping.original,this._editors.original),s=this._originalScrollTop.read(e),r=i(t.lineRangeMapping.modified,this._editors.modified),o=n-s,a=r-this._modifiedScrollTop.read(e),l=Math.min(n,r),h=Math.max(n,r);return{range:new QY.L(l,h),from:o,to:a,fromWithoutScroll:n,toWithoutScroll:r,move:t}}));o.sort((0,OS.nH)((0,OS.VE)((e=>e.fromWithoutScroll>e.toWithoutScroll),OS.TS),(0,OS.VE)((e=>e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll),OS.U9)));const a=aJ.compute(o.map((e=>e.range))),l=s.verticalScrollbarWidth,h=10*(a.getTrackCount()-1)+20,c=l+h+(r.contentLeft-oJ.movedCodeBlockPadding);let d=0;for(const u of o){const e=l+10+10*a.getTrack(d),n=15,s=15,o=c,h=r.glyphMarginWidth+r.lineNumbersWidth,g=18,p=document.createElementNS("http://www.w3.org/2000/svg","rect");p.classList.add("arrow-rectangle"),p.setAttribute("x",""+(o-h)),p.setAttribute("y",""+(u.to-g/2)),p.setAttribute("width",`${h}`),p.setAttribute("height",`${g}`),this._element.appendChild(p);const f=document.createElementNS("http://www.w3.org/2000/svg","g"),m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d",`M 0 ${u.from} L ${e} ${u.from} L ${e} ${u.to} L ${o-s} ${u.to}`),m.setAttribute("fill","none"),f.appendChild(m);const _=document.createElementNS("http://www.w3.org/2000/svg","polygon");_.classList.add("arrow"),t.add((0,sP.fm)((e=>{m.classList.toggle("currentMove",u.move===i.activeMovedText.read(e)),_.classList.toggle("currentMove",u.move===i.activeMovedText.read(e))}))),_.setAttribute("points",`${o-s},${u.to-n/2} ${o},${u.to} ${o-s},${u.to+n/2}`),f.appendChild(_),this._element.appendChild(f),d++}this.width.set(h,void 0)})),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,Mx.s)((()=>this._element.remove()))),this._register((0,sP.fm)((e=>{const t=this._originalEditorLayoutInfo.read(e),i=this._modifiedEditorLayoutInfo.read(e);t&&i&&(this._element.style.left=t.width-t.verticalScrollbarWidth+"px",this._element.style.height=`${t.height}px`,this._element.style.width=`${t.verticalScrollbarWidth+t.contentLeft-oJ.movedCodeBlockPadding+this.width.read(e)}px`)}))),this._register((0,sP.OI)(this._state));const r=(0,sP.un)((e=>{const t=this._diffModel.read(e),i=t?.diff.read(e);return i?i.movedTexts.map((e=>({move:e,original:new WY((0,sP.lk)(e.lineRangeMapping.original.startLineNumber-1),18),modified:new WY((0,sP.lk)(e.lineRangeMapping.modified.startLineNumber-1),18)}))):[]}));this._register(jY(this._editors.original,r.map((e=>e.map((e=>e.original)))))),this._register(jY(this._editors.modified,r.map((e=>e.map((e=>e.modified)))))),this._register((0,sP.yC)(((e,t)=>{const i=r.read(e);for(const n of i)t.add(new lJ(this._editors.original,n.original,n.move,"original",this._diffModel.get())),t.add(new lJ(this._editors.modified,n.modified,n.move,"modified",this._diffModel.get()))})));const o=(0,sP.yQ)("original.onDidFocusEditorWidget",(e=>this._editors.original.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0))))),a=(0,sP.yQ)("modified.onDidFocusEditorWidget",(e=>this._editors.modified.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0)))));let l="modified";this._register((0,sP.Y)({createEmptyChangeSummary:()=>{},handleChange:(e,t)=>(e.didChange(o)&&(l="original"),e.didChange(a)&&(l="modified"),!0)},(e=>{o.read(e),a.read(e);const t=this._diffModel.read(e);if(!t)return;const i=t.diff.read(e);let n;if(i&&"original"===l){const t=this._editors.originalCursor.read(e);t&&(n=i.movedTexts.find((e=>e.lineRangeMapping.original.contains(t.lineNumber))))}if(i&&"modified"===l){const t=this._editors.modifiedCursor.read(e);t&&(n=i.movedTexts.find((e=>e.lineRangeMapping.modified.contains(t.lineNumber))))}n!==t.movedTextToCompare.get()&&t.movedTextToCompare.set(void 0,void 0),t.setActiveMovedText(n)})))}}class aJ{static compute(e){const t=[],i=[];for(const n of e){let e=t.findIndex((e=>!e.intersectsStrict(n)));if(-1===e){const i=6;t.length>=i?e=(0,XQ.TM)(t,(0,OS.VE)((e=>e.intersectWithRangeLength(n)),OS.U9)):(e=t.length,t.push(new QY.h))}t[e].addRange(n),i.push(e)}return new aJ(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class lJ extends VY{constructor(e,t,i,n,s){const r=OE("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=i,this._kind=n,this._diffModel=s,this._nodes=OE("div.diff-moved-code-block",{style:{marginRight:"4px"}},[OE("div.text-content@textContent"),OE("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const o=(0,sP.y0)(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));let a;this._register(UY(this._nodes.root,{paddingRight:o.map((e=>e.verticalScrollbarWidth))})),a=i.changes.length>0?"original"===this._kind?(0,WS.kg)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,WS.kg)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===this._kind?(0,WS.kg)("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,WS.kg)("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const l=this._register(new vO(this._nodes.actionBar,{highlightToggledItems:!0})),h=new sM("",a,"",!1);l.push(h,{icon:!1,label:!0});const c=new sM("","Compare",cM.L.asClassName(vD.W.compareChanges),!0,(()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)}));this._register((0,sP.fm)((e=>{const t=this._diffModel.movedTextToCompare.read(e)===i;c.checked=t}))),l.push(c,{icon:!1,label:!0})}}class hJ extends Mx.jG{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=(0,sP.un)(this,(e=>{const t=this._diffModel.read(e),i=t?.diff.read(e);if(!i)return null;const n=this._diffModel.read(e).movedTextToCompare.read(e),s=this._options.renderIndicators.read(e),r=this._options.showEmptyDecorations.read(e),o=[],a=[];if(!n)for(const h of i.mappings)if(h.lineRangeMapping.original.isEmpty||o.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:s?fZ:_Z}),h.lineRangeMapping.modified.isEmpty||a.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:s?pZ:mZ}),h.lineRangeMapping.modified.isEmpty||h.lineRangeMapping.original.isEmpty)h.lineRangeMapping.original.isEmpty||o.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:CZ}),h.lineRangeMapping.modified.isEmpty||a.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:bZ});else{const i=this._options.useTrueInlineDiffRendering.read(e)&&sJ(h.lineRangeMapping);for(const e of h.lineRangeMapping.innerChanges||[])if(h.lineRangeMapping.original.contains(e.originalRange.startLineNumber)&&o.push({range:e.originalRange,options:e.originalRange.isEmpty()&&r?SZ:wZ}),h.lineRangeMapping.modified.contains(e.modifiedRange.startLineNumber)&&a.push({range:e.modifiedRange,options:e.modifiedRange.isEmpty()&&r&&!i?yZ:vZ}),i){const i=t.model.original.getValueInRange(e.originalRange);a.push({range:e.modifiedRange,options:{description:"deleted-text",before:{content:i,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(n)for(const h of n.changes){const e=h.original.toInclusiveRange();e&&o.push({range:e,options:s?fZ:_Z});const t=h.modified.toInclusiveRange();t&&a.push({range:t,options:s?pZ:mZ});for(const i of h.innerChanges||[])o.push({range:i.originalRange,options:wZ}),a.push({range:i.modifiedRange,options:vZ})}const l=this._diffModel.read(e).activeMovedText.read(e);for(const h of i.movedTexts)o.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(h===l?" currentMove":""),blockPadding:[oJ.movedCodeBlockPadding,0,oJ.movedCodeBlockPadding,oJ.movedCodeBlockPadding]}}),a.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(h===l?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:o,modifiedDecorations:a}})),this._register(OY(this._editors.original,this._decorations.map((e=>e?.originalDecorations||[])))),this._register(OY(this._editors.modified,this._decorations.map((e=>e?.modifiedDecorations||[]))))}}class cJ{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=(0,AY.dQ)(this,(e=>{const t=this._sashRatio.read(e)??this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(t,e)}),((e,t)=>{const i=this.dimensions.width.get();this._sashRatio.set(e/i,t)})),this._sashRatio=(0,sP.FY)(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),n=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):n,r=100;return i<=200?n:s<r?r:s>i-r?i-r:s}}class dJ extends Mx.jG{constructor(e,t,i,n,s,r){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=n,this.sashLeft=s,this._resetSash=r,this._sash=this._register(new sB(this._domNode,{getVerticalSashTop:e=>0,getVerticalSashLeft:e=>this.sashLeft.get(),getVerticalSashHeight:e=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart((()=>{this._startSashPosition=this.sashLeft.get()}))),this._register(this._sash.onDidChange((e=>{this.sashLeft.set(this._startSashPosition+(e.currentX-e.startX),void 0)}))),this._register(this._sash.onDidEnd((()=>this._sash.layout()))),this._register(this._sash.onDidReset((()=>this._resetSash()))),this._register((0,sP.fm)((e=>{const t=this._boundarySashes.read(e);t&&(this._sash.orthogonalEndSash=t.bottom)}))),this._register((0,sP.fm)((e=>{const t=this._enabled.read(e);this._sash.state=t?3:0,this.sashLeft.read(e),this._dimensions.height.read(e),this._sash.layout()})))}}class uJ extends Mx.jG{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=(0,sP.y0)(this,this._editor.onDidScrollChange,(e=>this._editor.getScrollTop())),this.isScrollTopZero=this.scrollTop.map((e=>0===e)),this.modelAttached=(0,sP.y0)(this,this._editor.onDidChangeModel,(e=>this._editor.hasModel())),this.editorOnDidChangeViewZones=(0,sP.yQ)("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=(0,sP.yQ)("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=(0,sP.Yd)("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const n=this._domNode.appendChild(OE("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver((()=>{(0,sP.Rn)((e=>{this.domNodeSizeChanged.trigger(e)}))}));s.observe(this._domNode),this._register((0,Mx.s)((()=>s.disconnect()))),this._register((0,sP.fm)((e=>{n.className=this.isScrollTopZero.read(e)?"":"scroll-decoration"}))),this._register((0,sP.fm)((e=>this.render(e))))}dispose(){super.dispose(),yE(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),n=new Set(this.views.keys()),s=QY.L.ofStartAndLength(0,this._domNode.clientHeight);if(!s.isEmpty)for(const r of i){const i=new aT.M(r.startLineNumber,r.endLineNumber+1),o=this.itemProvider.getIntersectingGutterItems(i,e);(0,sP.Rn)((e=>{for(const r of o){if(!r.range.intersect(i))continue;n.delete(r.id);let o=this.views.get(r.id);if(o)o.item.set(r,e);else{const e=document.createElement("div");this._domNode.appendChild(e);const t=(0,sP.FY)("item",r),i=this.itemProvider.createView(t,e);o=new gJ(t,i,e),this.views.set(r.id,o)}const a=r.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(r.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(r.range.startLineNumber-1,!1)-t,l=(1===r.range.endLineNumberExclusive?Math.max(a,this._editor.getTopForLineNumber(r.range.startLineNumber,!1)-t):Math.max(a,this._editor.getBottomForLineNumber(r.range.endLineNumberExclusive-1,!0)-t))-a;o.domNode.style.top=`${a}px`,o.domNode.style.height=`${l}px`,o.gutterItemView.layout(QY.L.ofStartAndLength(a,l),s)}}))}for(const r of n){const e=this.views.get(r);e.gutterItemView.dispose(),e.domNode.remove(),this.views.delete(r)}}}class gJ{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class pJ extends rM{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}var fJ=i(4235);class mJ extends fJ.CO{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new PY.W(e-1,t)}}class _J extends Mx.jG{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{orientation:0};super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new rk._B),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new Mx.Cm),i.hoverDelegate=i.hoverDelegate??this._register(FR()),this.options=i,this.toggleMenuAction=this._register(new vJ((()=>this.toggleMenuActionViewItem?.show()),i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new vO(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(e,n)=>{if(e.id===vJ.ID)return this.toggleMenuActionViewItem=new jP(e,e.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:cM.L.asClassNameArray(i.moreIcon??vD.W.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const t=i.actionViewItemProvider(e,n);if(t)return t}if(e instanceof aM){const i=new jP(e,e.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:e.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return i.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(i),this.disposables.add(this._onDidChangeDropdownVisibility.add(i.onDidChangeVisibility)),i}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach((e=>{this.actionBar.push(e,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(e)})}))}getKeybindingLabel(e){const t=this.options.getKeyBinding?.(e);return t?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class vJ extends sM{static#e=(()=>this.ID="toolbar.toggle.more")();constructor(e,t){t=t||WS.kg("moreActions","More Actions..."),super(vJ.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}}var bJ=i(786),yJ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},wJ=function(e,t){return function(i,n){t(i,n,e)}};let CJ=class extends _J{constructor(e,t,i,n,s,r,o,a){super(e,s,{getKeyBinding:e=>r.lookupKeybinding(e.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:"string"===typeof t?.telemetrySource}),this._options=t,this._menuService=i,this._contextKeyService=n,this._contextMenuService=s,this._keybindingService=r,this._commandService=o,this._sessionDisposables=this._store.add(new Mx.Cm);const l=t?.telemetrySource;l&&this._store.add(this.actionBar.onDidRun((e=>a.publicLog2("workbenchActionExecuted",{id:e.action.id,from:l}))))}setActions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;this._sessionDisposables.clear();const n=e.slice(),s=t.slice(),r=[];let o=0;const a=[];let l=!1;if(-1!==this._options?.hiddenItemStrategy)for(let h=0;h<n.length;h++){const e=n[h];(e instanceof DM||e instanceof TM)&&(e.hideActions&&(r.push(e.hideActions.toggle),e.hideActions.toggle.checked&&o++,e.hideActions.isHidden&&(l=!0,n[h]=void 0,0!==this._options?.hiddenItemStrategy&&(a[h]=e))))}if(void 0!==this._options?.overflowBehavior){const e=(0,bJ.E)(new Set(this._options.overflowBehavior.exempted),uM.f.map(n,(e=>e?.id))),t=this._options.overflowBehavior.maxItems-e.size;let i=0;for(let s=0;s<n.length;s++){const r=n[s];r&&(i++,e.has(r.id)||i>=t&&(n[s]=void 0,a[s]=r))}}(0,OS.SK)(n),(0,OS.SK)(a),super.setActions(n,oM.join(a,s)),(r.length>0||n.length>0)&&this._sessionDisposables.add(EL(this.getElement(),"contextmenu",(e=>{const t=new ik(fL(this.getElement()),e),n=this.getItemAction(t.target);if(!n)return;t.preventDefault(),t.stopPropagation();const s=[];if(n instanceof DM&&n.menuKeybinding)s.push(n.menuKeybinding);else if(!(n instanceof TM||n instanceof vJ)){const e=!!this._keybindingService.lookupKeybinding(n.id);s.push(yH(this._commandService,this._keybindingService,n.id,void 0,e))}if(r.length>0){let e=!1;if(1===o&&0===this._options?.hiddenItemStrategy){e=!0;for(let e=0;e<r.length;e++)if(r[e].checked){r[e]=hM({id:n.id,label:n.label,checked:!0,enabled:!1,run(){}});break}}if(!e&&(n instanceof DM||n instanceof TM)){if(!n.hideActions)return;s.push(n.hideActions.hide)}else s.push(hM({id:"label",label:(0,WS.kg)("hide","Hide"),enabled:!1,run(){}}))}const a=oM.join(s,r);this._options?.resetMenu&&!i&&(i=[this._options.resetMenu]),l&&i&&(a.push(new oM),a.push(hM({id:"resetThisMenu",label:(0,WS.kg)("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),0!==a.length&&this._contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>a,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:"string"===typeof this._options?.telemetrySource,contextKeyService:this._contextKeyService})})))}};CJ=yJ([wJ(2,LM),wJ(3,mM.fN),wJ(4,rD),wJ(5,oD),wJ(6,pM),wJ(7,NM)],CJ);let SJ=class extends CJ{constructor(e,t,i,n,s,r,o,a,l){super(e,{resetMenu:t,...i},n,s,r,o,a,l),this._onDidChangeMenuItems=this._store.add(new rk.vl),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const h=this._store.add(n.createMenu(t,s,{emitEventsForSubmenuChanges:!0})),c=()=>{const t=[],n=[];!function(e,t,i,n,s,r){let o,a,l,h,c;if(Array.isArray(e))c=e,o=t,a=i,l=n,h=s;else{const d=t;c=e.getActions(d),o=i,a=n,l=s,h=r}gO(c,o,!1,"string"===typeof a?e=>e===a:a,l,h)}(h,i?.menuOptions,{primary:t,secondary:n},i?.toolbarOptions?.primaryGroup,i?.toolbarOptions?.shouldInlineSubmenu,i?.toolbarOptions?.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",0===t.length&&0===n.length),super.setActions(t,n)};this._store.add(h.onDidChange((()=>{c(),this._onDidChangeMenuItems.fire(this)}))),c()}setActions(){throw new Ux.D7("This toolbar is populated from a menu.")}};SJ=yJ([wJ(3,LM),wJ(4,mM.fN),wJ(5,rD),wJ(6,oD),wJ(7,pM),wJ(8,NM)],SJ);var xJ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},kJ=function(e,t){return function(i,n){t(i,n,e)}};const LJ=[];let EJ=class extends Mx.jG{constructor(e,t,i,n,s,r,o,a,l){var h,c;super(),this._diffModel=t,this._editors=i,this._options=n,this._sashLayout=s,this._boundarySashes=r,this._instantiationService=o,this._contextKeyService=a,this._menuService=l,this._menu=this._register(this._menuService.createMenu(kM.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=(0,sP.y0)(this,this._menu.onDidChange,(()=>this._menu.getActions())),this._hasActions=this._actions.map((e=>e.length>0)),this._showSash=(0,sP.un)(this,(e=>this._options.renderSideBySide.read(e)&&this._hasActions.read(e))),this.width=(0,sP.un)(this,(e=>this._hasActions.read(e)?35:0)),this.elements=OE("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:"35px"}},[]),this._currentDiff=(0,sP.un)(this,(e=>{const t=this._diffModel.read(e);if(!t)return;const i=t.diff.read(e)?.mappings,n=this._editors.modifiedCursor.read(e);return n?i?.find((e=>e.lineRangeMapping.modified.contains(n.lineNumber))):void 0})),this._selectedDiffs=(0,sP.un)(this,(e=>{const t=this._diffModel.read(e),i=t?.diff.read(e);if(!i)return LJ;const n=this._editors.modifiedSelections.read(e);if(n.every((e=>e.isEmpty())))return LJ;const s=new aT.S(n.map((e=>aT.M.fromRangeInclusive(e)))),r=i.mappings.filter((e=>e.lineRangeMapping.innerChanges&&s.intersects(e.lineRangeMapping.modified))).map((e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((e=>n.some((t=>JM.Q.areIntersecting(e.modifiedRange,t)))))})));return 0===r.length||r.every((e=>0===e.rangeMappings.length))?LJ:r})),this._register((h=e,c=this.elements.root,h.prepend(c),(0,Mx.s)((()=>{c.remove()})))),this._register(EL(this.elements.root,"click",(()=>{this._editors.modified.focus()}))),this._register(UY(this.elements.root,{display:this._hasActions.map((e=>e?"block":"none"))})),(0,AY.a0)(this,(t=>this._showSash.read(t)?new dJ(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,(0,AY.dQ)(this,(e=>this._sashLayout.sashLeft.read(e)-35),((e,t)=>this._sashLayout.sashLeft.set(e+35,t))),(()=>this._sashLayout.resetSash())):void 0)).recomputeInitiallyAndOnChange(this._store),this._register(new uJ(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(e,t)=>{const i=this._diffModel.read(t);if(!i)return[];const n=i.diff.read(t);if(!n)return[];const s=this._selectedDiffs.read(t);if(s.length>0){const e=oT.wm.fromRangeMappings(s.flatMap((e=>e.rangeMappings)));return[new MJ(e,!0,kM.DiffEditorSelectionToolbar,void 0,i.model.original.uri,i.model.modified.uri)]}const r=this._currentDiff.read(t);return n.mappings.map((e=>new MJ(e.lineRangeMapping.withInnerChangesFromLineRanges(),e.lineRangeMapping===r?.lineRangeMapping,kM.DiffEditorHunkToolbar,void 0,i.model.original.uri,i.model.modified.uri)))},createView:(e,t)=>this._instantiationService.createInstance(TJ,e,t,this)})),this._register(EL(this.elements.gutter,gE.MOUSE_WHEEL,(e=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new mJ(this._editors.modifiedModel.get()),n=new mJ(this._editors.original.getModel()),s=new fJ.mF(t.map((e=>e.toTextEdit(i))));return s.apply(n)}layout(e){this.elements.gutter.style.left=e+"px"}};EJ=xJ([kJ(6,eM._Y),kJ(7,mM.fN),kJ(8,LM)],EJ);class MJ{constructor(e,t,i,n,s,r){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=n,this.originalUri=s,this.modifiedUri=r}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let TJ=class extends Mx.jG{constructor(e,t,i,n){super(),this._item=e,this._elements=OE("div.gutterItem",{style:{height:"20px",width:"34px"}},[OE("div.background@background",{},[]),OE("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,(e=>e.showAlways)),this._menuId=this._item.map(this,(e=>e.menuId)),this._isSmall=(0,sP.FY)(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const s=this._register(n.createInstance(nD,"element",!0,{position:{hoverPosition:1}}));this._register(FY(t,this._elements.root)),this._register((0,sP.fm)((e=>{const t=this._showAlways.read(e);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",t),setTimeout((()=>{this._elements.root.classList.toggle("noTransition",!1)}),0)}))),this._register((0,sP.yC)(((e,t)=>{this._elements.buttons.replaceChildren();const r=t.add(n.createInstance(SJ,this._elements.buttons,this._menuId.read(e),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(e)?1:3},hiddenItemStrategy:0,actionRunner:new pJ((()=>{const e=this._item.get(),t=e.mapping;return{mapping:t,originalWithModifiedChanges:i.computeStagedValue(t),originalUri:e.originalUri,modifiedUri:e.modifiedUri}})),menuOptions:{shouldForwardArgs:!0}}));t.add(r.onDidChangeMenuItems((()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)})))})))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(1===this._item.get().mapping.original.startLineNumber&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const n=e.length/2-i/2,s=i;let r=e.start+n;const o=QY.L.tryCreate(s,t.endExclusive-s-i),a=QY.L.tryCreate(e.start+s,e.endExclusive-i-s);a&&o&&a.start<a.endExclusive&&(r=o.clip(r),r=a.clip(r)),this._elements.buttons.style.top=r-e.start+"px"}};TJ=xJ([kJ(3,eM._Y)],TJ);var DJ=i(414),NJ=i(3303);function IJ(e){return AJ.get(e)}class AJ extends Mx.jG{static#e=(()=>this._map=new Map)();static get(e){let t=AJ._map.get(e);if(!t){t=new AJ(e),AJ._map.set(e,t);const i=e.onDidDispose((()=>{const t=AJ._map.get(e);t&&(AJ._map.delete(e),t.dispose(),i.dispose())}))}return t}_beginUpdate(){this._updateCounter++,1===this._updateCounter&&(this._currentTransaction=new NJ.XL((()=>{})))}_endUpdate(){if(this._updateCounter--,0===this._updateCounter){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=(0,sP.FY)(this,this.editor.getModel()),this.model=this._model,this.isReadonly=(0,sP.y0)(this,this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(92))),this._versionId=(0,sP.Zh)({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null),this.versionId=this._versionId,this._selections=(0,sP.Zh)({owner:this,equalsFn:(0,DJ.KC)((0,DJ.S3)(jG.L.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=(0,sP.y0)(this,(e=>{const t=this.editor.onDidFocusEditorWidget(e),i=this.editor.onDidBlurEditorWidget(e);return{dispose(){t.dispose(),i.dispose()}}}),(()=>this.editor.hasWidgetFocus())),this.value=(0,AY.dQ)(this,(e=>(this.versionId.read(e),this.model.read(e)?.getValue()??"")),((e,t)=>{const i=this.model.get();null!==i&&e!==i.getValue()&&i.setValue(e)})),this.valueIsEmpty=(0,sP.un)(this,(e=>(this.versionId.read(e),0===this.editor.getModel()?.getValueLength()))),this.cursorSelection=(0,sP.C)({owner:this,equalsFn:(0,DJ.KC)(jG.L.selectionsEqual)},(e=>this.selections.read(e)?.[0]??null)),this.onDidType=(0,sP.Yd)(this),this.scrollTop=(0,sP.y0)(this.editor.onDidScrollChange,(()=>this.editor.getScrollTop())),this.scrollLeft=(0,sP.y0)(this.editor.onDidScrollChange,(()=>this.editor.getScrollLeft())),this.layoutInfo=(0,sP.y0)(this.editor.onDidLayoutChange,(()=>this.editor.getLayoutInfo())),this.layoutInfoContentLeft=this.layoutInfo.map((e=>e.contentLeft)),this.layoutInfoDecorationsLeft=this.layoutInfo.map((e=>e.decorationsLeft)),this.contentWidth=(0,sP.y0)(this.editor.onDidContentSizeChange,(()=>this.editor.getContentWidth())),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate((()=>this._beginUpdate()))),this._register(this.editor.onEndUpdate((()=>this._endUpdate()))),this._register(this.editor.onDidChangeModel((()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}}))),this._register(this.editor.onDidType((e=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,e)}finally{this._endUpdate()}}))),this._register(this.editor.onDidChangeModelContent((e=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,e),this._forceUpdate()}finally{this._endUpdate()}}))),this._register(this.editor.onDidChangeCursorSelection((e=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,e),this._forceUpdate()}finally{this._endUpdate()}})))}forceUpdate(e){this._beginUpdate();try{if(this._forceUpdate(),!e)return;return e(this._currentTransaction)}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return(0,sP.y0)(this,(t=>this.editor.onDidChangeConfiguration((i=>{i.hasChanged(e)&&t(void 0)}))),(()=>this.editor.getOption(e)))}setDecorations(e){const t=new Mx.Cm,i=this.editor.createDecorationsCollection();return t.add((0,sP.zL)({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},(t=>{const n=e.read(t);i.set(n)}))),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const n=(0,sP.fm)((t=>{e.position.read(t),e.minContentWidthInPx.read(t),this.editor.layoutOverlayWidget(i)}));return(0,Mx.s)((()=>{n.dispose(),this.editor.removeOverlayWidget(i)}))}}var RJ,PJ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},OJ=function(e,t){return function(i,n){t(i,n,e)}};let FJ=class extends Mx.jG{static#e=(()=>RJ=this)();static#t=(()=>this._breadcrumbsSourceFactory=(0,sP.FY)(RJ,(()=>({dispose(){},getBreadcrumbItems:(e,t)=>[]}))))();static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=n,this._modifiedOutlineSource=(0,AY.a0)(this,(e=>{const t=this._editors.modifiedModel.read(e),i=RJ._breadcrumbsSourceFactory.read(e);return t&&i?i(t,this._instantiationService):void 0})),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition((e=>{if(1===e.reason)return;const t=this._diffModel.get();(0,sP.Rn)((e=>{for(const i of this._editors.original.getSelections()||[])t?.ensureOriginalLineIsVisible(i.getStartPosition().lineNumber,0,e),t?.ensureOriginalLineIsVisible(i.getEndPosition().lineNumber,0,e)}))}))),this._register(this._editors.modified.onDidChangeCursorPosition((e=>{if(1===e.reason)return;const t=this._diffModel.get();(0,sP.Rn)((e=>{for(const i of this._editors.modified.getSelections()||[])t?.ensureModifiedLineIsVisible(i.getStartPosition().lineNumber,0,e),t?.ensureModifiedLineIsVisible(i.getEndPosition().lineNumber,0,e)}))})));const s=this._diffModel.map(((e,t)=>{const i=e?.unchangedRegions.read(t)??[];return 1===i.length&&1===i[0].modifiedLineNumber&&i[0].lineCount===this._editors.modifiedModel.read(t)?.getLineCount()?[]:i}));this.viewZones=(0,sP.rm)(this,((e,t)=>{const i=this._modifiedOutlineSource.read(e);if(!i)return{origViewZones:[],modViewZones:[]};const n=[],r=[],o=this._options.renderSideBySide.read(e),a=this._options.compactMode.read(e),l=s.read(e);for(let s=0;s<l.length;s++){const h=l[s];if(!h.shouldHideControls(e)&&(!a||0!==s&&s!==l.length-1))if(a){{const e=(0,sP.un)(this,(e=>h.getHiddenOriginalRange(e).startLineNumber-1)),i=new WY(e,12);n.push(i),t.add(new BJ(this._editors.original,i,h,!o))}{const e=(0,sP.un)(this,(e=>h.getHiddenModifiedRange(e).startLineNumber-1)),i=new WY(e,12);r.push(i),t.add(new BJ(this._editors.modified,i,h))}}else{{const e=(0,sP.un)(this,(e=>h.getHiddenOriginalRange(e).startLineNumber-1)),s=new WY(e,24);n.push(s),t.add(new zJ(this._editors.original,s,h,h.originalUnchangedRange,!o,i,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}{const e=(0,sP.un)(this,(e=>h.getHiddenModifiedRange(e).startLineNumber-1)),n=new WY(e,24);r.push(n),t.add(new zJ(this._editors.modified,n,h,h.modifiedUnchangedRange,!1,i,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}}}return{origViewZones:n,modViewZones:r}}));const r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},o={description:"Fold Unchanged",glyphMarginHoverMessage:new VN(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,WS.kg)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+cM.L.asClassName(vD.W.fold),zIndex:10001};this._register(OY(this._editors.original,(0,sP.un)(this,(e=>{const t=s.read(e),i=t.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:r})));for(const n of t)n.shouldHideControls(e)&&i.push({range:JM.Q.fromPositions(new OA.y(n.originalLineNumber,1)),options:o});return i})))),this._register(OY(this._editors.modified,(0,sP.un)(this,(e=>{const t=s.read(e),i=t.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:r})));for(const n of t)n.shouldHideControls(e)&&i.push({range:aT.M.ofLength(n.modifiedLineNumber,1).toInclusiveRange(),options:o});return i})))),this._register((0,sP.fm)((e=>{const t=s.read(e);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(t.map((t=>t.getHiddenOriginalRange(e).toInclusiveRange())).filter(gM.O9)),this._editors.modified.setHiddenAreas(t.map((t=>t.getHiddenModifiedRange(e).toInclusiveRange())).filter(gM.O9))}finally{this._isUpdatingHiddenAreas=!1}}))),this._register(this._editors.modified.onMouseUp((e=>{if(!e.event.rightButton&&e.target.position&&e.target.element?.className.includes("fold-unchanged")){const t=e.target.position.lineNumber,i=this._diffModel.get();if(!i)return;const n=i.unchangedRegions.get().find((e=>e.modifiedUnchangedRange.includes(t)));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),this._register(this._editors.original.onMouseUp((e=>{if(!e.event.rightButton&&e.target.position&&e.target.element?.className.includes("fold-unchanged")){const t=e.target.position.lineNumber,i=this._diffModel.get();if(!i)return;const n=i.unchangedRegions.get().find((e=>e.originalUnchangedRange.includes(t)));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}})))}};FJ=RJ=PJ([OJ(3,eM._Y)],FJ);class BJ extends VY{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=OE("div.diff-hidden-lines-widget");super(e,t,s.root),this._unchangedRegion=i,this._hide=n,this._nodes=OE("div.diff-hidden-lines-compact",[OE("div.line-left",[]),OE("div.text@text",[]),OE("div.line-right",[])]),s.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register((0,sP.fm)((e=>{if(!this._hide){const t=this._unchangedRegion.getHiddenModifiedRange(e).length,i=(0,WS.kg)("hiddenLines","{0} hidden lines",t);this._nodes.text.innerText=i}})))}}class zJ extends VY{constructor(e,t,i,n,s,r,o,a){const l=OE("div.diff-hidden-lines-widget");super(e,t,l.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=n,this._hide=s,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=o,this._options=a,this._nodes=OE("div.diff-hidden-lines",[OE("div.top@top",{title:(0,WS.kg)("diff.hiddenLines.top","Click or drag to show more above")}),OE("div.center@content",{style:{display:"flex"}},[OE("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[xE("a",{title:(0,WS.kg)("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...KD("$(unfold)"))]),OE("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),OE("div.bottom@bottom",{title:(0,WS.kg)("diff.bottom","Click or drag to show more below"),role:"button"})]),l.root.appendChild(this._nodes.root),this._hide?yE(this._nodes.first):this._register(UY(this._nodes.first,{width:IJ(this._editor).layoutInfoContentLeft})),this._register((0,sP.fm)((e=>{const t=this._unchangedRegion.visibleLineCountTop.read(e)+this._unchangedRegion.visibleLineCountBottom.read(e)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!t),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),this._nodes.top.classList.toggle("canMoveBottom",!t);const i=this._unchangedRegion.isDragged.read(e),n=this._editor.getDomNode();n&&(n.classList.toggle("draggingUnchangedRegion",!!i),"top"===i?(n.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),n.classList.toggle("canMoveBottom",!t)):"bottom"===i?(n.classList.toggle("canMoveTop",!t),n.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0)):(n.classList.toggle("canMoveTop",!1),n.classList.toggle("canMoveBottom",!1)))})));const h=this._editor;this._register(EL(this._nodes.top,"mousedown",(e=>{if(0!==e.button)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const t=e.clientY;let i=!1;const n=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const s=fL(this._nodes.top),r=EL(s,"mousemove",(e=>{const s=e.clientY-t;i=i||Math.abs(s)>2;const r=Math.round(s/h.getOption(67)),o=Math.max(0,Math.min(n+r,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(o,void 0)})),o=EL(s,"mouseup",(e=>{i||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),r.dispose(),o.dispose()}))}))),this._register(EL(this._nodes.bottom,"mousedown",(e=>{if(0!==e.button)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const t=e.clientY;let i=!1;const n=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const s=fL(this._nodes.bottom),r=EL(s,"mousemove",(e=>{const s=e.clientY-t;i=i||Math.abs(s)>2;const r=Math.round(s/h.getOption(67)),o=Math.max(0,Math.min(n-r,this._unchangedRegion.getMaxVisibleLineCountBottom())),a=this._unchangedRegionRange.endLineNumberExclusive>h.getModel().getLineCount()?h.getContentHeight():h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(o,void 0);const l=this._unchangedRegionRange.endLineNumberExclusive>h.getModel().getLineCount()?h.getContentHeight():h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(l-a))})),o=EL(s,"mouseup",(e=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!i){const e=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const t=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(t-e))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),r.dispose(),o.dispose()}))}))),this._register((0,sP.fm)((e=>{const t=[];if(!this._hide){const n=i.getHiddenModifiedRange(e).length,s=(0,WS.kg)("hiddenLines","{0} hidden lines",n),r=xE("span",{title:(0,WS.kg)("diff.hiddenLines.expandAll","Double click to unfold")},s);r.addEventListener("dblclick",(e=>{0===e.button&&(e.preventDefault(),this._unchangedRegion.showAll(void 0))})),t.push(r);const o=this._unchangedRegion.getHiddenModifiedRange(e),a=this._modifiedOutlineSource.getBreadcrumbItems(o,e);if(a.length>0){t.push(xE("span",void 0,"\xa0\xa0|\xa0\xa0"));for(let e=0;e<a.length;e++){const i=a[e],n=OE("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[$D(RI.gP.toIcon(i.kind)),"\xa0",i.name,...e===a.length-1?[]:[$D(vD.W.chevronRight)]]).root;t.push(n),n.onclick=()=>{this._revealModifiedHiddenLine(i.startLineNumber)}}}}yE(this._nodes.others,...t)})))}}var VJ,WJ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},HJ=function(e,t){return function(i,n){t(i,n,e)}};let UJ=class extends Mx.jG{static#e=(()=>VJ=this)();static#t=(()=>this.ONE_OVERVIEW_WIDTH=15)();static#i=(()=>this.ENTIRE_DIFF_OVERVIEW_WIDTH=2*this.ONE_OVERVIEW_WIDTH)();constructor(e,t,i,n,s,r,o){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=n,this._rootHeight=s,this._modifiedEditorLayoutInfo=r,this._themeService=o,this.width=VJ.ENTIRE_DIFF_OVERVIEW_WIDTH;const a=(0,sP.y0)(this._themeService.onDidColorThemeChange,(()=>this._themeService.getColorTheme())),l=(0,sP.un)((e=>{const t=a.read(e);return{insertColor:t.getColor(ZT.ld8)||(t.getColor(ZT.Gj6)||ZT.EY1).transparent(2),removeColor:t.getColor(ZT.$BZ)||(t.getColor(ZT.GNm)||ZT.ZEf).transparent(2)}})),h=UE(document.createElement("div"));h.setClassName("diffViewport"),h.setPosition("absolute");const c=OE("div.diffOverview",{style:{position:"absolute",top:"0px",width:VJ.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(FY(c,h.domNode)),this._register(TL(c,gE.POINTER_DOWN,(e=>{this._editors.modified.delegateVerticalScrollbarPointerDown(e)}))),this._register(EL(c,gE.MOUSE_WHEEL,(e=>{this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),this._register(FY(this._rootElement,c)),this._register((0,sP.yC)(((e,t)=>{const i=this._diffModel.read(e),n=this._editors.original.createOverviewRuler("original diffOverviewRuler");n&&(t.add(n),t.add(FY(c,n.getDomNode())));const s=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(s&&(t.add(s),t.add(FY(c,s.getDomNode()))),!n||!s)return;const r=(0,sP.yQ)("viewZoneChanged",this._editors.original.onDidChangeViewZones),o=(0,sP.yQ)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),a=(0,sP.yQ)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),d=(0,sP.yQ)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);t.add((0,sP.fm)((e=>{r.read(e),o.read(e),a.read(e),d.read(e);const t=l.read(e),h=i?.diff.read(e)?.mappings;function c(e,t,i){const n=i._getViewModel();return n?e.filter((e=>e.length>0)).map((e=>{const i=n.coordinatesConverter.convertModelPositionToViewPosition(new OA.y(e.startLineNumber,1)),s=n.coordinatesConverter.convertModelPositionToViewPosition(new OA.y(e.endLineNumberExclusive,1)),r=s.lineNumber-i.lineNumber;return new Yq(i.lineNumber,s.lineNumber,r,t.toString())})):[]}const u=c((h||[]).map((e=>e.lineRangeMapping.original)),t.removeColor,this._editors.original),g=c((h||[]).map((e=>e.lineRangeMapping.modified)),t.insertColor,this._editors.modified);n?.setZones(u),s?.setZones(g)}))),t.add((0,sP.fm)((e=>{const t=this._rootHeight.read(e),i=this._rootWidth.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(r){const i=VJ.ENTIRE_DIFF_OVERVIEW_WIDTH-2*VJ.ONE_OVERVIEW_WIDTH;n.setLayout({top:0,height:t,right:i+VJ.ONE_OVERVIEW_WIDTH,width:VJ.ONE_OVERVIEW_WIDTH}),s.setLayout({top:0,height:t,right:0,width:VJ.ONE_OVERVIEW_WIDTH});const o=this._editors.modifiedScrollTop.read(e),a=this._editors.modifiedScrollHeight.read(e),l=this._editors.modified.getOption(104),c=new _D(l.verticalHasArrows?l.arrowSize:0,l.verticalScrollbarSize,0,r.height,a,o);h.setTop(c.getSliderPosition()),h.setHeight(c.getSliderSize())}else h.setTop(0),h.setHeight(0);c.style.height=t+"px",c.style.left=i-VJ.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",h.setWidth(VJ.ENTIRE_DIFF_OVERVIEW_WIDTH)})))})))}};UJ=VJ=WJ([HJ(6,bT.Gy)],UJ);const jJ=[];class GJ extends Mx.jG{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=n,this._selectedDiffs=(0,sP.un)(this,(e=>{const t=this._diffModel.read(e),i=t?.diff.read(e);if(!i)return jJ;const n=this._editors.modifiedSelections.read(e);if(n.every((e=>e.isEmpty())))return jJ;const s=new aT.S(n.map((e=>aT.M.fromRangeInclusive(e)))),r=i.mappings.filter((e=>e.lineRangeMapping.innerChanges&&s.intersects(e.lineRangeMapping.modified))).map((e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((e=>n.some((t=>JM.Q.areIntersecting(e.modifiedRange,t)))))})));return 0===r.length||r.every((e=>0===e.rangeMappings.length))?jJ:r})),this._register((0,sP.yC)(((e,t)=>{if(!this._options.shouldRenderOldRevertArrows.read(e))return;const i=this._diffModel.read(e),n=i?.diff.read(e);if(!i||!n)return;if(i.movedTextToCompare.read(e))return;const s=[],r=this._selectedDiffs.read(e),o=new Set(r.map((e=>e.mapping)));if(r.length>0){const i=this._editors.modifiedSelections.read(e),n=t.add(new KJ(i[i.length-1].positionLineNumber,this._widget,r.flatMap((e=>e.rangeMappings)),!0));this._editors.modified.addGlyphMarginWidget(n),s.push(n)}for(const a of n.mappings)if(!o.has(a)&&!a.lineRangeMapping.modified.isEmpty&&a.lineRangeMapping.innerChanges){const e=t.add(new KJ(a.lineRangeMapping.modified.startLineNumber,this._widget,a.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(e),s.push(e)}t.add((0,Mx.s)((()=>{for(const e of s)this._editors.modified.removeGlyphMarginWidget(e)})))})))}}class KJ extends Mx.jG{static#e=(()=>this.counter=0)();getId(){return this._id}constructor(e,t,i,n){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=n,this._id="revertButton"+KJ.counter++,this._domNode=OE("div.revertButton",{title:this._revertSelection?(0,WS.kg)("revertSelectedChanges","Revert Selected Changes"):(0,WS.kg)("revertChange","Revert Change")},[$D(vD.W.arrowRight)]).root,this._register(EL(this._domNode,gE.MOUSE_DOWN,(e=>{2!==e.button&&(e.stopPropagation(),e.preventDefault())}))),this._register(EL(this._domNode,gE.MOUSE_UP,(e=>{e.stopPropagation(),e.preventDefault()}))),this._register(EL(this._domNode,gE.CLICK,(e=>{this._diffs instanceof oT.WL?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),e.stopPropagation(),e.preventDefault()})))}getDomNode(){return this._domNode}getPosition(){return{lane:IU.ZS.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}var $J=i(1089);function qJ(e,t,i){const n=e.bindTo(t);return(0,sP.zL)({debugName:()=>`Set Context Key "${e.key}"`},(e=>{n.set(i(e))}))}var QJ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},XJ=function(e,t){return function(i,n){t(i,n,e)}};let YJ=class extends Mx.jG{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,n,s,r,o){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=n,this._createInnerEditor=s,this._instantiationService=r,this._keybindingService=o,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new rk.vl),this.modifiedScrollTop=(0,sP.y0)(this,this.modified.onDidScrollChange,(()=>this.modified.getScrollTop())),this.modifiedScrollHeight=(0,sP.y0)(this,this.modified.onDidScrollChange,(()=>this.modified.getScrollHeight())),this.modifiedObs=IJ(this.modified),this.originalObs=IJ(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=(0,sP.y0)(this,this.modified.onDidChangeCursorSelection,(()=>this.modified.getSelections()??[])),this.modifiedCursor=(0,sP.C)({owner:this,equalsFn:OA.y.equals},(e=>this.modifiedSelections.read(e)[0]?.getPosition()??new OA.y(1,1))),this.originalCursor=(0,sP.y0)(this,this.original.onDidChangeCursorPosition,(()=>this.original.getPosition()??new OA.y(1,1))),this._argCodeEditorWidgetOptions=null,this._register((0,sP.Y)({createEmptyChangeSummary:()=>({}),handleChange:(e,t)=>(e.didChange(i.editorOptions)&&Object.assign(t,e.change.changedOptions),!0)},((e,t)=>{i.editorOptions.read(e),this._options.renderSideBySide.read(e),this.modified.updateOptions(this._adjustOptionsForRightHandSide(e,t)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(e,t))})))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(e,t,i,n){const s=this._createInnerEditor(e,t,i,n);return this._register(s.onDidContentSizeChange((e=>{const t=this.original.getContentWidth()+this.modified.getContentWidth()+UJ.ENTIRE_DIFF_OVERVIEW_WIDTH,i=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:i,contentWidth:t,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),s}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=kx.revealHorizontalRightPadding.defaultValue+UJ.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){e||(e="");const t=(0,WS.kg)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp")?.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};YJ=QJ([XJ(5,eM._Y),XJ(6,oD)],YJ);class ZJ extends Mx.jG{constructor(){super(...arguments),this._id=++ZJ.idCounter,this._onDidDispose=this._register(new rk.vl),this.onDidDispose=this._onDidDispose.event}static#e=(()=>this.idCounter=0)();getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setPosition(e,t)}revealLine(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLine(e,t)}revealLineInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineNearTop(e,t)}revealPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelection(e,t)}setSelections(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelections(e,t)}revealLines(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._targetEditor.revealRange(e,t,i,n)}revealRangeInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}var JJ=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},e0=function(e,t){return function(i,n){t(i,n,e)}};let t0=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=(0,sP.FY)(this,0),this._screenReaderMode=(0,sP.y0)(this,this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>this._accessibilityService.isScreenReaderOptimized())),this.couldShowInlineViewBecauseOfSize=(0,sP.un)(this,(e=>this._options.read(e).renderSideBySide&&this._diffEditorWidth.read(e)<=this._options.read(e).renderSideBySideInlineBreakpoint)),this.renderOverviewRuler=(0,sP.un)(this,(e=>this._options.read(e).renderOverviewRuler)),this.renderSideBySide=(0,sP.un)(this,(e=>(!this.compactMode.read(e)||!this.shouldRenderInlineViewInSmartMode.read(e))&&(this._options.read(e).renderSideBySide&&!(this._options.read(e).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(e)&&!this._screenReaderMode.read(e))))),this.readOnly=(0,sP.un)(this,(e=>this._options.read(e).readOnly)),this.shouldRenderOldRevertArrows=(0,sP.un)(this,(e=>!!this._options.read(e).renderMarginRevertIcon&&(!!this.renderSideBySide.read(e)&&(!this.readOnly.read(e)&&!this.shouldRenderGutterMenu.read(e))))),this.shouldRenderGutterMenu=(0,sP.un)(this,(e=>this._options.read(e).renderGutterMenu)),this.renderIndicators=(0,sP.un)(this,(e=>this._options.read(e).renderIndicators)),this.enableSplitViewResizing=(0,sP.un)(this,(e=>this._options.read(e).enableSplitViewResizing)),this.splitViewDefaultRatio=(0,sP.un)(this,(e=>this._options.read(e).splitViewDefaultRatio)),this.ignoreTrimWhitespace=(0,sP.un)(this,(e=>this._options.read(e).ignoreTrimWhitespace)),this.maxComputationTimeMs=(0,sP.un)(this,(e=>this._options.read(e).maxComputationTime)),this.showMoves=(0,sP.un)(this,(e=>this._options.read(e).experimental.showMoves&&this.renderSideBySide.read(e))),this.isInEmbeddedEditor=(0,sP.un)(this,(e=>this._options.read(e).isInEmbeddedEditor)),this.diffWordWrap=(0,sP.un)(this,(e=>this._options.read(e).diffWordWrap)),this.originalEditable=(0,sP.un)(this,(e=>this._options.read(e).originalEditable)),this.diffCodeLens=(0,sP.un)(this,(e=>this._options.read(e).diffCodeLens)),this.accessibilityVerbose=(0,sP.un)(this,(e=>this._options.read(e).accessibilityVerbose)),this.diffAlgorithm=(0,sP.un)(this,(e=>this._options.read(e).diffAlgorithm)),this.showEmptyDecorations=(0,sP.un)(this,(e=>this._options.read(e).experimental.showEmptyDecorations)),this.onlyShowAccessibleDiffViewer=(0,sP.un)(this,(e=>this._options.read(e).onlyShowAccessibleDiffViewer)),this.compactMode=(0,sP.un)(this,(e=>this._options.read(e).compactMode)),this.trueInlineDiffRenderingEnabled=(0,sP.un)(this,(e=>this._options.read(e).experimental.useTrueInlineView)),this.useTrueInlineDiffRendering=(0,sP.un)(this,(e=>!this.renderSideBySide.read(e)&&this.trueInlineDiffRenderingEnabled.read(e))),this.hideUnchangedRegions=(0,sP.un)(this,(e=>this._options.read(e).hideUnchangedRegions.enabled)),this.hideUnchangedRegionsRevealLineCount=(0,sP.un)(this,(e=>this._options.read(e).hideUnchangedRegions.revealLineCount)),this.hideUnchangedRegionsContextLineCount=(0,sP.un)(this,(e=>this._options.read(e).hideUnchangedRegions.contextLineCount)),this.hideUnchangedRegionsMinimumLineCount=(0,sP.un)(this,(e=>this._options.read(e).hideUnchangedRegions.minimumLineCount)),this._model=(0,sP.FY)(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,(e=>(0,$J.t)(this,(t=>{const i=e?.diff.read(t);return i?function(e,t){return e.mappings.every((e=>0===e.lineRangeMapping.original.length||function(e){return 0===e.modified.length}(e.lineRangeMapping)||t&&sJ(e.lineRangeMapping)))}(i,this.trueInlineDiffRenderingEnabled.read(t)):void 0})))).flatten().map(this,(e=>!!e)),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...i0(e,TA)};this._options=(0,sP.FY)(this,i)}updateOptions(e){const t=i0(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};function i0(e,t){return{enableSplitViewResizing:QS(e.enableSplitViewResizing,t.enableSplitViewResizing),splitViewDefaultRatio:JS(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:QS(e.renderSideBySide,t.renderSideBySide),renderMarginRevertIcon:QS(e.renderMarginRevertIcon,t.renderMarginRevertIcon),maxComputationTime:YS(e.maxComputationTime,t.maxComputationTime,0,1073741824),maxFileSize:YS(e.maxFileSize,t.maxFileSize,0,1073741824),ignoreTrimWhitespace:QS(e.ignoreTrimWhitespace,t.ignoreTrimWhitespace),renderIndicators:QS(e.renderIndicators,t.renderIndicators),originalEditable:QS(e.originalEditable,t.originalEditable),diffCodeLens:QS(e.diffCodeLens,t.diffCodeLens),renderOverviewRuler:QS(e.renderOverviewRuler,t.renderOverviewRuler),diffWordWrap:ix(e.diffWordWrap,t.diffWordWrap,["off","on","inherit"]),diffAlgorithm:ix(e.diffAlgorithm,t.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:QS(e.accessibilityVerbose,t.accessibilityVerbose),experimental:{showMoves:QS(e.experimental?.showMoves,t.experimental.showMoves),showEmptyDecorations:QS(e.experimental?.showEmptyDecorations,t.experimental.showEmptyDecorations),useTrueInlineView:QS(e.experimental?.useTrueInlineView,t.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:QS(e.hideUnchangedRegions?.enabled??e.experimental?.collapseUnchangedRegions,t.hideUnchangedRegions.enabled),contextLineCount:YS(e.hideUnchangedRegions?.contextLineCount,t.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:YS(e.hideUnchangedRegions?.minimumLineCount,t.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:YS(e.hideUnchangedRegions?.revealLineCount,t.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:QS(e.isInEmbeddedEditor,t.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:QS(e.onlyShowAccessibleDiffViewer,t.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:YS(e.renderSideBySideInlineBreakpoint,t.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:QS(e.useInlineViewWhenSpaceIsLimited,t.useInlineViewWhenSpaceIsLimited),renderGutterMenu:QS(e.renderGutterMenu,t.renderGutterMenu),compactMode:QS(e.compactMode,t.compactMode)}}t0=JJ([e0(1,GI)],t0);var n0=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},s0=function(e,t){return function(i,n){t(i,n,e)}};let r0=class extends ZJ{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,n,s,r,o,a){super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=s,this._accessibilitySignalService=o,this._editorProgressService=a,this.elements=OE("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[OE("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),OE("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),OE("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register((0,sP.X2)(this,void 0)),this._diffModel=(0,sP.un)(this,(e=>this._diffModelSrc.read(e)?.object)),this.onDidChangeModel=rk.Jh.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new UH([mM.fN,this._contextKeyService]))),this._boundarySashes=(0,sP.FY)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,sP.FY)(this,!1),this._accessibleDiffViewerVisible=(0,sP.un)(this,(e=>!!this._options.onlyShowAccessibleDiffViewer.read(e)||this._accessibleDiffViewerShouldBeVisible.read(e))),this._movedBlocksLinesPart=(0,sP.FY)(this,void 0),this._layoutInfo=(0,sP.un)(this,(e=>{const t=this._rootSizeObserver.width.read(e),i=this._rootSizeObserver.height.read(e);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=i+"px";const n=this._sash.read(e),s=this._gutter.read(e),r=s?.width.read(e)??0,o=this._overviewRulerPart.read(e)?.width??0;let a,l,h,c,d;if(!!n){const i=n.sashLeft.read(e);a=0,l=i-r-(this._movedBlocksLinesPart.read(e)?.width.read(e)??0),d=i-r,h=i,c=t-h-o}else{d=0;a=r,l=this._options.inlineViewHideOriginalLineNumbers.read(e)?0:Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(e)),h=r+l,c=t-h-o}return this.elements.original.style.left=a+"px",this.elements.original.style.width=l+"px",this._editors.original.layout({width:l,height:i},!0),s?.layout(d),this.elements.modified.style.left=h+"px",this.elements.modified.style.width=c+"px",this._editors.modified.layout({width:c,height:i},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}})),this._diffValue=this._diffModel.map(((e,t)=>e?.diff.read(t))),this.onDidUpdateDiff=rk.Jh.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,Mx.s)((()=>this.elements.root.remove()))),this._rootSizeObserver=this._register(new BY(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(t0,t),this._register((0,sP.fm)((e=>{this._options.setWidth(this._rootSizeObserver.width.read(e))}))),this._contextKeyService.createKey(D$.isEmbeddedDiffEditor.key,!1),this._register(qJ(D$.isEmbeddedDiffEditor,this._contextKeyService,(e=>this._options.isInEmbeddedEditor.read(e)))),this._register(qJ(D$.comparingMovedCode,this._contextKeyService,(e=>!!this._diffModel.read(e)?.movedTextToCompare.read(e)))),this._register(qJ(D$.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,(e=>this._options.couldShowInlineViewBecauseOfSize.read(e)))),this._register(qJ(D$.diffEditorInlineMode,this._contextKeyService,(e=>!this._options.renderSideBySide.read(e)))),this._register(qJ(D$.hasChanges,this._contextKeyService,(e=>(this._diffModel.read(e)?.diff.read(e)?.mappings.length??0)>0))),this._editors=this._register(this._instantiationService.createInstance(YJ,this.elements.original,this.elements.modified,this._options,i,((e,t,i,n)=>this._createInnerEditor(e,t,i,n)))),this._register(qJ(D$.diffEditorOriginalWritable,this._contextKeyService,(e=>this._options.originalEditable.read(e)))),this._register(qJ(D$.diffEditorModifiedWritable,this._contextKeyService,(e=>!this._options.readOnly.read(e)))),this._register(qJ(D$.diffEditorOriginalUri,this._contextKeyService,(e=>this._diffModel.read(e)?.model.original.uri.toString()??""))),this._register(qJ(D$.diffEditorModifiedUri,this._contextKeyService,(e=>this._diffModel.read(e)?.model.modified.uri.toString()??""))),this._overviewRulerPart=(0,AY.a0)(this,(e=>this._options.renderOverviewRuler.read(e)?this._instantiationService.createInstance(RZ(UJ,e),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map((e=>e.modifiedEditor))):void 0)).recomputeInitiallyAndOnChange(this._store);const l={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map(((e,t)=>e-(this._overviewRulerPart.read(t)?.width??0)))};this._sashLayout=new cJ(this._options,l),this._sash=(0,AY.a0)(this,(e=>{const t=this._options.renderSideBySide.read(e);return this.elements.root.classList.toggle("side-by-side",t),t?new dJ(this.elements.root,l,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,(()=>this._sashLayout.resetSash())):void 0})).recomputeInitiallyAndOnChange(this._store);const h=(0,AY.a0)(this,(e=>this._instantiationService.createInstance(RZ(FJ,e),this._editors,this._diffModel,this._options))).recomputeInitiallyAndOnChange(this._store);(0,AY.a0)(this,(e=>this._instantiationService.createInstance(RZ(hJ,e),this._editors,this._diffModel,this._options,this))).recomputeInitiallyAndOnChange(this._store);const c=new Set,d=new Set;let u=!1;const g=(0,AY.a0)(this,(e=>this._instantiationService.createInstance(RZ(tJ,e),fL(this._domElement),this._editors,this._diffModel,this._options,this,(()=>u||h.get().isUpdatingHiddenAreas),c,d))).recomputeInitiallyAndOnChange(this._store),p=(0,sP.un)(this,(e=>{const t=g.read(e).viewZones.read(e).orig,i=h.read(e).viewZones.read(e).origViewZones;return t.concat(i)})),f=(0,sP.un)(this,(e=>{const t=g.read(e).viewZones.read(e).mod,i=h.read(e).viewZones.read(e).modViewZones;return t.concat(i)}));let m;this._register(jY(this._editors.original,p,(e=>{u=e}),c)),this._register(jY(this._editors.modified,f,(e=>{u=e,u?m=RY.capture(this._editors.modified):(m?.restore(this._editors.modified),m=void 0)}),d)),this._accessibleDiffViewer=(0,AY.a0)(this,(e=>this._instantiationService.createInstance(RZ(tZ,e),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,((e,t)=>this._accessibleDiffViewerShouldBeVisible.set(e,t)),this._options.onlyShowAccessibleDiffViewer.map((e=>!e)),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map(((e,t)=>e?.diff.read(t)?.mappings.map((e=>e.lineRangeMapping)))),new dZ(this._editors)))).recomputeInitiallyAndOnChange(this._store);const _=this._accessibleDiffViewerVisible.map((e=>e?"hidden":"visible"));this._register(UY(this.elements.modified,{visibility:_})),this._register(UY(this.elements.original,{visibility:_})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._gutter=(0,AY.a0)(this,(e=>this._options.shouldRenderGutterMenu.read(e)?this._instantiationService.createInstance(RZ(EJ,e),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0)),this._register((0,sP.OI)(this._layoutInfo)),(0,AY.a0)(this,(e=>new(RZ(oJ,e))(this.elements.root,this._diffModel,this._layoutInfo.map((e=>e.originalEditor)),this._layoutInfo.map((e=>e.modifiedEditor)),this._editors))).recomputeInitiallyAndOnChange(this._store,(e=>{this._movedBlocksLinesPart.set(e,void 0)})),this._register(rk.Jh.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,(e=>this._handleCursorPositionChange(e,!0)))),this._register(rk.Jh.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,(e=>this._handleCursorPositionChange(e,!1))));const v=this._diffModel.map(this,((e,t)=>{if(e)return void 0===e.diff.read(t)&&!e.isDiffUpToDate.read(t)}));this._register((0,sP.yC)(((e,t)=>{if(!0===v.read(e)){const e=this._editorProgressService.show(!0,1e3);t.add((0,Mx.s)((()=>e.done())))}}))),this._register((0,sP.yC)(((e,t)=>{t.add(new(RZ(GJ,e))(this._editors,this._diffModel,this._options,this))}))),this._register((0,sP.yC)(((e,t)=>{const i=this._diffModel.read(e);if(i)for(const n of[i.model.original,i.model.modified])t.add(n.onWillDispose((e=>{(0,Ux.dz)(new Ux.D7("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)})))}))),this._register((0,sP.fm)((e=>{this._options.setModel(this._diffModel.read(e))})))}_createInnerEditor(e,t,i,n){return e.createInstance(bY,t,i,n)}_createDiffEditorContributions(){const e=IM.getDiffEditorContributions();for(const i of e)try{this._register(this._instantiationService.createInstance(i.ctor,this))}catch(t){(0,Ux.dz)(t)}}get _targetEditor(){return this._editors.modified}getEditorType(){return NU.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:this._diffModel.get()?.serializeState()}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&this._diffModel.get()?.restoreSerializedState(t.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(WZ,e,this._options)}getModel(){return this._diffModel.get()?.model??null}setModel(e){const t=e?"model"in e?KY.create(e).createNewRef(this):KY.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==e?.object&&(0,sP.PO)(t,(t=>{const i=e?.object;sP.y0.batchEventsGlobally(t,(()=>{this._editors.original.setModel(i?i.model.original:null),this._editors.modified.setModel(i?i.model.modified:null)}));const n=this._diffModelSrc.get()?.createNewRef(this);this._diffModelSrc.set(e?.createNewRef(this),t),setTimeout((()=>{n?.dispose()}),0)}))}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){const e=this._diffModel.get()?.diff.get();return e?e.mappings.map((e=>{const t=e.lineRangeMapping;let i,n,s,r,o=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,n=0,o=void 0):(i=t.original.startLineNumber,n=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(s=t.modified.startLineNumber-1,r=0,o=void 0):(s=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:n,modifiedStartLineNumber:s,modifiedEndLineNumber:r,charChanges:o?.map((e=>({originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn})))}})):null}revert(e){const t=this._diffModel.get();t&&t.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map((e=>({range:e.modifiedRange,text:t.model.original.getValueInRange(e.originalRange)})));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new OA.y(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){const t=this._diffModel.get()?.diff.get()?.mappings;if(!t||0===t.length)return;const i=this._editors.modified.getPosition().lineNumber;let n;n="next"===e?t.find((e=>e.lineRangeMapping.modified.startLineNumber>i))??t[0]:(0,XQ.Uk)(t,(e=>e.lineRangeMapping.modified.startLineNumber<i))??t[t.length-1],this._goTo(n),n.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(iU.diffLineDeleted,{source:"diffEditor.goToDiff"}):n.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(iU.diffLineInserted,{source:"diffEditor.goToDiff"}):n&&this._accessibilitySignalService.playSignal(iU.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then((()=>{const t=e.diff.get()?.mappings;t&&0!==t.length&&this._goTo(t[0])}))}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let n;const s=t.getSelection();if(s){const t=this._diffModel.get()?.diff.get()?.mappings.map((t=>e?t.lineRangeMapping.flip():t.lineRangeMapping));if(t){const e=GY(s.getStartPosition(),t),i=GY(s.getEndPosition(),t);n=JM.Q.plusRange(e,i)}}return{destination:i,destinationSelection:n}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&(0,sP.Rn)((t=>{for(const i of e)i.collapseAll(t)}))}showAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&(0,sP.Rn)((t=>{for(const i of e)i.showAll(t)}))}_handleCursorPositionChange(e,t){if(3===e?.reason){const i=this._diffModel.get()?.diff.get()?.mappings.find((i=>t?i.lineRangeMapping.modified.contains(e.position.lineNumber):i.lineRangeMapping.original.contains(e.position.lineNumber)));i?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(iU.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):i?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(iU.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):i&&this._accessibilitySignalService.playSignal(iU.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};r0=n0([s0(3,mM.fN),s0(4,eM._Y),s0(5,tM),s0(6,JH),s0(7,dR)],r0);var o0=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},a0=function(e,t){return function(i,n){t(i,n,e)}};let l0=0,h0=!1;function c0(e){if(!e){if(h0)return;h0=!0}!function(e){qI=document.createElement("div"),qI.className="monaco-aria-container";const t=()=>{const e=document.createElement("div");return e.className="monaco-alert",e.setAttribute("role","alert"),e.setAttribute("aria-atomic","true"),qI.appendChild(e),e};QI=t(),XI=t();const i=()=>{const e=document.createElement("div");return e.className="monaco-status",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),qI.appendChild(e),e};YI=i(),ZI=i(),e.appendChild(qI)}(e||Ex.document.body)}let d0=class extends bY{constructor(e,t,i,n,s,r,o,a,l,h,c,d,u){const g={...t};g.ariaLabel=g.ariaLabel||LR.editorViewAccessibleLabel,super(e,g,{},i,n,s,r,l,h,c,d,u),this._standaloneKeybindingService=a instanceof fU?a:null,c0(g.ariaContainerElement),AR=(e,t)=>i.createInstance(nD,e,t,{}),BR=o}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const n="DYNAMIC_"+ ++l0,s=mM.M$.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,s),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){var t=this;if("string"!==typeof e.id||"string"!==typeof e.label||"function"!==typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Mx.jG.None;const i=e.id,n=e.label,s=mM.M$.and(mM.M$.equals("editorId",this.getId()),mM.M$.deserialize(e.precondition)),r=e.keybindings,o=mM.M$.and(s,mM.M$.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,h=function(i){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return Promise.resolve(e.run(t,...s))},c=new Mx.Cm,d=this.getId()+":"+i;if(c.add(fM.registerCommand(d,h)),a){const e={command:{id:d,title:n},when:s,group:a,order:l};c.add(MM.appendMenuItem(kM.EditorContext,e))}if(Array.isArray(r))for(const g of r)c.add(this._standaloneKeybindingService.addDynamicKeybinding(d,g,h,o));const u=new FQ(d,n,n,void 0,s,(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return Promise.resolve(e.run(t,...n))}),this._contextKeyService);return this._actions.set(i,u),c.add((0,Mx.s)((()=>{this._actions.delete(i)}))),c}_triggerCommand(e,t){if(this._codeEditorService instanceof LT)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};d0=o0([a0(2,eM._Y),a0(3,tM),a0(4,pM),a0(5,mM.fN),a0(6,iD),a0(7,oD),a0(8,bT.Gy),a0(9,PT),a0(10,GI),a0(11,eT.JZ),a0(12,sT.ILanguageFeaturesService)],d0);let u0=class extends d0{constructor(e,t,i,n,s,r,o,a,l,h,c,d,u,g,p,f){const m={...t};CU(c,m,!1);const _=l.registerEditorContainer(e);"string"===typeof m.theme&&l.setTheme(m.theme),"undefined"!==typeof m.autoDetectHighContrast&&l.setAutoDetectHighContrast(Boolean(m.autoDetectHighContrast));const v=m.model;let b;if(delete m.model,super(e,m,i,n,s,r,o,a,l,h,d,p,f),this._configurationService=c,this._standaloneThemeService=l,this._register(_),"undefined"===typeof v){const e=g.getLanguageIdByMimeType(m.language)||m.language||II.vH;b=p0(u,g,m.value||"",e,void 0),this._ownsModel=!0}else b=v,this._ownsModel=!1;if(this._attachModel(b),b){const e={oldModelUrl:null,newModelUrl:b.uri};this._onDidChangeModel.fire(e)}}dispose(){super.dispose()}updateOptions(e){CU(this._configurationService,e,!1),"string"===typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),"undefined"!==typeof e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};u0=o0([a0(2,eM._Y),a0(3,tM),a0(4,pM),a0(5,mM.fN),a0(6,iD),a0(7,oD),a0(8,oH),a0(9,PT),a0(10,JT.pG),a0(11,GI),a0(12,iM.IModelService),a0(13,NI.L),a0(14,eT.JZ),a0(15,sT.ILanguageFeaturesService)],u0);let g0=class extends r0{constructor(e,t,i,n,s,r,o,a,l,h,c,d){const u={...t};CU(a,u,!0);const g=r.registerEditorContainer(e);"string"===typeof u.theme&&r.setTheme(u.theme),"undefined"!==typeof u.autoDetectHighContrast&&r.setAutoDetectHighContrast(Boolean(u.autoDetectHighContrast)),super(e,u,{},n,i,s,d,h),this._configurationService=a,this._standaloneThemeService=r,this._register(g)}dispose(){super.dispose()}updateOptions(e){CU(this._configurationService,e,!0),"string"===typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),"undefined"!==typeof e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(d0,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};function p0(e,t,i,n,s){if(i=i||"",!n){const n=i.indexOf("\n");let r=i;return-1!==n&&(r=i.substring(0,n)),f0(e,i,t.createByFilepathOrFirstLine(s||null,r),s)}return f0(e,i,t.createById(n),s)}function f0(e,t,i,n){return e.createModel(t,i,n)}g0=o0([a0(2,eM._Y),a0(3,mM.fN),a0(4,tM),a0(5,oH),a0(6,PT),a0(7,JT.pG),a0(8,rD),a0(9,dR),a0(10,LH),a0(11,JH)],g0);var m0=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},_0=function(e,t){return function(i,n){t(i,n,e)}};class v0{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let b0=class extends Mx.jG{constructor(e,t,i,n,s){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=n,this._viewModel=(0,NJ.FY)(this,void 0),this._collapsed=(0,sP.un)(this,(e=>this._viewModel.read(e)?.collapsed.read(e))),this._editorContentHeight=(0,NJ.FY)(this,500),this.contentHeight=(0,sP.un)(this,(e=>(this._collapsed.read(e)?0:this._editorContentHeight.read(e))+this._outerEditorHeight)),this._modifiedContentWidth=(0,NJ.FY)(this,0),this._modifiedWidth=(0,NJ.FY)(this,0),this._originalContentWidth=(0,NJ.FY)(this,0),this._originalWidth=(0,NJ.FY)(this,0),this.maxScroll=(0,sP.un)(this,(e=>{const t=this._modifiedContentWidth.read(e)-this._modifiedWidth.read(e),i=this._originalContentWidth.read(e)-this._originalWidth.read(e);return t>i?{maxScroll:t,width:this._modifiedWidth.read(e)}:{maxScroll:i,width:this._originalWidth.read(e)}})),this._elements=OE("div.multiDiffEntry",[OE("div.header@header",[OE("div.header-content",[OE("div.collapse-button@collapseButton"),OE("div.file-path",[OE("div.title.modified.show-file-icons@primaryPath",[]),OE("div.status.deleted@status",["R"]),OE("div.title.original.show-file-icons@secondaryPath",[])]),OE("div.actions@actions")])]),OE("div.editorParent",[OE("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(r0,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=IJ(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=IJ(this.editor.getOriginalEditor()).isFocused,this.isFocused=(0,sP.un)(this,(e=>this.isModifedFocused.read(e)||this.isOriginalFocused.read(e))),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new Mx.Cm),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const r=new xF(this._elements.collapseButton,{});this._register((0,sP.fm)((e=>{r.element.className="",r.icon=this._collapsed.read(e)?vD.W.chevronRight:vD.W.chevronDown}))),this._register(r.onDidClick((()=>{this._viewModel.get()?.collapsed.set(!this._collapsed.get(),void 0)}))),this._register((0,sP.fm)((e=>{this._elements.editor.style.display=this._collapsed.read(e)?"none":"block"}))),this._register(this.editor.getModifiedEditor().onDidLayoutChange((e=>{const t=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(t,void 0)}))),this._register(this.editor.getOriginalEditor().onDidLayoutChange((e=>{const t=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(t,void 0)}))),this._register(this.editor.onDidContentSizeChange((e=>{(0,NJ.YY)((t=>{this._editorContentHeight.set(e.contentHeight,t),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),t),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),t)}))}))),this._register(this.editor.getOriginalEditor().onDidScrollChange((e=>{if(this._isSettingScrollTop)return;if(!e.scrollTopChanged||!this._data)return;const t=e.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(t)}))),this._register((0,sP.fm)((e=>{const t=this._viewModel.read(e)?.isActive.read(e);this._elements.root.classList.toggle("active",t)}))),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(s.createScoped(this._elements.actions));const o=this._register(this._instantiationService.createChild(new UH([mM.fN,this._contextKeyService])));this._register(o.createInstance(SJ,this._elements.actions,kM.MultiDiffEditorFileToolbar,{actionRunner:this._register(new pJ((()=>this._viewModel.get()?.modifiedUri))),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("navigation")},actionViewItemProvider:(e,t)=>function(e,t,i){return t instanceof DM?e.createInstance(pO,t,i):t instanceof TM?t.item.isSelection?e.createInstance(_O,t):t.item.rememberDefaultAction?e.createInstance(mO,t,{...i,persistLastActionId:!0}):e.createInstance(fO,t,i):void 0}(o,e,t)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){function t(e){return{...e,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(this._data=e,!e)return void(0,NJ.YY)((e=>{this._viewModel.set(void 0,e),this.editor.setDiffModel(null,e),this._dataStore.clear()}));const i=e.viewModel.documentDiffItem;if((0,NJ.YY)((n=>{this._resourceLabel?.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:void 0===e.viewModel.modifiedUri});let s=!1,r=!1,o=!1,a="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(a="R",s=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(a="A",o=!0):(a="D",r=!0),this._elements.status.classList.toggle("renamed",s),this._elements.status.classList.toggle("deleted",r),this._elements.status.classList.toggle("added",o),this._elements.status.innerText=a,this._resourceLabel2?.setUri(s?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,n),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,n),this.editor.updateOptions(t(i.options??{}))})),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange((()=>{this.editor.updateOptions(t(i.options??{}))}))),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,(e=>{e||this.setData(void 0)})),e.viewModel.documentDiffItem.contextKeys)for(const[n,s]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(n,s)}render(e,t,i,n){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const s=e.length-this._headerHeight,r=Math.max(0,Math.min(n.start-e.start,s));this._elements.header.style.transform=`translateY(${r}px)`,(0,NJ.YY)((i=>{this.editor.layout({width:t-16-2,height:e.length-this._outerEditorHeight})}));try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||i>0),this._elements.header.classList.toggle("collapsed",r===s)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};b0=m0([_0(3,eM._Y),_0(4,mM.fN)],b0);class y0{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(0===this._unused.size)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find((t=>this._itemData.get(t).getId()===e.getId()))??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var w0=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},C0=function(e,t){return function(i,n){t(i,n,e)}};let S0=class extends Mx.jG{constructor(e,t,i,n,s,r){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=n,this._parentContextKeyService=s,this._parentInstantiationService=r,this._scrollableElements=OE("div.scrollContent",[OE("div@content",{style:{overflow:"hidden"}}),OE("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new CD({forceIntegerValues:!1,scheduleAtNextAnimationFrame:e=>IL(fL(this._element),e),smoothScrollDuration:100})),this._scrollableElement=this._register(new DD(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=OE("div.monaco-component.multiDiffEditor",{},[OE("div",{},[this._scrollableElement.getDomNode()]),OE("div.placeholder@placeholder",{},[OE("div",[(0,WS.kg)("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new BY(this._element,void 0)),this._objectPool=this._register(new y0((e=>{const t=this._instantiationService.createInstance(b0,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return t.setData(e),t}))),this.scrollTop=(0,sP.y0)(this,this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollTop)),this.scrollLeft=(0,sP.y0)(this,this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollLeft)),this._viewItemsInfo=(0,sP.rm)(this,((e,t)=>{const i=this._viewModel.read(e);if(!i)return{items:[],getItem:e=>{throw new Ux.D7}};const n=i.items.read(e),s=new Map,r=n.map((e=>{const i=t.add(new x0(e,this._objectPool,this.scrollLeft,(e=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+e})}))),n=this._lastDocStates?.[i.getKey()];return n&&(0,NJ.Rn)((e=>{i.setViewState(n,e)})),s.set(e,i),i}));return{items:r,getItem:e=>s.get(e)}})),this._viewItems=this._viewItemsInfo.map(this,(e=>e.items)),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,((e,t)=>e.reduce(((e,i)=>e+i.contentHeight.read(t)+this._spaceBetweenPx),0))),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new UH([mM.fN,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(D$.inMultiDiffEditor.key,!0),this._register((0,sP.yC)(((e,t)=>{const i=this._viewModel.read(e);if(i&&i.contextKeys)for(const[n,s]of Object.entries(i.contextKeys)){const e=this._contextKeyService.createKey(n,void 0);e.set(s),t.add((0,Mx.s)((()=>e.reset())))}})));const o=this._parentContextKeyService.createKey(D$.multiDiffEditorAllCollapsed.key,!1);this._register((0,sP.fm)((e=>{const t=this._viewModel.read(e);if(t){const i=t.items.read(e).every((t=>t.collapsed.read(e)));o.set(i)}}))),this._register((0,sP.fm)((e=>{const t=this._dimension.read(e);this._sizeObserver.observe(t)}))),this._register((0,sP.fm)((e=>{const t=this._viewItems.read(e);this._elements.placeholder.classList.toggle("visible",0===t.length)}))),this._scrollableElements.content.style.position="relative",this._register((0,sP.fm)((e=>{const t=this._sizeObserver.height.read(e);this._scrollableElements.root.style.height=`${t}px`;const i=this._totalHeight.read(e);this._scrollableElements.content.style.height=`${i}px`;const n=this._sizeObserver.width.read(e);let s=n;const r=this._viewItems.read(e),o=(0,XQ.Cn)(r,(0,OS.VE)((t=>t.maxScroll.read(e).maxScroll),OS.U9));if(o){s=n+o.maxScroll.read(e).maxScroll}this._scrollableElement.setScrollDimensions({width:n,height:t,scrollHeight:i,scrollWidth:s})}))),e.replaceChildren(this._elements.root),this._register((0,Mx.s)((()=>{e.replaceChildren()}))),this._register(this._register((0,sP.fm)((e=>{(0,NJ.YY)((t=>{this.render(e)}))}))))}render(e){const t=this.scrollTop.read(e);let i=0,n=0,s=0;const r=this._sizeObserver.height.read(e),o=QY.L.ofStartAndLength(t,r),a=this._sizeObserver.width.read(e);for(const l of this._viewItems.read(e)){const h=l.contentHeight.read(e),c=Math.min(h,r),d=QY.L.ofStartAndLength(n,c),u=QY.L.ofStartAndLength(s,h);if(u.isBefore(o))i-=h-c,l.hide();else if(u.isAfter(o))l.hide();else{const e=Math.max(0,Math.min(o.start-u.start,h-c));i-=e;const n=QY.L.ofStartAndLength(t+i,r);l.render(d,e,a,n)}n+=c+this._spaceBetweenPx,s+=h+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};S0=w0([C0(4,mM.fN),C0(5,eM._Y)],S0);class x0 extends Mx.jG{constructor(e,t,i,n){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=n,this._templateRef=this._register((0,NJ.X2)(this,void 0)),this.contentHeight=(0,sP.un)(this,(e=>this._templateRef.read(e)?.object.contentHeight?.read(e)??this.viewModel.lastTemplateData.read(e).contentHeight)),this.maxScroll=(0,sP.un)(this,(e=>this._templateRef.read(e)?.object.maxScroll.read(e)??{maxScroll:0,scrollWidth:0})),this.template=(0,sP.un)(this,(e=>this._templateRef.read(e)?.object)),this._isHidden=(0,sP.FY)(this,!1),this._isFocused=(0,sP.un)(this,(e=>this.template.read(e)?.isFocused.read(e)??!1)),this.viewModel.setIsFocused(this._isFocused,void 0),this._register((0,sP.fm)((e=>{const t=this._scrollLeft.read(e);this._templateRef.read(e)?.object.setScrollLeft(t)}))),this._register((0,sP.fm)((e=>{const t=this._templateRef.read(e);if(!t)return;if(!this._isHidden.read(e))return;t.object.isFocused.read(e)||this._clear()})))}dispose(){this._clear(),super.dispose()}toString(){return`VirtualViewItem(${this.viewModel.documentDiffItem.modified?.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),n=e.selections?.map(jG.L.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:n},t);const s=this._templateRef.get();s&&n&&s.object.editor.setSelections(n)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&(0,NJ.Rn)((t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)}))}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,n){this._isHidden.set(!1,void 0);let s=this._templateRef.get();if(!s){s=this._objectPool.getUnusedObj(new v0(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(s,void 0);const e=this.viewModel.lastTemplateData.get().selections;e&&s.object.editor.setSelections(e)}s.object.render(e,i,t,n)}}(0,ZT.x1A)("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},(0,WS.kg)("multiDiffEditor.headerBackground","The background color of the diff editor's header")),(0,ZT.x1A)("multiDiffEditor.background",ZT.YtV,(0,WS.kg)("multiDiffEditor.background","The background color of the multi file diff editor")),(0,ZT.x1A)("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},(0,WS.kg)("multiDiffEditor.border","The border color of the multi file diff editor"));var k0=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},L0=function(e,t){return function(i,n){t(i,n,e)}};let E0=class extends Mx.jG{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=(0,sP.FY)(this,void 0),this._viewModel=(0,sP.FY)(this,void 0),this._widgetImpl=(0,sP.rm)(this,((e,t)=>(RZ(b0,e),t.add(this._instantiationService.createInstance(RZ(S0,e),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory))))),this._register((0,sP.OI)(this._widgetImpl))}};function M0(e,t,i){return TU.initialize(i||{}).createInstance(u0,e,t)}function T0(e){return TU.get(tM).onCodeEditorAdd((t=>{e(t)}))}function D0(e){return TU.get(tM).onDiffEditorAdd((t=>{e(t)}))}function N0(){return TU.get(tM).listCodeEditors()}function I0(){return TU.get(tM).listDiffEditors()}function A0(e,t,i){return TU.initialize(i||{}).createInstance(g0,e,t)}function R0(e,t){const i=TU.initialize(t||{});return new E0(e,{},i)}function P0(e){if("string"!==typeof e.id||"function"!==typeof e.run)throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return fM.registerCommand(e.id,e.run)}function O0(e){if("string"!==typeof e.id||"string"!==typeof e.label||"function"!==typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const t=mM.M$.deserialize(e.precondition),i=new Mx.Cm;if(i.add(fM.registerCommand(e.id,(function(i){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return FM.runEditorCommand(i,s,t,((t,i,n)=>Promise.resolve(e.run(i,...n))))}))),e.contextMenuGroupId){const n={command:{id:e.id,title:e.label},when:t,group:e.contextMenuGroupId,order:e.contextMenuOrder||0};i.add(MM.appendMenuItem(kM.EditorContext,n))}if(Array.isArray(e.keybindings)){const n=TU.get(oD);if(n instanceof fU){const s=mM.M$.and(t,mM.M$.deserialize(e.keybindingContext));i.add(n.addDynamicKeybindings(e.keybindings.map((t=>({keybinding:t,command:e.id,when:s})))))}else console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService")}return i}function F0(e){return B0([e])}function B0(e){const t=TU.get(oD);return t instanceof fU?t.addDynamicKeybindings(e.map((e=>({keybinding:e.keybinding,command:e.command,commandArgs:e.commandArgs,when:mM.M$.deserialize(e.when)})))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Mx.jG.None)}function z0(e,t,i){const n=TU.get(NI.L),s=n.getLanguageIdByMimeType(t)||t;return p0(TU.get(iM.IModelService),n,e,s,i)}function V0(e,t){const i=TU.get(NI.L),n=i.getLanguageIdByMimeType(t)||t||II.vH;e.setLanguage(i.createById(n))}function W0(e,t,i){if(e){TU.get($H.DR).changeOne(t,e.uri,i)}}function H0(e){TU.get($H.DR).changeAll(e,[])}function U0(e){return TU.get($H.DR).read(e)}function j0(e){return TU.get($H.DR).onMarkerChanged(e)}function G0(e){return TU.get(iM.IModelService).getModel(e)}function K0(){return TU.get(iM.IModelService).getModels()}function $0(e){return TU.get(iM.IModelService).onModelAdded(e)}function q0(e){return TU.get(iM.IModelService).onModelRemoved(e)}function Q0(e){return TU.get(iM.IModelService).onModelLanguageChanged((t=>{e({model:t.model,oldLanguage:t.oldLanguageId})}))}function X0(e){return function(e,t){return new DU(e,t)}(TU.get(iM.IModelService),e)}function Y0(e,t){const i=TU.get(NI.L),n=TU.get(oH);return Mj.colorizeElement(n,i,e,t).then((()=>{n.registerEditorContainer(e)}))}function Z0(e,t,i){const n=TU.get(NI.L);return TU.get(oH).registerEditorContainer(Ex.document.body),Mj.colorize(n,e,t,i)}function J0(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return TU.get(oH).registerEditorContainer(Ex.document.body),Mj.colorizeModelLine(e,t,i)}function e1(e,t){RI.dG.getOrCreate(t);const i=function(e){const t=RI.dG.get(e);return t||{getInitialState:()=>PI.r3,tokenize:(t,i,n)=>(0,PI.$H)(e,n)}}(t),n=(0,Tx.uz)(e),s=[];let r=i.getInitialState();for(let o=0,a=n.length;o<a;o++){const e=n[o],t=i.tokenize(e,!0,r);s[o]=t.tokens,r=t.endState}return s}function t1(e,t){TU.get(oH).defineTheme(e,t)}function i1(e){TU.get(oH).setTheme(e)}function n1(){JE.clearAllFontInfos()}function s1(e,t){return fM.registerCommand({id:e,handler:t})}function r1(e){return TU.get(FD).registerOpener({open:async t=>("string"===typeof t&&(t=Dx.r.parse(t)),e.open(t))})}function o1(e){return TU.get(tM).registerCodeEditorOpenHandler((async(t,i,n)=>{if(!i)return null;const s=t.options?.selection;let r;return s&&"number"===typeof s.endLineNumber&&"number"===typeof s.endColumn?r=s:s&&(r={lineNumber:s.startLineNumber,column:s.startColumn}),await e.openCodeEditor(i,t.resource,r)?i:null}))}function a1(e,t){return"boolean"===typeof e?e:t}function l1(e,t){return"string"===typeof e?e:t}function h1(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(e=e.map((function(e){return e.toLowerCase()})));const i=function(e){const t={};for(const i of e)t[i]=!0;return t}(e);return t?function(e){return void 0!==i[e.toLowerCase()]&&i.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==i[e]&&i.hasOwnProperty(e)}}function c1(e,t,i){t=t.replace(/@@/g,"\x01");let n,s=0;do{n=!1,t=t.replace(/@(\w+)/g,(function(i,s){n=!0;let r="";if("string"===typeof e[s])r=e[s];else{if(!(e[s]&&e[s]instanceof RegExp))throw void 0===e[s]?uj(e,"language definition does not contain attribute '"+s+"', used at: "+t):uj(e,"attribute reference '"+s+"' must be a string, used at: "+t);r=e[s].source}return lj(r)?"":"(?:"+r+")"})),s++}while(n&&s<5);t=t.replace(/\x01/g,"@");const r=(e.ignoreCase?"i":"")+(e.unicode?"u":"");if(i){if(t.match(/\$[sS](\d\d?)/g)){let i=null,n=null;return s=>(n&&i===s||(i=s,n=new RegExp(function(e,t,i){let n=null;return t.replace(/\$[sS](\d\d?)/g,(function(t,s){return null===n&&(n=i.split("."),n.unshift(i)),!lj(s)&&s<n.length?hj(e,n[s]):""}))}(e,t,s),r)),n)}}return new RegExp(t,r)}function d1(e,t,i,n){let s=-1,r=i,o=i.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s+=100)),r=o[4]);let a,l="~",h=r;if(r&&0!==r.length?/^\w*$/.test(h)?l="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(l=o[1],h=o[2])):(l="!=",h=""),"~"!==l&&"!~"!==l||!/^(\w|\|)*$/.test(h))if("@"===l||"!@"===l){const i=e[h];if(!i)throw uj(e,"the @ match target '"+h+"' is not defined, in rule: "+t);if(!function(e,t){if(!t)return!1;if(!Array.isArray(t))return!1;for(const i of t)if(!e(i))return!1;return!0}((function(e){return"string"===typeof e}),i))throw uj(e,"the @ match target '"+h+"' must be an array of strings, in rule: "+t);const n=h1(i,e.ignoreCase);a=function(e){return"@"===l?n(e):!n(e)}}else if("~"===l||"!~"===l)if(h.indexOf("$")<0){const t=c1(e,"^"+h+"$",!1);a=function(e){return"~"===l?t.test(e):!t.test(e)}}else a=function(t,i,n,s){return c1(e,"^"+gj(e,h,i,n,s)+"$",!1).test(t)};else if(h.indexOf("$")<0){const t=hj(e,h);a=function(e){return"=="===l?e===t:e!==t}}else{const t=hj(e,h);a=function(i,n,s,r,o){const a=gj(e,t,n,s,r);return"=="===l?i===a:i!==a}}else{const t=h1(h.split("|"),e.ignoreCase);a=function(e){return"~"===l?t(e):!t(e)}}return-1===s?{name:i,value:n,test:function(e,t,i,n){return a(e,e,t,i,n)}}:{name:i,value:n,test:function(e,t,i,n){const r=function(e,t,i,n){if(n<0)return e;if(n<t.length)return t[n];if(n>=100){n-=100;const e=i.split(".");if(e.unshift(i),n<e.length)return e[n]}return null}(e,t,i,s);return a(r||"",e,t,i,n)}}}function u1(e,t,i){if(i){if("string"===typeof i)return i;if(i.token||""===i.token){if("string"!==typeof i.token)throw uj(e,"a 'token' attribute must be of type string, in rule: "+t);{const n={token:i.token};if(i.token.indexOf("$")>=0&&(n.tokenSubst=!0),"string"===typeof i.bracket)if("@open"===i.bracket)n.bracket=1;else{if("@close"!==i.bracket)throw uj(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+t);n.bracket=-1}if(i.next){if("string"!==typeof i.next)throw uj(e,"the next state must be a string value in rule: "+t);{let s=i.next;if(!/^(@pop|@push|@popall)$/.test(s)&&("@"===s[0]&&(s=s.substr(1)),s.indexOf("$")<0&&!function(e,t){let i=t;for(;i&&i.length>0;){if(e.stateNames[i])return!0;const t=i.lastIndexOf(".");i=t<0?null:i.substr(0,t)}return!1}(e,gj(e,s,"",[],""))))throw uj(e,"the next state '"+i.next+"' is not defined in rule: "+t);n.next=s}}return"number"===typeof i.goBack&&(n.goBack=i.goBack),"string"===typeof i.switchTo&&(n.switchTo=i.switchTo),"string"===typeof i.log&&(n.log=i.log),"string"===typeof i.nextEmbedded&&(n.nextEmbedded=i.nextEmbedded,e.usesEmbedded=!0),n}}if(Array.isArray(i)){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=u1(e,t,i[s]);return{group:n}}if(i.cases){const n=[];for(const r in i.cases)if(i.cases.hasOwnProperty(r)){const s=u1(e,t,i.cases[r]);"@default"===r||"@"===r||""===r?n.push({test:void 0,value:s,name:r}):"@eos"===r?n.push({test:function(e,t,i,n){return n},value:s,name:r}):n.push(d1(e,t,r,s))}const s=e.defaultToken;return{test:function(e,t,i,r){for(const s of n){if(!s.test||s.test(e,t,i,r))return s.value}return s}}}throw uj(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+t)}return{token:""}}E0=k0([L0(2,eM._Y)],E0);class g1{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if("string"===typeof t)i=t;else{if(!(t instanceof RegExp))throw uj(e,"rules must start with a match string or regular expression: "+this.name);i=t.source}this.matchOnlyAtLineStart=i.length>0&&"^"===i[0],this.name=this.name+": "+i,this.regex=c1(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=u1(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function p1(e,t){if(!t||"object"!==typeof t)throw new Error("Monarch: expecting a language definition object");const i={languageId:e,includeLF:a1(t.includeLF,!1),noThrow:!1,maxStack:100,start:"string"===typeof t.start?t.start:null,ignoreCase:a1(t.ignoreCase,!1),unicode:a1(t.unicode,!1),tokenPostfix:l1(t.tokenPostfix,"."+e),defaultToken:l1(t.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},n=t;function s(e,r,o){for(const a of o){let o=a.include;if(o){if("string"!==typeof o)throw uj(i,"an 'include' attribute must be a string at: "+e);if("@"===o[0]&&(o=o.substr(1)),!t.tokenizer[o])throw uj(i,"include target '"+o+"' is not defined at: "+e);s(e+"."+o,r,t.tokenizer[o])}else{const t=new g1(e);if(Array.isArray(a)&&a.length>=1&&a.length<=3)if(t.setRegex(n,a[0]),a.length>=3)if("string"===typeof a[1])t.setAction(n,{token:a[1],next:a[2]});else{if("object"!==typeof a[1])throw uj(i,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+e);{const e=a[1];e.next=a[2],t.setAction(n,e)}}else t.setAction(n,a[1]);else{if(!a.regex)throw uj(i,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+e);a.name&&"string"===typeof a.name&&(t.name=a.name),a.matchOnlyAtStart&&(t.matchOnlyAtLineStart=a1(a.matchOnlyAtLineStart,!1)),t.setRegex(n,a.regex),t.setAction(n,a.action)}r.push(t)}}}if(n.languageId=e,n.includeLF=i.includeLF,n.ignoreCase=i.ignoreCase,n.unicode=i.unicode,n.noThrow=i.noThrow,n.usesEmbedded=i.usesEmbedded,n.stateNames=t.tokenizer,n.defaultToken=i.defaultToken,!t.tokenizer||"object"!==typeof t.tokenizer)throw uj(i,"a language definition must define the 'tokenizer' attribute as an object");i.tokenizer=[];for(const o in t.tokenizer)if(t.tokenizer.hasOwnProperty(o)){i.start||(i.start=o);const e=t.tokenizer[o];i.tokenizer[o]=new Array,s("tokenizer."+o,i.tokenizer[o],e)}if(i.usesEmbedded=n.usesEmbedded,t.brackets){if(!Array.isArray(t.brackets))throw uj(i,"the 'brackets' attribute must be defined as an array")}else t.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of t.brackets){let e=o;if(e&&Array.isArray(e)&&3===e.length&&(e={token:e[2],open:e[0],close:e[1]}),e.open===e.close)throw uj(i,"open and close brackets in a 'brackets' attribute must be different: "+e.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required.");if("string"!==typeof e.open||"string"!==typeof e.token||"string"!==typeof e.close)throw uj(i,"every element in the 'brackets' array must be a '{open,close,token}' object or array");r.push({token:e.token+i.tokenPostfix,open:hj(i,e.open),close:hj(i,e.close)})}return i.brackets=r,i.noThrow=!0,i}function f1(e){II.W6.registerLanguage(e)}function m1(){let e=[];return e=e.concat(II.W6.getLanguages()),e}function _1(e){return TU.get(NI.L).languageIdCodec.encodeLanguageId(e)}function v1(e,t){return TU.withServices((()=>{const i=TU.get(NI.L).onDidRequestRichLanguageFeatures((n=>{n===e&&(i.dispose(),t())}));return i}))}function b1(e,t){return TU.withServices((()=>{const i=TU.get(NI.L).onDidRequestBasicLanguageFeatures((n=>{n===e&&(i.dispose(),t())}));return i}))}function y1(e,t){if(!TU.get(NI.L).isRegisteredLanguageId(e))throw new Error(`Cannot set configuration for unknown language ${e}`);return TU.get(eT.JZ).register(e,t,100)}class w1{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if("function"===typeof this._actual.tokenize)return C1.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const n=this._actual.tokenizeEncoded(e,i);return new RI.rY(n.tokens,n.endState)}}class C1{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=n}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let n=0;for(let s=0,r=e.length;s<r;s++){const r=e[s];let o=r.startIndex;0===s?o=0:o<n&&(o=n),i[s]=new RI.ou(o,r.scopes,t),n=o}return i}static adaptTokenize(e,t,i,n){const s=t.tokenize(i,n),r=C1._toClassicTokens(s.tokens,e);let o;return o=s.endState.equals(n)?n:s.endState,new RI.$M(r,o)}tokenize(e,t,i){return C1.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),n=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let r=0,o=0;for(let l=0,h=t.length;l<h;l++){const e=t[l],a=1024|n.match(i,e.scopes);if(r>0&&s[r-1]===a)continue;let h=e.startIndex;0===l?h=0:h<o&&(h=o),s[r++]=h,s[r++]=a,o=h}const a=new Uint32Array(r);for(let l=0;l<r;l++)a[l]=s[l];return a}tokenizeEncoded(e,t,i){const n=this._actual.tokenize(e,i),s=this._toBinaryTokens(this._languageService.languageIdCodec,n.tokens);let r;return r=n.endState.equals(i)?i:n.endState,new RI.rY(s,r)}}function S1(e){return e&&"function"===typeof e.then}function x1(e){const t=TU.get(oH);if(e){const i=[null];for(let t=1,n=e.length;t<n;t++)i[t]=WR.Q1.fromHex(e[t]);t.setColorMapOverride(i)}else t.setColorMapOverride(null)}function k1(e,t){return function(e){return"tokenizeEncoded"in e}(t)?new w1(e,t):new C1(e,t,TU.get(NI.L),TU.get(oH))}function L1(e,t){const i=new RI.v_((async()=>{const i=await Promise.resolve(t.create());return i?"function"===typeof i.getInitialState?k1(e,i):new kj(TU.get(NI.L),TU.get(oH),e,p1(e,i),TU.get(JT.pG)):null}));return RI.dG.registerFactory(e,i)}function E1(e,t){if(!TU.get(NI.L).isRegisteredLanguageId(e))throw new Error(`Cannot set tokens provider for unknown language ${e}`);return S1(t)?L1(e,{create:()=>t}):RI.dG.register(e,k1(e,t))}function M1(e,t){return S1(t)?L1(e,{create:()=>t}):RI.dG.register(e,(t=>new kj(TU.get(NI.L),TU.get(oH),e,p1(e,t),TU.get(JT.pG)))(t))}function T1(e,t){return TU.get(sT.ILanguageFeaturesService).referenceProvider.register(e,t)}function D1(e,t){return TU.get(sT.ILanguageFeaturesService).renameProvider.register(e,t)}function N1(e,t){return TU.get(sT.ILanguageFeaturesService).newSymbolNamesProvider.register(e,t)}function I1(e,t){return TU.get(sT.ILanguageFeaturesService).signatureHelpProvider.register(e,t)}function A1(e,t){return TU.get(sT.ILanguageFeaturesService).hoverProvider.register(e,{provideHover:async(e,i,n,s)=>{const r=e.getWordAtPosition(i);return Promise.resolve(t.provideHover(e,i,n,s)).then((e=>{if(e)return!e.range&&r&&(e.range=new JM.Q(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)),e.range||(e.range=new JM.Q(i.lineNumber,i.column,i.lineNumber,i.column)),e}))}})}function R1(e,t){return TU.get(sT.ILanguageFeaturesService).documentSymbolProvider.register(e,t)}function P1(e,t){return TU.get(sT.ILanguageFeaturesService).documentHighlightProvider.register(e,t)}function O1(e,t){return TU.get(sT.ILanguageFeaturesService).linkedEditingRangeProvider.register(e,t)}function F1(e,t){return TU.get(sT.ILanguageFeaturesService).definitionProvider.register(e,t)}function B1(e,t){return TU.get(sT.ILanguageFeaturesService).implementationProvider.register(e,t)}function z1(e,t){return TU.get(sT.ILanguageFeaturesService).typeDefinitionProvider.register(e,t)}function V1(e,t){return TU.get(sT.ILanguageFeaturesService).codeLensProvider.register(e,t)}function W1(e,t,i){return TU.get(sT.ILanguageFeaturesService).codeActionProvider.register(e,{providedCodeActionKinds:i?.providedCodeActionKinds,documentation:i?.documentation,provideCodeActions:(e,i,n,s)=>{const r=TU.get($H.DR).read({resource:e.uri}).filter((e=>JM.Q.areIntersectingOrTouching(e,i)));return t.provideCodeActions(e,i,{markers:r,only:n.only,trigger:n.trigger},s)},resolveCodeAction:t.resolveCodeAction})}function H1(e,t){return TU.get(sT.ILanguageFeaturesService).documentFormattingEditProvider.register(e,t)}function U1(e,t){return TU.get(sT.ILanguageFeaturesService).documentRangeFormattingEditProvider.register(e,t)}function j1(e,t){return TU.get(sT.ILanguageFeaturesService).onTypeFormattingEditProvider.register(e,t)}function G1(e,t){return TU.get(sT.ILanguageFeaturesService).linkProvider.register(e,t)}function K1(e,t){return TU.get(sT.ILanguageFeaturesService).completionProvider.register(e,t)}function $1(e,t){return TU.get(sT.ILanguageFeaturesService).colorProvider.register(e,t)}function q1(e,t){return TU.get(sT.ILanguageFeaturesService).foldingRangeProvider.register(e,t)}function Q1(e,t){return TU.get(sT.ILanguageFeaturesService).declarationProvider.register(e,t)}function X1(e,t){return TU.get(sT.ILanguageFeaturesService).selectionRangeProvider.register(e,t)}function Y1(e,t){return TU.get(sT.ILanguageFeaturesService).documentSemanticTokensProvider.register(e,t)}function Z1(e,t){return TU.get(sT.ILanguageFeaturesService).documentRangeSemanticTokensProvider.register(e,t)}function J1(e,t){return TU.get(sT.ILanguageFeaturesService).inlineCompletionsProvider.register(e,t)}function e2(e,t){return TU.get(sT.ILanguageFeaturesService).inlineEditProvider.register(e,t)}function t2(e,t){return TU.get(sT.ILanguageFeaturesService).inlayHintsProvider.register(e,t)}const i2=(0,eM.u1)("IEditorCancelService"),n2=new mM.N1("cancellableOperation",!1,(0,WS.kg)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,ST.v)(i2,class{constructor(){this._tokens=new WeakMap}add(e,t){let i,n=this._tokens.get(e);return n||(n=e.invokeWithinContext((e=>({key:n2.bindTo(e.get(mM.fN)),tokens:new dM.w}))),this._tokens.set(e,n)),n.key.set(!0),i=n.tokens.push(t),()=>{i&&(i(),n.key.set(!n.tokens.isEmpty()),i=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},1);_A.Qi;BM(new class extends FM{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:n2})}runEditorCommand(e,t){e.get(i2).cancel(t)}});_A.Qi;class s2{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return"string"===typeof e?e.toLowerCase():e._lower}}class r2{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(s2.toKey(e))}has(e){return this._set.has(s2.toKey(e))}}function o2(e,t,i){const n=[],s=new r2,r=e.ordered(i);for(const a of r)n.push(a),a.extensionId&&s.add(a.extensionId);const o=t.ordered(i);for(const a of o){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits:(e,t,i)=>a.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,i)})}return n}class a2{static#e=(()=>this._selectors=new dM.w)();static setFormatterSelector(e){return{dispose:a2._selectors.unshift(e)}}static async select(e,t,i,n){if(0===e.length)return;const s=uM.f.first(a2._selectors);return s?await s(e,t,i,n):void 0}}fM.registerCommand("_executeFormatRangeProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const[s,r,o]=i;(0,gM.j)(Dx.r.isUri(s)),(0,gM.j)(JM.Q.isIRange(r));const a=e.get(nM.ITextModelService),l=e.get(WO.IEditorWorkerService),h=e.get(sT.ILanguageFeaturesService),c=await a.createModelReference(s);try{return async function(e,t,i,n,s,r){const o=t.documentRangeFormattingEditProvider.ordered(i);for(const a of o){const t=await Promise.resolve(a.provideDocumentRangeFormattingEdits(i,n,s,r)).catch(Ux.M_);if((0,OS.EI)(t))return await e.computeMoreMinimalEdits(i.uri,t)}}(l,h,c.object.textEditorModel,JM.Q.lift(r),o,_A.XO.None)}finally{c.dispose()}})),fM.registerCommand("_executeFormatDocumentProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const[s,r]=i;(0,gM.j)(Dx.r.isUri(s));const o=e.get(nM.ITextModelService),a=e.get(WO.IEditorWorkerService),l=e.get(sT.ILanguageFeaturesService),h=await o.createModelReference(s);try{return async function(e,t,i,n,s){const r=o2(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,i);for(const o of r){const t=await Promise.resolve(o.provideDocumentFormattingEdits(i,n,s)).catch(Ux.M_);if((0,OS.EI)(t))return await e.computeMoreMinimalEdits(i.uri,t)}}(a,l,h.object.textEditorModel,r,_A.XO.None)}finally{h.dispose()}})),fM.registerCommand("_executeFormatOnTypeProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const[s,r,o,a]=i;(0,gM.j)(Dx.r.isUri(s)),(0,gM.j)(OA.y.isIPosition(r)),(0,gM.j)("string"===typeof o);const l=e.get(nM.ITextModelService),h=e.get(WO.IEditorWorkerService),c=e.get(sT.ILanguageFeaturesService),d=await l.createModelReference(s);try{return function(e,t,i,n,s,r,o){const a=t.onTypeFormattingEditProvider.ordered(i);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(i,n,s,r,o)).catch(Ux.M_).then((t=>e.computeMoreMinimalEdits(i.uri,t)))}(h,c,d.object.textEditorModel,OA.y.lift(r),o,a,_A.XO.None)}finally{d.dispose()}})),kx.wrappingIndent.defaultValue=0,kx.glyphMargin.defaultValue=!1,kx.autoIndent.defaultValue=3,kx.overviewRulerLanes.defaultValue=2,a2.setFormatterSelector(((e,t,i)=>Promise.resolve(e[0])));const l2=(0,Lx.createMonacoBaseAPI)();l2.editor={create:M0,getEditors:N0,getDiffEditors:I0,onDidCreateEditor:T0,onDidCreateDiffEditor:D0,createDiffEditor:A0,addCommand:P0,addEditorAction:O0,addKeybindingRule:F0,addKeybindingRules:B0,createModel:z0,setModelLanguage:V0,setModelMarkers:W0,getModelMarkers:U0,removeAllMarkers:H0,onDidChangeMarkers:j0,getModels:K0,getModel:G0,onDidCreateModel:$0,onWillDisposeModel:q0,onDidChangeModelLanguage:Q0,createWebWorker:X0,colorizeElement:Y0,colorize:Z0,colorizeModelLine:J0,tokenize:e1,defineTheme:t1,setTheme:i1,remeasureFonts:n1,registerCommand:s1,registerLinkOpener:r1,registerEditorOpener:o1,AccessibilitySupport:AU.Gn,ContentWidgetPositionPreference:AU.Qj,CursorChangeReason:AU.h5,DefaultEndOfLine:AU.of,EditorAutoIndentStrategy:AU.e0,EditorOption:AU.p2,EndOfLinePreference:AU.kf,EndOfLineSequence:AU.WU,MinimapPosition:AU.R3,MinimapSectionHeaderStyle:AU.VX,MouseTargetType:AU.hS,OverlayWidgetPositionPreference:AU.dE,OverviewRulerLane:AU.A5,GlyphMarginLane:AU.ZS,RenderLineNumbersType:AU.DO,RenderMinimap:AU.hW,ScrollbarVisibility:AU.XR,ScrollType:AU.ov,TextEditorCursorBlinkingStyle:AU.U7,TextEditorCursorStyle:AU.m9,TrackedRangeStickiness:AU.kK,WrappingIndent:AU.tJ,InjectedTextCursorStops:AU.VW,PositionAffinity:AU.Ic,ShowLightbulbIconMode:AU.jT,ConfigurationChangedEvent:HS,BareFontInfo:QE,FontInfo:XE,TextModelResolvedOptions:IU.X2,FindMatch:IU.Dg,ApplyUpdateResult:GS,EditorZoom:$E,createMultiFileDiffEditor:R0,EditorType:NU,EditorOptions:kx},l2.languages={register:f1,getLanguages:m1,onLanguage:v1,onLanguageEncountered:b1,getEncodedLanguageId:_1,setLanguageConfiguration:y1,setColorMap:x1,registerTokensProviderFactory:L1,setTokensProvider:E1,setMonarchTokensProvider:M1,registerReferenceProvider:T1,registerRenameProvider:D1,registerNewSymbolNameProvider:N1,registerCompletionItemProvider:K1,registerSignatureHelpProvider:I1,registerHoverProvider:A1,registerDocumentSymbolProvider:R1,registerDocumentHighlightProvider:P1,registerLinkedEditingRangeProvider:O1,registerDefinitionProvider:F1,registerImplementationProvider:B1,registerTypeDefinitionProvider:z1,registerCodeLensProvider:V1,registerCodeActionProvider:W1,registerDocumentFormattingEditProvider:H1,registerDocumentRangeFormattingEditProvider:U1,registerOnTypeFormattingEditProvider:j1,registerLinkProvider:G1,registerColorProvider:$1,registerFoldingRangeProvider:q1,registerDeclarationProvider:Q1,registerSelectionRangeProvider:X1,registerDocumentSemanticTokensProvider:Y1,registerDocumentRangeSemanticTokensProvider:Z1,registerInlineCompletionsProvider:J1,registerInlineEditProvider:e2,registerInlayHintsProvider:t2,DocumentHighlightKind:AU.Kb,CompletionItemKind:AU.Io,CompletionItemTag:AU.QP,CompletionItemInsertTextRule:AU._E,SymbolKind:AU.v0,SymbolTag:AU.H_,IndentAction:AU.l,CompletionTriggerKind:AU.t7,SignatureHelpTriggerKind:AU.WA,InlayHintKind:AU.r4,InlineCompletionTriggerKind:AU.qw,InlineEditTriggerKind:AU.sm,CodeActionTriggerType:AU.ok,NewSymbolNameTag:AU.OV,NewSymbolNameTriggerKind:AU.YT,PartialAcceptTriggerKind:AU.Ah,HoverVerbosityAction:AU.M$,FoldingRangeKind:RI.lO,SelectedSuggestionInfo:RI.GE};const h2=l2.CancellationTokenSource,c2=l2.Emitter,d2=l2.KeyCode,u2=l2.KeyMod,g2=l2.Position,p2=l2.Range,f2=l2.Selection,m2=l2.SelectionDirection,_2=l2.MarkerSeverity,v2=l2.MarkerTag,b2=l2.Uri,y2=l2.Token,w2=l2.editor,C2=l2.languages,S2=globalThis.MonacoEnvironment;function x2(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function k2(){}(S2?.globalAPI||"function"===typeof define&&i.amdO)&&(globalThis.monaco=l2),"undefined"!==typeof globalThis.require&&"function"===typeof globalThis.require.config&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var L2=function(){return L2=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},L2.apply(this,arguments)};function E2(e){var i=e.width,n=e.height,r=e.value,o=e.defaultValue,a=e.language,l=e.theme,h=e.options,c=e.overrideServices,d=e.editorWillMount,u=e.editorDidMount,g=e.editorWillUnmount,p=e.onChange,f=e.className,m=e.original,_=e.originalUri,v=e.modifiedUri,b=(0,s.useRef)(null),y=(0,s.useRef)(null),w=(0,s.useRef)(null),C=(0,s.useRef)(null),S=x2(i),x=x2(n),k=(0,s.useMemo)((function(){return{width:S,height:x}}),[S,x]);return(0,s.useEffect)((function(){b.current&&(d(t),y.current=w2.createDiffEditor(b.current,L2(L2(L2({},f?{extraEditorClassName:f}:{}),h),l?{theme:l}:{}),c),function(){var e=null!=r?r:o,i=null===_||void 0===_?void 0:_(t),n=null===v||void 0===v?void 0:v(t),s=i&&w2.getModel(i),l=n&&w2.getModel(n);s?(s.setValue(m),w2.setModelLanguage(s,a)):s=w2.createModel(e,a,i),l?(s.setValue(e),w2.setModelLanguage(l,a)):l=w2.createModel(e,a,n),y.current.setModel({original:s,modified:l})}(),function(){u(y.current,t);var e=y.current.getModel().modified;w.current=e.onDidChangeContent((function(t){C.current||p(e.getValue(),t)}))}())}),[]),(0,s.useEffect)((function(){y.current&&y.current.updateOptions(L2(L2({},f?{extraEditorClassName:f}:{}),h))}),[f,h]),(0,s.useEffect)((function(){y.current&&y.current.layout()}),[i,n]),(0,s.useEffect)((function(){if(y.current){var e=y.current.getModel(),t=e.original,i=e.modified;w2.setModelLanguage(t,a),w2.setModelLanguage(i,a)}}),[a]),(0,s.useEffect)((function(){if(y.current){var e=y.current.getModel().modified;C.current=!0,y.current.getModifiedEditor().pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:r}]),y.current.getModifiedEditor().pushUndoStop(),C.current=!1}}),[r]),(0,s.useEffect)((function(){w2.setTheme(l)}),[l]),(0,s.useEffect)((function(){if(y.current){var e=y.current.getModel().original;m!==e.getValue()&&e.setValue(m)}}),[m]),(0,s.useEffect)((function(){return function(){if(y.current){g(y.current,t),y.current.dispose();var e=y.current.getModel(),i=e.original,n=e.modified;i&&i.dispose(),n&&n.dispose()}w.current&&w.current.dispose()}}),[]),s.createElement("div",{ref:b,style:k,className:"react-monaco-editor-container"})}E2.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:k2,editorDidMount:k2,editorWillUnmount:k2,onChange:k2,className:null},E2.displayName="MonacoDiffEditor";var M2=function(){return M2=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},M2.apply(this,arguments)},T2=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};function D2(e){var i=e.width,n=e.height,r=e.value,o=e.defaultValue,a=e.language,l=e.theme,h=e.options,c=e.overrideServices,d=e.editorWillMount,u=e.editorDidMount,g=e.editorWillUnmount,p=e.onChange,f=e.className,m=e.uri,_=(0,s.useRef)(null),v=(0,s.useRef)(null),b=(0,s.useRef)(null),y=(0,s.useRef)(null),w=x2(i),C=x2(n),S=(0,s.useRef)(p);S.current=p;var x=(0,s.useMemo)((function(){return{width:w,height:C}}),[w,C]);return(0,s.useEffect)((function(){var e=null!==r?r:o;if(_.current){var i=M2(M2({},h),d(t)||{}),n=null===m||void 0===m?void 0:m(t),s=n&&w2.getModel(n);s?(s.setValue(e),w2.setModelLanguage(s,a)):s=w2.createModel(e,a,n),v.current=w2.create(_.current,M2(M2(M2({model:s},f?{extraEditorClassName:f}:{}),i),l?{theme:l}:{}),c),u(v.current,t),b.current=v.current.onDidChangeModelContent((function(e){var t;y.current||null===(t=S.current)||void 0===t||t.call(S,v.current.getValue(),e)}))}}),[]),(0,s.useEffect)((function(){if(v.current){if(r===v.current.getValue())return;var e=v.current.getModel();y.current=!0,v.current.pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:r}],void 0),v.current.pushUndoStop(),y.current=!1}}),[r]),(0,s.useEffect)((function(){if(v.current){var e=v.current.getModel();w2.setModelLanguage(e,a)}}),[a]),(0,s.useEffect)((function(){if(v.current){h.model;var e=T2(h,["model"]);v.current.updateOptions(M2(M2({},f?{extraEditorClassName:f}:{}),e))}}),[f,h]),(0,s.useEffect)((function(){v.current&&v.current.layout()}),[i,n]),(0,s.useEffect)((function(){w2.setTheme(l)}),[l]),(0,s.useEffect)((function(){return function(){v.current&&(g(v.current,t),v.current.dispose()),b.current&&b.current.dispose()}}),[]),s.createElement("div",{ref:_,style:x,className:"react-monaco-editor-container"})}D2.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:k2,editorDidMount:k2,editorWillUnmount:k2,onChange:k2,className:null},D2.displayName="MonacoEditor";const N2=D2,I2=e=>{let{language:t,value:i,onChange:n,theme:s}=e;return(0,De.jsx)("div",{style:{height:"100%",width:"100%"},children:(0,De.jsx)(N2,{language:t,theme:s,value:i,onChange:n,options:{selectOnLineNumbers:!0},height:"100%",width:"100%"})})},A2=e=>{let{content:t}=e;return(0,De.jsxs)("div",{className:"bg-dark text-white p-2",style:{height:"100%",width:"100%",overflowY:"auto",display:"flex",flexDirection:"column"},children:[(0,De.jsx)("h5",{children:"Output"}),(0,De.jsx)("iframe",{title:"Output",srcDoc:t,sandbox:"allow-scripts",style:{width:"100%",height:"90%"}})]})},R2=()=>{const[e,t]=(0,s.useState)({"index.html":'<!DOCTYPE html>\n<html>\n  <head>\n    <title>Hello, World!</title>\n  </head>\n  <body>\n    <h1>Hello World!</h1>\n    <p id="currentTime"></p>\n    <script src="script.js"><\/script>\n  </body>\n</html>',"styles.css":"h1 { color: blue; }\np { font-style: italic; }","script.js":'document.getElementById("currentTime").innerText = new Date();'}),[i,n]=(0,s.useState)("index.html"),[r,o]=(0,s.useState)(""),[a,l]=(0,s.useState)("vs-dark"),[h,c]=(0,s.useState)(!1);return(0,De.jsxs)("div",{className:"flex h-screen "+(h?"bg-gray-900 text-white":"bg-gray-100 text-gray-800"),children:[(0,De.jsx)(Ma,{className:"w-64"}),(0,De.jsxs)("div",{className:"flex-grow p-6",children:[(0,De.jsxs)("header",{className:"flex justify-between items-center mb-6",children:[(0,De.jsx)("h1",{className:"text-2xl font-bold",children:"Online Code Compiler"}),(0,De.jsxs)("div",{children:[(0,De.jsx)("button",{onClick:()=>c(!h),className:"px-4 py-2 rounded shadow "+(h?"bg-gray-800 text-orange-500":"bg-orange-500 text-white"),children:h?"Light Mode":"Dark Mode"}),(0,De.jsx)("button",{onClick:()=>{const t=e["index.html"]||"",i=`<style>${e["styles.css"]||""}</style>`,n=`<script>${e["script.js"]||""}<\/script>`;o(t.replace("</head>",`${i}</head>`).replace("</body>",`${n}</body>`))},className:"ml-4 px-4 py-2 rounded shadow bg-orange-500 text-white hover:bg-orange-600",children:"Run Code"})]})]}),(0,De.jsx)("div",{className:"flex space-x-2 mb-4",children:Object.keys(e).map((e=>(0,De.jsx)("button",{className:"px-3 py-1 rounded-t shadow "+(i===e?"bg-orange-500 text-white":"bg-gray-200"),onClick:()=>n(e),children:e},e)))}),(0,De.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,De.jsx)("div",{className:"border p-4 rounded bg-gray-50 h-96",children:(0,De.jsx)(I2,{language:i.split(".").pop(),value:e[i],onChange:n=>((i,n)=>{t({...e,[i]:n})})(i,n)})}),(0,De.jsx)("div",{className:"border p-4 rounded bg-gray-50 h-96",children:(0,De.jsx)(A2,{content:r})})]})]})]})};function P2(){return(0,De.jsx)(xe,{children:(0,De.jsxs)(ve,{children:[(0,De.jsx)(me,{path:"/",element:(0,De.jsx)(PS,{})}),(0,De.jsx)(me,{path:"/Login",element:(0,De.jsx)(Ne,{})}),(0,De.jsx)(me,{path:"/SignUp",element:(0,De.jsx)(Ie,{})}),(0,De.jsx)(me,{path:"/Dashboard",element:(0,De.jsx)(Ta,{})}),(0,De.jsx)(me,{path:"/play-ground",element:(0,De.jsx)(R2,{})})]})})}o.createRoot(document.getElementById("root")).render((0,De.jsx)(s.StrictMode,{children:(0,De.jsx)(P2,{})}))})()})();
//# sourceMappingURL=main.25d515e1.js.map